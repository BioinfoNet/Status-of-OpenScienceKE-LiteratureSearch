
var copyright={log:function(productName,text,warningMsg){var wf=document.createElement('script'),s=document.scripts[0];wf.type='text/javascript';wf.src='https://cdn.rawgit.com/scottgonzalez/figlet-js/master/figlet.js';wf.onload=function(){Figlet.loadFont=function(name,fn){var url='https://cdn.rawgit.com/scottgonzalez/figlet-js/master/fonts/'+name+'.flf';if(window.XDomainRequest){if(window.location.href.indexOf("http://")===0)
url=url.replace('https','http');xdr=new XDomainRequest();xdr.open("get",url);xdr.onload=function(){fn(xdr.responseText);};xdr.send();}
else{var xhr=new XMLHttpRequest();xhr.open("GET",url,true);xhr.setRequestHeader("Content-type","application/x-www-form-urlencoded");xhr.onreadystatechange=function(){if(xhr.readyState==4&&xhr.status==200){fn(xhr.responseText);}}
xhr.send();}};plotting(productName,text,warningMsg);};s.parentNode.insertBefore(wf,s);function plotting(productName,text,warnMsg){Figlet.write(productName,'speed',function(str){var ie=(function(){var undef,rv=-1;var ua=window.navigator.userAgent;var msie=ua.indexOf('MSIE ');var trident=ua.indexOf('Trident/');var edge=ua.indexOf('Edge/');if(msie>0){rv=parseInt(ua.substring(msie+5,ua.indexOf('.',msie)),10);}else if(trident>0){var rvNum=ua.indexOf('rv:');rv=parseInt(ua.substring(rvNum+3,ua.indexOf('.',rvNum)),10);}else if(edge>0){parseInt(ua.substring(edge+5,ua.indexOf('.',edge)),10);}
return((rv>-1)?rv:undef);}());var informaTxt='           '+text;var space='                                                                                                                                                              ';var warningHeader='WARNING!';var warningMsg=warnMsg;if(ie){str.length>1024?str.split("\n").forEach(function(line){console.log(line);}):console.log(str);console.log(space+informaTxt+'\n'+warningHeader+'\n'+warningMsg);}else{console.log('%c'+str+'\n'+space+informaTxt+'\n\n\n%c'+warningHeader+'\n\n'+'%c'+warningMsg,'color: #006DB4;','color: red; font-size: 20px; line-height: 0.8','color: black; font-size: 14px; line-height: 1.7');}});}}};/*! jQuery v1.9.1 | (c) 2005, 2012 jQuery Foundation, Inc. | jquery.org/license
//@ sourceMappingURL=jquery.min.map
*/(function(e,t){var n,r,i=typeof t,o=e.document,a=e.location,s=e.jQuery,u=e.$,l={},c=[],p="1.9.1",f=c.concat,d=c.push,h=c.slice,g=c.indexOf,m=l.toString,y=l.hasOwnProperty,v=p.trim,b=function(e,t){return new b.fn.init(e,t,r)},x=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,w=/\S+/g,T=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,N=/^(?:(<[\w\W]+>)[^>]*|#([\w-]*))$/,C=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,k=/^[\],:{}\s]*$/,E=/(?:^|:|,)(?:\s*\[)+/g,S=/\\(?:["\\\/bfnrt]|u[\da-fA-F]{4})/g,A=/"[^"\\\r\n]*"|true|false|null|-?(?:\d+\.|)\d+(?:[eE][+-]?\d+|)/g,j=/^-ms-/,D=/-([\da-z])/gi,L=function(e,t){return t.toUpperCase()},H=function(e){(o.addEventListener||"load"===e.type||"complete"===o.readyState)&&(q(),b.ready())},q=function(){o.addEventListener?(o.removeEventListener("DOMContentLoaded",H,!1),e.removeEventListener("load",H,!1)):(o.detachEvent("onreadystatechange",H),e.detachEvent("onload",H))};b.fn=b.prototype={jquery:p,constructor:b,init:function(e,n,r){var i,a;if(!e)return this;if("string"==typeof e){if(i="<"===e.charAt(0)&&">"===e.charAt(e.length-1)&&e.length>=3?[null,e,null]:N.exec(e),!i||!i[1]&&n)return!n||n.jquery?(n||r).find(e):this.constructor(n).find(e);if(i[1]){if(n=n instanceof b?n[0]:n,b.merge(this,b.parseHTML(i[1],n&&n.nodeType?n.ownerDocument||n:o,!0)),C.test(i[1])&&b.isPlainObject(n))for(i in n)b.isFunction(this[i])?this[i](n[i]):this.attr(i,n[i]);return this}if(a=o.getElementById(i[2]),a&&a.parentNode){if(a.id!==i[2])return r.find(e);this.length=1,this[0]=a}return this.context=o,this.selector=e,this}return e.nodeType?(this.context=this[0]=e,this.length=1,this):b.isFunction(e)?r.ready(e):(e.selector!==t&&(this.selector=e.selector,this.context=e.context),b.makeArray(e,this))},selector:"",length:0,size:function(){return this.length},toArray:function(){return h.call(this)},get:function(e){return null==e?this.toArray():0>e?this[this.length+e]:this[e]},pushStack:function(e){var t=b.merge(this.constructor(),e);return t.prevObject=this,t.context=this.context,t},each:function(e,t){return b.each(this,e,t)},ready:function(e){return b.ready.promise().done(e),this},slice:function(){return this.pushStack(h.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(e){var t=this.length,n=+e+(0>e?t:0);return this.pushStack(n>=0&&t>n?[this[n]]:[])},map:function(e){return this.pushStack(b.map(this,function(t,n){return e.call(t,n,t)}))},end:function(){return this.prevObject||this.constructor(null)},push:d,sort:[].sort,splice:[].splice},b.fn.init.prototype=b.fn,b.extend=b.fn.extend=function(){var e,n,r,i,o,a,s=arguments[0]||{},u=1,l=arguments.length,c=!1;for("boolean"==typeof s&&(c=s,s=arguments[1]||{},u=2),"object"==typeof s||b.isFunction(s)||(s={}),l===u&&(s=this,--u);l>u;u++)if(null!=(o=arguments[u]))for(i in o)e=s[i],r=o[i],s!==r&&(c&&r&&(b.isPlainObject(r)||(n=b.isArray(r)))?(n?(n=!1,a=e&&b.isArray(e)?e:[]):a=e&&b.isPlainObject(e)?e:{},s[i]=b.extend(c,a,r)):r!==t&&(s[i]=r));return s},b.extend({noConflict:function(t){return e.$===b&&(e.$=u),t&&e.jQuery===b&&(e.jQuery=s),b},isReady:!1,readyWait:1,holdReady:function(e){e?b.readyWait++:b.ready(!0)},ready:function(e){if(e===!0?!--b.readyWait:!b.isReady){if(!o.body)return setTimeout(b.ready);b.isReady=!0,e!==!0&&--b.readyWait>0||(n.resolveWith(o,[b]),b.fn.trigger&&b(o).trigger("ready").off("ready"))}},isFunction:function(e){return"function"===b.type(e)},isArray:Array.isArray||function(e){return"array"===b.type(e)},isWindow:function(e){return null!=e&&e==e.window},isNumeric:function(e){return!isNaN(parseFloat(e))&&isFinite(e)},type:function(e){return null==e?e+"":"object"==typeof e||"function"==typeof e?l[m.call(e)]||"object":typeof e},isPlainObject:function(e){if(!e||"object"!==b.type(e)||e.nodeType||b.isWindow(e))return!1;try{if(e.constructor&&!y.call(e,"constructor")&&!y.call(e.constructor.prototype,"isPrototypeOf"))return!1}catch(n){return!1}var r;for(r in e);return r===t||y.call(e,r)},isEmptyObject:function(e){var t;for(t in e)return!1;return!0},error:function(e){throw Error(e)},parseHTML:function(e,t,n){if(!e||"string"!=typeof e)return null;"boolean"==typeof t&&(n=t,t=!1),t=t||o;var r=C.exec(e),i=!n&&[];return r?[t.createElement(r[1])]:(r=b.buildFragment([e],t,i),i&&b(i).remove(),b.merge([],r.childNodes))},parseJSON:function(n){return e.JSON&&e.JSON.parse?e.JSON.parse(n):null===n?n:"string"==typeof n&&(n=b.trim(n),n&&k.test(n.replace(S,"@").replace(A,"]").replace(E,"")))?Function("return "+n)():(b.error("Invalid JSON: "+n),t)},parseXML:function(n){var r,i;if(!n||"string"!=typeof n)return null;try{e.DOMParser?(i=new DOMParser,r=i.parseFromString(n,"text/xml")):(r=new ActiveXObject("Microsoft.XMLDOM"),r.async="false",r.loadXML(n))}catch(o){r=t}return r&&r.documentElement&&!r.getElementsByTagName("parsererror").length||b.error("Invalid XML: "+n),r},noop:function(){},globalEval:function(t){t&&b.trim(t)&&(e.execScript||function(t){e.eval.call(e,t)})(t)},camelCase:function(e){return e.replace(j,"ms-").replace(D,L)},nodeName:function(e,t){return e.nodeName&&e.nodeName.toLowerCase()===t.toLowerCase()},each:function(e,t,n){var r,i=0,o=e.length,a=M(e);if(n){if(a){for(;o>i;i++)if(r=t.apply(e[i],n),r===!1)break}else for(i in e)if(r=t.apply(e[i],n),r===!1)break}else if(a){for(;o>i;i++)if(r=t.call(e[i],i,e[i]),r===!1)break}else for(i in e)if(r=t.call(e[i],i,e[i]),r===!1)break;return e},trim:v&&!v.call("\ufeff\u00a0")?function(e){return null==e?"":v.call(e)}:function(e){return null==e?"":(e+"").replace(T,"")},makeArray:function(e,t){var n=t||[];return null!=e&&(M(Object(e))?b.merge(n,"string"==typeof e?[e]:e):d.call(n,e)),n},inArray:function(e,t,n){var r;if(t){if(g)return g.call(t,e,n);for(r=t.length,n=n?0>n?Math.max(0,r+n):n:0;r>n;n++)if(n in t&&t[n]===e)return n}return-1},merge:function(e,n){var r=n.length,i=e.length,o=0;if("number"==typeof r)for(;r>o;o++)e[i++]=n[o];else while(n[o]!==t)e[i++]=n[o++];return e.length=i,e},grep:function(e,t,n){var r,i=[],o=0,a=e.length;for(n=!!n;a>o;o++)r=!!t(e[o],o),n!==r&&i.push(e[o]);return i},map:function(e,t,n){var r,i=0,o=e.length,a=M(e),s=[];if(a)for(;o>i;i++)r=t(e[i],i,n),null!=r&&(s[s.length]=r);else for(i in e)r=t(e[i],i,n),null!=r&&(s[s.length]=r);return f.apply([],s)},guid:1,proxy:function(e,n){var r,i,o;return"string"==typeof n&&(o=e[n],n=e,e=o),b.isFunction(e)?(r=h.call(arguments,2),i=function(){return e.apply(n||this,r.concat(h.call(arguments)))},i.guid=e.guid=e.guid||b.guid++,i):t},access:function(e,n,r,i,o,a,s){var u=0,l=e.length,c=null==r;if("object"===b.type(r)){o=!0;for(u in r)b.access(e,n,u,r[u],!0,a,s)}else if(i!==t&&(o=!0,b.isFunction(i)||(s=!0),c&&(s?(n.call(e,i),n=null):(c=n,n=function(e,t,n){return c.call(b(e),n)})),n))for(;l>u;u++)n(e[u],r,s?i:i.call(e[u],u,n(e[u],r)));return o?e:c?n.call(e):l?n(e[0],r):a},now:function(){return(new Date).getTime()}}),b.ready.promise=function(t){if(!n)if(n=b.Deferred(),"complete"===o.readyState)setTimeout(b.ready);else if(o.addEventListener)o.addEventListener("DOMContentLoaded",H,!1),e.addEventListener("load",H,!1);else{o.attachEvent("onreadystatechange",H),e.attachEvent("onload",H);var r=!1;try{r=null==e.frameElement&&o.documentElement}catch(i){}r&&r.doScroll&&function a(){if(!b.isReady){try{r.doScroll("left")}catch(e){return setTimeout(a,50)}q(),b.ready()}}()}return n.promise(t)},b.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),function(e,t){l["[object "+t+"]"]=t.toLowerCase()});function M(e){var t=e.length,n=b.type(e);return b.isWindow(e)?!1:1===e.nodeType&&t?!0:"array"===n||"function"!==n&&(0===t||"number"==typeof t&&t>0&&t-1 in e)}r=b(o);var _={};function F(e){var t=_[e]={};return b.each(e.match(w)||[],function(e,n){t[n]=!0}),t}b.Callbacks=function(e){e="string"==typeof e?_[e]||F(e):b.extend({},e);var n,r,i,o,a,s,u=[],l=!e.once&&[],c=function(t){for(r=e.memory&&t,i=!0,a=s||0,s=0,o=u.length,n=!0;u&&o>a;a++)if(u[a].apply(t[0],t[1])===!1&&e.stopOnFalse){r=!1;break}n=!1,u&&(l?l.length&&c(l.shift()):r?u=[]:p.disable())},p={add:function(){if(u){var t=u.length;(function i(t){b.each(t,function(t,n){var r=b.type(n);"function"===r?e.unique&&p.has(n)||u.push(n):n&&n.length&&"string"!==r&&i(n)})})(arguments),n?o=u.length:r&&(s=t,c(r))}return this},remove:function(){return u&&b.each(arguments,function(e,t){var r;while((r=b.inArray(t,u,r))>-1)u.splice(r,1),n&&(o>=r&&o--,a>=r&&a--)}),this},has:function(e){return e?b.inArray(e,u)>-1:!(!u||!u.length)},empty:function(){return u=[],this},disable:function(){return u=l=r=t,this},disabled:function(){return!u},lock:function(){return l=t,r||p.disable(),this},locked:function(){return!l},fireWith:function(e,t){return t=t||[],t=[e,t.slice?t.slice():t],!u||i&&!l||(n?l.push(t):c(t)),this},fire:function(){return p.fireWith(this,arguments),this},fired:function(){return!!i}};return p},b.extend({Deferred:function(e){var t=[["resolve","done",b.Callbacks("once memory"),"resolved"],["reject","fail",b.Callbacks("once memory"),"rejected"],["notify","progress",b.Callbacks("memory")]],n="pending",r={state:function(){return n},always:function(){return i.done(arguments).fail(arguments),this},then:function(){var e=arguments;return b.Deferred(function(n){b.each(t,function(t,o){var a=o[0],s=b.isFunction(e[t])&&e[t];i[o[1]](function(){var e=s&&s.apply(this,arguments);e&&b.isFunction(e.promise)?e.promise().done(n.resolve).fail(n.reject).progress(n.notify):n[a+"With"](this===r?n.promise():this,s?[e]:arguments)})}),e=null}).promise()},promise:function(e){return null!=e?b.extend(e,r):r}},i={};return r.pipe=r.then,b.each(t,function(e,o){var a=o[2],s=o[3];r[o[1]]=a.add,s&&a.add(function(){n=s},t[1^e][2].disable,t[2][2].lock),i[o[0]]=function(){return i[o[0]+"With"](this===i?r:this,arguments),this},i[o[0]+"With"]=a.fireWith}),r.promise(i),e&&e.call(i,i),i},when:function(e){var t=0,n=h.call(arguments),r=n.length,i=1!==r||e&&b.isFunction(e.promise)?r:0,o=1===i?e:b.Deferred(),a=function(e,t,n){return function(r){t[e]=this,n[e]=arguments.length>1?h.call(arguments):r,n===s?o.notifyWith(t,n):--i||o.resolveWith(t,n)}},s,u,l;if(r>1)for(s=Array(r),u=Array(r),l=Array(r);r>t;t++)n[t]&&b.isFunction(n[t].promise)?n[t].promise().done(a(t,l,n)).fail(o.reject).progress(a(t,u,s)):--i;return i||o.resolveWith(l,n),o.promise()}}),b.support=function(){var t,n,r,a,s,u,l,c,p,f,d=o.createElement("div");if(d.setAttribute("className","t"),d.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",n=d.getElementsByTagName("*"),r=d.getElementsByTagName("a")[0],!n||!r||!n.length)return{};s=o.createElement("select"),l=s.appendChild(o.createElement("option")),a=d.getElementsByTagName("input")[0],r.style.cssText="top:1px;float:left;opacity:.5",t={getSetAttribute:"t"!==d.className,leadingWhitespace:3===d.firstChild.nodeType,tbody:!d.getElementsByTagName("tbody").length,htmlSerialize:!!d.getElementsByTagName("link").length,style:/top/.test(r.getAttribute("style")),hrefNormalized:"/a"===r.getAttribute("href"),opacity:/^0.5/.test(r.style.opacity),cssFloat:!!r.style.cssFloat,checkOn:!!a.value,optSelected:l.selected,enctype:!!o.createElement("form").enctype,html5Clone:"<:nav></:nav>"!==o.createElement("nav").cloneNode(!0).outerHTML,boxModel:"CSS1Compat"===o.compatMode,deleteExpando:!0,noCloneEvent:!0,inlineBlockNeedsLayout:!1,shrinkWrapBlocks:!1,reliableMarginRight:!0,boxSizingReliable:!0,pixelPosition:!1},a.checked=!0,t.noCloneChecked=a.cloneNode(!0).checked,s.disabled=!0,t.optDisabled=!l.disabled;try{delete d.test}catch(h){t.deleteExpando=!1}a=o.createElement("input"),a.setAttribute("value",""),t.input=""===a.getAttribute("value"),a.value="t",a.setAttribute("type","radio"),t.radioValue="t"===a.value,a.setAttribute("checked","t"),a.setAttribute("name","t"),u=o.createDocumentFragment(),u.appendChild(a),t.appendChecked=a.checked,t.checkClone=u.cloneNode(!0).cloneNode(!0).lastChild.checked,d.attachEvent&&(d.attachEvent("onclick",function(){t.noCloneEvent=!1}),d.cloneNode(!0).click());for(f in{submit:!0,change:!0,focusin:!0})d.setAttribute(c="on"+f,"t"),t[f+"Bubbles"]=c in e||d.attributes[c].expando===!1;return d.style.backgroundClip="content-box",d.cloneNode(!0).style.backgroundClip="",t.clearCloneStyle="content-box"===d.style.backgroundClip,b(function(){var n,r,a,s="padding:0;margin:0;border:0;display:block;box-sizing:content-box;-moz-box-sizing:content-box;-webkit-box-sizing:content-box;",u=o.getElementsByTagName("body")[0];u&&(n=o.createElement("div"),n.style.cssText="border:0;width:0;height:0;position:absolute;top:0;left:-9999px;margin-top:1px",u.appendChild(n).appendChild(d),d.innerHTML="<table><tr><td></td><td>t</td></tr></table>",a=d.getElementsByTagName("td"),a[0].style.cssText="padding:0;margin:0;border:0;display:none",p=0===a[0].offsetHeight,a[0].style.display="",a[1].style.display="none",t.reliableHiddenOffsets=p&&0===a[0].offsetHeight,d.innerHTML="",d.style.cssText="box-sizing:border-box;-moz-box-sizing:border-box;-webkit-box-sizing:border-box;padding:1px;border:1px;display:block;width:4px;margin-top:1%;position:absolute;top:1%;",t.boxSizing=4===d.offsetWidth,t.doesNotIncludeMarginInBodyOffset=1!==u.offsetTop,e.getComputedStyle&&(t.pixelPosition="1%"!==(e.getComputedStyle(d,null)||{}).top,t.boxSizingReliable="4px"===(e.getComputedStyle(d,null)||{width:"4px"}).width,r=d.appendChild(o.createElement("div")),r.style.cssText=d.style.cssText=s,r.style.marginRight=r.style.width="0",d.style.width="1px",t.reliableMarginRight=!parseFloat((e.getComputedStyle(r,null)||{}).marginRight)),typeof d.style.zoom!==i&&(d.innerHTML="",d.style.cssText=s+"width:1px;padding:1px;display:inline;zoom:1",t.inlineBlockNeedsLayout=3===d.offsetWidth,d.style.display="block",d.innerHTML="<div></div>",d.firstChild.style.width="5px",t.shrinkWrapBlocks=3!==d.offsetWidth,t.inlineBlockNeedsLayout&&(u.style.zoom=1)),u.removeChild(n),n=d=a=r=null)}),n=s=u=l=r=a=null,t}();var O=/(?:\{[\s\S]*\}|\[[\s\S]*\])$/,B=/([A-Z])/g;function P(e,n,r,i){if(b.acceptData(e)){var o,a,s=b.expando,u="string"==typeof n,l=e.nodeType,p=l?b.cache:e,f=l?e[s]:e[s]&&s;if(f&&p[f]&&(i||p[f].data)||!u||r!==t)return f||(l?e[s]=f=c.pop()||b.guid++:f=s),p[f]||(p[f]={},l||(p[f].toJSON=b.noop)),("object"==typeof n||"function"==typeof n)&&(i?p[f]=b.extend(p[f],n):p[f].data=b.extend(p[f].data,n)),o=p[f],i||(o.data||(o.data={}),o=o.data),r!==t&&(o[b.camelCase(n)]=r),u?(a=o[n],null==a&&(a=o[b.camelCase(n)])):a=o,a}}function R(e,t,n){if(b.acceptData(e)){var r,i,o,a=e.nodeType,s=a?b.cache:e,u=a?e[b.expando]:b.expando;if(s[u]){if(t&&(o=n?s[u]:s[u].data)){b.isArray(t)?t=t.concat(b.map(t,b.camelCase)):t in o?t=[t]:(t=b.camelCase(t),t=t in o?[t]:t.split(" "));for(r=0,i=t.length;i>r;r++)delete o[t[r]];if(!(n?$:b.isEmptyObject)(o))return}(n||(delete s[u].data,$(s[u])))&&(a?b.cleanData([e],!0):b.support.deleteExpando||s!=s.window?delete s[u]:s[u]=null)}}}b.extend({cache:{},expando:"jQuery"+(p+Math.random()).replace(/\D/g,""),noData:{embed:!0,object:"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000",applet:!0},hasData:function(e){return e=e.nodeType?b.cache[e[b.expando]]:e[b.expando],!!e&&!$(e)},data:function(e,t,n){return P(e,t,n)},removeData:function(e,t){return R(e,t)},_data:function(e,t,n){return P(e,t,n,!0)},_removeData:function(e,t){return R(e,t,!0)},acceptData:function(e){if(e.nodeType&&1!==e.nodeType&&9!==e.nodeType)return!1;var t=e.nodeName&&b.noData[e.nodeName.toLowerCase()];return!t||t!==!0&&e.getAttribute("classid")===t}}),b.fn.extend({data:function(e,n){var r,i,o=this[0],a=0,s=null;if(e===t){if(this.length&&(s=b.data(o),1===o.nodeType&&!b._data(o,"parsedAttrs"))){for(r=o.attributes;r.length>a;a++)i=r[a].name,i.indexOf("data-")||(i=b.camelCase(i.slice(5)),W(o,i,s[i]));b._data(o,"parsedAttrs",!0)}return s}return"object"==typeof e?this.each(function(){b.data(this,e)}):b.access(this,function(n){return n===t?o?W(o,e,b.data(o,e)):null:(this.each(function(){b.data(this,e,n)}),t)},null,n,arguments.length>1,null,!0)},removeData:function(e){return this.each(function(){b.removeData(this,e)})}});function W(e,n,r){if(r===t&&1===e.nodeType){var i="data-"+n.replace(B,"-$1").toLowerCase();if(r=e.getAttribute(i),"string"==typeof r){try{r="true"===r?!0:"false"===r?!1:"null"===r?null:+r+""===r?+r:O.test(r)?b.parseJSON(r):r}catch(o){}b.data(e,n,r)}else r=t}return r}function $(e){var t;for(t in e)if(("data"!==t||!b.isEmptyObject(e[t]))&&"toJSON"!==t)return!1;return!0}b.extend({queue:function(e,n,r){var i;return e?(n=(n||"fx")+"queue",i=b._data(e,n),r&&(!i||b.isArray(r)?i=b._data(e,n,b.makeArray(r)):i.push(r)),i||[]):t},dequeue:function(e,t){t=t||"fx";var n=b.queue(e,t),r=n.length,i=n.shift(),o=b._queueHooks(e,t),a=function(){b.dequeue(e,t)};"inprogress"===i&&(i=n.shift(),r--),o.cur=i,i&&("fx"===t&&n.unshift("inprogress"),delete o.stop,i.call(e,a,o)),!r&&o&&o.empty.fire()},_queueHooks:function(e,t){var n=t+"queueHooks";return b._data(e,n)||b._data(e,n,{empty:b.Callbacks("once memory").add(function(){b._removeData(e,t+"queue"),b._removeData(e,n)})})}}),b.fn.extend({queue:function(e,n){var r=2;return"string"!=typeof e&&(n=e,e="fx",r--),r>arguments.length?b.queue(this[0],e):n===t?this:this.each(function(){var t=b.queue(this,e,n);b._queueHooks(this,e),"fx"===e&&"inprogress"!==t[0]&&b.dequeue(this,e)})},dequeue:function(e){return this.each(function(){b.dequeue(this,e)})},delay:function(e,t){return e=b.fx?b.fx.speeds[e]||e:e,t=t||"fx",this.queue(t,function(t,n){var r=setTimeout(t,e);n.stop=function(){clearTimeout(r)}})},clearQueue:function(e){return this.queue(e||"fx",[])},promise:function(e,n){var r,i=1,o=b.Deferred(),a=this,s=this.length,u=function(){--i||o.resolveWith(a,[a])};"string"!=typeof e&&(n=e,e=t),e=e||"fx";while(s--)r=b._data(a[s],e+"queueHooks"),r&&r.empty&&(i++,r.empty.add(u));return u(),o.promise(n)}});var I,z,X=/[\t\r\n]/g,U=/\r/g,V=/^(?:input|select|textarea|button|object)$/i,Y=/^(?:a|area)$/i,J=/^(?:checked|selected|autofocus|autoplay|async|controls|defer|disabled|hidden|loop|multiple|open|readonly|required|scoped)$/i,G=/^(?:checked|selected)$/i,Q=b.support.getSetAttribute,K=b.support.input;b.fn.extend({attr:function(e,t){return b.access(this,b.attr,e,t,arguments.length>1)},removeAttr:function(e){return this.each(function(){b.removeAttr(this,e)})},prop:function(e,t){return b.access(this,b.prop,e,t,arguments.length>1)},removeProp:function(e){return e=b.propFix[e]||e,this.each(function(){try{this[e]=t,delete this[e]}catch(n){}})},addClass:function(e){var t,n,r,i,o,a=0,s=this.length,u="string"==typeof e&&e;if(b.isFunction(e))return this.each(function(t){b(this).addClass(e.call(this,t,this.className))});if(u)for(t=(e||"").match(w)||[];s>a;a++)if(n=this[a],r=1===n.nodeType&&(n.className?(" "+n.className+" ").replace(X," "):" ")){o=0;while(i=t[o++])0>r.indexOf(" "+i+" ")&&(r+=i+" ");n.className=b.trim(r)}return this},removeClass:function(e){var t,n,r,i,o,a=0,s=this.length,u=0===arguments.length||"string"==typeof e&&e;if(b.isFunction(e))return this.each(function(t){b(this).removeClass(e.call(this,t,this.className))});if(u)for(t=(e||"").match(w)||[];s>a;a++)if(n=this[a],r=1===n.nodeType&&(n.className?(" "+n.className+" ").replace(X," "):"")){o=0;while(i=t[o++])while(r.indexOf(" "+i+" ")>=0)r=r.replace(" "+i+" "," ");n.className=e?b.trim(r):""}return this},toggleClass:function(e,t){var n=typeof e,r="boolean"==typeof t;return b.isFunction(e)?this.each(function(n){b(this).toggleClass(e.call(this,n,this.className,t),t)}):this.each(function(){if("string"===n){var o,a=0,s=b(this),u=t,l=e.match(w)||[];while(o=l[a++])u=r?u:!s.hasClass(o),s[u?"addClass":"removeClass"](o)}else(n===i||"boolean"===n)&&(this.className&&b._data(this,"__className__",this.className),this.className=this.className||e===!1?"":b._data(this,"__className__")||"")})},hasClass:function(e){var t=" "+e+" ",n=0,r=this.length;for(;r>n;n++)if(1===this[n].nodeType&&(" "+this[n].className+" ").replace(X," ").indexOf(t)>=0)return!0;return!1},val:function(e){var n,r,i,o=this[0];{if(arguments.length)return i=b.isFunction(e),this.each(function(n){var o,a=b(this);1===this.nodeType&&(o=i?e.call(this,n,a.val()):e,null==o?o="":"number"==typeof o?o+="":b.isArray(o)&&(o=b.map(o,function(e){return null==e?"":e+""})),r=b.valHooks[this.type]||b.valHooks[this.nodeName.toLowerCase()],r&&"set"in r&&r.set(this,o,"value")!==t||(this.value=o))});if(o)return r=b.valHooks[o.type]||b.valHooks[o.nodeName.toLowerCase()],r&&"get"in r&&(n=r.get(o,"value"))!==t?n:(n=o.value,"string"==typeof n?n.replace(U,""):null==n?"":n)}}}),b.extend({valHooks:{option:{get:function(e){var t=e.attributes.value;return!t||t.specified?e.value:e.text}},select:{get:function(e){var t,n,r=e.options,i=e.selectedIndex,o="select-one"===e.type||0>i,a=o?null:[],s=o?i+1:r.length,u=0>i?s:o?i:0;for(;s>u;u++)if(n=r[u],!(!n.selected&&u!==i||(b.support.optDisabled?n.disabled:null!==n.getAttribute("disabled"))||n.parentNode.disabled&&b.nodeName(n.parentNode,"optgroup"))){if(t=b(n).val(),o)return t;a.push(t)}return a},set:function(e,t){var n=b.makeArray(t);return b(e).find("option").each(function(){this.selected=b.inArray(b(this).val(),n)>=0}),n.length||(e.selectedIndex=-1),n}}},attr:function(e,n,r){var o,a,s,u=e.nodeType;if(e&&3!==u&&8!==u&&2!==u)return typeof e.getAttribute===i?b.prop(e,n,r):(a=1!==u||!b.isXMLDoc(e),a&&(n=n.toLowerCase(),o=b.attrHooks[n]||(J.test(n)?z:I)),r===t?o&&a&&"get"in o&&null!==(s=o.get(e,n))?s:(typeof e.getAttribute!==i&&(s=e.getAttribute(n)),null==s?t:s):null!==r?o&&a&&"set"in o&&(s=o.set(e,r,n))!==t?s:(e.setAttribute(n,r+""),r):(b.removeAttr(e,n),t))},removeAttr:function(e,t){var n,r,i=0,o=t&&t.match(w);if(o&&1===e.nodeType)while(n=o[i++])r=b.propFix[n]||n,J.test(n)?!Q&&G.test(n)?e[b.camelCase("default-"+n)]=e[r]=!1:e[r]=!1:b.attr(e,n,""),e.removeAttribute(Q?n:r)},attrHooks:{type:{set:function(e,t){if(!b.support.radioValue&&"radio"===t&&b.nodeName(e,"input")){var n=e.value;return e.setAttribute("type",t),n&&(e.value=n),t}}}},propFix:{tabindex:"tabIndex",readonly:"readOnly","for":"htmlFor","class":"className",maxlength:"maxLength",cellspacing:"cellSpacing",cellpadding:"cellPadding",rowspan:"rowSpan",colspan:"colSpan",usemap:"useMap",frameborder:"frameBorder",contenteditable:"contentEditable"},prop:function(e,n,r){var i,o,a,s=e.nodeType;if(e&&3!==s&&8!==s&&2!==s)return a=1!==s||!b.isXMLDoc(e),a&&(n=b.propFix[n]||n,o=b.propHooks[n]),r!==t?o&&"set"in o&&(i=o.set(e,r,n))!==t?i:e[n]=r:o&&"get"in o&&null!==(i=o.get(e,n))?i:e[n]},propHooks:{tabIndex:{get:function(e){var n=e.getAttributeNode("tabindex");return n&&n.specified?parseInt(n.value,10):V.test(e.nodeName)||Y.test(e.nodeName)&&e.href?0:t}}}}),z={get:function(e,n){var r=b.prop(e,n),i="boolean"==typeof r&&e.getAttribute(n),o="boolean"==typeof r?K&&Q?null!=i:G.test(n)?e[b.camelCase("default-"+n)]:!!i:e.getAttributeNode(n);return o&&o.value!==!1?n.toLowerCase():t},set:function(e,t,n){return t===!1?b.removeAttr(e,n):K&&Q||!G.test(n)?e.setAttribute(!Q&&b.propFix[n]||n,n):e[b.camelCase("default-"+n)]=e[n]=!0,n}},K&&Q||(b.attrHooks.value={get:function(e,n){var r=e.getAttributeNode(n);return b.nodeName(e,"input")?e.defaultValue:r&&r.specified?r.value:t},set:function(e,n,r){return b.nodeName(e,"input")?(e.defaultValue=n,t):I&&I.set(e,n,r)}}),Q||(I=b.valHooks.button={get:function(e,n){var r=e.getAttributeNode(n);return r&&("id"===n||"name"===n||"coords"===n?""!==r.value:r.specified)?r.value:t},set:function(e,n,r){var i=e.getAttributeNode(r);return i||e.setAttributeNode(i=e.ownerDocument.createAttribute(r)),i.value=n+="","value"===r||n===e.getAttribute(r)?n:t}},b.attrHooks.contenteditable={get:I.get,set:function(e,t,n){I.set(e,""===t?!1:t,n)}},b.each(["width","height"],function(e,n){b.attrHooks[n]=b.extend(b.attrHooks[n],{set:function(e,r){return""===r?(e.setAttribute(n,"auto"),r):t}})})),b.support.hrefNormalized||(b.each(["href","src","width","height"],function(e,n){b.attrHooks[n]=b.extend(b.attrHooks[n],{get:function(e){var r=e.getAttribute(n,2);return null==r?t:r}})}),b.each(["href","src"],function(e,t){b.propHooks[t]={get:function(e){return e.getAttribute(t,4)}}})),b.support.style||(b.attrHooks.style={get:function(e){return e.style.cssText||t},set:function(e,t){return e.style.cssText=t+""}}),b.support.optSelected||(b.propHooks.selected=b.extend(b.propHooks.selected,{get:function(e){var t=e.parentNode;return t&&(t.selectedIndex,t.parentNode&&t.parentNode.selectedIndex),null}})),b.support.enctype||(b.propFix.enctype="encoding"),b.support.checkOn||b.each(["radio","checkbox"],function(){b.valHooks[this]={get:function(e){return null===e.getAttribute("value")?"on":e.value}}}),b.each(["radio","checkbox"],function(){b.valHooks[this]=b.extend(b.valHooks[this],{set:function(e,n){return b.isArray(n)?e.checked=b.inArray(b(e).val(),n)>=0:t}})});var Z=/^(?:input|select|textarea)$/i,et=/^key/,tt=/^(?:mouse|contextmenu)|click/,nt=/^(?:focusinfocus|focusoutblur)$/,rt=/^([^.]*)(?:\.(.+)|)$/;function it(){return!0}function ot(){return!1}b.event={global:{},add:function(e,n,r,o,a){var s,u,l,c,p,f,d,h,g,m,y,v=b._data(e);if(v){r.handler&&(c=r,r=c.handler,a=c.selector),r.guid||(r.guid=b.guid++),(u=v.events)||(u=v.events={}),(f=v.handle)||(f=v.handle=function(e){return typeof b===i||e&&b.event.triggered===e.type?t:b.event.dispatch.apply(f.elem,arguments)},f.elem=e),n=(n||"").match(w)||[""],l=n.length;while(l--)s=rt.exec(n[l])||[],g=y=s[1],m=(s[2]||"").split(".").sort(),p=b.event.special[g]||{},g=(a?p.delegateType:p.bindType)||g,p=b.event.special[g]||{},d=b.extend({type:g,origType:y,data:o,handler:r,guid:r.guid,selector:a,needsContext:a&&b.expr.match.needsContext.test(a),namespace:m.join(".")},c),(h=u[g])||(h=u[g]=[],h.delegateCount=0,p.setup&&p.setup.call(e,o,m,f)!==!1||(e.addEventListener?e.addEventListener(g,f,!1):e.attachEvent&&e.attachEvent("on"+g,f))),p.add&&(p.add.call(e,d),d.handler.guid||(d.handler.guid=r.guid)),a?h.splice(h.delegateCount++,0,d):h.push(d),b.event.global[g]=!0;e=null}},remove:function(e,t,n,r,i){var o,a,s,u,l,c,p,f,d,h,g,m=b.hasData(e)&&b._data(e);if(m&&(c=m.events)){t=(t||"").match(w)||[""],l=t.length;while(l--)if(s=rt.exec(t[l])||[],d=g=s[1],h=(s[2]||"").split(".").sort(),d){p=b.event.special[d]||{},d=(r?p.delegateType:p.bindType)||d,f=c[d]||[],s=s[2]&&RegExp("(^|\\.)"+h.join("\\.(?:.*\\.|)")+"(\\.|$)"),u=o=f.length;while(o--)a=f[o],!i&&g!==a.origType||n&&n.guid!==a.guid||s&&!s.test(a.namespace)||r&&r!==a.selector&&("**"!==r||!a.selector)||(f.splice(o,1),a.selector&&f.delegateCount--,p.remove&&p.remove.call(e,a));u&&!f.length&&(p.teardown&&p.teardown.call(e,h,m.handle)!==!1||b.removeEvent(e,d,m.handle),delete c[d])}else for(d in c)b.event.remove(e,d+t[l],n,r,!0);b.isEmptyObject(c)&&(delete m.handle,b._removeData(e,"events"))}},trigger:function(n,r,i,a){var s,u,l,c,p,f,d,h=[i||o],g=y.call(n,"type")?n.type:n,m=y.call(n,"namespace")?n.namespace.split("."):[];if(l=f=i=i||o,3!==i.nodeType&&8!==i.nodeType&&!nt.test(g+b.event.triggered)&&(g.indexOf(".")>=0&&(m=g.split("."),g=m.shift(),m.sort()),u=0>g.indexOf(":")&&"on"+g,n=n[b.expando]?n:new b.Event(g,"object"==typeof n&&n),n.isTrigger=!0,n.namespace=m.join("."),n.namespace_re=n.namespace?RegExp("(^|\\.)"+m.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,n.result=t,n.target||(n.target=i),r=null==r?[n]:b.makeArray(r,[n]),p=b.event.special[g]||{},a||!p.trigger||p.trigger.apply(i,r)!==!1)){if(!a&&!p.noBubble&&!b.isWindow(i)){for(c=p.delegateType||g,nt.test(c+g)||(l=l.parentNode);l;l=l.parentNode)h.push(l),f=l;f===(i.ownerDocument||o)&&h.push(f.defaultView||f.parentWindow||e)}d=0;while((l=h[d++])&&!n.isPropagationStopped())n.type=d>1?c:p.bindType||g,s=(b._data(l,"events")||{})[n.type]&&b._data(l,"handle"),s&&s.apply(l,r),s=u&&l[u],s&&b.acceptData(l)&&s.apply&&s.apply(l,r)===!1&&n.preventDefault();if(n.type=g,!(a||n.isDefaultPrevented()||p._default&&p._default.apply(i.ownerDocument,r)!==!1||"click"===g&&b.nodeName(i,"a")||!b.acceptData(i)||!u||!i[g]||b.isWindow(i))){f=i[u],f&&(i[u]=null),b.event.triggered=g;try{i[g]()}catch(v){}b.event.triggered=t,f&&(i[u]=f)}return n.result}},dispatch:function(e){e=b.event.fix(e);var n,r,i,o,a,s=[],u=h.call(arguments),l=(b._data(this,"events")||{})[e.type]||[],c=b.event.special[e.type]||{};if(u[0]=e,e.delegateTarget=this,!c.preDispatch||c.preDispatch.call(this,e)!==!1){s=b.event.handlers.call(this,e,l),n=0;while((o=s[n++])&&!e.isPropagationStopped()){e.currentTarget=o.elem,a=0;while((i=o.handlers[a++])&&!e.isImmediatePropagationStopped())(!e.namespace_re||e.namespace_re.test(i.namespace))&&(e.handleObj=i,e.data=i.data,r=((b.event.special[i.origType]||{}).handle||i.handler).apply(o.elem,u),r!==t&&(e.result=r)===!1&&(e.preventDefault(),e.stopPropagation()))}return c.postDispatch&&c.postDispatch.call(this,e),e.result}},handlers:function(e,n){var r,i,o,a,s=[],u=n.delegateCount,l=e.target;if(u&&l.nodeType&&(!e.button||"click"!==e.type))for(;l!=this;l=l.parentNode||this)if(1===l.nodeType&&(l.disabled!==!0||"click"!==e.type)){for(o=[],a=0;u>a;a++)i=n[a],r=i.selector+" ",o[r]===t&&(o[r]=i.needsContext?b(r,this).index(l)>=0:b.find(r,this,null,[l]).length),o[r]&&o.push(i);o.length&&s.push({elem:l,handlers:o})}return n.length>u&&s.push({elem:this,handlers:n.slice(u)}),s},fix:function(e){if(e[b.expando])return e;var t,n,r,i=e.type,a=e,s=this.fixHooks[i];s||(this.fixHooks[i]=s=tt.test(i)?this.mouseHooks:et.test(i)?this.keyHooks:{}),r=s.props?this.props.concat(s.props):this.props,e=new b.Event(a),t=r.length;while(t--)n=r[t],e[n]=a[n];return e.target||(e.target=a.srcElement||o),3===e.target.nodeType&&(e.target=e.target.parentNode),e.metaKey=!!e.metaKey,s.filter?s.filter(e,a):e},props:"altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(e,t){return null==e.which&&(e.which=null!=t.charCode?t.charCode:t.keyCode),e}},mouseHooks:{props:"button buttons clientX clientY fromElement offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(e,n){var r,i,a,s=n.button,u=n.fromElement;return null==e.pageX&&null!=n.clientX&&(i=e.target.ownerDocument||o,a=i.documentElement,r=i.body,e.pageX=n.clientX+(a&&a.scrollLeft||r&&r.scrollLeft||0)-(a&&a.clientLeft||r&&r.clientLeft||0),e.pageY=n.clientY+(a&&a.scrollTop||r&&r.scrollTop||0)-(a&&a.clientTop||r&&r.clientTop||0)),!e.relatedTarget&&u&&(e.relatedTarget=u===e.target?n.toElement:u),e.which||s===t||(e.which=1&s?1:2&s?3:4&s?2:0),e}},special:{load:{noBubble:!0},click:{trigger:function(){return b.nodeName(this,"input")&&"checkbox"===this.type&&this.click?(this.click(),!1):t}},focus:{trigger:function(){if(this!==o.activeElement&&this.focus)try{return this.focus(),!1}catch(e){}},delegateType:"focusin"},blur:{trigger:function(){return this===o.activeElement&&this.blur?(this.blur(),!1):t},delegateType:"focusout"},beforeunload:{postDispatch:function(e){e.result!==t&&(e.originalEvent.returnValue=e.result)}}},simulate:function(e,t,n,r){var i=b.extend(new b.Event,n,{type:e,isSimulated:!0,originalEvent:{}});r?b.event.trigger(i,null,t):b.event.dispatch.call(t,i),i.isDefaultPrevented()&&n.preventDefault()}},b.removeEvent=o.removeEventListener?function(e,t,n){e.removeEventListener&&e.removeEventListener(t,n,!1)}:function(e,t,n){var r="on"+t;e.detachEvent&&(typeof e[r]===i&&(e[r]=null),e.detachEvent(r,n))},b.Event=function(e,n){return this instanceof b.Event?(e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented||e.returnValue===!1||e.getPreventDefault&&e.getPreventDefault()?it:ot):this.type=e,n&&b.extend(this,n),this.timeStamp=e&&e.timeStamp||b.now(),this[b.expando]=!0,t):new b.Event(e,n)},b.Event.prototype={isDefaultPrevented:ot,isPropagationStopped:ot,isImmediatePropagationStopped:ot,preventDefault:function(){var e=this.originalEvent;this.isDefaultPrevented=it,e&&(e.preventDefault?e.preventDefault():e.returnValue=!1)},stopPropagation:function(){var e=this.originalEvent;this.isPropagationStopped=it,e&&(e.stopPropagation&&e.stopPropagation(),e.cancelBubble=!0)},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=it,this.stopPropagation()}},b.each({mouseenter:"mouseover",mouseleave:"mouseout"},function(e,t){b.event.special[e]={delegateType:t,bindType:t,handle:function(e){var n,r=this,i=e.relatedTarget,o=e.handleObj;
return(!i||i!==r&&!b.contains(r,i))&&(e.type=o.origType,n=o.handler.apply(this,arguments),e.type=t),n}}}),b.support.submitBubbles||(b.event.special.submit={setup:function(){return b.nodeName(this,"form")?!1:(b.event.add(this,"click._submit keypress._submit",function(e){var n=e.target,r=b.nodeName(n,"input")||b.nodeName(n,"button")?n.form:t;r&&!b._data(r,"submitBubbles")&&(b.event.add(r,"submit._submit",function(e){e._submit_bubble=!0}),b._data(r,"submitBubbles",!0))}),t)},postDispatch:function(e){e._submit_bubble&&(delete e._submit_bubble,this.parentNode&&!e.isTrigger&&b.event.simulate("submit",this.parentNode,e,!0))},teardown:function(){return b.nodeName(this,"form")?!1:(b.event.remove(this,"._submit"),t)}}),b.support.changeBubbles||(b.event.special.change={setup:function(){return Z.test(this.nodeName)?(("checkbox"===this.type||"radio"===this.type)&&(b.event.add(this,"propertychange._change",function(e){"checked"===e.originalEvent.propertyName&&(this._just_changed=!0)}),b.event.add(this,"click._change",function(e){this._just_changed&&!e.isTrigger&&(this._just_changed=!1),b.event.simulate("change",this,e,!0)})),!1):(b.event.add(this,"beforeactivate._change",function(e){var t=e.target;Z.test(t.nodeName)&&!b._data(t,"changeBubbles")&&(b.event.add(t,"change._change",function(e){!this.parentNode||e.isSimulated||e.isTrigger||b.event.simulate("change",this.parentNode,e,!0)}),b._data(t,"changeBubbles",!0))}),t)},handle:function(e){var n=e.target;return this!==n||e.isSimulated||e.isTrigger||"radio"!==n.type&&"checkbox"!==n.type?e.handleObj.handler.apply(this,arguments):t},teardown:function(){return b.event.remove(this,"._change"),!Z.test(this.nodeName)}}),b.support.focusinBubbles||b.each({focus:"focusin",blur:"focusout"},function(e,t){var n=0,r=function(e){b.event.simulate(t,e.target,b.event.fix(e),!0)};b.event.special[t]={setup:function(){0===n++&&o.addEventListener(e,r,!0)},teardown:function(){0===--n&&o.removeEventListener(e,r,!0)}}}),b.fn.extend({on:function(e,n,r,i,o){var a,s;if("object"==typeof e){"string"!=typeof n&&(r=r||n,n=t);for(a in e)this.on(a,n,r,e[a],o);return this}if(null==r&&null==i?(i=n,r=n=t):null==i&&("string"==typeof n?(i=r,r=t):(i=r,r=n,n=t)),i===!1)i=ot;else if(!i)return this;return 1===o&&(s=i,i=function(e){return b().off(e),s.apply(this,arguments)},i.guid=s.guid||(s.guid=b.guid++)),this.each(function(){b.event.add(this,e,i,r,n)})},one:function(e,t,n,r){return this.on(e,t,n,r,1)},off:function(e,n,r){var i,o;if(e&&e.preventDefault&&e.handleObj)return i=e.handleObj,b(e.delegateTarget).off(i.namespace?i.origType+"."+i.namespace:i.origType,i.selector,i.handler),this;if("object"==typeof e){for(o in e)this.off(o,n,e[o]);return this}return(n===!1||"function"==typeof n)&&(r=n,n=t),r===!1&&(r=ot),this.each(function(){b.event.remove(this,e,r,n)})},bind:function(e,t,n){return this.on(e,null,t,n)},unbind:function(e,t){return this.off(e,null,t)},delegate:function(e,t,n,r){return this.on(t,e,n,r)},undelegate:function(e,t,n){return 1===arguments.length?this.off(e,"**"):this.off(t,e||"**",n)},trigger:function(e,t){return this.each(function(){b.event.trigger(e,t,this)})},triggerHandler:function(e,n){var r=this[0];return r?b.event.trigger(e,n,r,!0):t}}),function(e,t){var n,r,i,o,a,s,u,l,c,p,f,d,h,g,m,y,v,x="sizzle"+-new Date,w=e.document,T={},N=0,C=0,k=it(),E=it(),S=it(),A=typeof t,j=1<<31,D=[],L=D.pop,H=D.push,q=D.slice,M=D.indexOf||function(e){var t=0,n=this.length;for(;n>t;t++)if(this[t]===e)return t;return-1},_="[\\x20\\t\\r\\n\\f]",F="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",O=F.replace("w","w#"),B="([*^$|!~]?=)",P="\\["+_+"*("+F+")"+_+"*(?:"+B+_+"*(?:(['\"])((?:\\\\.|[^\\\\])*?)\\3|("+O+")|)|)"+_+"*\\]",R=":("+F+")(?:\\(((['\"])((?:\\\\.|[^\\\\])*?)\\3|((?:\\\\.|[^\\\\()[\\]]|"+P.replace(3,8)+")*)|.*)\\)|)",W=RegExp("^"+_+"+|((?:^|[^\\\\])(?:\\\\.)*)"+_+"+$","g"),$=RegExp("^"+_+"*,"+_+"*"),I=RegExp("^"+_+"*([\\x20\\t\\r\\n\\f>+~])"+_+"*"),z=RegExp(R),X=RegExp("^"+O+"$"),U={ID:RegExp("^#("+F+")"),CLASS:RegExp("^\\.("+F+")"),NAME:RegExp("^\\[name=['\"]?("+F+")['\"]?\\]"),TAG:RegExp("^("+F.replace("w","w*")+")"),ATTR:RegExp("^"+P),PSEUDO:RegExp("^"+R),CHILD:RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+_+"*(even|odd|(([+-]|)(\\d*)n|)"+_+"*(?:([+-]|)"+_+"*(\\d+)|))"+_+"*\\)|)","i"),needsContext:RegExp("^"+_+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+_+"*((?:-\\d)?\\d*)"+_+"*\\)|)(?=[^-]|$)","i")},V=/[\x20\t\r\n\f]*[+~]/,Y=/^[^{]+\{\s*\[native code/,J=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,G=/^(?:input|select|textarea|button)$/i,Q=/^h\d$/i,K=/'|\\/g,Z=/\=[\x20\t\r\n\f]*([^'"\]]*)[\x20\t\r\n\f]*\]/g,et=/\\([\da-fA-F]{1,6}[\x20\t\r\n\f]?|.)/g,tt=function(e,t){var n="0x"+t-65536;return n!==n?t:0>n?String.fromCharCode(n+65536):String.fromCharCode(55296|n>>10,56320|1023&n)};try{q.call(w.documentElement.childNodes,0)[0].nodeType}catch(nt){q=function(e){var t,n=[];while(t=this[e++])n.push(t);return n}}function rt(e){return Y.test(e+"")}function it(){var e,t=[];return e=function(n,r){return t.push(n+=" ")>i.cacheLength&&delete e[t.shift()],e[n]=r}}function ot(e){return e[x]=!0,e}function at(e){var t=p.createElement("div");try{return e(t)}catch(n){return!1}finally{t=null}}function st(e,t,n,r){var i,o,a,s,u,l,f,g,m,v;if((t?t.ownerDocument||t:w)!==p&&c(t),t=t||p,n=n||[],!e||"string"!=typeof e)return n;if(1!==(s=t.nodeType)&&9!==s)return[];if(!d&&!r){if(i=J.exec(e))if(a=i[1]){if(9===s){if(o=t.getElementById(a),!o||!o.parentNode)return n;if(o.id===a)return n.push(o),n}else if(t.ownerDocument&&(o=t.ownerDocument.getElementById(a))&&y(t,o)&&o.id===a)return n.push(o),n}else{if(i[2])return H.apply(n,q.call(t.getElementsByTagName(e),0)),n;if((a=i[3])&&T.getByClassName&&t.getElementsByClassName)return H.apply(n,q.call(t.getElementsByClassName(a),0)),n}if(T.qsa&&!h.test(e)){if(f=!0,g=x,m=t,v=9===s&&e,1===s&&"object"!==t.nodeName.toLowerCase()){l=ft(e),(f=t.getAttribute("id"))?g=f.replace(K,"\\$&"):t.setAttribute("id",g),g="[id='"+g+"'] ",u=l.length;while(u--)l[u]=g+dt(l[u]);m=V.test(e)&&t.parentNode||t,v=l.join(",")}if(v)try{return H.apply(n,q.call(m.querySelectorAll(v),0)),n}catch(b){}finally{f||t.removeAttribute("id")}}}return wt(e.replace(W,"$1"),t,n,r)}a=st.isXML=function(e){var t=e&&(e.ownerDocument||e).documentElement;return t?"HTML"!==t.nodeName:!1},c=st.setDocument=function(e){var n=e?e.ownerDocument||e:w;return n!==p&&9===n.nodeType&&n.documentElement?(p=n,f=n.documentElement,d=a(n),T.tagNameNoComments=at(function(e){return e.appendChild(n.createComment("")),!e.getElementsByTagName("*").length}),T.attributes=at(function(e){e.innerHTML="<select></select>";var t=typeof e.lastChild.getAttribute("multiple");return"boolean"!==t&&"string"!==t}),T.getByClassName=at(function(e){return e.innerHTML="<div class='hidden e'></div><div class='hidden'></div>",e.getElementsByClassName&&e.getElementsByClassName("e").length?(e.lastChild.className="e",2===e.getElementsByClassName("e").length):!1}),T.getByName=at(function(e){e.id=x+0,e.innerHTML="<a name='"+x+"'></a><div name='"+x+"'></div>",f.insertBefore(e,f.firstChild);var t=n.getElementsByName&&n.getElementsByName(x).length===2+n.getElementsByName(x+0).length;return T.getIdNotName=!n.getElementById(x),f.removeChild(e),t}),i.attrHandle=at(function(e){return e.innerHTML="<a href='#'></a>",e.firstChild&&typeof e.firstChild.getAttribute!==A&&"#"===e.firstChild.getAttribute("href")})?{}:{href:function(e){return e.getAttribute("href",2)},type:function(e){return e.getAttribute("type")}},T.getIdNotName?(i.find.ID=function(e,t){if(typeof t.getElementById!==A&&!d){var n=t.getElementById(e);return n&&n.parentNode?[n]:[]}},i.filter.ID=function(e){var t=e.replace(et,tt);return function(e){return e.getAttribute("id")===t}}):(i.find.ID=function(e,n){if(typeof n.getElementById!==A&&!d){var r=n.getElementById(e);return r?r.id===e||typeof r.getAttributeNode!==A&&r.getAttributeNode("id").value===e?[r]:t:[]}},i.filter.ID=function(e){var t=e.replace(et,tt);return function(e){var n=typeof e.getAttributeNode!==A&&e.getAttributeNode("id");return n&&n.value===t}}),i.find.TAG=T.tagNameNoComments?function(e,n){return typeof n.getElementsByTagName!==A?n.getElementsByTagName(e):t}:function(e,t){var n,r=[],i=0,o=t.getElementsByTagName(e);if("*"===e){while(n=o[i++])1===n.nodeType&&r.push(n);return r}return o},i.find.NAME=T.getByName&&function(e,n){return typeof n.getElementsByName!==A?n.getElementsByName(name):t},i.find.CLASS=T.getByClassName&&function(e,n){return typeof n.getElementsByClassName===A||d?t:n.getElementsByClassName(e)},g=[],h=[":focus"],(T.qsa=rt(n.querySelectorAll))&&(at(function(e){e.innerHTML="<select><option selected=''></option></select>",e.querySelectorAll("[selected]").length||h.push("\\["+_+"*(?:checked|disabled|ismap|multiple|readonly|selected|value)"),e.querySelectorAll(":checked").length||h.push(":checked")}),at(function(e){e.innerHTML="<input type='hidden' i=''/>",e.querySelectorAll("[i^='']").length&&h.push("[*^$]="+_+"*(?:\"\"|'')"),e.querySelectorAll(":enabled").length||h.push(":enabled",":disabled"),e.querySelectorAll("*,:x"),h.push(",.*:")})),(T.matchesSelector=rt(m=f.matchesSelector||f.mozMatchesSelector||f.webkitMatchesSelector||f.oMatchesSelector||f.msMatchesSelector))&&at(function(e){T.disconnectedMatch=m.call(e,"div"),m.call(e,"[s!='']:x"),g.push("!=",R)}),h=RegExp(h.join("|")),g=RegExp(g.join("|")),y=rt(f.contains)||f.compareDocumentPosition?function(e,t){var n=9===e.nodeType?e.documentElement:e,r=t&&t.parentNode;return e===r||!(!r||1!==r.nodeType||!(n.contains?n.contains(r):e.compareDocumentPosition&&16&e.compareDocumentPosition(r)))}:function(e,t){if(t)while(t=t.parentNode)if(t===e)return!0;return!1},v=f.compareDocumentPosition?function(e,t){var r;return e===t?(u=!0,0):(r=t.compareDocumentPosition&&e.compareDocumentPosition&&e.compareDocumentPosition(t))?1&r||e.parentNode&&11===e.parentNode.nodeType?e===n||y(w,e)?-1:t===n||y(w,t)?1:0:4&r?-1:1:e.compareDocumentPosition?-1:1}:function(e,t){var r,i=0,o=e.parentNode,a=t.parentNode,s=[e],l=[t];if(e===t)return u=!0,0;if(!o||!a)return e===n?-1:t===n?1:o?-1:a?1:0;if(o===a)return ut(e,t);r=e;while(r=r.parentNode)s.unshift(r);r=t;while(r=r.parentNode)l.unshift(r);while(s[i]===l[i])i++;return i?ut(s[i],l[i]):s[i]===w?-1:l[i]===w?1:0},u=!1,[0,0].sort(v),T.detectDuplicates=u,p):p},st.matches=function(e,t){return st(e,null,null,t)},st.matchesSelector=function(e,t){if((e.ownerDocument||e)!==p&&c(e),t=t.replace(Z,"='$1']"),!(!T.matchesSelector||d||g&&g.test(t)||h.test(t)))try{var n=m.call(e,t);if(n||T.disconnectedMatch||e.document&&11!==e.document.nodeType)return n}catch(r){}return st(t,p,null,[e]).length>0},st.contains=function(e,t){return(e.ownerDocument||e)!==p&&c(e),y(e,t)},st.attr=function(e,t){var n;return(e.ownerDocument||e)!==p&&c(e),d||(t=t.toLowerCase()),(n=i.attrHandle[t])?n(e):d||T.attributes?e.getAttribute(t):((n=e.getAttributeNode(t))||e.getAttribute(t))&&e[t]===!0?t:n&&n.specified?n.value:null},st.error=function(e){throw Error("Syntax error, unrecognized expression: "+e)},st.uniqueSort=function(e){var t,n=[],r=1,i=0;if(u=!T.detectDuplicates,e.sort(v),u){for(;t=e[r];r++)t===e[r-1]&&(i=n.push(r));while(i--)e.splice(n[i],1)}return e};function ut(e,t){var n=t&&e,r=n&&(~t.sourceIndex||j)-(~e.sourceIndex||j);if(r)return r;if(n)while(n=n.nextSibling)if(n===t)return-1;return e?1:-1}function lt(e){return function(t){var n=t.nodeName.toLowerCase();return"input"===n&&t.type===e}}function ct(e){return function(t){var n=t.nodeName.toLowerCase();return("input"===n||"button"===n)&&t.type===e}}function pt(e){return ot(function(t){return t=+t,ot(function(n,r){var i,o=e([],n.length,t),a=o.length;while(a--)n[i=o[a]]&&(n[i]=!(r[i]=n[i]))})})}o=st.getText=function(e){var t,n="",r=0,i=e.nodeType;if(i){if(1===i||9===i||11===i){if("string"==typeof e.textContent)return e.textContent;for(e=e.firstChild;e;e=e.nextSibling)n+=o(e)}else if(3===i||4===i)return e.nodeValue}else for(;t=e[r];r++)n+=o(t);return n},i=st.selectors={cacheLength:50,createPseudo:ot,match:U,find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){return e[1]=e[1].replace(et,tt),e[3]=(e[4]||e[5]||"").replace(et,tt),"~="===e[2]&&(e[3]=" "+e[3]+" "),e.slice(0,4)},CHILD:function(e){return e[1]=e[1].toLowerCase(),"nth"===e[1].slice(0,3)?(e[3]||st.error(e[0]),e[4]=+(e[4]?e[5]+(e[6]||1):2*("even"===e[3]||"odd"===e[3])),e[5]=+(e[7]+e[8]||"odd"===e[3])):e[3]&&st.error(e[0]),e},PSEUDO:function(e){var t,n=!e[5]&&e[2];return U.CHILD.test(e[0])?null:(e[4]?e[2]=e[4]:n&&z.test(n)&&(t=ft(n,!0))&&(t=n.indexOf(")",n.length-t)-n.length)&&(e[0]=e[0].slice(0,t),e[2]=n.slice(0,t)),e.slice(0,3))}},filter:{TAG:function(e){return"*"===e?function(){return!0}:(e=e.replace(et,tt).toLowerCase(),function(t){return t.nodeName&&t.nodeName.toLowerCase()===e})},CLASS:function(e){var t=k[e+" "];return t||(t=RegExp("(^|"+_+")"+e+"("+_+"|$)"))&&k(e,function(e){return t.test(e.className||typeof e.getAttribute!==A&&e.getAttribute("class")||"")})},ATTR:function(e,t,n){return function(r){var i=st.attr(r,e);return null==i?"!="===t:t?(i+="","="===t?i===n:"!="===t?i!==n:"^="===t?n&&0===i.indexOf(n):"*="===t?n&&i.indexOf(n)>-1:"$="===t?n&&i.slice(-n.length)===n:"~="===t?(" "+i+" ").indexOf(n)>-1:"|="===t?i===n||i.slice(0,n.length+1)===n+"-":!1):!0}},CHILD:function(e,t,n,r,i){var o="nth"!==e.slice(0,3),a="last"!==e.slice(-4),s="of-type"===t;return 1===r&&0===i?function(e){return!!e.parentNode}:function(t,n,u){var l,c,p,f,d,h,g=o!==a?"nextSibling":"previousSibling",m=t.parentNode,y=s&&t.nodeName.toLowerCase(),v=!u&&!s;if(m){if(o){while(g){p=t;while(p=p[g])if(s?p.nodeName.toLowerCase()===y:1===p.nodeType)return!1;h=g="only"===e&&!h&&"nextSibling"}return!0}if(h=[a?m.firstChild:m.lastChild],a&&v){c=m[x]||(m[x]={}),l=c[e]||[],d=l[0]===N&&l[1],f=l[0]===N&&l[2],p=d&&m.childNodes[d];while(p=++d&&p&&p[g]||(f=d=0)||h.pop())if(1===p.nodeType&&++f&&p===t){c[e]=[N,d,f];break}}else if(v&&(l=(t[x]||(t[x]={}))[e])&&l[0]===N)f=l[1];else while(p=++d&&p&&p[g]||(f=d=0)||h.pop())if((s?p.nodeName.toLowerCase()===y:1===p.nodeType)&&++f&&(v&&((p[x]||(p[x]={}))[e]=[N,f]),p===t))break;return f-=i,f===r||0===f%r&&f/r>=0}}},PSEUDO:function(e,t){var n,r=i.pseudos[e]||i.setFilters[e.toLowerCase()]||st.error("unsupported pseudo: "+e);return r[x]?r(t):r.length>1?(n=[e,e,"",t],i.setFilters.hasOwnProperty(e.toLowerCase())?ot(function(e,n){var i,o=r(e,t),a=o.length;while(a--)i=M.call(e,o[a]),e[i]=!(n[i]=o[a])}):function(e){return r(e,0,n)}):r}},pseudos:{not:ot(function(e){var t=[],n=[],r=s(e.replace(W,"$1"));return r[x]?ot(function(e,t,n,i){var o,a=r(e,null,i,[]),s=e.length;while(s--)(o=a[s])&&(e[s]=!(t[s]=o))}):function(e,i,o){return t[0]=e,r(t,null,o,n),!n.pop()}}),has:ot(function(e){return function(t){return st(e,t).length>0}}),contains:ot(function(e){return function(t){return(t.textContent||t.innerText||o(t)).indexOf(e)>-1}}),lang:ot(function(e){return X.test(e||"")||st.error("unsupported lang: "+e),e=e.replace(et,tt).toLowerCase(),function(t){var n;do if(n=d?t.getAttribute("xml:lang")||t.getAttribute("lang"):t.lang)return n=n.toLowerCase(),n===e||0===n.indexOf(e+"-");while((t=t.parentNode)&&1===t.nodeType);return!1}}),target:function(t){var n=e.location&&e.location.hash;return n&&n.slice(1)===t.id},root:function(e){return e===f},focus:function(e){return e===p.activeElement&&(!p.hasFocus||p.hasFocus())&&!!(e.type||e.href||~e.tabIndex)},enabled:function(e){return e.disabled===!1},disabled:function(e){return e.disabled===!0},checked:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&!!e.checked||"option"===t&&!!e.selected},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,e.selected===!0},empty:function(e){for(e=e.firstChild;e;e=e.nextSibling)if(e.nodeName>"@"||3===e.nodeType||4===e.nodeType)return!1;return!0},parent:function(e){return!i.pseudos.empty(e)},header:function(e){return Q.test(e.nodeName)},input:function(e){return G.test(e.nodeName)},button:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&"button"===e.type||"button"===t},text:function(e){var t;return"input"===e.nodeName.toLowerCase()&&"text"===e.type&&(null==(t=e.getAttribute("type"))||t.toLowerCase()===e.type)},first:pt(function(){return[0]}),last:pt(function(e,t){return[t-1]}),eq:pt(function(e,t,n){return[0>n?n+t:n]}),even:pt(function(e,t){var n=0;for(;t>n;n+=2)e.push(n);return e}),odd:pt(function(e,t){var n=1;for(;t>n;n+=2)e.push(n);return e}),lt:pt(function(e,t,n){var r=0>n?n+t:n;for(;--r>=0;)e.push(r);return e}),gt:pt(function(e,t,n){var r=0>n?n+t:n;for(;t>++r;)e.push(r);return e})}};for(n in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})i.pseudos[n]=lt(n);for(n in{submit:!0,reset:!0})i.pseudos[n]=ct(n);function ft(e,t){var n,r,o,a,s,u,l,c=E[e+" "];if(c)return t?0:c.slice(0);s=e,u=[],l=i.preFilter;while(s){(!n||(r=$.exec(s)))&&(r&&(s=s.slice(r[0].length)||s),u.push(o=[])),n=!1,(r=I.exec(s))&&(n=r.shift(),o.push({value:n,type:r[0].replace(W," ")}),s=s.slice(n.length));for(a in i.filter)!(r=U[a].exec(s))||l[a]&&!(r=l[a](r))||(n=r.shift(),o.push({value:n,type:a,matches:r}),s=s.slice(n.length));if(!n)break}return t?s.length:s?st.error(e):E(e,u).slice(0)}function dt(e){var t=0,n=e.length,r="";for(;n>t;t++)r+=e[t].value;return r}function ht(e,t,n){var i=t.dir,o=n&&"parentNode"===i,a=C++;return t.first?function(t,n,r){while(t=t[i])if(1===t.nodeType||o)return e(t,n,r)}:function(t,n,s){var u,l,c,p=N+" "+a;if(s){while(t=t[i])if((1===t.nodeType||o)&&e(t,n,s))return!0}else while(t=t[i])if(1===t.nodeType||o)if(c=t[x]||(t[x]={}),(l=c[i])&&l[0]===p){if((u=l[1])===!0||u===r)return u===!0}else if(l=c[i]=[p],l[1]=e(t,n,s)||r,l[1]===!0)return!0}}function gt(e){return e.length>1?function(t,n,r){var i=e.length;while(i--)if(!e[i](t,n,r))return!1;return!0}:e[0]}function mt(e,t,n,r,i){var o,a=[],s=0,u=e.length,l=null!=t;for(;u>s;s++)(o=e[s])&&(!n||n(o,r,i))&&(a.push(o),l&&t.push(s));return a}function yt(e,t,n,r,i,o){return r&&!r[x]&&(r=yt(r)),i&&!i[x]&&(i=yt(i,o)),ot(function(o,a,s,u){var l,c,p,f=[],d=[],h=a.length,g=o||xt(t||"*",s.nodeType?[s]:s,[]),m=!e||!o&&t?g:mt(g,f,e,s,u),y=n?i||(o?e:h||r)?[]:a:m;if(n&&n(m,y,s,u),r){l=mt(y,d),r(l,[],s,u),c=l.length;while(c--)(p=l[c])&&(y[d[c]]=!(m[d[c]]=p))}if(o){if(i||e){if(i){l=[],c=y.length;while(c--)(p=y[c])&&l.push(m[c]=p);i(null,y=[],l,u)}c=y.length;while(c--)(p=y[c])&&(l=i?M.call(o,p):f[c])>-1&&(o[l]=!(a[l]=p))}}else y=mt(y===a?y.splice(h,y.length):y),i?i(null,a,y,u):H.apply(a,y)})}function vt(e){var t,n,r,o=e.length,a=i.relative[e[0].type],s=a||i.relative[" "],u=a?1:0,c=ht(function(e){return e===t},s,!0),p=ht(function(e){return M.call(t,e)>-1},s,!0),f=[function(e,n,r){return!a&&(r||n!==l)||((t=n).nodeType?c(e,n,r):p(e,n,r))}];for(;o>u;u++)if(n=i.relative[e[u].type])f=[ht(gt(f),n)];else{if(n=i.filter[e[u].type].apply(null,e[u].matches),n[x]){for(r=++u;o>r;r++)if(i.relative[e[r].type])break;return yt(u>1&&gt(f),u>1&&dt(e.slice(0,u-1)).replace(W,"$1"),n,r>u&&vt(e.slice(u,r)),o>r&&vt(e=e.slice(r)),o>r&&dt(e))}f.push(n)}return gt(f)}function bt(e,t){var n=0,o=t.length>0,a=e.length>0,s=function(s,u,c,f,d){var h,g,m,y=[],v=0,b="0",x=s&&[],w=null!=d,T=l,C=s||a&&i.find.TAG("*",d&&u.parentNode||u),k=N+=null==T?1:Math.random()||.1;for(w&&(l=u!==p&&u,r=n);null!=(h=C[b]);b++){if(a&&h){g=0;while(m=e[g++])if(m(h,u,c)){f.push(h);break}w&&(N=k,r=++n)}o&&((h=!m&&h)&&v--,s&&x.push(h))}if(v+=b,o&&b!==v){g=0;while(m=t[g++])m(x,y,u,c);if(s){if(v>0)while(b--)x[b]||y[b]||(y[b]=L.call(f));y=mt(y)}H.apply(f,y),w&&!s&&y.length>0&&v+t.length>1&&st.uniqueSort(f)}return w&&(N=k,l=T),x};return o?ot(s):s}s=st.compile=function(e,t){var n,r=[],i=[],o=S[e+" "];if(!o){t||(t=ft(e)),n=t.length;while(n--)o=vt(t[n]),o[x]?r.push(o):i.push(o);o=S(e,bt(i,r))}return o};function xt(e,t,n){var r=0,i=t.length;for(;i>r;r++)st(e,t[r],n);return n}function wt(e,t,n,r){var o,a,u,l,c,p=ft(e);if(!r&&1===p.length){if(a=p[0]=p[0].slice(0),a.length>2&&"ID"===(u=a[0]).type&&9===t.nodeType&&!d&&i.relative[a[1].type]){if(t=i.find.ID(u.matches[0].replace(et,tt),t)[0],!t)return n;e=e.slice(a.shift().value.length)}o=U.needsContext.test(e)?0:a.length;while(o--){if(u=a[o],i.relative[l=u.type])break;if((c=i.find[l])&&(r=c(u.matches[0].replace(et,tt),V.test(a[0].type)&&t.parentNode||t))){if(a.splice(o,1),e=r.length&&dt(a),!e)return H.apply(n,q.call(r,0)),n;break}}}return s(e,p)(r,t,d,n,V.test(e)),n}i.pseudos.nth=i.pseudos.eq;function Tt(){}i.filters=Tt.prototype=i.pseudos,i.setFilters=new Tt,c(),st.attr=b.attr,b.find=st,b.expr=st.selectors,b.expr[":"]=b.expr.pseudos,b.unique=st.uniqueSort,b.text=st.getText,b.isXMLDoc=st.isXML,b.contains=st.contains}(e);var at=/Until$/,st=/^(?:parents|prev(?:Until|All))/,ut=/^.[^:#\[\.,]*$/,lt=b.expr.match.needsContext,ct={children:!0,contents:!0,next:!0,prev:!0};b.fn.extend({find:function(e){var t,n,r,i=this.length;if("string"!=typeof e)return r=this,this.pushStack(b(e).filter(function(){for(t=0;i>t;t++)if(b.contains(r[t],this))return!0}));for(n=[],t=0;i>t;t++)b.find(e,this[t],n);return n=this.pushStack(i>1?b.unique(n):n),n.selector=(this.selector?this.selector+" ":"")+e,n},has:function(e){var t,n=b(e,this),r=n.length;return this.filter(function(){for(t=0;r>t;t++)if(b.contains(this,n[t]))return!0})},not:function(e){return this.pushStack(ft(this,e,!1))},filter:function(e){return this.pushStack(ft(this,e,!0))},is:function(e){return!!e&&("string"==typeof e?lt.test(e)?b(e,this.context).index(this[0])>=0:b.filter(e,this).length>0:this.filter(e).length>0)},closest:function(e,t){var n,r=0,i=this.length,o=[],a=lt.test(e)||"string"!=typeof e?b(e,t||this.context):0;for(;i>r;r++){n=this[r];while(n&&n.ownerDocument&&n!==t&&11!==n.nodeType){if(a?a.index(n)>-1:b.find.matchesSelector(n,e)){o.push(n);break}n=n.parentNode}}return this.pushStack(o.length>1?b.unique(o):o)},index:function(e){return e?"string"==typeof e?b.inArray(this[0],b(e)):b.inArray(e.jquery?e[0]:e,this):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(e,t){var n="string"==typeof e?b(e,t):b.makeArray(e&&e.nodeType?[e]:e),r=b.merge(this.get(),n);return this.pushStack(b.unique(r))},addBack:function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}}),b.fn.andSelf=b.fn.addBack;function pt(e,t){do e=e[t];while(e&&1!==e.nodeType);return e}b.each({parent:function(e){var t=e.parentNode;return t&&11!==t.nodeType?t:null},parents:function(e){return b.dir(e,"parentNode")},parentsUntil:function(e,t,n){return b.dir(e,"parentNode",n)},next:function(e){return pt(e,"nextSibling")},prev:function(e){return pt(e,"previousSibling")},nextAll:function(e){return b.dir(e,"nextSibling")},prevAll:function(e){return b.dir(e,"previousSibling")},nextUntil:function(e,t,n){return b.dir(e,"nextSibling",n)},prevUntil:function(e,t,n){return b.dir(e,"previousSibling",n)},siblings:function(e){return b.sibling((e.parentNode||{}).firstChild,e)},children:function(e){return b.sibling(e.firstChild)},contents:function(e){return b.nodeName(e,"iframe")?e.contentDocument||e.contentWindow.document:b.merge([],e.childNodes)}},function(e,t){b.fn[e]=function(n,r){var i=b.map(this,t,n);return at.test(e)||(r=n),r&&"string"==typeof r&&(i=b.filter(r,i)),i=this.length>1&&!ct[e]?b.unique(i):i,this.length>1&&st.test(e)&&(i=i.reverse()),this.pushStack(i)}}),b.extend({filter:function(e,t,n){return n&&(e=":not("+e+")"),1===t.length?b.find.matchesSelector(t[0],e)?[t[0]]:[]:b.find.matches(e,t)},dir:function(e,n,r){var i=[],o=e[n];while(o&&9!==o.nodeType&&(r===t||1!==o.nodeType||!b(o).is(r)))1===o.nodeType&&i.push(o),o=o[n];return i},sibling:function(e,t){var n=[];for(;e;e=e.nextSibling)1===e.nodeType&&e!==t&&n.push(e);return n}});function ft(e,t,n){if(t=t||0,b.isFunction(t))return b.grep(e,function(e,r){var i=!!t.call(e,r,e);return i===n});if(t.nodeType)return b.grep(e,function(e){return e===t===n});if("string"==typeof t){var r=b.grep(e,function(e){return 1===e.nodeType});if(ut.test(t))return b.filter(t,r,!n);t=b.filter(t,r)}return b.grep(e,function(e){return b.inArray(e,t)>=0===n})}function dt(e){var t=ht.split("|"),n=e.createDocumentFragment();if(n.createElement)while(t.length)n.createElement(t.pop());return n}var ht="abbr|article|aside|audio|bdi|canvas|data|datalist|details|figcaption|figure|footer|header|hgroup|mark|meter|nav|output|progress|section|summary|time|video",gt=/ jQuery\d+="(?:null|\d+)"/g,mt=RegExp("<(?:"+ht+")[\\s/>]","i"),yt=/^\s+/,vt=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,bt=/<([\w:]+)/,xt=/<tbody/i,wt=/<|&#?\w+;/,Tt=/<(?:script|style|link)/i,Nt=/^(?:checkbox|radio)$/i,Ct=/checked\s*(?:[^=]|=\s*.checked.)/i,kt=/^$|\/(?:java|ecma)script/i,Et=/^true\/(.*)/,St=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g,At={option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],area:[1,"<map>","</map>"],param:[1,"<object>","</object>"],thead:[1,"<table>","</table>"],tr:[2,"<table><tbody>","</tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:b.support.htmlSerialize?[0,"",""]:[1,"X<div>","</div>"]},jt=dt(o),Dt=jt.appendChild(o.createElement("div"));At.optgroup=At.option,At.tbody=At.tfoot=At.colgroup=At.caption=At.thead,At.th=At.td,b.fn.extend({text:function(e){return b.access(this,function(e){return e===t?b.text(this):this.empty().append((this[0]&&this[0].ownerDocument||o).createTextNode(e))},null,e,arguments.length)},wrapAll:function(e){if(b.isFunction(e))return this.each(function(t){b(this).wrapAll(e.call(this,t))});if(this[0]){var t=b(e,this[0].ownerDocument).eq(0).clone(!0);this[0].parentNode&&t.insertBefore(this[0]),t.map(function(){var e=this;while(e.firstChild&&1===e.firstChild.nodeType)e=e.firstChild;return e}).append(this)}return this},wrapInner:function(e){return b.isFunction(e)?this.each(function(t){b(this).wrapInner(e.call(this,t))}):this.each(function(){var t=b(this),n=t.contents();n.length?n.wrapAll(e):t.append(e)})},wrap:function(e){var t=b.isFunction(e);return this.each(function(n){b(this).wrapAll(t?e.call(this,n):e)})},unwrap:function(){return this.parent().each(function(){b.nodeName(this,"body")||b(this).replaceWith(this.childNodes)}).end()},append:function(){return this.domManip(arguments,!0,function(e){(1===this.nodeType||11===this.nodeType||9===this.nodeType)&&this.appendChild(e)})},prepend:function(){return this.domManip(arguments,!0,function(e){(1===this.nodeType||11===this.nodeType||9===this.nodeType)&&this.insertBefore(e,this.firstChild)})},before:function(){return this.domManip(arguments,!1,function(e){this.parentNode&&this.parentNode.insertBefore(e,this)})},after:function(){return this.domManip(arguments,!1,function(e){this.parentNode&&this.parentNode.insertBefore(e,this.nextSibling)})},remove:function(e,t){var n,r=0;for(;null!=(n=this[r]);r++)(!e||b.filter(e,[n]).length>0)&&(t||1!==n.nodeType||b.cleanData(Ot(n)),n.parentNode&&(t&&b.contains(n.ownerDocument,n)&&Mt(Ot(n,"script")),n.parentNode.removeChild(n)));return this},empty:function(){var e,t=0;for(;null!=(e=this[t]);t++){1===e.nodeType&&b.cleanData(Ot(e,!1));while(e.firstChild)e.removeChild(e.firstChild);e.options&&b.nodeName(e,"select")&&(e.options.length=0)}return this},clone:function(e,t){return e=null==e?!1:e,t=null==t?e:t,this.map(function(){return b.clone(this,e,t)})},html:function(e){return b.access(this,function(e){var n=this[0]||{},r=0,i=this.length;if(e===t)return 1===n.nodeType?n.innerHTML.replace(gt,""):t;if(!("string"!=typeof e||Tt.test(e)||!b.support.htmlSerialize&&mt.test(e)||!b.support.leadingWhitespace&&yt.test(e)||At[(bt.exec(e)||["",""])[1].toLowerCase()])){e=e.replace(vt,"<$1></$2>");try{for(;i>r;r++)n=this[r]||{},1===n.nodeType&&(b.cleanData(Ot(n,!1)),n.innerHTML=e);n=0}catch(o){}}n&&this.empty().append(e)},null,e,arguments.length)},replaceWith:function(e){var t=b.isFunction(e);return t||"string"==typeof e||(e=b(e).not(this).detach()),this.domManip([e],!0,function(e){var t=this.nextSibling,n=this.parentNode;n&&(b(this).remove(),n.insertBefore(e,t))})},detach:function(e){return this.remove(e,!0)},domManip:function(e,n,r){e=f.apply([],e);var i,o,a,s,u,l,c=0,p=this.length,d=this,h=p-1,g=e[0],m=b.isFunction(g);if(m||!(1>=p||"string"!=typeof g||b.support.checkClone)&&Ct.test(g))return this.each(function(i){var o=d.eq(i);m&&(e[0]=g.call(this,i,n?o.html():t)),o.domManip(e,n,r)});if(p&&(l=b.buildFragment(e,this[0].ownerDocument,!1,this),i=l.firstChild,1===l.childNodes.length&&(l=i),i)){for(n=n&&b.nodeName(i,"tr"),s=b.map(Ot(l,"script"),Ht),a=s.length;p>c;c++)o=l,c!==h&&(o=b.clone(o,!0,!0),a&&b.merge(s,Ot(o,"script"))),r.call(n&&b.nodeName(this[c],"table")?Lt(this[c],"tbody"):this[c],o,c);if(a)for(u=s[s.length-1].ownerDocument,b.map(s,qt),c=0;a>c;c++)o=s[c],kt.test(o.type||"")&&!b._data(o,"globalEval")&&b.contains(u,o)&&(o.src?b.ajax({url:o.src,type:"GET",dataType:"script",async:!1,global:!1,"throws":!0}):b.globalEval((o.text||o.textContent||o.innerHTML||"").replace(St,"")));l=i=null}return this}});function Lt(e,t){return e.getElementsByTagName(t)[0]||e.appendChild(e.ownerDocument.createElement(t))}function Ht(e){var t=e.getAttributeNode("type");return e.type=(t&&t.specified)+"/"+e.type,e}function qt(e){var t=Et.exec(e.type);return t?e.type=t[1]:e.removeAttribute("type"),e}function Mt(e,t){var n,r=0;for(;null!=(n=e[r]);r++)b._data(n,"globalEval",!t||b._data(t[r],"globalEval"))}function _t(e,t){if(1===t.nodeType&&b.hasData(e)){var n,r,i,o=b._data(e),a=b._data(t,o),s=o.events;if(s){delete a.handle,a.events={};for(n in s)for(r=0,i=s[n].length;i>r;r++)b.event.add(t,n,s[n][r])}a.data&&(a.data=b.extend({},a.data))}}function Ft(e,t){var n,r,i;if(1===t.nodeType){if(n=t.nodeName.toLowerCase(),!b.support.noCloneEvent&&t[b.expando]){i=b._data(t);for(r in i.events)b.removeEvent(t,r,i.handle);t.removeAttribute(b.expando)}"script"===n&&t.text!==e.text?(Ht(t).text=e.text,qt(t)):"object"===n?(t.parentNode&&(t.outerHTML=e.outerHTML),b.support.html5Clone&&e.innerHTML&&!b.trim(t.innerHTML)&&(t.innerHTML=e.innerHTML)):"input"===n&&Nt.test(e.type)?(t.defaultChecked=t.checked=e.checked,t.value!==e.value&&(t.value=e.value)):"option"===n?t.defaultSelected=t.selected=e.defaultSelected:("input"===n||"textarea"===n)&&(t.defaultValue=e.defaultValue)}}b.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(e,t){b.fn[e]=function(e){var n,r=0,i=[],o=b(e),a=o.length-1;for(;a>=r;r++)n=r===a?this:this.clone(!0),b(o[r])[t](n),d.apply(i,n.get());return this.pushStack(i)}});function Ot(e,n){var r,o,a=0,s=typeof e.getElementsByTagName!==i?e.getElementsByTagName(n||"*"):typeof e.querySelectorAll!==i?e.querySelectorAll(n||"*"):t;if(!s)for(s=[],r=e.childNodes||e;null!=(o=r[a]);a++)!n||b.nodeName(o,n)?s.push(o):b.merge(s,Ot(o,n));return n===t||n&&b.nodeName(e,n)?b.merge([e],s):s}function Bt(e){Nt.test(e.type)&&(e.defaultChecked=e.checked)}b.extend({clone:function(e,t,n){var r,i,o,a,s,u=b.contains(e.ownerDocument,e);if(b.support.html5Clone||b.isXMLDoc(e)||!mt.test("<"+e.nodeName+">")?o=e.cloneNode(!0):(Dt.innerHTML=e.outerHTML,Dt.removeChild(o=Dt.firstChild)),!(b.support.noCloneEvent&&b.support.noCloneChecked||1!==e.nodeType&&11!==e.nodeType||b.isXMLDoc(e)))for(r=Ot(o),s=Ot(e),a=0;null!=(i=s[a]);++a)r[a]&&Ft(i,r[a]);if(t)if(n)for(s=s||Ot(e),r=r||Ot(o),a=0;null!=(i=s[a]);a++)_t(i,r[a]);else _t(e,o);return r=Ot(o,"script"),r.length>0&&Mt(r,!u&&Ot(e,"script")),r=s=i=null,o},buildFragment:function(e,t,n,r){var i,o,a,s,u,l,c,p=e.length,f=dt(t),d=[],h=0;for(;p>h;h++)if(o=e[h],o||0===o)if("object"===b.type(o))b.merge(d,o.nodeType?[o]:o);else if(wt.test(o)){s=s||f.appendChild(t.createElement("div")),u=(bt.exec(o)||["",""])[1].toLowerCase(),c=At[u]||At._default,s.innerHTML=c[1]+o.replace(vt,"<$1></$2>")+c[2],i=c[0];while(i--)s=s.lastChild;if(!b.support.leadingWhitespace&&yt.test(o)&&d.push(t.createTextNode(yt.exec(o)[0])),!b.support.tbody){o="table"!==u||xt.test(o)?"<table>"!==c[1]||xt.test(o)?0:s:s.firstChild,i=o&&o.childNodes.length;while(i--)b.nodeName(l=o.childNodes[i],"tbody")&&!l.childNodes.length&&o.removeChild(l)
}b.merge(d,s.childNodes),s.textContent="";while(s.firstChild)s.removeChild(s.firstChild);s=f.lastChild}else d.push(t.createTextNode(o));s&&f.removeChild(s),b.support.appendChecked||b.grep(Ot(d,"input"),Bt),h=0;while(o=d[h++])if((!r||-1===b.inArray(o,r))&&(a=b.contains(o.ownerDocument,o),s=Ot(f.appendChild(o),"script"),a&&Mt(s),n)){i=0;while(o=s[i++])kt.test(o.type||"")&&n.push(o)}return s=null,f},cleanData:function(e,t){var n,r,o,a,s=0,u=b.expando,l=b.cache,p=b.support.deleteExpando,f=b.event.special;for(;null!=(n=e[s]);s++)if((t||b.acceptData(n))&&(o=n[u],a=o&&l[o])){if(a.events)for(r in a.events)f[r]?b.event.remove(n,r):b.removeEvent(n,r,a.handle);l[o]&&(delete l[o],p?delete n[u]:typeof n.removeAttribute!==i?n.removeAttribute(u):n[u]=null,c.push(o))}}});var Pt,Rt,Wt,$t=/alpha\([^)]*\)/i,It=/opacity\s*=\s*([^)]*)/,zt=/^(top|right|bottom|left)$/,Xt=/^(none|table(?!-c[ea]).+)/,Ut=/^margin/,Vt=RegExp("^("+x+")(.*)$","i"),Yt=RegExp("^("+x+")(?!px)[a-z%]+$","i"),Jt=RegExp("^([+-])=("+x+")","i"),Gt={BODY:"block"},Qt={position:"absolute",visibility:"hidden",display:"block"},Kt={letterSpacing:0,fontWeight:400},Zt=["Top","Right","Bottom","Left"],en=["Webkit","O","Moz","ms"];function tn(e,t){if(t in e)return t;var n=t.charAt(0).toUpperCase()+t.slice(1),r=t,i=en.length;while(i--)if(t=en[i]+n,t in e)return t;return r}function nn(e,t){return e=t||e,"none"===b.css(e,"display")||!b.contains(e.ownerDocument,e)}function rn(e,t){var n,r,i,o=[],a=0,s=e.length;for(;s>a;a++)r=e[a],r.style&&(o[a]=b._data(r,"olddisplay"),n=r.style.display,t?(o[a]||"none"!==n||(r.style.display=""),""===r.style.display&&nn(r)&&(o[a]=b._data(r,"olddisplay",un(r.nodeName)))):o[a]||(i=nn(r),(n&&"none"!==n||!i)&&b._data(r,"olddisplay",i?n:b.css(r,"display"))));for(a=0;s>a;a++)r=e[a],r.style&&(t&&"none"!==r.style.display&&""!==r.style.display||(r.style.display=t?o[a]||"":"none"));return e}b.fn.extend({css:function(e,n){return b.access(this,function(e,n,r){var i,o,a={},s=0;if(b.isArray(n)){for(o=Rt(e),i=n.length;i>s;s++)a[n[s]]=b.css(e,n[s],!1,o);return a}return r!==t?b.style(e,n,r):b.css(e,n)},e,n,arguments.length>1)},show:function(){return rn(this,!0)},hide:function(){return rn(this)},toggle:function(e){var t="boolean"==typeof e;return this.each(function(){(t?e:nn(this))?b(this).show():b(this).hide()})}}),b.extend({cssHooks:{opacity:{get:function(e,t){if(t){var n=Wt(e,"opacity");return""===n?"1":n}}}},cssNumber:{columnCount:!0,fillOpacity:!0,fontWeight:!0,lineHeight:!0,opacity:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{"float":b.support.cssFloat?"cssFloat":"styleFloat"},style:function(e,n,r,i){if(e&&3!==e.nodeType&&8!==e.nodeType&&e.style){var o,a,s,u=b.camelCase(n),l=e.style;if(n=b.cssProps[u]||(b.cssProps[u]=tn(l,u)),s=b.cssHooks[n]||b.cssHooks[u],r===t)return s&&"get"in s&&(o=s.get(e,!1,i))!==t?o:l[n];if(a=typeof r,"string"===a&&(o=Jt.exec(r))&&(r=(o[1]+1)*o[2]+parseFloat(b.css(e,n)),a="number"),!(null==r||"number"===a&&isNaN(r)||("number"!==a||b.cssNumber[u]||(r+="px"),b.support.clearCloneStyle||""!==r||0!==n.indexOf("background")||(l[n]="inherit"),s&&"set"in s&&(r=s.set(e,r,i))===t)))try{l[n]=r}catch(c){}}},css:function(e,n,r,i){var o,a,s,u=b.camelCase(n);return n=b.cssProps[u]||(b.cssProps[u]=tn(e.style,u)),s=b.cssHooks[n]||b.cssHooks[u],s&&"get"in s&&(a=s.get(e,!0,r)),a===t&&(a=Wt(e,n,i)),"normal"===a&&n in Kt&&(a=Kt[n]),""===r||r?(o=parseFloat(a),r===!0||b.isNumeric(o)?o||0:a):a},swap:function(e,t,n,r){var i,o,a={};for(o in t)a[o]=e.style[o],e.style[o]=t[o];i=n.apply(e,r||[]);for(o in t)e.style[o]=a[o];return i}}),e.getComputedStyle?(Rt=function(t){return e.getComputedStyle(t,null)},Wt=function(e,n,r){var i,o,a,s=r||Rt(e),u=s?s.getPropertyValue(n)||s[n]:t,l=e.style;return s&&(""!==u||b.contains(e.ownerDocument,e)||(u=b.style(e,n)),Yt.test(u)&&Ut.test(n)&&(i=l.width,o=l.minWidth,a=l.maxWidth,l.minWidth=l.maxWidth=l.width=u,u=s.width,l.width=i,l.minWidth=o,l.maxWidth=a)),u}):o.documentElement.currentStyle&&(Rt=function(e){return e.currentStyle},Wt=function(e,n,r){var i,o,a,s=r||Rt(e),u=s?s[n]:t,l=e.style;return null==u&&l&&l[n]&&(u=l[n]),Yt.test(u)&&!zt.test(n)&&(i=l.left,o=e.runtimeStyle,a=o&&o.left,a&&(o.left=e.currentStyle.left),l.left="fontSize"===n?"1em":u,u=l.pixelLeft+"px",l.left=i,a&&(o.left=a)),""===u?"auto":u});function on(e,t,n){var r=Vt.exec(t);return r?Math.max(0,r[1]-(n||0))+(r[2]||"px"):t}function an(e,t,n,r,i){var o=n===(r?"border":"content")?4:"width"===t?1:0,a=0;for(;4>o;o+=2)"margin"===n&&(a+=b.css(e,n+Zt[o],!0,i)),r?("content"===n&&(a-=b.css(e,"padding"+Zt[o],!0,i)),"margin"!==n&&(a-=b.css(e,"border"+Zt[o]+"Width",!0,i))):(a+=b.css(e,"padding"+Zt[o],!0,i),"padding"!==n&&(a+=b.css(e,"border"+Zt[o]+"Width",!0,i)));return a}function sn(e,t,n){var r=!0,i="width"===t?e.offsetWidth:e.offsetHeight,o=Rt(e),a=b.support.boxSizing&&"border-box"===b.css(e,"boxSizing",!1,o);if(0>=i||null==i){if(i=Wt(e,t,o),(0>i||null==i)&&(i=e.style[t]),Yt.test(i))return i;r=a&&(b.support.boxSizingReliable||i===e.style[t]),i=parseFloat(i)||0}return i+an(e,t,n||(a?"border":"content"),r,o)+"px"}function un(e){var t=o,n=Gt[e];return n||(n=ln(e,t),"none"!==n&&n||(Pt=(Pt||b("<iframe frameborder='0' width='0' height='0'/>").css("cssText","display:block !important")).appendTo(t.documentElement),t=(Pt[0].contentWindow||Pt[0].contentDocument).document,t.write("<!doctype html><html><body>"),t.close(),n=ln(e,t),Pt.detach()),Gt[e]=n),n}function ln(e,t){var n=b(t.createElement(e)).appendTo(t.body),r=b.css(n[0],"display");return n.remove(),r}b.each(["height","width"],function(e,n){b.cssHooks[n]={get:function(e,r,i){return r?0===e.offsetWidth&&Xt.test(b.css(e,"display"))?b.swap(e,Qt,function(){return sn(e,n,i)}):sn(e,n,i):t},set:function(e,t,r){var i=r&&Rt(e);return on(e,t,r?an(e,n,r,b.support.boxSizing&&"border-box"===b.css(e,"boxSizing",!1,i),i):0)}}}),b.support.opacity||(b.cssHooks.opacity={get:function(e,t){return It.test((t&&e.currentStyle?e.currentStyle.filter:e.style.filter)||"")?.01*parseFloat(RegExp.$1)+"":t?"1":""},set:function(e,t){var n=e.style,r=e.currentStyle,i=b.isNumeric(t)?"alpha(opacity="+100*t+")":"",o=r&&r.filter||n.filter||"";n.zoom=1,(t>=1||""===t)&&""===b.trim(o.replace($t,""))&&n.removeAttribute&&(n.removeAttribute("filter"),""===t||r&&!r.filter)||(n.filter=$t.test(o)?o.replace($t,i):o+" "+i)}}),b(function(){b.support.reliableMarginRight||(b.cssHooks.marginRight={get:function(e,n){return n?b.swap(e,{display:"inline-block"},Wt,[e,"marginRight"]):t}}),!b.support.pixelPosition&&b.fn.position&&b.each(["top","left"],function(e,n){b.cssHooks[n]={get:function(e,r){return r?(r=Wt(e,n),Yt.test(r)?b(e).position()[n]+"px":r):t}}})}),b.expr&&b.expr.filters&&(b.expr.filters.hidden=function(e){return 0>=e.offsetWidth&&0>=e.offsetHeight||!b.support.reliableHiddenOffsets&&"none"===(e.style&&e.style.display||b.css(e,"display"))},b.expr.filters.visible=function(e){return!b.expr.filters.hidden(e)}),b.each({margin:"",padding:"",border:"Width"},function(e,t){b.cssHooks[e+t]={expand:function(n){var r=0,i={},o="string"==typeof n?n.split(" "):[n];for(;4>r;r++)i[e+Zt[r]+t]=o[r]||o[r-2]||o[0];return i}},Ut.test(e)||(b.cssHooks[e+t].set=on)});var cn=/%20/g,pn=/\[\]$/,fn=/\r?\n/g,dn=/^(?:submit|button|image|reset|file)$/i,hn=/^(?:input|select|textarea|keygen)/i;b.fn.extend({serialize:function(){return b.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var e=b.prop(this,"elements");return e?b.makeArray(e):this}).filter(function(){var e=this.type;return this.name&&!b(this).is(":disabled")&&hn.test(this.nodeName)&&!dn.test(e)&&(this.checked||!Nt.test(e))}).map(function(e,t){var n=b(this).val();return null==n?null:b.isArray(n)?b.map(n,function(e){return{name:t.name,value:e.replace(fn,"\r\n")}}):{name:t.name,value:n.replace(fn,"\r\n")}}).get()}}),b.param=function(e,n){var r,i=[],o=function(e,t){t=b.isFunction(t)?t():null==t?"":t,i[i.length]=encodeURIComponent(e)+"="+encodeURIComponent(t)};if(n===t&&(n=b.ajaxSettings&&b.ajaxSettings.traditional),b.isArray(e)||e.jquery&&!b.isPlainObject(e))b.each(e,function(){o(this.name,this.value)});else for(r in e)gn(r,e[r],n,o);return i.join("&").replace(cn,"+")};function gn(e,t,n,r){var i;if(b.isArray(t))b.each(t,function(t,i){n||pn.test(e)?r(e,i):gn(e+"["+("object"==typeof i?t:"")+"]",i,n,r)});else if(n||"object"!==b.type(t))r(e,t);else for(i in t)gn(e+"["+i+"]",t[i],n,r)}b.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(e,t){b.fn[t]=function(e,n){return arguments.length>0?this.on(t,null,e,n):this.trigger(t)}}),b.fn.hover=function(e,t){return this.mouseenter(e).mouseleave(t||e)};var mn,yn,vn=b.now(),bn=/\?/,xn=/#.*$/,wn=/([?&])_=[^&]*/,Tn=/^(.*?):[ \t]*([^\r\n]*)\r?$/gm,Nn=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,Cn=/^(?:GET|HEAD)$/,kn=/^\/\//,En=/^([\w.+-]+:)(?:\/\/([^\/?#:]*)(?::(\d+)|)|)/,Sn=b.fn.load,An={},jn={},Dn="*/".concat("*");try{yn=a.href}catch(Ln){yn=o.createElement("a"),yn.href="",yn=yn.href}mn=En.exec(yn.toLowerCase())||[];function Hn(e){return function(t,n){"string"!=typeof t&&(n=t,t="*");var r,i=0,o=t.toLowerCase().match(w)||[];if(b.isFunction(n))while(r=o[i++])"+"===r[0]?(r=r.slice(1)||"*",(e[r]=e[r]||[]).unshift(n)):(e[r]=e[r]||[]).push(n)}}function qn(e,n,r,i){var o={},a=e===jn;function s(u){var l;return o[u]=!0,b.each(e[u]||[],function(e,u){var c=u(n,r,i);return"string"!=typeof c||a||o[c]?a?!(l=c):t:(n.dataTypes.unshift(c),s(c),!1)}),l}return s(n.dataTypes[0])||!o["*"]&&s("*")}function Mn(e,n){var r,i,o=b.ajaxSettings.flatOptions||{};for(i in n)n[i]!==t&&((o[i]?e:r||(r={}))[i]=n[i]);return r&&b.extend(!0,e,r),e}b.fn.load=function(e,n,r){if("string"!=typeof e&&Sn)return Sn.apply(this,arguments);var i,o,a,s=this,u=e.indexOf(" ");return u>=0&&(i=e.slice(u,e.length),e=e.slice(0,u)),b.isFunction(n)?(r=n,n=t):n&&"object"==typeof n&&(a="POST"),s.length>0&&b.ajax({url:e,type:a,dataType:"html",data:n}).done(function(e){o=arguments,s.html(i?b("<div>").append(b.parseHTML(e)).find(i):e)}).complete(r&&function(e,t){s.each(r,o||[e.responseText,t,e])}),this},b.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(e,t){b.fn[t]=function(e){return this.on(t,e)}}),b.each(["get","post"],function(e,n){b[n]=function(e,r,i,o){return b.isFunction(r)&&(o=o||i,i=r,r=t),b.ajax({url:e,type:n,dataType:o,data:r,success:i})}}),b.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:yn,type:"GET",isLocal:Nn.test(mn[1]),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":Dn,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText"},converters:{"* text":e.String,"text html":!0,"text json":b.parseJSON,"text xml":b.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(e,t){return t?Mn(Mn(e,b.ajaxSettings),t):Mn(b.ajaxSettings,e)},ajaxPrefilter:Hn(An),ajaxTransport:Hn(jn),ajax:function(e,n){"object"==typeof e&&(n=e,e=t),n=n||{};var r,i,o,a,s,u,l,c,p=b.ajaxSetup({},n),f=p.context||p,d=p.context&&(f.nodeType||f.jquery)?b(f):b.event,h=b.Deferred(),g=b.Callbacks("once memory"),m=p.statusCode||{},y={},v={},x=0,T="canceled",N={readyState:0,getResponseHeader:function(e){var t;if(2===x){if(!c){c={};while(t=Tn.exec(a))c[t[1].toLowerCase()]=t[2]}t=c[e.toLowerCase()]}return null==t?null:t},getAllResponseHeaders:function(){return 2===x?a:null},setRequestHeader:function(e,t){var n=e.toLowerCase();return x||(e=v[n]=v[n]||e,y[e]=t),this},overrideMimeType:function(e){return x||(p.mimeType=e),this},statusCode:function(e){var t;if(e)if(2>x)for(t in e)m[t]=[m[t],e[t]];else N.always(e[N.status]);return this},abort:function(e){var t=e||T;return l&&l.abort(t),k(0,t),this}};if(h.promise(N).complete=g.add,N.success=N.done,N.error=N.fail,p.url=((e||p.url||yn)+"").replace(xn,"").replace(kn,mn[1]+"//"),p.type=n.method||n.type||p.method||p.type,p.dataTypes=b.trim(p.dataType||"*").toLowerCase().match(w)||[""],null==p.crossDomain&&(r=En.exec(p.url.toLowerCase()),p.crossDomain=!(!r||r[1]===mn[1]&&r[2]===mn[2]&&(r[3]||("http:"===r[1]?80:443))==(mn[3]||("http:"===mn[1]?80:443)))),p.data&&p.processData&&"string"!=typeof p.data&&(p.data=b.param(p.data,p.traditional)),qn(An,p,n,N),2===x)return N;u=p.global,u&&0===b.active++&&b.event.trigger("ajaxStart"),p.type=p.type.toUpperCase(),p.hasContent=!Cn.test(p.type),o=p.url,p.hasContent||(p.data&&(o=p.url+=(bn.test(o)?"&":"?")+p.data,delete p.data),p.cache===!1&&(p.url=wn.test(o)?o.replace(wn,"$1_="+vn++):o+(bn.test(o)?"&":"?")+"_="+vn++)),p.ifModified&&(b.lastModified[o]&&N.setRequestHeader("If-Modified-Since",b.lastModified[o]),b.etag[o]&&N.setRequestHeader("If-None-Match",b.etag[o])),(p.data&&p.hasContent&&p.contentType!==!1||n.contentType)&&N.setRequestHeader("Content-Type",p.contentType),N.setRequestHeader("Accept",p.dataTypes[0]&&p.accepts[p.dataTypes[0]]?p.accepts[p.dataTypes[0]]+("*"!==p.dataTypes[0]?", "+Dn+"; q=0.01":""):p.accepts["*"]);for(i in p.headers)N.setRequestHeader(i,p.headers[i]);if(p.beforeSend&&(p.beforeSend.call(f,N,p)===!1||2===x))return N.abort();T="abort";for(i in{success:1,error:1,complete:1})N[i](p[i]);if(l=qn(jn,p,n,N)){N.readyState=1,u&&d.trigger("ajaxSend",[N,p]),p.async&&p.timeout>0&&(s=setTimeout(function(){N.abort("timeout")},p.timeout));try{x=1,l.send(y,k)}catch(C){if(!(2>x))throw C;k(-1,C)}}else k(-1,"No Transport");function k(e,n,r,i){var c,y,v,w,T,C=n;2!==x&&(x=2,s&&clearTimeout(s),l=t,a=i||"",N.readyState=e>0?4:0,r&&(w=_n(p,N,r)),e>=200&&300>e||304===e?(p.ifModified&&(T=N.getResponseHeader("Last-Modified"),T&&(b.lastModified[o]=T),T=N.getResponseHeader("etag"),T&&(b.etag[o]=T)),204===e?(c=!0,C="nocontent"):304===e?(c=!0,C="notmodified"):(c=Fn(p,w),C=c.state,y=c.data,v=c.error,c=!v)):(v=C,(e||!C)&&(C="error",0>e&&(e=0))),N.status=e,N.statusText=(n||C)+"",c?h.resolveWith(f,[y,C,N]):h.rejectWith(f,[N,C,v]),N.statusCode(m),m=t,u&&d.trigger(c?"ajaxSuccess":"ajaxError",[N,p,c?y:v]),g.fireWith(f,[N,C]),u&&(d.trigger("ajaxComplete",[N,p]),--b.active||b.event.trigger("ajaxStop")))}return N},getScript:function(e,n){return b.get(e,t,n,"script")},getJSON:function(e,t,n){return b.get(e,t,n,"json")}});function _n(e,n,r){var i,o,a,s,u=e.contents,l=e.dataTypes,c=e.responseFields;for(s in c)s in r&&(n[c[s]]=r[s]);while("*"===l[0])l.shift(),o===t&&(o=e.mimeType||n.getResponseHeader("Content-Type"));if(o)for(s in u)if(u[s]&&u[s].test(o)){l.unshift(s);break}if(l[0]in r)a=l[0];else{for(s in r){if(!l[0]||e.converters[s+" "+l[0]]){a=s;break}i||(i=s)}a=a||i}return a?(a!==l[0]&&l.unshift(a),r[a]):t}function Fn(e,t){var n,r,i,o,a={},s=0,u=e.dataTypes.slice(),l=u[0];if(e.dataFilter&&(t=e.dataFilter(t,e.dataType)),u[1])for(i in e.converters)a[i.toLowerCase()]=e.converters[i];for(;r=u[++s];)if("*"!==r){if("*"!==l&&l!==r){if(i=a[l+" "+r]||a["* "+r],!i)for(n in a)if(o=n.split(" "),o[1]===r&&(i=a[l+" "+o[0]]||a["* "+o[0]])){i===!0?i=a[n]:a[n]!==!0&&(r=o[0],u.splice(s--,0,r));break}if(i!==!0)if(i&&e["throws"])t=i(t);else try{t=i(t)}catch(c){return{state:"parsererror",error:i?c:"No conversion from "+l+" to "+r}}}l=r}return{state:"success",data:t}}b.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/(?:java|ecma)script/},converters:{"text script":function(e){return b.globalEval(e),e}}}),b.ajaxPrefilter("script",function(e){e.cache===t&&(e.cache=!1),e.crossDomain&&(e.type="GET",e.global=!1)}),b.ajaxTransport("script",function(e){if(e.crossDomain){var n,r=o.head||b("head")[0]||o.documentElement;return{send:function(t,i){n=o.createElement("script"),n.async=!0,e.scriptCharset&&(n.charset=e.scriptCharset),n.src=e.url,n.onload=n.onreadystatechange=function(e,t){(t||!n.readyState||/loaded|complete/.test(n.readyState))&&(n.onload=n.onreadystatechange=null,n.parentNode&&n.parentNode.removeChild(n),n=null,t||i(200,"success"))},r.insertBefore(n,r.firstChild)},abort:function(){n&&n.onload(t,!0)}}}});var On=[],Bn=/(=)\?(?=&|$)|\?\?/;b.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var e=On.pop()||b.expando+"_"+vn++;return this[e]=!0,e}}),b.ajaxPrefilter("json jsonp",function(n,r,i){var o,a,s,u=n.jsonp!==!1&&(Bn.test(n.url)?"url":"string"==typeof n.data&&!(n.contentType||"").indexOf("application/x-www-form-urlencoded")&&Bn.test(n.data)&&"data");return u||"jsonp"===n.dataTypes[0]?(o=n.jsonpCallback=b.isFunction(n.jsonpCallback)?n.jsonpCallback():n.jsonpCallback,u?n[u]=n[u].replace(Bn,"$1"+o):n.jsonp!==!1&&(n.url+=(bn.test(n.url)?"&":"?")+n.jsonp+"="+o),n.converters["script json"]=function(){return s||b.error(o+" was not called"),s[0]},n.dataTypes[0]="json",a=e[o],e[o]=function(){s=arguments},i.always(function(){e[o]=a,n[o]&&(n.jsonpCallback=r.jsonpCallback,On.push(o)),s&&b.isFunction(a)&&a(s[0]),s=a=t}),"script"):t});var Pn,Rn,Wn=0,$n=e.ActiveXObject&&function(){var e;for(e in Pn)Pn[e](t,!0)};function In(){try{return new e.XMLHttpRequest}catch(t){}}function zn(){try{return new e.ActiveXObject("Microsoft.XMLHTTP")}catch(t){}}b.ajaxSettings.xhr=e.ActiveXObject?function(){return!this.isLocal&&In()||zn()}:In,Rn=b.ajaxSettings.xhr(),b.support.cors=!!Rn&&"withCredentials"in Rn,Rn=b.support.ajax=!!Rn,Rn&&b.ajaxTransport(function(n){if(!n.crossDomain||b.support.cors){var r;return{send:function(i,o){var a,s,u=n.xhr();if(n.username?u.open(n.type,n.url,n.async,n.username,n.password):u.open(n.type,n.url,n.async),n.xhrFields)for(s in n.xhrFields)u[s]=n.xhrFields[s];n.mimeType&&u.overrideMimeType&&u.overrideMimeType(n.mimeType),n.crossDomain||i["X-Requested-With"]||(i["X-Requested-With"]="XMLHttpRequest");try{for(s in i)u.setRequestHeader(s,i[s])}catch(l){}u.send(n.hasContent&&n.data||null),r=function(e,i){var s,l,c,p;try{if(r&&(i||4===u.readyState))if(r=t,a&&(u.onreadystatechange=b.noop,$n&&delete Pn[a]),i)4!==u.readyState&&u.abort();else{p={},s=u.status,l=u.getAllResponseHeaders(),"string"==typeof u.responseText&&(p.text=u.responseText);try{c=u.statusText}catch(f){c=""}s||!n.isLocal||n.crossDomain?1223===s&&(s=204):s=p.text?200:404}}catch(d){i||o(-1,d)}p&&o(s,c,p,l)},n.async?4===u.readyState?setTimeout(r):(a=++Wn,$n&&(Pn||(Pn={},b(e).unload($n)),Pn[a]=r),u.onreadystatechange=r):r()},abort:function(){r&&r(t,!0)}}}});var Xn,Un,Vn=/^(?:toggle|show|hide)$/,Yn=RegExp("^(?:([+-])=|)("+x+")([a-z%]*)$","i"),Jn=/queueHooks$/,Gn=[nr],Qn={"*":[function(e,t){var n,r,i=this.createTween(e,t),o=Yn.exec(t),a=i.cur(),s=+a||0,u=1,l=20;if(o){if(n=+o[2],r=o[3]||(b.cssNumber[e]?"":"px"),"px"!==r&&s){s=b.css(i.elem,e,!0)||n||1;do u=u||".5",s/=u,b.style(i.elem,e,s+r);while(u!==(u=i.cur()/a)&&1!==u&&--l)}i.unit=r,i.start=s,i.end=o[1]?s+(o[1]+1)*n:n}return i}]};function Kn(){return setTimeout(function(){Xn=t}),Xn=b.now()}function Zn(e,t){b.each(t,function(t,n){var r=(Qn[t]||[]).concat(Qn["*"]),i=0,o=r.length;for(;o>i;i++)if(r[i].call(e,t,n))return})}function er(e,t,n){var r,i,o=0,a=Gn.length,s=b.Deferred().always(function(){delete u.elem}),u=function(){if(i)return!1;var t=Xn||Kn(),n=Math.max(0,l.startTime+l.duration-t),r=n/l.duration||0,o=1-r,a=0,u=l.tweens.length;for(;u>a;a++)l.tweens[a].run(o);return s.notifyWith(e,[l,o,n]),1>o&&u?n:(s.resolveWith(e,[l]),!1)},l=s.promise({elem:e,props:b.extend({},t),opts:b.extend(!0,{specialEasing:{}},n),originalProperties:t,originalOptions:n,startTime:Xn||Kn(),duration:n.duration,tweens:[],createTween:function(t,n){var r=b.Tween(e,l.opts,t,n,l.opts.specialEasing[t]||l.opts.easing);return l.tweens.push(r),r},stop:function(t){var n=0,r=t?l.tweens.length:0;if(i)return this;for(i=!0;r>n;n++)l.tweens[n].run(1);return t?s.resolveWith(e,[l,t]):s.rejectWith(e,[l,t]),this}}),c=l.props;for(tr(c,l.opts.specialEasing);a>o;o++)if(r=Gn[o].call(l,e,c,l.opts))return r;return Zn(l,c),b.isFunction(l.opts.start)&&l.opts.start.call(e,l),b.fx.timer(b.extend(u,{elem:e,anim:l,queue:l.opts.queue})),l.progress(l.opts.progress).done(l.opts.done,l.opts.complete).fail(l.opts.fail).always(l.opts.always)}function tr(e,t){var n,r,i,o,a;for(i in e)if(r=b.camelCase(i),o=t[r],n=e[i],b.isArray(n)&&(o=n[1],n=e[i]=n[0]),i!==r&&(e[r]=n,delete e[i]),a=b.cssHooks[r],a&&"expand"in a){n=a.expand(n),delete e[r];for(i in n)i in e||(e[i]=n[i],t[i]=o)}else t[r]=o}b.Animation=b.extend(er,{tweener:function(e,t){b.isFunction(e)?(t=e,e=["*"]):e=e.split(" ");var n,r=0,i=e.length;for(;i>r;r++)n=e[r],Qn[n]=Qn[n]||[],Qn[n].unshift(t)},prefilter:function(e,t){t?Gn.unshift(e):Gn.push(e)}});function nr(e,t,n){var r,i,o,a,s,u,l,c,p,f=this,d=e.style,h={},g=[],m=e.nodeType&&nn(e);n.queue||(c=b._queueHooks(e,"fx"),null==c.unqueued&&(c.unqueued=0,p=c.empty.fire,c.empty.fire=function(){c.unqueued||p()}),c.unqueued++,f.always(function(){f.always(function(){c.unqueued--,b.queue(e,"fx").length||c.empty.fire()})})),1===e.nodeType&&("height"in t||"width"in t)&&(n.overflow=[d.overflow,d.overflowX,d.overflowY],"inline"===b.css(e,"display")&&"none"===b.css(e,"float")&&(b.support.inlineBlockNeedsLayout&&"inline"!==un(e.nodeName)?d.zoom=1:d.display="inline-block")),n.overflow&&(d.overflow="hidden",b.support.shrinkWrapBlocks||f.always(function(){d.overflow=n.overflow[0],d.overflowX=n.overflow[1],d.overflowY=n.overflow[2]}));for(i in t)if(a=t[i],Vn.exec(a)){if(delete t[i],u=u||"toggle"===a,a===(m?"hide":"show"))continue;g.push(i)}if(o=g.length){s=b._data(e,"fxshow")||b._data(e,"fxshow",{}),"hidden"in s&&(m=s.hidden),u&&(s.hidden=!m),m?b(e).show():f.done(function(){b(e).hide()}),f.done(function(){var t;b._removeData(e,"fxshow");for(t in h)b.style(e,t,h[t])});for(i=0;o>i;i++)r=g[i],l=f.createTween(r,m?s[r]:0),h[r]=s[r]||b.style(e,r),r in s||(s[r]=l.start,m&&(l.end=l.start,l.start="width"===r||"height"===r?1:0))}}function rr(e,t,n,r,i){return new rr.prototype.init(e,t,n,r,i)}b.Tween=rr,rr.prototype={constructor:rr,init:function(e,t,n,r,i,o){this.elem=e,this.prop=n,this.easing=i||"swing",this.options=t,this.start=this.now=this.cur(),this.end=r,this.unit=o||(b.cssNumber[n]?"":"px")},cur:function(){var e=rr.propHooks[this.prop];return e&&e.get?e.get(this):rr.propHooks._default.get(this)},run:function(e){var t,n=rr.propHooks[this.prop];return this.pos=t=this.options.duration?b.easing[this.easing](e,this.options.duration*e,0,1,this.options.duration):e,this.now=(this.end-this.start)*t+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),n&&n.set?n.set(this):rr.propHooks._default.set(this),this}},rr.prototype.init.prototype=rr.prototype,rr.propHooks={_default:{get:function(e){var t;return null==e.elem[e.prop]||e.elem.style&&null!=e.elem.style[e.prop]?(t=b.css(e.elem,e.prop,""),t&&"auto"!==t?t:0):e.elem[e.prop]},set:function(e){b.fx.step[e.prop]?b.fx.step[e.prop](e):e.elem.style&&(null!=e.elem.style[b.cssProps[e.prop]]||b.cssHooks[e.prop])?b.style(e.elem,e.prop,e.now+e.unit):e.elem[e.prop]=e.now}}},rr.propHooks.scrollTop=rr.propHooks.scrollLeft={set:function(e){e.elem.nodeType&&e.elem.parentNode&&(e.elem[e.prop]=e.now)}},b.each(["toggle","show","hide"],function(e,t){var n=b.fn[t];b.fn[t]=function(e,r,i){return null==e||"boolean"==typeof e?n.apply(this,arguments):this.animate(ir(t,!0),e,r,i)}}),b.fn.extend({fadeTo:function(e,t,n,r){return this.filter(nn).css("opacity",0).show().end().animate({opacity:t},e,n,r)},animate:function(e,t,n,r){var i=b.isEmptyObject(e),o=b.speed(t,n,r),a=function(){var t=er(this,b.extend({},e),o);a.finish=function(){t.stop(!0)},(i||b._data(this,"finish"))&&t.stop(!0)};return a.finish=a,i||o.queue===!1?this.each(a):this.queue(o.queue,a)},stop:function(e,n,r){var i=function(e){var t=e.stop;delete e.stop,t(r)};return"string"!=typeof e&&(r=n,n=e,e=t),n&&e!==!1&&this.queue(e||"fx",[]),this.each(function(){var t=!0,n=null!=e&&e+"queueHooks",o=b.timers,a=b._data(this);if(n)a[n]&&a[n].stop&&i(a[n]);else for(n in a)a[n]&&a[n].stop&&Jn.test(n)&&i(a[n]);for(n=o.length;n--;)o[n].elem!==this||null!=e&&o[n].queue!==e||(o[n].anim.stop(r),t=!1,o.splice(n,1));(t||!r)&&b.dequeue(this,e)})},finish:function(e){return e!==!1&&(e=e||"fx"),this.each(function(){var t,n=b._data(this),r=n[e+"queue"],i=n[e+"queueHooks"],o=b.timers,a=r?r.length:0;for(n.finish=!0,b.queue(this,e,[]),i&&i.cur&&i.cur.finish&&i.cur.finish.call(this),t=o.length;t--;)o[t].elem===this&&o[t].queue===e&&(o[t].anim.stop(!0),o.splice(t,1));for(t=0;a>t;t++)r[t]&&r[t].finish&&r[t].finish.call(this);delete n.finish})}});function ir(e,t){var n,r={height:e},i=0;for(t=t?1:0;4>i;i+=2-t)n=Zt[i],r["margin"+n]=r["padding"+n]=e;return t&&(r.opacity=r.width=e),r}b.each({slideDown:ir("show"),slideUp:ir("hide"),slideToggle:ir("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(e,t){b.fn[e]=function(e,n,r){return this.animate(t,e,n,r)}}),b.speed=function(e,t,n){var r=e&&"object"==typeof e?b.extend({},e):{complete:n||!n&&t||b.isFunction(e)&&e,duration:e,easing:n&&t||t&&!b.isFunction(t)&&t};return r.duration=b.fx.off?0:"number"==typeof r.duration?r.duration:r.duration in b.fx.speeds?b.fx.speeds[r.duration]:b.fx.speeds._default,(null==r.queue||r.queue===!0)&&(r.queue="fx"),r.old=r.complete,r.complete=function(){b.isFunction(r.old)&&r.old.call(this),r.queue&&b.dequeue(this,r.queue)},r},b.easing={linear:function(e){return e},swing:function(e){return.5-Math.cos(e*Math.PI)/2}},b.timers=[],b.fx=rr.prototype.init,b.fx.tick=function(){var e,n=b.timers,r=0;for(Xn=b.now();n.length>r;r++)e=n[r],e()||n[r]!==e||n.splice(r--,1);n.length||b.fx.stop(),Xn=t},b.fx.timer=function(e){e()&&b.timers.push(e)&&b.fx.start()},b.fx.interval=13,b.fx.start=function(){Un||(Un=setInterval(b.fx.tick,b.fx.interval))},b.fx.stop=function(){clearInterval(Un),Un=null},b.fx.speeds={slow:600,fast:200,_default:400},b.fx.step={},b.expr&&b.expr.filters&&(b.expr.filters.animated=function(e){return b.grep(b.timers,function(t){return e===t.elem}).length}),b.fn.offset=function(e){if(arguments.length)return e===t?this:this.each(function(t){b.offset.setOffset(this,e,t)});var n,r,o={top:0,left:0},a=this[0],s=a&&a.ownerDocument;if(s)return n=s.documentElement,b.contains(n,a)?(typeof a.getBoundingClientRect!==i&&(o=a.getBoundingClientRect()),r=or(s),{top:o.top+(r.pageYOffset||n.scrollTop)-(n.clientTop||0),left:o.left+(r.pageXOffset||n.scrollLeft)-(n.clientLeft||0)}):o},b.offset={setOffset:function(e,t,n){var r=b.css(e,"position");"static"===r&&(e.style.position="relative");var i=b(e),o=i.offset(),a=b.css(e,"top"),s=b.css(e,"left"),u=("absolute"===r||"fixed"===r)&&b.inArray("auto",[a,s])>-1,l={},c={},p,f;u?(c=i.position(),p=c.top,f=c.left):(p=parseFloat(a)||0,f=parseFloat(s)||0),b.isFunction(t)&&(t=t.call(e,n,o)),null!=t.top&&(l.top=t.top-o.top+p),null!=t.left&&(l.left=t.left-o.left+f),"using"in t?t.using.call(e,l):i.css(l)}},b.fn.extend({position:function(){if(this[0]){var e,t,n={top:0,left:0},r=this[0];return"fixed"===b.css(r,"position")?t=r.getBoundingClientRect():(e=this.offsetParent(),t=this.offset(),b.nodeName(e[0],"html")||(n=e.offset()),n.top+=b.css(e[0],"borderTopWidth",!0),n.left+=b.css(e[0],"borderLeftWidth",!0)),{top:t.top-n.top-b.css(r,"marginTop",!0),left:t.left-n.left-b.css(r,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){var e=this.offsetParent||o.documentElement;while(e&&!b.nodeName(e,"html")&&"static"===b.css(e,"position"))e=e.offsetParent;return e||o.documentElement})}}),b.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(e,n){var r=/Y/.test(n);b.fn[e]=function(i){return b.access(this,function(e,i,o){var a=or(e);return o===t?a?n in a?a[n]:a.document.documentElement[i]:e[i]:(a?a.scrollTo(r?b(a).scrollLeft():o,r?o:b(a).scrollTop()):e[i]=o,t)},e,i,arguments.length,null)}});function or(e){return b.isWindow(e)?e:9===e.nodeType?e.defaultView||e.parentWindow:!1}b.each({Height:"height",Width:"width"},function(e,n){b.each({padding:"inner"+e,content:n,"":"outer"+e},function(r,i){b.fn[i]=function(i,o){var a=arguments.length&&(r||"boolean"!=typeof i),s=r||(i===!0||o===!0?"margin":"border");return b.access(this,function(n,r,i){var o;return b.isWindow(n)?n.document.documentElement["client"+e]:9===n.nodeType?(o=n.documentElement,Math.max(n.body["scroll"+e],o["scroll"+e],n.body["offset"+e],o["offset"+e],o["client"+e])):i===t?b.css(n,r,s):b.style(n,r,i,s)},n,a?i:t,a,null)}})}),e.jQuery=e.$=b,"function"==typeof define&&define.amd&&define.amd.jQuery&&define("jquery",[],function(){return b})})(window);/*! jQuery UI - v1.10.2 - 2013-03-14
* http://jqueryui.com
* Copyright 2013 jQuery Foundation and other contributors; Licensed MIT */
(function(e,t){function i(t,i){var a,n,r,o=t.nodeName.toLowerCase();return"area"===o?(a=t.parentNode,n=a.name,t.href&&n&&"map"===a.nodeName.toLowerCase()?(r=e("img[usemap=#"+n+"]")[0],!!r&&s(r)):!1):(/input|select|textarea|button|object/.test(o)?!t.disabled:"a"===o?t.href||i:i)&&s(t)}function s(t){return e.expr.filters.visible(t)&&!e(t).parents().addBack().filter(function(){return"hidden"===e.css(this,"visibility")}).length}var a=0,n=/^ui-id-\d+$/;e.ui=e.ui||{},e.extend(e.ui,{version:"1.10.2",keyCode:{BACKSPACE:8,COMMA:188,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,LEFT:37,NUMPAD_ADD:107,NUMPAD_DECIMAL:110,NUMPAD_DIVIDE:111,NUMPAD_ENTER:108,NUMPAD_MULTIPLY:106,NUMPAD_SUBTRACT:109,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SPACE:32,TAB:9,UP:38}}),e.fn.extend({focus:function(t){return function(i,s){return"number"==typeof i?this.each(function(){var t=this;setTimeout(function(){e(t).focus(),s&&s.call(t)},i)}):t.apply(this,arguments)}}(e.fn.focus),scrollParent:function(){var t;return t=e.ui.ie&&/(static|relative)/.test(this.css("position"))||/absolute/.test(this.css("position"))?this.parents().filter(function(){return/(relative|absolute|fixed)/.test(e.css(this,"position"))&&/(auto|scroll)/.test(e.css(this,"overflow")+e.css(this,"overflow-y")+e.css(this,"overflow-x"))}).eq(0):this.parents().filter(function(){return/(auto|scroll)/.test(e.css(this,"overflow")+e.css(this,"overflow-y")+e.css(this,"overflow-x"))}).eq(0),/fixed/.test(this.css("position"))||!t.length?e(document):t},zIndex:function(i){if(i!==t)return this.css("zIndex",i);if(this.length)for(var s,a,n=e(this[0]);n.length&&n[0]!==document;){if(s=n.css("position"),("absolute"===s||"relative"===s||"fixed"===s)&&(a=parseInt(n.css("zIndex"),10),!isNaN(a)&&0!==a))return a;n=n.parent()}return 0},uniqueId:function(){return this.each(function(){this.id||(this.id="ui-id-"+ ++a)})},removeUniqueId:function(){return this.each(function(){n.test(this.id)&&e(this).removeAttr("id")})}}),e.extend(e.expr[":"],{data:e.expr.createPseudo?e.expr.createPseudo(function(t){return function(i){return!!e.data(i,t)}}):function(t,i,s){return!!e.data(t,s[3])},focusable:function(t){return i(t,!isNaN(e.attr(t,"tabindex")))},tabbable:function(t){var s=e.attr(t,"tabindex"),a=isNaN(s);return(a||s>=0)&&i(t,!a)}}),e("<a>").outerWidth(1).jquery||e.each(["Width","Height"],function(i,s){function a(t,i,s,a){return e.each(n,function(){i-=parseFloat(e.css(t,"padding"+this))||0,s&&(i-=parseFloat(e.css(t,"border"+this+"Width"))||0),a&&(i-=parseFloat(e.css(t,"margin"+this))||0)}),i}var n="Width"===s?["Left","Right"]:["Top","Bottom"],r=s.toLowerCase(),o={innerWidth:e.fn.innerWidth,innerHeight:e.fn.innerHeight,outerWidth:e.fn.outerWidth,outerHeight:e.fn.outerHeight};e.fn["inner"+s]=function(i){return i===t?o["inner"+s].call(this):this.each(function(){e(this).css(r,a(this,i)+"px")})},e.fn["outer"+s]=function(t,i){return"number"!=typeof t?o["outer"+s].call(this,t):this.each(function(){e(this).css(r,a(this,t,!0,i)+"px")})}}),e.fn.addBack||(e.fn.addBack=function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}),e("<a>").data("a-b","a").removeData("a-b").data("a-b")&&(e.fn.removeData=function(t){return function(i){return arguments.length?t.call(this,e.camelCase(i)):t.call(this)}}(e.fn.removeData)),e.ui.ie=!!/msie [\w.]+/.exec(navigator.userAgent.toLowerCase()),e.support.selectstart="onselectstart"in document.createElement("div"),e.fn.extend({disableSelection:function(){return this.bind((e.support.selectstart?"selectstart":"mousedown")+".ui-disableSelection",function(e){e.preventDefault()})},enableSelection:function(){return this.unbind(".ui-disableSelection")}}),e.extend(e.ui,{plugin:{add:function(t,i,s){var a,n=e.ui[t].prototype;for(a in s)n.plugins[a]=n.plugins[a]||[],n.plugins[a].push([i,s[a]])},call:function(e,t,i){var s,a=e.plugins[t];if(a&&e.element[0].parentNode&&11!==e.element[0].parentNode.nodeType)for(s=0;a.length>s;s++)e.options[a[s][0]]&&a[s][1].apply(e.element,i)}},hasScroll:function(t,i){if("hidden"===e(t).css("overflow"))return!1;var s=i&&"left"===i?"scrollLeft":"scrollTop",a=!1;return t[s]>0?!0:(t[s]=1,a=t[s]>0,t[s]=0,a)}})})(jQuery);/*! jQuery UI - v1.10.2 - 2013-03-14
* http://jqueryui.com
* Copyright 2013 jQuery Foundation and other contributors; Licensed MIT */
(function(e,t){var i=0,s=Array.prototype.slice,n=e.cleanData;e.cleanData=function(t){for(var i,s=0;null!=(i=t[s]);s++)try{e(i).triggerHandler("remove")}catch(a){}n(t)},e.widget=function(i,s,n){var a,r,o,h,l={},u=i.split(".")[0];i=i.split(".")[1],a=u+"-"+i,n||(n=s,s=e.Widget),e.expr[":"][a.toLowerCase()]=function(t){return!!e.data(t,a)},e[u]=e[u]||{},r=e[u][i],o=e[u][i]=function(e,i){return this._createWidget?(arguments.length&&this._createWidget(e,i),t):new o(e,i)},e.extend(o,r,{version:n.version,_proto:e.extend({},n),_childConstructors:[]}),h=new s,h.options=e.widget.extend({},h.options),e.each(n,function(i,n){return e.isFunction(n)?(l[i]=function(){var e=function(){return s.prototype[i].apply(this,arguments)},t=function(e){return s.prototype[i].apply(this,e)};return function(){var i,s=this._super,a=this._superApply;return this._super=e,this._superApply=t,i=n.apply(this,arguments),this._super=s,this._superApply=a,i}}(),t):(l[i]=n,t)}),o.prototype=e.widget.extend(h,{widgetEventPrefix:r?h.widgetEventPrefix:i},l,{constructor:o,namespace:u,widgetName:i,widgetFullName:a}),r?(e.each(r._childConstructors,function(t,i){var s=i.prototype;e.widget(s.namespace+"."+s.widgetName,o,i._proto)}),delete r._childConstructors):s._childConstructors.push(o),e.widget.bridge(i,o)},e.widget.extend=function(i){for(var n,a,r=s.call(arguments,1),o=0,h=r.length;h>o;o++)for(n in r[o])a=r[o][n],r[o].hasOwnProperty(n)&&a!==t&&(i[n]=e.isPlainObject(a)?e.isPlainObject(i[n])?e.widget.extend({},i[n],a):e.widget.extend({},a):a);return i},e.widget.bridge=function(i,n){var a=n.prototype.widgetFullName||i;e.fn[i]=function(r){var o="string"==typeof r,h=s.call(arguments,1),l=this;return r=!o&&h.length?e.widget.extend.apply(null,[r].concat(h)):r,o?this.each(function(){var s,n=e.data(this,a);return n?e.isFunction(n[r])&&"_"!==r.charAt(0)?(s=n[r].apply(n,h),s!==n&&s!==t?(l=s&&s.jquery?l.pushStack(s.get()):s,!1):t):e.error("no such method '"+r+"' for "+i+" widget instance"):e.error("cannot call methods on "+i+" prior to initialization; "+"attempted to call method '"+r+"'")}):this.each(function(){var t=e.data(this,a);t?t.option(r||{})._init():e.data(this,a,new n(r,this))}),l}},e.Widget=function(){},e.Widget._childConstructors=[],e.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{disabled:!1,create:null},_createWidget:function(t,s){s=e(s||this.defaultElement||this)[0],this.element=e(s),this.uuid=i++,this.eventNamespace="."+this.widgetName+this.uuid,this.options=e.widget.extend({},this.options,this._getCreateOptions(),t),this.bindings=e(),this.hoverable=e(),this.focusable=e(),s!==this&&(e.data(s,this.widgetFullName,this),this._on(!0,this.element,{remove:function(e){e.target===s&&this.destroy()}}),this.document=e(s.style?s.ownerDocument:s.document||s),this.window=e(this.document[0].defaultView||this.document[0].parentWindow)),this._create(),this._trigger("create",null,this._getCreateEventData()),this._init()},_getCreateOptions:e.noop,_getCreateEventData:e.noop,_create:e.noop,_init:e.noop,destroy:function(){this._destroy(),this.element.unbind(this.eventNamespace).removeData(this.widgetName).removeData(this.widgetFullName).removeData(e.camelCase(this.widgetFullName)),this.widget().unbind(this.eventNamespace).removeAttr("aria-disabled").removeClass(this.widgetFullName+"-disabled "+"ui-state-disabled"),this.bindings.unbind(this.eventNamespace),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")},_destroy:e.noop,widget:function(){return this.element},option:function(i,s){var n,a,r,o=i;if(0===arguments.length)return e.widget.extend({},this.options);if("string"==typeof i)if(o={},n=i.split("."),i=n.shift(),n.length){for(a=o[i]=e.widget.extend({},this.options[i]),r=0;n.length-1>r;r++)a[n[r]]=a[n[r]]||{},a=a[n[r]];if(i=n.pop(),s===t)return a[i]===t?null:a[i];a[i]=s}else{if(s===t)return this.options[i]===t?null:this.options[i];o[i]=s}return this._setOptions(o),this},_setOptions:function(e){var t;for(t in e)this._setOption(t,e[t]);return this},_setOption:function(e,t){return this.options[e]=t,"disabled"===e&&(this.widget().toggleClass(this.widgetFullName+"-disabled ui-state-disabled",!!t).attr("aria-disabled",t),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")),this},enable:function(){return this._setOption("disabled",!1)},disable:function(){return this._setOption("disabled",!0)},_on:function(i,s,n){var a,r=this;"boolean"!=typeof i&&(n=s,s=i,i=!1),n?(s=a=e(s),this.bindings=this.bindings.add(s)):(n=s,s=this.element,a=this.widget()),e.each(n,function(n,o){function h(){return i||r.options.disabled!==!0&&!e(this).hasClass("ui-state-disabled")?("string"==typeof o?r[o]:o).apply(r,arguments):t}"string"!=typeof o&&(h.guid=o.guid=o.guid||h.guid||e.guid++);var l=n.match(/^(\w+)\s*(.*)$/),u=l[1]+r.eventNamespace,c=l[2];c?a.delegate(c,u,h):s.bind(u,h)})},_off:function(e,t){t=(t||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace,e.unbind(t).undelegate(t)},_delay:function(e,t){function i(){return("string"==typeof e?s[e]:e).apply(s,arguments)}var s=this;return setTimeout(i,t||0)},_hoverable:function(t){this.hoverable=this.hoverable.add(t),this._on(t,{mouseenter:function(t){e(t.currentTarget).addClass("ui-state-hover")},mouseleave:function(t){e(t.currentTarget).removeClass("ui-state-hover")}})},_focusable:function(t){this.focusable=this.focusable.add(t),this._on(t,{focusin:function(t){e(t.currentTarget).addClass("ui-state-focus")},focusout:function(t){e(t.currentTarget).removeClass("ui-state-focus")}})},_trigger:function(t,i,s){var n,a,r=this.options[t];if(s=s||{},i=e.Event(i),i.type=(t===this.widgetEventPrefix?t:this.widgetEventPrefix+t).toLowerCase(),i.target=this.element[0],a=i.originalEvent)for(n in a)n in i||(i[n]=a[n]);return this.element.trigger(i,s),!(e.isFunction(r)&&r.apply(this.element[0],[i].concat(s))===!1||i.isDefaultPrevented())}},e.each({show:"fadeIn",hide:"fadeOut"},function(t,i){e.Widget.prototype["_"+t]=function(s,n,a){"string"==typeof n&&(n={effect:n});var r,o=n?n===!0||"number"==typeof n?i:n.effect||i:t;n=n||{},"number"==typeof n&&(n={duration:n}),r=!e.isEmptyObject(n),n.complete=a,n.delay&&s.delay(n.delay),r&&e.effects&&e.effects.effect[o]?s[t](n):o!==t&&s[o]?s[o](n.duration,n.easing,a):s.queue(function(i){e(this)[t](),a&&a.call(s[0]),i()})}})})(jQuery);/*! jQuery UI - v1.10.2 - 2013-03-14
* http://jqueryui.com
* Copyright 2013 jQuery Foundation and other contributors; Licensed MIT */
(function(e){var t=!1;e(document).mouseup(function(){t=!1}),e.widget("ui.mouse",{version:"1.10.2",options:{cancel:"input,textarea,button,select,option",distance:1,delay:0},_mouseInit:function(){var t=this;this.element.bind("mousedown."+this.widgetName,function(e){return t._mouseDown(e)}).bind("click."+this.widgetName,function(i){return!0===e.data(i.target,t.widgetName+".preventClickEvent")?(e.removeData(i.target,t.widgetName+".preventClickEvent"),i.stopImmediatePropagation(),!1):undefined}),this.started=!1},_mouseDestroy:function(){this.element.unbind("."+this.widgetName),this._mouseMoveDelegate&&e(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate)},_mouseDown:function(i){if(!t){this._mouseStarted&&this._mouseUp(i),this._mouseDownEvent=i;var s=this,n=1===i.which,a="string"==typeof this.options.cancel&&i.target.nodeName?e(i.target).closest(this.options.cancel).length:!1;return n&&!a&&this._mouseCapture(i)?(this.mouseDelayMet=!this.options.delay,this.mouseDelayMet||(this._mouseDelayTimer=setTimeout(function(){s.mouseDelayMet=!0},this.options.delay)),this._mouseDistanceMet(i)&&this._mouseDelayMet(i)&&(this._mouseStarted=this._mouseStart(i)!==!1,!this._mouseStarted)?(i.preventDefault(),!0):(!0===e.data(i.target,this.widgetName+".preventClickEvent")&&e.removeData(i.target,this.widgetName+".preventClickEvent"),this._mouseMoveDelegate=function(e){return s._mouseMove(e)},this._mouseUpDelegate=function(e){return s._mouseUp(e)},e(document).bind("mousemove."+this.widgetName,this._mouseMoveDelegate).bind("mouseup."+this.widgetName,this._mouseUpDelegate),i.preventDefault(),t=!0,!0)):!0}},_mouseMove:function(t){return e.ui.ie&&(!document.documentMode||9>document.documentMode)&&!t.button?this._mouseUp(t):this._mouseStarted?(this._mouseDrag(t),t.preventDefault()):(this._mouseDistanceMet(t)&&this._mouseDelayMet(t)&&(this._mouseStarted=this._mouseStart(this._mouseDownEvent,t)!==!1,this._mouseStarted?this._mouseDrag(t):this._mouseUp(t)),!this._mouseStarted)},_mouseUp:function(t){return e(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate),this._mouseStarted&&(this._mouseStarted=!1,t.target===this._mouseDownEvent.target&&e.data(t.target,this.widgetName+".preventClickEvent",!0),this._mouseStop(t)),!1},_mouseDistanceMet:function(e){return Math.max(Math.abs(this._mouseDownEvent.pageX-e.pageX),Math.abs(this._mouseDownEvent.pageY-e.pageY))>=this.options.distance},_mouseDelayMet:function(){return this.mouseDelayMet},_mouseStart:function(){},_mouseDrag:function(){},_mouseStop:function(){},_mouseCapture:function(){return!0}})})(jQuery);/*! jQuery UI - v1.10.2 - 2013-03-14
* http://jqueryui.com
* Copyright 2013 jQuery Foundation and other contributors; Licensed MIT */
(function(t,e){function i(t,e,i){return[parseFloat(t[0])*(p.test(t[0])?e/100:1),parseFloat(t[1])*(p.test(t[1])?i/100:1)]}function s(e,i){return parseInt(t.css(e,i),10)||0}function n(e){var i=e[0];return 9===i.nodeType?{width:e.width(),height:e.height(),offset:{top:0,left:0}}:t.isWindow(i)?{width:e.width(),height:e.height(),offset:{top:e.scrollTop(),left:e.scrollLeft()}}:i.preventDefault?{width:0,height:0,offset:{top:i.pageY,left:i.pageX}}:{width:e.outerWidth(),height:e.outerHeight(),offset:e.offset()}}t.ui=t.ui||{};var a,o=Math.max,r=Math.abs,h=Math.round,l=/left|center|right/,c=/top|center|bottom/,u=/[\+\-]\d+(\.[\d]+)?%?/,d=/^\w+/,p=/%$/,f=t.fn.position;t.position={scrollbarWidth:function(){if(a!==e)return a;var i,s,n=t("<div style='display:block;width:50px;height:50px;overflow:hidden;'><div style='height:100px;width:auto;'></div></div>"),o=n.children()[0];return t("body").append(n),i=o.offsetWidth,n.css("overflow","scroll"),s=o.offsetWidth,i===s&&(s=n[0].clientWidth),n.remove(),a=i-s},getScrollInfo:function(e){var i=e.isWindow?"":e.element.css("overflow-x"),s=e.isWindow?"":e.element.css("overflow-y"),n="scroll"===i||"auto"===i&&e.width<e.element[0].scrollWidth,a="scroll"===s||"auto"===s&&e.height<e.element[0].scrollHeight;return{width:a?t.position.scrollbarWidth():0,height:n?t.position.scrollbarWidth():0}},getWithinInfo:function(e){var i=t(e||window),s=t.isWindow(i[0]);return{element:i,isWindow:s,offset:i.offset()||{left:0,top:0},scrollLeft:i.scrollLeft(),scrollTop:i.scrollTop(),width:s?i.width():i.outerWidth(),height:s?i.height():i.outerHeight()}}},t.fn.position=function(e){if(!e||!e.of)return f.apply(this,arguments);e=t.extend({},e);var a,p,m,g,v,_,b=t(e.of),y=t.position.getWithinInfo(e.within),w=t.position.getScrollInfo(y),x=(e.collision||"flip").split(" "),k={};return _=n(b),b[0].preventDefault&&(e.at="left top"),p=_.width,m=_.height,g=_.offset,v=t.extend({},g),t.each(["my","at"],function(){var t,i,s=(e[this]||"").split(" ");1===s.length&&(s=l.test(s[0])?s.concat(["center"]):c.test(s[0])?["center"].concat(s):["center","center"]),s[0]=l.test(s[0])?s[0]:"center",s[1]=c.test(s[1])?s[1]:"center",t=u.exec(s[0]),i=u.exec(s[1]),k[this]=[t?t[0]:0,i?i[0]:0],e[this]=[d.exec(s[0])[0],d.exec(s[1])[0]]}),1===x.length&&(x[1]=x[0]),"right"===e.at[0]?v.left+=p:"center"===e.at[0]&&(v.left+=p/2),"bottom"===e.at[1]?v.top+=m:"center"===e.at[1]&&(v.top+=m/2),a=i(k.at,p,m),v.left+=a[0],v.top+=a[1],this.each(function(){var n,l,c=t(this),u=c.outerWidth(),d=c.outerHeight(),f=s(this,"marginLeft"),_=s(this,"marginTop"),D=u+f+s(this,"marginRight")+w.width,T=d+_+s(this,"marginBottom")+w.height,C=t.extend({},v),M=i(k.my,c.outerWidth(),c.outerHeight());"right"===e.my[0]?C.left-=u:"center"===e.my[0]&&(C.left-=u/2),"bottom"===e.my[1]?C.top-=d:"center"===e.my[1]&&(C.top-=d/2),C.left+=M[0],C.top+=M[1],t.support.offsetFractions||(C.left=h(C.left),C.top=h(C.top)),n={marginLeft:f,marginTop:_},t.each(["left","top"],function(i,s){t.ui.position[x[i]]&&t.ui.position[x[i]][s](C,{targetWidth:p,targetHeight:m,elemWidth:u,elemHeight:d,collisionPosition:n,collisionWidth:D,collisionHeight:T,offset:[a[0]+M[0],a[1]+M[1]],my:e.my,at:e.at,within:y,elem:c})}),e.using&&(l=function(t){var i=g.left-C.left,s=i+p-u,n=g.top-C.top,a=n+m-d,h={target:{element:b,left:g.left,top:g.top,width:p,height:m},element:{element:c,left:C.left,top:C.top,width:u,height:d},horizontal:0>s?"left":i>0?"right":"center",vertical:0>a?"top":n>0?"bottom":"middle"};u>p&&p>r(i+s)&&(h.horizontal="center"),d>m&&m>r(n+a)&&(h.vertical="middle"),h.important=o(r(i),r(s))>o(r(n),r(a))?"horizontal":"vertical",e.using.call(this,t,h)}),c.offset(t.extend(C,{using:l}))})},t.ui.position={fit:{left:function(t,e){var i,s=e.within,n=s.isWindow?s.scrollLeft:s.offset.left,a=s.width,r=t.left-e.collisionPosition.marginLeft,h=n-r,l=r+e.collisionWidth-a-n;e.collisionWidth>a?h>0&&0>=l?(i=t.left+h+e.collisionWidth-a-n,t.left+=h-i):t.left=l>0&&0>=h?n:h>l?n+a-e.collisionWidth:n:h>0?t.left+=h:l>0?t.left-=l:t.left=o(t.left-r,t.left)},top:function(t,e){var i,s=e.within,n=s.isWindow?s.scrollTop:s.offset.top,a=e.within.height,r=t.top-e.collisionPosition.marginTop,h=n-r,l=r+e.collisionHeight-a-n;e.collisionHeight>a?h>0&&0>=l?(i=t.top+h+e.collisionHeight-a-n,t.top+=h-i):t.top=l>0&&0>=h?n:h>l?n+a-e.collisionHeight:n:h>0?t.top+=h:l>0?t.top-=l:t.top=o(t.top-r,t.top)}},flip:{left:function(t,e){var i,s,n=e.within,a=n.offset.left+n.scrollLeft,o=n.width,h=n.isWindow?n.scrollLeft:n.offset.left,l=t.left-e.collisionPosition.marginLeft,c=l-h,u=l+e.collisionWidth-o-h,d="left"===e.my[0]?-e.elemWidth:"right"===e.my[0]?e.elemWidth:0,p="left"===e.at[0]?e.targetWidth:"right"===e.at[0]?-e.targetWidth:0,f=-2*e.offset[0];0>c?(i=t.left+d+p+f+e.collisionWidth-o-a,(0>i||r(c)>i)&&(t.left+=d+p+f)):u>0&&(s=t.left-e.collisionPosition.marginLeft+d+p+f-h,(s>0||u>r(s))&&(t.left+=d+p+f))},top:function(t,e){var i,s,n=e.within,a=n.offset.top+n.scrollTop,o=n.height,h=n.isWindow?n.scrollTop:n.offset.top,l=t.top-e.collisionPosition.marginTop,c=l-h,u=l+e.collisionHeight-o-h,d="top"===e.my[1],p=d?-e.elemHeight:"bottom"===e.my[1]?e.elemHeight:0,f="top"===e.at[1]?e.targetHeight:"bottom"===e.at[1]?-e.targetHeight:0,m=-2*e.offset[1];0>c?(s=t.top+p+f+m+e.collisionHeight-o-a,t.top+p+f+m>c&&(0>s||r(c)>s)&&(t.top+=p+f+m)):u>0&&(i=t.top-e.collisionPosition.marginTop+p+f+m-h,t.top+p+f+m>u&&(i>0||u>r(i))&&(t.top+=p+f+m))}},flipfit:{left:function(){t.ui.position.flip.left.apply(this,arguments),t.ui.position.fit.left.apply(this,arguments)},top:function(){t.ui.position.flip.top.apply(this,arguments),t.ui.position.fit.top.apply(this,arguments)}}},function(){var e,i,s,n,a,o=document.getElementsByTagName("body")[0],r=document.createElement("div");e=document.createElement(o?"div":"body"),s={visibility:"hidden",width:0,height:0,border:0,margin:0,background:"none"},o&&t.extend(s,{position:"absolute",left:"-1000px",top:"-1000px"});for(a in s)e.style[a]=s[a];e.appendChild(r),i=o||document.documentElement,i.insertBefore(e,i.firstChild),r.style.cssText="position: absolute; left: 10.7432222px;",n=t(r).offset().left,t.support.offsetFractions=n>10&&11>n,e.innerHTML="",i.removeChild(e)}()})(jQuery);/*! jQuery UI menu - v1.10.2 - 2013-03-14
* http://jqueryui.com
* Copyright 2013 jQuery Foundation and other contributors; Licensed MIT */
(function(t){t.widget("ui.menu",{version:"1.10.2",defaultElement:"<ul>",delay:300,options:{icons:{submenu:"ui-icon-carat-1-e"},menus:"ul",position:{my:"left top",at:"right top"},role:"menu",blur:null,focus:null,select:null},_create:function(){this.activeMenu=this.element,this.mouseHandled=!1,this.element.uniqueId().addClass("ui-menu ui-widget ui-widget-content ui-corner-all").toggleClass("ui-menu-icons",!!this.element.find(".ui-icon").length).attr({role:this.options.role,tabIndex:0}).bind("click"+this.eventNamespace,t.proxy(function(t){this.options.disabled&&t.preventDefault()},this)),this.options.disabled&&this.element.addClass("ui-state-disabled").attr("aria-disabled","true"),this._on({"mousedown .ui-menu-item > a":function(t){t.preventDefault()},"click .ui-state-disabled > a":function(t){t.preventDefault()},"click .ui-menu-item:has(a)":function(e){var i=t(e.target).closest(".ui-menu-item");!this.mouseHandled&&i.not(".ui-state-disabled").length&&(this.mouseHandled=!0,this.select(e),i.has(".ui-menu").length?this.expand(e):this.element.is(":focus")||(this.element.trigger("focus",[!0]),this.active&&1===this.active.parents(".ui-menu").length&&clearTimeout(this.timer)))},"mouseenter .ui-menu-item":function(e){var i=t(e.currentTarget);i.siblings().children(".ui-state-active").removeClass("ui-state-active"),this.focus(e,i)},mouseleave:"collapseAll","mouseleave .ui-menu":"collapseAll",focus:function(t,e){var i=this.active||this.element.children(".ui-menu-item").eq(0);e||this.focus(t,i)},blur:function(e){this._delay(function(){t.contains(this.element[0],this.document[0].activeElement)||this.collapseAll(e)})},keydown:"_keydown"}),this.refresh(),this._on(this.document,{click:function(e){t(e.target).closest(".ui-menu").length||this.collapseAll(e),this.mouseHandled=!1}})},_destroy:function(){this.element.removeAttr("aria-activedescendant").find(".ui-menu").addBack().removeClass("ui-menu ui-widget ui-widget-content ui-corner-all ui-menu-icons").removeAttr("role").removeAttr("tabIndex").removeAttr("aria-labelledby").removeAttr("aria-expanded").removeAttr("aria-hidden").removeAttr("aria-disabled").removeUniqueId().show(),this.element.find(".ui-menu-item").removeClass("ui-menu-item").removeAttr("role").removeAttr("aria-disabled").children("a").removeUniqueId().removeClass("ui-corner-all ui-state-hover").removeAttr("tabIndex").removeAttr("role").removeAttr("aria-haspopup").children().each(function(){var e=t(this);e.data("ui-menu-submenu-carat")&&e.remove()}),this.element.find(".ui-menu-divider").removeClass("ui-menu-divider ui-widget-content")},_keydown:function(e){function i(t){return t.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}var s,n,a,o,r,h=!0;switch(e.keyCode){case t.ui.keyCode.PAGE_UP:this.previousPage(e);break;case t.ui.keyCode.PAGE_DOWN:this.nextPage(e);break;case t.ui.keyCode.HOME:this._move("first","first",e);break;case t.ui.keyCode.END:this._move("last","last",e);break;case t.ui.keyCode.UP:this.previous(e);break;case t.ui.keyCode.DOWN:this.next(e);break;case t.ui.keyCode.LEFT:this.collapse(e);break;case t.ui.keyCode.RIGHT:this.active&&!this.active.is(".ui-state-disabled")&&this.expand(e);break;case t.ui.keyCode.ENTER:case t.ui.keyCode.SPACE:this._activate(e);break;case t.ui.keyCode.ESCAPE:this.collapse(e);break;default:h=!1,n=this.previousFilter||"",a=String.fromCharCode(e.keyCode),o=!1,clearTimeout(this.filterTimer),a===n?o=!0:a=n+a,r=RegExp("^"+i(a),"i"),s=this.activeMenu.children(".ui-menu-item").filter(function(){return r.test(t(this).children("a").text())}),s=o&&-1!==s.index(this.active.next())?this.active.nextAll(".ui-menu-item"):s,s.length||(a=String.fromCharCode(e.keyCode),r=RegExp("^"+i(a),"i"),s=this.activeMenu.children(".ui-menu-item").filter(function(){return r.test(t(this).children("a").text())})),s.length?(this.focus(e,s),s.length>1?(this.previousFilter=a,this.filterTimer=this._delay(function(){delete this.previousFilter},1e3)):delete this.previousFilter):delete this.previousFilter}h&&e.preventDefault()},_activate:function(t){this.active.is(".ui-state-disabled")||(this.active.children("a[aria-haspopup='true']").length?this.expand(t):this.select(t))},refresh:function(){var e,i=this.options.icons.submenu,s=this.element.find(this.options.menus);s.filter(":not(.ui-menu)").addClass("ui-menu ui-widget ui-widget-content ui-corner-all").hide().attr({role:this.options.role,"aria-hidden":"true","aria-expanded":"false"}).each(function(){var e=t(this),s=e.prev("a"),n=t("<span>").addClass("ui-menu-icon ui-icon "+i).data("ui-menu-submenu-carat",!0);s.attr("aria-haspopup","true").prepend(n),e.attr("aria-labelledby",s.attr("id"))}),e=s.add(this.element),e.children(":not(.ui-menu-item):has(a)").addClass("ui-menu-item").attr("role","presentation").children("a").uniqueId().addClass("ui-corner-all").attr({tabIndex:-1,role:this._itemRole()}),e.children(":not(.ui-menu-item)").each(function(){var e=t(this);/[^\-\u2014\u2013\s]/.test(e.text())||e.addClass("ui-widget-content ui-menu-divider")}),e.children(".ui-state-disabled").attr("aria-disabled","true"),this.active&&!t.contains(this.element[0],this.active[0])&&this.blur()},_itemRole:function(){return{menu:"menuitem",listbox:"option"}[this.options.role]},_setOption:function(t,e){"icons"===t&&this.element.find(".ui-menu-icon").removeClass(this.options.icons.submenu).addClass(e.submenu),this._super(t,e)},focus:function(t,e){var i,s;this.blur(t,t&&"focus"===t.type),this._scrollIntoView(e),this.active=e.first(),s=this.active.children("a").addClass("ui-state-focus"),this.options.role&&this.element.attr("aria-activedescendant",s.attr("id")),this.active.parent().closest(".ui-menu-item").children("a:first").addClass("ui-state-active"),t&&"keydown"===t.type?this._close():this.timer=this._delay(function(){this._close()},this.delay),i=e.children(".ui-menu"),i.length&&/^mouse/.test(t.type)&&this._startOpening(i),this.activeMenu=e.parent(),this._trigger("focus",t,{item:e})},_scrollIntoView:function(e){var i,s,n,a,o,r;this._hasScroll()&&(i=parseFloat(t.css(this.activeMenu[0],"borderTopWidth"))||0,s=parseFloat(t.css(this.activeMenu[0],"paddingTop"))||0,n=e.offset().top-this.activeMenu.offset().top-i-s,a=this.activeMenu.scrollTop(),o=this.activeMenu.height(),r=e.height(),0>n?this.activeMenu.scrollTop(a+n):n+r>o&&this.activeMenu.scrollTop(a+n-o+r))},blur:function(t,e){e||clearTimeout(this.timer),this.active&&(this.active.children("a").removeClass("ui-state-focus"),this.active=null,this._trigger("blur",t,{item:this.active}))},_startOpening:function(t){clearTimeout(this.timer),"true"===t.attr("aria-hidden")&&(this.timer=this._delay(function(){this._close(),this._open(t)},this.delay))},_open:function(e){var i=t.extend({of:this.active},this.options.position);clearTimeout(this.timer),this.element.find(".ui-menu").not(e.parents(".ui-menu")).hide().attr("aria-hidden","true"),e.show().removeAttr("aria-hidden").attr("aria-expanded","true").position(i)},collapseAll:function(e,i){clearTimeout(this.timer),this.timer=this._delay(function(){var s=i?this.element:t(e&&e.target).closest(this.element.find(".ui-menu"));s.length||(s=this.element),this._close(s),this.blur(e),this.activeMenu=s},this.delay)},_close:function(t){t||(t=this.active?this.active.parent():this.element),t.find(".ui-menu").hide().attr("aria-hidden","true").attr("aria-expanded","false").end().find("a.ui-state-active").removeClass("ui-state-active")},collapse:function(t){var e=this.active&&this.active.parent().closest(".ui-menu-item",this.element);e&&e.length&&(this._close(),this.focus(t,e))},expand:function(t){var e=this.active&&this.active.children(".ui-menu ").children(".ui-menu-item").first();e&&e.length&&(this._open(e.parent()),this._delay(function(){this.focus(t,e)}))},next:function(t){this._move("next","first",t)},previous:function(t){this._move("prev","last",t)},isFirstItem:function(){return this.active&&!this.active.prevAll(".ui-menu-item").length},isLastItem:function(){return this.active&&!this.active.nextAll(".ui-menu-item").length},_move:function(t,e,i){var s;this.active&&(s="first"===t||"last"===t?this.active["first"===t?"prevAll":"nextAll"](".ui-menu-item").eq(-1):this.active[t+"All"](".ui-menu-item").eq(0)),s&&s.length&&this.active||(s=this.activeMenu.children(".ui-menu-item")[e]()),this.focus(i,s)},nextPage:function(e){var i,s,n;return this.active?(this.isLastItem()||(this._hasScroll()?(s=this.active.offset().top,n=this.element.height(),this.active.nextAll(".ui-menu-item").each(function(){return i=t(this),0>i.offset().top-s-n}),this.focus(e,i)):this.focus(e,this.activeMenu.children(".ui-menu-item")[this.active?"last":"first"]())),undefined):(this.next(e),undefined)},previousPage:function(e){var i,s,n;return this.active?(this.isFirstItem()||(this._hasScroll()?(s=this.active.offset().top,n=this.element.height(),this.active.prevAll(".ui-menu-item").each(function(){return i=t(this),i.offset().top-s+n>0}),this.focus(e,i)):this.focus(e,this.activeMenu.children(".ui-menu-item").first())),undefined):(this.next(e),undefined)},_hasScroll:function(){return this.element.outerHeight()<this.element.prop("scrollHeight")},select:function(e){this.active=this.active||t(e.target).closest(".ui-menu-item");var i={item:this.active};this.active.has(".ui-menu").length||this.collapseAll(e,!0),this._trigger("select",e,i)}})})(jQuery);/*! jQuery UI - v1.10.2 - 2013-03-14
* http://jqueryui.com
* Copyright 2013 jQuery Foundation and other contributors; Licensed MIT */
(function(e){var t=0;e.widget("ui.autocomplete",{version:"1.10.2",defaultElement:"<input>",options:{appendTo:null,autoFocus:!1,delay:300,minLength:1,position:{my:"left top",at:"left bottom",collision:"none"},source:null,change:null,close:null,focus:null,open:null,response:null,search:null,select:null},pending:0,_create:function(){var t,i,s,n=this.element[0].nodeName.toLowerCase(),a="textarea"===n,o="input"===n;this.isMultiLine=a?!0:o?!1:this.element.prop("isContentEditable"),this.valueMethod=this.element[a||o?"val":"text"],this.isNewMenu=!0,this.element.addClass("ui-autocomplete-input").attr("autocomplete","off"),this._on(this.element,{keydown:function(n){if(this.element.prop("readOnly"))return t=!0,s=!0,i=!0,undefined;t=!1,s=!1,i=!1;var a=e.ui.keyCode;switch(n.keyCode){case a.PAGE_UP:t=!0,this._move("previousPage",n);break;case a.PAGE_DOWN:t=!0,this._move("nextPage",n);break;case a.UP:t=!0,this._keyEvent("previous",n);break;case a.DOWN:t=!0,this._keyEvent("next",n);break;case a.ENTER:case a.NUMPAD_ENTER:this.menu.active&&(t=!0,n.preventDefault(),this.menu.select(n));break;case a.TAB:this.menu.active&&this.menu.select(n);break;case a.ESCAPE:this.menu.element.is(":visible")&&(this._value(this.term),this.close(n),n.preventDefault());break;default:i=!0,this._searchTimeout(n)}},keypress:function(s){if(t)return t=!1,s.preventDefault(),undefined;if(!i){var n=e.ui.keyCode;switch(s.keyCode){case n.PAGE_UP:this._move("previousPage",s);break;case n.PAGE_DOWN:this._move("nextPage",s);break;case n.UP:this._keyEvent("previous",s);break;case n.DOWN:this._keyEvent("next",s)}}},input:function(e){return s?(s=!1,e.preventDefault(),undefined):(this._searchTimeout(e),undefined)},focus:function(){this.selectedItem=null,this.previous=this._value()},blur:function(e){return this.cancelBlur?(delete this.cancelBlur,undefined):(clearTimeout(this.searching),this.close(e),this._change(e),undefined)}}),this._initSource(),this.menu=e("<ul>").addClass("ui-autocomplete ui-front").appendTo(this._appendTo()).menu({input:e(),role:null}).hide().data("ui-menu"),this._on(this.menu.element,{mousedown:function(t){t.preventDefault(),this.cancelBlur=!0,this._delay(function(){delete this.cancelBlur});var i=this.menu.element[0];e(t.target).closest(".ui-menu-item").length||this._delay(function(){var t=this;this.document.one("mousedown",function(s){s.target===t.element[0]||s.target===i||e.contains(i,s.target)||t.close()})})},menufocus:function(t,i){if(this.isNewMenu&&(this.isNewMenu=!1,t.originalEvent&&/^mouse/.test(t.originalEvent.type)))return this.menu.blur(),this.document.one("mousemove",function(){e(t.target).trigger(t.originalEvent)}),undefined;var s=i.item.data("ui-autocomplete-item");!1!==this._trigger("focus",t,{item:s})?t.originalEvent&&/^key/.test(t.originalEvent.type)&&this._value(s.value):this.liveRegion.text(s.value)},menuselect:function(e,t){var i=t.item.data("ui-autocomplete-item"),s=this.previous;this.element[0]!==this.document[0].activeElement&&(this.element.focus(),this.previous=s,this._delay(function(){this.previous=s,this.selectedItem=i})),!1!==this._trigger("select",e,{item:i})&&this._value(i.value),this.term=this._value(),this.close(e),this.selectedItem=i}}),this.liveRegion=e("<span>",{role:"status","aria-live":"polite"}).addClass("ui-helper-hidden-accessible").insertAfter(this.element),this._on(this.window,{beforeunload:function(){this.element.removeAttr("autocomplete")}})},_destroy:function(){clearTimeout(this.searching),this.element.removeClass("ui-autocomplete-input").removeAttr("autocomplete"),this.menu.element.remove(),this.liveRegion.remove()},_setOption:function(e,t){this._super(e,t),"source"===e&&this._initSource(),"appendTo"===e&&this.menu.element.appendTo(this._appendTo()),"disabled"===e&&t&&this.xhr&&this.xhr.abort()},_appendTo:function(){var t=this.options.appendTo;return t&&(t=t.jquery||t.nodeType?e(t):this.document.find(t).eq(0)),t||(t=this.element.closest(".ui-front")),t.length||(t=this.document[0].body),t},_initSource:function(){var t,i,s=this;e.isArray(this.options.source)?(t=this.options.source,this.source=function(i,s){s(e.ui.autocomplete.filter(t,i.term))}):"string"==typeof this.options.source?(i=this.options.source,this.source=function(t,n){s.xhr&&s.xhr.abort(),s.xhr=e.ajax({url:i,data:t,dataType:"json",success:function(e){n(e)},error:function(){n([])}})}):this.source=this.options.source},_searchTimeout:function(e){clearTimeout(this.searching),this.searching=this._delay(function(){this.term!==this._value()&&(this.selectedItem=null,this.search(null,e))},this.options.delay)},search:function(e,t){return e=null!=e?e:this._value(),this.term=this._value(),e.length<this.options.minLength?this.close(t):this._trigger("search",t)!==!1?this._search(e):undefined},_search:function(e){this.pending++,this.element.addClass("ui-autocomplete-loading"),this.cancelSearch=!1,this.source({term:e},this._response())},_response:function(){var e=this,i=++t;return function(s){i===t&&e.__response(s),e.pending--,e.pending||e.element.removeClass("ui-autocomplete-loading")}},__response:function(e){e&&(e=this._normalize(e)),this._trigger("response",null,{content:e}),!this.options.disabled&&e&&e.length&&!this.cancelSearch?(this._suggest(e),this._trigger("open")):this._close()},close:function(e){this.cancelSearch=!0,this._close(e)},_close:function(e){this.menu.element.is(":visible")&&(this.menu.element.hide(),this.menu.blur(),this.isNewMenu=!0,this._trigger("close",e))},_change:function(e){this.previous!==this._value()&&this._trigger("change",e,{item:this.selectedItem})},_normalize:function(t){return t.length&&t[0].label&&t[0].value?t:e.map(t,function(t){return"string"==typeof t?{label:t,value:t}:e.extend({label:t.label||t.value,value:t.value||t.label},t)})},_suggest:function(t){var i=this.menu.element.empty();this._renderMenu(i,t),this.isNewMenu=!0,this.menu.refresh(),i.show(),this._resizeMenu(),i.position(e.extend({of:this.element},this.options.position)),this.options.autoFocus&&this.menu.next()},_resizeMenu:function(){var e=this.menu.element;e.outerWidth(Math.max(e.width("").outerWidth()+1,this.element.outerWidth()))},_renderMenu:function(t,i){var s=this;e.each(i,function(e,i){s._renderItemData(t,i)})},_renderItemData:function(e,t){return this._renderItem(e,t).data("ui-autocomplete-item",t)},_renderItem:function(t,i){return e("<li>").append(e("<a>").text(i.label)).appendTo(t)},_move:function(e,t){return this.menu.element.is(":visible")?this.menu.isFirstItem()&&/^previous/.test(e)||this.menu.isLastItem()&&/^next/.test(e)?(this._value(this.term),this.menu.blur(),undefined):(this.menu[e](t),undefined):(this.search(null,t),undefined)},widget:function(){return this.menu.element},_value:function(){return this.valueMethod.apply(this.element,arguments)},_keyEvent:function(e,t){(!this.isMultiLine||this.menu.element.is(":visible"))&&(this._move(e,t),t.preventDefault())}}),e.extend(e.ui.autocomplete,{escapeRegex:function(e){return e.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")},filter:function(t,i){var s=RegExp(e.ui.autocomplete.escapeRegex(i),"i");return e.grep(t,function(e){return s.test(e.label||e.value||e)})}}),e.widget("ui.autocomplete",e.ui.autocomplete,{options:{messages:{noResults:"No search results.",results:function(e){return e+(e>1?" results are":" result is")+" available, use up and down arrow keys to navigate."}}},__response:function(e){var t;this._superApply(arguments),this.options.disabled||this.cancelSearch||(t=e&&e.length?this.options.messages.results(e.length):this.options.messages.noResults,this.liveRegion.text(t))}})})(jQuery);/*! jQuery UI dialog - v1.10.2 - 2013-03-14
* http://jqueryui.com
* Copyright 2013 jQuery Foundation and other contributors; Licensed MIT */
(function(t){var e={buttons:!0,height:!0,maxHeight:!0,maxWidth:!0,minHeight:!0,minWidth:!0,width:!0},i={maxHeight:!0,maxWidth:!0,minHeight:!0,minWidth:!0};t.widget("ui.dialog",{version:"1.10.2",options:{appendTo:"body",autoOpen:!0,buttons:[],closeOnEscape:!0,closeText:"close",dialogClass:"",draggable:!0,hide:null,height:"auto",maxHeight:null,maxWidth:null,minHeight:150,minWidth:150,modal:!1,position:{my:"center",at:"center",of:window,collision:"fit",using:function(e){var i=t(this).css(e).offset().top;0>i&&t(this).css("top",e.top-i)}},resizable:!0,show:null,title:null,width:300,beforeClose:null,close:null,drag:null,dragStart:null,dragStop:null,focus:null,open:null,resize:null,resizeStart:null,resizeStop:null},_create:function(){this.originalCss={display:this.element[0].style.display,width:this.element[0].style.width,minHeight:this.element[0].style.minHeight,maxHeight:this.element[0].style.maxHeight,height:this.element[0].style.height},this.originalPosition={parent:this.element.parent(),index:this.element.parent().children().index(this.element)},this.originalTitle=this.element.attr("title"),this.options.title=this.options.title||this.originalTitle,this._createWrapper(),this.element.show().removeAttr("title").addClass("ui-dialog-content ui-widget-content").appendTo(this.uiDialog),this._createTitlebar(),this._createButtonPane(),this.options.draggable&&t.fn.draggable&&this._makeDraggable(),this.options.resizable&&t.fn.resizable&&this._makeResizable(),this._isOpen=!1},_init:function(){this.options.autoOpen&&this.open()},_appendTo:function(){var e=this.options.appendTo;return e&&(e.jquery||e.nodeType)?t(e):this.document.find(e||"body").eq(0)},_destroy:function(){var t,e=this.originalPosition;this._destroyOverlay(),this.element.removeUniqueId().removeClass("ui-dialog-content ui-widget-content").css(this.originalCss).detach(),this.uiDialog.stop(!0,!0).remove(),this.originalTitle&&this.element.attr("title",this.originalTitle),t=e.parent.children().eq(e.index),t.length&&t[0]!==this.element[0]?t.before(this.element):e.parent.append(this.element)},widget:function(){return this.uiDialog},disable:t.noop,enable:t.noop,close:function(e){var i=this;this._isOpen&&this._trigger("beforeClose",e)!==!1&&(this._isOpen=!1,this._destroyOverlay(),this.opener.filter(":focusable").focus().length||t(this.document[0].activeElement).blur(),this._hide(this.uiDialog,this.options.hide,function(){i._trigger("close",e)}))},isOpen:function(){return this._isOpen},moveToTop:function(){this._moveToTop()},_moveToTop:function(t,e){var i=!!this.uiDialog.nextAll(":visible").insertBefore(this.uiDialog).length;return i&&!e&&this._trigger("focus",t),i},open:function(){var e=this;return this._isOpen?(this._moveToTop()&&this._focusTabbable(),undefined):(this._isOpen=!0,this.opener=t(this.document[0].activeElement),this._size(),this._position(),this._createOverlay(),this._moveToTop(null,!0),this._show(this.uiDialog,this.options.show,function(){e._focusTabbable(),e._trigger("focus")}),this._trigger("open"),undefined)},_focusTabbable:function(){var t=this.element.find("[autofocus]");t.length||(t=this.element.find(":tabbable")),t.length||(t=this.uiDialogButtonPane.find(":tabbable")),t.length||(t=this.uiDialogTitlebarClose.filter(":tabbable")),t.length||(t=this.uiDialog),t.eq(0).focus()},_keepFocus:function(e){function i(){var e=this.document[0].activeElement,i=this.uiDialog[0]===e||t.contains(this.uiDialog[0],e);i||this._focusTabbable()}e.preventDefault(),i.call(this),this._delay(i)},_createWrapper:function(){this.uiDialog=t("<div>").addClass("ui-dialog ui-widget ui-widget-content ui-corner-all ui-front "+this.options.dialogClass).hide().attr({tabIndex:-1,role:"dialog"}).appendTo(this._appendTo()),this._on(this.uiDialog,{keydown:function(e){if(this.options.closeOnEscape&&!e.isDefaultPrevented()&&e.keyCode&&e.keyCode===t.ui.keyCode.ESCAPE)return e.preventDefault(),this.close(e),undefined;if(e.keyCode===t.ui.keyCode.TAB){var i=this.uiDialog.find(":tabbable"),s=i.filter(":first"),n=i.filter(":last");e.target!==n[0]&&e.target!==this.uiDialog[0]||e.shiftKey?e.target!==s[0]&&e.target!==this.uiDialog[0]||!e.shiftKey||(n.focus(1),e.preventDefault()):(s.focus(1),e.preventDefault())}},mousedown:function(t){this._moveToTop(t)&&this._focusTabbable()}}),this.element.find("[aria-describedby]").length||this.uiDialog.attr({"aria-describedby":this.element.uniqueId().attr("id")})},_createTitlebar:function(){var e;this.uiDialogTitlebar=t("<div>").addClass("ui-dialog-titlebar ui-widget-header ui-corner-all ui-helper-clearfix").prependTo(this.uiDialog),this._on(this.uiDialogTitlebar,{mousedown:function(e){t(e.target).closest(".ui-dialog-titlebar-close")||this.uiDialog.focus()}}),this.uiDialogTitlebarClose=t("<button></button>").button({label:this.options.closeText,icons:{primary:"ui-icon-closethick"},text:!1}).addClass("ui-dialog-titlebar-close").appendTo(this.uiDialogTitlebar),this._on(this.uiDialogTitlebarClose,{click:function(t){t.preventDefault(),this.close(t)}}),e=t("<span>").uniqueId().addClass("ui-dialog-title").prependTo(this.uiDialogTitlebar),this._title(e),this.uiDialog.attr({"aria-labelledby":e.attr("id")})},_title:function(t){this.options.title||t.html("&#160;"),t.text(this.options.title)},_createButtonPane:function(){this.uiDialogButtonPane=t("<div>").addClass("ui-dialog-buttonpane ui-widget-content ui-helper-clearfix"),this.uiButtonSet=t("<div>").addClass("ui-dialog-buttonset").appendTo(this.uiDialogButtonPane),this._createButtons()},_createButtons:function(){var e=this,i=this.options.buttons;return this.uiDialogButtonPane.remove(),this.uiButtonSet.empty(),t.isEmptyObject(i)||t.isArray(i)&&!i.length?(this.uiDialog.removeClass("ui-dialog-buttons"),undefined):(t.each(i,function(i,s){var n,a;s=t.isFunction(s)?{click:s,text:i}:s,s=t.extend({type:"button"},s),n=s.click,s.click=function(){n.apply(e.element[0],arguments)},a={icons:s.icons,text:s.showText},delete s.icons,delete s.showText,t("<button></button>",s).button(a).appendTo(e.uiButtonSet)}),this.uiDialog.addClass("ui-dialog-buttons"),this.uiDialogButtonPane.appendTo(this.uiDialog),undefined)},_makeDraggable:function(){function e(t){return{position:t.position,offset:t.offset}}var i=this,s=this.options;this.uiDialog.draggable({cancel:".ui-dialog-content, .ui-dialog-titlebar-close",handle:".ui-dialog-titlebar",containment:"document",start:function(s,n){t(this).addClass("ui-dialog-dragging"),i._blockFrames(),i._trigger("dragStart",s,e(n))},drag:function(t,s){i._trigger("drag",t,e(s))},stop:function(n,a){s.position=[a.position.left-i.document.scrollLeft(),a.position.top-i.document.scrollTop()],t(this).removeClass("ui-dialog-dragging"),i._unblockFrames(),i._trigger("dragStop",n,e(a))}})},_makeResizable:function(){function e(t){return{originalPosition:t.originalPosition,originalSize:t.originalSize,position:t.position,size:t.size}}var i=this,s=this.options,n=s.resizable,a=this.uiDialog.css("position"),o="string"==typeof n?n:"n,e,s,w,se,sw,ne,nw";this.uiDialog.resizable({cancel:".ui-dialog-content",containment:"document",alsoResize:this.element,maxWidth:s.maxWidth,maxHeight:s.maxHeight,minWidth:s.minWidth,minHeight:this._minHeight(),handles:o,start:function(s,n){t(this).addClass("ui-dialog-resizing"),i._blockFrames(),i._trigger("resizeStart",s,e(n))},resize:function(t,s){i._trigger("resize",t,e(s))},stop:function(n,a){s.height=t(this).height(),s.width=t(this).width(),t(this).removeClass("ui-dialog-resizing"),i._unblockFrames(),i._trigger("resizeStop",n,e(a))}}).css("position",a)},_minHeight:function(){var t=this.options;return"auto"===t.height?t.minHeight:Math.min(t.minHeight,t.height)},_position:function(){var t=this.uiDialog.is(":visible");t||this.uiDialog.show(),this.uiDialog.position(this.options.position),t||this.uiDialog.hide()},_setOptions:function(s){var n=this,a=!1,o={};t.each(s,function(t,s){n._setOption(t,s),t in e&&(a=!0),t in i&&(o[t]=s)}),a&&(this._size(),this._position()),this.uiDialog.is(":data(ui-resizable)")&&this.uiDialog.resizable("option",o)},_setOption:function(t,e){var i,s,n=this.uiDialog;"dialogClass"===t&&n.removeClass(this.options.dialogClass).addClass(e),"disabled"!==t&&(this._super(t,e),"appendTo"===t&&this.uiDialog.appendTo(this._appendTo()),"buttons"===t&&this._createButtons(),"closeText"===t&&this.uiDialogTitlebarClose.button({label:""+e}),"draggable"===t&&(i=n.is(":data(ui-draggable)"),i&&!e&&n.draggable("destroy"),!i&&e&&this._makeDraggable()),"position"===t&&this._position(),"resizable"===t&&(s=n.is(":data(ui-resizable)"),s&&!e&&n.resizable("destroy"),s&&"string"==typeof e&&n.resizable("option","handles",e),s||e===!1||this._makeResizable()),"title"===t&&this._title(this.uiDialogTitlebar.find(".ui-dialog-title")))},_size:function(){var t,e,i,s=this.options;this.element.show().css({width:"auto",minHeight:0,maxHeight:"none",height:0}),s.minWidth>s.width&&(s.width=s.minWidth),t=this.uiDialog.css({height:"auto",width:s.width}).outerHeight(),e=Math.max(0,s.minHeight-t),i="number"==typeof s.maxHeight?Math.max(0,s.maxHeight-t):"none","auto"===s.height?this.element.css({minHeight:e,maxHeight:i,height:"auto"}):this.element.height(Math.max(0,s.height-t)),this.uiDialog.is(":data(ui-resizable)")&&this.uiDialog.resizable("option","minHeight",this._minHeight())},_blockFrames:function(){this.iframeBlocks=this.document.find("iframe").map(function(){var e=t(this);return t("<div>").css({position:"absolute",width:e.outerWidth(),height:e.outerHeight()}).appendTo(e.parent()).offset(e.offset())[0]})},_unblockFrames:function(){this.iframeBlocks&&(this.iframeBlocks.remove(),delete this.iframeBlocks)},_allowInteraction:function(e){return t(e.target).closest(".ui-dialog").length?!0:!!t(e.target).closest(".ui-datepicker").length},_createOverlay:function(){if(this.options.modal){var e=this,i=this.widgetFullName;t.ui.dialog.overlayInstances||this._delay(function(){t.ui.dialog.overlayInstances&&this.document.bind("focusin.dialog",function(s){e._allowInteraction(s)||(s.preventDefault(),t(".ui-dialog:visible:last .ui-dialog-content").data(i)._focusTabbable())})}),this.overlay=t("<div>").addClass("ui-widget-overlay ui-front").appendTo(this._appendTo()),this._on(this.overlay,{mousedown:"_keepFocus"}),t.ui.dialog.overlayInstances++}},_destroyOverlay:function(){this.options.modal&&this.overlay&&(t.ui.dialog.overlayInstances--,t.ui.dialog.overlayInstances||this.document.unbind("focusin.dialog"),this.overlay.remove(),this.overlay=null)}}),t.ui.dialog.overlayInstances=0,t.uiBackCompat!==!1&&t.widget("ui.dialog",t.ui.dialog,{_position:function(){var e,i=this.options.position,s=[],n=[0,0];i?(("string"==typeof i||"object"==typeof i&&"0"in i)&&(s=i.split?i.split(" "):[i[0],i[1]],1===s.length&&(s[1]=s[0]),t.each(["left","top"],function(t,e){+s[t]===s[t]&&(n[t]=s[t],s[t]=e)}),i={my:s[0]+(0>n[0]?n[0]:"+"+n[0])+" "+s[1]+(0>n[1]?n[1]:"+"+n[1]),at:s.join(" ")}),i=t.extend({},t.ui.dialog.prototype.options.position,i)):i=t.ui.dialog.prototype.options.position,e=this.uiDialog.is(":visible"),e||this.uiDialog.show(),this.uiDialog.position(i),e||this.uiDialog.hide()}})})(jQuery);/*! jQuery UI - button v1.10.2 - 2013-03-14
* http://jqueryui.com
* Copyright 2013 jQuery Foundation and other contributors; Licensed MIT */
(function(t){var e,i,s,n,a="ui-button ui-widget ui-state-default ui-corner-all",o="ui-state-hover ui-state-active ",r="ui-button-icons-only ui-button-icon-only ui-button-text-icons ui-button-text-icon-primary ui-button-text-icon-secondary ui-button-text-only",h=function(){var e=t(this).find(":ui-button");setTimeout(function(){e.button("refresh")},1)},l=function(e){var i=e.name,s=e.form,n=t([]);return i&&(i=i.replace(/'/g,"\\'"),n=s?t(s).find("[name='"+i+"']"):t("[name='"+i+"']",e.ownerDocument).filter(function(){return!this.form})),n};t.widget("ui.button",{version:"1.10.2",defaultElement:"<button>",options:{disabled:null,text:!0,label:null,icons:{primary:null,secondary:null}},_create:function(){this.element.closest("form").unbind("reset"+this.eventNamespace).bind("reset"+this.eventNamespace,h),"boolean"!=typeof this.options.disabled?this.options.disabled=!!this.element.prop("disabled"):this.element.prop("disabled",this.options.disabled),this._determineButtonType(),this.hasTitle=!!this.buttonElement.attr("title");var o=this,r=this.options,c="checkbox"===this.type||"radio"===this.type,u=c?"":"ui-state-active",d="ui-state-focus";null===r.label&&(r.label="input"===this.type?this.buttonElement.val():this.buttonElement.html()),this._hoverable(this.buttonElement),this.buttonElement.addClass(a).attr("role","button").bind("mouseenter"+this.eventNamespace,function(){r.disabled||this===e&&t(this).addClass("ui-state-active")}).bind("mouseleave"+this.eventNamespace,function(){r.disabled||t(this).removeClass(u)}).bind("click"+this.eventNamespace,function(t){r.disabled&&(t.preventDefault(),t.stopImmediatePropagation())}),this.element.bind("focus"+this.eventNamespace,function(){o.buttonElement.addClass(d)}).bind("blur"+this.eventNamespace,function(){o.buttonElement.removeClass(d)}),c&&(this.element.bind("change"+this.eventNamespace,function(){n||o.refresh()}),this.buttonElement.bind("mousedown"+this.eventNamespace,function(t){r.disabled||(n=!1,i=t.pageX,s=t.pageY)}).bind("mouseup"+this.eventNamespace,function(t){r.disabled||(i!==t.pageX||s!==t.pageY)&&(n=!0)})),"checkbox"===this.type?this.buttonElement.bind("click"+this.eventNamespace,function(){return r.disabled||n?!1:undefined}):"radio"===this.type?this.buttonElement.bind("click"+this.eventNamespace,function(){if(r.disabled||n)return!1;t(this).addClass("ui-state-active"),o.buttonElement.attr("aria-pressed","true");var e=o.element[0];l(e).not(e).map(function(){return t(this).button("widget")[0]}).removeClass("ui-state-active").attr("aria-pressed","false")}):(this.buttonElement.bind("mousedown"+this.eventNamespace,function(){return r.disabled?!1:(t(this).addClass("ui-state-active"),e=this,o.document.one("mouseup",function(){e=null}),undefined)}).bind("mouseup"+this.eventNamespace,function(){return r.disabled?!1:(t(this).removeClass("ui-state-active"),undefined)}).bind("keydown"+this.eventNamespace,function(e){return r.disabled?!1:((e.keyCode===t.ui.keyCode.SPACE||e.keyCode===t.ui.keyCode.ENTER)&&t(this).addClass("ui-state-active"),undefined)}).bind("keyup"+this.eventNamespace+" blur"+this.eventNamespace,function(){t(this).removeClass("ui-state-active")}),this.buttonElement.is("a")&&this.buttonElement.keyup(function(e){e.keyCode===t.ui.keyCode.SPACE&&t(this).click()})),this._setOption("disabled",r.disabled),this._resetButton()},_determineButtonType:function(){var t,e,i;this.type=this.element.is("[type=checkbox]")?"checkbox":this.element.is("[type=radio]")?"radio":this.element.is("input")?"input":"button","checkbox"===this.type||"radio"===this.type?(t=this.element.parents().last(),e="label[for='"+this.element.attr("id")+"']",this.buttonElement=t.find(e),this.buttonElement.length||(t=t.length?t.siblings():this.element.siblings(),this.buttonElement=t.filter(e),this.buttonElement.length||(this.buttonElement=t.find(e))),this.element.addClass("ui-helper-hidden-accessible"),i=this.element.is(":checked"),i&&this.buttonElement.addClass("ui-state-active"),this.buttonElement.prop("aria-pressed",i)):this.buttonElement=this.element},widget:function(){return this.buttonElement},_destroy:function(){this.element.removeClass("ui-helper-hidden-accessible"),this.buttonElement.removeClass(a+" "+o+" "+r).removeAttr("role").removeAttr("aria-pressed").html(this.buttonElement.find(".ui-button-text").html()),this.hasTitle||this.buttonElement.removeAttr("title")},_setOption:function(t,e){return this._super(t,e),"disabled"===t?(e?this.element.prop("disabled",!0):this.element.prop("disabled",!1),undefined):(this._resetButton(),undefined)},refresh:function(){var e=this.element.is("input, button")?this.element.is(":disabled"):this.element.hasClass("ui-button-disabled");e!==this.options.disabled&&this._setOption("disabled",e),"radio"===this.type?l(this.element[0]).each(function(){t(this).is(":checked")?t(this).button("widget").addClass("ui-state-active").attr("aria-pressed","true"):t(this).button("widget").removeClass("ui-state-active").attr("aria-pressed","false")}):"checkbox"===this.type&&(this.element.is(":checked")?this.buttonElement.addClass("ui-state-active").attr("aria-pressed","true"):this.buttonElement.removeClass("ui-state-active").attr("aria-pressed","false"))},_resetButton:function(){if("input"===this.type)return this.options.label&&this.element.val(this.options.label),undefined;var e=this.buttonElement.removeClass(r),i=t("<span></span>",this.document[0]).addClass("ui-button-text").html(this.options.label).appendTo(e.empty()).text(),s=this.options.icons,n=s.primary&&s.secondary,a=[];s.primary||s.secondary?(this.options.text&&a.push("ui-button-text-icon"+(n?"s":s.primary?"-primary":"-secondary")),s.primary&&e.prepend("<span class='ui-button-icon-primary ui-icon "+s.primary+"'></span>"),s.secondary&&e.append("<span class='ui-button-icon-secondary ui-icon "+s.secondary+"'></span>"),this.options.text||(a.push(n?"ui-button-icons-only":"ui-button-icon-only"),this.hasTitle||e.attr("title",t.trim(i)))):a.push("ui-button-text-only"),e.addClass(a.join(" "))}}),t.widget("ui.buttonset",{version:"1.10.2",options:{items:"button, input[type=button], input[type=submit], input[type=reset], input[type=checkbox], input[type=radio], a, :data(ui-button)"},_create:function(){this.element.addClass("ui-buttonset")},_init:function(){this.refresh()},_setOption:function(t,e){"disabled"===t&&this.buttons.button("option",t,e),this._super(t,e)},refresh:function(){var e="rtl"===this.element.css("direction");this.buttons=this.element.find(this.options.items).filter(":ui-button").button("refresh").end().not(":ui-button").button().end().map(function(){return t(this).button("widget")[0]}).removeClass("ui-corner-all ui-corner-left ui-corner-right").filter(":first").addClass(e?"ui-corner-right":"ui-corner-left").end().filter(":last").addClass(e?"ui-corner-left":"ui-corner-right").end().end()},_destroy:function(){this.element.removeClass("ui-buttonset"),this.buttons.map(function(){return t(this).button("widget")[0]}).removeClass("ui-corner-left ui-corner-right").end().button("destroy")}})})(jQuery);/*! jQuery UI - v1.10.2 - 2013-03-14
* http://jqueryui.com
* Copyright 2013 jQuery Foundation and other contributors; Licensed MIT */
(function(t,e){function i(){this._curInst=null,this._keyEvent=!1,this._disabledInputs=[],this._datepickerShowing=!1,this._inDialog=!1,this._mainDivId="ui-datepicker-div",this._inlineClass="ui-datepicker-inline",this._appendClass="ui-datepicker-append",this._triggerClass="ui-datepicker-trigger",this._dialogClass="ui-datepicker-dialog",this._disableClass="ui-datepicker-disabled",this._unselectableClass="ui-datepicker-unselectable",this._currentClass="ui-datepicker-current-day",this._dayOverClass="ui-datepicker-days-cell-over",this.regional=[],this.regional[""]={closeText:"Done",prevText:"Prev",nextText:"Next",currentText:"Today",monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],weekHeader:"Wk",dateFormat:"mm/dd/yy",firstDay:0,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""},this._defaults={showOn:"focus",showAnim:"fadeIn",showOptions:{},defaultDate:null,appendText:"",buttonText:"...",buttonImage:"",buttonImageOnly:!1,hideIfNoPrevNext:!1,navigationAsDateFormat:!1,gotoCurrent:!1,changeMonth:!1,changeYear:!1,yearRange:"c-10:c+10",showOtherMonths:!1,selectOtherMonths:!1,showWeek:!1,calculateWeek:this.iso8601Week,shortYearCutoff:"+10",minDate:null,maxDate:null,duration:"fast",beforeShowDay:null,beforeShow:null,onSelect:null,onChangeMonthYear:null,onClose:null,numberOfMonths:1,showCurrentAtPos:0,stepMonths:1,stepBigMonths:12,altField:"",altFormat:"",constrainInput:!0,showButtonPanel:!1,autoSize:!1,disabled:!1},t.extend(this._defaults,this.regional[""]),this.dpDiv=s(t("<div id='"+this._mainDivId+"' class='ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all'></div>"))}function s(e){var i="button, .ui-datepicker-prev, .ui-datepicker-next, .ui-datepicker-calendar td a";return e.delegate(i,"mouseout",function(){t(this).removeClass("ui-state-hover"),-1!==this.className.indexOf("ui-datepicker-prev")&&t(this).removeClass("ui-datepicker-prev-hover"),-1!==this.className.indexOf("ui-datepicker-next")&&t(this).removeClass("ui-datepicker-next-hover")}).delegate(i,"mouseover",function(){t.datepicker._isDisabledDatepicker(a.inline?e.parent()[0]:a.input[0])||(t(this).parents(".ui-datepicker-calendar").find("a").removeClass("ui-state-hover"),t(this).addClass("ui-state-hover"),-1!==this.className.indexOf("ui-datepicker-prev")&&t(this).addClass("ui-datepicker-prev-hover"),-1!==this.className.indexOf("ui-datepicker-next")&&t(this).addClass("ui-datepicker-next-hover"))})}function n(e,i){t.extend(e,i);for(var s in i)null==i[s]&&(e[s]=i[s]);return e}t.extend(t.ui,{datepicker:{version:"1.10.2"}});var a,r="datepicker",o=(new Date).getTime();t.extend(i.prototype,{markerClassName:"hasDatepicker",maxRows:4,_widgetDatepicker:function(){return this.dpDiv},setDefaults:function(t){return n(this._defaults,t||{}),this},_attachDatepicker:function(e,i){var s,n,a;s=e.nodeName.toLowerCase(),n="div"===s||"span"===s,e.id||(this.uuid+=1,e.id="dp"+this.uuid),a=this._newInst(t(e),n),a.settings=t.extend({},i||{}),"input"===s?this._connectDatepicker(e,a):n&&this._inlineDatepicker(e,a)},_newInst:function(e,i){var n=e[0].id.replace(/([^A-Za-z0-9_\-])/g,"\\\\$1");return{id:n,input:e,selectedDay:0,selectedMonth:0,selectedYear:0,drawMonth:0,drawYear:0,inline:i,dpDiv:i?s(t("<div class='"+this._inlineClass+" ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all'></div>")):this.dpDiv}},_connectDatepicker:function(e,i){var s=t(e);i.append=t([]),i.trigger=t([]),s.hasClass(this.markerClassName)||(this._attachments(s,i),s.addClass(this.markerClassName).keydown(this._doKeyDown).keypress(this._doKeyPress).keyup(this._doKeyUp),this._autoSize(i),t.data(e,r,i),i.settings.disabled&&this._disableDatepicker(e))},_attachments:function(e,i){var s,n,a,r=this._get(i,"appendText"),o=this._get(i,"isRTL");i.append&&i.append.remove(),r&&(i.append=t("<span class='"+this._appendClass+"'>"+r+"</span>"),e[o?"before":"after"](i.append)),e.unbind("focus",this._showDatepicker),i.trigger&&i.trigger.remove(),s=this._get(i,"showOn"),("focus"===s||"both"===s)&&e.focus(this._showDatepicker),("button"===s||"both"===s)&&(n=this._get(i,"buttonText"),a=this._get(i,"buttonImage"),i.trigger=t(this._get(i,"buttonImageOnly")?t("<img/>").addClass(this._triggerClass).attr({src:a,alt:n,title:n}):t("<button type='button'></button>").addClass(this._triggerClass).html(a?t("<img/>").attr({src:a,alt:n,title:n}):n)),e[o?"before":"after"](i.trigger),i.trigger.click(function(){return t.datepicker._datepickerShowing&&t.datepicker._lastInput===e[0]?t.datepicker._hideDatepicker():t.datepicker._datepickerShowing&&t.datepicker._lastInput!==e[0]?(t.datepicker._hideDatepicker(),t.datepicker._showDatepicker(e[0])):t.datepicker._showDatepicker(e[0]),!1}))},_autoSize:function(t){if(this._get(t,"autoSize")&&!t.inline){var e,i,s,n,a=new Date(2009,11,20),r=this._get(t,"dateFormat");r.match(/[DM]/)&&(e=function(t){for(i=0,s=0,n=0;t.length>n;n++)t[n].length>i&&(i=t[n].length,s=n);return s},a.setMonth(e(this._get(t,r.match(/MM/)?"monthNames":"monthNamesShort"))),a.setDate(e(this._get(t,r.match(/DD/)?"dayNames":"dayNamesShort"))+20-a.getDay())),t.input.attr("size",this._formatDate(t,a).length)}},_inlineDatepicker:function(e,i){var s=t(e);s.hasClass(this.markerClassName)||(s.addClass(this.markerClassName).append(i.dpDiv),t.data(e,r,i),this._setDate(i,this._getDefaultDate(i),!0),this._updateDatepicker(i),this._updateAlternate(i),i.settings.disabled&&this._disableDatepicker(e),i.dpDiv.css("display","block"))},_dialogDatepicker:function(e,i,s,a,o){var h,l,c,u,d,p=this._dialogInst;return p||(this.uuid+=1,h="dp"+this.uuid,this._dialogInput=t("<input type='text' id='"+h+"' style='position: absolute; top: -100px; width: 0px;'/>"),this._dialogInput.keydown(this._doKeyDown),t("body").append(this._dialogInput),p=this._dialogInst=this._newInst(this._dialogInput,!1),p.settings={},t.data(this._dialogInput[0],r,p)),n(p.settings,a||{}),i=i&&i.constructor===Date?this._formatDate(p,i):i,this._dialogInput.val(i),this._pos=o?o.length?o:[o.pageX,o.pageY]:null,this._pos||(l=document.documentElement.clientWidth,c=document.documentElement.clientHeight,u=document.documentElement.scrollLeft||document.body.scrollLeft,d=document.documentElement.scrollTop||document.body.scrollTop,this._pos=[l/2-100+u,c/2-150+d]),this._dialogInput.css("left",this._pos[0]+20+"px").css("top",this._pos[1]+"px"),p.settings.onSelect=s,this._inDialog=!0,this.dpDiv.addClass(this._dialogClass),this._showDatepicker(this._dialogInput[0]),t.blockUI&&t.blockUI(this.dpDiv),t.data(this._dialogInput[0],r,p),this},_destroyDatepicker:function(e){var i,s=t(e),n=t.data(e,r);s.hasClass(this.markerClassName)&&(i=e.nodeName.toLowerCase(),t.removeData(e,r),"input"===i?(n.append.remove(),n.trigger.remove(),s.removeClass(this.markerClassName).unbind("focus",this._showDatepicker).unbind("keydown",this._doKeyDown).unbind("keypress",this._doKeyPress).unbind("keyup",this._doKeyUp)):("div"===i||"span"===i)&&s.removeClass(this.markerClassName).empty())},_enableDatepicker:function(e){var i,s,n=t(e),a=t.data(e,r);n.hasClass(this.markerClassName)&&(i=e.nodeName.toLowerCase(),"input"===i?(e.disabled=!1,a.trigger.filter("button").each(function(){this.disabled=!1}).end().filter("img").css({opacity:"1.0",cursor:""})):("div"===i||"span"===i)&&(s=n.children("."+this._inlineClass),s.children().removeClass("ui-state-disabled"),s.find("select.ui-datepicker-month, select.ui-datepicker-year").prop("disabled",!1)),this._disabledInputs=t.map(this._disabledInputs,function(t){return t===e?null:t}))},_disableDatepicker:function(e){var i,s,n=t(e),a=t.data(e,r);n.hasClass(this.markerClassName)&&(i=e.nodeName.toLowerCase(),"input"===i?(e.disabled=!0,a.trigger.filter("button").each(function(){this.disabled=!0}).end().filter("img").css({opacity:"0.5",cursor:"default"})):("div"===i||"span"===i)&&(s=n.children("."+this._inlineClass),s.children().addClass("ui-state-disabled"),s.find("select.ui-datepicker-month, select.ui-datepicker-year").prop("disabled",!0)),this._disabledInputs=t.map(this._disabledInputs,function(t){return t===e?null:t}),this._disabledInputs[this._disabledInputs.length]=e)},_isDisabledDatepicker:function(t){if(!t)return!1;for(var e=0;this._disabledInputs.length>e;e++)if(this._disabledInputs[e]===t)return!0;return!1},_getInst:function(e){try{return t.data(e,r)}catch(i){throw"Missing instance data for this datepicker"}},_optionDatepicker:function(i,s,a){var r,o,h,l,c=this._getInst(i);return 2===arguments.length&&"string"==typeof s?"defaults"===s?t.extend({},t.datepicker._defaults):c?"all"===s?t.extend({},c.settings):this._get(c,s):null:(r=s||{},"string"==typeof s&&(r={},r[s]=a),c&&(this._curInst===c&&this._hideDatepicker(),o=this._getDateDatepicker(i,!0),h=this._getMinMaxDate(c,"min"),l=this._getMinMaxDate(c,"max"),n(c.settings,r),null!==h&&r.dateFormat!==e&&r.minDate===e&&(c.settings.minDate=this._formatDate(c,h)),null!==l&&r.dateFormat!==e&&r.maxDate===e&&(c.settings.maxDate=this._formatDate(c,l)),"disabled"in r&&(r.disabled?this._disableDatepicker(i):this._enableDatepicker(i)),this._attachments(t(i),c),this._autoSize(c),this._setDate(c,o),this._updateAlternate(c),this._updateDatepicker(c)),e)},_changeDatepicker:function(t,e,i){this._optionDatepicker(t,e,i)},_refreshDatepicker:function(t){var e=this._getInst(t);e&&this._updateDatepicker(e)},_setDateDatepicker:function(t,e){var i=this._getInst(t);i&&(this._setDate(i,e),this._updateDatepicker(i),this._updateAlternate(i))},_getDateDatepicker:function(t,e){var i=this._getInst(t);return i&&!i.inline&&this._setDateFromField(i,e),i?this._getDate(i):null},_doKeyDown:function(e){var i,s,n,a=t.datepicker._getInst(e.target),r=!0,o=a.dpDiv.is(".ui-datepicker-rtl");if(a._keyEvent=!0,t.datepicker._datepickerShowing)switch(e.keyCode){case 9:t.datepicker._hideDatepicker(),r=!1;break;case 13:return n=t("td."+t.datepicker._dayOverClass+":not(."+t.datepicker._currentClass+")",a.dpDiv),n[0]&&t.datepicker._selectDay(e.target,a.selectedMonth,a.selectedYear,n[0]),i=t.datepicker._get(a,"onSelect"),i?(s=t.datepicker._formatDate(a),i.apply(a.input?a.input[0]:null,[s,a])):t.datepicker._hideDatepicker(),!1;case 27:t.datepicker._hideDatepicker();break;case 33:t.datepicker._adjustDate(e.target,e.ctrlKey?-t.datepicker._get(a,"stepBigMonths"):-t.datepicker._get(a,"stepMonths"),"M");break;case 34:t.datepicker._adjustDate(e.target,e.ctrlKey?+t.datepicker._get(a,"stepBigMonths"):+t.datepicker._get(a,"stepMonths"),"M");break;case 35:(e.ctrlKey||e.metaKey)&&t.datepicker._clearDate(e.target),r=e.ctrlKey||e.metaKey;break;case 36:(e.ctrlKey||e.metaKey)&&t.datepicker._gotoToday(e.target),r=e.ctrlKey||e.metaKey;break;case 37:(e.ctrlKey||e.metaKey)&&t.datepicker._adjustDate(e.target,o?1:-1,"D"),r=e.ctrlKey||e.metaKey,e.originalEvent.altKey&&t.datepicker._adjustDate(e.target,e.ctrlKey?-t.datepicker._get(a,"stepBigMonths"):-t.datepicker._get(a,"stepMonths"),"M");break;case 38:(e.ctrlKey||e.metaKey)&&t.datepicker._adjustDate(e.target,-7,"D"),r=e.ctrlKey||e.metaKey;break;case 39:(e.ctrlKey||e.metaKey)&&t.datepicker._adjustDate(e.target,o?-1:1,"D"),r=e.ctrlKey||e.metaKey,e.originalEvent.altKey&&t.datepicker._adjustDate(e.target,e.ctrlKey?+t.datepicker._get(a,"stepBigMonths"):+t.datepicker._get(a,"stepMonths"),"M");break;case 40:(e.ctrlKey||e.metaKey)&&t.datepicker._adjustDate(e.target,7,"D"),r=e.ctrlKey||e.metaKey;break;default:r=!1}else 36===e.keyCode&&e.ctrlKey?t.datepicker._showDatepicker(this):r=!1;r&&(e.preventDefault(),e.stopPropagation())},_doKeyPress:function(i){var s,n,a=t.datepicker._getInst(i.target);return t.datepicker._get(a,"constrainInput")?(s=t.datepicker._possibleChars(t.datepicker._get(a,"dateFormat")),n=String.fromCharCode(null==i.charCode?i.keyCode:i.charCode),i.ctrlKey||i.metaKey||" ">n||!s||s.indexOf(n)>-1):e},_doKeyUp:function(e){var i,s=t.datepicker._getInst(e.target);if(s.input.val()!==s.lastVal)try{i=t.datepicker.parseDate(t.datepicker._get(s,"dateFormat"),s.input?s.input.val():null,t.datepicker._getFormatConfig(s)),i&&(t.datepicker._setDateFromField(s),t.datepicker._updateAlternate(s),t.datepicker._updateDatepicker(s))}catch(n){}return!0},_showDatepicker:function(e){if(e=e.target||e,"input"!==e.nodeName.toLowerCase()&&(e=t("input",e.parentNode)[0]),!t.datepicker._isDisabledDatepicker(e)&&t.datepicker._lastInput!==e){var i,s,a,r,o,h,l;i=t.datepicker._getInst(e),t.datepicker._curInst&&t.datepicker._curInst!==i&&(t.datepicker._curInst.dpDiv.stop(!0,!0),i&&t.datepicker._datepickerShowing&&t.datepicker._hideDatepicker(t.datepicker._curInst.input[0])),s=t.datepicker._get(i,"beforeShow"),a=s?s.apply(e,[e,i]):{},a!==!1&&(n(i.settings,a),i.lastVal=null,t.datepicker._lastInput=e,t.datepicker._setDateFromField(i),t.datepicker._inDialog&&(e.value=""),t.datepicker._pos||(t.datepicker._pos=t.datepicker._findPos(e),t.datepicker._pos[1]+=e.offsetHeight),r=!1,t(e).parents().each(function(){return r|="fixed"===t(this).css("position"),!r}),o={left:t.datepicker._pos[0],top:t.datepicker._pos[1]},t.datepicker._pos=null,i.dpDiv.empty(),i.dpDiv.css({position:"absolute",display:"block",top:"-1000px"}),t.datepicker._updateDatepicker(i),o=t.datepicker._checkOffset(i,o,r),i.dpDiv.css({position:t.datepicker._inDialog&&t.blockUI?"static":r?"fixed":"absolute",display:"none",left:o.left+"px",top:o.top+"px"}),i.inline||(h=t.datepicker._get(i,"showAnim"),l=t.datepicker._get(i,"duration"),i.dpDiv.zIndex(t(e).zIndex()+1),t.datepicker._datepickerShowing=!0,t.effects&&t.effects.effect[h]?i.dpDiv.show(h,t.datepicker._get(i,"showOptions"),l):i.dpDiv[h||"show"](h?l:null),i.input.is(":visible")&&!i.input.is(":disabled")&&i.input.focus(),t.datepicker._curInst=i))}},_updateDatepicker:function(e){this.maxRows=4,a=e,e.dpDiv.empty().append(this._generateHTML(e)),this._attachHandlers(e),e.dpDiv.find("."+this._dayOverClass+" a").mouseover();var i,s=this._getNumberOfMonths(e),n=s[1],r=17;e.dpDiv.removeClass("ui-datepicker-multi-2 ui-datepicker-multi-3 ui-datepicker-multi-4").width(""),n>1&&e.dpDiv.addClass("ui-datepicker-multi-"+n).css("width",r*n+"em"),e.dpDiv[(1!==s[0]||1!==s[1]?"add":"remove")+"Class"]("ui-datepicker-multi"),e.dpDiv[(this._get(e,"isRTL")?"add":"remove")+"Class"]("ui-datepicker-rtl"),e===t.datepicker._curInst&&t.datepicker._datepickerShowing&&e.input&&e.input.is(":visible")&&!e.input.is(":disabled")&&e.input[0]!==document.activeElement&&e.input.focus(),e.yearshtml&&(i=e.yearshtml,setTimeout(function(){i===e.yearshtml&&e.yearshtml&&e.dpDiv.find("select.ui-datepicker-year:first").replaceWith(e.yearshtml),i=e.yearshtml=null},0))},_getBorders:function(t){var e=function(t){return{thin:1,medium:2,thick:3}[t]||t};return[parseFloat(e(t.css("border-left-width"))),parseFloat(e(t.css("border-top-width")))]},_checkOffset:function(e,i,s){var n=e.dpDiv.outerWidth(),a=e.dpDiv.outerHeight(),r=e.input?e.input.outerWidth():0,o=e.input?e.input.outerHeight():0,h=document.documentElement.clientWidth+(s?0:t(document).scrollLeft()),l=document.documentElement.clientHeight+(s?0:t(document).scrollTop());return i.left-=this._get(e,"isRTL")?n-r:0,i.left-=s&&i.left===e.input.offset().left?t(document).scrollLeft():0,i.top-=s&&i.top===e.input.offset().top+o?t(document).scrollTop():0,i.left-=Math.min(i.left,i.left+n>h&&h>n?Math.abs(i.left+n-h):0),i.top-=Math.min(i.top,i.top+a>l&&l>a?Math.abs(a+o):0),i},_findPos:function(e){for(var i,s=this._getInst(e),n=this._get(s,"isRTL");e&&("hidden"===e.type||1!==e.nodeType||t.expr.filters.hidden(e));)e=e[n?"previousSibling":"nextSibling"];return i=t(e).offset(),[i.left,i.top]},_hideDatepicker:function(e){var i,s,n,a,o=this._curInst;!o||e&&o!==t.data(e,r)||this._datepickerShowing&&(i=this._get(o,"showAnim"),s=this._get(o,"duration"),n=function(){t.datepicker._tidyDialog(o)},t.effects&&(t.effects.effect[i]||t.effects[i])?o.dpDiv.hide(i,t.datepicker._get(o,"showOptions"),s,n):o.dpDiv["slideDown"===i?"slideUp":"fadeIn"===i?"fadeOut":"hide"](i?s:null,n),i||n(),this._datepickerShowing=!1,a=this._get(o,"onClose"),a&&a.apply(o.input?o.input[0]:null,[o.input?o.input.val():"",o]),this._lastInput=null,this._inDialog&&(this._dialogInput.css({position:"absolute",left:"0",top:"-100px"}),t.blockUI&&(t.unblockUI(),t("body").append(this.dpDiv))),this._inDialog=!1)},_tidyDialog:function(t){t.dpDiv.removeClass(this._dialogClass).unbind(".ui-datepicker-calendar")},_checkExternalClick:function(e){if(t.datepicker._curInst){var i=t(e.target),s=t.datepicker._getInst(i[0]);(i[0].id!==t.datepicker._mainDivId&&0===i.parents("#"+t.datepicker._mainDivId).length&&!i.hasClass(t.datepicker.markerClassName)&&!i.closest("."+t.datepicker._triggerClass).length&&t.datepicker._datepickerShowing&&(!t.datepicker._inDialog||!t.blockUI)||i.hasClass(t.datepicker.markerClassName)&&t.datepicker._curInst!==s)&&t.datepicker._hideDatepicker()}},_adjustDate:function(e,i,s){var n=t(e),a=this._getInst(n[0]);this._isDisabledDatepicker(n[0])||(this._adjustInstDate(a,i+("M"===s?this._get(a,"showCurrentAtPos"):0),s),this._updateDatepicker(a))},_gotoToday:function(e){var i,s=t(e),n=this._getInst(s[0]);this._get(n,"gotoCurrent")&&n.currentDay?(n.selectedDay=n.currentDay,n.drawMonth=n.selectedMonth=n.currentMonth,n.drawYear=n.selectedYear=n.currentYear):(i=new Date,n.selectedDay=i.getDate(),n.drawMonth=n.selectedMonth=i.getMonth(),n.drawYear=n.selectedYear=i.getFullYear()),this._notifyChange(n),this._adjustDate(s)},_selectMonthYear:function(e,i,s){var n=t(e),a=this._getInst(n[0]);a["selected"+("M"===s?"Month":"Year")]=a["draw"+("M"===s?"Month":"Year")]=parseInt(i.options[i.selectedIndex].value,10),this._notifyChange(a),this._adjustDate(n)},_selectDay:function(e,i,s,n){var a,r=t(e);t(n).hasClass(this._unselectableClass)||this._isDisabledDatepicker(r[0])||(a=this._getInst(r[0]),a.selectedDay=a.currentDay=t("a",n).html(),a.selectedMonth=a.currentMonth=i,a.selectedYear=a.currentYear=s,this._selectDate(e,this._formatDate(a,a.currentDay,a.currentMonth,a.currentYear)))},_clearDate:function(e){var i=t(e);this._selectDate(i,"")},_selectDate:function(e,i){var s,n=t(e),a=this._getInst(n[0]);i=null!=i?i:this._formatDate(a),a.input&&a.input.val(i),this._updateAlternate(a),s=this._get(a,"onSelect"),s?s.apply(a.input?a.input[0]:null,[i,a]):a.input&&a.input.trigger("change"),a.inline?this._updateDatepicker(a):(this._hideDatepicker(),this._lastInput=a.input[0],"object"!=typeof a.input[0]&&a.input.focus(),this._lastInput=null)},_updateAlternate:function(e){var i,s,n,a=this._get(e,"altField");a&&(i=this._get(e,"altFormat")||this._get(e,"dateFormat"),s=this._getDate(e),n=this.formatDate(i,s,this._getFormatConfig(e)),t(a).each(function(){t(this).val(n)}))},noWeekends:function(t){var e=t.getDay();return[e>0&&6>e,""]},iso8601Week:function(t){var e,i=new Date(t.getTime());return i.setDate(i.getDate()+4-(i.getDay()||7)),e=i.getTime(),i.setMonth(0),i.setDate(1),Math.floor(Math.round((e-i)/864e5)/7)+1},parseDate:function(i,s,n){if(null==i||null==s)throw"Invalid arguments";if(s="object"==typeof s?""+s:s+"",""===s)return null;var a,r,o,h,l=0,c=(n?n.shortYearCutoff:null)||this._defaults.shortYearCutoff,u="string"!=typeof c?c:(new Date).getFullYear()%100+parseInt(c,10),d=(n?n.dayNamesShort:null)||this._defaults.dayNamesShort,p=(n?n.dayNames:null)||this._defaults.dayNames,f=(n?n.monthNamesShort:null)||this._defaults.monthNamesShort,m=(n?n.monthNames:null)||this._defaults.monthNames,g=-1,v=-1,_=-1,b=-1,y=!1,w=function(t){var e=i.length>a+1&&i.charAt(a+1)===t;return e&&a++,e},k=function(t){var e=w(t),i="@"===t?14:"!"===t?20:"y"===t&&e?4:"o"===t?3:2,n=RegExp("^\\d{1,"+i+"}"),a=s.substring(l).match(n);if(!a)throw"Missing number at position "+l;return l+=a[0].length,parseInt(a[0],10)},x=function(i,n,a){var r=-1,o=t.map(w(i)?a:n,function(t,e){return[[e,t]]}).sort(function(t,e){return-(t[1].length-e[1].length)});if(t.each(o,function(t,i){var n=i[1];return s.substr(l,n.length).toLowerCase()===n.toLowerCase()?(r=i[0],l+=n.length,!1):e}),-1!==r)return r+1;throw"Unknown name at position "+l},D=function(){if(s.charAt(l)!==i.charAt(a))throw"Unexpected literal at position "+l;l++};for(a=0;i.length>a;a++)if(y)"'"!==i.charAt(a)||w("'")?D():y=!1;else switch(i.charAt(a)){case"d":_=k("d");break;case"D":x("D",d,p);break;case"o":b=k("o");break;case"m":v=k("m");break;case"M":v=x("M",f,m);break;case"y":g=k("y");break;case"@":h=new Date(k("@")),g=h.getFullYear(),v=h.getMonth()+1,_=h.getDate();break;case"!":h=new Date((k("!")-this._ticksTo1970)/1e4),g=h.getFullYear(),v=h.getMonth()+1,_=h.getDate();break;case"'":w("'")?D():y=!0;break;default:D()}if(s.length>l&&(o=s.substr(l),!/^\s+/.test(o)))throw"Extra/unparsed characters found in date: "+o;if(-1===g?g=(new Date).getFullYear():100>g&&(g+=(new Date).getFullYear()-(new Date).getFullYear()%100+(u>=g?0:-100)),b>-1)for(v=1,_=b;;){if(r=this._getDaysInMonth(g,v-1),r>=_)break;v++,_-=r}if(h=this._daylightSavingAdjust(new Date(g,v-1,_)),h.getFullYear()!==g||h.getMonth()+1!==v||h.getDate()!==_)throw"Invalid date";return h},ATOM:"yy-mm-dd",COOKIE:"D, dd M yy",ISO_8601:"yy-mm-dd",RFC_822:"D, d M y",RFC_850:"DD, dd-M-y",RFC_1036:"D, d M y",RFC_1123:"D, d M yy",RFC_2822:"D, d M yy",RSS:"D, d M y",TICKS:"!",TIMESTAMP:"@",W3C:"yy-mm-dd",_ticksTo1970:1e7*60*60*24*(718685+Math.floor(492.5)-Math.floor(19.7)+Math.floor(4.925)),formatDate:function(t,e,i){if(!e)return"";var s,n=(i?i.dayNamesShort:null)||this._defaults.dayNamesShort,a=(i?i.dayNames:null)||this._defaults.dayNames,r=(i?i.monthNamesShort:null)||this._defaults.monthNamesShort,o=(i?i.monthNames:null)||this._defaults.monthNames,h=function(e){var i=t.length>s+1&&t.charAt(s+1)===e;return i&&s++,i},l=function(t,e,i){var s=""+e;if(h(t))for(;i>s.length;)s="0"+s;return s},c=function(t,e,i,s){return h(t)?s[e]:i[e]},u="",d=!1;if(e)for(s=0;t.length>s;s++)if(d)"'"!==t.charAt(s)||h("'")?u+=t.charAt(s):d=!1;else switch(t.charAt(s)){case"d":u+=l("d",e.getDate(),2);break;case"D":u+=c("D",e.getDay(),n,a);break;case"o":u+=l("o",Math.round((new Date(e.getFullYear(),e.getMonth(),e.getDate()).getTime()-new Date(e.getFullYear(),0,0).getTime())/864e5),3);break;case"m":u+=l("m",e.getMonth()+1,2);break;case"M":u+=c("M",e.getMonth(),r,o);break;case"y":u+=h("y")?e.getFullYear():(10>e.getYear()%100?"0":"")+e.getYear()%100;break;case"@":u+=e.getTime();break;case"!":u+=1e4*e.getTime()+this._ticksTo1970;break;case"'":h("'")?u+="'":d=!0;break;default:u+=t.charAt(s)}return u},_possibleChars:function(t){var e,i="",s=!1,n=function(i){var s=t.length>e+1&&t.charAt(e+1)===i;return s&&e++,s};for(e=0;t.length>e;e++)if(s)"'"!==t.charAt(e)||n("'")?i+=t.charAt(e):s=!1;else switch(t.charAt(e)){case"d":case"m":case"y":case"@":i+="0123456789";break;case"D":case"M":return null;case"'":n("'")?i+="'":s=!0;break;default:i+=t.charAt(e)}return i},_get:function(t,i){return t.settings[i]!==e?t.settings[i]:this._defaults[i]},_setDateFromField:function(t,e){if(t.input.val()!==t.lastVal){var i=this._get(t,"dateFormat"),s=t.lastVal=t.input?t.input.val():null,n=this._getDefaultDate(t),a=n,r=this._getFormatConfig(t);try{a=this.parseDate(i,s,r)||n}catch(o){s=e?"":s}t.selectedDay=a.getDate(),t.drawMonth=t.selectedMonth=a.getMonth(),t.drawYear=t.selectedYear=a.getFullYear(),t.currentDay=s?a.getDate():0,t.currentMonth=s?a.getMonth():0,t.currentYear=s?a.getFullYear():0,this._adjustInstDate(t)}},_getDefaultDate:function(t){return this._restrictMinMax(t,this._determineDate(t,this._get(t,"defaultDate"),new Date))},_determineDate:function(e,i,s){var n=function(t){var e=new Date;return e.setDate(e.getDate()+t),e},a=function(i){try{return t.datepicker.parseDate(t.datepicker._get(e,"dateFormat"),i,t.datepicker._getFormatConfig(e))}catch(s){}for(var n=(i.toLowerCase().match(/^c/)?t.datepicker._getDate(e):null)||new Date,a=n.getFullYear(),r=n.getMonth(),o=n.getDate(),h=/([+\-]?[0-9]+)\s*(d|D|w|W|m|M|y|Y)?/g,l=h.exec(i);l;){switch(l[2]||"d"){case"d":case"D":o+=parseInt(l[1],10);break;case"w":case"W":o+=7*parseInt(l[1],10);break;case"m":case"M":r+=parseInt(l[1],10),o=Math.min(o,t.datepicker._getDaysInMonth(a,r));break;case"y":case"Y":a+=parseInt(l[1],10),o=Math.min(o,t.datepicker._getDaysInMonth(a,r))}l=h.exec(i)}return new Date(a,r,o)},r=null==i||""===i?s:"string"==typeof i?a(i):"number"==typeof i?isNaN(i)?s:n(i):new Date(i.getTime());return r=r&&"Invalid Date"==""+r?s:r,r&&(r.setHours(0),r.setMinutes(0),r.setSeconds(0),r.setMilliseconds(0)),this._daylightSavingAdjust(r)},_daylightSavingAdjust:function(t){return t?(t.setHours(t.getHours()>12?t.getHours()+2:0),t):null},_setDate:function(t,e,i){var s=!e,n=t.selectedMonth,a=t.selectedYear,r=this._restrictMinMax(t,this._determineDate(t,e,new Date));t.selectedDay=t.currentDay=r.getDate(),t.drawMonth=t.selectedMonth=t.currentMonth=r.getMonth(),t.drawYear=t.selectedYear=t.currentYear=r.getFullYear(),n===t.selectedMonth&&a===t.selectedYear||i||this._notifyChange(t),this._adjustInstDate(t),t.input&&t.input.val(s?"":this._formatDate(t))},_getDate:function(t){var e=!t.currentYear||t.input&&""===t.input.val()?null:this._daylightSavingAdjust(new Date(t.currentYear,t.currentMonth,t.currentDay));return e},_attachHandlers:function(e){var i=this._get(e,"stepMonths"),s="#"+e.id.replace(/\\\\/g,"\\");e.dpDiv.find("[data-handler]").map(function(){var e={prev:function(){window["DP_jQuery_"+o].datepicker._adjustDate(s,-i,"M")},next:function(){window["DP_jQuery_"+o].datepicker._adjustDate(s,+i,"M")},hide:function(){window["DP_jQuery_"+o].datepicker._hideDatepicker()},today:function(){window["DP_jQuery_"+o].datepicker._gotoToday(s)},selectDay:function(){return window["DP_jQuery_"+o].datepicker._selectDay(s,+this.getAttribute("data-month"),+this.getAttribute("data-year"),this),!1},selectMonth:function(){return window["DP_jQuery_"+o].datepicker._selectMonthYear(s,this,"M"),!1},selectYear:function(){return window["DP_jQuery_"+o].datepicker._selectMonthYear(s,this,"Y"),!1}};t(this).bind(this.getAttribute("data-event"),e[this.getAttribute("data-handler")])})},_generateHTML:function(t){var e,i,s,n,a,r,o,h,l,c,u,d,p,f,m,g,v,_,b,y,w,k,x,D,T,C,S,M,N,I,P,A,z,H,E,F,O,W,j,R=new Date,L=this._daylightSavingAdjust(new Date(R.getFullYear(),R.getMonth(),R.getDate())),Y=this._get(t,"isRTL"),B=this._get(t,"showButtonPanel"),J=this._get(t,"hideIfNoPrevNext"),Q=this._get(t,"navigationAsDateFormat"),K=this._getNumberOfMonths(t),V=this._get(t,"showCurrentAtPos"),U=this._get(t,"stepMonths"),q=1!==K[0]||1!==K[1],X=this._daylightSavingAdjust(t.currentDay?new Date(t.currentYear,t.currentMonth,t.currentDay):new Date(9999,9,9)),G=this._getMinMaxDate(t,"min"),$=this._getMinMaxDate(t,"max"),Z=t.drawMonth-V,te=t.drawYear;if(0>Z&&(Z+=12,te--),$)for(e=this._daylightSavingAdjust(new Date($.getFullYear(),$.getMonth()-K[0]*K[1]+1,$.getDate())),e=G&&G>e?G:e;this._daylightSavingAdjust(new Date(te,Z,1))>e;)Z--,0>Z&&(Z=11,te--);for(t.drawMonth=Z,t.drawYear=te,i=this._get(t,"prevText"),i=Q?this.formatDate(i,this._daylightSavingAdjust(new Date(te,Z-U,1)),this._getFormatConfig(t)):i,s=this._canAdjustMonth(t,-1,te,Z)?"<a class='ui-datepicker-prev ui-corner-all' data-handler='prev' data-event='click' title='"+i+"'><span class='ui-icon ui-icon-circle-triangle-"+(Y?"e":"w")+"'>"+i+"</span></a>":J?"":"<a class='ui-datepicker-prev ui-corner-all ui-state-disabled' title='"+i+"'><span class='ui-icon ui-icon-circle-triangle-"+(Y?"e":"w")+"'>"+i+"</span></a>",n=this._get(t,"nextText"),n=Q?this.formatDate(n,this._daylightSavingAdjust(new Date(te,Z+U,1)),this._getFormatConfig(t)):n,a=this._canAdjustMonth(t,1,te,Z)?"<a class='ui-datepicker-next ui-corner-all' data-handler='next' data-event='click' title='"+n+"'><span class='ui-icon ui-icon-circle-triangle-"+(Y?"w":"e")+"'>"+n+"</span></a>":J?"":"<a class='ui-datepicker-next ui-corner-all ui-state-disabled' title='"+n+"'><span class='ui-icon ui-icon-circle-triangle-"+(Y?"w":"e")+"'>"+n+"</span></a>",r=this._get(t,"currentText"),o=this._get(t,"gotoCurrent")&&t.currentDay?X:L,r=Q?this.formatDate(r,o,this._getFormatConfig(t)):r,h=t.inline?"":"<button type='button' class='ui-datepicker-close ui-state-default ui-priority-primary ui-corner-all' data-handler='hide' data-event='click'>"+this._get(t,"closeText")+"</button>",l=B?"<div class='ui-datepicker-buttonpane ui-widget-content'>"+(Y?h:"")+(this._isInRange(t,o)?"<button type='button' class='ui-datepicker-current ui-state-default ui-priority-secondary ui-corner-all' data-handler='today' data-event='click'>"+r+"</button>":"")+(Y?"":h)+"</div>":"",c=parseInt(this._get(t,"firstDay"),10),c=isNaN(c)?0:c,u=this._get(t,"showWeek"),d=this._get(t,"dayNames"),p=this._get(t,"dayNamesMin"),f=this._get(t,"monthNames"),m=this._get(t,"monthNamesShort"),g=this._get(t,"beforeShowDay"),v=this._get(t,"showOtherMonths"),_=this._get(t,"selectOtherMonths"),b=this._getDefaultDate(t),y="",k=0;K[0]>k;k++){for(x="",this.maxRows=4,D=0;K[1]>D;D++){if(T=this._daylightSavingAdjust(new Date(te,Z,t.selectedDay)),C=" ui-corner-all",S="",q){if(S+="<div class='ui-datepicker-group",K[1]>1)switch(D){case 0:S+=" ui-datepicker-group-first",C=" ui-corner-"+(Y?"right":"left");break;case K[1]-1:S+=" ui-datepicker-group-last",C=" ui-corner-"+(Y?"left":"right");break;default:S+=" ui-datepicker-group-middle",C=""}S+="'>"}for(S+="<div class='ui-datepicker-header ui-widget-header ui-helper-clearfix"+C+"'>"+(/all|left/.test(C)&&0===k?Y?a:s:"")+(/all|right/.test(C)&&0===k?Y?s:a:"")+this._generateMonthYearHeader(t,Z,te,G,$,k>0||D>0,f,m)+"</div><table class='ui-datepicker-calendar'><thead>"+"<tr>",M=u?"<th class='ui-datepicker-week-col'>"+this._get(t,"weekHeader")+"</th>":"",w=0;7>w;w++)N=(w+c)%7,M+="<th"+((w+c+6)%7>=5?" class='ui-datepicker-week-end'":"")+">"+"<span title='"+d[N]+"'>"+p[N]+"</span></th>";for(S+=M+"</tr></thead><tbody>",I=this._getDaysInMonth(te,Z),te===t.selectedYear&&Z===t.selectedMonth&&(t.selectedDay=Math.min(t.selectedDay,I)),P=(this._getFirstDayOfMonth(te,Z)-c+7)%7,A=Math.ceil((P+I)/7),z=q?this.maxRows>A?this.maxRows:A:A,this.maxRows=z,H=this._daylightSavingAdjust(new Date(te,Z,1-P)),E=0;z>E;E++){for(S+="<tr>",F=u?"<td class='ui-datepicker-week-col'>"+this._get(t,"calculateWeek")(H)+"</td>":"",w=0;7>w;w++)O=g?g.apply(t.input?t.input[0]:null,[H]):[!0,""],W=H.getMonth()!==Z,j=W&&!_||!O[0]||G&&G>H||$&&H>$,F+="<td class='"+((w+c+6)%7>=5?" ui-datepicker-week-end":"")+(W?" ui-datepicker-other-month":"")+(H.getTime()===T.getTime()&&Z===t.selectedMonth&&t._keyEvent||b.getTime()===H.getTime()&&b.getTime()===T.getTime()?" "+this._dayOverClass:"")+(j?" "+this._unselectableClass+" ui-state-disabled":"")+(W&&!v?"":" "+O[1]+(H.getTime()===X.getTime()?" "+this._currentClass:"")+(H.getTime()===L.getTime()?" ui-datepicker-today":""))+"'"+(W&&!v||!O[2]?"":" title='"+O[2].replace(/'/g,"&#39;")+"'")+(j?"":" data-handler='selectDay' data-event='click' data-month='"+H.getMonth()+"' data-year='"+H.getFullYear()+"'")+">"+(W&&!v?"&#xa0;":j?"<span class='ui-state-default'>"+H.getDate()+"</span>":"<a class='ui-state-default"+(H.getTime()===L.getTime()?" ui-state-highlight":"")+(H.getTime()===X.getTime()?" ui-state-active":"")+(W?" ui-priority-secondary":"")+"' href='#'>"+H.getDate()+"</a>")+"</td>",H.setDate(H.getDate()+1),H=this._daylightSavingAdjust(H);S+=F+"</tr>"}Z++,Z>11&&(Z=0,te++),S+="</tbody></table>"+(q?"</div>"+(K[0]>0&&D===K[1]-1?"<div class='ui-datepicker-row-break'></div>":""):""),x+=S}y+=x}return y+=l,t._keyEvent=!1,y},_generateMonthYearHeader:function(t,e,i,s,n,a,r,o){var h,l,c,u,d,p,f,m,g=this._get(t,"changeMonth"),v=this._get(t,"changeYear"),_=this._get(t,"showMonthAfterYear"),b="<div class='ui-datepicker-title'>",y="";if(a||!g)y+="<span class='ui-datepicker-month'>"+r[e]+"</span>";else{for(h=s&&s.getFullYear()===i,l=n&&n.getFullYear()===i,y+="<select class='ui-datepicker-month' data-handler='selectMonth' data-event='change'>",c=0;12>c;c++)(!h||c>=s.getMonth())&&(!l||n.getMonth()>=c)&&(y+="<option value='"+c+"'"+(c===e?" selected='selected'":"")+">"+o[c]+"</option>");
y+="</select>"}if(_||(b+=y+(!a&&g&&v?"":"&#xa0;")),!t.yearshtml)if(t.yearshtml="",a||!v)b+="<span class='ui-datepicker-year'>"+i+"</span>";else{for(u=this._get(t,"yearRange").split(":"),d=(new Date).getFullYear(),p=function(t){var e=t.match(/c[+\-].*/)?i+parseInt(t.substring(1),10):t.match(/[+\-].*/)?d+parseInt(t,10):parseInt(t,10);return isNaN(e)?d:e},f=p(u[0]),m=Math.max(f,p(u[1]||"")),f=s?Math.max(f,s.getFullYear()):f,m=n?Math.min(m,n.getFullYear()):m,t.yearshtml+="<select class='ui-datepicker-year' data-handler='selectYear' data-event='change'>";m>=f;f++)t.yearshtml+="<option value='"+f+"'"+(f===i?" selected='selected'":"")+">"+f+"</option>";t.yearshtml+="</select>",b+=t.yearshtml,t.yearshtml=null}return b+=this._get(t,"yearSuffix"),_&&(b+=(!a&&g&&v?"":"&#xa0;")+y),b+="</div>"},_adjustInstDate:function(t,e,i){var s=t.drawYear+("Y"===i?e:0),n=t.drawMonth+("M"===i?e:0),a=Math.min(t.selectedDay,this._getDaysInMonth(s,n))+("D"===i?e:0),r=this._restrictMinMax(t,this._daylightSavingAdjust(new Date(s,n,a)));t.selectedDay=r.getDate(),t.drawMonth=t.selectedMonth=r.getMonth(),t.drawYear=t.selectedYear=r.getFullYear(),("M"===i||"Y"===i)&&this._notifyChange(t)},_restrictMinMax:function(t,e){var i=this._getMinMaxDate(t,"min"),s=this._getMinMaxDate(t,"max"),n=i&&i>e?i:e;return s&&n>s?s:n},_notifyChange:function(t){var e=this._get(t,"onChangeMonthYear");e&&e.apply(t.input?t.input[0]:null,[t.selectedYear,t.selectedMonth+1,t])},_getNumberOfMonths:function(t){var e=this._get(t,"numberOfMonths");return null==e?[1,1]:"number"==typeof e?[1,e]:e},_getMinMaxDate:function(t,e){return this._determineDate(t,this._get(t,e+"Date"),null)},_getDaysInMonth:function(t,e){return 32-this._daylightSavingAdjust(new Date(t,e,32)).getDate()},_getFirstDayOfMonth:function(t,e){return new Date(t,e,1).getDay()},_canAdjustMonth:function(t,e,i,s){var n=this._getNumberOfMonths(t),a=this._daylightSavingAdjust(new Date(i,s+(0>e?e:n[0]*n[1]),1));return 0>e&&a.setDate(this._getDaysInMonth(a.getFullYear(),a.getMonth())),this._isInRange(t,a)},_isInRange:function(t,e){var i,s,n=this._getMinMaxDate(t,"min"),a=this._getMinMaxDate(t,"max"),r=null,o=null,h=this._get(t,"yearRange");return h&&(i=h.split(":"),s=(new Date).getFullYear(),r=parseInt(i[0],10),o=parseInt(i[1],10),i[0].match(/[+\-].*/)&&(r+=s),i[1].match(/[+\-].*/)&&(o+=s)),(!n||e.getTime()>=n.getTime())&&(!a||e.getTime()<=a.getTime())&&(!r||e.getFullYear()>=r)&&(!o||o>=e.getFullYear())},_getFormatConfig:function(t){var e=this._get(t,"shortYearCutoff");return e="string"!=typeof e?e:(new Date).getFullYear()%100+parseInt(e,10),{shortYearCutoff:e,dayNamesShort:this._get(t,"dayNamesShort"),dayNames:this._get(t,"dayNames"),monthNamesShort:this._get(t,"monthNamesShort"),monthNames:this._get(t,"monthNames")}},_formatDate:function(t,e,i,s){e||(t.currentDay=t.selectedDay,t.currentMonth=t.selectedMonth,t.currentYear=t.selectedYear);var n=e?"object"==typeof e?e:this._daylightSavingAdjust(new Date(s,i,e)):this._daylightSavingAdjust(new Date(t.currentYear,t.currentMonth,t.currentDay));return this.formatDate(this._get(t,"dateFormat"),n,this._getFormatConfig(t))}}),t.fn.datepicker=function(e){if(!this.length)return this;t.datepicker.initialized||(t(document).mousedown(t.datepicker._checkExternalClick),t.datepicker.initialized=!0),0===t("#"+t.datepicker._mainDivId).length&&t("body").append(t.datepicker.dpDiv);var i=Array.prototype.slice.call(arguments,1);return"string"!=typeof e||"isDisabled"!==e&&"getDate"!==e&&"widget"!==e?"option"===e&&2===arguments.length&&"string"==typeof arguments[1]?t.datepicker["_"+e+"Datepicker"].apply(t.datepicker,[this[0]].concat(i)):this.each(function(){"string"==typeof e?t.datepicker["_"+e+"Datepicker"].apply(t.datepicker,[this].concat(i)):t.datepicker._attachDatepicker(this,e)}):t.datepicker["_"+e+"Datepicker"].apply(t.datepicker,[this[0]].concat(i))},t.datepicker=new i,t.datepicker.initialized=!1,t.datepicker.uuid=(new Date).getTime(),t.datepicker.version="1.10.2",window["DP_jQuery_"+o]=t})(jQuery);/*! jQuery UI - v1.10.2 - 2013-03-14
* http://jqueryui.com
* Copyright 2013 jQuery Foundation and other contributors; Licensed MIT */
(function(t){function e(e,i){var s=(e.attr("aria-describedby")||"").split(/\s+/);s.push(i),e.data("ui-tooltip-id",i).attr("aria-describedby",t.trim(s.join(" ")))}function i(e){var i=e.data("ui-tooltip-id"),s=(e.attr("aria-describedby")||"").split(/\s+/),n=t.inArray(i,s);-1!==n&&s.splice(n,1),e.removeData("ui-tooltip-id"),s=t.trim(s.join(" ")),s?e.attr("aria-describedby",s):e.removeAttr("aria-describedby")}var s=0;t.widget("ui.tooltip",{version:"1.10.2",options:{content:function(){var e=t(this).attr("title")||"";return t("<a>").text(e).html()},hide:!0,items:"[title]:not([disabled])",position:{my:"left top+15",at:"left bottom",collision:"flipfit flip"},show:!0,tooltipClass:null,track:!1,close:null,open:null},_create:function(){this._on({mouseover:"open",focusin:"open"}),this.tooltips={},this.parents={},this.options.disabled&&this._disable()},_setOption:function(e,i){var s=this;return"disabled"===e?(this[i?"_disable":"_enable"](),this.options[e]=i,void 0):(this._super(e,i),"content"===e&&t.each(this.tooltips,function(t,e){s._updateContent(e)}),void 0)},_disable:function(){var e=this;t.each(this.tooltips,function(i,s){var n=t.Event("blur");n.target=n.currentTarget=s[0],e.close(n,!0)}),this.element.find(this.options.items).addBack().each(function(){var e=t(this);e.is("[title]")&&e.data("ui-tooltip-title",e.attr("title")).attr("title","")})},_enable:function(){this.element.find(this.options.items).addBack().each(function(){var e=t(this);e.data("ui-tooltip-title")&&e.attr("title",e.data("ui-tooltip-title"))})},open:function(e){var i=this,s=t(e?e.target:this.element).closest(this.options.items);s.length&&!s.data("ui-tooltip-id")&&(s.attr("title")&&s.data("ui-tooltip-title",s.attr("title")),s.data("ui-tooltip-open",!0),e&&"mouseover"===e.type&&s.parents().each(function(){var e,s=t(this);s.data("ui-tooltip-open")&&(e=t.Event("blur"),e.target=e.currentTarget=this,i.close(e,!0)),s.attr("title")&&(s.uniqueId(),i.parents[this.id]={element:this,title:s.attr("title")},s.attr("title",""))}),this._updateContent(s,e))},_updateContent:function(t,e){var i,s=this.options.content,n=this,a=e?e.type:null;return"string"==typeof s?this._open(e,t,s):(i=s.call(t[0],function(i){t.data("ui-tooltip-open")&&n._delay(function(){e&&(e.type=a),this._open(e,t,i)})}),i&&this._open(e,t,i),void 0)},_open:function(i,s,n){function a(t){l.of=t,o.is(":hidden")||o.position(l)}var o,r,h,l=t.extend({},this.options.position);if(n){if(o=this._find(s),o.length)return o.find(".ui-tooltip-content").html(n),void 0;s.is("[title]")&&(i&&"mouseover"===i.type?s.attr("title",""):s.removeAttr("title")),o=this._tooltip(s),e(s,o.attr("id")),o.find(".ui-tooltip-content").html(n),this.options.track&&i&&/^mouse/.test(i.type)?(this._on(this.document,{mousemove:a}),a(i)):o.position(t.extend({of:s},this.options.position)),o.hide(),this._show(o,this.options.show),this.options.show&&this.options.show.delay&&(h=this.delayedShow=setInterval(function(){o.is(":visible")&&(a(l.of),clearInterval(h))},t.fx.interval)),this._trigger("open",i,{tooltip:o}),r={keyup:function(e){if(e.keyCode===t.ui.keyCode.ESCAPE){var i=t.Event(e);i.currentTarget=s[0],this.close(i,!0)}},remove:function(){this._removeTooltip(o)}},i&&"mouseover"!==i.type||(r.mouseleave="close"),i&&"focusin"!==i.type||(r.focusout="close"),this._on(!0,s,r)}},close:function(e){var s=this,n=t(e?e.currentTarget:this.element),a=this._find(n);this.closing||(clearInterval(this.delayedShow),n.data("ui-tooltip-title")&&n.attr("title",n.data("ui-tooltip-title")),i(n),a.stop(!0),this._hide(a,this.options.hide,function(){s._removeTooltip(t(this))}),n.removeData("ui-tooltip-open"),this._off(n,"mouseleave focusout keyup"),n[0]!==this.element[0]&&this._off(n,"remove"),this._off(this.document,"mousemove"),e&&"mouseleave"===e.type&&t.each(this.parents,function(e,i){t(i.element).attr("title",i.title),delete s.parents[e]}),this.closing=!0,this._trigger("close",e,{tooltip:a}),this.closing=!1)},_tooltip:function(e){var i="ui-tooltip-"+s++,n=t("<div>").attr({id:i,role:"tooltip"}).addClass("ui-tooltip ui-widget ui-corner-all ui-widget-content "+(this.options.tooltipClass||""));return t("<div>").addClass("ui-tooltip-content").appendTo(n),n.appendTo(this.document[0].body),this.tooltips[i]=e,n},_find:function(e){var i=e.data("ui-tooltip-id");return i?t("#"+i):t()},_removeTooltip:function(t){t.remove(),delete this.tooltips[t.attr("id")]},_destroy:function(){var e=this;t.each(this.tooltips,function(i,s){var n=t.Event("blur");n.target=n.currentTarget=s[0],e.close(n,!0),t("#"+i).remove(),s.data("ui-tooltip-title")&&(s.attr("title",s.data("ui-tooltip-title")),s.removeData("ui-tooltip-title"))})}})})(jQuery);/*! jQuery UI - v1.10.2 - 2013-03-14
* http://jqueryui.com
* Copyright 2013 jQuery Foundation and other contributors; Licensed MIT */
(function(t){var e=5;t.widget("ui.slider",t.ui.mouse,{version:"1.10.2",widgetEventPrefix:"slide",options:{animate:!1,distance:0,max:100,min:0,orientation:"horizontal",range:!1,step:1,value:0,values:null,change:null,slide:null,start:null,stop:null},_create:function(){this._keySliding=!1,this._mouseSliding=!1,this._animateOff=!0,this._handleIndex=null,this._detectOrientation(),this._mouseInit(),this.element.addClass("ui-slider ui-slider-"+this.orientation+" ui-widget"+" ui-widget-content"+" ui-corner-all"),this._refresh(),this._setOption("disabled",this.options.disabled),this._animateOff=!1},_refresh:function(){this._createRange(),this._createHandles(),this._setupEvents(),this._refreshValue()},_createHandles:function(){var e,i,s=this.options,n=this.element.find(".ui-slider-handle").addClass("ui-state-default ui-corner-all"),a="<a class='ui-slider-handle ui-state-default ui-corner-all' href='#'></a>",o=[];for(i=s.values&&s.values.length||1,n.length>i&&(n.slice(i).remove(),n=n.slice(0,i)),e=n.length;i>e;e++)o.push(a);this.handles=n.add(t(o.join("")).appendTo(this.element)),this.handle=this.handles.eq(0),this.handles.each(function(e){t(this).data("ui-slider-handle-index",e)})},_createRange:function(){var e=this.options,i="";e.range?(e.range===!0&&(e.values?e.values.length&&2!==e.values.length?e.values=[e.values[0],e.values[0]]:t.isArray(e.values)&&(e.values=e.values.slice(0)):e.values=[this._valueMin(),this._valueMin()]),this.range&&this.range.length?this.range.removeClass("ui-slider-range-min ui-slider-range-max").css({left:"",bottom:""}):(this.range=t("<div></div>").appendTo(this.element),i="ui-slider-range ui-widget-header ui-corner-all"),this.range.addClass(i+("min"===e.range||"max"===e.range?" ui-slider-range-"+e.range:""))):this.range=t([])},_setupEvents:function(){var t=this.handles.add(this.range).filter("a");this._off(t),this._on(t,this._handleEvents),this._hoverable(t),this._focusable(t)},_destroy:function(){this.handles.remove(),this.range.remove(),this.element.removeClass("ui-slider ui-slider-horizontal ui-slider-vertical ui-widget ui-widget-content ui-corner-all"),this._mouseDestroy()},_mouseCapture:function(e){var i,s,n,a,o,r,h,l,u=this,c=this.options;return c.disabled?!1:(this.elementSize={width:this.element.outerWidth(),height:this.element.outerHeight()},this.elementOffset=this.element.offset(),i={x:e.pageX,y:e.pageY},s=this._normValueFromMouse(i),n=this._valueMax()-this._valueMin()+1,this.handles.each(function(e){var i=Math.abs(s-u.values(e));(n>i||n===i&&(e===u._lastChangedValue||u.values(e)===c.min))&&(n=i,a=t(this),o=e)}),r=this._start(e,o),r===!1?!1:(this._mouseSliding=!0,this._handleIndex=o,a.addClass("ui-state-active").focus(),h=a.offset(),l=!t(e.target).parents().addBack().is(".ui-slider-handle"),this._clickOffset=l?{left:0,top:0}:{left:e.pageX-h.left-a.width()/2,top:e.pageY-h.top-a.height()/2-(parseInt(a.css("borderTopWidth"),10)||0)-(parseInt(a.css("borderBottomWidth"),10)||0)+(parseInt(a.css("marginTop"),10)||0)},this.handles.hasClass("ui-state-hover")||this._slide(e,o,s),this._animateOff=!0,!0))},_mouseStart:function(){return!0},_mouseDrag:function(t){var e={x:t.pageX,y:t.pageY},i=this._normValueFromMouse(e);return this._slide(t,this._handleIndex,i),!1},_mouseStop:function(t){return this.handles.removeClass("ui-state-active"),this._mouseSliding=!1,this._stop(t,this._handleIndex),this._change(t,this._handleIndex),this._handleIndex=null,this._clickOffset=null,this._animateOff=!1,!1},_detectOrientation:function(){this.orientation="vertical"===this.options.orientation?"vertical":"horizontal"},_normValueFromMouse:function(t){var e,i,s,n,a;return"horizontal"===this.orientation?(e=this.elementSize.width,i=t.x-this.elementOffset.left-(this._clickOffset?this._clickOffset.left:0)):(e=this.elementSize.height,i=t.y-this.elementOffset.top-(this._clickOffset?this._clickOffset.top:0)),s=i/e,s>1&&(s=1),0>s&&(s=0),"vertical"===this.orientation&&(s=1-s),n=this._valueMax()-this._valueMin(),a=this._valueMin()+s*n,this._trimAlignValue(a)},_start:function(t,e){var i={handle:this.handles[e],value:this.value()};return this.options.values&&this.options.values.length&&(i.value=this.values(e),i.values=this.values()),this._trigger("start",t,i)},_slide:function(t,e,i){var s,n,a;this.options.values&&this.options.values.length?(s=this.values(e?0:1),2===this.options.values.length&&this.options.range===!0&&(0===e&&i>s||1===e&&s>i)&&(i=s),i!==this.values(e)&&(n=this.values(),n[e]=i,a=this._trigger("slide",t,{handle:this.handles[e],value:i,values:n}),s=this.values(e?0:1),a!==!1&&this.values(e,i,!0))):i!==this.value()&&(a=this._trigger("slide",t,{handle:this.handles[e],value:i}),a!==!1&&this.value(i))},_stop:function(t,e){var i={handle:this.handles[e],value:this.value()};this.options.values&&this.options.values.length&&(i.value=this.values(e),i.values=this.values()),this._trigger("stop",t,i)},_change:function(t,e){if(!this._keySliding&&!this._mouseSliding){var i={handle:this.handles[e],value:this.value()};this.options.values&&this.options.values.length&&(i.value=this.values(e),i.values=this.values()),this._lastChangedValue=e,this._trigger("change",t,i)}},value:function(t){return arguments.length?(this.options.value=this._trimAlignValue(t),this._refreshValue(),this._change(null,0),undefined):this._value()},values:function(e,i){var s,n,a;if(arguments.length>1)return this.options.values[e]=this._trimAlignValue(i),this._refreshValue(),this._change(null,e),undefined;if(!arguments.length)return this._values();if(!t.isArray(arguments[0]))return this.options.values&&this.options.values.length?this._values(e):this.value();for(s=this.options.values,n=arguments[0],a=0;s.length>a;a+=1)s[a]=this._trimAlignValue(n[a]),this._change(null,a);this._refreshValue()},_setOption:function(e,i){var s,n=0;switch("range"===e&&this.options.range===!0&&("min"===i?(this.options.value=this._values(0),this.options.values=null):"max"===i&&(this.options.value=this._values(this.options.values.length-1),this.options.values=null)),t.isArray(this.options.values)&&(n=this.options.values.length),t.Widget.prototype._setOption.apply(this,arguments),e){case"orientation":this._detectOrientation(),this.element.removeClass("ui-slider-horizontal ui-slider-vertical").addClass("ui-slider-"+this.orientation),this._refreshValue();break;case"value":this._animateOff=!0,this._refreshValue(),this._change(null,0),this._animateOff=!1;break;case"values":for(this._animateOff=!0,this._refreshValue(),s=0;n>s;s+=1)this._change(null,s);this._animateOff=!1;break;case"min":case"max":this._animateOff=!0,this._refreshValue(),this._animateOff=!1;break;case"range":this._animateOff=!0,this._refresh(),this._animateOff=!1}},_value:function(){var t=this.options.value;return t=this._trimAlignValue(t)},_values:function(t){var e,i,s;if(arguments.length)return e=this.options.values[t],e=this._trimAlignValue(e);if(this.options.values&&this.options.values.length){for(i=this.options.values.slice(),s=0;i.length>s;s+=1)i[s]=this._trimAlignValue(i[s]);return i}return[]},_trimAlignValue:function(t){if(this._valueMin()>=t)return this._valueMin();if(t>=this._valueMax())return this._valueMax();var e=this.options.step>0?this.options.step:1,i=(t-this._valueMin())%e,s=t-i;return 2*Math.abs(i)>=e&&(s+=i>0?e:-e),parseFloat(s.toFixed(5))},_valueMin:function(){return this.options.min},_valueMax:function(){return this.options.max},_refreshValue:function(){var e,i,s,n,a,o=this.options.range,r=this.options,h=this,l=this._animateOff?!1:r.animate,u={};this.options.values&&this.options.values.length?this.handles.each(function(s){i=100*((h.values(s)-h._valueMin())/(h._valueMax()-h._valueMin())),u["horizontal"===h.orientation?"left":"bottom"]=i+"%",t(this).stop(1,1)[l?"animate":"css"](u,r.animate),h.options.range===!0&&("horizontal"===h.orientation?(0===s&&h.range.stop(1,1)[l?"animate":"css"]({left:i+"%"},r.animate),1===s&&h.range[l?"animate":"css"]({width:i-e+"%"},{queue:!1,duration:r.animate})):(0===s&&h.range.stop(1,1)[l?"animate":"css"]({bottom:i+"%"},r.animate),1===s&&h.range[l?"animate":"css"]({height:i-e+"%"},{queue:!1,duration:r.animate}))),e=i}):(s=this.value(),n=this._valueMin(),a=this._valueMax(),i=a!==n?100*((s-n)/(a-n)):0,u["horizontal"===this.orientation?"left":"bottom"]=i+"%",this.handle.stop(1,1)[l?"animate":"css"](u,r.animate),"min"===o&&"horizontal"===this.orientation&&this.range.stop(1,1)[l?"animate":"css"]({width:i+"%"},r.animate),"max"===o&&"horizontal"===this.orientation&&this.range[l?"animate":"css"]({width:100-i+"%"},{queue:!1,duration:r.animate}),"min"===o&&"vertical"===this.orientation&&this.range.stop(1,1)[l?"animate":"css"]({height:i+"%"},r.animate),"max"===o&&"vertical"===this.orientation&&this.range[l?"animate":"css"]({height:100-i+"%"},{queue:!1,duration:r.animate}))},_handleEvents:{keydown:function(i){var s,n,a,o,r=t(i.target).data("ui-slider-handle-index");switch(i.keyCode){case t.ui.keyCode.HOME:case t.ui.keyCode.END:case t.ui.keyCode.PAGE_UP:case t.ui.keyCode.PAGE_DOWN:case t.ui.keyCode.UP:case t.ui.keyCode.RIGHT:case t.ui.keyCode.DOWN:case t.ui.keyCode.LEFT:if(i.preventDefault(),!this._keySliding&&(this._keySliding=!0,t(i.target).addClass("ui-state-active"),s=this._start(i,r),s===!1))return}switch(o=this.options.step,n=a=this.options.values&&this.options.values.length?this.values(r):this.value(),i.keyCode){case t.ui.keyCode.HOME:a=this._valueMin();break;case t.ui.keyCode.END:a=this._valueMax();break;case t.ui.keyCode.PAGE_UP:a=this._trimAlignValue(n+(this._valueMax()-this._valueMin())/e);break;case t.ui.keyCode.PAGE_DOWN:a=this._trimAlignValue(n-(this._valueMax()-this._valueMin())/e);break;case t.ui.keyCode.UP:case t.ui.keyCode.RIGHT:if(n===this._valueMax())return;a=this._trimAlignValue(n+o);break;case t.ui.keyCode.DOWN:case t.ui.keyCode.LEFT:if(n===this._valueMin())return;a=this._trimAlignValue(n-o)}this._slide(i,r,a)},click:function(t){t.preventDefault()},keyup:function(e){var i=t(e.target).data("ui-slider-handle-index");this._keySliding&&(this._keySliding=!1,this._stop(e,i),this._change(e,i),t(e.target).removeClass("ui-state-active"))}}})})(jQuery);/*
 * jQuery Selectbox plugin 0.1.3
 *
 * Copyright 2011, Dimitar Ivanov (http://www.bulgaria-web-developers.com/projects/javascript/selectbox/)
 * Licensed under the MIT (http://www.opensource.org/licenses/mit-license.php) license.
 * 
 * Date: Wed Jul 29 23:20:57 2011 +0200
 */
(function($,undefined){var PROP_NAME="selectbox",FALSE=false,TRUE=true;function Selectbox(){this._state=[];this._defaults={classHolder:"sbHolder",classHolderDisabled:"sbHolderDisabled",classSelector:"sbSelector",classOptions:"sbOptions",classGroup:"sbGroup",classSub:"sbSub",classDisabled:"sbDisabled",classToggleOpen:"sbToggleOpen",classToggle:"sbToggle",speed:200,effect:"slide",onChange:null,onOpen:null,onClose:null}}$.extend(Selectbox.prototype,{_isOpenSelectbox:function(target){if(!target){return FALSE}var inst=this._getInst(target);return inst.isOpen},_isDisabledSelectbox:function(target){if(!target){return FALSE}var inst=this._getInst(target);return inst.isDisabled},_attachSelectbox:function(target,settings){if(this._getInst(target)){return FALSE}var $target=$(target),self=this,inst=self._newInst($target),sbHolder,sbSelector,sbToggle,sbOptions,s=FALSE,optGroup=$target.find("optgroup"),opts=$target.find("option"),olen=opts.length;$target.attr("sb",inst.uid);$.extend(inst.settings,self._defaults,settings);self._state[inst.uid]=FALSE;$target.hide();function closeOthers(){var key,uid=this.attr("id").split("_")[1];for(key in self._state){if(key!==uid){if(self._state.hasOwnProperty(key)){if($(":input[sb='"+key+"']")[0]){self._closeSelectbox($(":input[sb='"+key+"']")[0])}}}}}sbHolder=$("<div>",{id:"sbHolder_"+inst.uid,"class":inst.settings.classHolder});sbSelector=$("<a>",{id:"sbSelector_"+inst.uid,href:"#","class":inst.settings.classSelector,click:function(e){e.preventDefault();closeOthers.apply($(this),[]);var uid=$(this).attr("id").split("_")[1];if(self._state[uid]){self._closeSelectbox(target)}else{self._openSelectbox(target)}}});sbToggle=$("<a>",{id:"sbToggle_"+inst.uid,href:"#","class":inst.settings.classToggle,click:function(e){e.preventDefault();closeOthers.apply($(this),[]);var uid=$(this).attr("id").split("_")[1];if(self._state[uid]){self._closeSelectbox(target)}else{self._openSelectbox(target)}}});sbToggle.appendTo(sbHolder);sbOptions=$("<ul>",{id:"sbOptions_"+inst.uid,"class":inst.settings.classOptions,css:{display:"none"}});$target.children().each(function(i){var that=$(this),li,config={};if(that.is("option")){getOptions(that)}else{if(that.is("optgroup")){li=$("<li>");$("<span>",{text:that.attr("label")}).addClass(inst.settings.classGroup).appendTo(li);li.appendTo(sbOptions);if(that.is(":disabled")){config.disabled=true}config.sub=true;getOptions(that.find("option"),config)}}});function getOptions(){var sub=arguments[1]&&arguments[1].sub?true:false,disabled=arguments[1]&&arguments[1].disabled?true:false;arguments[0].each(function(i){var that=$(this),li=$("<li>"),child;if(that.is(":selected")){sbSelector.text(that.text());s=TRUE}if(i===olen-1){li.addClass("last")}if(!that.is(":disabled")&&!disabled){child=$("<a>",{href:"#"+that.val(),rel:that.val(),text:that.text(),click:function(e){e.preventDefault();var t=sbToggle,uid=t.attr("id").split("_")[1];self._changeSelectbox(target,$(this).attr("rel"),$(this).text());self._closeSelectbox(target)}});if(sub){child.addClass(inst.settings.classSub)}child.appendTo(li)}else{child=$("<span>",{text:that.text()}).addClass(inst.settings.classDisabled);if(sub){child.addClass(inst.settings.classSub)}child.appendTo(li)}li.appendTo(sbOptions)})}if(!s){sbSelector.text(opts.first().text())}$.data(target,PROP_NAME,inst);sbSelector.appendTo(sbHolder);sbOptions.appendTo(sbHolder);sbHolder.insertAfter($target)},_detachSelectbox:function(target){var inst=this._getInst(target);if(!inst){return FALSE}$("#sbHolder_"+inst.uid).remove();$.data(target,PROP_NAME,null);$(target).show()},_changeSelectbox:function(target,value,text){var inst=this._getInst(target),onChange=this._get(inst,"onChange");$("#sbSelector_"+inst.uid).text(text);$(target).find("option").attr("selected", FALSE);$(target).find("option[value='"+value+"']").prop("selected",TRUE);if(onChange){onChange.apply((inst.input?inst.input[0]:null),[value,inst])}else{if(inst.input){inst.input.trigger("change")}}},_enableSelectbox:function(target){var inst=this._getInst(target);if(!inst||!inst.isDisabled){return FALSE}$("#sbHolder_"+inst.uid).removeClass(inst.settings.classHolderDisabled);inst.isDisabled=FALSE;$.data(target,PROP_NAME,inst)},_disableSelectbox:function(target){var inst=this._getInst(target);if(!inst||inst.isDisabled){return FALSE}$("#sbHolder_"+inst.uid).addClass(inst.settings.classHolderDisabled);inst.isDisabled=TRUE;$.data(target,PROP_NAME,inst)},_optionSelectbox:function(target,name,value){var inst=this._getInst(target);if(!inst){return FALSE}inst[name]=value;$.data(target,PROP_NAME,inst)},_openSelectbox:function(target){var inst=this._getInst(target);if(!inst||inst.isOpen||inst.isDisabled){return }var el=$("#sbOptions_"+inst.uid),viewportHeight=parseInt($(window).height(),10),offset=$("#sbHolder_"+inst.uid).offset(),scrollTop=$(window).scrollTop(),height=el.prev().height(),diff=viewportHeight-(offset.top-scrollTop)-height/2,onOpen=this._get(inst,"onOpen");el.css({top:height+"px",maxHeight:(diff-height)+"px"});inst.settings.effect==="fade"?el.fadeIn(inst.settings.speed):el.slideDown(inst.settings.speed);$("#sbToggle_"+inst.uid).addClass(inst.settings.classToggleOpen);this._state[inst.uid]=TRUE;inst.isOpen=TRUE;if(onOpen){onOpen.apply((inst.input?inst.input[0]:null),[inst])}$.data(target,PROP_NAME,inst)},_closeSelectbox:function(target){var inst=this._getInst(target);if(!inst||!inst.isOpen){return }var onClose=this._get(inst,"onClose");inst.settings.effect==="fade"?$("#sbOptions_"+inst.uid).fadeOut(inst.settings.speed):$("#sbOptions_"+inst.uid).slideUp(inst.settings.speed);$("#sbToggle_"+inst.uid).removeClass(inst.settings.classToggleOpen);this._state[inst.uid]=FALSE;inst.isOpen=FALSE;if(onClose){onClose.apply((inst.input?inst.input[0]:null),[inst])}$.data(target,PROP_NAME,inst)},_newInst:function(target){var id=target[0].id.replace(/([^A-Za-z0-9_-])/g,"\\\\$1");return{id:id,input:target,uid:Math.floor(Math.random()*99999999),isOpen:FALSE,isDisabled:FALSE,settings:{}}},_getInst:function(target){try{return $.data(target,PROP_NAME)}catch(err){throw"Missing instance data for this selectbox"}},_get:function(inst,name){return inst.settings[name]!==undefined?inst.settings[name]:this._defaults[name]}});$.fn.selectbox=function(options){var otherArgs=Array.prototype.slice.call(arguments,1);if(typeof options=="string"&&options=="isDisabled"){return $.selectbox["_"+options+"Selectbox"].apply($.selectbox,[this[0]].concat(otherArgs))}if(options=="option"&&arguments.length==2&&typeof arguments[1]=="string"){return $.selectbox["_"+options+"Selectbox"].apply($.selectbox,[this[0]].concat(otherArgs))}return this.each(function(){typeof options=="string"?$.selectbox["_"+options+"Selectbox"].apply($.selectbox,[this].concat(otherArgs)):$.selectbox._attachSelectbox(this,options)})};$.selectbox=new Selectbox();$.selectbox.version="0.1.3"})(jQuery);
(function($)
{"use strict";var MagicSuggest=function(element,options)
{var ms=this;var defaults={allowFreeEntries:true,allowDuplicates:false,ajaxConfig:{},autoSelect:true,selectFirst:false,queryParam:'query',beforeSend:function(){},cls:'',data:null,dataUrlParams:{},disabled:false,disabledField:null,displayField:'name',editable:true,expanded:false,expandOnFocus:false,groupBy:null,hideTrigger:false,highlight:true,id:null,infoMsgCls:'',inputCfg:{},invalidCls:'ms-inv',matchCase:false,maxDropHeight:290,maxEntryLength:null,maxEntryRenderer:function(v){return'Please reduce your entry by '+v+' character'+(v>1?'s':'');},maxSuggestions:null,maxSelection:10,maxSelectionRenderer:function(v){return'You cannot choose more than '+v+' item'+(v>1?'s':'');},method:'POST',minChars:0,minCharsRenderer:function(v){return'Please type '+v+' more character'+(v>1?'s':'');},mode:'local',name:null,noSuggestionText:'No suggestions',placeholder:'Type or click here',renderer:null,required:false,resultAsString:false,resultAsStringDelimiter:',',resultsField:'results',selectionCls:'',selectionContainer:null,selectionPosition:'inner',selectionRenderer:null,selectionStacked:false,sortDir:'asc',sortOrder:null,strictSuggest:false,style:'',toggleOnClick:false,typeDelay:400,useTabKey:false,useCommaKey:true,useZebraStyle:false,value:null,valueField:'id',vregex:null,vtype:null};var conf=$.extend({},options);var cfg=$.extend(true,{},defaults,conf);this.addToSelection=function(items,isSilent)
{if(items){if(!cfg.maxSelection||_selection.length<cfg.maxSelection){if(!$.isArray(items)){items=[items];}
var valuechanged=false;$.each(items,function(index,json){if(cfg.allowDuplicates||$.inArray(json[cfg.valueField],ms.getValue())===-1){_selection.push(json);valuechanged=true;}});if(valuechanged===true){self._renderSelection();this.empty();if(isSilent!==true){$(this).trigger('selectionchange',[this,this.getSelection()]);}}}
this.input.attr('placeholder',(cfg.selectionPosition==='inner'&&this.getValue().length>0)?'':cfg.placeholder);}};this.clear=function(isSilent)
{this.removeFromSelection(_selection.slice(0),isSilent);};this.collapse=function()
{if(cfg.expanded===true){this.combobox.detach();cfg.expanded=false;$(this).trigger('collapse',[this]);}};this.disable=function()
{this.container.addClass('ms-ctn-disabled');cfg.disabled=true;ms.input.attr('disabled',true);};this.empty=function(){this.input.val('');};this.enable=function()
{this.container.removeClass('ms-ctn-disabled');cfg.disabled=false;ms.input.attr('disabled',false);};this.expand=function()
{if(!cfg.expanded&&(this.input.val().length>=cfg.minChars||this.combobox.children().size()>0)){this.combobox.appendTo(this.container);self._processSuggestions();cfg.expanded=true;$(this).trigger('expand',[this]);}};this.isDisabled=function()
{return cfg.disabled;};this.isValid=function()
{var valid=cfg.required===false||_selection.length>0;if(cfg.vtype||cfg.vregex){$.each(_selection,function(index,item){valid=valid&&self._validateSingleItem(item[cfg.valueField]);});}
return valid;};this.getDataUrlParams=function()
{return cfg.dataUrlParams;};this.getName=function()
{return cfg.name;};this.getSelection=function()
{return _selection;};this.getRawValue=function(){return ms.input.val();};this.getValue=function()
{return $.map(_selection,function(o){return o[cfg.valueField];});};this.removeFromSelection=function(items,isSilent)
{if(items){if(!$.isArray(items)){items=[items];}
var valuechanged=false;$.each(items,function(index,json){var i=$.inArray(json[cfg.valueField],ms.getValue());if(i>-1){_selection.splice(i,1);valuechanged=true;}});if(valuechanged===true){self._renderSelection();if(isSilent!==true){$(this).trigger('selectionchange',[this,this.getSelection()]);}
if(cfg.expandOnFocus){ms.expand();}
if(cfg.expanded){self._processSuggestions();}}
this.input.attr('placeholder',(cfg.selectionPosition==='inner'&&this.getValue().length>0)?'':cfg.placeholder);}};this.getData=function(){return _cbData;};this.setData=function(data){cfg.data=data;self._processSuggestions();};this.setName=function(name){cfg.name=name;if(name){cfg.name+=name.indexOf('[]')>0?'':'[]';}
if(ms._valueContainer){$.each(ms._valueContainer.children(),function(i,el){el.name=cfg.name;});}};this.setSelection=function(items){if(items){this.clear();this.addToSelection(items);}};this.setValue=function(values)
{var items=[];$.each(values,function(index,value){var found=false;$.each(_cbData,function(i,item){if(item[cfg.valueField]==value){items.push(item);found=true;return false;}});if(!found){if(typeof(value)==='object'){items.push(value);}else{var json={};json[cfg.valueField]=value;json[cfg.displayField]=value;items.push(json);}}});if(items.length>0){this.addToSelection(items);}};this.setDataUrlParams=function(params)
{cfg.dataUrlParams=$.extend({},params);};var _selection=[],_comboItemHeight=0,_timer,_hasFocus=false,_groups=null,_cbData=[],_ctrlDown=false,KEYCODES={BACKSPACE:8,TAB:9,ENTER:13,CTRL:17,ESC:27,SPACE:32,UPARROW:38,DOWNARROW:40,COMMA:188};var self={_displaySuggestions:function(data){ms.combobox.show();ms.combobox.empty();var resHeight=0,nbGroups=0;if(_groups===null){self._renderComboItems(data);resHeight=_comboItemHeight*data.length;}
else{for(var grpName in _groups){nbGroups+=1;$('<div/>',{'class':'ms-res-group',html:grpName}).appendTo(ms.combobox);self._renderComboItems(_groups[grpName].items,true);}
var _groupItemHeight=ms.combobox.find('.ms-res-group').outerHeight();if(_groupItemHeight!==null){var tmpResHeight=nbGroups*_groupItemHeight;resHeight=(_comboItemHeight*data.length)+tmpResHeight;}else{resHeight=_comboItemHeight*(data.length+nbGroups);}}
if(resHeight<ms.combobox.height()||resHeight<=cfg.maxDropHeight){ms.combobox.height(resHeight);}
else if(resHeight>=ms.combobox.height()&&resHeight>cfg.maxDropHeight){ms.combobox.height(cfg.maxDropHeight);}
if(data.length===1&&cfg.autoSelect===true){ms.combobox.children().filter(':not(.ms-res-item-disabled):last').addClass('ms-res-item-active');}
if(cfg.selectFirst===true){ms.combobox.children().filter(':not(.ms-res-item-disabled):first').addClass('ms-res-item-active');}
if(data.length===0&&ms.getRawValue()!==""){var noSuggestionText=cfg.noSuggestionText.replace(/\{\{.*\}\}/,ms.input.val());self._updateHelper(noSuggestionText);ms.collapse();}
if(cfg.allowFreeEntries===false){if(data.length===0){$(ms.input).addClass(cfg.invalidCls);ms.combobox.hide();}else{$(ms.input).removeClass(cfg.invalidCls);}}},_getEntriesFromStringArray:function(data){var json=[];$.each(data,function(index,s){var entry={};entry[cfg.displayField]=entry[cfg.valueField]=$.trim(s);json.push(entry);});return json;},_highlightSuggestion:function(html){var q=ms.input.val();var specialCharacters=['^','$','*','+','?','.','(',')',':','!','|','{','}','[',']'];$.each(specialCharacters,function(index,value){q=q.replace(value,"\\"+value);})
if(q.length===0){return html;}
var glob=cfg.matchCase===true?'g':'gi';return html.replace(new RegExp('('+q+')(?!([^<]+)?>)',glob),'<em>$1</em>');},_moveSelectedRow:function(dir){if(!cfg.expanded){ms.expand();}
var list,start,active,scrollPos;list=ms.combobox.find(".ms-res-item:not(.ms-res-item-disabled)");if(dir==='down'){start=list.eq(0);}
else{start=list.filter(':last');}
active=ms.combobox.find('.ms-res-item-active:not(.ms-res-item-disabled):first');if(active.length>0){if(dir==='down'){start=active.nextAll('.ms-res-item:not(.ms-res-item-disabled)').first();if(start.length===0){start=list.eq(0);}
scrollPos=ms.combobox.scrollTop();ms.combobox.scrollTop(0);if(start[0].offsetTop+start.outerHeight()>ms.combobox.height()){ms.combobox.scrollTop(scrollPos+_comboItemHeight);}}
else{start=active.prevAll('.ms-res-item:not(.ms-res-item-disabled)').first();if(start.length===0){start=list.filter(':last');ms.combobox.scrollTop(_comboItemHeight*list.length);}
if(start[0].offsetTop<ms.combobox.scrollTop()){ms.combobox.scrollTop(ms.combobox.scrollTop()-_comboItemHeight);}}}
list.removeClass("ms-res-item-active");start.addClass("ms-res-item-active");},_processSuggestions:function(source){var json=null,data=source||cfg.data;if(data!==null){if(typeof(data)==='function'){data=data.call(ms,ms.getRawValue());}
if(typeof(data)==='string'){$(ms).trigger('beforeload',[ms]);var queryParams={}
queryParams[cfg.queryParam]=ms.input.val();var params=$.extend(queryParams,cfg.dataUrlParams);$.ajax($.extend({type:cfg.method,url:data,data:params,beforeSend:cfg.beforeSend,success:function(asyncData){json=typeof(asyncData)==='string'?JSON.parse(asyncData):asyncData;self._processSuggestions(json);$(ms).trigger('load',[ms,json]);if(self._asyncValues){ms.setValue(typeof(self._asyncValues)==='string'?JSON.parse(self._asyncValues):self._asyncValues);self._renderSelection();delete(self._asyncValues);}},error:function(){throw("Could not reach server");}},cfg.ajaxConfig));return;}else{if(data.length>0&&typeof(data[0])==='string'){_cbData=self._getEntriesFromStringArray(data);}else{_cbData=data[cfg.resultsField]||data;}}
var sortedData=cfg.mode==='remote'?_cbData:self._sortAndTrim(_cbData);self._displaySuggestions(self._group(sortedData));}},_render:function(el){ms.setName(cfg.name);ms.container=$('<div/>',{'class':'ms-ctn form-control '+(cfg.resultAsString?'ms-as-string ':'')+cfg.cls+
($(el).hasClass('input-lg')?' input-lg':'')+
($(el).hasClass('input-sm')?' input-sm':'')+
(cfg.disabled===true?' ms-ctn-disabled':'')+
(cfg.editable===true?'':' ms-ctn-readonly')+
(cfg.hideTrigger===false?'':' ms-no-trigger'),style:cfg.style,id:cfg.id});ms.container.focus($.proxy(handlers._onFocus,this));ms.container.blur($.proxy(handlers._onBlur,this));ms.container.keydown($.proxy(handlers._onKeyDown,this));ms.container.keyup($.proxy(handlers._onKeyUp,this));ms.input=$('<input/>',$.extend({type:'text','class':cfg.editable===true?'':' ms-input-readonly',readonly:!cfg.editable,placeholder:cfg.placeholder,disabled:cfg.disabled},cfg.inputCfg));ms.input.focus($.proxy(handlers._onInputFocus,this));ms.input.click($.proxy(handlers._onInputClick,this));ms.combobox=$('<div/>',{'class':'ms-res-ctn dropdown-menu'}).height(cfg.maxDropHeight);ms.combobox.on('click','div.ms-res-item',$.proxy(handlers._onComboItemSelected,this));ms.combobox.on('mouseover','div.ms-res-item',$.proxy(handlers._onComboItemMouseOver,this));if(cfg.selectionContainer){ms.selectionContainer=cfg.selectionContainer;$(ms.selectionContainer).addClass('ms-sel-ctn');}else{ms.selectionContainer=$('<div/>',{'class':'ms-sel-ctn'});}
ms.selectionContainer.click($.proxy(handlers._onFocus,this));if(cfg.selectionPosition==='inner'&&!cfg.selectionContainer){ms.selectionContainer.append(ms.input);}
else{ms.container.append(ms.input);}
ms.helper=$('<span/>',{'class':'ms-helper '+cfg.infoMsgCls});self._updateHelper();ms.container.append(ms.helper);$(el).replaceWith(ms.container);if(!cfg.selectionContainer){switch(cfg.selectionPosition){case'bottom':ms.selectionContainer.insertAfter(ms.container);if(cfg.selectionStacked===true){ms.selectionContainer.width(ms.container.width());ms.selectionContainer.addClass('ms-stacked');}
break;case'right':ms.selectionContainer.insertAfter(ms.container);ms.container.css('float','left');break;default:ms.container.append(ms.selectionContainer);break;}}
if(cfg.hideTrigger===false){ms.trigger=$('<div/>',{'class':'ms-trigger',html:'<div class="ms-trigger-ico"></div>'});ms.trigger.click($.proxy(handlers._onTriggerClick,this));ms.container.append(ms.trigger);}
$(window).resize($.proxy(handlers._onWindowResized,this));if(cfg.value!==null||cfg.data!==null){if(typeof(cfg.data)==='string'){self._asyncValues=cfg.value;self._processSuggestions();}else{self._processSuggestions();if(cfg.value!==null){ms.setValue(cfg.value);self._renderSelection();}}}
$("body").click(function(e){if(ms.container.hasClass('ms-ctn-focus')&&ms.container.has(e.target).length===0&&e.target.className.indexOf('ms-res-item')<0&&e.target.className.indexOf('ms-close-btn')<0&&ms.container[0]!==e.target){handlers._onBlur();}});if(cfg.expanded===true){cfg.expanded=false;ms.expand();}},_renderComboItems:function(items,isGrouped){var ref=this,html='';$.each(items,function(index,value){var displayed=cfg.renderer!==null?cfg.renderer.call(ref,value):value[cfg.displayField];var disabled=cfg.disabledField!==null&&value[cfg.disabledField]===true;var resultItemEl=$('<div/>',{'class':'ms-res-item '+(isGrouped?'ms-res-item-grouped ':'')+
(disabled?'ms-res-item-disabled ':'')+
(index%2===1&&cfg.useZebraStyle===true?'ms-res-odd':''),html:cfg.highlight===true?self._highlightSuggestion(displayed):displayed,'data-json':JSON.stringify(value)});html+=$('<div/>').append(resultItemEl).html();});ms.combobox.append(html);_comboItemHeight=ms.combobox.find('.ms-res-item:first').outerHeight();},_renderSelection:function(){var ref=this,w=0,inputOffset=0,items=[],asText=cfg.resultAsString===true&&!_hasFocus;ms.selectionContainer.find('.ms-sel-item').remove();if(ms._valueContainer!==undefined){ms._valueContainer.remove();}
$.each(_selection,function(index,value){var selectedItemEl,delItemEl,selectedItemHtml=cfg.selectionRenderer!==null?cfg.selectionRenderer.call(ref,value):value[cfg.displayField];var validCls=self._validateSingleItem(value[cfg.displayField])?'':' ms-sel-invalid';if(asText===true){selectedItemEl=$('<div/>',{'class':'ms-sel-item ms-sel-text '+cfg.selectionCls+validCls,html:selectedItemHtml+(index===(_selection.length-1)?'':cfg.resultAsStringDelimiter)}).data('json',value);}
else{selectedItemEl=$('<div/>',{'class':'ms-sel-item '+cfg.selectionCls+validCls,html:selectedItemHtml}).data('json',value);if(cfg.disabled===false){delItemEl=$('<span/>',{'class':'ms-close-btn'}).data('json',value).appendTo(selectedItemEl);delItemEl.click($.proxy(handlers._onTagTriggerClick,ref));}}
items.push(selectedItemEl);});ms.selectionContainer.prepend(items);ms._valueContainer=$('<div/>',{style:'display: none;'});$.each(ms.getValue(),function(i,val){var el=$('<input/>',{type:'hidden',name:cfg.name,value:val});el.appendTo(ms._valueContainer);});ms._valueContainer.appendTo(ms.selectionContainer);if(cfg.selectionPosition==='inner'&&!cfg.selectionContainer){ms.input.width(0);inputOffset=ms.input.offset().left-ms.selectionContainer.offset().left;w=ms.container.width()-inputOffset-42;ms.input.width(w);}
if(_selection.length===cfg.maxSelection){self._updateHelper(cfg.maxSelectionRenderer.call(this,_selection.length));}else{ms.helper.hide();}},_selectItem:function(item){if(cfg.maxSelection===1){_selection=[];}
ms.addToSelection(item.data('json'));item.removeClass('ms-res-item-active');if(cfg.expandOnFocus===false||_selection.length===cfg.maxSelection){ms.collapse();}
if(!_hasFocus){ms.input.focus();}else if(_hasFocus&&(cfg.expandOnFocus||_ctrlDown)){self._processSuggestions();if(_ctrlDown){ms.expand();}}},_sortAndTrim:function(data){var q=ms.getRawValue(),filtered=[],newSuggestions=[],selectedValues=ms.getValue();if(q.length>0){$.each(data,function(index,obj){var name=obj[cfg.displayField];if((cfg.matchCase===true&&name.indexOf(q)>-1)||(cfg.matchCase===false&&name.toLowerCase().indexOf(q.toLowerCase())>-1)){if(cfg.strictSuggest===false||name.toLowerCase().indexOf(q.toLowerCase())===0){filtered.push(obj);}}});}
else{filtered=data;}
$.each(filtered,function(index,obj){if(cfg.allowDuplicates||$.inArray(obj[cfg.valueField],selectedValues)===-1){newSuggestions.push(obj);}});if(cfg.sortOrder!==null){newSuggestions.sort(function(a,b){if(a[cfg.sortOrder]<b[cfg.sortOrder]){return cfg.sortDir==='asc'?-1:1;}
if(a[cfg.sortOrder]>b[cfg.sortOrder]){return cfg.sortDir==='asc'?1:-1;}
return 0;});}
if(cfg.maxSuggestions&&cfg.maxSuggestions>0){newSuggestions=newSuggestions.slice(0,cfg.maxSuggestions);}
return newSuggestions;},_group:function(data){if(cfg.groupBy!==null){_groups={};$.each(data,function(index,value){var props=cfg.groupBy.indexOf('.')>-1?cfg.groupBy.split('.'):cfg.groupBy;var prop=value[cfg.groupBy];if(typeof(props)!='string'){prop=value;while(props.length>0){prop=prop[props.shift()];}}
if(_groups[prop]===undefined){_groups[prop]={title:prop,items:[value]};}
else{_groups[prop].items.push(value);}});}
return data;},_updateHelper:function(html){ms.helper.html(html);if(!ms.helper.is(":visible")){ms.helper.fadeIn();}},_validateSingleItem:function(value){if(cfg.vregex!==null&&cfg.vregex instanceof RegExp){return cfg.vregex.test(value);}else if(cfg.vtype!==null){switch(cfg.vtype){case'alpha':return(/^[a-zA-Z_]+$/).test(value);case'alphanum':return(/^[a-zA-Z0-9_]+$/).test(value);case'email':return(/^(\w+)([\-+.][\w]+)*@(\w[\-\w]*\.){1,5}([A-Za-z]){2,6}$/).test(value);case'url':return(/(((^https?)|(^ftp)):\/\/([\-\w]+\.)+\w{2,3}(\/[%\-\w]+(\.\w{2,})?)*(([\w\-\.\?\\\/+@&#;`~=%!]*)(\.\w{2,})?)*\/?)/i).test(value);case'ipaddress':return(/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/).test(value);}}
return true;}};var handlers={_onBlur:function(){ms.container.removeClass('ms-ctn-focus');ms.collapse();_hasFocus=false;if(ms.getRawValue()!==''&&cfg.allowFreeEntries===true){var obj={};obj[cfg.displayField]=obj[cfg.valueField]=ms.getRawValue().trim();ms.addToSelection(obj);}
self._renderSelection();if(ms.isValid()===false){ms.container.addClass(cfg.invalidCls);}
else if(ms.input.val()!==''&&cfg.allowFreeEntries===false){ms.empty();self._updateHelper('');}
$(ms).trigger('blur',[ms]);},_onComboItemMouseOver:function(e){var target=$(e.currentTarget);if(!target.hasClass('ms-res-item-disabled')){ms.combobox.children().removeClass('ms-res-item-active');target.addClass('ms-res-item-active');}},_onComboItemSelected:function(e){var target=$(e.currentTarget);if(!target.hasClass('ms-res-item-disabled')){self._selectItem($(e.currentTarget));}},_onFocus:function(){ms.input.focus();},_onInputClick:function(){if(ms.isDisabled()===false&&_hasFocus){if(cfg.toggleOnClick===true){if(cfg.expanded){ms.collapse();}else{ms.expand();}}}},_onInputFocus:function(){if(ms.isDisabled()===false&&!_hasFocus){_hasFocus=true;ms.container.addClass('ms-ctn-focus');ms.container.removeClass(cfg.invalidCls);var curLength=ms.getRawValue().length;if(cfg.expandOnFocus===true){ms.expand();}
if(_selection.length===cfg.maxSelection){self._updateHelper(cfg.maxSelectionRenderer.call(this,_selection.length));}else if(curLength<cfg.minChars){self._updateHelper(cfg.minCharsRenderer.call(this,cfg.minChars-curLength));}
self._renderSelection();$(ms).trigger('focus',[ms]);}},_onKeyDown:function(e){var active=ms.combobox.find('.ms-res-item-active:not(.ms-res-item-disabled):first'),freeInput=ms.input.val();$(ms).trigger('keydown',[ms,e]);if(e.keyCode===KEYCODES.TAB&&(cfg.useTabKey===false||(cfg.useTabKey===true&&active.length===0&&ms.input.val().length===0))){handlers._onBlur();return;}
switch(e.keyCode){case KEYCODES.BACKSPACE:if(freeInput.length===0&&ms.getSelection().length>0&&cfg.selectionPosition==='inner'){_selection.pop();self._renderSelection();$(ms).trigger('selectionchange',[ms,ms.getSelection()]);ms.input.attr('placeholder',(cfg.selectionPosition==='inner'&&ms.getValue().length>0)?'':cfg.placeholder);ms.input.focus();e.preventDefault();}
break;case KEYCODES.TAB:case KEYCODES.ESC:e.preventDefault();break;case KEYCODES.ENTER:if(freeInput!==''||cfg.expanded){e.preventDefault();}
break;case KEYCODES.COMMA:if(cfg.useCommaKey===true){e.preventDefault();}
break;case KEYCODES.CTRL:_ctrlDown=true;break;case KEYCODES.DOWNARROW:e.preventDefault();self._moveSelectedRow("down");break;case KEYCODES.UPARROW:e.preventDefault();self._moveSelectedRow("up");break;default:if(_selection.length===cfg.maxSelection){e.preventDefault();}
break;}},_onKeyUp:function(e){var freeInput=ms.getRawValue(),inputValid=$.trim(ms.input.val()).length>0&&(!cfg.maxEntryLength||$.trim(ms.input.val()).length<=cfg.maxEntryLength),selected,obj={};$(ms).trigger('keyup',[ms,e]);clearTimeout(_timer);if(e.keyCode===KEYCODES.ESC&&cfg.expanded){ms.combobox.hide();}
if((e.keyCode===KEYCODES.TAB&&cfg.useTabKey===false)||(e.keyCode>KEYCODES.ENTER&&e.keyCode<KEYCODES.SPACE)){if(e.keyCode===KEYCODES.CTRL){_ctrlDown=false;}
return;}
switch(e.keyCode){case KEYCODES.UPARROW:case KEYCODES.DOWNARROW:e.preventDefault();break;case KEYCODES.ENTER:case KEYCODES.TAB:case KEYCODES.COMMA:if(e.keyCode!==KEYCODES.COMMA||cfg.useCommaKey===true){e.preventDefault();if(cfg.expanded===true){selected=ms.combobox.find('.ms-res-item-active:not(.ms-res-item-disabled):first');if(selected.length>0){self._selectItem(selected);return;}}
if(inputValid===true&&cfg.allowFreeEntries===true){obj[cfg.displayField]=obj[cfg.valueField]=freeInput.trim();ms.addToSelection(obj);ms.collapse();ms.input.focus();}
break;}
default:if(_selection.length===cfg.maxSelection){self._updateHelper(cfg.maxSelectionRenderer.call(this,_selection.length));}
else{if(freeInput.length<cfg.minChars){self._updateHelper(cfg.minCharsRenderer.call(this,cfg.minChars-freeInput.length));if(cfg.expanded===true){ms.collapse();}}
else if(cfg.maxEntryLength&&freeInput.length>cfg.maxEntryLength){self._updateHelper(cfg.maxEntryRenderer.call(this,freeInput.length-cfg.maxEntryLength));if(cfg.expanded===true){ms.collapse();}}
else{ms.helper.hide();if(cfg.minChars<=freeInput.length){_timer=setTimeout(function(){if(cfg.expanded===true){self._processSuggestions();}else{ms.expand();}},cfg.typeDelay);}}}
break;}},_onTagTriggerClick:function(e){ms.removeFromSelection($(e.currentTarget).data('json'));},_onTriggerClick:function(){if(ms.isDisabled()===false&&!(cfg.expandOnFocus===true&&_selection.length===cfg.maxSelection)){$(ms).trigger('triggerclick',[ms]);if(cfg.expanded===true){ms.collapse();}else{var curLength=ms.getRawValue().length;if(curLength>=cfg.minChars){ms.input.focus();ms.expand();}else{self._updateHelper(cfg.minCharsRenderer.call(this,cfg.minChars-curLength));}}}},_onWindowResized:function(){self._renderSelection();}};if(element!==null){self._render(element);}};$.fn.magicSuggest=function(options){var obj=$(this);if(obj.size()===1&&obj.data('magicSuggest')){return obj.data('magicSuggest');}
obj.each(function(i){var cntr=$(this);if(cntr.data('magicSuggest')){return;}
if(this.nodeName.toLowerCase()==='select'){options.data=[];options.value=[];$.each(this.children,function(index,child){if(child.nodeName&&child.nodeName.toLowerCase()==='option'){options.data.push({id:child.value,name:child.text});if($(child).attr('selected')){options.value.push(child.value);}}});}
var def={};$.each(this.attributes,function(i,att){def[att.name]=att.name==='value'&&att.value!==''?JSON.parse(att.value):att.value;});var field=new MagicSuggest(this,$.extend([],$.fn.magicSuggest.defaults,options,def));cntr.data('magicSuggest',field);field.container.data('magicSuggest',field);});if(obj.size()===1){return obj.data('magicSuggest');}
return obj;};$.fn.magicSuggest.defaults={};})(jQuery);/**
* @preserve HTML5 Shiv prev3.7.1 | @afarkas @jdalton @jon_neal @rem | MIT/GPL2 Licensed
*/
;(function(window, document) {
/*jshint evil:true */
  /** version */
  var version = '3.7.0';

  /** Preset options */
  var options = window.html5 || {};

  /** Used to skip problem elements */
  var reSkip = /^<|^(?:button|map|select|textarea|object|iframe|option|optgroup)$/i;

  /** Not all elements can be cloned in IE **/
  var saveClones = /^(?:a|b|code|div|fieldset|h1|h2|h3|h4|h5|h6|i|label|li|ol|p|q|span|strong|style|table|tbody|td|th|tr|ul)$/i;

  /** Detect whether the browser supports default html5 styles */
  var supportsHtml5Styles;

  /** Name of the expando, to work with multiple documents or to re-shiv one document */
  var expando = '_html5shiv';

  /** The id for the the documents expando */
  var expanID = 0;

  /** Cached data for each document */
  var expandoData = {};

  /** Detect whether the browser supports unknown elements */
  var supportsUnknownElements;

  (function() {
    try {
        var a = document.createElement('a');
        a.innerHTML = '<xyz></xyz>';
        //if the hidden property is implemented we can assume, that the browser supports basic HTML5 Styles
        supportsHtml5Styles = ('hidden' in a);

        supportsUnknownElements = a.childNodes.length == 1 || (function() {
          // assign a false positive if unable to shiv
          (document.createElement)('a');
          var frag = document.createDocumentFragment();
          return (
            typeof frag.cloneNode == 'undefined' ||
            typeof frag.createDocumentFragment == 'undefined' ||
            typeof frag.createElement == 'undefined'
          );
        }());
    } catch(e) {
      // assign a false positive if detection fails => unable to shiv
      supportsHtml5Styles = true;
      supportsUnknownElements = true;
    }

  }());

  /*--------------------------------------------------------------------------*/

  /**
   * Creates a style sheet with the given CSS text and adds it to the document.
   * @private
   * @param {Document} ownerDocument The document.
   * @param {String} cssText The CSS text.
   * @returns {StyleSheet} The style element.
   */
  function addStyleSheet(ownerDocument, cssText) {
    var p = ownerDocument.createElement('p'),
        parent = ownerDocument.getElementsByTagName('head')[0] || ownerDocument.documentElement;

    p.innerHTML = 'x<style>' + cssText + '</style>';
    return parent.insertBefore(p.lastChild, parent.firstChild);
  }

  /**
   * Returns the value of `html5.elements` as an array.
   * @private
   * @returns {Array} An array of shived element node names.
   */
  function getElements() {
    var elements = html5.elements;
    return typeof elements == 'string' ? elements.split(' ') : elements;
  }

    /**
   * Returns the data associated to the given document
   * @private
   * @param {Document} ownerDocument The document.
   * @returns {Object} An object of data.
   */
  function getExpandoData(ownerDocument) {
    var data = expandoData[ownerDocument[expando]];
    if (!data) {
        data = {};
        expanID++;
        ownerDocument[expando] = expanID;
        expandoData[expanID] = data;
    }
    return data;
  }

  /**
   * returns a shived element for the given nodeName and document
   * @memberOf html5
   * @param {String} nodeName name of the element
   * @param {Document} ownerDocument The context document.
   * @returns {Object} The shived element.
   */
  function createElement(nodeName, ownerDocument, data){
    if (!ownerDocument) {
        ownerDocument = document;
    }
    if(supportsUnknownElements){
        return ownerDocument.createElement(nodeName);
    }
    if (!data) {
        data = getExpandoData(ownerDocument);
    }
    var node;

    if (data.cache[nodeName]) {
        node = data.cache[nodeName].cloneNode();
    } else if (saveClones.test(nodeName)) {
        node = (data.cache[nodeName] = data.createElem(nodeName)).cloneNode();
    } else {
        node = data.createElem(nodeName);
    }

    // Avoid adding some elements to fragments in IE < 9 because
    // * Attributes like `name` or `type` cannot be set/changed once an element
    //   is inserted into a document/fragment
    // * Link elements with `src` attributes that are inaccessible, as with
    //   a 403 response, will cause the tab/window to crash
    // * Script elements appended to fragments will execute when their `src`
    //   or `text` property is set
    return node.canHaveChildren && !reSkip.test(nodeName) && !node.tagUrn ? data.frag.appendChild(node) : node;
  }

  /**
   * returns a shived DocumentFragment for the given document
   * @memberOf html5
   * @param {Document} ownerDocument The context document.
   * @returns {Object} The shived DocumentFragment.
   */
  function createDocumentFragment(ownerDocument, data){
    if (!ownerDocument) {
        ownerDocument = document;
    }
    if(supportsUnknownElements){
        return ownerDocument.createDocumentFragment();
    }
    data = data || getExpandoData(ownerDocument);
    var clone = data.frag.cloneNode(),
        i = 0,
        elems = getElements(),
        l = elems.length;
    for(;i<l;i++){
        clone.createElement(elems[i]);
    }
    return clone;
  }

  /**
   * Shivs the `createElement` and `createDocumentFragment` methods of the document.
   * @private
   * @param {Document|DocumentFragment} ownerDocument The document.
   * @param {Object} data of the document.
   */
  function shivMethods(ownerDocument, data) {
    if (!data.cache) {
        data.cache = {};
        data.createElem = ownerDocument.createElement;
        data.createFrag = ownerDocument.createDocumentFragment;
        data.frag = data.createFrag();
    }


    ownerDocument.createElement = function(nodeName) {
      //abort shiv
      if (!html5.shivMethods) {
          return data.createElem(nodeName);
      }
      return createElement(nodeName, ownerDocument, data);
    };

    ownerDocument.createDocumentFragment = Function('h,f', 'return function(){' +
      'var n=f.cloneNode(),c=n.createElement;' +
      'h.shivMethods&&(' +
        // unroll the `createElement` calls
        getElements().join().replace(/[\w\-:]+/g, function(nodeName) {
          data.createElem(nodeName);
          data.frag.createElement(nodeName);
          return 'c("' + nodeName + '")';
        }) +
      ');return n}'
    )(html5, data.frag);
  }

  /*--------------------------------------------------------------------------*/

  /**
   * Shivs the given document.
   * @memberOf html5
   * @param {Document} ownerDocument The document to shiv.
   * @returns {Document} The shived document.
   */
  function shivDocument(ownerDocument) {
    if (!ownerDocument) {
        ownerDocument = document;
    }
    var data = getExpandoData(ownerDocument);

    if (html5.shivCSS && !supportsHtml5Styles && !data.hasCSS) {
      data.hasCSS = !!addStyleSheet(ownerDocument,
        // corrects block display not defined in IE6/7/8/9
        'article,aside,dialog,figcaption,figure,footer,header,hgroup,main,nav,section{display:block}' +
        // adds styling not present in IE6/7/8/9
        'mark{background:#FF0;color:#000}' +
        // hides non-rendered elements
        'template{display:none}'
      );
    }
    if (!supportsUnknownElements) {
      shivMethods(ownerDocument, data);
    }
    return ownerDocument;
  }

  /*--------------------------------------------------------------------------*/

  /**
   * The `html5` object is exposed so that more elements can be shived and
   * existing shiving can be detected on iframes.
   * @type Object
   * @example
   *
   * // options can be changed before the script is included
   * html5 = { 'elements': 'mark section', 'shivCSS': false, 'shivMethods': false };
   */
  var html5 = {

    /**
     * An array or space separated string of node names of the elements to shiv.
     * @memberOf html5
     * @type Array|String
     */
    'elements': options.elements || 'abbr article aside audio bdi canvas data datalist details dialog figcaption figure footer header hgroup main mark meter nav output progress section summary template time video',

    /**
     * current version of html5shiv
     */
    'version': version,

    /**
     * A flag to indicate that the HTML5 style sheet should be inserted.
     * @memberOf html5
     * @type Boolean
     */
    'shivCSS': (options.shivCSS !== false),

    /**
     * Is equal to true if a browser supports creating unknown/HTML5 elements
     * @memberOf html5
     * @type boolean
     */
    'supportsUnknownElements': supportsUnknownElements,

    /**
     * A flag to indicate that the document's `createElement` and `createDocumentFragment`
     * methods should be overwritten.
     * @memberOf html5
     * @type Boolean
     */
    'shivMethods': (options.shivMethods !== false),

    /**
     * A string to describe the type of `html5` object ("default" or "default print").
     * @memberOf html5
     * @type String
     */
    'type': 'default',

    // shivs the document according to the specified `html5` object options
    'shivDocument': shivDocument,

    //creates a shived element
    createElement: createElement,

    //creates a shived documentFragment
    createDocumentFragment: createDocumentFragment
  };

  /*--------------------------------------------------------------------------*/

  // expose html5
  window.html5 = html5;

  // shiv the document
  shivDocument(document);

  /*------------------------------- Print Shiv -------------------------------*/

  /** Used to filter media types */
  var reMedia = /^$|\b(?:all|print)\b/;

  /** Used to namespace printable elements */
  var shivNamespace = 'html5shiv';

  /** Detect whether the browser supports shivable style sheets */
  var supportsShivableSheets = !supportsUnknownElements && (function() {
    // assign a false negative if unable to shiv
    var docEl = document.documentElement;
    return !(
      typeof document.namespaces == 'undefined' ||
      typeof document.parentWindow == 'undefined' ||
      typeof docEl.applyElement == 'undefined' ||
      typeof docEl.removeNode == 'undefined' ||
      typeof window.attachEvent == 'undefined'
    );
  }());

  /*--------------------------------------------------------------------------*/

  /**
   * Wraps all HTML5 elements in the given document with printable elements.
   * (eg. the "header" element is wrapped with the "html5shiv:header" element)
   * @private
   * @param {Document} ownerDocument The document.
   * @returns {Array} An array wrappers added.
   */
  function addWrappers(ownerDocument) {
    var node,
        nodes = ownerDocument.getElementsByTagName('*'),
        index = nodes.length,
        reElements = RegExp('^(?:' + getElements().join('|') + ')$', 'i'),
        result = [];

    while (index--) {
      node = nodes[index];
      if (reElements.test(node.nodeName)) {
        result.push(node.applyElement(createWrapper(node)));
      }
    }
    return result;
  }

  /**
   * Creates a printable wrapper for the given element.
   * @private
   * @param {Element} element The element.
   * @returns {Element} The wrapper.
   */
  function createWrapper(element) {
    var node,
        nodes = element.attributes,
        index = nodes.length,
        wrapper = element.ownerDocument.createElement(shivNamespace + ':' + element.nodeName);

    // copy element attributes to the wrapper
    while (index--) {
      node = nodes[index];
      node.specified && wrapper.setAttribute(node.nodeName, node.nodeValue);
    }
    // copy element styles to the wrapper
    wrapper.style.cssText = element.style.cssText;
    return wrapper;
  }

  /**
   * Shivs the given CSS text.
   * (eg. header{} becomes html5shiv\:header{})
   * @private
   * @param {String} cssText The CSS text to shiv.
   * @returns {String} The shived CSS text.
   */
  function shivCssText(cssText) {
    var pair,
        parts = cssText.split('{'),
        index = parts.length,
        reElements = RegExp('(^|[\\s,>+~])(' + getElements().join('|') + ')(?=[[\\s,>+~#.:]|$)', 'gi'),
        replacement = '$1' + shivNamespace + '\\:$2';

    while (index--) {
      pair = parts[index] = parts[index].split('}');
      pair[pair.length - 1] = pair[pair.length - 1].replace(reElements, replacement);
      parts[index] = pair.join('}');
    }
    return parts.join('{');
  }

  /**
   * Removes the given wrappers, leaving the original elements.
   * @private
   * @params {Array} wrappers An array of printable wrappers.
   */
  function removeWrappers(wrappers) {
    var index = wrappers.length;
    while (index--) {
      wrappers[index].removeNode();
    }
  }

  /*--------------------------------------------------------------------------*/

  /**
   * Shivs the given document for print.
   * @memberOf html5
   * @param {Document} ownerDocument The document to shiv.
   * @returns {Document} The shived document.
   */
  function shivPrint(ownerDocument) {
    var shivedSheet,
        wrappers,
        data = getExpandoData(ownerDocument),
        namespaces = ownerDocument.namespaces,
        ownerWindow = ownerDocument.parentWindow;

    if (!supportsShivableSheets || ownerDocument.printShived) {
      return ownerDocument;
    }
    if (typeof namespaces[shivNamespace] == 'undefined') {
      namespaces.add(shivNamespace);
    }

    function removeSheet() {
      clearTimeout(data._removeSheetTimer);
      if (shivedSheet) {
          shivedSheet.removeNode(true);
      }
      shivedSheet= null;
    }

    ownerWindow.attachEvent('onbeforeprint', function() {

      removeSheet();

      var imports,
          length,
          sheet,
          collection = ownerDocument.styleSheets,
          cssText = [],
          index = collection.length,
          sheets = Array(index);

      // convert styleSheets collection to an array
      while (index--) {
        sheets[index] = collection[index];
      }
      // concat all style sheet CSS text
      while ((sheet = sheets.pop())) {
        // IE does not enforce a same origin policy for external style sheets...
        // but has trouble with some dynamically created stylesheets
        if (!sheet.disabled && reMedia.test(sheet.media)) {

          try {
            imports = sheet.imports;
            length = imports.length;
          } catch(er){
            length = 0;
          }

          for (index = 0; index < length; index++) {
            sheets.push(imports[index]);
          }

          try {
            cssText.push(sheet.cssText);
          } catch(er){}
        }
      }

      // wrap all HTML5 elements with printable elements and add the shived style sheet
      cssText = shivCssText(cssText.reverse().join(''));
      wrappers = addWrappers(ownerDocument);
      shivedSheet = addStyleSheet(ownerDocument, cssText);

    });

    ownerWindow.attachEvent('onafterprint', function() {
      // remove wrappers, leaving the original elements, and remove the shived style sheet
      removeWrappers(wrappers);
      clearTimeout(data._removeSheetTimer);
      data._removeSheetTimer = setTimeout(removeSheet, 500);
    });

    ownerDocument.printShived = true;
    return ownerDocument;
  }

  /*--------------------------------------------------------------------------*/

  // expose API
  html5.type += ' print';
  html5.shivPrint = shivPrint;

  // shiv for print
  shivPrint(document);

}(this, document));
/*
 * jQuery scrollintoview() plugin and :scrollable selector filter
 *
 * Version 1.8 (14 Jul 2011)
 * Requires jQuery 1.4 or newer
 *
 * Copyright (c) 2011 Robert Koritnik
 * Licensed under the terms of the MIT license
 * http://www.opensource.org/licenses/mit-license.php
 */
(function(f){var c={vertical:{x:false,y:true},horizontal:{x:true,y:false},both:{x:true,y:true},x:{x:true,y:false},y:{x:false,y:true}};var b={duration:"fast",direction:"both"};var e=/^(?:html)$/i;var g=function(k,j){j=j||(document.defaultView&&document.defaultView.getComputedStyle?document.defaultView.getComputedStyle(k,null):k.currentStyle);var i=document.defaultView&&document.defaultView.getComputedStyle?true:false;var h={top:(parseFloat(i?j.borderTopWidth:f.css(k,"borderTopWidth"))||0),left:(parseFloat(i?j.borderLeftWidth:f.css(k,"borderLeftWidth"))||0),bottom:(parseFloat(i?j.borderBottomWidth:f.css(k,"borderBottomWidth"))||0),right:(parseFloat(i?j.borderRightWidth:f.css(k,"borderRightWidth"))||0)};return{top:h.top,left:h.left,bottom:h.bottom,right:h.right,vertical:h.top+h.bottom,horizontal:h.left+h.right}};var d=function(h){var j=f(window);var i=e.test(h[0].nodeName);return{border:i?{top:0,left:0,bottom:0,right:0}:g(h[0]),scroll:{top:(i?j:h).scrollTop(),left:(i?j:h).scrollLeft()},scrollbar:{right:i?0:h.innerWidth()-h[0].clientWidth,bottom:i?0:h.innerHeight()-h[0].clientHeight},rect:(function(){var k=h[0].getBoundingClientRect();return{top:i?0:k.top,left:i?0:k.left,bottom:i?h[0].clientHeight:k.bottom,right:i?h[0].clientWidth:k.right}})()}};f.fn.extend({scrollintoview:function(j){j=f.extend({},b,j);j.direction=c[typeof(j.direction)==="string"&&j.direction.toLowerCase()]||c.both;var n="";if(j.direction.x===true){n="horizontal"}if(j.direction.y===true){n=n?"both":"vertical"}var l=this.eq(0);var i=l.closest(":scrollable("+n+")");if(i.length>0){i=i.eq(0);var m={e:d(l),s:d(i)};var h={top:m.e.rect.top-(m.s.rect.top+m.s.border.top),bottom:m.s.rect.bottom-m.s.border.bottom-m.s.scrollbar.bottom-m.e.rect.bottom,left:m.e.rect.left-(m.s.rect.left+m.s.border.left),right:m.s.rect.right-m.s.border.right-m.s.scrollbar.right-m.e.rect.right};var k={};if(j.direction.y===true){if(h.top<0){k.scrollTop=m.s.scroll.top+h.top}else{if(h.top>0&&h.bottom<0){k.scrollTop=m.s.scroll.top+Math.min(h.top,-h.bottom)}}}if(j.direction.x===true){if(h.left<0){k.scrollLeft=m.s.scroll.left+h.left}else{if(h.left>0&&h.right<0){k.scrollLeft=m.s.scroll.left+Math.min(h.left,-h.right)}}}if(!f.isEmptyObject(k)){if(e.test(i[0].nodeName)){i=f("html,body")}i.animate(k,j.duration).eq(0).queue(function(o){f.isFunction(j.complete)&&j.complete.call(i[0]);o()})}else{f.isFunction(j.complete)&&j.complete.call(i[0])}}return this}});var a={auto:true,scroll:true,visible:false,hidden:false};f.extend(f.expr[":"],{scrollable:function(k,i,n,h){var m=c[typeof(n[3])==="string"&&n[3].toLowerCase()]||c.both;var l=(document.defaultView&&document.defaultView.getComputedStyle?document.defaultView.getComputedStyle(k,null):k.currentStyle);var o={x:a[l.overflowX.toLowerCase()]||false,y:a[l.overflowY.toLowerCase()]||false,isRoot:e.test(k.nodeName)};if(!o.x&&!o.y&&!o.isRoot){return false}var j={height:{scroll:k.scrollHeight,client:k.clientHeight},width:{scroll:k.scrollWidth,client:k.clientWidth},scrollableX:function(){return(o.x||o.isRoot)&&this.width.scroll>this.width.client},scrollableY:function(){return(o.y||o.isRoot)&&this.height.scroll>this.height.client}};return m.y&&j.scrollableY()||m.x&&j.scrollableX()}})})(jQuery);
/*--------------------------------------------------------------------
 * JQuery Plugin: "EqualHeights" & "EqualWidths"
 * by:	Scott Jehl, Todd Parker, Maggie Costello Wachs (http://www.filamentgroup.com)
 *
 * Copyright (c) 2007 Filament Group
 * Licensed under GPL (http://www.opensource.org/licenses/gpl-license.php)
 *
 * Description: Compares the heights or widths of the top-level children of a provided element
 		and sets their min-height to the tallest height (or width to widest width). Sets in em units
 		by default if pxToEm() method is available.
 * Dependencies: jQuery library, pxToEm method	(article: http://www.filamentgroup.com/lab/retaining_scalable_interfaces_with_pixel_to_em_conversion/)
 * Usage Example: $(element).equalHeights();
   						      Optional: to set min-height in px, pass a true argument: $(element).equalHeights(true);
 * Version: 2.0, 07.24.2008
 * Changelog:
 *  08.02.2007 initial Version 1.0
 *  07.24.2008 v 2.0 - added support for widths
--------------------------------------------------------------------*/

$.fn.equalHeights = function(px) {
	$(this).each(function(){
		var currentTallest = 0;
		$(this).children().each(function(i){
			if ($(this).height() > currentTallest) { currentTallest = $(this).height(); }
		});
    if (!px && Number.prototype.pxToEm) currentTallest = currentTallest.pxToEm(); //use ems unless px is specified
		// for ie6, set height since min-height isn't supported
		$(this).children().css({'min-height': currentTallest});
	});
	return this;
};

// just in case you need it...
$.fn.equalWidths = function(px) {
	$(this).each(function(){
		var currentWidest = 0;
		$(this).children().each(function(i){
				if($(this).width() > currentWidest) { currentWidest = $(this).width(); }
		});
		if(!px && Number.prototype.pxToEm) currentWidest = currentWidest.pxToEm(); //use ems unless px is specified
		// for ie6, set width since min-width isn't supported
		if ($.browser.msie && $.browser.version == 6.0) { $(this).children().css({'width': currentWidest}); }
		$(this).children().css({'min-width': currentWidest});
	});
	return this;
};var literatum = {};literatum.events = (function() {
    var instance = {};
    var listenersMap = {};

    instance.register = function(eventName, callback) {
        var listeners = listenersMap[eventName];
        if (!listeners) {
            listenersMap[eventName] = listeners = [];
        }
        listeners.push(callback);
    };

    instance.deregisterAll = function() {
        listenersMap = {};
    };

    instance.notify = function(eventName, data) {
        //console.log("Event '" + eventName + "' triggered.")
        var listeners = listenersMap[eventName];
        if (listeners) {
            listeners.forEach(function(listener) {
                listener(data);
            });
        }
    };

    return instance;
}());literatum.Widget = function(widgetDef, element) {
    this.state = -1;
    this.$element = $(element);
    this.widgetDef = widgetDef;
    if (widgetDef) {
        this.registerListeners();
    }
};

literatum.Widget.prototype.get = function() {
    return this.$element;
};

literatum.Widget.prototype.resize = function(e) {};

literatum.Widget.prototype.render = function(model, params, callback, renderer) {
    if (this.widgetDef.action) {
        return literatum.widgets.getWidget(this, model, params, callback, renderer);
    }
};

literatum.Widget.prototype.lostFocus = function() {
    // nothing
};

literatum.Widget.prototype.updateView = function(view, model) {
    var $this = this.get();
    var $html = $(view.trim());
    if ($html.length > 0) {
        $this.replaceWith($html);
        this.$element = $("*[widget-id='" + $html.attr('widget-id') + "']");
        if (this.$element.length === 0) {
            this.$element = $("#" + $html.attr('id'));
        }
        if (this.$element.length === 0) {
            this.$element = $("*[data-widget-id='" + $html.attr('data-widget-id') + "']");
        }
    } else {
        this.$element.html("");
    }
    this.registerListeners();
    this.triggerInfoHandlers(this, model);
};

literatum.Widget.prototype.triggerInfoHandlers = function(widget, model) {
    var infoHandlers = widget.widgetDef.infoHandlers;
    if (model && model.attributes && infoHandlers) {
        Object.keys(model.attributes).forEach(function(key) {
            var infoHandler = infoHandlers[key];
            if (infoHandler) {
                infoHandler(model.attributes[key], widget, model);
            }
        });
    }
};

literatum.Widget.prototype.registerListeners = function() {
    try {
        this.unbind();
    } catch(e) {
        console.log(e);
    }
    try {
        //console.log("Binding events to candidate elements");
        this.bind();
    } catch (e) {
        console.log("Failed to bind events, rolling back...");
        this.unbind();
    }
};

literatum.Widget.prototype.update = function(model) {
    var result;
    console.log("Updating " + this.widgetDef.id + "...");
    if (!literatum.utils.hasErrors(model.attributes)) {
        result = this.render(model, {});
        console.log("Updating " + this.widgetDef.id + "... Content");
    } else {
        this.triggerInfoHandlers(this, model);
        this.loaded();
        console.log("Updating " + this.widgetDef.id + "... Info");
        result = $.Deferred().resolve();
    }
    return result;
};

literatum.Widget.prototype.bind = function() {
    var thisWidget = this;

    if (!thisWidget.widgetDef.binders)
        return;

    this.find("*[data-bind]").each(function() {
        var binderName = $(this).data("bind");
        var binder = thisWidget.widgetDef.binders[binderName];
        if (binder) {
            $(this).on('click', function (e) {
                //literatum.events.notify('user-action');
                binder.call(this, e, thisWidget);
            });
        }
    });

    this.find("*[data-bind-change]").each(function() {
        var binderName = $(this).data("bind");
        var binder = thisWidget.widgetDef.binders[binderName];
        if (binder) {
            $(this).on('change', function (e) {
                literatum.events.notify('user-action');
                binder.call(this, e, thisWidget);
            });
        }
    });
};

literatum.Widget.prototype.unbind = function() {
    this.find("*[data-bind]").each(function() {
        $(this).off();
    });
};

literatum.Widget.prototype.find = function(selector) {
    return this.get().find(selector);
};

literatum.Widget.prototype.collectForms = function() {
    var $elements = this.find("form");
    var forms = {};
    $elements.each(function() {
        var $this = $(this);
        var name = $(this).attr('name');
        if (name) {
            var form = {};
            forms[name] = form;
            $this.find("input[type!='checkbox'], textarea").each(function() {
                form[$(this).attr('name')] = $(this).val();
            });

            $this.find("input[type='checkbox']").each(function() {
                if ($(this).is(":checked")) {
                    form[$(this).attr('name')] = $(this).val();
                }
            });

            $this.find("select").each(function() {
                form[$(this).attr('name')] =  $(this).find('option:selected').val();
            });
        }
    });
    this.find("*[data-form]").each(function() {
        var name = $(this).data('form');
        if (name) {
            var form = {};
            forms[name] = form;
            $(this).find("*[data-field]").each(function() {
                var $this = $(this);
                var value = $this.data('value');
                if (!value) {
                    value = $this.text().trim();
                }
                form[$this.data('field')] = value;
            });
        }
    });
    return forms;
};

literatum.Widget.prototype.updateForm = function(formName, sourceForm, merge) {
    var forms = this.find("form[name='" + formName + "']");
    if (forms) {
        var form = forms[0];
        if (form) {
            var $form = $(form);
            $form.find("input").each(function() {
                var $this = $(this);
                if ($this.attr("type") == 'submit') {
                    return;
                }

                var value = sourceForm[$this.attr('name')];

                if ($this.attr("type") == 'checkbox') {
                    $this.prop('checked', true);
                }

                if (merge && !value)
                    return;

                $this.val(value);
            });

            var $select = $form.find("select");
            $select.each(function() {
                var $this = $(this);
                var value = sourceForm[$this.attr('name')];

                if (merge && !value)
                    return;

                if (value) {
                    $this.closest(".input-group").show();
                }

                $this.find('option').prop('selected', false);
                $this.find("option[value='" + value + "']").prop('selected',true);
            });
        }
    }
};

literatum.Widget.prototype.initialize = function() {
    this.registerListeners();
};

literatum.Widget.prototype.loading = function() {
    $("body").addClass("widget-loading");
};

literatum.Widget.prototype.error = function() {
    //$("body").addClass("widget-error");
};

literatum.Widget.prototype.loaded = function() {
    //$("body").removeClass("widget-loading");
};

literatum.Widget.prototype.reset = function() {
    this.getNotifications().forEach(function(item) {
        item.reset();
    });
};

literatum.Widget.prototype.getNotifications = function() {
    var result = [];
    this.find("*[data-notification]").each(function() {
        if (this.literatumNotification) {
            result.push(this.literatumNotification);
        }
    });
    return result;
};

literatum.Widget.prototype.getNotification = function(name) {
    if (!this.widgetDef.notifications)
        return null;

    var thisWidget = this;

    var notification = null;

    this.find("*[data-notification='" + name + "']").each(function() {
        var notificationType = thisWidget.widgetDef.notifications[name];
        if (!this.literatumNotification) {
            this.literatumNotification = new notificationType(this);
        }
        notification = this.literatumNotification;
    });

    return notification;
};

literatum.Widget.prototype.register = function(service) {
    var thisWidget = this;
    commerce.cart.register(service, function(model) {
        return thisWidget.update(model);
    });
};
literatum.widgets = (function() {
    var instance = {};
    var widgetDefs = [];
    var widgets = [];


    function render(template, model) {
        Object.keys(model).forEach(function(key) {
            var re = new RegExp('\\{{' + key + '\\}}', 'g');
            template = template.replace(re, model[key]);
        });
        template = template.replace(/{{.+?}}/g,'');
        return template;
    }

    $(window).on('resize', function(e) {
        widgets.forEach(function(widget) {
            widget.resize(e);
        });
    });

    instance.render = function(widget, model, params, callback, renderer) { // FIXME: clean me
        return widget.render(model, params, callback, renderer);
    };

    instance.getWidget = function(widget, model, params, callback, renderer) {
        return widget.get().pbAjax({
            type: 'GET',
            url: widget.widgetDef.action,
            dataType: 'html',
            data: params,
            async: true,
            success: function(html) {
                var result = render(html, model);
                if (renderer) {
                    renderer(html, model);
                } else {
                    widget.updateView(result, model);
                }
                //widget.get().fadeIn(400).fadeOut(400).fadeIn(400).fadeOut(400).fadeIn(400); // For debugging
                widget.loaded(); // This is not needed, confirm and remove
                if (callback) {
                    callback();
                }
                literatum.events.notify('widget-rendered');
            },
            error: function(data) {
                widget.error();
            }
        });
    };

    instance.get = function(id) {
        var result = [];
        widgets.forEach(function(item){
            if (item.widgetDef.id == id)
                result.push(item);
        });
        return result;
    };
    //instance.find = function(widgetId) {
    //    var $result = $("*[widget-def='" + widgetId +"']");
    //    if ($result.length > 0) {
    //        return $result;
    //    }
    //    return $("." + widgetId);
    //};
    instance.all = function() {
        return widgets.slice(0);
    };

    instance.collapse = function() {
        widgets.forEach(function(widget) {
            widget.hide();
        });
    };

    instance.register = function(widgetDef) {
        widgetDefs.push(widgetDef);
    };

    instance.initialize = function() {
        widgetDefs.forEach(function(WidgetDef) {
            WidgetDef.find().each(function() {
                var instance = Object.create(WidgetDef.prototype);
                WidgetDef.call(instance, WidgetDef, this);
                widgets.push(instance);
            });
        });
    };

    return instance;
}());

$(document).ready(function() {
    literatum.widgets.initialize();
});

console.log("Widgets initialized!");literatum.Loading = function(deferred) {
    this.start();
    this.deferred = deferred;
    $.when(deferred).then(this.done);
};

literatum.Loading.prototype.start = function() {};

literatum.Loading.prototype.done = function() {};literatum.FullPageLoading = function() {
    this.message = '';
};

literatum.FullPageLoading.prototype = new literatum.Loading();

literatum.FullPageLoading.prototype.start = function() {
    $("body").append('<div class="loading-overlay"><div class="loading-container"><div class="loading"></div><div class="loading-message">' + this.message + '</div></div></div></div>');
    $(".loading-overlay").fadeIn(200);
    return this;
};

literatum.FullPageLoading.prototype.done = function() {
    var $overlay = $(".loading-overlay");
    $overlay.fadeOut(200);
    $overlay.remove();
    literatum.widgets.initialize();
};

literatum.FullPageLoading.prototype.setMessage = function(message) {
    this.message = message;
};
(function($,window,document,undefined){var ModalDialog={init:function(){this.bindUIActions();},bindUIActions:function(){$(document).on("click","a[data-link=modal], button[data-link=modal]",function(e){ModalDialog.constructModal(e,$(this));$(".customModal").closest('.modal-dialog').focus();});},loadAjaxContent:function($target,$modal){var self=this;if($target.is("form")){$.ajax({url:$target.attr("action"),data:$target.serialize(),async:true,method:$target.attr("method"),success:function(html){self.onDataLoaded($modal,html);},error:function(){self.onErrorLoadingData($modal);}});}},onDataLoaded:function($modal,html){if(html){var $markup=$.parseHTML(html.trim());this.appendContentToModal($modal,$markup);}},onErrorLoadingData:function($modal){this.appendContentToModal($modal,$("<div>Error loading data</div>"));},appendContentToModal:function($modal,$content){$modal.append($content);},constructModal:function(e,$link){var id=$link.attr('data-target'),position=$link.attr('data-target-position'),lastFocus=$link,index=0;var pageY,link;var fixedPane='';if(document.getElementById("fixedPane")!==null){pageY=e.pageY-$("#fixedPane").height();link=$(e.target);fixedPane=$(link).parents("#fixedPane").css("position");}
e.preventDefault();e.stopPropagation();if($(".modal-dialog-mask "+id).length<1){$(".modal-dialog").remove();var dataClass=$link.attr('data-class');var $titlebar=$("<div/>").addClass('title-bar').html($link.attr('data-title'));var $close=$("<div/>").addClass('closeBtn').html("X").attr("role","button").attr("aria-label","close window").attr("tabindex",0).click(onRemove);var complianceId=id.substring(1)+"_compliance";var $modal=$("<div/>").addClass("modal-dialog").addClass(dataClass).attr("role","alertdialog").attr("aria-describedby",complianceId).attr("tabindex",-1).append($titlebar).append($close);var loadDataViaAjax=$link.attr("data-load-form-content");var $content;var $target=$(id);if(loadDataViaAjax==="true"){this.loadAjaxContent($target,$modal);}else{$content=$target.clone();}
if($content!=="undefined"){this.appendContentToModal($modal,$content);}
var $mask=$("<div/>").addClass('modal-dialog-mask').data('modal',$modal).click(onRemove).appendTo(document.body);if(typeof $content!=="undefined"){$content.find(".cancelLink, .caption a").click(onRemove);$content.find(".caption").attr("id",complianceId);}
$modal.data('mask',$mask).appendTo(document.body);if(position!=null){$modal.position({my:position,at:position,of:"#"+$(this).attr('id')});}else{if($modal.find(".coverImg")!=null&&$modal.find(".coverImg").attr("imgSrc")!=null&&$modal.find("img.largeCoverImg").length==0){var imgsrc=$modal.find(".coverImg").attr("imgSrc");var $img=$("<img class='largeCoverImg' src='"+imgsrc+"'/>");if($modal.find(".coverImg a").length>0){$modal.find(".coverImg a").append($img);}else{$modal.find(".coverImg").append($img);}}
if($modal.find("img").length>0){$modal.find("img").load(function(){$modal.position({my:"center",at:"center",of:window});var coverImageContainer=$('.coverImgContainer');if(coverImageContainer.length>0){var height=coverImageContainer.height();var dilogHeight=$(".modal-dialog").height();$(".modal-dialog").css("height",dilogHeight+"px");if($('.modal-dialog').height()>window.innerHeight-50){var modalTop=parseFloat($(".modal-dialog").css('top').replace(/[^-\d\.]/g,''))+180;$('.modal-dialog').css('top',modalTop+"px");}
$(".modal-dialog").focus();}});}
else{$modal.position({my:"center",at:"center",of:window});}}
if($link.attr('data-focusable')!=undefined){$('#'+$link.attr('data-focusable')).focus();}
else{if(dataClass)
var focusableElements=$('.modal-dialog.'+dataClass).find(':focusable');else
var focusableElements=$('.modal-dialog').find(':focusable');$modal.find("img").load(function(){focusableElements[0].focus();});}
var x=window.scrollX,y=window.scrollY;if($.fn.bgiframe){$mask.bgiframe();if(typeof $content!=="undefined"){$content.bgiframe();}}}else{var $modalDialogMask=$(".modal-dialog-mask");$modalDialogMask.show();$(".modal-dialog").show();$modalDialogMask.position({my:"center",at:"center",of:window});}
$('body').css("overflow","auto");$(".modal-dialog").on("keydown",function(e){var focusableElements=$(this).find(':focusable');if($(".modal-dialog").is(":visible"))
{if(($(".closeBtn").is(":focus"))&&(((e.keyCode||e.which)==$.ui.keyCode.ENTER)))
{e.preventDefault();onRemove(e);}
if(((e.keyCode||e.which)==$.ui.keyCode.ESCAPE))
{onRemove(e);}
if(e.shiftKey&&(e.keyCode||e.which)==$.ui.keyCode.TAB)
{prevTab();}
else if((e.keyCode||e.which)==$.ui.keyCode.TAB)
{nextTab();}}
function prevTab(){if(index==0)
{e.preventDefault();focusableElements[focusableElements.length-1].focus();index=focusableElements.length-1;}else{index--;e.preventDefault();focusableElements[index].focus();}}
function nextTab(){if(index==focusableElements.length-1){e.preventDefault();focusableElements[0].focus();index=0;}else{index++;e.preventDefault();focusableElements[index].focus();}}});function onRemove(e){$(".modal-dialog-mask").remove();$(".modal-dialog").remove();$('body').css("overflow","auto");if(fixedPane==="fixed"){window.scrollTo(0,pageY);}else{lastFocus.focus();}}}};$(document).ready(ModalDialog.init());if(window.PB&&window.PB.$){window.PB.$(document.documentElement).on("ScopeModified ScopeLoaded",ModalDialog.init());}})(jQuery,window,document);
function initWidgetView(properties){$('.relatedArt input[type=checkbox]').hide();if(properties.displayType=='full'){var itemIndex=properties.numOfItems-1;$('.relatedArt .result_item').addClass('big');$('.relatedArt .notRecommendedInfo').addClass('hide');}
else if(properties.displayType=='simple'){$('.relatedArt .result_item').addClass('small');$('.relatedArt .accessIcon').addClass('hide');$('.relatedArt .notRecommendedInfo').addClass('hide');$('.relatedArt .specialIcons').addClass('hide');if(properties.showPublicationYear!='true'){$('.relatedArt .publicationYear').addClass('hide');}
if(properties.showAuthorShort!='true'){$('.relatedArt .author').addClass('hide');}
else if(properties.showAuthorShort=='true'){$('.relatedArt article').each(function(){shortenAuthorEntry(this)});}
if(properties.showPublicationShort!='true'){$('.relatedArt .publicationInfo').addClass('hide');}}
var numberOfMaxShownItems=properties.numOfItems<properties.numOfItemsCollapsed?8:properties.numOfItems;var maxItemIndex=numberOfMaxShownItems;if(properties.numOfItemsCollapsed<numberOfMaxShownItems){var itemIndex=properties.numOfItemsCollapsed-1;$('#showMore').on('click',{itemStartIndexParam:itemIndex},showMoreHandler);}}
function shortenAuthorEntry(rootNode){var authorEntries=$(rootNode).find('.entryAuthor');if(authorEntries!=undefined){if($(authorEntries).size()>2){$(rootNode).find('.completeAuthorEntry:gt(0)').addClass('hide');$(rootNode).find('.author').append('<label> et. al.</label>');}}}
function showLessHandler(event){$('#showMore a').text('more');$('#showMore div').removeClass('arrow-up');$('#showMore div').addClass('arrow-down');$('#showMore').unbind('click');$('.relatedArt .relatedItem:gt('+event.data.itemStartIndexParam+')').slideToggle('slow');$('#showMore').on('click',{itemStartIndexParam:event.data.itemStartIndexParam},showMoreHandler);}
function showMoreHandler(event){$('#showMore a').text('collapse');$('#showMore div').removeClass('arrow-down');$('#showMore div').addClass('arrow-up');$('#showMore').unbind('click');$('.relatedArt .relatedItem:gt('+event.data.itemStartIndexParam+')').slideToggle('slow');$('#showMore').on('click',{itemStartIndexParam:event.data.itemStartIndexParam},showLessHandler);};
(function($){var desktopWidth=992;$(document).ready(function(){if($(window).width()>desktopWidth){$('.fancy-tooltip').tooltip({show:{effect:"fadeIn",delay:250}});}
$('.citationSearchBoxContainer input').each(function(index,input){$(input).attr('disabled','disabled')});$('.quickSearchForm').submit(function(e){var submit;($('.quickSearchForm input[type=search]')).each(function(index,input){if($(input).attr('disabled')!='disabled'&&$(input).val()!=''){submit=true;return false;}});($('.quickSearchForm input[type=text]')).each(function(index,input){if($(input).attr('disabled')!='disabled'&&$(input).val()!=''){submit=true;return false;}});if(submit){return true;}
window.location='/search/advanced';return false;});quickSearch.initAutoComplete();$(".js__searchInSelector").on('change',quickSearch.quickSearchSelectionHandler);});quickSearch=function(){function _citationSearchMode($dropdown){var container=$dropdown.closest("form");container.find('.simpleSearchHelp').hide();container.find('.simpleSearchBoxContainer').hide();_disableInputs(container.find('.simpleSearchBoxContainer'));_enableInputs(container.find('.citationSearchBoxContainer'));container.find(".citationSearchBoxContainer").find("input[name='quickLinkYear']").attr("disabled",true);container.find(".citationSearchBoxContainer").find("input[name='quickLinkVolume']").attr("disabled",true);container.find(".citationSearchBoxContainer").find("input[name='quickLinkPage']").attr("disabled",true);if(container.find(".citationSearchBoxContainer").find("input[name='quickLinkIssue']").attr("type")!="hidden"){container.find(".citationSearchBoxContainer").find("input[name='quickLinkIssue']").attr("disabled",true);}
if($('.quickSearchFormContainer input[name="quickLinkJournal"]').val()!=""){$(".quickSearchFormContainer .mainSearchButton").removeAttr("disabled");}
else{$(".quickSearchFormContainer .mainSearchButton").attr('disabled',true);}
setupCitationSubmitButton('quickSearchFormContainer');container.find('.citationHelp').show();container.find('.citationSearchBoxContainer').show();container.attr('action','/action/quickLink');};function _simpleSearchMode($dropdown){var container=$dropdown.closest("form");container.find('.citationHelp').hide();container.find('.citationSearchBoxContainer').hide();_disableInputs(container.find('.citationSearchBoxContainer'));_enableInputs(container.find('.simpleSearchBoxContainer'));container.find('.simpleSearchBoxContainer').show();container.find('.simpleSearchHelp').show();container.attr('action','/action/doSearch');container.find("input[type='hidden'][name='SeriesKey']").attr('disabled',true);$(".quickSearchFormContainer .mainSearchButton").removeAttr("disabled");};function _disableInputs($selector){$selector.find('input').each(function(index,input){$(input).attr('disabled','disabled')});};function _enableInputs($selector){$selector.find('input').each(function(index,input){$(input).removeAttr("disabled");});};function setupCitationSubmitButton(container){$('.quickSearchFormContainer input[name="quickLinkJournal"]').on('keyup',function(){if($('.quickSearchFormContainer  input[name="quickLinkJournal"]').val()==''){$(".quickSearchFormContainer .mainSearchButton").attr('disabled',true);}
else{$(".quickSearchFormContainer .mainSearchButton").removeAttr("disabled");}});};$.widget("custom.catcomplete",$.ui.autocomplete,{_create:function(){this._super();this.widget().addClass('quickSearchAutocomplete');this.widget().menu("option","items","> :not(.qsaCategory)");},_renderItem:function(ul,item){var $aWrap=$('<a>').addClass("qsaHistoryItem");if(item.history){var itemSpan=$.parseHTML(item.highlight);var removeDiv=$('<a>').attr('href','#').addClass("qsaRemove").html('[Remove]');removeDiv.bind('click',function(e){e.preventDefault();e.stopPropagation();var selectedHistoryItem=$(e.target.parentNode.parentNode).data().qsaItem;var autoCompeteSearchUri=['/action/doDeleteHistory?ajax=true&uri=',encodeURIComponent(selectedHistoryItem.value)].join('');$.ajax(autoCompeteSearchUri).done(function(result){if(result==='true'){e.target.parentNode.remove();}});});$aWrap.append(removeDiv);$aWrap.append(itemSpan);}else{$aWrap.html(item.highlight);}
return $("<li>").data("qsaItem",item).append($aWrap).addClass('qsaItem').appendTo(ul);},_resizeMenu:function(){var ul=this.menu.element;if(this.element.outerWidth()<250){ul.outerWidth(this.element.outerWidth()+40/100*this.element.outerWidth());}else{ul.outerWidth(this.element.outerWidth());}}});return{initAutoComplete:function(dropOption){var that=this;$('.quickSearchFormContainer .autocomplete').catcomplete({source:function(request,response){var enteredTerm=request.term;var $inputElem=$(this.element);var maxWords=$inputElem.data("auto-complete-max-words");var maxChars=$inputElem.data("auto-complete-max-chars");if(enteredTerm.split(" ").length>maxWords||enteredTerm.length>maxChars||!enteredTerm.replace(/\s/g,'').length){return false;}
var selectedOption=$('.js__searchInSelector option:selected').val();var autoCompleteSearchType='';if(selectedOption==='Title'||selectedOption=='citation'){autoCompleteSearchType='title-';}else if(selectedOption==='Contrib'){autoCompleteSearchType='contrib-';}
var isDisabled=disableAutoCompleteIfAllSetToZero($inputElem);if(isDisabled==='false'){sendAjaxRequest($inputElem,dropOption,enteredTerm,autoCompleteSearchType,selectedOption,response);}},focus:function(event,ui){return false;},select:function(event,ui){if($(event.target).attr('name')!='quickLinkJournal'){$(event.target).val(ui.item.label);window.location.href=ui.item.value;}else{$(event.target).val(ui.item.label);}
return false;}}).bind('click',function(e){$(this).catcomplete({minLength:2});})},quickSearchSelectionHandler:function(){var selectedValue=$("option:selected",this).data('search-in'),$searchInSelector=$('.js__searchInSelector');if(selectedValue=='journal'||selectedValue=='book'){_simpleSearchMode($(this));$($searchInSelector).attr('name','pubType');$('#searchText').attr('name','AllField');}
else if(selectedValue=='AllField'||selectedValue=='Contrib'){_simpleSearchMode($(this));$($searchInSelector).attr('name','field1');$('#searchText').attr('name','text1');}
else if(selectedValue=='citation'){_citationSearchMode($(this));}
else if(selectedValue=='thisIssue'){_simpleSearchMode($(this));$('.searchText').attr('name','AllField');$($searchInSelector).attr('name','Issue');$('.quickSearchForm').find("input[type='hidden'][name='SeriesKey']").removeAttr('disabled');}
else
if(selectedValue=='thisJournal'||selectedValue=="thisSeries"){_simpleSearchMode($(this));$($searchInSelector).attr('name','SeriesKey');$('.searchText').attr('name','AllField');}
else{_simpleSearchMode($(this));if(selectedValue=="default"){$($searchInSelector).attr('name','');}
else{$($searchInSelector).attr('name','publication');}
$('.searchText').attr('name','AllField');}}};}();function disableAutoCompleteIfAllSetToZero($inputSearchText){var confNumOfHistoryItems=$inputSearchText.data('historyItemsConf');var confNumOfPublicationTitles=$inputSearchText.data('publication-titles-conf');var confNumOfTopics=$inputSearchText.data('topics-conf');var confNumOfContributors=$inputSearchText.data('contributors-conf');if(confNumOfHistoryItems==0&&confNumOfPublicationTitles==0&&confNumOfTopics==0&&confNumOfContributors==0)
return'true';return'false';}
function sendAjaxRequest($inputSearchText,dropOption,enteredTerm,autoCompleteSearchType,selectedOption,response){var results=[];var confNumOfHistoryItems=$inputSearchText.data('history-items-conf');var confNumOfPublicationTitles=$inputSearchText.data('publication-titles-conf');var confNumOfTopics=$inputSearchText.data('topics-conf');var confNumOfContributors=$inputSearchText.data('contributors-conf');if(dropOption==='citation'){var autoCompeteSearchUrl=['/action/doSuggest?target=title-auto-complete&query=',enteredTerm,'&pts=',confNumOfPublicationTitles,'&fl=PubID'].join('');}else{var autoCompeteSearchUrl=['/action/doSuggest?target=',autoCompleteSearchType,'auto-complete&query=',enteredTerm,'&hs=',confNumOfHistoryItems,'&pts=',confNumOfPublicationTitles,'&ts=',confNumOfTopics,'&cs=',confNumOfContributors,'&fl=PubID'].join('');}
$.getJSON(autoCompeteSearchUrl).done(function(resultData){var numOfTitles,numOfTopics,numOfContrib,numOfHistory;numOfTitles=numOfTopics=numOfContrib=numOfHistory=0;var getSuggestion=function(item){var suggestion={'label':item.label,'highlight':item.highlight,'history':false};if(item.param==='history'){suggestion['value']=decodeURI(item.value);suggestion['history']=true;}else if(selectedOption=='citation'){suggestion['value']=item.value;}
else{suggestion['value']=['/action/doSearch?target=default&',item.param,'=',item.value].join('');}
return suggestion;};$.each(resultData,function(i,item){if((item.param==='history')&&(numOfHistory<confNumOfHistoryItems)){results.push(getSuggestion(item));numOfHistory=numOfHistory+1;}else if((item.param==='SeriesKey')&&(numOfTitles<confNumOfPublicationTitles)){results.push(getSuggestion(item));numOfTitles=numOfTitles+1;}else if((item.param==='ConceptID')&&(numOfTopics<confNumOfTopics)){results.push(getSuggestion(item));numOfTopics=numOfTopics+1;}else if((item.param==='ContribAuthorStored')&&(numOfContrib<confNumOfContributors)){results.push(getSuggestion(item));numOfContrib=numOfContrib+1;}});response(results);}).fail(function(){console.log('failed');});}})(jQuery);
function loadInstitutionPage(selectDom){var href=$(selectDom).val();location.href=href;};
var SearchUtil={checkURLValidation:function(URL){if(!URL||URL.trim().indexOf(' ')!=-1)
return false;return true;},addTermOld:function(){var displayedCount=$(".formRow:visible").length+1;var hiddenCount=$(".formRow:hidden").length;$(".term_"+displayedCount).slideToggle();if(hiddenCount==1){$(".addTerm").hide();}},addTerm:function(){var $allTerms=$(".search-terms").children(".formRow");var sbLock=0;if($allTerms.length<7){if($(this).closest(".formRow").find(".sbHolder").length){$(".formRow").each(function(){$(this).find("select").selectbox("detach");});sbLock=1;}
var nodeToAppend=$(this).closest(".formRow").clone(true);$(nodeToAppend).find(".sbHolder").attr("id","cloned"+$allTerms.length);$(nodeToAppend).find('.fieldSelect').val('AllField').attr("name","field"+($allTerms.length+1));$(nodeToAppend).find('input').val("").attr("name","text"+($allTerms.length+1)).attr("id","advSearch_keyw_for_"+($allTerms.length+1));if($allTerms.length+1===7){$(nodeToAppend).find(".addTerm").addClass("hidden");$(nodeToAppend).find(".removeTerm").removeClass("hidden")}else{$(nodeToAppend).find(".addTerm").removeClass("hidden");$(nodeToAppend).find(".removeTerm").addClass("hidden");}
$(nodeToAppend).appendTo(".search-terms");var $prelast=$(".search-terms").children(".formRow:last-child").prev();$prelast.find(".addTerm").addClass("hidden");$prelast.find(".removeTerm").removeClass("hidden");if(sbLock){$(".formRow").each(function(){$(this).find("select").selectbox();$('.mainSearchForm .sbToggle').attr('tabindex','-1');});}}},removeTerm:function(){$(this).closest(".formRow").remove();var $allTerms=$(".search-terms").children(".formRow");var $last=$allTerms.last();$last.find(".addTerm").removeClass("hidden");$last.find(".removeTerm").addClass("hidden");$allTerms.each(function(index){$(this).find("input[type=search]").attr("name","text"+(index+1));$(this).find("input[type=search]").attr("id","advSearch_keyw_for_"+(index+1));$(this).find(".fieldSelect").attr("name","field"+(index+1));});},selectDateRangeOption:function(){$(this).siblings('input[type=radio]').prop('checked',true);if($(this).hasClass('dateFilterSelect')){$('#custom-range').prop('checked',true);$('#afterEarliestDate').prop('checked',true);SearchUtil.clearMonthYearDropDown('static-ranges');}else{SearchUtil.clearMonthYearDropDown('dateFilterSelect');}},clearMonthYearDropDown:function(className){if(className==undefined){$('.timeFrame').find('select').val('');}
else{$('.'+className).val('');}
try{if(jcf&&jcf.customForms){jcf.customForms.refreshAll();}}catch(e){}},tinyUrl:function(){var allSearchRows=$('div[class*="formRow"]');$(allSearchRows).each(function(index,row){if($(row).is(":hidden")){$(row).find('input').attr('disabled',true);$(row).find('select').attr('disabled',true);}});},onSubmitActions:function(){SearchUtil.tinyUrl();},toggleElementHandler:function(event){var toggledElement=$(this).siblings('.'+event.data.toggledClass);$(toggledElement).slideToggle("slow",function(){if(event.data.togglerClass!=undefined){$(this).siblings('.'+event.data.togglerClass).toggle();}});},allTextInputsEmpty:function(form){var textInputs=$(form).find('input[type=search]');if(textInputs.length==0){textInputs=$(form).find('input[type=text]');}
var $emptyFields=$(textInputs).filter(function(){return this.value==="";});return $emptyFields.length===textInputs.length;},checkEnableSearchButton:function(event){SearchUtil.allTextInputsEmpty(event.delegateTarget)?SearchUtil.disableButton('submitPubSearchButton'):SearchUtil.enableButton('submitPubSearchButton');},enableButton:function(id){$('#'+id).removeAttr('disabled',true);},disableButton:function(id){$('#'+id).attr('disabled',true);},doExtraWorkOnClosePreview:function(){},doExtraWorkOnPreviewWindow:function(){},showAbstract:function(doi,$abstractDiv){$abstractDiv.find('.progress').show();$abstractDiv.find('#abstractFailed').hide();if(!$abstractDiv.find('.preview-abstract').html()){var data={ajax:'true',doi:doi};var loadAbstractAndShowPreview=function(response,status,xhr){$abstractDiv.find('.progress').hide();if(status=="error"){$abstractDiv.find('#abstractFailed').show();}
else{var allArticles=$('article.searchResultItem');var currentArticle=$(this).parents('article.searchResultItem');var currentIndex=allArticles.index(currentArticle);var $windowOpener=$abstractDiv.find(".previewWindowOpener");$windowOpener.attr("data-previewindex",currentIndex);$windowOpener.click(function(){var articlePreviewIndex=$windowOpener.data("previewindex");var currentDoi=doi;function go($article){var $showOnProgress=$(".previewWindow").find('.js-show-on-progress');var $hideOnProgress=$(".previewWindow").find('.js-hide-on-progress');$($showOnProgress).show();$($hideOnProgress).hide();var articleTitle=$article.data('title');var articleDoi=$($article.find('a[data-doi]')[0]).data('doi');currentDoi=articleDoi;var data={ajax:'true',doi:articleDoi};$(".previewWindow").find(".content").load('/action/Pb2ShowSearchSnippet?preview=true',data,function(){$($showOnProgress).hide();$($hideOnProgress).fadeIn();});$(".previewWindow").find(".preview-title").html(articleTitle);};function goNext(next){if(articlePreviewIndex<allArticles.length-1){go($(allArticles.get(++articlePreviewIndex)));}};function goPrev(prev){if(articlePreviewIndex>0){go($(allArticles.get(--articlePreviewIndex)));}};$(".previewWindow").removeClass("hide").find('.progress').show();SearchUtil.doExtraWorkOnPreviewWindow();var data={ajax:'true',doi:doi};var loadPreview=function(response,status,xhr){if(status=="error"){$(".previewWindow").find('#abstractFailed').show();}
else{var $windowOpener=$abstractDiv.find(".previewWindowOpener");$(".previewWindow").find(".content").html(response);$(".previewWindow").find(".preview-title").html($windowOpener.data("title"));$(".previewWindow").find('.progress').hide();function closePreview(){$(".previewWindow").addClass("hide");SearchUtil.doExtraWorkOnClosePreview();$(".previewWindow").find(".content").html('');}
$(".darkBackground").click(function(){var width=$(window).outerWidth();if(width<993){closePreview();}});$(".previewWindow .close-preview").click(function(){var width=$(window).outerWidth();if(width>=993){closePreview();}});$(".previewWindow .topNavigation .icon-arrow_u_p").click(function(){goPrev(this);});$(".previewWindow .topNavigation .icon-arrow_d_n").click(function(){goNext(this);});$(".previewWindow .topNavigation .icon-arrow_r").click(function(){var doiHref='/doi/'+currentDoi;window.location.href=doiHref;});$(".previewWindow .bottomNavigation .icon-arrow_r").click(function(){var doiHref='/doi/'+currentDoi;window.location.href=doiHref;});$(".previewWindow .preview_window_icons.icon-arrow_r").click(function(){goNext(this);});$(".previewWindow .preview_window_icons.icon-arrow_l").click(function(){goPrev(this);});$(".previewWindow .previewToolbar .tool-fulltext").click(function(){var fullTxtHref='/doi/full/'+currentDoi;window.open(fullTxtHref,'_blank');});$(".previewWindow .previewToolbar .tool-pdf").click(function(){var pdfHref='/doi/pdf/'+currentDoi;window.open(pdfHref,'_blank');});};};$.get('/action/Pb2ShowSearchSnippet?preview=true',data,loadPreview);});}};$abstractDiv.load('/action/Pb2ShowSearchSnippet',data,loadAbstractAndShowPreview);}},showHideAbs:function(event,doi,id){var targetElement=event.currentTarget;var $abstractDiv=$(targetElement).siblings(".abstractParagraph");SearchUtil.showAbstract(doi,$abstractDiv);$abstractDiv.slideToggle();$(this).addClass('selected');},populateVolumesDropDown:function(decadeVolsMap){$('#decadeSelect').change(function(){var volumes=[];var volumesSelect=$('#volumeSelect');var selectedVal=$("#decadeSelect option:selected").val();volumes=decadeVolsMap[selectedVal];if(volumes==undefined){$("#volumeSelect")[0].selectedIndex=0;}
else{volumesSelect.find('option').remove().end().append('<option value="">Volume</option>').val('');for(var i=0;i<volumes.length;i++){volumesSelect.append('<option value="'+volumes[i]+'">'+volumes[i]+'</option>');}}});},checkAndSubmitBulkAction:function(bulkAction){if(bulkAction=='add'){submitArticles(document.forms['frmSearchResults'],'/action/addFavoritePublication','Error');}
else if(bulkAction=='email'){submitArticles(document.forms['frmSearchResults'],'/action/showMailPage','Error');}
else if(bulkAction=='download'){submitArticles(document.forms['frmSearchResults'],'/action/showCitFormats','Error');}
else if(bulkAction=='track'){submitArticles(document.forms['frmSearchResults'],'/action/addCitationAlert','Error');}
else if(bulkAction="showAbs"){submitArticles(document.forms['frmSearchResults'],'/action/showMultipleAbstracts','Error');}},searchTabsController:function(e){var tabpanid=$(this).data('tab-panel');var tabsContainer=$(this).parent();if((e.which==13)){var original=$(this);var prev=$(this).prev();var next=$(this).next();var target;$(this).siblings().attr("aria-selected","false");$(this).attr("aria-selected","true");$('#'+tabpanid).show().attr("aria-hidden","false").siblings().hide().attr("aria-hidden","true");}
else if(e.which!=9&&e.type==="click"){if($('#'+tabpanid).is(":hidden")){$(this).siblings().attr("aria-selected","false");$(this).attr("aria-selected","true");$('#'+tabpanid).show().attr("aria-hidden","false").siblings().hide().attr("aria-hidden","true");}}},expandableController:function(e){if(e.which===13||e.type==="click"){var hideId=$(this).siblings().data('panel');$('#'+hideId).hide();var showId=$(this).data('panel');$('#'+showId).slideToggle();var anchorLink=$(this).find('a');var state=$(anchorLink).attr('aria-expanded')==='false'?true:false;$(anchorLink).attr('aria-expanded',state);$('#'+showId).attr('aria-hidden',!state);$(this).toggleClass('selected');}},split:function(val){return val.split(/,\s*/);},extractLast:function(term,response){return SearchUtil.split(term).pop();},renderItem:function(ul,item){return $("<li></li>").data("ui-autocomplete-item",item).append($("<a></a>").html(item.label)).appendTo(ul);},getSelectedField:function(autoComplete){return $(autoComplete).siblings('select').val()===undefined?$(autoComplete).data('auto-complete-target'):$(autoComplete).siblings('select').val();},initAutoComplete:function(autoCompletedTerm){$(autoCompletedTerm).bind("keydown",function(event){if(event.keyCode===$.ui.keyCode.TAB&&$(this).autocomplete("instance").menu.active){event.preventDefault();}});return $(autoCompletedTerm).autocomplete({source:function(request,response){$.ajax({url:'/action/doSuggest?target='+SearchUtil.getSelectedField(this.element),data:{term:SearchUtil.extractLast(request.term)},dataType:'json',success:function(data){response(data);}});},focus:function(){return false;},select:function(event,ui){var terms=SearchUtil.split(this.value);ui.item.label=ui.item.label.replace(/(<([^>]+)>)/ig,"");terms.pop();terms.push(ui.item.label);terms.push(" ");this.value=terms.join();return false;},minLength:2});},colorLuminance:function(hex,lum){hex=String(hex).replace(/[^0-9a-f]/gi,'');if(hex.length<6){hex=hex[0]+hex[0]+hex[1]+hex[1]+hex[2]+hex[2];}
lum=lum||0;var rgb="#",c,i;for(i=0;i<3;i++){c=parseInt(hex.substr(i*2,2),16);c=Math.round(Math.min(Math.max(0,c+(c*lum)),255)).toString(16);rgb+=("00"+c).substr(c.length);}
return rgb;},initSliderRangeColor:function(slider,ranges,trueValues,slideValues){var currentNode=$(slider).get(0);if(slider.length>0&&currentNode.children.length==0){var generateColorSlice=function(initialColor,width,weight,id){var colorSlice=document.createElement("span");colorSlice.className='ui-color-slice';colorSlice.id=id;if(weight===0){colorSlice.style.background="#fff";}else{colorSlice.style.background=SearchUtil.colorLuminance(initialColor,-weight*0.5);}
colorSlice.style.width=width+"%";return colorSlice;};var calculateMedianWeight=function(frequencyRange){var weightMap=frequencyRange.map(function(item){return item;});return weightMap.reduce(function(next,prev){return next+prev;})/weightMap.length;};var min=$(slider).data("min");var max=$(slider).data("max");var initialColor=$(slider).data("color");var fragment=document.createDocumentFragment();if(!ranges){var startId=min;var frequencies=$(slider).data("frequencies");var oneYearWidth=(100/(max-min+1));frequencies.forEach(function(item){var slice=generateColorSlice(initialColor,oneYearWidth,item,startId);fragment.appendChild(slice);startId++;});}
else{var previousRange,slideStep,trueYear,oneYearWidth,totalSteps;previousRange=slideStep=trueYear=oneYearWidth=totalSteps=0;ranges.forEach(function(item){totalSteps=totalSteps+((item.freq.length/item.slideStep)*item.displayStep);});oneYearWidth=100/totalSteps;for(var i=0;i<ranges.length;i++){var sliceStart=0;for(var j=0;j<ranges[i].freq.length;j=j+ranges[i].slideStep){var stepFrequencies=ranges[i].freq.slice(sliceStart,sliceStart+ranges[i].slideStep);sliceStart=sliceStart+ranges[i].slideStep;var medianWeight=calculateMedianWeight(stepFrequencies);var stepWidth=ranges[i].displayStep*oneYearWidth;trueYear=min+j+previousRange;var slice=generateColorSlice(initialColor,stepWidth,medianWeight,trueYear+"-"+slideStep);fragment.appendChild(slice);trueValues.push(trueYear);slideValues.push(slideStep);slideStep=slideStep+ranges[i].displayStep;}
previousRange=previousRange+j;}}
currentNode.insertBefore(fragment,currentNode.lastChild);}},bindSearchResultHandlers:function(){$('.noJS').css('display','none');$('#searchResultContainer').delegate('.previewContainer .toggleAbstract','click',{togglerClass:'toggleAbstract',toggledClass:'abstractSnippet'},SearchUtil.toggleElementHandler);$("#searchResultContainer input[name=markall]").on('click',function(){$('#frmSearchResults').find("input[type=checkbox]").prop('checked',$(this).is(":checked"));});$('#searchResultContainer #sortBy1').change(function(){var sortByForm=$('#sortControlForm');if(sortByForm.length>0){$(sortByForm).submit();}});$("select[name='pageSize']").change(function(){var resultsPerPageForm=$(this).closest('.resultsPerPageForm');if(resultsPerPageForm.length>0){$(resultsPerPageForm).submit();}});$("select[name='bulkActions']").change(function(){var bulkAction=$(this).find('option:selected').val();SearchUtil.checkAndSubmitBulkAction(bulkAction);$(this).find('option:first').prop('selected',true);});$(".bulkActionsList").on('click','a',function(){var bulkAction=$(this).data('action');SearchUtil.checkAndSubmitBulkAction(bulkAction);});$('.search-tabs-nav').delegate('li','click',SearchUtil.searchTabsController);$('[role="presentation"]').on('keydown',SearchUtil.searchTabsController);$("#searchResultContainer .articlePreviewLink,.combinedRecommendationsWidget .articlePreviewLink ").on("click",function(e){SearchUtil.showHideAbs(e,$(this).data("doi"),$(this).data("id"));if($(this).hasClass('selected')){$(this).removeClass('selected');}
else{$(this).addClass('selected');}
$(this).toggle();$(this).siblings('.previewWindowOpener').toggle();$(this).siblings('.articlePreviewLink').toggle();});$('.content-slidedown').on('click',SearchUtil.expandableController);$('.content-slidedown').on('keydown',SearchUtil.expandableController);},displayAjaxSearchResults:function(data){var $facetsMarker=$(data).find('#filter');var $followResultsMarker=$(data).find('.followResultsWidget');if($followResultsMarker.size()<1){$followResultsMarker=$(data).find('[data-widget-def="followResultsWidget"]');}
var $returnToPsMarker=$(data).find('.return-to-pq-border');var $filterContainer=$(".newSearchFacets");var $followResultsContainer=$(".followResultsWidget");if($followResultsContainer.size()<1){$followResultsContainer=$('[data-widget-def="followResultsWidget"]');}
var $returnToPsContainer=$(".return-to-pq-border");$($filterContainer).html($facetsMarker);$($followResultsContainer).html($followResultsMarker.html());$($returnToPsContainer).html($returnToPsMarker);$('#filter').removeClass('noscript');SearchUtil.recoverSearchResultDisplay();SearchFacetsUtil.bindFacetHandlers();SearchUtil.bindSearchResultHandlers();SearchUtil.bindAdvancedSearchHandlers();SearchUtil.bindDateFilterSearchHandlers();SearchUtil.bindresultAjaxEvents();SearchUtil.migrateFilters();SearchUtil.performCustomActions();SearchUtil.bindAbTestingLogging();$('body,html').animate({scrollTop:0},800);},recoverCustomizedSearchResultDisplay:function(){},performCustomActions:function(){void(0)},bindAbTestingLogging:function(){void(0)},recoverSearchResultDisplay:function(){$(".progress").fadeOut("medium");$(".ajax-overlay").hide();$("#searchResultContainer").removeClass("semi-transparent-layer");$("#filter").removeClass("semi-transparent-layer");$('#sortBy1:not(.simple-select-element)').selectbox();SearchUtil.recoverCustomizedSearchResultDisplay();},resultAjaxHandler:function(formSubmit,elementTarget,browserButton){if(formSubmit||elementTarget){var $searchResultContainer=$("#searchResultContainer");$(".progress").fadeIn("medium");$(".ajax-overlay").show();$searchResultContainer.addClass("semi-transparent-layer");$("#filter").addClass("semi-transparent-layer");$('#slider-range').slider('disable');var ajaxTarget="";if(formSubmit){ajaxTarget=window.location.href;var indexOf=ajaxTarget.indexOf("?");ajaxTarget=ajaxTarget.substring(0,indexOf)+"?"+$(formSubmit).serialize();}else{ajaxTarget=elementTarget;}
var d1=new $.Deferred();$.when(d1).then(SearchUtil.displayAjaxSearchResults,SearchUtil.recoverSearchResultDisplay);$.ajax({url:ajaxTarget,dataType:'html',success:function(data){var $data=$($.parseHTML(data));if($data.find("#searchResultContainer").length<1){window.location.href=ajaxTarget;return;}
$searchResultContainer.empty().append($data.find("#searchResultContainer > *"));d1.resolve($data);SearchUtil.handleResultsAfterResolve(data);},error:function(){SearchUtil.recoverSearchResultDisplay();$('#slider-range').slider('enable');history.back();console.log('Failed to load AJAX search for URL: '+ajaxTarget);SearchUtil.displayAjaxFailureMsg();}});if(!browserButton){history.pushState({"page":ajaxTarget},"Search Results",ajaxTarget);}}},handleResultsAfterResolve:function(data){},displayAjaxFailureMsg:function(){var $modal=$('<div id="dialog-message" title="Error"><p>Error while retrieving results.</p></div>');$('body').append($modal);$(function(){$("#dialog-message").dialog({modal:true,buttons:{Ok:function(){$(this).dialog("close");$modal.remove();}},show:{duration:500},hide:{duration:500}});});},onAlertLabelClickHandler:function(event){$(event.target).siblings('input').prop('checked',true);},bindAdvancedSearchHandlers:function(){$('.addTerm:not(.js__addTermNew)').on('click',SearchUtil.addTermOld);$('.js__addTermNew').on('click',SearchUtil.addTerm);$(".removeTerm").on('click',SearchUtil.removeTerm);$(document).on('keypress',".removeTerm,.js__addTermNew",function(e){var code=e.keyCode||e.which;if(code==13){$(this).trigger('click');}});$('.timeFrame').delegate('select','change',SearchUtil.selectDateRangeOption);$('form[name="frmSearch"]').submit(SearchUtil.onSubmitActions);var mainSearchForm=$('#mainSearchForm');if(SearchUtil.allTextInputsEmpty(mainSearchForm)){SearchUtil.disableButton('submitPubSearchButton')}
$(mainSearchForm).delegate('.fieldSelect','change',function(){var selectType=this.value;if(selectType=='Contrib'){}
else{if($(this).siblings('input[type=search]').hasClass("ui-autocomplete-input")){$(this).siblings('input[type=search]').autocomplete("disable");}}});$(mainSearchForm).delegate('.search-term','keyup input',SearchUtil.checkEnableSearchButton);var autoCompletedTerm=$(mainSearchForm).find('.search-term.suggest');var autoCompleteInstance=SearchUtil.initAutoComplete(autoCompletedTerm);$(mainSearchForm).find('.magicsuggest').each(function(){var doSuggestTaxonomies=$(this).data('auto-complete-taxonomies')?'&within='+$(this).data('auto-complete-taxonomies'):'';var doSuggestTarget=$(this).data('auto-complete-target');var maxWords=$(this).data("auto-complete-max-words");var maxChars=$(this).data("auto-complete-max-chars");var selected=$(this).data('selected');$(this).magicSuggest({data:'/action/doSuggest?target='+doSuggestTarget+doSuggestTaxonomies,method:'GET',valueField:'value',allowFreeEntries:'false',displayField:'label',cls:'search-term',hideTrigger:'true',beforeSend:function(xhr,settings){$(".ms-res-ctn.dropdown-menu").css("height","30px");$(".ms-res-ctn.dropdown-menu .ms-res-item").remove();$(".ms-res-ctn.dropdown-menu").append("<div>Loading..</div>");var enteredTerm=settings.url.substr(settings.url.indexOf('query=')+6).replace(/[​​+]/g,' ');if(enteredTerm.split(" ").length>maxWords||enteredTerm.length>maxChars||!enteredTerm.replace(/\s/g,'').length){$(".ms-res-ctn.dropdown-menu").css("height","0px");return false;}}}).setSelection(selected?selected:[]);});for(var i=0;i<autoCompleteInstance.length;i++){$(autoCompleteInstance[i]).data('ui-autocomplete')._renderItem=SearchUtil.renderItem;}
if($('#searchResultContainer').length==0){$('#advSearch_keyw_for_1').trigger('focus');}
$('.advancedFiltersHeader').on('click',{toggledClass:'advancedFilters',togglerClass:'advancedFiltersHeader'},SearchUtil.toggleElementHandler);},bindDateFilterSearchHandlers:function(){$('#filter .custom-date-label').on('click',function(){$('.custom-date-form').slideToggle('slow');});$('#static-range').on('change',function(){SearchUtil.openSelect($(this).siblings("select"));});$('#custom-range').on('change',function(){SearchUtil.openSelect($(this).closest(".date-field").find('select').first());});$('#afterEarliestDate').on('click',function(){SearchUtil.openSelect($(this).closest('#searchTimeFormContainer').find('select').first());});var slider=$("#slider-range");if($(slider).length!=0){var linearDensity=($(slider).data('bardensity')===true);var min=parseInt($(slider).data("min"));var max=parseInt($(slider).data("max"));var minInput=$(".min");var maxInput=$(".max");if(max&&min){var sliderOptions={};var nonLinearSliderSteps=[1,2,5,10];var allowedTotalYears=nonLinearSliderSteps.reduce(function(prev,cur){return prev+cur;})*2;var totalYears=max-min;if(totalYears>allowedTotalYears&&linearDensity==false){var displaySteps=nonLinearSliderSteps.slice().reverse();var remaining=totalYears;var sliderRanges=[];var startYear=min;var frequencies=$(slider).data("frequencies");var startSlice=0;displaySteps.forEach(function(step,i,all){var oneThird=Math.floor(remaining/3);var twoThirds=Math.floor(2*oneThird);var remainder=twoThirds%step;if(remainder>0){twoThirds=twoThirds-remainder;}
remaining=remaining-twoThirds;if(i==displaySteps.length-1){sliderRanges.push({'start':startYear,'stop':max,'displayStep':nonLinearSliderSteps[i],'slideStep':step,'freq':frequencies.slice(startSlice,frequencies.length)});}
else{sliderRanges.push({'start':startYear,'stop':startYear+twoThirds,'displayStep':nonLinearSliderSteps[i],'slideStep':step,'freq':frequencies.slice(startSlice,startSlice+twoThirds)});}
startSlice=startSlice+twoThirds;startYear=startYear+twoThirds;});var trueValues=[];var slideValues=[];SearchUtil.initSliderRangeColor(slider,sliderRanges,trueValues,slideValues);var findNearest=function(includeLeft,includeRight,value){var nearest=null;var diff=null;for(var i=0;i<slideValues.length;i++){if((includeLeft&&slideValues[i]<=value)||(includeRight&&slideValues[i]>=value)){var newDiff=Math.abs(value-slideValues[i]);if(diff==null||newDiff<diff){nearest=slideValues[i];diff=newDiff;}}}
return nearest;};var getMappedValue=function(value,mapFrom,mapTo){for(var i=0;i<mapFrom.length;i++){if(mapFrom[i]>=value){return mapTo[i];}}
return 0;};var getRealValue=function(sliderValue){return getMappedValue(sliderValue,slideValues,trueValues);};var getSlideValue=function(trueValue){return getMappedValue(trueValue,trueValues,slideValues);};sliderOptions={range:true,min:slideValues[0],max:slideValues[slideValues.length-1],values:[getSlideValue(minInput.val()),getSlideValue(maxInput.val())],slide:function(event,ui){var includeRight=event.keyCode!=$.ui.keyCode.RIGHT;var includeLeft=event.keyCode!=$.ui.keyCode.LEFT;var value=findNearest(includeLeft,includeRight,ui.value);if($(ui.handle).is(":last-child")){$(slider).slider('values',1,value);maxInput.val(getRealValue($(slider).slider('values',1)));}
else{$(slider).slider('values',0,value);minInput.val(getRealValue($(slider).slider('values',0)));}
if(ui.values[0]==ui.values[1]&&minInput.val()!=maxInput.val())
if($(ui.handle).is(":last-child"))
maxInput.val(minInput.val());else
minInput.val(maxInput.val());return true;}};}
else{sliderOptions={range:true,min:$(slider).data("min"),max:$(slider).data("max"),values:[minInput.val(),maxInput.val()],slide:function(event,ui){minInput.val(ui.values[0]);maxInput.val(ui.values[1]);}};SearchUtil.initSliderRangeColor(slider);}
$(slider).slider(sliderOptions);$(slider).on('slidechange',function(){SearchUtil.resultAjaxHandler($(this).closest('form'));});$(slider).parent("form").on("submit",function(){$(this).find("input[type='submit']").attr("disabled","disabled");var form=$(this).get(0);if(form.checkValidity()){SearchUtil.resultAjaxHandler($(this));}
return false;});var $yearInputs=$('.date-range .min,.date-range .max');$yearInputs.on('change',function(){$(this).closest("form").submit();});}}},openSelect:function(selector){var element=$(selector)[0];if(document.createEvent){var e=document.createEvent("MouseEvents");e.initEvent("mousedown",true,true);element.dispatchEvent(e);}else if(element.fireEvent){element.fireEvent("onmousedown");}},onSaveSearchSubmitHandler:function(e){$('#newSearchSaveButton').hide();$('.saveSearchProgress').show();$.ajax({type:"POST",url:"/action/doSaveSearch",data:$(e.target).serialize(),success:SearchUtil.saveSearchSuccessHandler,error:function(data){$('.errorMsg').show('fade');$('#newSearchSaveButton').show();$('.saveSearchProgress').hide();$(".modal-dialog-mask").remove();$(".modal-dialog").remove();$('body').css("overflow","auto");}});return false;},saveSearchSuccessHandler:function(data){$('.successMsg').show('fade');$('#newSearchSaveButton').show();$('.saveSearchProgress').hide();$(".modal-dialog-mask").remove();$(".modal-dialog").remove();$('body').css("overflow","auto");SearchUtil.redrawSavedSearchesPanel(JSON.parse(data).favQueries);},redrawSavedSearchesPanel:function(jsonData){var savedSearchesPanel=$('#saved-searches-panel');var numOfMaxSavedSearches=$(savedSearchesPanel).find('.search-entries').data('queries');for(var i=0;i<numOfMaxSavedSearches;i++){if(jsonData[i]!=undefined){var item=$(savedSearchesPanel).find('.search-entry')[i];var goLink="/action/doSearch?target=saved&runSaved="+jsonData[i]["qId"];$(item).find('.search-entry-link').html(jsonData[i]["qName"]).attr('href',goLink);var removeLink="/action/doDeleteSearch?queryId="+jsonData[i]["qId"]+"&searchType=saved";$(item).find('.remove-search-entry').attr('href',removeLink);if($(item).hasClass('hidden')){$(item).removeClass('hidden');$(item).addClass('search-entry-row');}}}
$(savedSearchesPanel).find('.no-saved-search').remove();},showChildren:function(pid){var childTopics=$('#child_'+pid);$(childTopics).is(':visible')?$(childTopics).hide():$(childTopics).show();var parentTopicStatus=$('#status_'+pid);if($(parentTopicStatus).hasClass('expander')){$(parentTopicStatus).removeClass('expander');$(parentTopicStatus).addClass('collapser')}
else{$(parentTopicStatus).removeClass('collapser');$(parentTopicStatus).addClass('expander')}},bindTopicalIndexWidgetHandlers:function(){$('.expanders').on('click',function(){SearchUtil.showChildren($(this).data('id'));});},bindEarlyCiteFilter:function(){$("input[type='checkbox'][name='earlycite']").on('click',function(){if(this.checked){$("input[type='hidden'][name='earlycite']").attr('disabled',true);}else{$("input[type='hidden'][name='earlycite']").attr('disabled',false);}});},bindresultAjaxEvents:function(){$(".js__ajaxSearchTrigger").on("click",function(e){e.preventDefault();var $elm=$(this);var elmTarget=$elm.attr('href')?$elm.attr('href'):$elm.val()?$elm.val():'';var urlStatus=SearchUtil.checkURLValidation(elmTarget);if(urlStatus)
SearchUtil.resultAjaxHandler(false,elmTarget);else
console.log("Invalid URL: '"+elmTarget+"'");});$(".js__ajaxSearchTriggerForm").on('submit',function(){SearchUtil.resultAjaxHandler($(this));return false;});if($(".js__ajaxSearchTrigger").length>0){$(window).on('popstate',function(e){if(event.state===null){e.preventDefault();return false;}else{SearchUtil.resultAjaxHandler(false,window.location.href,true);}});history.replaceState({"page":window.location.href},"Search Results",window.location.href);}},migrateFilters:function(){if($(".responsiveSearchFacets").length>0){var appliedFilter=$(".filter-tag").length;if(appliedFilter>0){$(".applied-filter").toggleClass("hidden visible-xs");$(".followResultsWidget .filter-count").text(appliedFilter);$(".followResultsWidget .filter-tag").each(function(index){$(this).clone().appendTo(".responsiveSearchFacets .queryFilters");});$(".resetFilter").clone().appendTo(".applied-filter .facetHeader").addClass("pull-right");}}}};$(document).ready(function(){$('.noJS').css('display','none');$('#searchFormContainer').removeClass('noscript');$('#filter').removeClass('noscript');$('#selectAllDiv').removeClass('noscript');$(document).keyup(function(e){if(e.keyCode==27){$(".previewWindow").addClass("hide");}});SearchUtil.bindEarlyCiteFilter();SearchUtil.bindSearchResultHandlers(true);SearchUtil.bindAdvancedSearchHandlers();SearchUtil.bindDateFilterSearchHandlers();SearchUtil.bindTopicalIndexWidgetHandlers();SearchUtil.bindresultAjaxEvents();SearchUtil.performCustomActions();$('body').append("<div class='ajax-overlay'></div>");$('.advancedSearch select').on('change',function(){SearchUtil.enableButton('submitPubSearchButton');});var searchIcon='.responsiveQuickSearchWidget:not(.selected) .mini-search';if($(searchIcon).length>0){var quickSearchFlag=false;$(document).on('touchstart click',searchIcon,function(e){if(!quickSearchFlag){quickSearchFlag=true;e.preventDefault();if($(this).parents('.quickSearchFormContainer').length){toggleQuickSearch(this);}
setTimeout(function(){quickSearchFlag=false;},350);}});}});var okayToHide=true;var desktopWidth=992;function toggleQuickSearch(e){if(okayToHide){okayToHide=false;if($('.search-open').is(":visible")){$('.search-open').slideUp("linear",function(){$('.search-bg').fadeOut("fast");$(".mini-search").removeClass("active");$("body").removeClass("overfow-hidden");});}else{var searchBoxOfset=$(".page-header").offset();var searchBoxPosition=searchBoxOfset.top+$(".page-header").outerHeight();if($(".sticky-header").length){searchBoxPosition=$(".responsiveQuickSearchWidget").outerHeight();}
if(window.innerWidth>desktopWidth)
$('.search-open, .search-bg').css("top",$(".mini-search").offset().top+$(".mini-search").outerHeight()-$(window).scrollTop());else
$('.search-open, .search-bg').css("top",searchBoxPosition);$('.search-open').slideDown("linear");$('.search-bg').show();$(".mini-search").addClass("active");$("body").addClass("overfow-hidden");}
$('.searchText').first().focus();if(document.hasFocus()&&!$('.search-open').is(":visible")){$('.searchText').first().blur();}
window.setTimeout(function(){okayToHide=true;},500)}}
function resetSelectMenu(){};
(function($){function init(){$(".hoverLayer").each(function(){var layer=jQuery(this);layer.parent().find(".layerTrigger").add(layer).off("mouseenter mouseleave").hover(function(){layer.show()},function(){layer.hide()});});}
$(document).ready(init);if(window.PB&&window.PB.$){window.PB.$(document.documentElement).on("ScopeModified ScopeLoaded",init);}})(jQuery);
window.getSize=function(){if(typeof(window.innerWidth)=='number')return{width:window.innerWidth,height:window.innerHeight}
if(document.documentElement&&(document.documentElement.clientWidth||document.documentElement.clientHeight))return{width:document.documentElement.clientWidth,height:document.documentElement.clientHeight}
if(document.body&&(document.body.clientWidth||document.body.clientHeight))return{width:document.body.clientWidth,height:document.body.clientHeight}
return{width:0,height:0}}
var resizeTimer;function doResize(){if(resizeTimer)clearTimeout(resizeTimer);resizeTimer=setTimeout("contentResize( )",100);return true;}
function doResizeHeight(){if(resizeTimer)clearTimeout(resizeTimer);resizeTimer=setTimeout("heightResize( )",100);return true;}
var minContentWidth=450;var minContentHeight=530;var contentHorizontalMargins=(document.all)?375:389;var contentVerticalMargins=0;var resizeAgain=true;var isGecko=navigator.userAgent.toLowerCase().indexOf("gecko")+1;function contentResize(){var ws=window.getSize();var h=ws.height
var w=ws.width
if(w&&h){h-=contentVerticalMargins;if(h<minContentHeight)h=minContentHeight;w-=contentHorizontalMargins;if(w<minContentWidth)w=minContentWidth;var contentElement=document.getElementById('Content');if(!contentElement)return true;var style=contentElement.style;style.height=h+"px";style.width=w+"px";if(document.getElementsByTagName){style=document.getElementsByTagName('body').item(0).style;style.height=h+"px";}
if(resizeAgain){resizeAgain=false;setTimeout("contentResize()",50);}else{resizeAgain=true;if(location.hash){if(isGecko){location.hash=location.hash;}else if(document.anchors){var anchor=document.anchors[location.hash];if(anchor&&anchor.scrollIntoView)anchor.scrollIntoView();}}}}
return true;}
function heightResize(){var ws=window.getSize();var h=ws.height
if(h){h-=contentVerticalMargins;if(h<minContentHeight)h=minContentHeight;var style=document.getElementById('Content').style;style.height=h+"px";if(document.getElementsByTagName){style=document.getElementsByTagName('body').item(0).style;style.height=h+"px";}
if(resizeAgain){resizeAgain=false;setTimeout("heightResize()",50);}else{resizeAgain=true;if(location.hash){if(isGecko){location.hash=location.hash;}else if(document.anchors){var anchor=document.anchors[location.hash];if(anchor&&anchor.scrollIntoView)anchor.scrollIntoView();}}}}
return true;}
function preload(){load();}
function load()
{}
function popupHelp(url)
{var theEvent=window.event||arguments.callee.caller.arguments[0];if(theEvent){var link=theEvent.srcElement||theEvent.target;if(link&&link.target=='_self'){window.location=url;return false;}}
popupHelp550(url);}
function newWindow(url)
{var new_window;var windowProperties;windowProperties="width=750,height=700,top=30,left=230,toolbar=0,menubar=0,resizable=1,scrollbars=yes";if(new_window==null){new_window=window.open(url,null,windowProperties);}else{new_window.document.replace(url);}}
function goTo(url){window.location.href=url;}
function parentWindowGoTo(url,closeSelf){if(self.opener!=null){self.opener.location=url;self.opener.focus();}else{self.location=url;}
if(closeSelf)self.close();return false;}
function GoTo(sel,targetstr)
{var index=sel.selectedIndex;if(sel.options[index].value!=''){if(targetstr=='blank'){window.open(sel.options[index].value,'win1');}else{var frameobj;if((frameobj=eval(targetstr))!=null)
frameobj.location=sel.options[index].value;}}}
function searchNextResultPage(aForm,aOffset)
{var startPage=null;for(var i=0;i<aForm.elements.length;i++){if(aForm.elements[i].name=='startPage'){startPage=aForm.elements[i];break;}}
if(startPage!=null){startPage.value=eval(startPage.value)+aOffset;aForm.submit();}}
function searchShowFirstPage(aForm,aCheckSort)
{if(aCheckSort){var sortBy=getFormInput(aForm.name,'sortBy');if(sortBy.defaultChecked==sortBy.checked){return;}}
getFormInput(aForm.name,'startPage').value=0;aForm.submit();}
function searchResultOrderBy(aForm,aSort)
{aForm.sortBy.value=aSort;aForm.submit();}
function searchRestrict(aForm,aField,aValue)
{var clause="["+aField+": \""+aValue+"\"]";var all=aForm.all.value;if(all.length==0){all=clause;}else{all="("+all+") AND "+clause;}
aForm.all.value=all;aForm.submit();}
function onResultSearchFormSubmit(aForm)
{if(aForm.searchText&&aForm.searchText.value){aForm.startPage.value=0;}
aForm.submit();}
function onModifySearchClick(aForm)
{var elmts=aForm.elements;for(var i=0;i<elmts.length;i++){if(elmts[i].name=="action"){elmts[i].value="modifySearch";aForm.submit();return;}}
alert("cannot find form: "+aForm.name);}
function onChangeSearchHistory(aForm)
{var index=aForm.history.selectedIndex;if(index>0)
window.location=aForm.history.options[index].value;}
function onClickMarkAll(aForm,aNamePrefix){if(typeof jQuery!='undefined'){var markall=(aForm.markall&&aForm.markall.checked)||jQuery('#markall')&&jQuery('#markall')[0].checked;}else{var markall=(aForm.markall&&aForm.markall.checked)||$('#markall')&&$('#markall')[0].checked;}
if(isString(aForm)){aForm=document.forms[aForm];}
if(!aNamePrefix){aNamePrefix="";}
markAllCheckboxes(aForm,aNamePrefix,markall);}
function isString(value){return typeof value==='string';}
function changeStartPage(aForm,pageNumber){setStartPage(aForm,'startPage',pageNumber);$(aForm).submit();}
function setStartPage(aForm,aField,aValue){var input=$(aForm).find('input[name='+aField+']');if(input.length==0){input=document.createElement("input");input.type="hidden";input.name=aField;input.value=aValue;$(aForm).append(input);}
else{input.val(aValue);}}
function submitArticles(aForm,action,errorMessage){return submitMultiArticles(aForm,action,false,errorMessage);}
function evalAll(box){var form=box.form;var checked=0;var max=form.doi.length;for(var count=0;count<max;count++){if(eval("form.doi["+count+"].checked")==true){checked++;}}
if(checked==max)updateSelectAllBox(true,form);else updateSelectAllBox(false,form);}
function updateSelectAllBox(checkState,form){var oneOrTwo=form.selectAll.length;if(oneOrTwo==2){form.selectAll[0].checked=checkState;form.selectAll[1].checked=checkState;}
else form.selectAll.checked=checkState;}
function onSearchRadioClick(aRadio)
{document.forms['frmSearch'].submit();}
function submitSuggestedSearch(aQuery)
{var frm=document.forms['frmSearch'];frm.submit();}
function onSubmitJournalSearch()
{var url="/action/doSearch?action=search";var elmts=document.frmJournalSearch.elements;for(var i=0;i<elmts.length;i++)
{var name=elmts[i].name;var value=elmts[i].value;if(value=="")
continue;if(name.indexOf("field")==-1){url+=("&"+name+"="+value);}}
window.location=url;}
function _toQueryTerm(aField,aValue)
{var myValue=aValue.replace(/\"/g,'');var hasSpc=false;for(var i=aValue.length-1;i>=0;i--){if(aValue.charAt(i)==' '){hasSpc=true;break;}}
if(hasSpc)
myValue='\"'+myValue+'\"';return("%2B"+aField+"%3A"+myValue)}
function checkElement(aForm,aName,aValue)
{var elmts=aForm.elements;for(var i=elmts.length-1;i>=0;i=i-1)
{if((elmts[i].name==aName)&&(elmts[i].value==aValue))
{elmts[i].checked=true;return;}}}
function checkSearchInput(aForm)
{if(aForm.searchText.value=="Enter Keywords"){alert("Please enter search terms");}else{aForm.submit();}}
function checkValue(value,errorValue,errorMessage){if(value==errorValue){alert(errorMessage);return false;}
return true;}
function searchSavePopup(aForm)
{var access=aForm.access;if(access&&access.value!='nofilter'){if(!confirm("Save Search will not include your Access Rights criteria, do you want to continue?")){return;}}
var url="/action/doSaveSearch";var new_window;var windowProperties;windowProperties="width=550,height=250,toolbar=0,menubar=0,resizable=1,scrollbars=yes";if(new_window==null){new_window=window.open(url,null,windowProperties);}else{new_window.document.replace(url);}}
function getSaveSearchNameObject(aForm)
{var obj;if(!document.all){var arr=aForm.elements;for(var i=0;(!obj)&&(i<arr.length);i++){if(arr[i].name=="saveSearchName"){obj=arr[i];}}}else{obj=document.all.saveSearchName;}
return obj;}
function performSaveSearch(aForm,aIsFAJ)
{var sltAlert=aForm.alertme;if(aIsFAJ&&(sltAlert.selectedIndex>0)){alert("Sorry, e-mail alert for journals with \n"+"full access rights is not available.");return;}
aForm.submit();}
function resetField(aField,aDefaultText,aColor)
{if(aField.value==aDefaultText){aField.value="";}
aField.style.color=aColor;}
function submitIfValid(){var x=document.getElementById("journalCode");var hasJournal=x.value!="";if(hasJournal&&hasSubcriberType()&&hasSubscriptionType()){x.form.submit();}}
function submitIfTypes(){if(hasSubcriberType()&&hasSubscriptionType())$("ecommerceForm").submit();}
function submitIfSubscriber(){if(hasSubcriberType())$("ecommerceForm").submit();}
function submitIfSubscriptionType(){if(hasSubscriptionType())$("ecommerceForm").submit();}
function hasSubcriberType(){return isChecked($("individual"))||isChecked($("institution"));}
function hasSubscriptionType(){return $("electronic").checked||$("print").checked||$("combo").checked;}
function isChecked(y){return y&&(y.type=="hidden"||y.checked)}
function changedCountry(element){var options=jQuery("#stateOptions");var visibleBlock=options.children('#state'+jQuery(element).val());var visibleId=visibleBlock&&visibleBlock.length?visibleBlock[0].id:'stateTxt';options.children().each(function(index,block){var blockId=block.id;var input;block=jQuery(block);if(blockId==visibleId){block.show();input=block.find('.input').eq(0);if(input.hasClass("required-but-hidden")){input.addClass("required");input.removeClass("required-but-hidden");}
input.attr("name",'state');}else{block.hide();input=block.find('.input').eq(0);if(input.hasClass("required")){input.removeClass("required");input.addClass("required-but-hidden");}
input.attr("name",'stateHidden');}});}
function updateVatField(element,vatEnabledCountryJsonObj,update){if(update){var vatEnabledCountryObjectsArray=vatEnabledCountryJsonObj.vatEnabledCountryObjects;var selectedCountry=jQuery(element).val();var found=false;for(var i=0;i<vatEnabledCountryObjectsArray.length&&!found;i++){if(vatEnabledCountryObjectsArray[i].countryIsoAlpha2==selectedCountry){found=true;}}
var vatNumberField=jQuery("input[name='vatNumber']");if(found||selectedCountry=="-1"){vatNumberField.closest("tr").show();}else{jQuery(vatNumberField).closest("tr").hide();jQuery(vatNumberField).val('');}}}
function toggleList(heading,list)
{if(typeof list==='string')list=document.getElementById(list);else if(list.length)list=list[0];if(heading.className.indexOf('expanded')!=-1){list.style.display='none';heading.className='loiListHeading collapsed';}
else{list.style.display='block';heading.className='loiListHeading expanded';}}
function submitArticles(aForm,action){var hasMarked=false;var elmts=aForm.elements;for(var i=0;i<elmts.length;i++){if((elmts[i].name=="doi")&&(elmts[i].type=="checkbox")&&(elmts[i].checked)){hasMarked=true;break;}}
if(!hasMarked){alert("Please check at least one article.");return;}
for(var i=0;i<elmts.length;i++){if((elmts[i].name=="doi")&&(elmts[i].type!="checkbox")){elmts[i].name="xdoi";}}
aForm.setAttribute('action',action);aForm.method="get";aForm.submit();return false;}
function checkCollectionPublication(event){var newValue=new String(document.getElementById("categoryId").value);if(newValue.indexOf("collection")!=-1){var collectionCode=newValue.split("-")[1];document.getElementById("frmQuickSearch").setAttribute("action","/topic/"+collectionCode+"?allowEmptyTermQuery=true");}else{document.getElementById("frmQuickSearch").setAttribute("action","/action/doSearch");}}
function clearFields(aForm)
{for(var i=0;i<aForm.elements.length;i++){var elem=aForm.elements[i];if(elem.type=="text")
elem.value="";else if(elem.type.match("select-(one|multiple)"))
elem.selectedIndex=0;}};
function preload(){load();}
function preunload(){unload();}
function load()
{}
function unload()
{}
function changeForegroundColor(eid,color){if(document.getElementById&&(elem=document.getElementById(eid)))
elem.style.color=color;}
if(typeof $=="undefined")$=function(id){return document.getElementById(id);}
function RightslinkPopUp(aPublisher,aPublication,aTitle,aDate,aAuthor,aContentId,aCopyright,aVolume,aIssue,aStartPage,aEndPage,aIssn,aOrderBeanReset,aColor,aIncludeColor,aReprints,aPermissions)
{var location="?publisherName="+aPublisher
+"&publication="+aPublication
+"&title="+aTitle
+"&publicationDate="+aDate
+"&author="+aAuthor
+"&contentID="+aContentId
+"&copyright="+aCopyright
+"&startPage="+aStartPage
+"&endPage="+aEndPage;if(aVolume!=null){location+="&volumeNum="+aVolume;}
if(aIssue!=null){location+="&issueNum="+aIssue;}
if(aIssn!=null){location+="&issn="+aIssn;}
if(aOrderBeanReset!=null){location+="&orderBeanReset="+aOrderBeanReset;}
if(aIncludeColor!='false'){if(aColor!=null){location+="&color="+aColor;}}
if(aReprints!=null){location+="&reprints="+aReprints;}
if(aPermissions!='false'){location+="&permissions="+aPermissions;}
var link="/servlet/linkout?type=rightslink&url="+escape(location);var winprops="location=no,toolbar=no,directories=no,status=no,menubar=no,scrollbars=yes,resizable=yes,width=650,height=550";PopUp=window.open(link,'Rightslink',winprops);}
function MM_preloadImages(){}
function MM_swapImgRestore(){}
function MM_findObj(n,d){}
function MM_swapImage(){}
function menuMouseOver(type,actualType){document.getElementById('MenuItem_'+type).className='MenuItemOver_'+(type==actualType);}
function menuMouseOut(type,actualType){document.getElementById('MenuItem_'+type).className='MenuItem_'+(type==actualType);}
function menuClick(type){document.getElementById('MenuLink_'+type).click();}
function browserCheck(){this.ns4=(document.layers)?true:false;this.ie=(document.all&&(!window.opera))?true:false;this.dom=(document.getElementById)?true:false;this.ns6=(window.sidebar)?true:false;this.moz=(window.sidebar||navigator.userAgent.indexOf('Gecko')!=-1)?true:false;this.opera=(window.opera)?true:false;this.mac=(navigator.userAgent.indexOf('Mac')!=-1)?true:false;}
browser=new browserCheck();var Obj;function getObjectByName(nameOfObject){Obj=null;if(browser.ie)Obj=document.all[nameOfObject]
else if(browser.dom)Obj=findDOMObject(nameOfObject)
else if(browser.ns4)findLayer(window,nameOfObject);return(!Obj||(browser.ns4&&Obj==window))?"Object not found":Obj;}
function findDOMObject(nameOfObject){for(var i=0;i<document.images.length;i++){if(document.images[i].name==nameOfObject)return document.images[i]}
return document.getElementById(nameOfObject)}
function findLayer(node,nameOfObject){if(node.name==nameOfObject)Obj=node;for(var counter=0;counter<node.document.images.length;counter++){if(node.document.images[counter].name==nameOfObject)Obj=node.document.images[counter];}
for(var i=0;i<node.document.layers.length;i++){findLayer(node.document.layers[i],nameOfObject);}}
function toggleVisibility(id){obj=getObjectByName(id);if(obj){v=obj.style.display;obj.style.display=(v=='none')?'block':'none';i=getObjectByName('hiddenImage');if(i)i.src='/page/imageHack.jsp?object='+id+'&display='+obj.style.display+'&dummy='+(new Date()).getTime();}}
function removeClass(el,className){if(!(el&&el.className))return false;var cls=el.className.split(" ");var ar=new Array();for(var i=cls.length;i>0;)if(cls[--i]!=className)ar[ar.length]=cls[i];el.className=ar.join(" ");return cls.length!=ar.length;}
function hasClass(el,className){if(!(el&&el.className))return false;var cls=el.className.split(" ");for(var i=cls.length;i>0;)if(cls[--i]==className)return true;return false;}
function addClass(el,className){if(!el||hasClass(el,className))return;if(el.className)el.className+=" "+className;else el.className=className;}
function addCssRule(selector,rule){if(document.styleSheets){var css=document.styleSheets[document.styleSheets.length-1];if(css.addRule)css.addRule(selector,rule);else if(css.insertRule)css.insertRule(selector+"{"+rule+"}",css.cssRules.length);}}
function getCssText(){var imports="";var cssText="\n";var styleSheets=document.styleSheets;for(var i=0;i<styleSheets.length;i++){var css=styleSheets.item(i);var mediaText=typeof css.media=="string"?css.media:css.media.mediaText;if(!mediaText||mediaText.indexOf("all")!=-1||mediaText.indexOf("screen")!=-1){if(css.imports){for(var j=0;j<css.imports.length;j++){var href=css.imports[j].href;var lastQuote=href.lastIndexOf('"');if(lastQuote!=-1){mediaText=href.substr(lastQuote+1);if(mediaText.indexOf("all")==-1&&mediaText.indexOf("screen")==-1)continue;href=href.substr(1,lastQuote-1);}
imports+='@import url("'+href+'");\n';}}
if(css.rules){for(var j=0;j<css.rules.length;j++){cssText+=css.rules[j].selectorText+" { "+css.rules[j].style.cssText+" }\n";}}else if(css.cssRules){for(var j=0;j<css.cssRules.length;j++){var rule=css.cssRules.item(j);if(rule.type==rule.IMPORT_RULE||rule.type==rule.MEDIA_RULE){mediaText=rule.media.mediaText;if(mediaText&&mediaText.indexOf("all")==-1&&mediaText.indexOf("screen")==-1)continue;if(rule.type==rule.IMPORT_RULE)imports+=rule.cssText;else cssText+=rule.cssText+"\n";}else{cssText+=rule.cssText+"\n";}}}}}
return imports+cssText;}
function loadCss(url,title,media){var el=document.createElement('link');el.type='text/css';el.rel='stylesheet';el.href=url;el.media=media||'screen';el.title=title||'dynamicLoadedSheet';document.getElementsByTagName("head")[0].appendChild(el);}
function loadJs(url){var el=document.createElement("script");el.type="text/javascript";el.src=url;el.async=false;document.getElementsByTagName("head")[0].appendChild(el);}
function addListener(el,evname,func){if(el.attachEvent)el.attachEvent("on"+evname,func);else if(el.addEventListener)el.addEventListener(evname,func,true);}
function removeListener(el,evname,func){if(el.detachEvent)el.detachEvent("on"+evname,func);else if(el.removeEventListener)el.removeEventListener(evname,func,true);}
function _getSession(){return window.session?window.session:(window.session=new Array());}
function setSessionAttribute(name,value){function test(doc){}
sendServerMsg("/action/sessionAccess?action=setJavaScriptAttribute&name="+name+"&value="+value,test);_getSession()[name]=value;}
function getSessionAttribute(name){return _getSession()[name];}
function sendServerMsg(url,callBack){function _receiveServerResponse(ev){var iFrame=window.event?window.event.srcElement:ev.currentTarget;var doc=iFrame.contentDocument?iFrame.contentDocument:document.frames(iFrame.id).document;if(iFrame.callBack)iFrame.callBack(doc);document.body.removeChild(document.getElementById(iFrame.id));}
var iFrame=document.createElement('iframe');addListener(iFrame,"load",_receiveServerResponse);iFrame.setAttribute("id","msgFrame"+new Date().getTime());iFrame.setAttribute("src",url);iFrame.setAttribute("style","display:none");if(callBack)iFrame.callBack=callBack;document.body.appendChild(iFrame);}
function copyInnerHtml(src,target){var domSupported=document.getElementById?true:false;var se=(domSupported&&typeof src=="string")?document.getElementById(src):src;var te=(domSupported&&typeof target=="string")?document.getElementById(target):target;if(se.innerHTML&&te.innerHTML)te.innerHTML=se.innerHTML;}
function filterSelect(selectId,value){var select;if(document.getElementById&&(select=document.getElementById(selectId))&&select.options){if(!select.optionsCopy){select.optionsCopy=new Array();select.optionTexts=new Array();for(var i=0;i<select.options.length;i++){var opt=select.options[i];select.optionsCopy[i]=opt;select.optionTexts[i]=opt.text.toLowerCase();}}
value=value.toLowerCase();var allTexts=select.optionTexts;var displayOptions=select.options;var count=displayOptions.length=0;for(var i=0;i<allTexts.length;i++){if(allTexts[i].indexOf(value)!=-1){var option=select.optionsCopy[i];displayOptions[count++]=option;option.selected=option.text==value;}}
if(count==1)displayOptions[0].selected=true;}}
function popupElement(el,anchor,windowParams){if(typeof el=="string"){el=(document.getElementById)?document.getElementById(el):(document.all)?document.all[el]:false;}
if(el){var tmp;if(el.popupWindow&&!el.popupWindow.closed){el.popupWindow.focus();tmp=el.popupWindow.document;}else{if(!windowParams)windowParams={};el.popupWindow=window.open('',windowParams.name?windowParams.name:'',windowParams.featureString?windowParams.featureString:'resizable=yes,scrollbars=yes,width=600,height=500');tmp=el.popupWindow.document;tmp.writeln('<html><head><title>'+document.title+'</title><style type="text/css">');var styleSheets=document.styleSheets;for(var i=0;styleSheets&&i<styleSheets.length;i++){var css=styleSheets.item(i);var cssHref=css.href;if(cssHref!=null&&cssHref.indexOf(window.location.hostname)>0){if(css.cssText)tmp.writeln(css.cssText);else{var cssRules=css.rules?css.rules:css.cssRules;for(var j=0;cssRules&&j<cssRules.length;j++){tmp.writeln(cssRules.item(j).cssText);}}}}
tmp.writeln('</style></head><body id="'+el.id+'">');tmp.writeln(el.innerHTML);tmp.writeln('</body></html>');tmp.close();}
if(anchor){var target=(tmp.getElementById)?tmp.getElementById(anchor):(tmp.all)?tmp.all[anchor]:false;if(target){if(target.scrollIntoView)target.scrollIntoView();else if(window.scroll&&target.offsetTop)el.popupWindow.scroll(0,target.offsetTop);}}}}
function markAllCheckboxes(aForm,aNamePrefix,aChecked){if(aForm&&aForm.length>0&&aForm[0].tagName&&aForm[0].tagName=='FORM'){aForm=aForm[0];}
var elmts=aForm.elements;for(var i=0;i<elmts.length;i++){if(elmts[i].type=="checkbox"&&elmts[i].name.indexOf(aNamePrefix)==0){elmts[i].checked=aChecked;}}}
function submitMultiArticles(aForm,action,aMarkall,errorMessage){var hasMarked=false;var elmts=aForm.elements;for(var i=0;i<elmts.length;i++){if((elmts[i].name=="doi")&&(elmts[i].type=="checkbox")&&(elmts[i].checked)){hasMarked=true;break;}}
if(!hasMarked){if(aMarkall){markAllCheckboxes(aForm,"doi",true);}else{alert(errorMessage?errorMessage:"Please check at least one article.");return false;}}
for(var i=0;i<elmts.length;i++){if((elmts[i].name=="doi")&&(elmts[i].type!="checkbox")){elmts[i].name="xdoi";}}
if(aForm.getAttributeNode("action")==null){aForm.action=action;}else{aForm.getAttributeNode("action").nodeValue=action;}
aForm.method="post";aForm.submit();return true;}
function setCheckWhenDefine(aCbx,aState)
{if(aCbx){aCbx.checked=aState;}}
function genSideCitation(dbid,linkoutUrl,display){genSide('citation',dbid,linkoutUrl,display);}
function genSideQuickSearch(dbid,value,display){genSide('quicksearch',dbid,'',display,'','','',value);}
function genSideRelated(dbid,linkoutUrl,display){genSide('related',dbid,linkoutUrl,display);}
function popup(citart,id,doi,ptype,area){popupRef(citart,id,doi,ptype,area,600,500);}
function popupFull(id,doi,ptype,area,width,height){var popupURL="/action/showFullPopup?id="+id+"&doi="+doi;if(area)popupURL+="&area="+area;if(ptype)ptype=ptype.replace(/\W/g,'');var winname=ptype?ptype:'popupRef';var n=window.open(popupURL,winname,'resizable=yes,scrollbars=yes,width='+width+',height='+height);n.focus();}
function popupRef(citart,id,doi,ptype,area,width,height){var popupURL="/action/showPopup?citid="+citart+"&id="+id+"&doi="+doi;if(area)popupURL+="&area="+area;if(ptype)ptype=ptype.replace(/\W/g,'');var winname=ptype?ptype:'popupRef';var n=window.open(popupURL,winname,'resizable=yes,scrollbars=yes,width='+width+',height='+height);n.moveTo(10,10);n.focus();}
function popupHelp550(aUrl)
{popupHelpX(aUrl,"width=550,height=540,top=10,left=50,toolbar=0,menubar=0,resizable=yes,scrollbars=yes");}
function popupHelp580(aUrl)
{popupHelpX(aUrl,"width=580,height=540,top=10,left=50,toolbar=0,menubar=0,resizable=yes,scrollbars=yes");}
function popupHelp625(aUrl)
{popupHelpX(aUrl,"width=625,height=540,top=10,left=50,toolbar=0,menubar=0,resizable=yes,scrollbars=yes");}
function popupHelpX(aUrl,aWinProps)
{var winid=window.open(aUrl,"popupHelp",aWinProps);if(winid.focus)winid.focus();return false;}
function popupHelp(aUrl)
{popupHelp580(aUrl);}
function popupCoverImage(url)
{var new_window;var windowProperties;windowProperties="width=750,height=700,top=30,left=230,toolbar=0,menubar=0,resizable=1,scrollbars=yes";if(new_window==null){new_window=window.open(url,null,windowProperties);}else{new_window.document.replace(url);}}
function encodeLinkOutUrl(aUrl)
{var result="";for(var i=0;i<aUrl.length;i++){var encoded=aUrl.charAt(i);switch(encoded){case'?':case'&':encoded=escape(encoded);break;default:}
result+=encoded;}
return result;}
function submitXrsSearch(frm)
{if(!frm){frm=document.forms['frmSearch'];}
var xrsurl="http://www.google.com/cobrand?"+"restrict="+frm.restrict.value+"&q="+frm.searchText.value+"&filter=0"+"&sa=Search+"+"&cof=AWPID:bbd6d01e9a530922";var url="/servlet/linkout?type=search&dbid=16&url="+encodeLinkOutUrl(xrsurl);var winprops="width=750,height=700,top=10,left=20,toolbar=1,menubar=1,resizable=yes,scrollbars=yes,status=yes";var win=window.open(url,null,winprops);if(win!=null){win.focus();}
return false;}
var search_highlight=true;function highlight()
{var from=search_highlight?"single_highlight_class":"searchNone";var to=search_highlight?"searchNone":"single_highlight_class";var elmts=document.getElementsByTagName("span");for(var i=0;i<elmts.length;i++){var node=elmts.item(i);for(var j=0;j<node.attributes.length;j++){var item=node.attributes.item(j);if((item.nodeName=='class')&&(item.nodeValue.indexOf(from)==0)){node.className=to+item.nodeValue.substring(from.length);}}}
search_highlight=!search_highlight;}
var emailRegx=/^([a-zA-Z0-9_\.\-])+\@(([a-zA-Z0-9\-])+\.)+([a-zA-Z0-9]{2,4})+$/;function isEmail(email){if(email.value)email=email.value;return emailRegx.test(email);}
function countSelected(select){var result=0;if(select.options)for(var i=0;i<select.options.length;i++)if(select.options[i].selected)result++;return result;}
function countChecked(form,fieldName){var result=0;var items=form.elements[fieldName];if(items)for(var i=0;i<items.length;i++)if(items[i].checked)result++;return result;}
function getCookie(name){name=name+"=";var cookies=document.cookie.split(';');for(var i=0;i<cookies.length;i++){var c=cookies[i];while(c.charAt(0)==' ')c=c.substring(1);if(c.indexOf(name)==0)return c.substring(name.length);}
return null;}
function syncSession(sid,atcookie){if(sid){var url=location.host;url=url.indexOf("staging.")==0?url.substring(8):("staging."+url);url="http://"+url+"/session.jsp"+"?JSESSIONID="+sid;if(atcookie)url+="&atcookie="+atcookie;window._sidImg=new Image;window._sidImg.src=url;}}
function confirmAction(url,msg){if(confirm(msg))document.location=url;}
function msword2html(str)
{if(str==null||str.replace(/\s/g,"")==""){return str;}
var array=[8211,"&ndash;",8212,"&mdash;",8216,"&lsquo;",8217,"&rsquo;",8218,"&sbquo;",8219,"&#x201b;",8220,"&ldquo;",8221,"&rdquo;",8222,"&bdquo;",8223,"&#x201f;"];for(var i=0;i<array.length;i+=2){str=str.replace(new RegExp(String.fromCharCode(array[i]),"g"),array[i+1]);}
return str;}
function addFlashMovie(id,flv){var flashvars={file:flv,type:'flv'};var params={allowfullscreen:false};var attributes={};swfobject.embedSWF('/flvplayer.swf',id,"352","288","7.0.0",false,flashvars,params,attributes);}
function getFormInput(formName,inputName)
{var form=getForm(formName);for(var i=0;i<form.elements.length;i++){if(form.elements[i].name==inputName)
return form.elements[i];}
return null;}
function searchResultPage(aForm,page,aSubject)
{getFormInput(aForm.name,'startPage').value=page;filterBySimilarArticles(aForm,null);}
function filterBySimilarArticles(searchForm,doi){}
function searchNextResultPage(aForm,aOffset)
{var startPage=null;for(var i=0;i<aForm.elements.length;i++){if(aForm.elements[i].name=='startPage'){startPage=aForm.elements[i];break;}}
if(startPage!=null){startPage.value=eval(startPage.value)+aOffset;aForm.submit();}}
function searchWithButtona(aPageOffset,button)
{var form=document.forms.searchForm;var page=eval(form.startPage.value)+aPageOffset;form.startPage.value=page;form.nextPrev.value="yes";submitFormWithButtonClicked(form,button);}
function submitFormWithButtonClicked(aForm,aButton)
{if(document.all&&document.all[aButton])
{var x=document.all[aButton];if(x.length)
x=x[0];x.click();}
else
{var x=aForm.action;if((x.type==null)||(x.type.indexOf("select")==-1))
{x+=((x.indexOf("?")>0)?"&":"?");x+=(aButton+".x=1");aForm.action=x;}
else
{var sltd=x.options[x.selectedIndex];var pfxJSBTN="jsbtn:";if(sltd.value.indexOf(pfxJSBTN)==-1)
{var value=(pfxJSBTN+aButton+";"+sltd.value);x.options[x.selectedIndex].value=value;}}
aForm.submit();}}
function searchResultPageByFormId(aForm,page,aSubject){getFormIdInput(aForm.id,'startPage').value=page;aForm.submit();}
function getFormIdInput(formId,inputName){var form=getFormById(formId);for(var i=0;i<form.elements.length;i++){if(form.elements[i].name==inputName)return form.elements[i];}
return null;}
function getFormById(id){for(var i=0;i<document.forms.length;i++){if(document.forms[i].id==id)return document.forms[i];}
return null;}
function getForm(name){for(var i=0;i<document.forms.length;i++){if(document.forms[i].name==name)
return document.forms[i];}
return null;}
function setInputAndSubmit(aForm,aField,aValue)
{setInput(aForm,aField,aValue);aForm.submit();}
function setInput(aForm,aField,aValue)
{var input=aForm[aField];if(typeof input=='undefined'||input==null){input=document.createElement("input");input.type="hidden";input.name=aField;aForm.appendChild(input);}
if(typeof input.length!='undefined'){var i;for(i=0;i<input.length;i++){input[i].value=aValue;}}else{input.value=aValue;}}
function validateRecommendationForm(form,alert1,alert2){if(!isEmail(form.mailToAddress)){alert(alert1);return false;}else if(form.doi.type!='hidden'&&countSelected(form.doi)<1){alert(alert2);return false;}
return true;}
function commentSearchResultPage(i){var f=document.forms.commentSearch;f.startRow.value=i;f.submit();}
function editAdLabel(anchor){anchor.parentNode.getElementsByTagName("form")[0].style.display="block";}
function checkUploadedFile(fileId){if(document.getElementById(fileId).value.length!=0)
return true;alert('Please Choose a File');return false;}
if(typeof jQuery!='undefined'){jQuery(document).ready(function($){$(".clearForm").click(function(){var clearForm=$(this).closest('form');$(clearForm).find(':input').each(function(){switch(this.type){case'password':case'select-multiple':case'select-one':case'text':case'textarea':$(this).val('');break;case'checkbox':case'radio':this.checked=false;}});});jQuery(".includeDebug").hover(function(){jQuery(this).stop(true,true);jQuery(this).children(".debugInfo").show();jQuery(this).addClass("debugBox");},function(){jQuery(this).stop(true,true);jQuery(this).children(".debugInfo").hide();jQuery(this).removeClass("debugBox");});jQuery(".includeDebug .debugInfo").click(function(){jQuery(this).parent().children(".debugAttr").fadeToggle("fast");jQuery(this).parent().children(".debugAttr").children(".debugTable").fadeIn("fast");});jQuery(".includeDebug").bind("mouseenter",function(){jQuery(this).removeClass("debugNoF");});jQuery(".debugError .debugPE").click(function(){jQuery(this).parent().children(".debugST").fadeToggle("fast");});jQuery(".debugTable").click(function(){jQuery(this).fadeOut("fast");});jQuery('.relatedLink').click(function(event){var layer=jQuery(this).next('.relatedLayer');if(layer.css('display')=='none')layer.show();else layer.hide();event.preventDefault();});jQuery('[autofocus]').each(function(){if(!('autofocus'in document.createElement('input'))){jQuery(this).focus();}});jQuery('[placeholder]').each(function(){if(!("placeholder"in document.createElement("input"))){var val=jQuery(this).attr("placeholder");if(this.value==""){this.value=val;jQuery(this).css("color","#999");}
jQuery(this).focus(function(){if(this.value==val){this.value="";jQuery(this).css("color","#000");}}).blur(function(){if(jQuery.trim(this.value)==""){this.value=val;jQuery(this).css("color","#999");}});jQuery('form').submit(function(){jQuery(this).find('[placeholder]').each(function(){if(this.value==jQuery(this).attr("placeholder")){this.value="";}});});}});jQuery('.regForm').bind('reset',function(e){clearCapcha();});});function replace_param(theURL,paramName,newValue){var uri_array=theURL.split('?');var params_array=uri_array[1].split('&');var items_array=new Array;for(i=0;i<params_array.length;i++){items_array=params_array[i].split('=');if(items_array[0]==paramName){params_array[i]=items_array[0]+'='+newValue;}}
return uri_array[0]+'?'+params_array.join('&');};jQuery(window).load(function(){if(supportsNavigationTiming()){var pageLoadTime=(new Date().getTime())-window.performance.timing.navigationStart;var threshold=0;if(pageLoadTime>0){threshold=pageLoadTime/10;}
var rTs=$('.rTS');if(rTs){rTs.each(function(e){var replacerTimeSpentNano=+($(this).text());if(replacerTimeSpentNano>0){replacerTimeSpentNano=replacerTimeSpentNano/1000000;if(replacerTimeSpentNano>threshold){$(this).prepend("<span style='font-size: 27px; color:red; margin: 0 7px 0 0; padding: 0;'>&#x26a0;</span>").css("border","1px solid red");}else{$(this).css("color","green");}}});}}});function supportsNavigationTiming(){return!!(window.performance&&window.performance.timing);}
function checkForFigTabContent(){if($(".figuresContent").is(":visible"))
return true;else
setTimeout(checkForFigTabContent,50);}}
function checkQuickSearchInput(aForm,quickSearch){if(aForm.elements["AllField"].value==quickSearch){var url="/action/doSearch";window.location=url;}else{aForm.submit();}}
function resizePopup(imagePath){var img=new Image();img.src=imagePath;img.onload=function(){var popupWidth=this.width;var popupHeight=this.height;if(popupWidth>980)
popupWidth=980;resizeTo(popupWidth,popupHeight);}}
function popUpTermsAndConditions(url){var newWindow=window.open(url,"_blank","toolbar=yes, scrollbars=yes,menubar=yes,resizable=yes, top=500, left=500, width=850, height=600");}
function selectTarget(elem){if(elem.selectedIndex>-1){var selected=elem.options[elem.selectedIndex].value;if(selected=='medline'||selected=='ads'||selected=='crossref'||selected=='scholar'){document.getElementById('frmQuickSearch').setAttribute('target','_blank');}
else{document.getElementById('frmQuickSearch').setAttribute('target','_self');}}}
function radioTarget(elem){if(elem.value=='medline'||elem.value=='ads'||elem.value=='crossref'||elem.value=='scholar'){document.getElementById('frmQuickSearch').setAttribute('target','_blank');}
else{document.getElementById('frmQuickSearch').setAttribute('target','_self');}}
function loadRecaptcha(){if(!grecaptcha)return;$('.g-recaptcha').filter(function(){return!$(this).hasClass('explicit');}).each(function(){grecaptcha.render($(this)[0],$(this).data());});}
function clearCapcha(){if(grecaptcha)
grecaptcha.reset(0);}
jQuery(document).ready(function(){jQuery(".google-scholar").click(function(e){e.preventDefault();var selected_languageCode=jQuery("#google_translate_element :selected").val();if(!selected_languageCode){var defaultLang=false;for(var i=0;i<navigator.languages.length;i++){if(navigator.languages[i]=="en"){defaultLang=true;break;}}
if(defaultLang)
selected_languageCode="en";else
selected_languageCode=navigator.language;}
jQuery(this).attr('href',returnHrefParameter("hl",selected_languageCode,jQuery(this).attr('href')));window.location.href=jQuery(this).attr('href');});function returnHrefParameter(name,value,url){var url_with_new_hl;url_with_new_hl=url.replace(new RegExp('([?|&]'+name+'=)'+'(.+?)(&|$)'),"$1"+encodeURIComponent(value)+"$3");return url_with_new_hl;}});
$(document).ready(function(){$('.showRefEvent').click(function(e){var rid=$(this).attr("data-rid");rid=rid.split(" ");if(rid.length>1){var referenceText="";$.each(rid,function(index,value){referenceText+=document.getElementById(value).innerHTML+"<br/>";});}
else{var referenceText=document.getElementById(rid[0])&&document.getElementById(rid[0]).innerHTML||$(this).attr("data-refrance");}
var fullReference=referenceText;var refLink=$(this).attr("data-refLink");showRef(this,''+rid+'',''+fullReference+'',''+refLink+'');return false;});$('.footNoteViewer').click(function(e){if(!$(this).next().is('span.ref')){var fid=$(this).attr("data-id");var content=document.getElementById(fid).innerHTML;showFootNote(this,fid,content,fid);return false;}});});function showRef(ref,ids,refValue,refSection){var balloon;$("span.ref:has(.balloon-wrap)").remove();if(ref&&ids&&refValue&&refSection){refValue.replace("&lt;br /&gt;","<br />");if($("[name="+refSection+"]").length||$("#"+refSection).length){if($(".references:hidden").length)
refSection=document.location.origin+$(ref).data('referenceslink');else
refSection='#'+refSection;}else{refSection=$(ref).data('referenceslink');}
balloon=$('<span class="balloon-wrap"><span class="balloon"><a title="Hide Reference Information" onclick="hideRefBalloon(this);return false;" href="#" class="close"></a>'+refValue+'<a class="refLink" title="View References" onclick="hideRefBalloon(this);resetHref();" href="'+refSection+'">View Full Reference List</a></span></span>');$(ref).after($('<span class="ref"></span>').append(balloon));window.openedReferenceBalloon&&hideRefBalloon(window.openedReferenceBalloon);window.openedReferenceBalloon=balloon;balloon.show();balloon.attr("id","openBalloon");$(document).bind('click',offRefClickHandler);}};function showRefUpdate(ref,ids,refValueID,refSection){var balloon;var refValue;if(ref&&ids&&refValueID&&refSection){refValue=getHTML(refValueID)
balloon=$('<span class="balloon-wrap"><span class="balloon"><a title="Hide Reference Information" onclick="hideRefBalloon(this);return false;" href="#" class="close"></a>'+$($.parseHTML(refValue)).text()+'<a class="refLink" title="View References" onclick="hideRefBalloon(this);resetHref();" href="'+"#"+refSection+'">View Full Reference List</a></span></span>');$(ref).after($('<span class="ref">').append(balloon));window.openedReferenceBalloon&&hideRefBalloon(window.openedReferenceBalloon);window.openedReferenceBalloon=balloon;balloon.show();balloon.attr("id","openBalloon");$(document).bind('click',offRefClickHandler);}};function hideRefBalloon(ref){window.openedReferenceBalloon=null;$(ref).closest("span.ref").remove();$(document).unbind('click',offRefClickHandler);};function resetHref(){location.hash='';}
function offRefClickHandler(event){var target=event.target;var $link=$('#openBalloon').parent().prev('a').eq(0);if(typeof $link=='undefined'){$link=$("");}
if($('#openBalloon').find($(target)).length==0&&target!=$link[0]&&$link.find(target).length===0){var sendThis=$('#openBalloon');hideRefBalloon(sendThis);}};function showFootNote(ref,ids,refValue,refSection){var balloon;if(ref&&ids&&refValue&&refSection){refValue.replace("&lt;br /&gt;","<br />");balloon=$('<span class="balloon-wrap"><span class="balloon"><a title="Hide Reference Information" onclick="hideRefBalloon(this);return false;" href="#" class="close">'+'</a>'+$($.parseHTML(refValue)).text()+'<a class="refLink" title="View References" onclick="hideRefBalloon(this);" href="'+"#"+refSection+'">View Full Footnote</a></span></span>');$(ref).after($('<span class="ref">').append(balloon));window.openedReferenceBalloon&&hideRefBalloon(window.openedReferenceBalloon);window.openedReferenceBalloon=balloon;balloon.show();balloon.attr("id","openBalloon");$(document).bind('click',offRefClickHandler);}};;
$.urlParam=function(name){var results=new RegExp('[\\?&]'+name+'=([^&#]*)').exec(window.location.href);if(results==null){return null;}
else{return results[1]||0;}};
jQuery(document).ready(function(){jQuery('.rightslink').click(function(e){var winprops="location=no,toolbar=no,directories=no,status=no,menubar=no,scrollbars=no,resizable=yes,width=750,height=650";PopUp=window.open(jQuery(this).attr('href'),'Rightslink',winprops);e.preventDefault();});});
function getCookie(cookieName){var cookieValue=" "+document.cookie;var cookieStart=cookieValue.indexOf(" "+cookieName+"=");if(cookieStart==-1)return null;cookieStart=cookieValue.indexOf("=",cookieStart)+1;var cookieEnd=cookieValue.indexOf(";",cookieStart);if(cookieEnd==-1){cookieEnd=cookieValue.length;}
cookieValue=unescape(cookieValue.substring(cookieStart,cookieEnd));return cookieValue;}
var date=new Date();var offset=date.getTimezoneOffset()*-1;var timeZoneCookie=getCookie("timezone");if(timeZoneCookie==null||offset!=timeZoneCookie){document.cookie="timezone="+offset;};
var Track={};(function(undefined){var jquery=typeof jQuery!='undefined';var elements={};var userAgent=navigator.userAgent.toLowerCase();var defaultAjaxSettings={async:!/webkit/.test(userAgent),asynchronous:!/webkit/.test(userAgent),cache:false,timeout:/msie/.test(userAgent)?0:100,requestTimeout:/msie/.test(userAgent)?0:100,contentType:'application/x-www-form-urlencoded',url:'/action/clickThrough'};var extend=function(dst,src){if(jquery){extend=jQuery.extend;}else{extend=Object.extend;}
return extend(dst,src);};var each=function(o,iterator){if(jquery){each=jQuery.each;}else{each=function(object,callback){var name,i=0,length=object.length,isObj=length===undefined||typeof object==="function";if(isObj){for(name in object){if(callback.call(object[name],name,object[name])===false){break;}}}else{for(var value=object[0];i<length&&callback.call(value,i,value)!==false;value=object[++i]){}}
return object;};}
return each(o,iterator);};var bind=function(selector,options,callback){var jQueryBind=function(selector,options,callback){if(options.selector){jQuery(selector).on(options.on,options.selector,options,callback);}else{jQuery(selector).on(options.on,options,callback);}};var oldJQueryBind=function(selector,options,callback){var callbackToUse=callback;if(options.selector){callbackToUse=function(event){var $target=$(event.currentTarget);while(!$target.is(options.selector)&&$target.children().length){$target.children().each(function(){$target=$(this);if($target.is(options.selector)){return false;}});}
if($target.is(options.selector)){callback.call(event.target,event,options);}};jQuery(selector).data('TrackCallback',callbackToUse);}
jQuery(selector).bind(options.on,options,callbackToUse);};var prototypeBind=function(selector,options,callback){$$(selector).each(function(el){Event.observe(el,options.on,callback.bindAsEventListener(this,options));});};if(jquery){if(jQuery.fn.on){bind=jQueryBind;}else{bind=oldJQueryBind;}}else{bind=prototypeBind;}
return bind(selector,options,callback);};var unbind=function(selector,options,callback){var jQueryUnbind=function(selector,options,callback){if(options.selector){jQuery(selector).off(options.on,options.selector,options,callback);}else{jQuery(selector).off(options.on,options,callback);}};var oldJQueryUnbind=function(selector,options,callback){if(options.selector){callback=jQuery(selector).data('TrackCallback');}
if(callback){jQuery(selector).unbind(options.on,callback);}else{jQuery(selector).unbind(options.on);}};var prototypeUnbind=function(selector,options,callback){$$(selector).each(function(el){Event.stopObserving(el,options.on);});};if(jquery){if(jQuery.fn.on){unbind=jQueryUnbind;}else{unbind=oldJQueryUnbind;}}else{unbind=prototypeUnbind;}
return unbind(selector,options,callback);};var sendBeacon=function(options){var formData=new FormData();for(var key in options.data){if(options.data.hasOwnProperty(key)){formData.append(key,options.data[key]);}}
navigator.sendBeacon(options.url,formData);};var ajax=function(ajaxOptions){if(ajaxOptions.useBeacon&&navigator.sendBeacon){ajax=sendBeacon;}else if(jquery){ajax=jQuery.ajax;}else{ajax=function(options){options.parameters=options.data;new Ajax.Request(options.url,options);}}
ajax(ajaxOptions);};var defaultFire=function(options,data){var ajaxSettings=extend(extend({},defaultAjaxSettings),options.ajaxSettings);ajaxSettings.data=extend(extend({},ajaxSettings.data),data);ajax(ajaxSettings);};var defaultOptions={on:'mouseup',fire:defaultFire,acceptEvent:function(e){return e.which===1||e.which===2;},data:{}};var methods={setup:function(options){if(options.fire!==undefined){defaultFire=options.fire;}
if(options.options!==undefined){defaultOptions=extend(extend({},defaultOptions),options.options);}
if(options.ajax!==undefined){defaultAjaxSettings=extend(extend({},defaultAjaxSettings),options.ajax);}},init:function(el){each(elements=el,function(selector,options){if(Object.prototype.toString.call(options)==='[object Array]'){var array=options;for(var i=0;i<array.length;++i){options=array[i];options=extend(extend({},defaultOptions),options);if(options.fire!==undefined){bind(selector,options,methods.onEvent);}}}else{options=extend(extend({},defaultOptions),options);if(options.fire!==undefined){bind(selector,options,methods.onEvent);}}});return this;},destroy:function(){elements.each(function(selector,options){unbind(selector,options.on,options.fire);});return this;},onEvent:function(event,options){if(options==undefined){options=event.data;}
var data=options.data;if(typeof options.acceptEvent=='function'&&!options.acceptEvent(event)){return true;}
var addData=options.addData;if(typeof addData=='function'){try{extend(data,addData.call(event.target,options,event));}catch(ex){if(console&&console.log){console.log('Failed to extract data:'+ex);return;}}}
options.fire(options,data);return true;}};Track=function(method){if(methods[method]){return methods[method].apply(this,Array.prototype.slice.call(arguments,1));}else if(typeof method==='object'||!method){return methods.init.apply(this,arguments);}};})();
(function(){window.TrackPageTransitions=function(Track,$,o){o=o||{};var $elements=$('*[data-track]');if(!$elements.length){return;}
Track('setup',{ajax:{url:o.url||'/action/analytics',method:'POST',useBeacon:true}});var captureAllPageTransitions=$('html[data-track]').length!=0;Track({body:[{on:'mousedown keydown',selector:captureAllPageTransitions?'a[href]':'*[data-track] a[href], a[href][data-track]',addData:extractData,acceptEvent:function(e){return e.which==1||e.keyCode==13;},data:{EventType:'PageTransition'}},{on:'submit',selector:captureAllPageTransitions?'form':'*[data-track] form, form[data-track]',addData:extractData,data:{EventType:'PageTransition'}}]});};if(typeof Track!='undefined'){if(typeof jQuery!='undefined'){jQuery(document).ready(function(){TrackPageTransitions(Track,jQuery);});}else if(typeof window.Prototype!='undefined'){document.observe('dom:loaded',function(){TrackPageTransitions(Track,$$);});}}
function collectData(el){var d={};$.each(el.attributes,function(i,attrib){var name=attrib.name;if(name.indexOf('data-')==0){name=name.substring("data-".length);name=name.replace(/-([a-z])/g,function(g){return g[1].toUpperCase();});d[name]=attrib.value;}});return d;}
function extractData(options,event){var data={};var $html=$(document.documentElement);var requestId=$html.data('requestId');if(requestId){data.OriginRequestId=requestId;data.OriginUrl=window.location.href;var date=new Date();date.setTime(date.getTime()+60*1000);var expires=date.toGMTString();document.cookie='OriginRequestId='+requestId+'; expires='+expires+"; path=/";}
var $this=$(this);var href;if($this.is("a")){data.LinkText=$this.text();href=$this.attr('href');}else if($this.is("form")){href=$this.attr('action');}
if(href){data.LinkHref=href;if(href.indexOf('/doi/')!=-1){data.doi=href.split("/doi/")[1];}}
var innerFound=false;$.each($this.add($this.parents()),function(){var $ancestor=$(this);var d=null;try{d=$ancestor.data();}catch(ex){d=false;}
if(d===false){d=collectData($ancestor.get(0));}
for(var property in d){if(d.hasOwnProperty(property)&&property.indexOf("track")==0){var name=property.substring("track".length);if(name=="Func"&&d[property]){var func=window[d[property]];if($.isFunction(func)){try{var extra=func.call($ancestor);if(extra){$.extend(data,extra);}}catch(ex){}}
continue;}
if(name.length){data['Track'+name]=d[property];}
if(!innerFound){innerFound=true;if($this.is('a')){var linkIndex=$('a[href*="/doi"], a[href*="/loi"], a[href*="/toc"]',$ancestor).index($this);if(linkIndex>-1){data.LinkIndex=linkIndex+1;}}}}}});if(event.which==1){data.ClickPageX=event.pageX;data.ClickPageY=event.pageY;}
return data;}})();
(function(){var TrackSearchResults=function(Track,$,undefined){var $searchResults=$('.searchResultContainer, #frmSearchResults, #frmSearch, #searchResultsAll, #searchResults, .searchResult, .search-result, #searchResultContent');if(!$searchResults.length){return;}
Track('setup',{ajax:{url:'/action/analytics',useBeacon:true}});var resultSelectorAction={selector:'a[href^="/doi"], a[href^="/article"]',addData:extractDataSearchResult,data:{EventType:'SearchResultClicked'}};Track({'.searchResultContainer .articleLinks, #frmSearch .articleEntry td, .searchResultsListing li':resultSelectorAction,'#searchResultsAll .articleEntry td, #searchResults .searchResultItem .articleInfo':resultSelectorAction,'#frmSearchResults .articleEntry td, #frmSearchResults .articleEntry div, #frmSearchResults .searchResultItem span':resultSelectorAction,'#frmSearchResults .searchResultItem .atcl-item, #frmSearchResults .searchResultItem div':resultSelectorAction,'#frmSearchResults .searchEntry .searchEntryTools, .searchResult .result-list li':resultSelectorAction,'.contentContainer .searchResult td, .search-result .items-results li span':resultSelectorAction,'#frmSearch .article-details, #frmSearchResults .search-results .search-result-item':resultSelectorAction,'#searchResultContent .o-results .m-result':resultSelectorAction});};if(typeof Track!='undefined'){if(typeof jQuery!='undefined'){jQuery(document).ready(function(){TrackSearchResults(Track,jQuery);});}else if(typeof window.Prototype!='undefined'){document.observe('dom:loaded',function(){TrackSearchResults(Track,$$);});}}
function extractCommonData(data,options,event){var $this=$(this);var searchResultRows;var clickedRow;var $searchResultRow=$this.closest('#searchResultItems, .search-results, .searchEntry, .contentContainer, #frmSearch, #frmSearchResults, #searchResultContent .o-results');if($searchResultRow.length){searchResultRows=$searchResultRow.find('.articleEntry, .searchResultItem, .searchEntry, .article-details, .search-result-item, .m-result');clickedRow=$this.closest('.articleEntry, .searchResultItem, .searchEntry, .article-details, .search-result-item, .m-result');}else{$searchResultRow=$this.closest('.searchResultsListing, .result-list, .items-results');if($searchResultRow.length){searchResultRows=$searchResultRow.children('li');clickedRow=$this.closest('li');}}
if(searchResultRows&&clickedRow){data.searchPageRank=searchResultRows.index(clickedRow)+1;}
var $container=$this.closest('.searchResultContainer, .type-search-results, .searchNav, .searchResult, .search-result, #searchResultContent');if(!$container.length){$container=$('.searchResults_paging, .searchResultsCont, .searchResults');}
if($container.length){var $selectedPage=$container.find('.pages .selected, .pages .activeLink, .pages .current, .searchPages .activeLink, .pagination .activeLink, .pagination .active, .pageLinks .selected, .paginationLinks .s-active ');if($selectedPage.length){data.resultPageNum=parseInt($selectedPage.text());}else{var $paginationElements=$container.find('.paginationControls, .paginationLinks').first().find('li:not(:has(a))');if($paginationElements.length){$paginationElements.each(function(){var $innerMostChildOfPagination=$(this).children();while($innerMostChildOfPagination.length){$innerMostChildOfPagination=$innerMostChildOfPagination.children();}
$selectedPage=$.trim($innerMostChildOfPagination.end().text());if($selectedPage.length&&isInt($selectedPage)){data.resultPageNum=parseInt($selectedPage);return false;}});}}}
if(!data.resultPageNum){var startPageFromSearchForm=$('#searchResultsAll, #frmSearch, #frmSearchResults').find('input[name=startPage]');if(startPageFromSearchForm.length){data.resultPageNum=parseInt(startPageFromSearchForm.val())+1;}}}
function isInt(n){return parseInt(n)+0===parseInt(n);}
function extractDataSearchResult(options,event){var data={};var $this=$(this);var $articleEntry=$this.closest('.articleEntry, .searchResultItem, .articleCitation, .m-result');if($articleEntry.length){data.doi=$articleEntry.find(':input[name="doi"]').val();if(!data.doi){data.pii=$articleEntry.find(':input[name="pii"]').val();}}
if(!data.doi&&!data.pii){var href=$this.attr('href');if(typeof href=='undefined'){var link=$this.closest('a');href=link.attr('href');}
if(href.includes("doi")){var doi=href.split("/doi/")[1];var doiPattern=new RegExp('^10\\.\\d\\d\\d\\d(\\d*)/(.+)');if(doiPattern.test(doi)){data.doi=doi;}else{data.doi=doi.substring(doi.indexOf('/')+1);}}else if(href.includes("article/")){var pii=href.split("/article/")[1];data.pii=pii.substring(0,pii.indexOf("/"));}}
extractCommonData.call(this,data,options,event);return data;}
function extractDataForPagination(options,event){var data={};var $this=$(this);var page=$this.text();if(page){data.SearchResultsPageClicked=page;}
extractCommonData(data,options,event);return data;}})();
(function($){$(document).ready(function(){if($('.video-source').length>0){var vids=$('.flowPlayer');for(var i=0;i<vids.length;i++){var srcId=$(vids[i]).attr('id');srcId=srcId+"_src";var sourceEl=vids[i].getElementsByTagName("source")[0];$(sourceEl).attr("src",document.getElementById(srcId).innerHTML);}
$.getScript("/templates/jsp/js/lib/flowplayer/flowplayer.min.js",function(){$.getScript("/templates/jsp/js/lib/flowplayer/flowplayer.hlsjs.min.js",function(){$(".flowPlayer").flowplayer({swfHls:"/templates/jsp/js/lib/flowplayer/flowplayerhls.swf",script:"/templates/jsp/js/lib/flowplayer/embed.min.js",swf:"/templates/jsp/js/lib/flowplayer/flowplayer.swf"});});flowplayer(function(api,root){api.on("error",function(e,api,err){if(err.code==4){$(".fp-message",root).html("An error has occurred trying to display this video. Please reload the page. If reloading the page doesn't work then please contact the support administrator.");}});});});}
if($(".fp-audio").length>0){var audios=$('.fp-audio');for(var i=0;i<audios.length;i++){var srcId=$(audios[i]).attr('id');srcId=srcId+"_"+i;$(audios[i]).attr('id',srcId);}
$.getScript("/templates/jsp/js/lib/flowplayer/flowplayer.min.js",function(){$.getScript("/templates/jsp/js/lib/flowplayer/flowplayer.audio.min.js",function(){$(".fp-audio").flowplayer({splash:true});$(".fp-ui").removeAttr("title");});});}});})(jQuery);
var googletag=googletag||{};googletag.cmd=googletag.cmd||[];(function(){var gpt=document.createElement('script');gpt.async=true;gpt.type='text/javascript';gpt.src=document.location.protocol+'//www.googletagservices.com/tag/js/gpt.js';gpt.setAttribute('rel','preconnect');var node=document.getElementsByTagName('script')[0];node.parentNode.insertBefore(gpt,node);})();
(function($,window,document,undefined){$(document).ready(function(){function loadDialogContent(data){var $deferred=$.Deferred();$.ajax({url:'/pb/widgets/taggedPublications/dialog',method:'post',data:$.extend({},data,{'do':'tagPublicationDialog'}),asc:false}).done(function(html){$deferred.resolve(html,data);}).fail(function(){$deferred.reject(arguments);});return $deferred.promise();}
function appendHiddenFields($container,data){data=data||{};for(var key in data){if(data.hasOwnProperty(key)){var value=data[key];var $input=$(document.createElement('input'));$input.attr('name',key);$input.attr('type','hidden');$input.attr('value',value);$input.appendTo($container);}}}
function serializeObject(obj){var o={};var a=obj.serializeArray();$.each(a,function(){if(o[this.name]){if(!o[this.name].push){o[this.name]=[o[this.name]];}
o[this.name].push(this.value||'');}else{o[this.name]=this.value||'';}});return o;}
function showDialog(html,data){var $deferred=$.Deferred();var $html=$(document.createElement('div'));$html.html(html);var $tags=$html.find('.tags');var title=$html.data('title')||'Add to favorites';var usedTags=[];var usedTagsCsv=$html.find('.used-tags').text();if(usedTagsCsv){usedTags=usedTagsCsv.split(',');}
var options={allowSpaces:true,tagLimit:10};if(usedTags.length){options.availableTags=usedTags;}
$tags.tagit(options);var $form=$html.is('form')?$html:$html.find('form');appendHiddenFields($form,data);$html.dialog({title:title,modal:true,autoOpen:true,resizable:false,buttons:{OK:function(){var data=serializeObject($form);$deferred.resolve(data);$tags.tagit('destroy');$(this).dialog('close');},Cancel:function(){$tags.tagit('destroy');$(this).dialog('close');$deferred.reject();}}});return $deferred.promise();}
function updatePublicationTags(data){var $deferred=$.Deferred();$.post('/pb/widgets/taggedPublications/tagPublication',data).done(function(response){$deferred.resolve(data,response);}).fail(function(){$deferred.reject(arguments);});return $deferred;}
var $taggedPublications=$('.taggedPublications');if($taggedPublications.length){var $form=$taggedPublications.find('form');$taggedPublications.find('.highlight').animate({backgroundColor:'#eeeeff'},100,function(){$(this).animate({backgroundColor:'white'},100,function(){$(this).css({backgroundColor:''})})});$taggedPublications.find('td.button').each(function(){var $editButton=$(document.createElement('button'));$editButton.attr('type','button');$editButton.addClass('edit');$editButton.text('Edit');$(this).append($editButton);});$taggedPublications.find(':input[name="delete"]').click(function(event){event.preventDefault();var $selected=$taggedPublications.find(':input[name="tagged"]:checked');var $rows=$([]);$selected.each(function(){var $checkbox=$(this);var $tr=$checkbox.closest('tr');$rows=$rows.add($tr);});$rows.fadeOut('normal',function(){$(this).hide();submitForm({'delete':'delete'});})});var selectALL=$taggedPublications.find(':input[name=select-all]');var selectAllPages=$taggedPublications.find(':input[name=selectAllPages]');selectALL.change(function(event){if(selectALL.is(":checked")){$taggedPublications.find(':input[name="doi"]').prop('checked',true);selectALL.prop("checked",true);selectAllPages.attr("disabled",true);}else{$taggedPublications.find(':input[name="doi"]').prop("checked",false);selectALL.prop("checked",false);selectAllPages.attr("disabled",false);}});selectAllPages.change(function(event){if(selectAllPages.is(":checked")){$taggedPublications.find(':input[name="doi"]').prop('checked',true);selectAllPages.prop("checked",true);selectALL.prop("disabled",true);}else{$taggedPublications.find(':input[name="doi"]').prop("checked",false);selectAllPages.prop("checked",false);selectALL.prop("disabled",false);}});$taggedPublications.find(':input[name="doi"]').change(function(event){var selected=$(this);if(!(selected.is(":checked"))){$taggedPublications.find(':input[name="select-all"]').prop("checked",false);}});function activateDropdown($dropdown,reset){if(reset){$dropdown.find('option').removeAttr('selected');$dropdown.find('option:first').attr('selected','selected');}
$dropdown.change(function(event){var $selected=reset?$dropdown.find("option:not(:first):selected"):$dropdown.find("option:selected");if($selected.length){var data=$selected.data();submitForm(data);}});$dropdown.css({display:'block'});}
var $actions=$form.find(':input[name="action"]');if($actions.length){activateDropdown($actions,true);$form.find(':input[name="delete"]').hide();}
var $filter=$form.find(':input[name="filter"]');activateDropdown($filter,false);function submitForm(data){appendHiddenFields($form,data);$form.submit();}
function onEditClicked(event){var $target=$(event.target||event.srcElement);var $publication=$target.closest('.publication');var data=$publication.data();loadDialogContent(data).then(showDialog).then(updatePublicationTags).then(function(data){submitForm({highlight:data.doi});})}
$taggedPublications.on('click','button.edit',onEditClicked);}
var $addLink=$('.tagPublication a[data-doi], .addToFav a[data-doi]');if($addLink.length){$addLink.click(function(event){event.preventDefault();event.stopPropagation();var data=$addLink.data();function updateAddLinkOnSuccess(){var $span=$(document.createElement('span'));var message=$addLink.data('success-message')||'Added to favorites';$span.html(message);$addLink.replaceWith($span);}
function goToFavorites(){window.location.href="/action/showTaggedPublications";}
loadDialogContent(data).then(showDialog).then(updatePublicationTags).then(updateAddLinkOnSuccess).then(goToFavorites);});}});})
(jQuery,window,document);
(function($){$.widget('ui.tagit',{options:{allowDuplicates:false,caseSensitive:true,fieldName:'tags',placeholderText:null,readOnly:false,removeConfirmation:false,tagLimit:null,availableTags:[],autocomplete:{},showAutocompleteOnFocus:false,allowSpaces:false,singleField:false,singleFieldDelimiter:',',singleFieldNode:null,animate:true,tabIndex:null,beforeTagAdded:null,afterTagAdded:null,beforeTagRemoved:null,afterTagRemoved:null,onTagClicked:null,onTagLimitExceeded:null,onTagAdded:null,onTagRemoved:null,tagSource:null},_create:function(){var that=this;if(this.element.is('input')){this.tagList=$('<ul></ul>').insertAfter(this.element);this.options.singleField=true;this.options.singleFieldNode=this.element;this.element.addClass('tagit-hidden-field');}else{this.tagList=this.element.find('ul, ol').andSelf().last();}
this.tagInput=$('<input type="text" />').addClass('ui-widget-content');if(this.options.readOnly)this.tagInput.attr('disabled','disabled');if(this.options.tabIndex){this.tagInput.attr('tabindex',this.options.tabIndex);}
if(this.options.placeholderText){this.tagInput.attr('placeholder',this.options.placeholderText);}
if(!this.options.autocomplete.source){this.options.autocomplete.source=function(search,showChoices){var filter=search.term.toLowerCase();var choices=$.grep(this.options.availableTags,function(element){return(element.toLowerCase().indexOf(filter)===0);});if(!this.options.allowDuplicates){choices=this._subtractArray(choices,this.assignedTags());}
showChoices(choices);};}
if(this.options.showAutocompleteOnFocus){this.tagInput.focus(function(event,ui){that._showAutocomplete();});if(typeof this.options.autocomplete.minLength==='undefined'){this.options.autocomplete.minLength=0;}}
if($.isFunction(this.options.autocomplete.source)){this.options.autocomplete.source=$.proxy(this.options.autocomplete.source,this);}
if($.isFunction(this.options.tagSource)){this.options.tagSource=$.proxy(this.options.tagSource,this);}
this.tagList.addClass('tagit').addClass('ui-widget ui-widget-content ui-corner-all').append($('<li class="tagit-new"></li>').append(this.tagInput)).click(function(e){var target=$(e.target);if(target.hasClass('tagit-label')){var tag=target.closest('.tagit-choice');if(!tag.hasClass('removed')){that._trigger('onTagClicked',e,{tag:tag,tagLabel:that.tagLabel(tag)});}}else{that.tagInput.focus();}});var addedExistingFromSingleFieldNode=false;if(this.options.singleField){if(this.options.singleFieldNode){var node=$(this.options.singleFieldNode);var tags=node.val().split(this.options.singleFieldDelimiter);node.val('');$.each(tags,function(index,tag){that.createTag(tag,null,true);addedExistingFromSingleFieldNode=true;});}else{this.options.singleFieldNode=$('<input type="hidden" style="display:none;" value="" name="'+this.options.fieldName+'" />');this.tagList.after(this.options.singleFieldNode);}}
if(!addedExistingFromSingleFieldNode){this.tagList.children('li').each(function(){if(!$(this).hasClass('tagit-new')){that.createTag($(this).text(),$(this).attr('class'),true);$(this).remove();}});}
this.tagInput.keydown(function(event){if(event.which==$.ui.keyCode.BACKSPACE&&that.tagInput.val()===''){var tag=that._lastTag();if(!that.options.removeConfirmation||tag.hasClass('remove')){that.removeTag(tag);}else if(that.options.removeConfirmation){tag.addClass('remove ui-state-highlight');}}else if(that.options.removeConfirmation){that._lastTag().removeClass('remove ui-state-highlight');}
if((event.which===$.ui.keyCode.COMMA&&event.shiftKey===false)||event.which===$.ui.keyCode.ENTER||(event.which==$.ui.keyCode.TAB&&that.tagInput.val()!=='')||(event.which==$.ui.keyCode.SPACE&&that.options.allowSpaces!==true&&($.trim(that.tagInput.val()).replace(/^s*/,'').charAt(0)!='"'||($.trim(that.tagInput.val()).charAt(0)=='"'&&$.trim(that.tagInput.val()).charAt($.trim(that.tagInput.val()).length-1)=='"'&&$.trim(that.tagInput.val()).length-1!==0)))){if(!(event.which===$.ui.keyCode.ENTER&&that.tagInput.val()==='')){event.preventDefault();}
if(!(that.options.autocomplete.autoFocus&&that.tagInput.data('autocomplete-open'))){that.tagInput.autocomplete('close');that.createTag(that._cleanedInput());}}}).blur(function(e){if(!that.tagInput.data('autocomplete-open')){that.createTag(that._cleanedInput());}});if(this.options.availableTags||this.options.tagSource||this.options.autocomplete.source){var autocompleteOptions={select:function(event,ui){that.createTag(ui.item.value);return false;}};$.extend(autocompleteOptions,this.options.autocomplete);autocompleteOptions.source=this.options.tagSource||autocompleteOptions.source;this.tagInput.autocomplete(autocompleteOptions).bind('autocompleteopen.tagit',function(event,ui){that.tagInput.data('autocomplete-open',true);}).bind('autocompleteclose.tagit',function(event,ui){that.tagInput.data('autocomplete-open',false)});this.tagInput.autocomplete('widget').addClass('tagit-autocomplete');}},destroy:function(){$.Widget.prototype.destroy.call(this);this.element.unbind('.tagit');this.tagList.unbind('.tagit');this.tagInput.removeData('autocomplete-open');this.tagList.removeClass(['tagit','ui-widget','ui-widget-content','ui-corner-all','tagit-hidden-field'].join(' '));if(this.element.is('input')){this.element.removeClass('tagit-hidden-field');this.tagList.remove();}else{this.element.children('li').each(function(){if($(this).hasClass('tagit-new')){$(this).remove();}else{$(this).removeClass(['tagit-choice','ui-widget-content','ui-state-default','ui-state-highlight','ui-corner-all','remove','tagit-choice-editable','tagit-choice-read-only'].join(' '));$(this).text($(this).children('.tagit-label').text());}});if(this.singleFieldNode){this.singleFieldNode.remove();}}
return this;},_cleanedInput:function(){return $.trim(this.tagInput.val().replace(/^"(.*)"$/,'$1'));},_lastTag:function(){return this.tagList.find('.tagit-choice:last:not(.removed)');},_tags:function(){return this.tagList.find('.tagit-choice:not(.removed)');},assignedTags:function(){var that=this;var tags=[];if(this.options.singleField){tags=$(this.options.singleFieldNode).val().split(this.options.singleFieldDelimiter);if(tags[0]===''){tags=[];}}else{this._tags().each(function(){tags.push(that.tagLabel(this));});}
return tags;},_updateSingleTagsField:function(tags){$(this.options.singleFieldNode).val(tags.join(this.options.singleFieldDelimiter)).trigger('change');},_subtractArray:function(a1,a2){var result=[];for(var i=0;i<a1.length;i++){if($.inArray(a1[i],a2)==-1){result.push(a1[i]);}}
return result;},tagLabel:function(tag){if(this.options.singleField){return $(tag).find('.tagit-label:first').text();}else{return $(tag).find('input:first').val();}},_showAutocomplete:function(){this.tagInput.autocomplete('search','');},_findTagByLabel:function(name){var that=this;var tag=null;this._tags().each(function(i){if(that._formatStr(name)==that._formatStr(that.tagLabel(this))){tag=$(this);return false;}});return tag;},_isNew:function(name){return!this._findTagByLabel(name);},_formatStr:function(str){if(this.options.caseSensitive){return str;}
return $.trim(str.toLowerCase());},_effectExists:function(name){return Boolean($.effects&&($.effects[name]||($.effects.effect&&$.effects.effect[name])));},createTag:function(value,additionalClass,duringInitialization){var that=this;value=$.trim(value);if(this.options.preprocessTag){value=this.options.preprocessTag(value);}
if(value===''){return false;}
if(!this.options.allowDuplicates&&!this._isNew(value)){var existingTag=this._findTagByLabel(value);if(this._trigger('onTagExists',null,{existingTag:existingTag,duringInitialization:duringInitialization})!==false){if(this._effectExists('highlight')){existingTag.effect('highlight');}}
return false;}
if(this.options.tagLimit&&this._tags().length>=this.options.tagLimit){this._trigger('onTagLimitExceeded',null,{duringInitialization:duringInitialization});return false;}
var label=$(this.options.onTagClicked?'<a class="tagit-label"></a>':'<span class="tagit-label"></span>').text(value);var tag=$('<li></li>').addClass('tagit-choice ui-widget-content ui-state-default ui-corner-all').addClass(additionalClass).append(label);if(this.options.readOnly){tag.addClass('tagit-choice-read-only');}else{tag.addClass('tagit-choice-editable');var removeTagIcon=$('<span></span>').addClass('ui-icon ui-icon-close');var removeTag=$('<a><span class="text-icon">\xd7</span></a>').addClass('tagit-close').append(removeTagIcon).click(function(e){that.removeTag(tag);});tag.append(removeTag);}
if(!this.options.singleField){var escapedValue=label.html();tag.append('<input type="hidden" value="'+escapedValue+'" name="'+this.options.fieldName+'" class="tagit-hidden-field" />');}
if(this._trigger('beforeTagAdded',null,{tag:tag,tagLabel:this.tagLabel(tag),duringInitialization:duringInitialization})===false){return;}
if(this.options.singleField){var tags=this.assignedTags();tags.push(value);this._updateSingleTagsField(tags);}
this._trigger('onTagAdded',null,tag);this.tagInput.val('');this.tagInput.parent().before(tag);this._trigger('afterTagAdded',null,{tag:tag,tagLabel:this.tagLabel(tag),duringInitialization:duringInitialization});if(this.options.showAutocompleteOnFocus&&!duringInitialization){setTimeout(function(){that._showAutocomplete();},0);}},removeTag:function(tag,animate){animate=typeof animate==='undefined'?this.options.animate:animate;tag=$(tag);this._trigger('onTagRemoved',null,tag);if(this._trigger('beforeTagRemoved',null,{tag:tag,tagLabel:this.tagLabel(tag)})===false){return;}
if(this.options.singleField){var tags=this.assignedTags();var removedTagLabel=this.tagLabel(tag);tags=$.grep(tags,function(el){return el!=removedTagLabel;});this._updateSingleTagsField(tags);}
if(animate){tag.addClass('removed');var hide_args=this._effectExists('blind')?['blind',{direction:'horizontal'},'fast']:['fast'];var thisTag=this;hide_args.push(function(){tag.remove();thisTag._trigger('afterTagRemoved',null,{tag:tag,tagLabel:thisTag.tagLabel(tag)});});tag.fadeOut('fast').hide.apply(tag,hide_args).dequeue();}else{tag.remove();this._trigger('afterTagRemoved',null,{tag:tag,tagLabel:this.tagLabel(tag)});}},removeTagByLabel:function(tagLabel,animate){var toRemove=this._findTagByLabel(tagLabel);if(!toRemove){throw"No such tag exists with the name '"+tagLabel+"'";}
this.removeTag(toRemove,animate);},removeAll:function(){var that=this;this._tags().each(function(index,tag){that.removeTag(tag,false);});}});})(jQuery);/*! DataTables 1.10.0
 * ©2008-2014 SpryMedia Ltd - datatables.net/license
 */
(function(window,document,undefined){(function(factory){"use strict";if(typeof define==='function'&&define.amd){define('datatables',['jquery-ui'],factory);}
else if(typeof exports==='object'){factory(require('jquery-ui'));}
else if(jQuery&&!jQuery.fn.dataTable){factory(jQuery);}}
(function($){"use strict";var DataTable;var _ext;var _Api;var _api_register;var _api_registerPlural;var _re_dic={};var _re_new_lines=/[\r\n]/g;var _re_html=/<.*?>/g;var _re_date_start=/^[\d\+\-a-zA-Z]/;var _re_escape_regex=new RegExp('(\\'+['/','.','*','+','?','|','(',')','[',']','{','}','\\','$','^','-'].join('|\\')+')','g');var _re_formatted_numeric=/[',$£€¥%\u2009\u202F]/g;var _empty=function(d){return!d||d==='-'?true:false;};var _intVal=function(s){var integer=parseInt(s,10);return!isNaN(integer)&&isFinite(s)?integer:null;};var _numToDecimal=function(num,decimalPoint){if(!_re_dic[decimalPoint]){_re_dic[decimalPoint]=new RegExp(_fnEscapeRegex(decimalPoint),'g');}
return typeof num==='string'?num.replace(/\./g,'').replace(_re_dic[decimalPoint],'.'):num;};var _isNumber=function(d,decimalPoint,formatted){var strType=typeof d==='string';if(decimalPoint&&strType){d=_numToDecimal(d,decimalPoint);}
if(formatted&&strType){d=d.replace(_re_formatted_numeric,'');}
return!d||d==='-'||(!isNaN(parseFloat(d))&&isFinite(d));};var _isHtml=function(d){return!d||typeof d==='string';};var _htmlNumeric=function(d,decimalPoint,formatted){if(_empty(d)){return true;}
var html=_isHtml(d);return!html?null:_isNumber(_stripHtml(d),decimalPoint,formatted)?true:null;};var _pluck=function(a,prop,prop2){var out=[];var i=0,ien=a.length;if(prop2!==undefined){for(;i<ien;i++){if(a[i]&&a[i][prop]){out.push(a[i][prop][prop2]);}}}
else{for(;i<ien;i++){if(a[i]){out.push(a[i][prop]);}}}
return out;};var _pluck_order=function(a,order,prop,prop2)
{var out=[];var i=0,ien=order.length;if(prop2!==undefined){for(;i<ien;i++){out.push(a[order[i]][prop][prop2]);}}
else{for(;i<ien;i++){out.push(a[order[i]][prop]);}}
return out;};var _range=function(len,start)
{var out=[];var end;if(start===undefined){start=0;end=len;}
else{end=start;start=len;}
for(var i=start;i<end;i++){out.push(i);}
return out;};var _stripHtml=function(d){return d.replace(_re_html,'');};var _unique=function(src)
{var
out=[],val,i,ien=src.length,j,k=0;again:for(i=0;i<ien;i++){val=src[i];for(j=0;j<k;j++){if(out[j]===val){continue again;}}
out.push(val);k++;}
return out;};function _fnHungarianMap(o)
{var
hungarian='a aa ai ao as b fn i m o s ',match,newKey,map={};$.each(o,function(key,val){match=key.match(/^([^A-Z]+?)([A-Z])/);if(match&&hungarian.indexOf(match[1]+' ')!==-1)
{newKey=key.replace(match[0],match[2].toLowerCase());map[newKey]=key;if(match[1]==='o')
{_fnHungarianMap(o[key]);}}});o._hungarianMap=map;}
function _fnCamelToHungarian(src,user,force)
{if(!src._hungarianMap){_fnHungarianMap(src);}
var hungarianKey;$.each(user,function(key,val){hungarianKey=src._hungarianMap[key];if(hungarianKey!==undefined&&(force||user[hungarianKey]===undefined))
{if(hungarianKey.charAt(0)==='o')
{if(!user[hungarianKey]){user[hungarianKey]={};}
$.extend(true,user[hungarianKey],user[key]);_fnCamelToHungarian(src[hungarianKey],user[hungarianKey],force);}
else{user[hungarianKey]=user[key];}}});}
function _fnLanguageCompat(lang)
{var defaults=DataTable.defaults.oLanguage;var zeroRecords=lang.sZeroRecords;if(!lang.sEmptyTable&&zeroRecords&&defaults.sEmptyTable==="No data available in table")
{_fnMap(lang,lang,'sZeroRecords','sEmptyTable');}
if(!lang.sLoadingRecords&&zeroRecords&&defaults.sLoadingRecords==="Loading...")
{_fnMap(lang,lang,'sZeroRecords','sLoadingRecords');}
if(lang.sInfoThousands){lang.sThousands=lang.sInfoThousands;}
var decimal=lang.sDecimal;if(decimal){_addNumericSort(decimal);}}
var _fnCompatMap=function(o,knew,old){if(o[knew]!==undefined){o[old]=o[knew];}};function _fnCompatOpts(init)
{_fnCompatMap(init,'ordering','bSort');_fnCompatMap(init,'orderMulti','bSortMulti');_fnCompatMap(init,'orderClasses','bSortClasses');_fnCompatMap(init,'orderCellsTop','bSortCellsTop');_fnCompatMap(init,'order','aaSorting');_fnCompatMap(init,'orderFixed','aaSortingFixed');_fnCompatMap(init,'paging','bPaginate');_fnCompatMap(init,'pagingType','sPaginationType');_fnCompatMap(init,'pageLength','iDisplayLength');_fnCompatMap(init,'searching','bFilter');}
function _fnCompatCols(init)
{_fnCompatMap(init,'orderable','bSortable');_fnCompatMap(init,'orderData','aDataSort');_fnCompatMap(init,'orderSequence','asSorting');_fnCompatMap(init,'orderDataType','sortDataType');}
function _fnBrowserDetect(settings)
{var browser=settings.oBrowser;var n=$('<div/>').css({position:'absolute',top:0,left:0,height:1,width:1,overflow:'hidden'}).append($('<div/>').css({position:'absolute',top:1,left:1,width:100,overflow:'scroll'}).append($('<div class="test"/>').css({width:'100%',height:10}))).appendTo('body');var test=n.find('.test');browser.bScrollOversize=test[0].offsetWidth===100;browser.bScrollbarLeft=test.offset().left!==1;n.remove();}
function _fnReduce(that,fn,init,start,end,inc)
{var
i=start,value,isSet=false;if(init!==undefined){value=init;isSet=true;}
while(i!==end){if(!that.hasOwnProperty(i)){continue;}
value=isSet?fn(value,that[i],i,that):that[i];isSet=true;i+=inc;}
return value;}
function _fnAddColumn(oSettings,nTh)
{var oDefaults=DataTable.defaults.column;var iCol=oSettings.aoColumns.length;var oCol=$.extend({},DataTable.models.oColumn,oDefaults,{"nTh":nTh?nTh:document.createElement('th'),"sTitle":oDefaults.sTitle?oDefaults.sTitle:nTh?nTh.innerHTML:'',"aDataSort":oDefaults.aDataSort?oDefaults.aDataSort:[iCol],"mData":oDefaults.mData?oDefaults.mData:iCol,idx:iCol});oSettings.aoColumns.push(oCol);var searchCols=oSettings.aoPreSearchCols;searchCols[iCol]=$.extend({},DataTable.models.oSearch,searchCols[iCol]);_fnColumnOptions(oSettings,iCol,null);}
function _fnColumnOptions(oSettings,iCol,oOptions)
{var oCol=oSettings.aoColumns[iCol];var oClasses=oSettings.oClasses;var th=$(oCol.nTh);if(!oCol.sWidthOrig){oCol.sWidthOrig=th.attr('width')||null;var t=(th.attr('style')||'').match(/width:\s*(\d+[pxem%])/);if(t){oCol.sWidthOrig=t[1];}}
if(oOptions!==undefined&&oOptions!==null)
{_fnCompatCols(oOptions);_fnCamelToHungarian(DataTable.defaults.column,oOptions);if(oOptions.mDataProp!==undefined&&!oOptions.mData)
{oOptions.mData=oOptions.mDataProp;}
if(oOptions.sType)
{oCol._sManualType=oOptions.sType;}
if(oOptions.className&&!oOptions.sClass)
{oOptions.sClass=oOptions.className;}
$.extend(oCol,oOptions);_fnMap(oCol,oOptions,"sWidth","sWidthOrig");if(typeof oOptions.iDataSort==='number')
{oCol.aDataSort=[oOptions.iDataSort];}
_fnMap(oCol,oOptions,"aDataSort");}
var mDataSrc=oCol.mData;var mData=_fnGetObjectDataFn(mDataSrc);var mRender=oCol.mRender?_fnGetObjectDataFn(oCol.mRender):null;var attrTest=function(src){return typeof src==='string'&&src.indexOf('@')!==-1;};oCol._bAttrSrc=$.isPlainObject(mDataSrc)&&(attrTest(mDataSrc.sort)||attrTest(mDataSrc.type)||attrTest(mDataSrc.filter));oCol.fnGetData=function(oData,sSpecific){var innerData=mData(oData,sSpecific);if(oCol.mRender&&(sSpecific&&sSpecific!==''))
{return mRender(innerData,sSpecific,oData);}
return innerData;};oCol.fnSetData=_fnSetObjectDataFn(mDataSrc);if(!oSettings.oFeatures.bSort)
{oCol.bSortable=false;th.addClass(oClasses.sSortableNone);}
var bAsc=$.inArray('asc',oCol.asSorting)!==-1;var bDesc=$.inArray('desc',oCol.asSorting)!==-1;if(!oCol.bSortable||(!bAsc&&!bDesc))
{oCol.sSortingClass=oClasses.sSortableNone;oCol.sSortingClassJUI="";}
else if(bAsc&&!bDesc)
{oCol.sSortingClass=oClasses.sSortableAsc;oCol.sSortingClassJUI=oClasses.sSortJUIAscAllowed;}
else if(!bAsc&&bDesc)
{oCol.sSortingClass=oClasses.sSortableDesc;oCol.sSortingClassJUI=oClasses.sSortJUIDescAllowed;}
else
{oCol.sSortingClass=oClasses.sSortable;oCol.sSortingClassJUI=oClasses.sSortJUI;}}
function _fnAdjustColumnSizing(settings)
{if(settings.oFeatures.bAutoWidth!==false)
{var columns=settings.aoColumns;_fnCalculateColumnWidths(settings);for(var i=0,iLen=columns.length;i<iLen;i++)
{columns[i].nTh.style.width=columns[i].sWidth;}}
var scroll=settings.oScroll;if(scroll.sY!==''||scroll.sX!=='')
{_fnScrollDraw(settings);}
_fnCallbackFire(settings,null,'column-sizing',[settings]);}
function _fnVisibleToColumnIndex(oSettings,iMatch)
{var aiVis=_fnGetColumns(oSettings,'bVisible');return typeof aiVis[iMatch]==='number'?aiVis[iMatch]:null;}
function _fnColumnIndexToVisible(oSettings,iMatch)
{var aiVis=_fnGetColumns(oSettings,'bVisible');var iPos=$.inArray(iMatch,aiVis);return iPos!==-1?iPos:null;}
function _fnVisbleColumns(oSettings)
{return _fnGetColumns(oSettings,'bVisible').length;}
function _fnGetColumns(oSettings,sParam)
{var a=[];$.map(oSettings.aoColumns,function(val,i){if(val[sParam]){a.push(i);}});return a;}
function _fnColumnTypes(settings)
{var columns=settings.aoColumns;var data=settings.aoData;var types=DataTable.ext.type.detect;var i,ien,j,jen,k,ken;var col,cell,detectedType,cache;for(i=0,ien=columns.length;i<ien;i++){col=columns[i];cache=[];if(!col.sType&&col._sManualType){col.sType=col._sManualType;}
else if(!col.sType){for(j=0,jen=types.length;j<jen;j++){for(k=0,ken=data.length;k<ken;k++){if(cache[k]===undefined){cache[k]=_fnGetCellData(settings,k,i,'type');}
detectedType=types[j](cache[k],settings);if(!detectedType||detectedType==='html'){break;}}
if(detectedType){col.sType=detectedType;break;}}
if(!col.sType){col.sType='string';}}}}
function _fnApplyColumnDefs(oSettings,aoColDefs,aoCols,fn)
{var i,iLen,j,jLen,k,kLen,def;var columns=oSettings.aoColumns;if(aoColDefs)
{for(i=aoColDefs.length-1;i>=0;i--)
{def=aoColDefs[i];var aTargets=def.targets!==undefined?def.targets:def.aTargets;if(!$.isArray(aTargets))
{aTargets=[aTargets];}
for(j=0,jLen=aTargets.length;j<jLen;j++)
{if(typeof aTargets[j]==='number'&&aTargets[j]>=0)
{while(columns.length<=aTargets[j])
{_fnAddColumn(oSettings);}
fn(aTargets[j],def);}
else if(typeof aTargets[j]==='number'&&aTargets[j]<0)
{fn(columns.length+aTargets[j],def);}
else if(typeof aTargets[j]==='string')
{for(k=0,kLen=columns.length;k<kLen;k++)
{if(aTargets[j]=="_all"||$(columns[k].nTh).hasClass(aTargets[j]))
{fn(k,def);}}}}}}
if(aoCols)
{for(i=0,iLen=aoCols.length;i<iLen;i++)
{fn(i,aoCols[i]);}}}
function _fnAddData(oSettings,aDataIn,nTr,anTds)
{var iRow=oSettings.aoData.length;var oData=$.extend(true,{},DataTable.models.oRow,{src:nTr?'dom':'data'});oData._aData=aDataIn;oSettings.aoData.push(oData);var nTd,sThisType;var columns=oSettings.aoColumns;for(var i=0,iLen=columns.length;i<iLen;i++)
{if(nTr){_fnSetCellData(oSettings,iRow,i,_fnGetCellData(oSettings,iRow,i));}
columns[i].sType=null;}
oSettings.aiDisplayMaster.push(iRow);if(!oSettings.oFeatures.bDeferRender)
{_fnCreateTr(oSettings,iRow,nTr,anTds);}
return iRow;}
function _fnAddTr(settings,trs)
{var row;if(!(trs instanceof $)){trs=$(trs);}
return trs.map(function(i,el){row=_fnGetRowElements(settings,el);return _fnAddData(settings,row.data,el,row.cells);});}
function _fnNodeToDataIndex(oSettings,n)
{return(n._DT_RowIndex!==undefined)?n._DT_RowIndex:null;}
function _fnNodeToColumnIndex(oSettings,iRow,n)
{return $.inArray(n,oSettings.aoData[iRow].anCells);}
function _fnGetCellData(oSettings,iRow,iCol,sSpecific)
{var oCol=oSettings.aoColumns[iCol];var oData=oSettings.aoData[iRow]._aData;var sData=oCol.fnGetData(oData,sSpecific);if(sData===undefined)
{if(oSettings.iDrawError!=oSettings.iDraw&&oCol.sDefaultContent===null)
{_fnLog(oSettings,0,"Requested unknown parameter "+
(typeof oCol.mData=='function'?'{function}':"'"+oCol.mData+"'")+" for row "+iRow,4);oSettings.iDrawError=oSettings.iDraw;}
return oCol.sDefaultContent;}
if((sData===oData||sData===null)&&oCol.sDefaultContent!==null)
{sData=oCol.sDefaultContent;}
else if(typeof sData==='function')
{return sData();}
if(sData===null&&sSpecific=='display')
{return'';}
return sData;}
function _fnSetCellData(oSettings,iRow,iCol,val)
{var oCol=oSettings.aoColumns[iCol];var oData=oSettings.aoData[iRow]._aData;oCol.fnSetData(oData,val);}
var __reArray=/\[.*?\]$/;var __reFn=/\(\)$/;function _fnSplitObjNotation(str)
{return $.map(str.match(/(\\.|[^\.])+/g),function(s){return s.replace('\\.','.');});}
function _fnGetObjectDataFn(mSource)
{if($.isPlainObject(mSource))
{var o={};$.each(mSource,function(key,val){if(val){o[key]=_fnGetObjectDataFn(val);}});return function(data,type,extra){var t=o[type]||o._;return t!==undefined?t(data,type,extra):data;};}
else if(mSource===null)
{return function(data,type){return data;};}
else if(typeof mSource==='function')
{return function(data,type,extra){return mSource(data,type,extra);};}
else if(typeof mSource==='string'&&(mSource.indexOf('.')!==-1||mSource.indexOf('[')!==-1||mSource.indexOf('(')!==-1))
{var fetchData=function(data,type,src){var arrayNotation,funcNotation,out,innerSrc;if(src!=="")
{var a=_fnSplitObjNotation(src);for(var i=0,iLen=a.length;i<iLen;i++)
{arrayNotation=a[i].match(__reArray);funcNotation=a[i].match(__reFn);if(arrayNotation)
{a[i]=a[i].replace(__reArray,'');if(a[i]!==""){data=data[a[i]];}
out=[];a.splice(0,i+1);innerSrc=a.join('.');for(var j=0,jLen=data.length;j<jLen;j++){out.push(fetchData(data[j],type,innerSrc));}
var join=arrayNotation[0].substring(1,arrayNotation[0].length-1);data=(join==="")?out:out.join(join);break;}
else if(funcNotation)
{a[i]=a[i].replace(__reFn,'');data=data[a[i]]();continue;}
if(data===null||data[a[i]]===undefined)
{return undefined;}
data=data[a[i]];}}
return data;};return function(data,type){return fetchData(data,type,mSource);};}
else
{return function(data,type){return data[mSource];};}}
function _fnSetObjectDataFn(mSource)
{if($.isPlainObject(mSource))
{return _fnSetObjectDataFn(mSource._);}
else if(mSource===null)
{return function(data,val){};}
else if(typeof mSource==='function')
{return function(data,val){mSource(data,'set',val);};}
else if(typeof mSource==='string'&&(mSource.indexOf('.')!==-1||mSource.indexOf('[')!==-1||mSource.indexOf('(')!==-1))
{var setData=function(data,val,src){var a=_fnSplitObjNotation(src),b;var aLast=a[a.length-1];var arrayNotation,funcNotation,o,innerSrc;for(var i=0,iLen=a.length-1;i<iLen;i++)
{arrayNotation=a[i].match(__reArray);funcNotation=a[i].match(__reFn);if(arrayNotation)
{a[i]=a[i].replace(__reArray,'');data[a[i]]=[];b=a.slice();b.splice(0,i+1);innerSrc=b.join('.');for(var j=0,jLen=val.length;j<jLen;j++)
{o={};setData(o,val[j],innerSrc);data[a[i]].push(o);}
return;}
else if(funcNotation)
{a[i]=a[i].replace(__reFn,'');data=data[a[i]](val);}
if(data[a[i]]===null||data[a[i]]===undefined)
{data[a[i]]={};}
data=data[a[i]];}
if(aLast.match(__reFn))
{data=data[aLast.replace(__reFn,'')](val);}
else
{data[aLast.replace(__reArray,'')]=val;}};return function(data,val){return setData(data,val,mSource);};}
else
{return function(data,val){data[mSource]=val;};}}
function _fnGetDataMaster(settings)
{return _pluck(settings.aoData,'_aData');}
function _fnClearTable(settings)
{settings.aoData.length=0;settings.aiDisplayMaster.length=0;settings.aiDisplay.length=0;}
function _fnDeleteIndex(a,iTarget,splice)
{var iTargetIndex=-1;for(var i=0,iLen=a.length;i<iLen;i++)
{if(a[i]==iTarget)
{iTargetIndex=i;}
else if(a[i]>iTarget)
{a[i]--;}}
if(iTargetIndex!=-1&&splice===undefined)
{a.splice(iTargetIndex,1);}}
function _fnInvalidateRow(settings,rowIdx,src,column)
{var row=settings.aoData[rowIdx];var i,ien;if(src==='dom'||((!src||src==='auto')&&row.src==='dom')){row._aData=_fnGetRowElements(settings,row).data;}
else{var cells=row.anCells;if(cells){for(i=0,ien=cells.length;i<ien;i++){cells[i].innerHTML=_fnGetCellData(settings,rowIdx,i,'display');}}}
row._aSortData=null;row._aFilterData=null;var cols=settings.aoColumns;if(column!==undefined){cols[column].sType=null;}
else{for(i=0,ien=cols.length;i<ien;i++){cols[i].sType=null;}}
_fnRowAttributes(row);}
function _fnGetRowElements(settings,row)
{var
d=[],tds=[],td=row.firstChild,name,col,o,i=0,contents,columns=settings.aoColumns;var attr=function(str,data,td){if(typeof str==='string'){var idx=str.indexOf('@');if(idx!==-1){var src=str.substring(idx+1);o['@'+src]=td.getAttribute(src);}}};var cellProcess=function(cell){col=columns[i];contents=$.trim(cell.innerHTML);if(col&&col._bAttrSrc){o={display:contents};attr(col.mData.sort,o,cell);attr(col.mData.type,o,cell);attr(col.mData.filter,o,cell);d.push(o);}
else{d.push(contents);}
tds.push(cell);i++;};if(td){while(td){name=td.nodeName.toUpperCase();if(name=="TD"||name=="TH"){cellProcess(td);}
td=td.nextSibling;}}
else{tds=row.anCells;for(var j=0,jen=tds.length;j<jen;j++){cellProcess(tds[j]);}}
return{data:d,cells:tds};}
function _fnCreateTr(oSettings,iRow,nTrIn,anTds)
{var
row=oSettings.aoData[iRow],rowData=row._aData,cells=[],nTr,nTd,oCol,i,iLen;if(row.nTr===null)
{nTr=nTrIn||document.createElement('tr');row.nTr=nTr;row.anCells=cells;nTr._DT_RowIndex=iRow;_fnRowAttributes(row);for(i=0,iLen=oSettings.aoColumns.length;i<iLen;i++)
{oCol=oSettings.aoColumns[i];nTd=nTrIn?anTds[i]:document.createElement(oCol.sCellType);cells.push(nTd);if(!nTrIn||oCol.mRender||oCol.mData!==i)
{nTd.innerHTML=_fnGetCellData(oSettings,iRow,i,'display');}
if(oCol.sClass)
{nTd.className+=' '+oCol.sClass;}
if(oCol.bVisible&&!nTrIn)
{nTr.appendChild(nTd);}
else if(!oCol.bVisible&&nTrIn)
{nTd.parentNode.removeChild(nTd);}
if(oCol.fnCreatedCell)
{oCol.fnCreatedCell.call(oSettings.oInstance,nTd,_fnGetCellData(oSettings,iRow,i,'display'),rowData,iRow,i);}}
_fnCallbackFire(oSettings,'aoRowCreatedCallback',null,[nTr,rowData,iRow]);}
row.nTr.setAttribute('role','row');}
function _fnRowAttributes(row)
{var tr=row.nTr;var data=row._aData;if(tr){if(data.DT_RowId){tr.id=data.DT_RowId;}
if(data.DT_RowClass){var a=data.DT_RowClass.split(' ');row.__rowc=row.__rowc?_unique(row.__rowc.concat(a)):a;$(tr).removeClass(row.__rowc.join(' ')).addClass(data.DT_RowClass);}
if(data.DT_RowData){$(tr).data(data.DT_RowData);}}}
function _fnBuildHead(oSettings)
{var i,ien,cell,row,column;var thead=oSettings.nTHead;var tfoot=oSettings.nTFoot;var createHeader=$('th, td',thead).length===0;var classes=oSettings.oClasses;var columns=oSettings.aoColumns;if(createHeader){row=$('<tr/>').appendTo(thead);}
for(i=0,ien=columns.length;i<ien;i++){column=columns[i];cell=$(column.nTh).addClass(column.sClass);if(createHeader){cell.appendTo(row);}
if(oSettings.oFeatures.bSort){cell.addClass(column.sSortingClass);if(column.bSortable!==false){cell.attr('tabindex',oSettings.iTabIndex).attr('aria-controls',oSettings.sTableId);_fnSortAttachListener(oSettings,column.nTh,i);}}
if(column.sTitle!=cell.html()){cell.html(column.sTitle);}
_fnRenderer(oSettings,'header')(oSettings,cell,column,classes);}
if(createHeader){_fnDetectHeader(oSettings.aoHeader,thead);}
$(thead).find('>tr').attr('role','row');$(thead).find('>tr>th, >tr>td').addClass(classes.sHeaderTH);$(tfoot).find('>tr>th, >tr>td').addClass(classes.sFooterTH);if(tfoot!==null){var cells=oSettings.aoFooter[0];for(i=0,ien=cells.length;i<ien;i++){column=columns[i];column.nTf=cells[i].cell;if(column.sClass){$(column.nTf).addClass(column.sClass);}}}}
function _fnDrawHead(oSettings,aoSource,bIncludeHidden)
{var i,iLen,j,jLen,k,kLen,n,nLocalTr;var aoLocal=[];var aApplied=[];var iColumns=oSettings.aoColumns.length;var iRowspan,iColspan;if(!aoSource)
{return;}
if(bIncludeHidden===undefined)
{bIncludeHidden=false;}
for(i=0,iLen=aoSource.length;i<iLen;i++)
{aoLocal[i]=aoSource[i].slice();aoLocal[i].nTr=aoSource[i].nTr;for(j=iColumns-1;j>=0;j--)
{if(!oSettings.aoColumns[j].bVisible&&!bIncludeHidden)
{aoLocal[i].splice(j,1);}}
aApplied.push([]);}
for(i=0,iLen=aoLocal.length;i<iLen;i++)
{nLocalTr=aoLocal[i].nTr;if(nLocalTr)
{while((n=nLocalTr.firstChild))
{nLocalTr.removeChild(n);}}
for(j=0,jLen=aoLocal[i].length;j<jLen;j++)
{iRowspan=1;iColspan=1;if(aApplied[i][j]===undefined)
{nLocalTr.appendChild(aoLocal[i][j].cell);aApplied[i][j]=1;while(aoLocal[i+iRowspan]!==undefined&&aoLocal[i][j].cell==aoLocal[i+iRowspan][j].cell)
{aApplied[i+iRowspan][j]=1;iRowspan++;}
while(aoLocal[i][j+iColspan]!==undefined&&aoLocal[i][j].cell==aoLocal[i][j+iColspan].cell)
{for(k=0;k<iRowspan;k++)
{aApplied[i+k][j+iColspan]=1;}
iColspan++;}
$(aoLocal[i][j].cell).attr('rowspan',iRowspan).attr('colspan',iColspan);}}}}
function _fnDraw(oSettings)
{var aPreDraw=_fnCallbackFire(oSettings,'aoPreDrawCallback','preDraw',[oSettings]);if($.inArray(false,aPreDraw)!==-1)
{_fnProcessingDisplay(oSettings,false);return;}
var i,iLen,n;var anRows=[];var iRowCount=0;var asStripeClasses=oSettings.asStripeClasses;var iStripes=asStripeClasses.length;var iOpenRows=oSettings.aoOpenRows.length;var oLang=oSettings.oLanguage;var iInitDisplayStart=oSettings.iInitDisplayStart;var bServerSide=_fnDataSource(oSettings)=='ssp';var aiDisplay=oSettings.aiDisplay;oSettings.bDrawing=true;if(iInitDisplayStart!==undefined&&iInitDisplayStart!==-1)
{oSettings._iDisplayStart=bServerSide?iInitDisplayStart:iInitDisplayStart>=oSettings.fnRecordsDisplay()?0:iInitDisplayStart;oSettings.iInitDisplayStart=-1;}
var iDisplayStart=oSettings._iDisplayStart;var iDisplayEnd=oSettings.fnDisplayEnd();if(oSettings.bDeferLoading)
{oSettings.bDeferLoading=false;oSettings.iDraw++;_fnProcessingDisplay(oSettings,false);}
else if(!bServerSide)
{oSettings.iDraw++;}
else if(!oSettings.bDestroying&&!_fnAjaxUpdate(oSettings))
{return;}
if(aiDisplay.length!==0)
{var iStart=bServerSide?0:iDisplayStart;var iEnd=bServerSide?oSettings.aoData.length:iDisplayEnd;for(var j=iStart;j<iEnd;j++)
{var iDataIndex=aiDisplay[j];var aoData=oSettings.aoData[iDataIndex];if(aoData.nTr===null)
{_fnCreateTr(oSettings,iDataIndex);}
var nRow=aoData.nTr;if(iStripes!==0)
{var sStripe=asStripeClasses[iRowCount%iStripes];if(aoData._sRowStripe!=sStripe)
{$(nRow).removeClass(aoData._sRowStripe).addClass(sStripe);aoData._sRowStripe=sStripe;}}
_fnCallbackFire(oSettings,'aoRowCallback',null,[nRow,aoData._aData,iRowCount,j]);anRows.push(nRow);iRowCount++;}}
else
{var sZero=oLang.sZeroRecords;if(oSettings.iDraw==1&&_fnDataSource(oSettings)=='ajax')
{sZero=oLang.sLoadingRecords;}
else if(oLang.sEmptyTable&&oSettings.fnRecordsTotal()===0)
{sZero=oLang.sEmptyTable;}
anRows[0]=$('<tr/>',{'class':iStripes?asStripeClasses[0]:''}).append($('<td />',{'valign':'top','colSpan':_fnVisbleColumns(oSettings),'class':oSettings.oClasses.sRowEmpty}).html(sZero))[0];}
_fnCallbackFire(oSettings,'aoHeaderCallback','header',[$(oSettings.nTHead).children('tr')[0],_fnGetDataMaster(oSettings),iDisplayStart,iDisplayEnd,aiDisplay]);_fnCallbackFire(oSettings,'aoFooterCallback','footer',[$(oSettings.nTFoot).children('tr')[0],_fnGetDataMaster(oSettings),iDisplayStart,iDisplayEnd,aiDisplay]);var body=$(oSettings.nTBody);body.children().detach();body.append($(anRows));_fnCallbackFire(oSettings,'aoDrawCallback','draw',[oSettings]);oSettings.bSorted=false;oSettings.bFiltered=false;oSettings.bDrawing=false;}
function _fnReDraw(settings,holdPosition)
{var
features=settings.oFeatures,sort=features.bSort,filter=features.bFilter;if(sort){_fnSort(settings);}
if(filter){_fnFilterComplete(settings,settings.oPreviousSearch);}
else{settings.aiDisplay=settings.aiDisplayMaster.slice();}
if(holdPosition!==true){settings._iDisplayStart=0;}
_fnDraw(settings);}
function _fnAddOptionsHtml(oSettings)
{var classes=oSettings.oClasses;var table=$(oSettings.nTable);var holding=$('<div/>').insertBefore(table);var features=oSettings.oFeatures;var insert=$('<div/>',{id:oSettings.sTableId+'_wrapper','class':classes.sWrapper+(oSettings.nTFoot?'':' '+classes.sNoFooter)});oSettings.nHolding=holding[0];oSettings.nTableWrapper=insert[0];oSettings.nTableReinsertBefore=oSettings.nTable.nextSibling;var aDom=oSettings.sDom.split('');var featureNode,cOption,nNewNode,cNext,sAttr,j;for(var i=0;i<aDom.length;i++)
{featureNode=null;cOption=aDom[i];if(cOption=='<')
{nNewNode=$('<div/>')[0];cNext=aDom[i+1];if(cNext=="'"||cNext=='"')
{sAttr="";j=2;while(aDom[i+j]!=cNext)
{sAttr+=aDom[i+j];j++;}
if(sAttr=="H")
{sAttr=classes.sJUIHeader;}
else if(sAttr=="F")
{sAttr=classes.sJUIFooter;}
if(sAttr.indexOf('.')!=-1)
{var aSplit=sAttr.split('.');nNewNode.id=aSplit[0].substr(1,aSplit[0].length-1);nNewNode.className=aSplit[1];}
else if(sAttr.charAt(0)=="#")
{nNewNode.id=sAttr.substr(1,sAttr.length-1);}
else
{nNewNode.className=sAttr;}
i+=j;}
insert.append(nNewNode);insert=$(nNewNode);}
else if(cOption=='>')
{insert=insert.parent();}
else if(cOption=='l'&&features.bPaginate&&features.bLengthChange)
{featureNode=_fnFeatureHtmlLength(oSettings);}
else if(cOption=='f'&&features.bFilter)
{featureNode=_fnFeatureHtmlFilter(oSettings);}
else if(cOption=='r'&&features.bProcessing)
{featureNode=_fnFeatureHtmlProcessing(oSettings);}
else if(cOption=='t')
{featureNode=_fnFeatureHtmlTable(oSettings);}
else if(cOption=='i'&&features.bInfo)
{featureNode=_fnFeatureHtmlInfo(oSettings);}
else if(cOption=='p'&&features.bPaginate)
{featureNode=_fnFeatureHtmlPaginate(oSettings);}
else if(DataTable.ext.feature.length!==0)
{var aoFeatures=DataTable.ext.feature;for(var k=0,kLen=aoFeatures.length;k<kLen;k++)
{if(cOption==aoFeatures[k].cFeature)
{featureNode=aoFeatures[k].fnInit(oSettings);break;}}}
if(featureNode)
{var aanFeatures=oSettings.aanFeatures;if(!aanFeatures[cOption])
{aanFeatures[cOption]=[];}
aanFeatures[cOption].push(featureNode);insert.append(featureNode);}}
holding.replaceWith(insert);}
function _fnDetectHeader(aLayout,nThead)
{var nTrs=$(nThead).children('tr');var nTr,nCell;var i,k,l,iLen,jLen,iColShifted,iColumn,iColspan,iRowspan;var bUnique;var fnShiftCol=function(a,i,j){var k=a[i];while(k[j]){j++;}
return j;};aLayout.splice(0,aLayout.length);for(i=0,iLen=nTrs.length;i<iLen;i++)
{aLayout.push([]);}
for(i=0,iLen=nTrs.length;i<iLen;i++)
{nTr=nTrs[i];iColumn=0;nCell=nTr.firstChild;while(nCell){if(nCell.nodeName.toUpperCase()=="TD"||nCell.nodeName.toUpperCase()=="TH")
{iColspan=nCell.getAttribute('colspan')*1;iRowspan=nCell.getAttribute('rowspan')*1;iColspan=(!iColspan||iColspan===0||iColspan===1)?1:iColspan;iRowspan=(!iRowspan||iRowspan===0||iRowspan===1)?1:iRowspan;iColShifted=fnShiftCol(aLayout,i,iColumn);bUnique=iColspan===1?true:false;for(l=0;l<iColspan;l++)
{for(k=0;k<iRowspan;k++)
{aLayout[i+k][iColShifted+l]={"cell":nCell,"unique":bUnique};aLayout[i+k].nTr=nTr;}}}
nCell=nCell.nextSibling;}}}
function _fnGetUniqueThs(oSettings,nHeader,aLayout)
{var aReturn=[];if(!aLayout)
{aLayout=oSettings.aoHeader;if(nHeader)
{aLayout=[];_fnDetectHeader(aLayout,nHeader);}}
for(var i=0,iLen=aLayout.length;i<iLen;i++)
{for(var j=0,jLen=aLayout[i].length;j<jLen;j++)
{if(aLayout[i][j].unique&&(!aReturn[j]||!oSettings.bSortCellsTop))
{aReturn[j]=aLayout[i][j].cell;}}}
return aReturn;}
function _fnBuildAjax(oSettings,data,fn)
{_fnCallbackFire(oSettings,'aoServerParams','serverParams',[data]);if(data&&$.isArray(data)){var tmp={};var rbracket=/(.*?)\[\]$/;$.each(data,function(key,val){var match=val.name.match(rbracket);if(match){var name=match[0];if(!tmp[name]){tmp[name]=[];}
tmp[name].push(val.value);}
else{tmp[val.name]=val.value;}});data=tmp;}
var ajaxData;var ajax=oSettings.ajax;var instance=oSettings.oInstance;if($.isPlainObject(ajax)&&ajax.data)
{ajaxData=ajax.data;var newData=$.isFunction(ajaxData)?ajaxData(data):ajaxData;data=$.isFunction(ajaxData)&&newData?newData:$.extend(true,data,newData);delete ajax.data;}
var baseAjax={"data":data,"success":function(json){var error=json.error||json.sError;if(error){oSettings.oApi._fnLog(oSettings,0,error);}
oSettings.json=json;_fnCallbackFire(oSettings,null,'xhr',[oSettings,json]);fn(json);},"dataType":"json","cache":false,"type":oSettings.sServerMethod,"error":function(xhr,error,thrown){var log=oSettings.oApi._fnLog;if(error=="parsererror"){log(oSettings,0,'Invalid JSON response',1);}
else if(xhr.readyState===4){log(oSettings,0,'Ajax error',7);}
_fnProcessingDisplay(oSettings,false);}};oSettings.oAjaxData=data;_fnCallbackFire(oSettings,null,'preXhr',[oSettings,data]);if(oSettings.fnServerData)
{oSettings.fnServerData.call(instance,oSettings.sAjaxSource,$.map(data,function(val,key){return{name:key,value:val};}),fn,oSettings);}
else if(oSettings.sAjaxSource||typeof ajax==='string')
{oSettings.jqXHR=$.ajax($.extend(baseAjax,{url:ajax||oSettings.sAjaxSource}));}
else if($.isFunction(ajax))
{oSettings.jqXHR=ajax.call(instance,data,fn,oSettings);}
else
{oSettings.jqXHR=$.ajax($.extend(baseAjax,ajax));ajax.data=ajaxData;}}
function _fnAjaxUpdate(oSettings)
{if(oSettings.bAjaxDataGet)
{oSettings.iDraw++;_fnProcessingDisplay(oSettings,true);var iColumns=oSettings.aoColumns.length;var aoData=_fnAjaxParameters(oSettings);_fnBuildAjax(oSettings,aoData,function(json){_fnAjaxUpdateDraw(oSettings,json);},oSettings);return false;}
return true;}
function _fnAjaxParameters(settings)
{var
columns=settings.aoColumns,columnCount=columns.length,features=settings.oFeatures,preSearch=settings.oPreviousSearch,preColSearch=settings.aoPreSearchCols,i,data=[],dataProp,column,columnSearch,sort=_fnSortFlatten(settings),displayStart=settings._iDisplayStart,displayLength=features.bPaginate!==false?settings._iDisplayLength:-1;var param=function(name,value){data.push({'name':name,'value':value});};param('sEcho',settings.iDraw);param('iColumns',columnCount);param('sColumns',_pluck(columns,'sName').join(','));param('iDisplayStart',displayStart);param('iDisplayLength',displayLength);var d={draw:settings.iDraw,columns:[],order:[],start:displayStart,length:displayLength,search:{value:preSearch.sSearch,regex:preSearch.bRegex}};for(i=0;i<columnCount;i++){column=columns[i];columnSearch=preColSearch[i];dataProp=typeof column.mData=="function"?'function':column.mData;d.columns.push({data:dataProp,name:column.sName,searchable:column.bSearchable,orderable:column.bSortable,search:{value:columnSearch.sSearch,regex:columnSearch.bRegex}});param("mDataProp_"+i,dataProp);if(features.bFilter){param('sSearch_'+i,columnSearch.sSearch);param('bRegex_'+i,columnSearch.bRegex);param('bSearchable_'+i,column.bSearchable);}
if(features.bSort){param('bSortable_'+i,column.bSortable);}}
if(features.bFilter){param('sSearch',preSearch.sSearch);param('bRegex',preSearch.bRegex);}
if(features.bSort){$.each(sort,function(i,val){d.order.push({column:val.col,dir:val.dir});param('iSortCol_'+i,val.col);param('sSortDir_'+i,val.dir);});param('iSortingCols',sort.length);}
var legacy=DataTable.ext.legacy.ajax;if(legacy===null){return settings.sAjaxSource?data:d;}
return legacy?data:d;}
function _fnAjaxUpdateDraw(settings,json)
{var compat=function(old,modern){return json[old]!==undefined?json[old]:json[modern];};var draw=compat('sEcho','draw');var recordsTotal=compat('iTotalRecords','recordsTotal');var rocordsFiltered=compat('iTotalDisplayRecords','recordsFiltered');if(draw){if(draw*1<settings.iDraw){return;}
settings.iDraw=draw*1;}
_fnClearTable(settings);settings._iRecordsTotal=parseInt(recordsTotal,10);settings._iRecordsDisplay=parseInt(rocordsFiltered,10);var data=_fnAjaxDataSrc(settings,json);for(var i=0,ien=data.length;i<ien;i++){_fnAddData(settings,data[i]);}
settings.aiDisplay=settings.aiDisplayMaster.slice();settings.bAjaxDataGet=false;_fnDraw(settings);if(!settings._bInitComplete){_fnInitComplete(settings,json);}
settings.bAjaxDataGet=true;_fnProcessingDisplay(settings,false);}
function _fnAjaxDataSrc(oSettings,json)
{var dataSrc=$.isPlainObject(oSettings.ajax)&&oSettings.ajax.dataSrc!==undefined?oSettings.ajax.dataSrc:oSettings.sAjaxDataProp;if(dataSrc==='data'){return json.aaData||json[dataSrc];}
return dataSrc!==""?_fnGetObjectDataFn(dataSrc)(json):json;}
function _fnFeatureHtmlFilter(settings)
{var classes=settings.oClasses;var tableId=settings.sTableId;var previousSearch=settings.oPreviousSearch;var features=settings.aanFeatures;var input='<input type="search" class="'+classes.sFilterInput+'"/>';var str=settings.oLanguage.sSearch;str=str.match(/_INPUT_/)?str.replace('_INPUT_',input):str+input;var filter=$('<div/>',{'id':!features.f?tableId+'_filter':null,'class':classes.sFilter}).append($('<label/>').append(str));var searchFn=function(){var n=features.f;var val=!this.value?"":this.value;if(val!=previousSearch.sSearch){_fnFilterComplete(settings,{"sSearch":val,"bRegex":previousSearch.bRegex,"bSmart":previousSearch.bSmart,"bCaseInsensitive":previousSearch.bCaseInsensitive});settings._iDisplayStart=0;_fnDraw(settings);}};var jqFilter=$('input',filter).val(previousSearch.sSearch.replace('"','&quot;')).bind('keyup.DT search.DT input.DT paste.DT cut.DT',_fnDataSource(settings)==='ssp'?_fnThrottle(searchFn,400):searchFn).bind('keypress.DT',function(e){if(e.keyCode==13){return false;}}).attr('aria-controls',tableId);$(settings.nTable).on('filter.DT',function(){try{if(jqFilter[0]!==document.activeElement){jqFilter.val(previousSearch.sSearch);}}
catch(e){}});return filter[0];}
function _fnFilterComplete(oSettings,oInput,iForce)
{var oPrevSearch=oSettings.oPreviousSearch;var aoPrevSearch=oSettings.aoPreSearchCols;var fnSaveFilter=function(oFilter){oPrevSearch.sSearch=oFilter.sSearch;oPrevSearch.bRegex=oFilter.bRegex;oPrevSearch.bSmart=oFilter.bSmart;oPrevSearch.bCaseInsensitive=oFilter.bCaseInsensitive;};var fnRegex=function(o){return o.bEscapeRegex!==undefined?!o.bEscapeRegex:o.bRegex;};_fnColumnTypes(oSettings);if(_fnDataSource(oSettings)!='ssp')
{_fnFilter(oSettings,oInput.sSearch,iForce,fnRegex(oInput),oInput.bSmart,oInput.bCaseInsensitive);fnSaveFilter(oInput);for(var i=0;i<aoPrevSearch.length;i++)
{_fnFilterColumn(oSettings,aoPrevSearch[i].sSearch,i,fnRegex(aoPrevSearch[i]),aoPrevSearch[i].bSmart,aoPrevSearch[i].bCaseInsensitive);}
_fnFilterCustom(oSettings);}
else
{fnSaveFilter(oInput);}
oSettings.bFiltered=true;_fnCallbackFire(oSettings,null,'search',[oSettings]);}
function _fnFilterCustom(settings)
{var filters=DataTable.ext.search;var displayRows=settings.aiDisplay;var row,rowIdx;for(var i=0,iLen=filters.length;i<iLen;i++){for(var j=displayRows.length-1;j>=0;j--){rowIdx=displayRows[j];row=settings.aoData[rowIdx];if(!filters[i](settings,row._aFilterData,rowIdx,row._aData)){displayRows.splice(j,1);}}}}
function _fnFilterColumn(settings,searchStr,colIdx,regex,smart,caseInsensitive)
{if(searchStr===''){return;}
var data;var display=settings.aiDisplay;var rpSearch=_fnFilterCreateSearch(searchStr,regex,smart,caseInsensitive);for(var i=display.length-1;i>=0;i--){data=settings.aoData[display[i]]._aFilterData[colIdx];if(!rpSearch.test(data)){display.splice(i,1);}}}
function _fnFilter(settings,input,force,regex,smart,caseInsensitive)
{var rpSearch=_fnFilterCreateSearch(input,regex,smart,caseInsensitive);var prevSearch=settings.oPreviousSearch.sSearch;var displayMaster=settings.aiDisplayMaster;var display,invalidated,i;if(DataTable.ext.search.length!==0){force=true;}
invalidated=_fnFilterData(settings);if(input.length<=0){settings.aiDisplay=displayMaster.slice();}
else{if(invalidated||force||prevSearch.length>input.length||input.indexOf(prevSearch)!==0||settings.bSorted){settings.aiDisplay=displayMaster.slice();}
display=settings.aiDisplay;for(i=display.length-1;i>=0;i--){if(!rpSearch.test(settings.aoData[display[i]]._sFilterRow)){display.splice(i,1);}}}}
function _fnFilterCreateSearch(search,regex,smart,caseInsensitive)
{search=regex?search:_fnEscapeRegex(search);if(smart){var a=$.map(search.match(/"[^"]+"|[^ ]+/g)||'',function(word){return word.charAt(0)==='"'?word.match(/^"(.*)"$/)[1]:word;});search='^(?=.*?'+a.join(')(?=.*?')+').*$';}
return new RegExp(search,caseInsensitive?'i':'');}
function _fnEscapeRegex(sVal)
{return sVal.replace(_re_escape_regex,'\\$1');}
var __filter_div=$('<div>')[0];var __filter_div_textContent=__filter_div.textContent!==undefined;function _fnFilterData(settings)
{var columns=settings.aoColumns;var column;var i,j,ien,jen,filterData,cellData,row;var fomatters=DataTable.ext.type.search;var wasInvalidated=false;for(i=0,ien=settings.aoData.length;i<ien;i++){row=settings.aoData[i];if(!row._aFilterData){filterData=[];for(j=0,jen=columns.length;j<jen;j++){column=columns[j];if(column.bSearchable){cellData=_fnGetCellData(settings,i,j,'filter');cellData=fomatters[column.sType]?fomatters[column.sType](cellData):cellData!==null?cellData:'';}
else{cellData='';}
if(cellData.indexOf&&cellData.indexOf('&')!==-1){__filter_div.innerHTML=cellData;cellData=__filter_div_textContent?__filter_div.textContent:__filter_div.innerText;}
if(cellData.replace){cellData=cellData.replace(/[\r\n]/g,'');}
filterData.push(cellData);}
row._aFilterData=filterData;row._sFilterRow=filterData.join('  ');wasInvalidated=true;}}
return wasInvalidated;}
function _fnFeatureHtmlInfo(settings)
{var
tid=settings.sTableId,nodes=settings.aanFeatures.i,n=$('<div/>',{'class':settings.oClasses.sInfo,'id':!nodes?tid+'_info':null});if(!nodes){settings.aoDrawCallback.push({"fn":_fnUpdateInfo,"sName":"information"});n.attr('role','status').attr('aria-live','polite');$(settings.nTable).attr('aria-describedby',tid+'_info');}
return n[0];}
function _fnUpdateInfo(settings)
{var nodes=settings.aanFeatures.i;if(nodes.length===0){return;}
var
lang=settings.oLanguage,start=settings._iDisplayStart+1,end=settings.fnDisplayEnd(),max=settings.fnRecordsTotal(),total=settings.fnRecordsDisplay(),out=total?lang.sInfo:lang.sInfoEmpty;if(total!==max){out+=' '+lang.sInfoFiltered;}
out+=lang.sInfoPostFix;out=_fnInfoMacros(settings,out);var callback=lang.fnInfoCallback;if(callback!==null){out=callback.call(settings.oInstance,settings,start,end,max,total,out);}
$(nodes).html(out);}
function _fnInfoMacros(settings,str)
{var
formatter=settings.fnFormatNumber,start=settings._iDisplayStart+1,len=settings._iDisplayLength,vis=settings.fnRecordsDisplay(),all=len===-1;return str.replace(/_START_/g,formatter.call(settings,start)).replace(/_END_/g,formatter.call(settings,settings.fnDisplayEnd())).replace(/_MAX_/g,formatter.call(settings,settings.fnRecordsTotal())).replace(/_TOTAL_/g,formatter.call(settings,vis)).replace(/_PAGE_/g,formatter.call(settings,all?1:Math.ceil(start/len))).replace(/_PAGES_/g,formatter.call(settings,all?1:Math.ceil(vis/len)));}
function _fnInitialise(settings)
{var i,iLen,iAjaxStart=settings.iInitDisplayStart;var columns=settings.aoColumns,column;var features=settings.oFeatures;if(!settings.bInitialised){setTimeout(function(){_fnInitialise(settings);},200);return;}
_fnAddOptionsHtml(settings);_fnBuildHead(settings);_fnDrawHead(settings,settings.aoHeader);_fnDrawHead(settings,settings.aoFooter);_fnProcessingDisplay(settings,true);if(features.bAutoWidth){_fnCalculateColumnWidths(settings);}
for(i=0,iLen=columns.length;i<iLen;i++){column=columns[i];if(column.sWidth){column.nTh.style.width=_fnStringToCss(column.sWidth);}}
_fnReDraw(settings);var dataSrc=_fnDataSource(settings);if(dataSrc!='ssp'){if(dataSrc=='ajax'){_fnBuildAjax(settings,[],function(json){var aData=_fnAjaxDataSrc(settings,json);for(i=0;i<aData.length;i++){_fnAddData(settings,aData[i]);}
settings.iInitDisplayStart=iAjaxStart;_fnReDraw(settings);_fnProcessingDisplay(settings,false);_fnInitComplete(settings,json);},settings);}
else{_fnProcessingDisplay(settings,false);_fnInitComplete(settings);}}}
function _fnInitComplete(settings,json)
{settings._bInitComplete=true;if(json){_fnAdjustColumnSizing(settings);}
_fnCallbackFire(settings,'aoInitComplete','init',[settings,json]);}
function _fnLengthChange(settings,val)
{var len=parseInt(val,10);settings._iDisplayLength=len;_fnLengthOverflow(settings);_fnCallbackFire(settings,null,'length',[settings,len]);}
function _fnFeatureHtmlLength(settings)
{var
classes=settings.oClasses,tableId=settings.sTableId,menu=settings.aLengthMenu,d2=$.isArray(menu[0]),lengths=d2?menu[0]:menu,language=d2?menu[1]:menu;var select=$('<select/>',{'name':tableId+'_length','aria-controls':tableId,'class':classes.sLengthSelect});for(var i=0,ien=lengths.length;i<ien;i++){select[0][i]=new Option(language[i],lengths[i]);}
var div=$('<div><label/></div>').addClass(classes.sLength);if(!settings.aanFeatures.l){div[0].id=tableId+'_length';}
var a=settings.oLanguage.sLengthMenu.split(/(_MENU_)/);div.children().append(a.length>1?[a[0],select,a[2]]:a[0]);$('select',div).val(settings._iDisplayLength).bind('change.DT',function(e){_fnLengthChange(settings,$(this).val());_fnDraw(settings);});$(settings.nTable).bind('length.dt.DT',function(e,s,len){$('select',div).val(len);});return div[0];}
function _fnFeatureHtmlPaginate(settings)
{var
type=settings.sPaginationType,plugin=DataTable.ext.pager[type],modern=typeof plugin==='function',redraw=function(settings){_fnDraw(settings);},node=$('<div/>').addClass(settings.oClasses.sPaging+type)[0],features=settings.aanFeatures;if(!modern){plugin.fnInit(settings,node,redraw);}
if(!features.p)
{node.id=settings.sTableId+'_paginate';settings.aoDrawCallback.push({"fn":function(settings){if(modern){var
start=settings._iDisplayStart,len=settings._iDisplayLength,visRecords=settings.fnRecordsDisplay(),all=len===-1,page=all?0:Math.ceil(start/len),pages=all?1:Math.ceil(visRecords/len),buttons=plugin(page,pages),i,ien;for(i=0,ien=features.p.length;i<ien;i++){_fnRenderer(settings,'pageButton')(settings,features.p[i],i,buttons,page,pages);}}
else{plugin.fnUpdate(settings,redraw);}},"sName":"pagination"});}
return node;}
function _fnPageChange(settings,action,redraw)
{var
start=settings._iDisplayStart,len=settings._iDisplayLength,records=settings.fnRecordsDisplay();if(records===0||len===-1)
{start=0;}
else if(typeof action==="number")
{start=action*len;if(start>records)
{start=0;}}
else if(action=="first")
{start=0;}
else if(action=="previous")
{start=len>=0?start-len:0;if(start<0)
{start=0;}}
else if(action=="next")
{if(start+len<records)
{start+=len;}}
else if(action=="last")
{start=Math.floor((records-1)/len)*len;}
else
{_fnLog(settings,0,"Unknown paging action: "+action,5);}
var changed=settings._iDisplayStart!==start;settings._iDisplayStart=start;if(changed){_fnCallbackFire(settings,null,'page',[settings]);if(redraw){_fnDraw(settings);}}
return changed;}
function _fnFeatureHtmlProcessing(settings)
{return $('<div/>',{'id':!settings.aanFeatures.r?settings.sTableId+'_processing':null,'class':settings.oClasses.sProcessing}).html(settings.oLanguage.sProcessing).insertBefore(settings.nTable)[0];}
function _fnProcessingDisplay(settings,show)
{if(settings.oFeatures.bProcessing){$(settings.aanFeatures.r).css('display',show?'block':'none');}
_fnCallbackFire(settings,null,'processing',[settings,show]);}
function _fnFeatureHtmlTable(settings)
{var table=$(settings.nTable);table.attr('role','grid');var scroll=settings.oScroll;if(scroll.sX===''&&scroll.sY===''){return settings.nTable;}
var scrollX=scroll.sX;var scrollY=scroll.sY;var classes=settings.oClasses;var caption=table.children('caption');var captionSide=caption.length?caption[0]._captionSide:null;var headerClone=$(table[0].cloneNode(false));var footerClone=$(table[0].cloneNode(false));var footer=table.children('tfoot');var _div='<div/>';var size=function(s){return!s?null:_fnStringToCss(s);};if(scroll.sX&&table.attr('width')==='100%'){table.removeAttr('width');}
if(!footer.length){footer=null;}
var scroller=$(_div,{'class':classes.sScrollWrapper}).append($(_div,{'class':classes.sScrollHead}).css({overflow:'hidden',position:'relative',border:0,width:scrollX?size(scrollX):'100%'}).append($(_div,{'class':classes.sScrollHeadInner}).css({'box-sizing':'content-box',width:scroll.sXInner||'100%'}).append(headerClone.removeAttr('id').css('margin-left',0).append(table.children('thead')))).append(captionSide==='top'?caption:null)).append($(_div,{'class':classes.sScrollBody}).css({overflow:'auto',height:size(scrollY),width:size(scrollX)}).append(table));if(footer){scroller.append($(_div,{'class':classes.sScrollFoot}).css({overflow:'hidden',border:0,width:scrollX?size(scrollX):'100%'}).append($(_div,{'class':classes.sScrollFootInner}).append(footerClone.removeAttr('id').css('margin-left',0).append(table.children('tfoot')))).append(captionSide==='bottom'?caption:null));}
var children=scroller.children();var scrollHead=children[0];var scrollBody=children[1];var scrollFoot=footer?children[2]:null;if(scrollX){$(scrollBody).scroll(function(e){var scrollLeft=this.scrollLeft;scrollHead.scrollLeft=scrollLeft;if(footer){scrollFoot.scrollLeft=scrollLeft;}});}
settings.nScrollHead=scrollHead;settings.nScrollBody=scrollBody;settings.nScrollFoot=scrollFoot;settings.aoDrawCallback.push({"fn":_fnScrollDraw,"sName":"scrolling"});return scroller[0];}
function _fnScrollDraw(settings)
{var
scroll=settings.oScroll,scrollX=scroll.sX,scrollXInner=scroll.sXInner,scrollY=scroll.sY,barWidth=scroll.iBarWidth,divHeader=$(settings.nScrollHead),divHeaderStyle=divHeader[0].style,divHeaderInner=divHeader.children('div'),divHeaderInnerStyle=divHeaderInner[0].style,divHeaderTable=divHeaderInner.children('table'),divBodyEl=settings.nScrollBody,divBody=$(divBodyEl),divBodyStyle=divBodyEl.style,divFooter=$(settings.nScrollFoot),divFooterInner=divFooter.children('div'),divFooterTable=divFooterInner.children('table'),header=$(settings.nTHead),table=$(settings.nTable),tableEl=table[0],tableStyle=tableEl.style,footer=settings.nTFoot?$(settings.nTFoot):null,browser=settings.oBrowser,ie67=browser.bScrollOversize,headerTrgEls,footerTrgEls,headerSrcEls,footerSrcEls,headerCopy,footerCopy,headerWidths=[],footerWidths=[],headerContent=[],idx,correction,sanityWidth,zeroOut=function(nSizer){var style=nSizer.style;style.paddingTop="0";style.paddingBottom="0";style.borderTopWidth="0";style.borderBottomWidth="0";style.height=0;};table.children('thead, tfoot').remove();headerCopy=header.clone().prependTo(table);headerTrgEls=header.find('tr');headerSrcEls=headerCopy.find('tr');headerCopy.find('th, td').removeAttr('tabindex');if(footer){footerCopy=footer.clone().prependTo(table);footerTrgEls=footer.find('tr');footerSrcEls=footerCopy.find('tr');}
if(!scrollX)
{divBodyStyle.width='100%';divHeader[0].style.width='100%';}
$.each(_fnGetUniqueThs(settings,headerCopy),function(i,el){idx=_fnVisibleToColumnIndex(settings,i);el.style.width=settings.aoColumns[idx].sWidth;});if(footer){_fnApplyToChildren(function(n){n.style.width="";},footerSrcEls);}
if(scroll.bCollapse&&scrollY!==""){divBodyStyle.height=(divBody[0].offsetHeight+header[0].offsetHeight)+"px";}
sanityWidth=table.outerWidth();if(scrollX===""){tableStyle.width="100%";if(ie67&&(table.find('tbody').height()>divBodyEl.offsetHeight||divBody.css('overflow-y')=="scroll")){tableStyle.width=_fnStringToCss(table.outerWidth()-barWidth);}}
else
{if(scrollXInner!==""){tableStyle.width=_fnStringToCss(scrollXInner);}
else if(sanityWidth==divBody.width()&&divBody.height()<table.height()){tableStyle.width=_fnStringToCss(sanityWidth-barWidth);if(table.outerWidth()>sanityWidth-barWidth){tableStyle.width=_fnStringToCss(sanityWidth);}}
else{tableStyle.width=_fnStringToCss(sanityWidth);}}
sanityWidth=table.outerWidth();_fnApplyToChildren(zeroOut,headerSrcEls);_fnApplyToChildren(function(nSizer){headerContent.push(nSizer.innerHTML);headerWidths.push(_fnStringToCss($(nSizer).css('width')));},headerSrcEls);_fnApplyToChildren(function(nToSize,i){nToSize.style.width=headerWidths[i];},headerTrgEls);$(headerSrcEls).height(0);if(footer)
{_fnApplyToChildren(zeroOut,footerSrcEls);_fnApplyToChildren(function(nSizer){footerWidths.push(_fnStringToCss($(nSizer).css('width')));},footerSrcEls);_fnApplyToChildren(function(nToSize,i){nToSize.style.width=footerWidths[i];},footerTrgEls);$(footerSrcEls).height(0);}
_fnApplyToChildren(function(nSizer,i){nSizer.innerHTML='<div class="dataTables_sizing" style="height:0;overflow:hidden;">'+headerContent[i]+'</div>';nSizer.style.width=headerWidths[i];},headerSrcEls);if(footer)
{_fnApplyToChildren(function(nSizer,i){nSizer.innerHTML="";nSizer.style.width=footerWidths[i];},footerSrcEls);}
if(table.outerWidth()<sanityWidth)
{correction=((divBodyEl.scrollHeight>divBodyEl.offsetHeight||divBody.css('overflow-y')=="scroll"))?sanityWidth+barWidth:sanityWidth;if(ie67&&(divBodyEl.scrollHeight>divBodyEl.offsetHeight||divBody.css('overflow-y')=="scroll")){tableStyle.width=_fnStringToCss(correction-barWidth);}
if(scrollX===""||scrollXInner!==""){_fnLog(settings,1,'Possible column misalignment',6);}}
else
{correction='100%';}
divBodyStyle.width=_fnStringToCss(correction);divHeaderStyle.width=_fnStringToCss(correction);if(footer){settings.nScrollFoot.style.width=_fnStringToCss(correction);}
if(!scrollY){if(ie67){divBodyStyle.height=_fnStringToCss(tableEl.offsetHeight+barWidth);}}
if(scrollY&&scroll.bCollapse){divBodyStyle.height=_fnStringToCss(scrollY);var iExtra=(scrollX&&tableEl.offsetWidth>divBodyEl.offsetWidth)?barWidth:0;if(tableEl.offsetHeight<divBodyEl.offsetHeight){divBodyStyle.height=_fnStringToCss(tableEl.offsetHeight+iExtra);}}
var iOuterWidth=table.outerWidth();divHeaderTable[0].style.width=_fnStringToCss(iOuterWidth);divHeaderInnerStyle.width=_fnStringToCss(iOuterWidth);var bScrolling=table.height()>divBodyEl.clientHeight||divBody.css('overflow-y')=="scroll";var padding='padding'+(browser.bScrollbarLeft?'Left':'Right');divHeaderInnerStyle[padding]=bScrolling?barWidth+"px":"0px";if(footer){divFooterTable[0].style.width=_fnStringToCss(iOuterWidth);divFooterInner[0].style.width=_fnStringToCss(iOuterWidth);divFooterInner[0].style[padding]=bScrolling?barWidth+"px":"0px";}
divBody.scroll();if(settings.bSorted||settings.bFiltered){divBodyEl.scrollTop=0;}}
function _fnApplyToChildren(fn,an1,an2)
{var index=0,i=0,iLen=an1.length;var nNode1,nNode2;while(i<iLen){nNode1=an1[i].firstChild;nNode2=an2?an2[i].firstChild:null;while(nNode1){if(nNode1.nodeType===1){if(an2){fn(nNode1,nNode2,index);}
else{fn(nNode1,index);}
index++;}
nNode1=nNode1.nextSibling;nNode2=an2?nNode2.nextSibling:null;}
i++;}}
var __re_html_remove=/<.*?>/g;function _fnCalculateColumnWidths(oSettings)
{var
table=oSettings.nTable,columns=oSettings.aoColumns,scroll=oSettings.oScroll,scrollY=scroll.sY,scrollX=scroll.sX,scrollXInner=scroll.sXInner,columnCount=columns.length,visibleColumns=_fnGetColumns(oSettings,'bVisible'),headerCells=$('th',oSettings.nTHead),tableWidthAttr=table.getAttribute('width'),tableContainer=table.parentNode,userInputs=false,i,column,columnIdx,width,outerWidth;for(i=0;i<visibleColumns.length;i++){column=columns[visibleColumns[i]];if(column.sWidth!==null){column.sWidth=_fnConvertToWidth(column.sWidthOrig,tableContainer);userInputs=true;}}
if(!userInputs&&!scrollX&&!scrollY&&columnCount==_fnVisbleColumns(oSettings)&&columnCount==headerCells.length){for(i=0;i<columnCount;i++){columns[i].sWidth=_fnStringToCss(headerCells.eq(i).width());}}
else
{var tmpTable=$(table.cloneNode(false)).css('visibility','hidden').removeAttr('id').append($(oSettings.nTHead).clone(false)).append($(oSettings.nTFoot).clone(false)).append($('<tbody><tr/></tbody>'));tmpTable.find('tfoot th, tfoot td').css('width','');var tr=tmpTable.find('tbody tr');headerCells=_fnGetUniqueThs(oSettings,tmpTable.find('thead')[0]);for(i=0;i<visibleColumns.length;i++){column=columns[visibleColumns[i]];headerCells[i].style.width=column.sWidthOrig!==null&&column.sWidthOrig!==''?_fnStringToCss(column.sWidthOrig):'';}
if(oSettings.aoData.length){for(i=0;i<visibleColumns.length;i++){columnIdx=visibleColumns[i];column=columns[columnIdx];$(_fnGetWidestNode(oSettings,columnIdx)).clone(false).append(column.sContentPadding).appendTo(tr);}}
tmpTable.appendTo(tableContainer);if(scrollX&&scrollXInner){tmpTable.width(scrollXInner);}
else if(scrollX){tmpTable.css('width','auto');if(tmpTable.width()<tableContainer.offsetWidth){tmpTable.width(tableContainer.offsetWidth);}}
else if(scrollY){tmpTable.width(tableContainer.offsetWidth);}
else if(tableWidthAttr){tmpTable.width(tableWidthAttr);}
_fnScrollingWidthAdjust(oSettings,tmpTable[0]);if(scrollX)
{var total=0;for(i=0;i<visibleColumns.length;i++){column=columns[visibleColumns[i]];outerWidth=$(headerCells[i]).outerWidth();total+=column.sWidthOrig===null?outerWidth:parseInt(column.sWidth,10)+outerWidth-$(headerCells[i]).width();}
tmpTable.width(_fnStringToCss(total));table.style.width=_fnStringToCss(total);}
for(i=0;i<visibleColumns.length;i++){column=columns[visibleColumns[i]];width=$(headerCells[i]).width();if(width){column.sWidth=_fnStringToCss(width);}}
table.style.width=_fnStringToCss(tmpTable.css('width'));tmpTable.remove();}
if(tableWidthAttr){table.style.width=_fnStringToCss(tableWidthAttr);}
if((tableWidthAttr||scrollX)&&!oSettings._reszEvt){$(window).bind('resize.DT-'+oSettings.sInstance,_fnThrottle(function(){_fnAdjustColumnSizing(oSettings);}));oSettings._reszEvt=true;}}
function _fnThrottle(fn,freq){var
frequency=freq||200,last,timer;return function(){var
that=this,now=+new Date(),args=arguments;if(last&&now<last+frequency){clearTimeout(timer);timer=setTimeout(function(){last=undefined;fn.apply(that,args);},frequency);}
else if(last){last=now;fn.apply(that,args);}
else{last=now;}};}
function _fnConvertToWidth(width,parent)
{if(!width){return 0;}
var n=$('<div/>').css('width',_fnStringToCss(width)).appendTo(parent||document.body);var val=n[0].offsetWidth;n.remove();return val;}
function _fnScrollingWidthAdjust(settings,n)
{var scroll=settings.oScroll;if(scroll.sX||scroll.sY){var correction=!scroll.sX?scroll.iBarWidth:0;n.style.width=_fnStringToCss($(n).outerWidth()-correction);}}
function _fnGetWidestNode(settings,colIdx)
{var idx=_fnGetMaxLenString(settings,colIdx);if(idx<0){return null;}
var data=settings.aoData[idx];return!data.nTr?$('<td/>').html(_fnGetCellData(settings,idx,colIdx,'display'))[0]:data.anCells[colIdx];}
function _fnGetMaxLenString(settings,colIdx)
{var s,max=-1,maxIdx=-1;for(var i=0,ien=settings.aoData.length;i<ien;i++){s=_fnGetCellData(settings,i,colIdx,'display')+'';s=s.replace(__re_html_remove,'');if(s.length>max){max=s.length;maxIdx=i;}}
return maxIdx;}
function _fnStringToCss(s)
{if(s===null){return'0px';}
if(typeof s=='number'){return s<0?'0px':s+'px';}
return s.match(/\d$/)?s+'px':s;}
function _fnScrollBarWidth()
{if(!DataTable.__scrollbarWidth){var inner=$('<p/>').css({width:'100%',height:200,padding:0})[0];var outer=$('<div/>').css({position:'absolute',top:0,left:0,width:200,height:150,padding:0,overflow:'hidden',visibility:'hidden'}).append(inner).appendTo('body');var w1=inner.offsetWidth;outer.css('overflow','scroll');var w2=inner.offsetWidth;if(w1===w2){w2=outer[0].clientWidth;}
outer.remove();DataTable.__scrollbarWidth=w1-w2;}
return DataTable.__scrollbarWidth;}
function _fnSortFlatten(settings)
{var
i,iLen,k,kLen,aSort=[],aiOrig=[],aoColumns=settings.aoColumns,aDataSort,iCol,sType,srcCol,fixed=settings.aaSortingFixed,fixedObj=$.isPlainObject(fixed),nestedSort=[],add=function(a){if(a.length&&!$.isArray(a[0])){nestedSort.push(a);}
else{nestedSort.push.apply(nestedSort,a);}};if($.isArray(fixed)){add(fixed);}
if(fixedObj&&fixed.pre){add(fixed.pre);}
add(settings.aaSorting);if(fixedObj&&fixed.post){add(fixed.post);}
for(i=0;i<nestedSort.length;i++)
{srcCol=nestedSort[i][0];aDataSort=aoColumns[srcCol].aDataSort;for(k=0,kLen=aDataSort.length;k<kLen;k++)
{iCol=aDataSort[k];sType=aoColumns[iCol].sType||'string';aSort.push({src:srcCol,col:iCol,dir:nestedSort[i][1],index:nestedSort[i][2],type:sType,formatter:DataTable.ext.type.order[sType+"-pre"]});}}
return aSort;}
function _fnSort(oSettings)
{var
i,ien,iLen,j,jLen,k,kLen,sDataType,nTh,aiOrig=[],oExtSort=DataTable.ext.type.order,aoData=oSettings.aoData,aoColumns=oSettings.aoColumns,aDataSort,data,iCol,sType,oSort,formatters=0,sortCol,displayMaster=oSettings.aiDisplayMaster,aSort;_fnColumnTypes(oSettings);aSort=_fnSortFlatten(oSettings);for(i=0,ien=aSort.length;i<ien;i++){sortCol=aSort[i];if(sortCol.formatter){formatters++;}
_fnSortData(oSettings,sortCol.col);}
if(_fnDataSource(oSettings)!='ssp'&&aSort.length!==0)
{for(i=0,iLen=displayMaster.length;i<iLen;i++){aiOrig[displayMaster[i]]=i;}
if(formatters===aSort.length){displayMaster.sort(function(a,b){var
x,y,k,test,sort,len=aSort.length,dataA=aoData[a]._aSortData,dataB=aoData[b]._aSortData;for(k=0;k<len;k++){sort=aSort[k];x=dataA[sort.col];y=dataB[sort.col];test=x<y?-1:x>y?1:0;if(test!==0){return sort.dir==='asc'?test:-test;}}
x=aiOrig[a];y=aiOrig[b];return x<y?-1:x>y?1:0;});}
else{displayMaster.sort(function(a,b){var
x,y,k,l,test,sort,fn,len=aSort.length,dataA=aoData[a]._aSortData,dataB=aoData[b]._aSortData;for(k=0;k<len;k++){sort=aSort[k];x=dataA[sort.col];y=dataB[sort.col];fn=oExtSort[sort.type+"-"+sort.dir]||oExtSort["string-"+sort.dir];test=fn(x,y);if(test!==0){return test;}}
x=aiOrig[a];y=aiOrig[b];return x<y?-1:x>y?1:0;});}}
oSettings.bSorted=true;}
function _fnSortAria(settings)
{var label;var nextSort;var columns=settings.aoColumns;var aSort=_fnSortFlatten(settings);var oAria=settings.oLanguage.oAria;for(var i=0,iLen=columns.length;i<iLen;i++)
{var col=columns[i];var asSorting=col.asSorting;var sTitle=col.sTitle.replace(/<.*?>/g,"");var th=col.nTh;th.removeAttribute('aria-sort');if(col.bSortable){if(aSort.length>0&&aSort[0].col==i){th.setAttribute('aria-sort',aSort[0].dir=="asc"?"ascending":"descending");nextSort=asSorting[aSort[0].index+1]||asSorting[0];}
else{nextSort=asSorting[0];}
label=sTitle+(nextSort==="asc"?oAria.sSortAscending:oAria.sSortDescending);}
else{label=sTitle;}
th.setAttribute('aria-label',label);}}
function _fnSortListener(settings,colIdx,append,callback)
{var col=settings.aoColumns[colIdx];var sorting=settings.aaSorting;var asSorting=col.asSorting;var nextSortIdx;var next=function(a){var idx=a._idx;if(idx===undefined){idx=$.inArray(a[1],asSorting);}
return idx+1>=asSorting.length?0:idx+1;};if(append&&settings.oFeatures.bSortMulti){var sortIdx=$.inArray(colIdx,_pluck(sorting,'0'));if(sortIdx!==-1){nextSortIdx=next(sorting[sortIdx]);sorting[sortIdx][1]=asSorting[nextSortIdx];sorting[sortIdx]._idx=nextSortIdx;}
else{sorting.push([colIdx,asSorting[0],0]);sorting[sorting.length-1]._idx=0;}}
else if(sorting.length&&sorting[0][0]==colIdx){nextSortIdx=next(sorting[0]);sorting.length=1;sorting[0][1]=asSorting[nextSortIdx];sorting[0]._idx=nextSortIdx;}
else{sorting.length=0;sorting.push([colIdx,asSorting[0]]);sorting[0]._idx=0;}
_fnReDraw(settings);if(typeof callback=='function'){callback(settings);}}
function _fnSortAttachListener(settings,attachTo,colIdx,callback)
{var col=settings.aoColumns[colIdx];_fnBindAction(attachTo,{},function(e){if(col.bSortable===false){return;}
if(settings.oFeatures.bProcessing){_fnProcessingDisplay(settings,true);setTimeout(function(){_fnSortListener(settings,colIdx,e.shiftKey,callback);if(_fnDataSource(settings)!=='ssp'){_fnProcessingDisplay(settings,false);}},0);}
else{_fnSortListener(settings,colIdx,e.shiftKey,callback);}});}
function _fnSortingClasses(settings)
{var oldSort=settings.aLastSort;var sortClass=settings.oClasses.sSortColumn;var sort=_fnSortFlatten(settings);var features=settings.oFeatures;var i,ien,colIdx;if(features.bSort&&features.bSortClasses){for(i=0,ien=oldSort.length;i<ien;i++){colIdx=oldSort[i].src;$(_pluck(settings.aoData,'anCells',colIdx)).removeClass(sortClass+(i<2?i+1:3));}
for(i=0,ien=sort.length;i<ien;i++){colIdx=sort[i].src;$(_pluck(settings.aoData,'anCells',colIdx)).addClass(sortClass+(i<2?i+1:3));}}
settings.aLastSort=sort;}
function _fnSortData(settings,idx)
{var column=settings.aoColumns[idx];var customSort=DataTable.ext.order[column.sSortDataType];var customData;if(customSort){customData=customSort.call(settings.oInstance,settings,idx,_fnColumnIndexToVisible(settings,idx));}
var row,cellData;var formatter=DataTable.ext.type.order[column.sType+"-pre"];for(var i=0,ien=settings.aoData.length;i<ien;i++){row=settings.aoData[i];if(!row._aSortData){row._aSortData=[];}
if(!row._aSortData[idx]||customSort){cellData=customSort?customData[i]:_fnGetCellData(settings,i,idx,'sort');row._aSortData[idx]=formatter?formatter(cellData):cellData;}}}
function _fnSaveState(oSettings)
{if(!oSettings.oFeatures.bStateSave||oSettings.bDestroying)
{return;}
var i,iLen;var oState={"iCreate":+new Date(),"iStart":oSettings._iDisplayStart,"iLength":oSettings._iDisplayLength,"aaSorting":$.extend(true,[],oSettings.aaSorting),"oSearch":$.extend(true,{},oSettings.oPreviousSearch),"aoSearchCols":$.extend(true,[],oSettings.aoPreSearchCols),"abVisCols":_pluck(oSettings.aoColumns,'bVisible')};_fnCallbackFire(oSettings,"aoStateSaveParams",'stateSaveParams',[oSettings,oState]);oSettings.fnStateSaveCallback.call(oSettings.oInstance,oSettings,oState);}
function _fnLoadState(oSettings,oInit)
{var i,ien;var columns=oSettings.aoColumns;if(!oSettings.oFeatures.bStateSave){return;}
var oData=oSettings.fnStateLoadCallback.call(oSettings.oInstance,oSettings);if(!oData){return;}
var abStateLoad=_fnCallbackFire(oSettings,'aoStateLoadParams','stateLoadParams',[oSettings,oData]);if($.inArray(false,abStateLoad)!==-1){return;}
var duration=oSettings.iStateDuration;if(duration>0&&oData.iCreate<+new Date()-(duration*1000)){return;}
if(columns.length!==oData.aoSearchCols.length){return;}
oSettings.oLoadedState=$.extend(true,{},oData);oSettings._iDisplayStart=oData.iStart;oSettings.iInitDisplayStart=oData.iStart;oSettings._iDisplayLength=oData.iLength;oSettings.aaSorting=$.map(oData.aaSorting,function(col,i){return col[0]>=columns.length?[0,col[1]]:col;});$.extend(oSettings.oPreviousSearch,oData.oSearch);$.extend(true,oSettings.aoPreSearchCols,oData.aoSearchCols);var visColumns=oData.abVisCols;for(i=0,ien=visColumns.length;i<ien;i++){columns[i].bVisible=visColumns[i];}
_fnCallbackFire(oSettings,'aoStateLoaded','stateLoaded',[oSettings,oData]);}
function _fnSettingsFromNode(table)
{var settings=DataTable.settings;var idx=$.inArray(table,_pluck(settings,'nTable'));return idx!==-1?settings[idx]:null;}
function _fnLog(settings,level,msg,tn)
{msg='DataTables warning: '+
(settings!==null?'table id='+settings.sTableId+' - ':'')+msg;if(tn){msg+='. For more information about this error, please see '+'http://datatables.net/tn/'+tn;}
if(!level){var ext=DataTable.ext;var type=ext.sErrMode||ext.errMode;if(type=='alert'){alert(msg);}
else{throw new Error(msg);}}
else if(window.console&&console.log){console.log(msg);}}
function _fnMap(ret,src,name,mappedName)
{if($.isArray(name)){$.each(name,function(i,val){if($.isArray(val)){_fnMap(ret,src,val[0],val[1]);}
else{_fnMap(ret,src,val);}});return;}
if(mappedName===undefined){mappedName=name;}
if(src[name]!==undefined){ret[mappedName]=src[name];}}
function _fnExtend(out,extender,breakRefs)
{var val;for(var prop in extender){if(extender.hasOwnProperty(prop)){val=extender[prop];if($.isPlainObject(val)){if(!$.isPlainObject(out[prop])){out[prop]={};}
$.extend(true,out[prop],val);}
else if(breakRefs&&prop!=='data'&&prop!=='aaData'&&$.isArray(val)){out[prop]=val.slice();}
else{out[prop]=val;}}}
return out;}
function _fnBindAction(n,oData,fn)
{$(n).bind('click.DT',oData,function(e){n.blur();fn(e);}).bind('keypress.DT',oData,function(e){if(e.which===13){e.preventDefault();fn(e);}}).bind('selectstart.DT',function(){return false;});}
function _fnCallbackReg(oSettings,sStore,fn,sName)
{if(fn)
{oSettings[sStore].push({"fn":fn,"sName":sName});}}
function _fnCallbackFire(settings,callbackArr,event,args)
{var ret=[];if(callbackArr){ret=$.map(settings[callbackArr].slice().reverse(),function(val,i){return val.fn.apply(settings.oInstance,args);});}
if(event!==null){$(settings.nTable).trigger(event+'.dt',args);}
return ret;}
function _fnLengthOverflow(settings)
{var
start=settings._iDisplayStart,end=settings.fnDisplayEnd(),len=settings._iDisplayLength;if(end===settings.fnRecordsDisplay())
{start=end-len;}
if(len===-1||start<0)
{start=0;}
settings._iDisplayStart=start;}
function _fnRenderer(settings,type)
{var renderer=settings.renderer;var host=DataTable.ext.renderer[type];if($.isPlainObject(renderer)&&renderer[type]){return host[renderer[type]]||host._;}
else if(typeof renderer==='string'){return host[renderer]||host._;}
return host._;}
function _fnDataSource(settings)
{if(settings.oFeatures.bServerSide){return'ssp';}
else if(settings.ajax||settings.sAjaxSource){return'ajax';}
return'dom';}
DataTable=function(options)
{this.$=function(sSelector,oOpts)
{return this.api(true).$(sSelector,oOpts);};this._=function(sSelector,oOpts)
{return this.api(true).rows(sSelector,oOpts).data();};this.api=function(traditional)
{return traditional?new _Api(_fnSettingsFromNode(this[_ext.iApiIndex])):new _Api(this);};this.fnAddData=function(data,redraw)
{var api=this.api(true);var rows=$.isArray(data)&&($.isArray(data[0])||$.isPlainObject(data[0]))?api.rows.add(data):api.row.add(data);if(redraw===undefined||redraw){api.draw();}
return rows.flatten().toArray();};this.fnAdjustColumnSizing=function(bRedraw)
{var api=this.api(true).columns.adjust();var settings=api.settings()[0];var scroll=settings.oScroll;if(bRedraw===undefined||bRedraw){api.draw(false);}
else if(scroll.sX!==""||scroll.sY!==""){_fnScrollDraw(settings);}};this.fnClearTable=function(bRedraw)
{var api=this.api(true).clear();if(bRedraw===undefined||bRedraw){api.draw();}};this.fnClose=function(nTr)
{this.api(true).row(nTr).child.hide();};this.fnDeleteRow=function(target,callback,redraw)
{var api=this.api(true);var rows=api.rows(target);var settings=rows.settings()[0];var data=settings.aoData[rows[0][0]];rows.remove();if(callback){callback.call(this,settings,data);}
if(redraw===undefined||redraw){api.draw();}
return data;};this.fnDestroy=function(remove)
{this.api(true).destroy(remove);};this.fnDraw=function(complete)
{this.api(true).draw(!complete);};this.fnFilter=function(sInput,iColumn,bRegex,bSmart,bShowGlobal,bCaseInsensitive)
{var api=this.api(true);if(iColumn===null||iColumn===undefined){api.search(sInput,bRegex,bSmart,bCaseInsensitive);}
else{api.column(iColumn).search(sInput,bRegex,bSmart,bCaseInsensitive);}
api.draw();};this.fnGetData=function(src,col)
{var api=this.api(true);if(src!==undefined){var type=src.nodeName?src.nodeName.toLowerCase():'';return col!==undefined||type=='td'||type=='th'?api.cell(src,col).data():api.row(src).data()||null;}
return api.data().toArray();};this.fnGetNodes=function(iRow)
{var api=this.api(true);return iRow!==undefined?api.row(iRow).node():api.rows().nodes().flatten().toArray();};this.fnGetPosition=function(node)
{var api=this.api(true);var nodeName=node.nodeName.toUpperCase();if(nodeName=='TR'){return api.row(node).index();}
else if(nodeName=='TD'||nodeName=='TH'){var cell=api.cell(node).index();return[cell.row,cell.columnVisible,cell.column];}
return null;};this.fnIsOpen=function(nTr)
{return this.api(true).row(nTr).child.isShown();};this.fnOpen=function(nTr,mHtml,sClass)
{return this.api(true).row(nTr).child(mHtml,sClass).show().child()[0];};this.fnPageChange=function(mAction,bRedraw)
{var api=this.api(true).page(mAction);if(bRedraw===undefined||bRedraw){api.draw(false);}};this.fnSetColumnVis=function(iCol,bShow,bRedraw)
{var api=this.api(true).column(iCol).visible(bShow);if(bRedraw===undefined||bRedraw){api.columns.adjust().draw();}};this.fnSettings=function()
{return _fnSettingsFromNode(this[_ext.iApiIndex]);};this.fnSort=function(aaSort)
{this.api(true).order(aaSort).draw();};this.fnSortListener=function(nNode,iColumn,fnCallback)
{this.api(true).order.listener(nNode,iColumn,fnCallback);};this.fnUpdate=function(mData,mRow,iColumn,bRedraw,bAction)
{var api=this.api(true);if(iColumn===undefined||iColumn===null){api.row(mRow).data(mData);}
else{api.cell(mRow,iColumn).data(mData);}
if(bAction===undefined||bAction){api.columns.adjust();}
if(bRedraw===undefined||bRedraw){api.draw();}
return 0;};this.fnVersionCheck=_ext.fnVersionCheck;var _that=this;var emptyInit=options===undefined;var len=this.length;if(emptyInit){options={};}
this.oApi=this.internal=_ext.internal;for(var fn in DataTable.ext.internal){if(fn){this[fn]=_fnExternApiFunc(fn);}}
this.each(function(){var o={};var oInit=len>1?_fnExtend(o,options,true):options;var i=0,iLen,j,jLen,k,kLen;var sId=this.getAttribute('id');var bInitHandedOff=false;var defaults=DataTable.defaults;if(this.nodeName.toLowerCase()!='table')
{_fnLog(null,0,'Non-table node initialisation ('+this.nodeName+')',2);return;}
_fnCompatOpts(defaults);_fnCompatCols(defaults.column);_fnCamelToHungarian(defaults,defaults,true);_fnCamelToHungarian(defaults.column,defaults.column,true);_fnCamelToHungarian(defaults,oInit);var allSettings=DataTable.settings;for(i=0,iLen=allSettings.length;i<iLen;i++)
{if(allSettings[i].nTable==this)
{var bRetrieve=oInit.bRetrieve!==undefined?oInit.bRetrieve:defaults.bRetrieve;var bDestroy=oInit.bDestroy!==undefined?oInit.bDestroy:defaults.bDestroy;if(emptyInit||bRetrieve)
{return allSettings[i].oInstance;}
else if(bDestroy)
{allSettings[i].oInstance.fnDestroy();break;}
else
{_fnLog(allSettings[i],0,'Cannot reinitialise DataTable',3);return;}}
if(allSettings[i].sTableId==this.id)
{allSettings.splice(i,1);break;}}
if(sId===null||sId==="")
{sId="DataTables_Table_"+(DataTable.ext._unique++);this.id=sId;}
var oSettings=$.extend(true,{},DataTable.models.oSettings,{"nTable":this,"oApi":_that.internal,"oInit":oInit,"sDestroyWidth":$(this)[0].style.width,"sInstance":sId,"sTableId":sId});allSettings.push(oSettings);oSettings.oInstance=(_that.length===1)?_that:$(this).dataTable();_fnCompatOpts(oInit);if(oInit.oLanguage)
{_fnLanguageCompat(oInit.oLanguage);}
if(oInit.aLengthMenu&&!oInit.iDisplayLength)
{oInit.iDisplayLength=$.isArray(oInit.aLengthMenu[0])?oInit.aLengthMenu[0][0]:oInit.aLengthMenu[0];}
oInit=_fnExtend($.extend(true,{},defaults),oInit);_fnMap(oSettings.oFeatures,oInit,["bPaginate","bLengthChange","bFilter","bSort","bSortMulti","bInfo","bProcessing","bAutoWidth","bSortClasses","bServerSide","bDeferRender"]);_fnMap(oSettings,oInit,["asStripeClasses","ajax","fnServerData","fnFormatNumber","sServerMethod","aaSorting","aaSortingFixed","aLengthMenu","sPaginationType","sAjaxSource","sAjaxDataProp","iStateDuration","sDom","bSortCellsTop","iTabIndex","fnStateLoadCallback","fnStateSaveCallback","renderer",["iCookieDuration","iStateDuration"],["oSearch","oPreviousSearch"],["aoSearchCols","aoPreSearchCols"],["iDisplayLength","_iDisplayLength"],["bJQueryUI","bJUI"]]);_fnMap(oSettings.oScroll,oInit,[["sScrollX","sX"],["sScrollXInner","sXInner"],["sScrollY","sY"],["bScrollCollapse","bCollapse"]]);_fnMap(oSettings.oLanguage,oInit,"fnInfoCallback");_fnCallbackReg(oSettings,'aoDrawCallback',oInit.fnDrawCallback,'user');_fnCallbackReg(oSettings,'aoServerParams',oInit.fnServerParams,'user');_fnCallbackReg(oSettings,'aoStateSaveParams',oInit.fnStateSaveParams,'user');_fnCallbackReg(oSettings,'aoStateLoadParams',oInit.fnStateLoadParams,'user');_fnCallbackReg(oSettings,'aoStateLoaded',oInit.fnStateLoaded,'user');_fnCallbackReg(oSettings,'aoRowCallback',oInit.fnRowCallback,'user');_fnCallbackReg(oSettings,'aoRowCreatedCallback',oInit.fnCreatedRow,'user');_fnCallbackReg(oSettings,'aoHeaderCallback',oInit.fnHeaderCallback,'user');_fnCallbackReg(oSettings,'aoFooterCallback',oInit.fnFooterCallback,'user');_fnCallbackReg(oSettings,'aoInitComplete',oInit.fnInitComplete,'user');_fnCallbackReg(oSettings,'aoPreDrawCallback',oInit.fnPreDrawCallback,'user');var oClasses=oSettings.oClasses;if(oInit.bJQueryUI)
{$.extend(oClasses,DataTable.ext.oJUIClasses,oInit.oClasses);if(oInit.sDom===defaults.sDom&&defaults.sDom==="lfrtip")
{oSettings.sDom='<"H"lfr>t<"F"ip>';}
if(!oSettings.renderer){oSettings.renderer='jqueryui';}
else if($.isPlainObject(oSettings.renderer)&&!oSettings.renderer.header){oSettings.renderer.header='jqueryui';}}
else
{$.extend(oClasses,DataTable.ext.classes,oInit.oClasses);}
$(this).addClass(oClasses.sTable);if(oSettings.oScroll.sX!==""||oSettings.oScroll.sY!=="")
{oSettings.oScroll.iBarWidth=_fnScrollBarWidth();}
if(oSettings.oScroll.sX===true){oSettings.oScroll.sX='100%';}
if(oSettings.iInitDisplayStart===undefined)
{oSettings.iInitDisplayStart=oInit.iDisplayStart;oSettings._iDisplayStart=oInit.iDisplayStart;}
if(oInit.iDeferLoading!==null)
{oSettings.bDeferLoading=true;var tmp=$.isArray(oInit.iDeferLoading);oSettings._iRecordsDisplay=tmp?oInit.iDeferLoading[0]:oInit.iDeferLoading;oSettings._iRecordsTotal=tmp?oInit.iDeferLoading[1]:oInit.iDeferLoading;}
if(oInit.oLanguage.sUrl!=="")
{oSettings.oLanguage.sUrl=oInit.oLanguage.sUrl;$.getJSON(oSettings.oLanguage.sUrl,null,function(json){_fnLanguageCompat(json);_fnCamelToHungarian(defaults.oLanguage,json);$.extend(true,oSettings.oLanguage,oInit.oLanguage,json);_fnInitialise(oSettings);});bInitHandedOff=true;}
else
{$.extend(true,oSettings.oLanguage,oInit.oLanguage);}
if(oInit.asStripeClasses===null)
{oSettings.asStripeClasses=[oClasses.sStripeOdd,oClasses.sStripeEven];}
var stripeClasses=oSettings.asStripeClasses;var rowOne=$('tbody tr:eq(0)',this);if($.inArray(true,$.map(stripeClasses,function(el,i){return rowOne.hasClass(el);}))!==-1){$('tbody tr',this).removeClass(stripeClasses.join(' '));oSettings.asDestroyStripes=stripeClasses.slice();}
var anThs=[];var aoColumnsInit;var nThead=this.getElementsByTagName('thead');if(nThead.length!==0)
{_fnDetectHeader(oSettings.aoHeader,nThead[0]);anThs=_fnGetUniqueThs(oSettings);}
if(oInit.aoColumns===null)
{aoColumnsInit=[];for(i=0,iLen=anThs.length;i<iLen;i++)
{aoColumnsInit.push(null);}}
else
{aoColumnsInit=oInit.aoColumns;}
for(i=0,iLen=aoColumnsInit.length;i<iLen;i++)
{_fnAddColumn(oSettings,anThs?anThs[i]:null);}
_fnApplyColumnDefs(oSettings,oInit.aoColumnDefs,aoColumnsInit,function(iCol,oDef){_fnColumnOptions(oSettings,iCol,oDef);});if(rowOne.length){var a=function(cell,name){return cell.getAttribute('data-'+name)?name:null;};$.each(_fnGetRowElements(oSettings,rowOne[0]).cells,function(i,cell){var col=oSettings.aoColumns[i];if(col.mData===i){var sort=a(cell,'sort')||a(cell,'order');var filter=a(cell,'filter')||a(cell,'search');if(sort!==null||filter!==null){col.mData={_:i+'.display',sort:sort!==null?i+'.@data-'+sort:undefined,type:sort!==null?i+'.@data-'+sort:undefined,filter:filter!==null?i+'.@data-'+filter:undefined};_fnColumnOptions(oSettings,i);}}});}
var features=oSettings.oFeatures;if(oInit.bStateSave)
{features.bStateSave=true;_fnLoadState(oSettings,oInit);_fnCallbackReg(oSettings,'aoDrawCallback',_fnSaveState,'state_save');}
if(oInit.aaSorting===undefined)
{var sorting=oSettings.aaSorting;for(i=0,iLen=sorting.length;i<iLen;i++)
{sorting[i][1]=oSettings.aoColumns[i].asSorting[0];}}
_fnSortingClasses(oSettings);if(features.bSort)
{_fnCallbackReg(oSettings,'aoDrawCallback',function(){if(oSettings.bSorted){var aSort=_fnSortFlatten(oSettings);var sortedColumns={};$.each(aSort,function(i,val){sortedColumns[val.src]=val.dir;});_fnCallbackFire(oSettings,null,'order',[oSettings,aSort,sortedColumns]);_fnSortAria(oSettings);}});}
_fnCallbackReg(oSettings,'aoDrawCallback',function(){if(oSettings.bSorted||_fnDataSource(oSettings)==='ssp'||features.bDeferRender){_fnSortingClasses(oSettings);}},'sc');_fnBrowserDetect(oSettings);var captions=$(this).children('caption').each(function(){this._captionSide=$(this).css('caption-side');});var thead=$(this).children('thead');if(thead.length===0)
{thead=$('<thead/>').appendTo(this);}
oSettings.nTHead=thead[0];var tbody=$(this).children('tbody');if(tbody.length===0)
{tbody=$('<tbody/>').appendTo(this);}
oSettings.nTBody=tbody[0];var tfoot=$(this).children('tfoot');if(tfoot.length===0&&captions.length>0&&(oSettings.oScroll.sX!==""||oSettings.oScroll.sY!==""))
{tfoot=$('<tfoot/>').appendTo(this);}
if(tfoot.length===0||tfoot.children().length===0){$(this).addClass(oClasses.sNoFooter);}
else if(tfoot.length>0){oSettings.nTFoot=tfoot[0];_fnDetectHeader(oSettings.aoFooter,oSettings.nTFoot);}
if(oInit.aaData)
{for(i=0;i<oInit.aaData.length;i++)
{_fnAddData(oSettings,oInit.aaData[i]);}}
else if(oSettings.bDeferLoading||_fnDataSource(oSettings)=='dom')
{_fnAddTr(oSettings,$(oSettings.nTBody).children('tr'));}
oSettings.aiDisplay=oSettings.aiDisplayMaster.slice();oSettings.bInitialised=true;if(bInitHandedOff===false)
{_fnInitialise(oSettings);}});_that=null;return this;};var __apiStruct=[];var __arrayProto=Array.prototype;var _toSettings=function(mixed)
{var idx,jq;var settings=DataTable.settings;var tables=$.map(settings,function(el,i){return el.nTable;});if(!mixed){return[];}
else if(mixed.nTable&&mixed.oApi){return[mixed];}
else if(mixed.nodeName&&mixed.nodeName.toLowerCase()==='table'){idx=$.inArray(mixed,tables);return idx!==-1?[settings[idx]]:null;}
else if(mixed&&typeof mixed.settings==='function'){return mixed.settings().toArray();}
else if(typeof mixed==='string'){jq=$(mixed);}
else if(mixed instanceof $){jq=mixed;}
if(jq){return jq.map(function(i){idx=$.inArray(this,tables);return idx!==-1?settings[idx]:null;}).toArray();}};DataTable.Api=_Api=function(context,data)
{if(!this instanceof _Api){throw'DT API must be constructed as a new object';}
var settings=[];var ctxSettings=function(o){var a=_toSettings(o);if(a){settings.push.apply(settings,a);}};if($.isArray(context)){for(var i=0,ien=context.length;i<ien;i++){ctxSettings(context[i]);}}
else{ctxSettings(context);}
this.context=_unique(settings);if(data){this.push.apply(this,data.toArray?data.toArray():data);}
this.selector={rows:null,cols:null,opts:null};_Api.extend(this,this,__apiStruct);};_Api.prototype={concat:__arrayProto.concat,context:[],each:function(fn)
{if(__arrayProto.forEach){__arrayProto.forEach.call(this,fn,this);}
else{for(var i=0,ien=this.length;i<ien;i++){fn.call(this,this[i],i,this);}}
return this;},eq:function(idx)
{var ctx=this.context;return ctx.length>idx?new _Api(ctx[idx],this[idx]):null;},filter:function(fn)
{var a=[];if(__arrayProto.filter){a=__arrayProto.filter.call(this,fn,this);}
else{for(var i=0,ien=this.length;i<ien;i++){if(fn.call(this,this[i],i,this)){a.push(this[i]);}}}
return new _Api(this.context,a);},flatten:function()
{var a=[];return new _Api(this.context,a.concat.apply(a,this.toArray()));},join:__arrayProto.join,indexOf:__arrayProto.indexOf||function(obj,start)
{for(var i=(start||0),ien=this.length;i<ien;i++){if(this[i]===obj){return i;}}
return-1;},iterator:function(flatten,type,fn){var
a=[],ret,i,ien,j,jen,context=this.context,rows,items,item,selector=this.selector;if(typeof flatten==='string'){fn=type;type=flatten;flatten=false;}
for(i=0,ien=context.length;i<ien;i++){if(type==='table'){ret=fn(context[i],i);if(ret!==undefined){a.push(ret);}}
else if(type==='columns'||type==='rows'){ret=fn(context[i],this[i],i);if(ret!==undefined){a.push(ret);}}
else if(type==='column'||type==='column-rows'||type==='row'||type==='cell'){items=this[i];if(type==='column-rows'){rows=_selector_row_indexes(context[i],selector.opts);}
for(j=0,jen=items.length;j<jen;j++){item=items[j];if(type==='cell'){ret=fn(context[i],item.row,item.column,i,j);}
else{ret=fn(context[i],item,i,j,rows);}
if(ret!==undefined){a.push(ret);}}}}
if(a.length){var api=new _Api(context,flatten?a.concat.apply([],a):a);var apiSelector=api.selector;apiSelector.rows=selector.rows;apiSelector.cols=selector.cols;apiSelector.opts=selector.opts;return api;}
return this;},lastIndexOf:__arrayProto.lastIndexOf||function(obj,start)
{return this.indexOf.apply(this.toArray.reverse(),arguments);},length:0,map:function(fn)
{var a=[];if(__arrayProto.map){a=__arrayProto.map.call(this,fn,this);}
else{for(var i=0,ien=this.length;i<ien;i++){a.push(fn.call(this,this[i],i));}}
return new _Api(this.context,a);},pluck:function(prop)
{return this.map(function(el){return el[prop];});},pop:__arrayProto.pop,push:__arrayProto.push,reduce:__arrayProto.reduce||function(fn,init)
{return _fnReduce(this,fn,init,0,this.length,1);},reduceRight:__arrayProto.reduceRight||function(fn,init)
{return _fnReduce(this,fn,init,this.length-1,-1,-1);},reverse:__arrayProto.reverse,selector:null,shift:__arrayProto.shift,sort:__arrayProto.sort,splice:__arrayProto.splice,toArray:function()
{return __arrayProto.slice.call(this);},to$:function()
{return $(this);},toJQuery:function()
{return $(this);},unique:function()
{return new _Api(this.context,_unique(this));},unshift:__arrayProto.unshift};_Api.extend=function(scope,obj,ext)
{if(!obj||(!(obj instanceof _Api)&&!obj.__dt_wrapper)){return;}
var
i,ien,j,jen,struct,inner,methodScoping=function(fn,struc){return function(){var ret=fn.apply(scope,arguments);_Api.extend(ret,ret,struc.methodExt);return ret;};};for(i=0,ien=ext.length;i<ien;i++){struct=ext[i];obj[struct.name]=typeof struct.val==='function'?methodScoping(struct.val,struct):$.isPlainObject(struct.val)?{}:struct.val;obj[struct.name].__dt_wrapper=true;_Api.extend(scope,obj[struct.name],struct.propExt);}};_Api.register=_api_register=function(name,val)
{if($.isArray(name)){for(var j=0,jen=name.length;j<jen;j++){_Api.register(name[j],val);}
return;}
var
i,ien,heir=name.split('.'),struct=__apiStruct,key,method;var find=function(src,name){for(var i=0,ien=src.length;i<ien;i++){if(src[i].name===name){return src[i];}}
return null;};for(i=0,ien=heir.length;i<ien;i++){method=heir[i].indexOf('()')!==-1;key=method?heir[i].replace('()',''):heir[i];var src=find(struct,key);if(!src){src={name:key,val:{},methodExt:[],propExt:[]};struct.push(src);}
if(i===ien-1){src.val=val;}
else{struct=method?src.methodExt:src.propExt;}}
if(_Api.ready){DataTable.api.build();}};_Api.registerPlural=_api_registerPlural=function(pluralName,singularName,val){_Api.register(pluralName,val);_Api.register(singularName,function(){var ret=val.apply(this,arguments);if(ret===this){return this;}
else if(ret instanceof _Api){return ret.length?$.isArray(ret[0])?new _Api(ret.context,ret[0]):ret[0]:undefined;}
return ret;});};var __table_selector=function(selector,a)
{if(typeof selector==='number'){return[a[selector]];}
var nodes=$.map(a,function(el,i){return el.nTable;});return $(nodes).filter(selector).map(function(i){var idx=$.inArray(this,nodes);return a[idx];}).toArray();};_api_register('tables()',function(selector){return selector?new _Api(__table_selector(selector,this.context)):this;});_api_register('table()',function(selector){var tables=this.tables(selector);var ctx=tables.context;return ctx.length?new _Api(ctx[0]):tables;});_api_registerPlural('tables().nodes()','table().node()',function(){return this.iterator('table',function(ctx){return ctx.nTable;});});_api_registerPlural('tables().body()','table().body()',function(){return this.iterator('table',function(ctx){return ctx.nTBody;});});_api_registerPlural('tables().header()','table().header()',function(){return this.iterator('table',function(ctx){return ctx.nTHead;});});_api_registerPlural('tables().footer()','table().footer()',function(){return this.iterator('table',function(ctx){return ctx.nTFoot;});});_api_register('draw()',function(resetPaging){return this.iterator('table',function(settings){_fnReDraw(settings,resetPaging===false);});});_api_register('page()',function(action){if(action===undefined){return this.page.info().page;}
return this.iterator('table',function(settings){_fnPageChange(settings,action);});});_api_register('page.info()',function(action){if(this.context.length===0){return undefined;}
var
settings=this.context[0],start=settings._iDisplayStart,len=settings._iDisplayLength,visRecords=settings.fnRecordsDisplay(),all=len===-1;return{"page":all?0:Math.floor(start/len),"pages":all?1:Math.ceil(visRecords/len),"start":start,"end":settings.fnDisplayEnd(),"length":len,"recordsTotal":settings.fnRecordsTotal(),"recordsDisplay":visRecords};});_api_register('page.len()',function(len){if(len===undefined){return this.context.length!==0?this.context[0]._iDisplayLength:undefined;}
return this.iterator('table',function(settings){_fnLengthChange(settings,len);});});var __reload=function(settings,holdPosition,callback){if(_fnDataSource(settings)=='ssp'){_fnReDraw(settings,holdPosition);}
else{_fnProcessingDisplay(settings,true);_fnBuildAjax(settings,[],function(json){_fnClearTable(settings);var data=_fnAjaxDataSrc(settings,json);for(var i=0,ien=data.length;i<ien;i++){_fnAddData(settings,data[i]);}
_fnReDraw(settings,holdPosition);_fnProcessingDisplay(settings,false);});}
if(callback){var api=new _Api(settings);api.one('draw',function(){callback(api.ajax.json());});}};_api_register('ajax.json()',function(){var ctx=this.context;if(ctx.length>0){return ctx[0].json;}});_api_register('ajax.params()',function(){var ctx=this.context;if(ctx.length>0){return ctx[0].oAjaxData;}});_api_register('ajax.reload()',function(callback,resetPaging){return this.iterator('table',function(settings){__reload(settings,resetPaging===false,callback);});});_api_register('ajax.url()',function(url){var ctx=this.context;if(url===undefined){if(ctx.length===0){return undefined;}
ctx=ctx[0];return ctx.ajax?$.isPlainObject(ctx.ajax)?ctx.ajax.url:ctx.ajax:ctx.sAjaxSource;}
return this.iterator('table',function(settings){if($.isPlainObject(settings.ajax)){settings.ajax.url=url;}
else{settings.ajax=url;}});});_api_register('ajax.url().load()',function(callback,resetPaging){return this.iterator('table',function(ctx){__reload(ctx,resetPaging===false,callback);});});var _selector_run=function(selector,select)
{var
out=[],res,a,i,ien,j,jen;if(!selector||typeof selector==='string'||selector.length===undefined){selector=[selector];}
for(i=0,ien=selector.length;i<ien;i++){a=selector[i]&&selector[i].split?selector[i].split(','):[selector[i]];for(j=0,jen=a.length;j<jen;j++){res=select(typeof a[j]==='string'?$.trim(a[j]):a[j]);if(res&&res.length){out.push.apply(out,res);}}}
return out;};var _selector_opts=function(opts)
{if(!opts){opts={};}
if(opts.filter&&!opts.search){opts.search=opts.filter;}
return{search:opts.search||'none',order:opts.order||'current',page:opts.page||'all'};};var _selector_first=function(inst)
{for(var i=0,ien=inst.length;i<ien;i++){if(inst[i].length>0){inst[0]=inst[i];inst.length=1;inst.context=[inst.context[i]];return inst;}}
inst.length=0;return inst;};var _selector_row_indexes=function(settings,opts)
{var
i,ien,tmp,a=[],displayFiltered=settings.aiDisplay,displayMaster=settings.aiDisplayMaster;var
search=opts.search,order=opts.order,page=opts.page;if(_fnDataSource(settings)=='ssp'){return search==='removed'?[]:_range(0,displayMaster.length);}
else if(page=='current'){for(i=settings._iDisplayStart,ien=settings.fnDisplayEnd();i<ien;i++){a.push(displayFiltered[i]);}}
else if(order=='current'||order=='applied'){a=search=='none'?displayMaster.slice():search=='applied'?displayFiltered.slice():$.map(displayMaster,function(el,i){return $.inArray(el,displayFiltered)===-1?el:null;});}
else if(order=='index'||order=='original'){for(i=0,ien=settings.aoData.length;i<ien;i++){if(search=='none'){a.push(i);}
else{tmp=$.inArray(i,displayFiltered);if((tmp===-1&&search=='removed')||(tmp===1&&search=='applied'))
{a.push(i);}}}}
return a;};var __row_selector=function(settings,selector,opts)
{return _selector_run(selector,function(sel){var selInt=_intVal(sel);if(selInt!==null&&!opts){return[selInt];}
var rows=_selector_row_indexes(settings,opts);if(selInt!==null&&$.inArray(selInt,rows)!==-1){return[selInt];}
else if(!sel){return rows;}
var nodes=[];for(var i=0,ien=rows.length;i<ien;i++){nodes.push(settings.aoData[rows[i]].nTr);}
if(sel.nodeName){if($.inArray(sel,nodes)!==-1){return[sel._DT_RowIndex];}}
return $(nodes).filter(sel).map(function(){return this._DT_RowIndex;}).toArray();});};_api_register('rows()',function(selector,opts){if(selector===undefined){selector='';}
else if($.isPlainObject(selector)){opts=selector;selector='';}
opts=_selector_opts(opts);var inst=this.iterator('table',function(settings){return __row_selector(settings,selector,opts);});inst.selector.rows=selector;inst.selector.opts=opts;return inst;});_api_register('rows().nodes()',function(){return this.iterator('row',function(settings,row){return settings.aoData[row].nTr||undefined;});});_api_register('rows().data()',function(){return this.iterator(true,'rows',function(settings,rows){return _pluck_order(settings.aoData,rows,'_aData');});});_api_registerPlural('rows().cache()','row().cache()',function(type){return this.iterator('row',function(settings,row){var r=settings.aoData[row];return type==='search'?r._aFilterData:r._aSortData;});});_api_registerPlural('rows().invalidate()','row().invalidate()',function(src){return this.iterator('row',function(settings,row){_fnInvalidateRow(settings,row,src);});});_api_registerPlural('rows().indexes()','row().index()',function(){return this.iterator('row',function(settings,row){return row;});});_api_registerPlural('rows().remove()','row().remove()',function(){var that=this;return this.iterator('row',function(settings,row,thatIdx){var data=settings.aoData;data.splice(row,1);for(var i=0,ien=data.length;i<ien;i++){if(data[i].nTr!==null){data[i].nTr._DT_RowIndex=i;}}
var displayIndex=$.inArray(row,settings.aiDisplay);_fnDeleteIndex(settings.aiDisplayMaster,row);_fnDeleteIndex(settings.aiDisplay,row);_fnDeleteIndex(that[thatIdx],row,false);_fnLengthOverflow(settings);});});_api_register('rows.add()',function(rows){var newRows=this.iterator('table',function(settings){var row,i,ien;var out=[];for(i=0,ien=rows.length;i<ien;i++){row=rows[i];if(row.nodeName&&row.nodeName.toUpperCase()==='TR'){out.push(_fnAddTr(settings,row)[0]);}
else{out.push(_fnAddData(settings,row));}}
return out;});var modRows=this.rows(-1);modRows.pop();modRows.push.apply(modRows,newRows.toArray());return modRows;});_api_register('row()',function(selector,opts){return _selector_first(this.rows(selector,opts));});_api_register('row().data()',function(data){var ctx=this.context;if(data===undefined){return ctx.length&&this.length?ctx[0].aoData[this[0]]._aData:undefined;}
ctx[0].aoData[this[0]]._aData=data;_fnInvalidateRow(ctx[0],this[0],'data');return this;});_api_register('row().node()',function(){var ctx=this.context;return ctx.length&&this.length?ctx[0].aoData[this[0]].nTr||null:null;});_api_register('row.add()',function(row){if(row instanceof $&&row.length){row=row[0];}
var rows=this.iterator('table',function(settings){if(row.nodeName&&row.nodeName.toUpperCase()==='TR'){return _fnAddTr(settings,row)[0];}
return _fnAddData(settings,row);});return this.row(rows[0]);});var __details_add=function(ctx,row,data,klass)
{var rows=[];var addRow=function(r,k){if(r.nodeName&&r.nodeName.toLowerCase()==='tr'){rows.push(r);}
else{var created=$('<tr><td/></tr>');$('td',created).addClass(k).html(r)
[0].colSpan=_fnVisbleColumns(ctx);rows.push(created[0]);}};if($.isArray(data)||data instanceof $){for(var i=0,ien=data.length;i<ien;i++){addRow(data[i],klass);}}
else{addRow(data,klass);}
if(row._details){row._details.remove();}
row._details=$(rows);if(row._detailsShow){row._details.insertAfter(row.nTr);}};var __details_display=function(show){var ctx=this.context;if(ctx.length&&this.length){var row=ctx[0].aoData[this[0]];if(row._details){row._detailsShow=show;if(show){row._details.insertAfter(row.nTr);}
else{row._details.remove();}
__details_events(ctx[0]);}}
return this;};var __details_events=function(settings)
{var api=new _Api(settings);var namespace='.dt.DT_details';var drawEvent='draw'+namespace;var colvisEvent='column-visibility'+namespace;api.off(drawEvent+' '+colvisEvent);if(_pluck(settings.aoData,'_details').length>0){api.on(drawEvent,function(){api.rows({page:'current'}).eq(0).each(function(idx){var row=settings.aoData[idx];if(row._detailsShow){row._details.insertAfter(row.nTr);}});});api.on(colvisEvent,function(e,settings,idx,vis){var row,visible=_fnVisbleColumns(settings);for(var i=0,ien=settings.aoData.length;i<ien;i++){row=settings.aoData[i];if(row._details){row._details.children('td[colspan]').attr('colspan',visible);}}});}};_api_register('row().child()',function(data,klass){var ctx=this.context;if(data===undefined){return ctx.length&&this.length?ctx[0].aoData[this[0]]._details:undefined;}
else if(ctx.length&&this.length){__details_add(ctx[0],ctx[0].aoData[this[0]],data,klass);}
return this;});_api_register(['row().child.show()','row().child().show()'],function(){__details_display.call(this,true);return this;});_api_register(['row().child.hide()','row().child().hide()'],function(){__details_display.call(this,false);return this;});_api_register('row().child.isShown()',function(){var ctx=this.context;if(ctx.length&&this.length){return ctx[0].aoData[this[0]]._detailsShow||false;}
return false;});var __re_column_selector=/^(.*):(name|visIdx|visible)$/;var __column_selector=function(settings,selector,opts)
{var
columns=settings.aoColumns,names=_pluck(columns,'sName'),nodes=_pluck(columns,'nTh');return _selector_run(selector,function(s){var selInt=_intVal(s);if(s===''){return _range(columns.length);}
else if(selInt!==null){return[selInt>=0?selInt:columns.length+selInt];}
else{var match=typeof s==='string'?s.match(__re_column_selector):'';if(match){switch(match[2]){case'visIdx':case'visible':var idx=parseInt(match[1],10);if(idx<0){var visColumns=$.map(columns,function(col,i){return col.bVisible?i:null;});return[visColumns[visColumns.length+idx]];}
return[_fnVisibleToColumnIndex(settings,idx)];case'name':return $.map(names,function(name,i){return name===match[1]?i:null;});}}
else{return $(nodes).filter(s).map(function(){return $.inArray(this,nodes);}).toArray();}}});};var __setColumnVis=function(settings,column,vis){var
cols=settings.aoColumns,col=cols[column],data=settings.aoData,row,cells,i,ien,tr;if(vis===undefined){return col.bVisible;}
if(col.bVisible===vis){return;}
if(vis){var insertBefore=$.inArray(true,_pluck(cols,'bVisible'),column+1);for(i=0,ien=data.length;i<ien;i++){tr=data[i].nTr;cells=data[i].anCells;if(tr){tr.insertBefore(cells[column],cells[insertBefore]||null);}}}
else{$(_pluck(settings.aoData,'anCells',column)).detach();col.bVisible=false;_fnDrawHead(settings,settings.aoHeader);_fnDrawHead(settings,settings.aoFooter);_fnSaveState(settings);}
col.bVisible=vis;_fnDrawHead(settings,settings.aoHeader);_fnDrawHead(settings,settings.aoFooter);_fnAdjustColumnSizing(settings);if(settings.oScroll.sX||settings.oScroll.sY){_fnScrollDraw(settings);}
_fnCallbackFire(settings,null,'column-visibility',[settings,column,vis]);_fnSaveState(settings);};_api_register('columns()',function(selector,opts){if(selector===undefined){selector='';}
else if($.isPlainObject(selector)){opts=selector;selector='';}
opts=_selector_opts(opts);var inst=this.iterator('table',function(settings){return __column_selector(settings,selector,opts);});inst.selector.cols=selector;inst.selector.opts=opts;return inst;});_api_registerPlural('columns().header()','column().header()',function(selector,opts){return this.iterator('column',function(settings,column){return settings.aoColumns[column].nTh;});});_api_registerPlural('columns().footer()','column().footer()',function(selector,opts){return this.iterator('column',function(settings,column){return settings.aoColumns[column].nTf;});});_api_registerPlural('columns().data()','column().data()',function(){return this.iterator('column-rows',function(settings,column,i,j,rows){var a=[];for(var row=0,ien=rows.length;row<ien;row++){a.push(_fnGetCellData(settings,rows[row],column,''));}
return a;});});_api_registerPlural('columns().cache()','column().cache()',function(type){return this.iterator('column-rows',function(settings,column,i,j,rows){return _pluck_order(settings.aoData,rows,type==='search'?'_aFilterData':'_aSortData',column);});});_api_registerPlural('columns().nodes()','column().nodes()',function(){return this.iterator('column-rows',function(settings,column,i,j,rows){return _pluck_order(settings.aoData,rows,'anCells',column);});});_api_registerPlural('columns().visible()','column().visible()',function(vis){return this.iterator('column',function(settings,column){return vis===undefined?settings.aoColumns[column].bVisible:__setColumnVis(settings,column,vis);});});_api_registerPlural('columns().indexes()','column().index()',function(type){return this.iterator('column',function(settings,column){return type==='visible'?_fnColumnIndexToVisible(settings,column):column;});});_api_register('columns.adjust()',function(){return this.iterator('table',function(settings){_fnAdjustColumnSizing(settings);});});_api_register('column.index()',function(type,idx){if(this.context.length!==0){var ctx=this.context[0];if(type==='fromVisible'||type==='toData'){return _fnVisibleToColumnIndex(ctx,idx);}
else if(type==='fromData'||type==='toVisible'){return _fnColumnIndexToVisible(ctx,idx);}}});_api_register('column()',function(selector,opts){return _selector_first(this.columns(selector,opts));});var __cell_selector=function(settings,selector,opts)
{var data=settings.aoData;var rows=_selector_row_indexes(settings,opts);var cells=_pluck_order(data,rows,'anCells');var allCells=$([].concat.apply([],cells));var row;var columns=settings.aoColumns.length;var a,i,ien,j;return _selector_run(selector,function(s){if(!s){a=[];for(i=0,ien=rows.length;i<ien;i++){row=rows[i];for(j=0;j<columns;j++){a.push({row:row,column:j});}}
return a;}
else if($.isPlainObject(s)){return[s];}
return allCells.filter(s).map(function(i,el){row=el.parentNode._DT_RowIndex;return{row:row,column:$.inArray(el,data[row].anCells)};}).toArray();});};_api_register('cells()',function(rowSelector,columnSelector,opts){if($.isPlainObject(rowSelector)){if(rowSelector.row){opts=columnSelector;columnSelector=null;}
else{opts=rowSelector;rowSelector=null;}}
if($.isPlainObject(columnSelector)){opts=columnSelector;columnSelector=null;}
if(columnSelector===null||columnSelector===undefined){return this.iterator('table',function(settings){return __cell_selector(settings,rowSelector,_selector_opts(opts));});}
var columns=this.columns(columnSelector,opts);var rows=this.rows(rowSelector,opts);var a,i,ien,j,jen;var cells=this.iterator('table',function(settings,idx){a=[];for(i=0,ien=rows[idx].length;i<ien;i++){for(j=0,jen=columns[idx].length;j<jen;j++){a.push({row:rows[idx][i],column:columns[idx][j]});}}
return a;});$.extend(cells.selector,{cols:columnSelector,rows:rowSelector,opts:opts});return cells;});_api_registerPlural('cells().nodes()','cell().node()',function(){return this.iterator('cell',function(settings,row,column){return settings.aoData[row].anCells[column];});});_api_register('cells().data()',function(){return this.iterator('cell',function(settings,row,column){return _fnGetCellData(settings,row,column);});});_api_registerPlural('cells().cache()','cell().cache()',function(type){type=type==='search'?'_aFilterData':'_aSortData';return this.iterator('cell',function(settings,row,column){return settings.aoData[row][type][column];});});_api_registerPlural('cells().indexes()','cell().index()',function(){return this.iterator('cell',function(settings,row,column){return{row:row,column:column,columnVisible:_fnColumnIndexToVisible(settings,column)};});});_api_register(['cells().invalidate()','cell().invalidate()'],function(src){var selector=this.selector;this.rows(selector.rows,selector.opts).invalidate(src);return this;});_api_register('cell()',function(rowSelector,columnSelector,opts){return _selector_first(this.cells(rowSelector,columnSelector,opts));});_api_register('cell().data()',function(data){var ctx=this.context;var cell=this[0];if(data===undefined){return ctx.length&&cell.length?_fnGetCellData(ctx[0],cell[0].row,cell[0].column):undefined;}
_fnSetCellData(ctx[0],cell[0].row,cell[0].column,data);_fnInvalidateRow(ctx[0],cell[0].row,'data',cell[0].column);return this;});_api_register('order()',function(order,dir){var ctx=this.context;if(order===undefined){return ctx.length!==0?ctx[0].aaSorting:undefined;}
if(typeof order==='number'){order=[[order,dir]];}
else if(!$.isArray(order[0])){order=Array.prototype.slice.call(arguments);}
return this.iterator('table',function(settings){settings.aaSorting=order.slice();});});_api_register('order.listener()',function(node,column,callback){return this.iterator('table',function(settings){_fnSortAttachListener(settings,node,column,callback);});});_api_register(['columns().order()','column().order()'],function(dir){var that=this;return this.iterator('table',function(settings,i){var sort=[];$.each(that[i],function(j,col){sort.push([col,dir]);});settings.aaSorting=sort;});});_api_register('search()',function(input,regex,smart,caseInsen){var ctx=this.context;if(input===undefined){return ctx.length!==0?ctx[0].oPreviousSearch.sSearch:undefined;}
return this.iterator('table',function(settings){if(!settings.oFeatures.bFilter){return;}
_fnFilterComplete(settings,$.extend({},settings.oPreviousSearch,{"sSearch":input+"","bRegex":regex===null?false:regex,"bSmart":smart===null?true:smart,"bCaseInsensitive":caseInsen===null?true:caseInsen}),1);});});_api_register(['columns().search()','column().search()'],function(input,regex,smart,caseInsen){return this.iterator('column',function(settings,column){var preSearch=settings.aoPreSearchCols;if(input===undefined){return preSearch[column].sSearch;}
if(!settings.oFeatures.bFilter){return;}
$.extend(preSearch[column],{"sSearch":input+"","bRegex":regex===null?false:regex,"bSmart":smart===null?true:smart,"bCaseInsensitive":caseInsen===null?true:caseInsen});_fnFilterComplete(settings,settings.oPreviousSearch,1);});});DataTable.versionCheck=DataTable.fnVersionCheck=function(version)
{var aThis=DataTable.version.split('.');var aThat=version.split('.');var iThis,iThat;for(var i=0,iLen=aThat.length;i<iLen;i++){iThis=parseInt(aThis[i],10)||0;iThat=parseInt(aThat[i],10)||0;if(iThis===iThat){continue;}
return iThis>iThat;}
return true;};DataTable.isDataTable=DataTable.fnIsDataTable=function(table)
{var t=$(table).get(0);var is=false;$.each(DataTable.settings,function(i,o){if(o.nTable===t||o.nScrollHead===t||o.nScrollFoot===t){is=true;}});return is;};DataTable.tables=DataTable.fnTables=function(visible)
{return jQuery.map(DataTable.settings,function(o){if(!visible||(visible&&$(o.nTable).is(':visible'))){return o.nTable;}});};DataTable.camelToHungarian=_fnCamelToHungarian;_api_register('$()',function(selector,opts){var
rows=this.rows(opts).nodes(),jqRows=$(rows);return $([].concat(jqRows.filter(selector).toArray(),jqRows.find(selector).toArray()));});$.each(['on','one','off'],function(i,key){_api_register(key+'()',function(){var args=Array.prototype.slice.call(arguments);if(args[0].indexOf('.dt')===-1){args[0]+='.dt';}
var inst=$(this.tables().nodes());inst[key].apply(inst,args);return this;});});_api_register('clear()',function(){return this.iterator('table',function(settings){_fnClearTable(settings);});});_api_register('settings()',function(){return new _Api(this.context,this.context);});_api_register('data()',function(){return this.iterator('table',function(settings){return _pluck(settings.aoData,'_aData');}).flatten();});_api_register('destroy()',function(remove){remove=remove||false;return this.iterator('table',function(settings){var orig=settings.nTableWrapper.parentNode;var classes=settings.oClasses;var table=settings.nTable;var tbody=settings.nTBody;var thead=settings.nTHead;var tfoot=settings.nTFoot;var jqTable=$(table);var jqTbody=$(tbody);var jqWrapper=$(settings.nTableWrapper);var rows=$.map(settings.aoData,function(r){return r.nTr;});var i,ien;settings.bDestroying=true;_fnCallbackFire(settings,"aoDestroyCallback","destroy",[settings]);if(!remove){new _Api(settings).columns().visible(true);}
jqWrapper.unbind('.DT').find(':not(tbody *)').unbind('.DT');$(window).unbind('.DT-'+settings.sInstance);if(table!=thead.parentNode){jqTable.children('thead').detach();jqTable.append(thead);}
if(tfoot&&table!=tfoot.parentNode){jqTable.children('tfoot').detach();jqTable.append(tfoot);}
jqTable.detach();jqWrapper.detach();settings.aaSorting=[];settings.aaSortingFixed=[];_fnSortingClasses(settings);$(rows).removeClass(settings.asStripeClasses.join(' '));$('th, td',thead).removeClass(classes.sSortable+' '+
classes.sSortableAsc+' '+classes.sSortableDesc+' '+classes.sSortableNone);if(settings.bJUI){$('th span.'+classes.sSortIcon+', td span.'+classes.sSortIcon,thead).detach();$('th, td',thead).each(function(){var wrapper=$('div.'+classes.sSortJUIWrapper,this);$(this).append(wrapper.contents());wrapper.detach();});}
if(!remove&&orig){orig.insertBefore(table,settings.nTableReinsertBefore);}
jqTbody.children().detach();jqTbody.append(rows);jqTable.css('width',settings.sDestroyWidth).removeClass(classes.sTable);ien=settings.asDestroyStripes.length;if(ien){jqTbody.children().each(function(i){$(this).addClass(settings.asDestroyStripes[i%ien]);});}
var idx=$.inArray(settings,DataTable.settings);if(idx!==-1){DataTable.settings.splice(idx,1);}});});DataTable.version="1.10.0";DataTable.settings=[];DataTable.models={};DataTable.models.oSearch={"bCaseInsensitive":true,"sSearch":"","bRegex":false,"bSmart":true};DataTable.models.oRow={"nTr":null,"anCells":null,"_aData":[],"_aSortData":null,"_aFilterData":null,"_sFilterRow":null,"_sRowStripe":"","src":null};DataTable.models.oColumn={"idx":null,"aDataSort":null,"asSorting":null,"bSearchable":null,"bSortable":null,"bVisible":null,"_sManualType":null,"_bAttrSrc":false,"fnCreatedCell":null,"fnGetData":null,"fnSetData":null,"mData":null,"mRender":null,"nTh":null,"nTf":null,"sClass":null,"sContentPadding":null,"sDefaultContent":null,"sName":null,"sSortDataType":'std',"sSortingClass":null,"sSortingClassJUI":null,"sTitle":null,"sType":null,"sWidth":null,"sWidthOrig":null};DataTable.defaults={"aaData":null,"aaSorting":[[0,'asc']],"aaSortingFixed":[],"ajax":null,"aLengthMenu":[10,25,50,100],"aoColumns":null,"aoColumnDefs":null,"aoSearchCols":[],"asStripeClasses":null,"bAutoWidth":true,"bDeferRender":false,"bDestroy":false,"bFilter":true,"bInfo":true,"bJQueryUI":false,"bLengthChange":true,"bPaginate":true,"bProcessing":false,"bRetrieve":false,"bScrollCollapse":false,"bServerSide":false,"bSort":true,"bSortMulti":true,"bSortCellsTop":false,"bSortClasses":true,"bStateSave":false,"fnCreatedRow":null,"fnDrawCallback":null,"fnFooterCallback":null,"fnFormatNumber":function(toFormat){return toFormat.toString().replace(/\B(?=(\d{3})+(?!\d))/g,this.oLanguage.sThousands);},"fnHeaderCallback":null,"fnInfoCallback":null,"fnInitComplete":null,"fnPreDrawCallback":null,"fnRowCallback":null,"fnServerData":null,"fnServerParams":null,"fnStateLoadCallback":function(settings){try{return JSON.parse((settings.iStateDuration===-1?sessionStorage:localStorage).getItem('DataTables_'+settings.sInstance+'_'+location.pathname));}catch(e){}},"fnStateLoadParams":null,"fnStateLoaded":null,"fnStateSaveCallback":function(settings,data){try{(settings.iStateDuration===-1?sessionStorage:localStorage).setItem('DataTables_'+settings.sInstance+'_'+location.pathname,JSON.stringify(data));}catch(e){}},"fnStateSaveParams":null,"iStateDuration":7200,"iDeferLoading":null,"iDisplayLength":10,"iDisplayStart":0,"iTabIndex":0,"oClasses":{},"oLanguage":{"oAria":{"sSortAscending":": activate to sort column ascending","sSortDescending":": activate to sort column descending"},"oPaginate":{"sFirst":"First","sLast":"Last","sNext":"Next","sPrevious":"Previous"},"sEmptyTable":"No data available in table","sInfo":"Showing _START_ to _END_ of _TOTAL_ entries","sInfoEmpty":"Showing 0 to 0 of 0 entries","sInfoFiltered":"(filtered from _MAX_ total entries)","sInfoPostFix":"","sDecimal":"","sThousands":",","sLengthMenu":"Show _MENU_ entries","sLoadingRecords":"Loading...","sProcessing":"Processing...","sSearch":"Search:","sUrl":"","sZeroRecords":"No matching records found"},"oSearch":$.extend({},DataTable.models.oSearch),"sAjaxDataProp":"data","sAjaxSource":null,"sDom":"lfrtip","sPaginationType":"simple_numbers","sScrollX":"","sScrollXInner":"","sScrollY":"","sServerMethod":"GET","renderer":null};_fnHungarianMap(DataTable.defaults);DataTable.defaults.column={"aDataSort":null,"iDataSort":-1,"asSorting":['asc','desc'],"bSearchable":true,"bSortable":true,"bVisible":true,"fnCreatedCell":null,"mData":null,"mRender":null,"sCellType":"td","sClass":"","sContentPadding":"","sDefaultContent":null,"sName":"","sSortDataType":"std","sTitle":null,"sType":null,"sWidth":null};_fnHungarianMap(DataTable.defaults.column);DataTable.models.oSettings={"oFeatures":{"bAutoWidth":null,"bDeferRender":null,"bFilter":null,"bInfo":null,"bLengthChange":null,"bPaginate":null,"bProcessing":null,"bServerSide":null,"bSort":null,"bSortMulti":null,"bSortClasses":null,"bStateSave":null},"oScroll":{"bCollapse":null,"iBarWidth":0,"sX":null,"sXInner":null,"sY":null},"oLanguage":{"fnInfoCallback":null},"oBrowser":{"bScrollOversize":false,"bScrollbarLeft":false},"ajax":null,"aanFeatures":[],"aoData":[],"aiDisplay":[],"aiDisplayMaster":[],"aoColumns":[],"aoHeader":[],"aoFooter":[],"oPreviousSearch":{},"aoPreSearchCols":[],"aaSorting":null,"aaSortingFixed":[],"asStripeClasses":null,"asDestroyStripes":[],"sDestroyWidth":0,"aoRowCallback":[],"aoHeaderCallback":[],"aoFooterCallback":[],"aoDrawCallback":[],"aoRowCreatedCallback":[],"aoPreDrawCallback":[],"aoInitComplete":[],"aoStateSaveParams":[],"aoStateLoadParams":[],"aoStateLoaded":[],"sTableId":"","nTable":null,"nTHead":null,"nTFoot":null,"nTBody":null,"nTableWrapper":null,"bDeferLoading":false,"bInitialised":false,"aoOpenRows":[],"sDom":null,"sPaginationType":"two_button","iStateDuration":0,"aoStateSave":[],"aoStateLoad":[],"oLoadedState":null,"sAjaxSource":null,"sAjaxDataProp":null,"bAjaxDataGet":true,"jqXHR":null,"json":undefined,"oAjaxData":undefined,"fnServerData":null,"aoServerParams":[],"sServerMethod":null,"fnFormatNumber":null,"aLengthMenu":null,"iDraw":0,"bDrawing":false,"iDrawError":-1,"_iDisplayLength":10,"_iDisplayStart":0,"_iRecordsTotal":0,"_iRecordsDisplay":0,"bJUI":null,"oClasses":{},"bFiltered":false,"bSorted":false,"bSortCellsTop":null,"oInit":null,"aoDestroyCallback":[],"fnRecordsTotal":function()
{return _fnDataSource(this)=='ssp'?this._iRecordsTotal*1:this.aiDisplayMaster.length;},"fnRecordsDisplay":function()
{return _fnDataSource(this)=='ssp'?this._iRecordsDisplay*1:this.aiDisplay.length;},"fnDisplayEnd":function()
{var
len=this._iDisplayLength,start=this._iDisplayStart,calc=start+len,records=this.aiDisplay.length,features=this.oFeatures,paginate=features.bPaginate;if(features.bServerSide){return paginate===false||len===-1?start+records:Math.min(start+len,this._iRecordsDisplay);}
else{return!paginate||calc>records||len===-1?records:calc;}},"oInstance":null,"sInstance":null,"iTabIndex":0,"nScrollHead":null,"nScrollFoot":null,"aLastSort":[],"oPlugins":{}};DataTable.ext=_ext={classes:{},errMode:"alert",feature:[],search:[],internal:{},legacy:{ajax:null},pager:{},renderer:{pageButton:{},header:{}},order:{},type:{detect:[],search:{},order:{}},_unique:0,fnVersionCheck:DataTable.fnVersionCheck,iApiIndex:0,oJUIClasses:{},sVersion:DataTable.version};$.extend(_ext,{afnFiltering:_ext.search,aTypes:_ext.type.detect,ofnSearch:_ext.type.search,oSort:_ext.type.order,afnSortData:_ext.order,aoFeatures:_ext.feature,oApi:_ext.internal,oStdClasses:_ext.classes,oPagination:_ext.pager});$.extend(DataTable.ext.classes,{"sTable":"dataTable","sNoFooter":"no-footer","sPageButton":"paginate_button","sPageButtonActive":"current","sPageButtonDisabled":"disabled","sStripeOdd":"odd","sStripeEven":"even","sRowEmpty":"dataTables_empty","sWrapper":"dataTables_wrapper","sFilter":"dataTables_filter","sInfo":"dataTables_info","sPaging":"dataTables_paginate paging_","sLength":"dataTables_length","sProcessing":"dataTables_processing","sSortAsc":"sorting_asc","sSortDesc":"sorting_desc","sSortable":"sorting","sSortableAsc":"sorting_asc_disabled","sSortableDesc":"sorting_desc_disabled","sSortableNone":"sorting_disabled","sSortColumn":"sorting_","sFilterInput":"","sLengthSelect":"","sScrollWrapper":"dataTables_scroll","sScrollHead":"dataTables_scrollHead","sScrollHeadInner":"dataTables_scrollHeadInner","sScrollBody":"dataTables_scrollBody","sScrollFoot":"dataTables_scrollFoot","sScrollFootInner":"dataTables_scrollFootInner","sHeaderTH":"","sFooterTH":"","sSortJUIAsc":"","sSortJUIDesc":"","sSortJUI":"","sSortJUIAscAllowed":"","sSortJUIDescAllowed":"","sSortJUIWrapper":"","sSortIcon":"","sJUIHeader":"","sJUIFooter":""});(function(){var _empty='';_empty='';var _stateDefault=_empty+'ui-state-default';var _sortIcon=_empty+'css_right ui-icon ui-icon-';var _headerFooter=_empty+'fg-toolbar ui-toolbar ui-widget-header ui-helper-clearfix';$.extend(DataTable.ext.oJUIClasses,DataTable.ext.classes,{"sPageButton":"fg-button ui-button "+_stateDefault,"sPageButtonActive":"ui-state-disabled","sPageButtonDisabled":"ui-state-disabled","sPaging":"dataTables_paginate fg-buttonset ui-buttonset fg-buttonset-multi "+"ui-buttonset-multi paging_","sSortAsc":_stateDefault+" sorting_asc","sSortDesc":_stateDefault+" sorting_desc","sSortable":_stateDefault+" sorting","sSortableAsc":_stateDefault+" sorting_asc_disabled","sSortableDesc":_stateDefault+" sorting_desc_disabled","sSortableNone":_stateDefault+" sorting_disabled","sSortJUIAsc":_sortIcon+"triangle-1-n","sSortJUIDesc":_sortIcon+"triangle-1-s","sSortJUI":_sortIcon+"carat-2-n-s","sSortJUIAscAllowed":_sortIcon+"carat-1-n","sSortJUIDescAllowed":_sortIcon+"carat-1-s","sSortJUIWrapper":"DataTables_sort_wrapper","sSortIcon":"DataTables_sort_icon","sScrollHead":"dataTables_scrollHead "+_stateDefault,"sScrollFoot":"dataTables_scrollFoot "+_stateDefault,"sHeaderTH":_stateDefault,"sFooterTH":_stateDefault,"sJUIHeader":_headerFooter+" ui-corner-tl ui-corner-tr","sJUIFooter":_headerFooter+" ui-corner-bl ui-corner-br"});}());var extPagination=DataTable.ext.pager;function _numbers(page,pages){var
numbers=[],buttons=extPagination.numbers_length,half=Math.floor(buttons/2),i=1;if(pages<=buttons){numbers=_range(0,pages);}
else if(page<=half){numbers=_range(0,buttons-2);numbers.push('ellipsis');numbers.push(pages-1);}
else if(page>=pages-1-half){numbers=_range(pages-(buttons-2),pages);numbers.splice(0,0,'ellipsis');numbers.splice(0,0,0);}
else{numbers=_range(page-1,page+2);numbers.push('ellipsis');numbers.push(pages-1);numbers.splice(0,0,'ellipsis');numbers.splice(0,0,0);}
numbers.DT_el='span';return numbers;}
$.extend(extPagination,{simple:function(page,pages){return['previous','next'];},full:function(page,pages){return['first','previous','next','last'];},simple_numbers:function(page,pages){return['previous',_numbers(page,pages),'next'];},full_numbers:function(page,pages){return['first','previous',_numbers(page,pages),'next','last'];},_numbers:_numbers,numbers_length:7});$.extend(true,DataTable.ext.renderer,{pageButton:{_:function(settings,host,idx,buttons,page,pages){var classes=settings.oClasses;var lang=settings.oLanguage.oPaginate;var btnDisplay,btnClass,counter=0;var attach=function(container,buttons){var i,ien,node,button;var clickHandler=function(e){_fnPageChange(settings,e.data.action,true);};for(i=0,ien=buttons.length;i<ien;i++){button=buttons[i];if($.isArray(button)){var inner=$('<'+(button.DT_el||'div')+'/>').appendTo(container);attach(inner,button);}
else{btnDisplay='';btnClass='';switch(button){case'ellipsis':container.append('<span>&hellip;</span>');break;case'first':btnDisplay=lang.sFirst;btnClass=button+(page>0?'':' '+classes.sPageButtonDisabled);break;case'previous':btnDisplay=lang.sPrevious;btnClass=button+(page>0?'':' '+classes.sPageButtonDisabled);break;case'next':btnDisplay=lang.sNext;btnClass=button+(page<pages-1?'':' '+classes.sPageButtonDisabled);break;case'last':btnDisplay=lang.sLast;btnClass=button+(page<pages-1?'':' '+classes.sPageButtonDisabled);break;default:btnDisplay=button+1;btnClass=page===button?classes.sPageButtonActive:'';break;}
if(btnDisplay){node=$('<a>',{'class':classes.sPageButton+' '+btnClass,'aria-controls':settings.sTableId,'data-dt-idx':counter,'tabindex':settings.iTabIndex,'id':idx===0&&typeof button==='string'?settings.sTableId+'_'+button:null}).html(btnDisplay).appendTo(container);_fnBindAction(node,{action:button},clickHandler);counter++;}}}};var activeEl=$(document.activeElement).data('dt-idx');attach($(host).empty(),buttons);if(activeEl!==null){$(host).find('[data-dt-idx='+activeEl+']').focus();}}}});var __numericReplace=function(d,decimalPlace,re1,re2){if(!d||d==='-'){return-Infinity;}
if(decimalPlace){d=_numToDecimal(d,decimalPlace);}
if(d.replace){if(re1){d=d.replace(re1,'');}
if(re2){d=d.replace(re2,'');}}
return d*1;};function _addNumericSort(decimalPlace){$.each({"num":function(d){return __numericReplace(d,decimalPlace);},"num-fmt":function(d){return __numericReplace(d,decimalPlace,_re_formatted_numeric);},"html-num":function(d){return __numericReplace(d,decimalPlace,_re_html);},"html-num-fmt":function(d){return __numericReplace(d,decimalPlace,_re_html,_re_formatted_numeric);}},function(key,fn){_ext.type.order[key+decimalPlace+'-pre']=fn;});}
$.extend(_ext.type.order,{"date-pre":function(d){return Date.parse(d)||0;},"html-pre":function(a){return!a?'':a.replace?a.replace(/<.*?>/g,"").toLowerCase():a+'';},"string-pre":function(a){return typeof a==='string'?a.toLowerCase():!a||!a.toString?'':a.toString();},"string-asc":function(x,y){return((x<y)?-1:((x>y)?1:0));},"string-desc":function(x,y){return((x<y)?1:((x>y)?-1:0));}});_addNumericSort('');$.extend(DataTable.ext.type.detect,[function(d,settings)
{var decimal=settings.oLanguage.sDecimal;return _isNumber(d,decimal)?'num'+decimal:null;},function(d,settings)
{if(d&&!_re_date_start.test(d)){return null;}
var parsed=Date.parse(d);return(parsed!==null&&!isNaN(parsed))||_empty(d)?'date':null;},function(d,settings)
{var decimal=settings.oLanguage.sDecimal;return _isNumber(d,decimal,true)?'num-fmt'+decimal:null;},function(d,settings)
{var decimal=settings.oLanguage.sDecimal;return _htmlNumeric(d,decimal)?'html-num'+decimal:null;},function(d,settings)
{var decimal=settings.oLanguage.sDecimal;return _htmlNumeric(d,decimal,true)?'html-num-fmt'+decimal:null;},function(d,settings)
{return _empty(d)||(typeof d==='string'&&d.indexOf('<')!==-1)?'html':null;}]);$.extend(DataTable.ext.type.search,{html:function(data){return _empty(data)?'':typeof data==='string'?data.replace(_re_new_lines," ").replace(_re_html,""):'';},string:function(data){return _empty(data)?'':typeof data==='string'?data.replace(_re_new_lines," "):data;}});$.extend(true,DataTable.ext.renderer,{header:{_:function(settings,cell,column,classes){$(settings.nTable).on('order.dt.DT',function(e,settings,sorting,columns){var colIdx=column.idx;cell.removeClass(column.sSortingClass+' '+
classes.sSortAsc+' '+
classes.sSortDesc).addClass(columns[colIdx]=='asc'?classes.sSortAsc:columns[colIdx]=='desc'?classes.sSortDesc:column.sSortingClass);});},jqueryui:function(settings,cell,column,classes){var colIdx=column.idx;$('<div/>').addClass(classes.sSortJUIWrapper).append(cell.contents()).append($('<span/>').addClass(classes.sSortIcon+' '+column.sSortingClassJUI)).appendTo(cell);$(settings.nTable).on('order.dt.DT',function(e,settings,sorting,columns){cell.removeClass(classes.sSortAsc+" "+classes.sSortDesc).addClass(columns[colIdx]=='asc'?classes.sSortAsc:columns[colIdx]=='desc'?classes.sSortDesc:column.sSortingClass);cell.find('span.'+classes.sSortIcon).removeClass(classes.sSortJUIAsc+" "+
classes.sSortJUIDesc+" "+
classes.sSortJUI+" "+
classes.sSortJUIAscAllowed+" "+
classes.sSortJUIDescAllowed).addClass(columns[colIdx]=='asc'?classes.sSortJUIAsc:columns[colIdx]=='desc'?classes.sSortJUIDesc:column.sSortingClassJUI);});}}});DataTable.render={number:function(thousands,decimal,precision,prefix){return{display:function(d){d=parseFloat(d);var intPart=parseInt(d,10);var floatPart=precision?(decimal+(d-intPart).toFixed(precision)).substring(2):'';return(prefix||'')+
intPart.toString().replace(/\B(?=(\d{3})+(?!\d))/g,thousands)+
floatPart;}};}};function _fnExternApiFunc(fn)
{return function(){var args=[_fnSettingsFromNode(this[DataTable.ext.iApiIndex])].concat(Array.prototype.slice.call(arguments));return DataTable.ext.internal[fn].apply(this,args);};}
$.extend(DataTable.ext.internal,{_fnExternApiFunc:_fnExternApiFunc,_fnBuildAjax:_fnBuildAjax,_fnAjaxUpdate:_fnAjaxUpdate,_fnAjaxParameters:_fnAjaxParameters,_fnAjaxUpdateDraw:_fnAjaxUpdateDraw,_fnAjaxDataSrc:_fnAjaxDataSrc,_fnAddColumn:_fnAddColumn,_fnColumnOptions:_fnColumnOptions,_fnAdjustColumnSizing:_fnAdjustColumnSizing,_fnVisibleToColumnIndex:_fnVisibleToColumnIndex,_fnColumnIndexToVisible:_fnColumnIndexToVisible,_fnVisbleColumns:_fnVisbleColumns,_fnGetColumns:_fnGetColumns,_fnColumnTypes:_fnColumnTypes,_fnApplyColumnDefs:_fnApplyColumnDefs,_fnHungarianMap:_fnHungarianMap,_fnCamelToHungarian:_fnCamelToHungarian,_fnLanguageCompat:_fnLanguageCompat,_fnBrowserDetect:_fnBrowserDetect,_fnAddData:_fnAddData,_fnAddTr:_fnAddTr,_fnNodeToDataIndex:_fnNodeToDataIndex,_fnNodeToColumnIndex:_fnNodeToColumnIndex,_fnGetCellData:_fnGetCellData,_fnSetCellData:_fnSetCellData,_fnSplitObjNotation:_fnSplitObjNotation,_fnGetObjectDataFn:_fnGetObjectDataFn,_fnSetObjectDataFn:_fnSetObjectDataFn,_fnGetDataMaster:_fnGetDataMaster,_fnClearTable:_fnClearTable,_fnDeleteIndex:_fnDeleteIndex,_fnInvalidateRow:_fnInvalidateRow,_fnGetRowElements:_fnGetRowElements,_fnCreateTr:_fnCreateTr,_fnBuildHead:_fnBuildHead,_fnDrawHead:_fnDrawHead,_fnDraw:_fnDraw,_fnReDraw:_fnReDraw,_fnAddOptionsHtml:_fnAddOptionsHtml,_fnDetectHeader:_fnDetectHeader,_fnGetUniqueThs:_fnGetUniqueThs,_fnFeatureHtmlFilter:_fnFeatureHtmlFilter,_fnFilterComplete:_fnFilterComplete,_fnFilterCustom:_fnFilterCustom,_fnFilterColumn:_fnFilterColumn,_fnFilter:_fnFilter,_fnFilterCreateSearch:_fnFilterCreateSearch,_fnEscapeRegex:_fnEscapeRegex,_fnFilterData:_fnFilterData,_fnFeatureHtmlInfo:_fnFeatureHtmlInfo,_fnUpdateInfo:_fnUpdateInfo,_fnInfoMacros:_fnInfoMacros,_fnInitialise:_fnInitialise,_fnInitComplete:_fnInitComplete,_fnLengthChange:_fnLengthChange,_fnFeatureHtmlLength:_fnFeatureHtmlLength,_fnFeatureHtmlPaginate:_fnFeatureHtmlPaginate,_fnPageChange:_fnPageChange,_fnFeatureHtmlProcessing:_fnFeatureHtmlProcessing,_fnProcessingDisplay:_fnProcessingDisplay,_fnFeatureHtmlTable:_fnFeatureHtmlTable,_fnScrollDraw:_fnScrollDraw,_fnApplyToChildren:_fnApplyToChildren,_fnCalculateColumnWidths:_fnCalculateColumnWidths,_fnThrottle:_fnThrottle,_fnConvertToWidth:_fnConvertToWidth,_fnScrollingWidthAdjust:_fnScrollingWidthAdjust,_fnGetWidestNode:_fnGetWidestNode,_fnGetMaxLenString:_fnGetMaxLenString,_fnStringToCss:_fnStringToCss,_fnScrollBarWidth:_fnScrollBarWidth,_fnSortFlatten:_fnSortFlatten,_fnSort:_fnSort,_fnSortAria:_fnSortAria,_fnSortListener:_fnSortListener,_fnSortAttachListener:_fnSortAttachListener,_fnSortingClasses:_fnSortingClasses,_fnSortData:_fnSortData,_fnSaveState:_fnSaveState,_fnLoadState:_fnLoadState,_fnSettingsFromNode:_fnSettingsFromNode,_fnLog:_fnLog,_fnMap:_fnMap,_fnBindAction:_fnBindAction,_fnCallbackReg:_fnCallbackReg,_fnCallbackFire:_fnCallbackFire,_fnLengthOverflow:_fnLengthOverflow,_fnRenderer:_fnRenderer,_fnDataSource:_fnDataSource,_fnRowAttributes:_fnRowAttributes,_fnCalculateEnd:function(){}});$.fn.dataTable=DataTable;$.fn.dataTableSettings=DataTable.settings;$.fn.dataTableExt=DataTable.ext;$.fn.DataTable=function(opts){return $(this).dataTable(opts).api();};$.each(DataTable,function(prop,val){$.fn.DataTable[prop]=val;});return $.fn.dataTable;}));}(window,document));/*
 *	jQuery carouFredSel 6.2.1
 *	Demo's and documentation:
 *	caroufredsel.dev7studios.com
 *
 *	Copyright (c) 2013 Fred Heusschen
 *	www.frebsite.nl
 *
 *	Dual licensed under the MIT and GPL licenses.
 *	http://en.wikipedia.org/wiki/MIT_License
 *	http://en.wikipedia.org/wiki/GNU_General_Public_License
 */


(function($){function sc_setScroll(a,b,c){return"transition"==c.transition&&"swing"==b&&(b="ease"),{anims:[],duration:a,orgDuration:a,easing:b,startTime:getTime()}}function sc_startScroll(a,b){for(var c=0,d=a.anims.length;d>c;c++){var e=a.anims[c];e&&e[0][b.transition](e[1],a.duration,a.easing,e[2])}}function sc_stopScroll(a,b){is_boolean(b)||(b=!0),is_object(a.pre)&&sc_stopScroll(a.pre,b);for(var c=0,d=a.anims.length;d>c;c++){var e=a.anims[c];e[0].stop(!0),b&&(e[0].css(e[1]),is_function(e[2])&&e[2]())}is_object(a.post)&&sc_stopScroll(a.post,b)}function sc_afterScroll(a,b,c){switch(b&&b.remove(),c.fx){case"fade":case"crossfade":case"cover-fade":case"uncover-fade":a.css("opacity",1),a.css("filter","")}}function sc_fireCallbacks(a,b,c,d,e){if(b[c]&&b[c].call(a,d),e[c].length)for(var f=0,g=e[c].length;g>f;f++)e[c][f].call(a,d);return[]}function sc_fireQueue(a,b,c){return b.length&&(a.trigger(cf_e(b[0][0],c),b[0][1]),b.shift()),b}function sc_hideHiddenItems(a){a.each(function(){var a=$(this);a.data("_cfs_isHidden",a.is(":hidden")).hide()})}function sc_showHiddenItems(a){a&&a.each(function(){var a=$(this);a.data("_cfs_isHidden")||a.show()})}function sc_clearTimers(a){return a.auto&&clearTimeout(a.auto),a.progress&&clearInterval(a.progress),a}function sc_mapCallbackArguments(a,b,c,d,e,f,g){return{width:g.width,height:g.height,items:{old:a,skipped:b,visible:c},scroll:{items:d,direction:e,duration:f}}}function sc_getDuration(a,b,c,d){var e=a.duration;return"none"==a.fx?0:("auto"==e?e=b.scroll.duration/b.scroll.items*c:10>e&&(e=d/e),1>e?0:("fade"==a.fx&&(e/=2),Math.round(e)))}function nv_showNavi(a,b,c){var d=is_number(a.items.minimum)?a.items.minimum:a.items.visible+1;if("show"==b||"hide"==b)var e=b;else if(d>b){debug(c,"Not enough items ("+b+" total, "+d+" needed): Hiding navigation.");var e="hide"}else var e="show";var f="show"==e?"removeClass":"addClass",g=cf_c("hidden",c);a.auto.button&&a.auto.button[e]()[f](g),a.prev.button&&a.prev.button[e]()[f](g),a.next.button&&a.next.button[e]()[f](g),a.pagination.container&&a.pagination.container[e]()[f](g)}function nv_enableNavi(a,b,c){if(!a.circular&&!a.infinite){var d="removeClass"==b||"addClass"==b?b:!1,e=cf_c("disabled",c);if(a.auto.button&&d&&a.auto.button[d](e),a.prev.button){var f=d||0==b?"addClass":"removeClass";a.prev.button[f](e)}if(a.next.button){var f=d||b==a.items.visible?"addClass":"removeClass";a.next.button[f](e)}}}function go_getObject(a,b){return is_function(b)?b=b.call(a):is_undefined(b)&&(b={}),b}function go_getItemsObject(a,b){return b=go_getObject(a,b),is_number(b)?b={visible:b}:"variable"==b?b={visible:b,width:b,height:b}:is_object(b)||(b={}),b}function go_getScrollObject(a,b){return b=go_getObject(a,b),is_number(b)?b=50>=b?{items:b}:{duration:b}:is_string(b)?b={easing:b}:is_object(b)||(b={}),b}function go_getNaviObject(a,b){if(b=go_getObject(a,b),is_string(b)){var c=cf_getKeyCode(b);b=-1==c?$(b):c}return b}function go_getAutoObject(a,b){return b=go_getNaviObject(a,b),is_jquery(b)?b={button:b}:is_boolean(b)?b={play:b}:is_number(b)&&(b={timeoutDuration:b}),b.progress&&(is_string(b.progress)||is_jquery(b.progress))&&(b.progress={bar:b.progress}),b}function go_complementAutoObject(a,b){return is_function(b.button)&&(b.button=b.button.call(a)),is_string(b.button)&&(b.button=$(b.button)),is_boolean(b.play)||(b.play=!0),is_number(b.delay)||(b.delay=0),is_undefined(b.pauseOnEvent)&&(b.pauseOnEvent=!0),is_boolean(b.pauseOnResize)||(b.pauseOnResize=!0),is_number(b.timeoutDuration)||(b.timeoutDuration=10>b.duration?2500:5*b.duration),b.progress&&(is_function(b.progress.bar)&&(b.progress.bar=b.progress.bar.call(a)),is_string(b.progress.bar)&&(b.progress.bar=$(b.progress.bar)),b.progress.bar?(is_function(b.progress.updater)||(b.progress.updater=$.fn.carouFredSel.progressbarUpdater),is_number(b.progress.interval)||(b.progress.interval=50)):b.progress=!1),b}function go_getPrevNextObject(a,b){return b=go_getNaviObject(a,b),is_jquery(b)?b={button:b}:is_number(b)&&(b={key:b}),b}function go_complementPrevNextObject(a,b){return is_function(b.button)&&(b.button=b.button.call(a)),is_string(b.button)&&(b.button=$(b.button)),is_string(b.key)&&(b.key=cf_getKeyCode(b.key)),b}function go_getPaginationObject(a,b){return b=go_getNaviObject(a,b),is_jquery(b)?b={container:b}:is_boolean(b)&&(b={keys:b}),b}function go_complementPaginationObject(a,b){return is_function(b.container)&&(b.container=b.container.call(a)),is_string(b.container)&&(b.container=$(b.container)),is_number(b.items)||(b.items=!1),is_boolean(b.keys)||(b.keys=!1),is_function(b.anchorBuilder)||is_false(b.anchorBuilder)||(b.anchorBuilder=$.fn.carouFredSel.pageAnchorBuilder),is_number(b.deviation)||(b.deviation=0),b}function go_getSwipeObject(a,b){return is_function(b)&&(b=b.call(a)),is_undefined(b)&&(b={onTouch:!1}),is_true(b)?b={onTouch:b}:is_number(b)&&(b={items:b}),b}function go_complementSwipeObject(a,b){return is_boolean(b.onTouch)||(b.onTouch=!0),is_boolean(b.onMouse)||(b.onMouse=!1),is_object(b.options)||(b.options={}),is_boolean(b.options.triggerOnTouchEnd)||(b.options.triggerOnTouchEnd=!1),b}function go_getMousewheelObject(a,b){return is_function(b)&&(b=b.call(a)),is_true(b)?b={}:is_number(b)?b={items:b}:is_undefined(b)&&(b=!1),b}function go_complementMousewheelObject(a,b){return b}function gn_getItemIndex(a,b,c,d,e){if(is_string(a)&&(a=$(a,e)),is_object(a)&&(a=$(a,e)),is_jquery(a)?(a=e.children().index(a),is_boolean(c)||(c=!1)):is_boolean(c)||(c=!0),is_number(a)||(a=0),is_number(b)||(b=0),c&&(a+=d.first),a+=b,d.total>0){for(;a>=d.total;)a-=d.total;for(;0>a;)a+=d.total}return a}function gn_getVisibleItemsPrev(a,b,c){for(var d=0,e=0,f=c;f>=0;f--){var g=a.eq(f);if(d+=g.is(":visible")?g[b.d.outerWidth](!0):0,d>b.maxDimension)return e;0==f&&(f=a.length),e++}}function gn_getVisibleItemsPrevFilter(a,b,c){return gn_getItemsPrevFilter(a,b.items.filter,b.items.visibleConf.org,c)}function gn_getScrollItemsPrevFilter(a,b,c,d){return gn_getItemsPrevFilter(a,b.items.filter,d,c)}function gn_getItemsPrevFilter(a,b,c,d){for(var e=0,f=0,g=d,h=a.length;g>=0;g--){if(f++,f==h)return f;var i=a.eq(g);if(i.is(b)&&(e++,e==c))return f;0==g&&(g=h)}}function gn_getVisibleOrg(a,b){return b.items.visibleConf.org||a.children().slice(0,b.items.visible).filter(b.items.filter).length}function gn_getVisibleItemsNext(a,b,c){for(var d=0,e=0,f=c,g=a.length-1;g>=f;f++){var h=a.eq(f);if(d+=h.is(":visible")?h[b.d.outerWidth](!0):0,d>b.maxDimension)return e;if(e++,e==g+1)return e;f==g&&(f=-1)}}function gn_getVisibleItemsNextTestCircular(a,b,c,d){var e=gn_getVisibleItemsNext(a,b,c);return b.circular||c+e>d&&(e=d-c),e}function gn_getVisibleItemsNextFilter(a,b,c){return gn_getItemsNextFilter(a,b.items.filter,b.items.visibleConf.org,c,b.circular)}function gn_getScrollItemsNextFilter(a,b,c,d){return gn_getItemsNextFilter(a,b.items.filter,d+1,c,b.circular)-1}function gn_getItemsNextFilter(a,b,c,d){for(var f=0,g=0,h=d,i=a.length-1;i>=h;h++){if(g++,g>=i)return g;var j=a.eq(h);if(j.is(b)&&(f++,f==c))return g;h==i&&(h=-1)}}function gi_getCurrentItems(a,b){return a.slice(0,b.items.visible)}function gi_getOldItemsPrev(a,b,c){return a.slice(c,b.items.visibleConf.old+c)}function gi_getNewItemsPrev(a,b){return a.slice(0,b.items.visible)}function gi_getOldItemsNext(a,b){return a.slice(0,b.items.visibleConf.old)}function gi_getNewItemsNext(a,b,c){return a.slice(c,b.items.visible+c)}function sz_storeMargin(a,b,c){b.usePadding&&(is_string(c)||(c="_cfs_origCssMargin"),a.each(function(){var a=$(this),d=parseInt(a.css(b.d.marginRight),10);is_number(d)||(d=0),a.data(c,d)}))}function sz_resetMargin(a,b,c){if(b.usePadding){var d=is_boolean(c)?c:!1;is_number(c)||(c=0),sz_storeMargin(a,b,"_cfs_tempCssMargin"),a.each(function(){var a=$(this);a.css(b.d.marginRight,d?a.data("_cfs_tempCssMargin"):c+a.data("_cfs_origCssMargin"))})}}function sz_storeOrigCss(a){a.each(function(){var a=$(this);a.data("_cfs_origCss",a.attr("style")||"")})}function sz_restoreOrigCss(a){a.each(function(){var a=$(this);a.attr("style",a.data("_cfs_origCss")||"")})}function sz_setResponsiveSizes(a,b){var d=(a.items.visible,a.items[a.d.width]),e=a[a.d.height],f=is_percentage(e);b.each(function(){var b=$(this),c=d-ms_getPaddingBorderMargin(b,a,"Width");b[a.d.width](c),f&&b[a.d.height](ms_getPercentage(c,e))})}function sz_setSizes(a,b){var c=a.parent(),d=a.children(),e=gi_getCurrentItems(d,b),f=cf_mapWrapperSizes(ms_getSizes(e,b,!0),b,!1);if(c.css(f),b.usePadding){var g=b.padding,h=g[b.d[1]];b.align&&0>h&&(h=0);var i=e.last();i.css(b.d.marginRight,i.data("_cfs_origCssMargin")+h),a.css(b.d.top,g[b.d[0]]),a.css(b.d.left,g[b.d[3]])}return a.css(b.d.width,f[b.d.width]+2*ms_getTotalSize(d,b,"width")),a.css(b.d.height,ms_getLargestSize(d,b,"height")),f}function ms_getSizes(a,b,c){return[ms_getTotalSize(a,b,"width",c),ms_getLargestSize(a,b,"height",c)]}function ms_getLargestSize(a,b,c,d){return is_boolean(d)||(d=!1),is_number(b[b.d[c]])&&d?b[b.d[c]]:is_number(b.items[b.d[c]])?b.items[b.d[c]]:(c=c.toLowerCase().indexOf("width")>-1?"outerWidth":"outerHeight",ms_getTrueLargestSize(a,b,c))}function ms_getTrueLargestSize(a,b,c){for(var d=0,e=0,f=a.length;f>e;e++){var g=a.eq(e),h=g.is(":visible")?g[b.d[c]](!0):0;h>d&&(d=h)}return d}function ms_getTotalSize(a,b,c,d){if(is_boolean(d)||(d=!1),is_number(b[b.d[c]])&&d)return b[b.d[c]];if(is_number(b.items[b.d[c]]))return b.items[b.d[c]]*a.length;for(var e=c.toLowerCase().indexOf("width")>-1?"outerWidth":"outerHeight",f=0,g=0,h=a.length;h>g;g++){var i=a.eq(g);f+=i.is(":visible")?i[b.d[e]](!0):0}return f}function ms_getParentSize(a,b,c){var d=a.is(":visible");d&&a.hide();var e=a.parent()[b.d[c]]();return d&&a.show(),e}function ms_getMaxDimension(a,b){return is_number(a[a.d.width])?a[a.d.width]:b}function ms_hasVariableSizes(a,b,c){for(var d=!1,e=!1,f=0,g=a.length;g>f;f++){var h=a.eq(f),i=h.is(":visible")?h[b.d[c]](!0):0;d===!1?d=i:d!=i&&(e=!0),0==d&&(e=!0)}return e}function ms_getPaddingBorderMargin(a,b,c){return a[b.d["outer"+c]](!0)-a[b.d[c.toLowerCase()]]()}function ms_getPercentage(a,b){if(is_percentage(b)){if(b=parseInt(b.slice(0,-1),10),!is_number(b))return a;a*=b/100}return a}function cf_e(a,b,c,d,e){return is_boolean(c)||(c=!0),is_boolean(d)||(d=!0),is_boolean(e)||(e=!1),c&&(a=b.events.prefix+a),d&&(a=a+"."+b.events.namespace),d&&e&&(a+=b.serialNumber),a}function cf_c(a,b){return is_string(b.classnames[a])?b.classnames[a]:a}function cf_mapWrapperSizes(a,b,c){is_boolean(c)||(c=!0);var d=b.usePadding&&c?b.padding:[0,0,0,0],e={};return e[b.d.width]=a[0]+d[1]+d[3],e[b.d.height]=a[1]+d[0]+d[2],e}function cf_sortParams(a,b){for(var c=[],d=0,e=a.length;e>d;d++)for(var f=0,g=b.length;g>f;f++)if(b[f].indexOf(typeof a[d])>-1&&is_undefined(c[f])){c[f]=a[d];break}return c}function cf_getPadding(a){if(is_undefined(a))return[0,0,0,0];if(is_number(a))return[a,a,a,a];if(is_string(a)&&(a=a.split("px").join("").split("em").join("").split(" ")),!is_array(a))return[0,0,0,0];for(var b=0;4>b;b++)a[b]=parseInt(a[b],10);switch(a.length){case 0:return[0,0,0,0];case 1:return[a[0],a[0],a[0],a[0]];case 2:return[a[0],a[1],a[0],a[1]];case 3:return[a[0],a[1],a[2],a[1]];default:return[a[0],a[1],a[2],a[3]]}}function cf_getAlignPadding(a,b){var c=is_number(b[b.d.width])?Math.ceil(b[b.d.width]-ms_getTotalSize(a,b,"width")):0;switch(b.align){case"left":return[0,c];case"right":return[c,0];case"center":default:return[Math.ceil(c/2),Math.floor(c/2)]}}function cf_getDimensions(a){for(var b=[["width","innerWidth","outerWidth","height","innerHeight","outerHeight","left","top","marginRight",0,1,2,3],["height","innerHeight","outerHeight","width","innerWidth","outerWidth","top","left","marginBottom",3,2,1,0]],c=b[0].length,d="right"==a.direction||"left"==a.direction?0:1,e={},f=0;c>f;f++)e[b[0][f]]=b[d][f];return e}function cf_getAdjust(a,b,c,d){var e=a;if(is_function(c))e=c.call(d,e);else if(is_string(c)){var f=c.split("+"),g=c.split("-");if(g.length>f.length)var h=!0,i=g[0],j=g[1];else var h=!1,i=f[0],j=f[1];switch(i){case"even":e=1==a%2?a-1:a;break;case"odd":e=0==a%2?a-1:a;break;default:e=a}j=parseInt(j,10),is_number(j)&&(h&&(j=-j),e+=j)}return(!is_number(e)||1>e)&&(e=1),e}function cf_getItemsAdjust(a,b,c,d){return cf_getItemAdjustMinMax(cf_getAdjust(a,b,c,d),b.items.visibleConf)}function cf_getItemAdjustMinMax(a,b){return is_number(b.min)&&b.min>a&&(a=b.min),is_number(b.max)&&a>b.max&&(a=b.max),1>a&&(a=1),a}function cf_getSynchArr(a){is_array(a)||(a=[[a]]),is_array(a[0])||(a=[a]);for(var b=0,c=a.length;c>b;b++)is_string(a[b][0])&&(a[b][0]=$(a[b][0])),is_boolean(a[b][1])||(a[b][1]=!0),is_boolean(a[b][2])||(a[b][2]=!0),is_number(a[b][3])||(a[b][3]=0);return a}function cf_getKeyCode(a){return"right"==a?39:"left"==a?37:"up"==a?38:"down"==a?40:-1}function cf_setCookie(a,b,c){if(a){var d=b.triggerHandler(cf_e("currentPosition",c));$.fn.carouFredSel.cookie.set(a,d)}}function cf_getCookie(a){var b=$.fn.carouFredSel.cookie.get(a);return""==b?0:b}function in_mapCss(a,b){for(var c={},d=0,e=b.length;e>d;d++)c[b[d]]=a.css(b[d]);return c}function in_complementItems(a,b,c,d){return is_object(a.visibleConf)||(a.visibleConf={}),is_object(a.sizesConf)||(a.sizesConf={}),0==a.start&&is_number(d)&&(a.start=d),is_object(a.visible)?(a.visibleConf.min=a.visible.min,a.visibleConf.max=a.visible.max,a.visible=!1):is_string(a.visible)?("variable"==a.visible?a.visibleConf.variable=!0:a.visibleConf.adjust=a.visible,a.visible=!1):is_function(a.visible)&&(a.visibleConf.adjust=a.visible,a.visible=!1),is_string(a.filter)||(a.filter=c.filter(":hidden").length>0?":visible":"*"),a[b.d.width]||(b.responsive?(debug(!0,"Set a "+b.d.width+" for the items!"),a[b.d.width]=ms_getTrueLargestSize(c,b,"outerWidth")):a[b.d.width]=ms_hasVariableSizes(c,b,"outerWidth")?"variable":c[b.d.outerWidth](!0)),a[b.d.height]||(a[b.d.height]=ms_hasVariableSizes(c,b,"outerHeight")?"variable":c[b.d.outerHeight](!0)),a.sizesConf.width=a.width,a.sizesConf.height=a.height,a}function in_complementVisibleItems(a,b){return"variable"==a.items[a.d.width]&&(a.items.visibleConf.variable=!0),a.items.visibleConf.variable||(is_number(a[a.d.width])?a.items.visible=Math.floor(a[a.d.width]/a.items[a.d.width]):(a.items.visible=Math.floor(b/a.items[a.d.width]),a[a.d.width]=a.items.visible*a.items[a.d.width],a.items.visibleConf.adjust||(a.align=!1)),("Infinity"==a.items.visible||1>a.items.visible)&&(debug(!0,'Not a valid number of visible items: Set to "variable".'),a.items.visibleConf.variable=!0)),a}function in_complementPrimarySize(a,b,c){return"auto"==a&&(a=ms_getTrueLargestSize(c,b,"outerWidth")),a}function in_complementSecondarySize(a,b,c){return"auto"==a&&(a=ms_getTrueLargestSize(c,b,"outerHeight")),a||(a=b.items[b.d.height]),a}function in_getAlignPadding(a,b){var c=cf_getAlignPadding(gi_getCurrentItems(b,a),a);return a.padding[a.d[1]]=c[1],a.padding[a.d[3]]=c[0],a}function in_getResponsiveValues(a,b){var d=cf_getItemAdjustMinMax(Math.ceil(a[a.d.width]/a.items[a.d.width]),a.items.visibleConf);d>b.length&&(d=b.length);var e=Math.floor(a[a.d.width]/d);return a.items.visible=d,a.items[a.d.width]=e,a[a.d.width]=d*e,a}function bt_pauseOnHoverConfig(a){if(is_string(a))var b=a.indexOf("immediate")>-1?!0:!1,c=a.indexOf("resume")>-1?!0:!1;else var b=c=!1;return[b,c]}function bt_mousesheelNumber(a){return is_number(a)?a:null}function is_null(a){return null===a}function is_undefined(a){return is_null(a)||a===void 0||""===a||"undefined"===a}function is_array(a){return a instanceof Array}function is_jquery(a){return a instanceof jQuery}function is_object(a){return(a instanceof Object||"object"==typeof a)&&!is_null(a)&&!is_jquery(a)&&!is_array(a)&&!is_function(a)}function is_number(a){return(a instanceof Number||"number"==typeof a)&&!isNaN(a)}function is_string(a){return(a instanceof String||"string"==typeof a)&&!is_undefined(a)&&!is_true(a)&&!is_false(a)}function is_function(a){return a instanceof Function||"function"==typeof a}function is_boolean(a){return a instanceof Boolean||"boolean"==typeof a||is_true(a)||is_false(a)}function is_true(a){return a===!0||"true"===a}function is_false(a){return a===!1||"false"===a}function is_percentage(a){return is_string(a)&&"%"==a.slice(-1)}function getTime(){return(new Date).getTime()}function deprecated(a,b){debug(!0,a+" is DEPRECATED, support for it will be removed. Use "+b+" instead.")}function debug(a,b){if(!is_undefined(window.console)&&!is_undefined(window.console.log)){if(is_object(a)){var c=" ("+a.selector+")";a=a.debug}else var c="";if(!a)return!1;b=is_string(b)?"carouFredSel"+c+": "+b:["carouFredSel"+c+":",b],window.console.log(b)}return!1}$.fn.carouFredSel||($.fn.caroufredsel=$.fn.carouFredSel=function(options,configs){if(0==this.length)return debug(!0,'No element found for "'+this.selector+'".'),this;if(this.length>1)return this.each(function(){$(this).carouFredSel(options,configs)});var $cfs=this,$tt0=this[0],starting_position=!1;$cfs.data("_cfs_isCarousel")&&(starting_position=$cfs.triggerHandler("_cfs_triggerEvent","currentPosition"),$cfs.trigger("_cfs_triggerEvent",["destroy",!0]));var FN={};FN._init=function(a,b,c){a=go_getObject($tt0,a),a.items=go_getItemsObject($tt0,a.items),a.scroll=go_getScrollObject($tt0,a.scroll),a.auto=go_getAutoObject($tt0,a.auto),a.prev=go_getPrevNextObject($tt0,a.prev),a.next=go_getPrevNextObject($tt0,a.next),a.pagination=go_getPaginationObject($tt0,a.pagination),a.swipe=go_getSwipeObject($tt0,a.swipe),a.mousewheel=go_getMousewheelObject($tt0,a.mousewheel),b&&(opts_orig=$.extend(!0,{},$.fn.carouFredSel.defaults,a)),opts=$.extend(!0,{},$.fn.carouFredSel.defaults,a),opts.d=cf_getDimensions(opts),crsl.direction="up"==opts.direction||"left"==opts.direction?"next":"prev";var d=$cfs.children(),e=ms_getParentSize($wrp,opts,"width");if(is_true(opts.cookie)&&(opts.cookie="caroufredsel_cookie_"+conf.serialNumber),opts.maxDimension=ms_getMaxDimension(opts,e),opts.items=in_complementItems(opts.items,opts,d,c),opts[opts.d.width]=in_complementPrimarySize(opts[opts.d.width],opts,d),opts[opts.d.height]=in_complementSecondarySize(opts[opts.d.height],opts,d),opts.responsive&&(is_percentage(opts[opts.d.width])||(opts[opts.d.width]="100%")),is_percentage(opts[opts.d.width])&&(crsl.upDateOnWindowResize=!0,crsl.primarySizePercentage=opts[opts.d.width],opts[opts.d.width]=ms_getPercentage(e,crsl.primarySizePercentage),opts.items.visible||(opts.items.visibleConf.variable=!0)),opts.responsive?(opts.usePadding=!1,opts.padding=[0,0,0,0],opts.align=!1,opts.items.visibleConf.variable=!1):(opts.items.visible||(opts=in_complementVisibleItems(opts,e)),opts[opts.d.width]||(!opts.items.visibleConf.variable&&is_number(opts.items[opts.d.width])&&"*"==opts.items.filter?(opts[opts.d.width]=opts.items.visible*opts.items[opts.d.width],opts.align=!1):opts[opts.d.width]="variable"),is_undefined(opts.align)&&(opts.align=is_number(opts[opts.d.width])?"center":!1),opts.items.visibleConf.variable&&(opts.items.visible=gn_getVisibleItemsNext(d,opts,0))),"*"==opts.items.filter||opts.items.visibleConf.variable||(opts.items.visibleConf.org=opts.items.visible,opts.items.visible=gn_getVisibleItemsNextFilter(d,opts,0)),opts.items.visible=cf_getItemsAdjust(opts.items.visible,opts,opts.items.visibleConf.adjust,$tt0),opts.items.visibleConf.old=opts.items.visible,opts.responsive)opts.items.visibleConf.min||(opts.items.visibleConf.min=opts.items.visible),opts.items.visibleConf.max||(opts.items.visibleConf.max=opts.items.visible),opts=in_getResponsiveValues(opts,d,e);else switch(opts.padding=cf_getPadding(opts.padding),"top"==opts.align?opts.align="left":"bottom"==opts.align&&(opts.align="right"),opts.align){case"center":case"left":case"right":"variable"!=opts[opts.d.width]&&(opts=in_getAlignPadding(opts,d),opts.usePadding=!0);break;default:opts.align=!1,opts.usePadding=0==opts.padding[0]&&0==opts.padding[1]&&0==opts.padding[2]&&0==opts.padding[3]?!1:!0}is_number(opts.scroll.duration)||(opts.scroll.duration=500),is_undefined(opts.scroll.items)&&(opts.scroll.items=opts.responsive||opts.items.visibleConf.variable||"*"!=opts.items.filter?"visible":opts.items.visible),opts.auto=$.extend(!0,{},opts.scroll,opts.auto),opts.prev=$.extend(!0,{},opts.scroll,opts.prev),opts.next=$.extend(!0,{},opts.scroll,opts.next),opts.pagination=$.extend(!0,{},opts.scroll,opts.pagination),opts.auto=go_complementAutoObject($tt0,opts.auto),opts.prev=go_complementPrevNextObject($tt0,opts.prev),opts.next=go_complementPrevNextObject($tt0,opts.next),opts.pagination=go_complementPaginationObject($tt0,opts.pagination),opts.swipe=go_complementSwipeObject($tt0,opts.swipe),opts.mousewheel=go_complementMousewheelObject($tt0,opts.mousewheel),opts.synchronise&&(opts.synchronise=cf_getSynchArr(opts.synchronise)),opts.auto.onPauseStart&&(opts.auto.onTimeoutStart=opts.auto.onPauseStart,deprecated("auto.onPauseStart","auto.onTimeoutStart")),opts.auto.onPausePause&&(opts.auto.onTimeoutPause=opts.auto.onPausePause,deprecated("auto.onPausePause","auto.onTimeoutPause")),opts.auto.onPauseEnd&&(opts.auto.onTimeoutEnd=opts.auto.onPauseEnd,deprecated("auto.onPauseEnd","auto.onTimeoutEnd")),opts.auto.pauseDuration&&(opts.auto.timeoutDuration=opts.auto.pauseDuration,deprecated("auto.pauseDuration","auto.timeoutDuration"))},FN._build=function(){$cfs.data("_cfs_isCarousel",!0);var a=$cfs.children(),b=in_mapCss($cfs,["textAlign","float","position","top","right","bottom","left","zIndex","width","height","marginTop","marginRight","marginBottom","marginLeft"]),c="relative";switch(b.position){case"absolute":case"fixed":c=b.position}"parent"==conf.wrapper?sz_storeOrigCss($wrp):$wrp.css(b),$wrp.css({overflow:"hidden",position:c}),sz_storeOrigCss($cfs),$cfs.data("_cfs_origCssZindex",b.zIndex),$cfs.css({textAlign:"left","float":"none",position:"absolute",top:0,right:"auto",bottom:"auto",left:0,marginTop:0,marginRight:0,marginBottom:0,marginLeft:0}),sz_storeMargin(a,opts),sz_storeOrigCss(a),opts.responsive&&sz_setResponsiveSizes(opts,a)},FN._bind_events=function(){FN._unbind_events(),$cfs.bind(cf_e("stop",conf),function(a,b){return a.stopPropagation(),crsl.isStopped||opts.auto.button&&opts.auto.button.addClass(cf_c("stopped",conf)),crsl.isStopped=!0,opts.auto.play&&(opts.auto.play=!1,$cfs.trigger(cf_e("pause",conf),b)),!0}),$cfs.bind(cf_e("finish",conf),function(a){return a.stopPropagation(),crsl.isScrolling&&sc_stopScroll(scrl),!0}),$cfs.bind(cf_e("pause",conf),function(a,b,c){if(a.stopPropagation(),tmrs=sc_clearTimers(tmrs),b&&crsl.isScrolling){scrl.isStopped=!0;var d=getTime()-scrl.startTime;scrl.duration-=d,scrl.pre&&(scrl.pre.duration-=d),scrl.post&&(scrl.post.duration-=d),sc_stopScroll(scrl,!1)}if(crsl.isPaused||crsl.isScrolling||c&&(tmrs.timePassed+=getTime()-tmrs.startTime),crsl.isPaused||opts.auto.button&&opts.auto.button.addClass(cf_c("paused",conf)),crsl.isPaused=!0,opts.auto.onTimeoutPause){var e=opts.auto.timeoutDuration-tmrs.timePassed,f=100-Math.ceil(100*e/opts.auto.timeoutDuration);opts.auto.onTimeoutPause.call($tt0,f,e)}return!0}),$cfs.bind(cf_e("play",conf),function(a,b,c,d){a.stopPropagation(),tmrs=sc_clearTimers(tmrs);var e=[b,c,d],f=["string","number","boolean"],g=cf_sortParams(e,f);if(b=g[0],c=g[1],d=g[2],"prev"!=b&&"next"!=b&&(b=crsl.direction),is_number(c)||(c=0),is_boolean(d)||(d=!1),d&&(crsl.isStopped=!1,opts.auto.play=!0),!opts.auto.play)return a.stopImmediatePropagation(),debug(conf,"Carousel stopped: Not scrolling.");crsl.isPaused&&opts.auto.button&&(opts.auto.button.removeClass(cf_c("stopped",conf)),opts.auto.button.removeClass(cf_c("paused",conf))),crsl.isPaused=!1,tmrs.startTime=getTime();var h=opts.auto.timeoutDuration+c;return dur2=h-tmrs.timePassed,perc=100-Math.ceil(100*dur2/h),opts.auto.progress&&(tmrs.progress=setInterval(function(){var a=getTime()-tmrs.startTime+tmrs.timePassed,b=Math.ceil(100*a/h);opts.auto.progress.updater.call(opts.auto.progress.bar[0],b)},opts.auto.progress.interval)),tmrs.auto=setTimeout(function(){opts.auto.progress&&opts.auto.progress.updater.call(opts.auto.progress.bar[0],100),opts.auto.onTimeoutEnd&&opts.auto.onTimeoutEnd.call($tt0,perc,dur2),crsl.isScrolling?$cfs.trigger(cf_e("play",conf),b):$cfs.trigger(cf_e(b,conf),opts.auto)},dur2),opts.auto.onTimeoutStart&&opts.auto.onTimeoutStart.call($tt0,perc,dur2),!0}),$cfs.bind(cf_e("resume",conf),function(a){return a.stopPropagation(),scrl.isStopped?(scrl.isStopped=!1,crsl.isPaused=!1,crsl.isScrolling=!0,scrl.startTime=getTime(),sc_startScroll(scrl,conf)):$cfs.trigger(cf_e("play",conf)),!0}),$cfs.bind(cf_e("prev",conf)+" "+cf_e("next",conf),function(a,b,c,d,e){if(a.stopPropagation(),crsl.isStopped||$cfs.is(":hidden"))return a.stopImmediatePropagation(),debug(conf,"Carousel stopped or hidden: Not scrolling.");var f=is_number(opts.items.minimum)?opts.items.minimum:opts.items.visible+1;if(f>itms.total)return a.stopImmediatePropagation(),debug(conf,"Not enough items ("+itms.total+" total, "+f+" needed): Not scrolling.");var g=[b,c,d,e],h=["object","number/string","function","boolean"],i=cf_sortParams(g,h);b=i[0],c=i[1],d=i[2],e=i[3];var j=a.type.slice(conf.events.prefix.length);if(is_object(b)||(b={}),is_function(d)&&(b.onAfter=d),is_boolean(e)&&(b.queue=e),b=$.extend(!0,{},opts[j],b),b.conditions&&!b.conditions.call($tt0,j))return a.stopImmediatePropagation(),debug(conf,'Callback "conditions" returned false.');if(!is_number(c)){if("*"!=opts.items.filter)c="visible";else for(var k=[c,b.items,opts[j].items],i=0,l=k.length;l>i;i++)if(is_number(k[i])||"page"==k[i]||"visible"==k[i]){c=k[i];break}switch(c){case"page":return a.stopImmediatePropagation(),$cfs.triggerHandler(cf_e(j+"Page",conf),[b,d]);case"visible":opts.items.visibleConf.variable||"*"!=opts.items.filter||(c=opts.items.visible)}}if(scrl.isStopped)return $cfs.trigger(cf_e("resume",conf)),$cfs.trigger(cf_e("queue",conf),[j,[b,c,d]]),a.stopImmediatePropagation(),debug(conf,"Carousel resumed scrolling.");if(b.duration>0&&crsl.isScrolling)return b.queue&&("last"==b.queue&&(queu=[]),("first"!=b.queue||0==queu.length)&&$cfs.trigger(cf_e("queue",conf),[j,[b,c,d]])),a.stopImmediatePropagation(),debug(conf,"Carousel currently scrolling.");if(tmrs.timePassed=0,$cfs.trigger(cf_e("slide_"+j,conf),[b,c]),opts.synchronise)for(var m=opts.synchronise,n=[b,c],o=0,l=m.length;l>o;o++){var p=j;m[o][2]||(p="prev"==p?"next":"prev"),m[o][1]||(n[0]=m[o][0].triggerHandler("_cfs_triggerEvent",["configuration",p])),n[1]=c+m[o][3],m[o][0].trigger("_cfs_triggerEvent",["slide_"+p,n])}return!0}),$cfs.bind(cf_e("slide_prev",conf),function(a,b,c){a.stopPropagation();var d=$cfs.children();if(!opts.circular&&0==itms.first)return opts.infinite&&$cfs.trigger(cf_e("next",conf),itms.total-1),a.stopImmediatePropagation();if(sz_resetMargin(d,opts),!is_number(c)){if(opts.items.visibleConf.variable)c=gn_getVisibleItemsPrev(d,opts,itms.total-1);else if("*"!=opts.items.filter){var e=is_number(b.items)?b.items:gn_getVisibleOrg($cfs,opts);c=gn_getScrollItemsPrevFilter(d,opts,itms.total-1,e)}else c=opts.items.visible;c=cf_getAdjust(c,opts,b.items,$tt0)}if(opts.circular||itms.total-c<itms.first&&(c=itms.total-itms.first),opts.items.visibleConf.old=opts.items.visible,opts.items.visibleConf.variable){var f=cf_getItemsAdjust(gn_getVisibleItemsNext(d,opts,itms.total-c),opts,opts.items.visibleConf.adjust,$tt0);f>=opts.items.visible+c&&itms.total>c&&(c++,f=cf_getItemsAdjust(gn_getVisibleItemsNext(d,opts,itms.total-c),opts,opts.items.visibleConf.adjust,$tt0)),opts.items.visible=f}else if("*"!=opts.items.filter){var f=gn_getVisibleItemsNextFilter(d,opts,itms.total-c);opts.items.visible=cf_getItemsAdjust(f,opts,opts.items.visibleConf.adjust,$tt0)}if(sz_resetMargin(d,opts,!0),0==c)return a.stopImmediatePropagation(),debug(conf,"0 items to scroll: Not scrolling.");for(debug(conf,"Scrolling "+c+" items backward."),itms.first+=c;itms.first>=itms.total;)itms.first-=itms.total;opts.circular||(0==itms.first&&b.onEnd&&b.onEnd.call($tt0,"prev"),opts.infinite||nv_enableNavi(opts,itms.first,conf)),$cfs.children().slice(itms.total-c,itms.total).prependTo($cfs),itms.total<opts.items.visible+c&&$cfs.children().slice(0,opts.items.visible+c-itms.total).clone(!0).appendTo($cfs);var d=$cfs.children(),g=gi_getOldItemsPrev(d,opts,c),h=gi_getNewItemsPrev(d,opts),i=d.eq(c-1),j=g.last(),k=h.last();sz_resetMargin(d,opts);var l=0,m=0;if(opts.align){var n=cf_getAlignPadding(h,opts);l=n[0],m=n[1]}var o=0>l?opts.padding[opts.d[3]]:0,p=!1,q=$();if(c>opts.items.visible&&(q=d.slice(opts.items.visibleConf.old,c),"directscroll"==b.fx)){var r=opts.items[opts.d.width];p=q,i=k,sc_hideHiddenItems(p),opts.items[opts.d.width]="variable"}var s=!1,t=ms_getTotalSize(d.slice(0,c),opts,"width"),u=cf_mapWrapperSizes(ms_getSizes(h,opts,!0),opts,!opts.usePadding),v=0,w={},x={},y={},z={},A={},B={},C={},D=sc_getDuration(b,opts,c,t);switch(b.fx){case"cover":case"cover-fade":v=ms_getTotalSize(d.slice(0,opts.items.visible),opts,"width")}p&&(opts.items[opts.d.width]=r),sz_resetMargin(d,opts,!0),m>=0&&sz_resetMargin(j,opts,opts.padding[opts.d[1]]),l>=0&&sz_resetMargin(i,opts,opts.padding[opts.d[3]]),opts.align&&(opts.padding[opts.d[1]]=m,opts.padding[opts.d[3]]=l),B[opts.d.left]=-(t-o),C[opts.d.left]=-(v-o),x[opts.d.left]=u[opts.d.width];var E=function(){},F=function(){},G=function(){},H=function(){},I=function(){},J=function(){},K=function(){},L=function(){},M=function(){},N=function(){},O=function(){};switch(b.fx){case"crossfade":case"cover":case"cover-fade":case"uncover":case"uncover-fade":s=$cfs.clone(!0).appendTo($wrp)}switch(b.fx){case"crossfade":case"uncover":case"uncover-fade":s.children().slice(0,c).remove(),s.children().slice(opts.items.visibleConf.old).remove();break;case"cover":case"cover-fade":s.children().slice(opts.items.visible).remove(),s.css(C)}if($cfs.css(B),scrl=sc_setScroll(D,b.easing,conf),w[opts.d.left]=opts.usePadding?opts.padding[opts.d[3]]:0,("variable"==opts[opts.d.width]||"variable"==opts[opts.d.height])&&(E=function(){$wrp.css(u)},F=function(){scrl.anims.push([$wrp,u])}),opts.usePadding){switch(k.not(i).length&&(y[opts.d.marginRight]=i.data("_cfs_origCssMargin"),0>l?i.css(y):(K=function(){i.css(y)},L=function(){scrl.anims.push([i,y])})),b.fx){case"cover":case"cover-fade":s.children().eq(c-1).css(y)}k.not(j).length&&(z[opts.d.marginRight]=j.data("_cfs_origCssMargin"),G=function(){j.css(z)},H=function(){scrl.anims.push([j,z])}),m>=0&&(A[opts.d.marginRight]=k.data("_cfs_origCssMargin")+opts.padding[opts.d[1]],I=function(){k.css(A)},J=function(){scrl.anims.push([k,A])})}O=function(){$cfs.css(w)};var P=opts.items.visible+c-itms.total;N=function(){if(P>0&&($cfs.children().slice(itms.total).remove(),g=$($cfs.children().slice(itms.total-(opts.items.visible-P)).get().concat($cfs.children().slice(0,P).get()))),sc_showHiddenItems(p),opts.usePadding){var a=$cfs.children().eq(opts.items.visible+c-1);a.css(opts.d.marginRight,a.data("_cfs_origCssMargin"))}};var Q=sc_mapCallbackArguments(g,q,h,c,"prev",D,u);switch(M=function(){sc_afterScroll($cfs,s,b),crsl.isScrolling=!1,clbk.onAfter=sc_fireCallbacks($tt0,b,"onAfter",Q,clbk),queu=sc_fireQueue($cfs,queu,conf),crsl.isPaused||$cfs.trigger(cf_e("play",conf))},crsl.isScrolling=!0,tmrs=sc_clearTimers(tmrs),clbk.onBefore=sc_fireCallbacks($tt0,b,"onBefore",Q,clbk),b.fx){case"none":$cfs.css(w),E(),G(),I(),K(),O(),N(),M();break;case"fade":scrl.anims.push([$cfs,{opacity:0},function(){E(),G(),I(),K(),O(),N(),scrl=sc_setScroll(D,b.easing,conf),scrl.anims.push([$cfs,{opacity:1},M]),sc_startScroll(scrl,conf)}]);break;case"crossfade":$cfs.css({opacity:0}),scrl.anims.push([s,{opacity:0}]),scrl.anims.push([$cfs,{opacity:1},M]),F(),G(),I(),K(),O(),N();break;case"cover":scrl.anims.push([s,w,function(){G(),I(),K(),O(),N(),M()}]),F();break;case"cover-fade":scrl.anims.push([$cfs,{opacity:0}]),scrl.anims.push([s,w,function(){G(),I(),K(),O(),N(),M()}]),F();break;case"uncover":scrl.anims.push([s,x,M]),F(),G(),I(),K(),O(),N();break;case"uncover-fade":$cfs.css({opacity:0}),scrl.anims.push([$cfs,{opacity:1}]),scrl.anims.push([s,x,M]),F(),G(),I(),K(),O(),N();break;default:scrl.anims.push([$cfs,w,function(){N(),M()}]),F(),H(),J(),L()}return sc_startScroll(scrl,conf),cf_setCookie(opts.cookie,$cfs,conf),$cfs.trigger(cf_e("updatePageStatus",conf),[!1,u]),!0
}),$cfs.bind(cf_e("slide_next",conf),function(a,b,c){a.stopPropagation();var d=$cfs.children();if(!opts.circular&&itms.first==opts.items.visible)return opts.infinite&&$cfs.trigger(cf_e("prev",conf),itms.total-1),a.stopImmediatePropagation();if(sz_resetMargin(d,opts),!is_number(c)){if("*"!=opts.items.filter){var e=is_number(b.items)?b.items:gn_getVisibleOrg($cfs,opts);c=gn_getScrollItemsNextFilter(d,opts,0,e)}else c=opts.items.visible;c=cf_getAdjust(c,opts,b.items,$tt0)}var f=0==itms.first?itms.total:itms.first;if(!opts.circular){if(opts.items.visibleConf.variable)var g=gn_getVisibleItemsNext(d,opts,c),e=gn_getVisibleItemsPrev(d,opts,f-1);else var g=opts.items.visible,e=opts.items.visible;c+g>f&&(c=f-e)}if(opts.items.visibleConf.old=opts.items.visible,opts.items.visibleConf.variable){for(var g=cf_getItemsAdjust(gn_getVisibleItemsNextTestCircular(d,opts,c,f),opts,opts.items.visibleConf.adjust,$tt0);opts.items.visible-c>=g&&itms.total>c;)c++,g=cf_getItemsAdjust(gn_getVisibleItemsNextTestCircular(d,opts,c,f),opts,opts.items.visibleConf.adjust,$tt0);opts.items.visible=g}else if("*"!=opts.items.filter){var g=gn_getVisibleItemsNextFilter(d,opts,c);opts.items.visible=cf_getItemsAdjust(g,opts,opts.items.visibleConf.adjust,$tt0)}if(sz_resetMargin(d,opts,!0),0==c)return a.stopImmediatePropagation(),debug(conf,"0 items to scroll: Not scrolling.");for(debug(conf,"Scrolling "+c+" items forward."),itms.first-=c;0>itms.first;)itms.first+=itms.total;opts.circular||(itms.first==opts.items.visible&&b.onEnd&&b.onEnd.call($tt0,"next"),opts.infinite||nv_enableNavi(opts,itms.first,conf)),itms.total<opts.items.visible+c&&$cfs.children().slice(0,opts.items.visible+c-itms.total).clone(!0).appendTo($cfs);var d=$cfs.children(),h=gi_getOldItemsNext(d,opts),i=gi_getNewItemsNext(d,opts,c),j=d.eq(c-1),k=h.last(),l=i.last();sz_resetMargin(d,opts);var m=0,n=0;if(opts.align){var o=cf_getAlignPadding(i,opts);m=o[0],n=o[1]}var p=!1,q=$();if(c>opts.items.visibleConf.old&&(q=d.slice(opts.items.visibleConf.old,c),"directscroll"==b.fx)){var r=opts.items[opts.d.width];p=q,j=k,sc_hideHiddenItems(p),opts.items[opts.d.width]="variable"}var s=!1,t=ms_getTotalSize(d.slice(0,c),opts,"width"),u=cf_mapWrapperSizes(ms_getSizes(i,opts,!0),opts,!opts.usePadding),v=0,w={},x={},y={},z={},A={},B=sc_getDuration(b,opts,c,t);switch(b.fx){case"uncover":case"uncover-fade":v=ms_getTotalSize(d.slice(0,opts.items.visibleConf.old),opts,"width")}p&&(opts.items[opts.d.width]=r),opts.align&&0>opts.padding[opts.d[1]]&&(opts.padding[opts.d[1]]=0),sz_resetMargin(d,opts,!0),sz_resetMargin(k,opts,opts.padding[opts.d[1]]),opts.align&&(opts.padding[opts.d[1]]=n,opts.padding[opts.d[3]]=m),A[opts.d.left]=opts.usePadding?opts.padding[opts.d[3]]:0;var C=function(){},D=function(){},E=function(){},F=function(){},G=function(){},H=function(){},I=function(){},J=function(){},K=function(){};switch(b.fx){case"crossfade":case"cover":case"cover-fade":case"uncover":case"uncover-fade":s=$cfs.clone(!0).appendTo($wrp),s.children().slice(opts.items.visibleConf.old).remove()}switch(b.fx){case"crossfade":case"cover":case"cover-fade":$cfs.css("zIndex",1),s.css("zIndex",0)}if(scrl=sc_setScroll(B,b.easing,conf),w[opts.d.left]=-t,x[opts.d.left]=-v,0>m&&(w[opts.d.left]+=m),("variable"==opts[opts.d.width]||"variable"==opts[opts.d.height])&&(C=function(){$wrp.css(u)},D=function(){scrl.anims.push([$wrp,u])}),opts.usePadding){var L=l.data("_cfs_origCssMargin");n>=0&&(L+=opts.padding[opts.d[1]]),l.css(opts.d.marginRight,L),j.not(k).length&&(z[opts.d.marginRight]=k.data("_cfs_origCssMargin")),E=function(){k.css(z)},F=function(){scrl.anims.push([k,z])};var M=j.data("_cfs_origCssMargin");m>0&&(M+=opts.padding[opts.d[3]]),y[opts.d.marginRight]=M,G=function(){j.css(y)},H=function(){scrl.anims.push([j,y])}}K=function(){$cfs.css(A)};var N=opts.items.visible+c-itms.total;J=function(){N>0&&$cfs.children().slice(itms.total).remove();var a=$cfs.children().slice(0,c).appendTo($cfs).last();if(N>0&&(i=gi_getCurrentItems(d,opts)),sc_showHiddenItems(p),opts.usePadding){if(itms.total<opts.items.visible+c){var b=$cfs.children().eq(opts.items.visible-1);b.css(opts.d.marginRight,b.data("_cfs_origCssMargin")+opts.padding[opts.d[1]])}a.css(opts.d.marginRight,a.data("_cfs_origCssMargin"))}};var O=sc_mapCallbackArguments(h,q,i,c,"next",B,u);switch(I=function(){$cfs.css("zIndex",$cfs.data("_cfs_origCssZindex")),sc_afterScroll($cfs,s,b),crsl.isScrolling=!1,clbk.onAfter=sc_fireCallbacks($tt0,b,"onAfter",O,clbk),queu=sc_fireQueue($cfs,queu,conf),crsl.isPaused||$cfs.trigger(cf_e("play",conf))},crsl.isScrolling=!0,tmrs=sc_clearTimers(tmrs),clbk.onBefore=sc_fireCallbacks($tt0,b,"onBefore",O,clbk),b.fx){case"none":$cfs.css(w),C(),E(),G(),K(),J(),I();break;case"fade":scrl.anims.push([$cfs,{opacity:0},function(){C(),E(),G(),K(),J(),scrl=sc_setScroll(B,b.easing,conf),scrl.anims.push([$cfs,{opacity:1},I]),sc_startScroll(scrl,conf)}]);break;case"crossfade":$cfs.css({opacity:0}),scrl.anims.push([s,{opacity:0}]),scrl.anims.push([$cfs,{opacity:1},I]),D(),E(),G(),K(),J();break;case"cover":$cfs.css(opts.d.left,$wrp[opts.d.width]()),scrl.anims.push([$cfs,A,I]),D(),E(),G(),J();break;case"cover-fade":$cfs.css(opts.d.left,$wrp[opts.d.width]()),scrl.anims.push([s,{opacity:0}]),scrl.anims.push([$cfs,A,I]),D(),E(),G(),J();break;case"uncover":scrl.anims.push([s,x,I]),D(),E(),G(),K(),J();break;case"uncover-fade":$cfs.css({opacity:0}),scrl.anims.push([$cfs,{opacity:1}]),scrl.anims.push([s,x,I]),D(),E(),G(),K(),J();break;default:scrl.anims.push([$cfs,w,function(){K(),J(),I()}]),D(),F(),H()}return sc_startScroll(scrl,conf),cf_setCookie(opts.cookie,$cfs,conf),$cfs.trigger(cf_e("updatePageStatus",conf),[!1,u]),!0}),$cfs.bind(cf_e("slideTo",conf),function(a,b,c,d,e,f,g){a.stopPropagation();var h=[b,c,d,e,f,g],i=["string/number/object","number","boolean","object","string","function"],j=cf_sortParams(h,i);return e=j[3],f=j[4],g=j[5],b=gn_getItemIndex(j[0],j[1],j[2],itms,$cfs),0==b?!1:(is_object(e)||(e=!1),"prev"!=f&&"next"!=f&&(f=opts.circular?itms.total/2>=b?"next":"prev":0==itms.first||itms.first>b?"next":"prev"),"prev"==f&&(b=itms.total-b),$cfs.trigger(cf_e(f,conf),[e,b,g]),!0)}),$cfs.bind(cf_e("prevPage",conf),function(a,b,c){a.stopPropagation();var d=$cfs.triggerHandler(cf_e("currentPage",conf));return $cfs.triggerHandler(cf_e("slideToPage",conf),[d-1,b,"prev",c])}),$cfs.bind(cf_e("nextPage",conf),function(a,b,c){a.stopPropagation();var d=$cfs.triggerHandler(cf_e("currentPage",conf));return $cfs.triggerHandler(cf_e("slideToPage",conf),[d+1,b,"next",c])}),$cfs.bind(cf_e("slideToPage",conf),function(a,b,c,d,e){a.stopPropagation(),is_number(b)||(b=$cfs.triggerHandler(cf_e("currentPage",conf)));var f=opts.pagination.items||opts.items.visible,g=Math.ceil(itms.total/f)-1;return 0>b&&(b=g),b>g&&(b=0),$cfs.triggerHandler(cf_e("slideTo",conf),[b*f,0,!0,c,d,e])}),$cfs.bind(cf_e("jumpToStart",conf),function(a,b){if(a.stopPropagation(),b=b?gn_getItemIndex(b,0,!0,itms,$cfs):0,b+=itms.first,0!=b){if(itms.total>0)for(;b>itms.total;)b-=itms.total;$cfs.prepend($cfs.children().slice(b,itms.total))}return!0}),$cfs.bind(cf_e("synchronise",conf),function(a,b){if(a.stopPropagation(),b)b=cf_getSynchArr(b);else{if(!opts.synchronise)return debug(conf,"No carousel to synchronise.");b=opts.synchronise}for(var c=$cfs.triggerHandler(cf_e("currentPosition",conf)),d=!0,e=0,f=b.length;f>e;e++)b[e][0].triggerHandler(cf_e("slideTo",conf),[c,b[e][3],!0])||(d=!1);return d}),$cfs.bind(cf_e("queue",conf),function(a,b,c){return a.stopPropagation(),is_function(b)?b.call($tt0,queu):is_array(b)?queu=b:is_undefined(b)||queu.push([b,c]),queu}),$cfs.bind(cf_e("insertItem",conf),function(a,b,c,d,e){a.stopPropagation();var f=[b,c,d,e],g=["string/object","string/number/object","boolean","number"],h=cf_sortParams(f,g);if(b=h[0],c=h[1],d=h[2],e=h[3],is_object(b)&&!is_jquery(b)?b=$(b):is_string(b)&&(b=$(b)),!is_jquery(b)||0==b.length)return debug(conf,"Not a valid object.");is_undefined(c)&&(c="end"),sz_storeMargin(b,opts),sz_storeOrigCss(b);var i=c,j="before";"end"==c?d?(0==itms.first?(c=itms.total-1,j="after"):(c=itms.first,itms.first+=b.length),0>c&&(c=0)):(c=itms.total-1,j="after"):c=gn_getItemIndex(c,e,d,itms,$cfs);var k=$cfs.children().eq(c);return k.length?k[j](b):(debug(conf,"Correct insert-position not found! Appending item to the end."),$cfs.append(b)),"end"==i||d||itms.first>c&&(itms.first+=b.length),itms.total=$cfs.children().length,itms.first>=itms.total&&(itms.first-=itms.total),$cfs.trigger(cf_e("updateSizes",conf)),$cfs.trigger(cf_e("linkAnchors",conf)),!0}),$cfs.bind(cf_e("removeItem",conf),function(a,b,c,d){a.stopPropagation();var e=[b,c,d],f=["string/number/object","boolean","number"],g=cf_sortParams(e,f);if(b=g[0],c=g[1],d=g[2],b instanceof $&&b.length>1)return i=$(),b.each(function(){var e=$cfs.trigger(cf_e("removeItem",conf),[$(this),c,d]);e&&(i=i.add(e))}),i;if(is_undefined(b)||"end"==b)i=$cfs.children().last();else{b=gn_getItemIndex(b,d,c,itms,$cfs);var i=$cfs.children().eq(b);i.length&&itms.first>b&&(itms.first-=i.length)}return i&&i.length&&(i.detach(),itms.total=$cfs.children().length,$cfs.trigger(cf_e("updateSizes",conf))),i}),$cfs.bind(cf_e("onBefore",conf)+" "+cf_e("onAfter",conf),function(a,b){a.stopPropagation();var c=a.type.slice(conf.events.prefix.length);return is_array(b)&&(clbk[c]=b),is_function(b)&&clbk[c].push(b),clbk[c]}),$cfs.bind(cf_e("currentPosition",conf),function(a,b){if(a.stopPropagation(),0==itms.first)var c=0;else var c=itms.total-itms.first;return is_function(b)&&b.call($tt0,c),c}),$cfs.bind(cf_e("currentPage",conf),function(a,b){a.stopPropagation();var e,c=opts.pagination.items||opts.items.visible,d=Math.ceil(itms.total/c-1);return e=0==itms.first?0:itms.first<itms.total%c?0:itms.first!=c||opts.circular?Math.round((itms.total-itms.first)/c):d,0>e&&(e=0),e>d&&(e=d),is_function(b)&&b.call($tt0,e),e}),$cfs.bind(cf_e("currentVisible",conf),function(a,b){a.stopPropagation();var c=gi_getCurrentItems($cfs.children(),opts);return is_function(b)&&b.call($tt0,c),c}),$cfs.bind(cf_e("slice",conf),function(a,b,c,d){if(a.stopPropagation(),0==itms.total)return!1;var e=[b,c,d],f=["number","number","function"],g=cf_sortParams(e,f);if(b=is_number(g[0])?g[0]:0,c=is_number(g[1])?g[1]:itms.total,d=g[2],b+=itms.first,c+=itms.first,items.total>0){for(;b>itms.total;)b-=itms.total;for(;c>itms.total;)c-=itms.total;for(;0>b;)b+=itms.total;for(;0>c;)c+=itms.total}var i,h=$cfs.children();return i=c>b?h.slice(b,c):$(h.slice(b,itms.total).get().concat(h.slice(0,c).get())),is_function(d)&&d.call($tt0,i),i}),$cfs.bind(cf_e("isPaused",conf)+" "+cf_e("isStopped",conf)+" "+cf_e("isScrolling",conf),function(a,b){a.stopPropagation();var c=a.type.slice(conf.events.prefix.length),d=crsl[c];return is_function(b)&&b.call($tt0,d),d}),$cfs.bind(cf_e("configuration",conf),function(e,a,b,c){e.stopPropagation();var reInit=!1;if(is_function(a))a.call($tt0,opts);else if(is_object(a))opts_orig=$.extend(!0,{},opts_orig,a),b!==!1?reInit=!0:opts=$.extend(!0,{},opts,a);else if(!is_undefined(a))if(is_function(b)){var val=eval("opts."+a);is_undefined(val)&&(val=""),b.call($tt0,val)}else{if(is_undefined(b))return eval("opts."+a);"boolean"!=typeof c&&(c=!0),eval("opts_orig."+a+" = b"),c!==!1?reInit=!0:eval("opts."+a+" = b")}if(reInit){sz_resetMargin($cfs.children(),opts),FN._init(opts_orig),FN._bind_buttons();var sz=sz_setSizes($cfs,opts);$cfs.trigger(cf_e("updatePageStatus",conf),[!0,sz])}return opts}),$cfs.bind(cf_e("linkAnchors",conf),function(a,b,c){return a.stopPropagation(),is_undefined(b)?b=$("body"):is_string(b)&&(b=$(b)),is_jquery(b)&&0!=b.length?(is_string(c)||(c="a.caroufredsel"),b.find(c).each(function(){var a=this.hash||"";a.length>0&&-1!=$cfs.children().index($(a))&&$(this).unbind("click").click(function(b){b.preventDefault(),$cfs.trigger(cf_e("slideTo",conf),a)})}),!0):debug(conf,"Not a valid object.")}),$cfs.bind(cf_e("updatePageStatus",conf),function(a,b){if(a.stopPropagation(),opts.pagination.container){var d=opts.pagination.items||opts.items.visible,e=Math.ceil(itms.total/d);b&&(opts.pagination.anchorBuilder&&(opts.pagination.container.children().remove(),opts.pagination.container.each(function(){for(var a=0;e>a;a++){var b=$cfs.children().eq(gn_getItemIndex(a*d,0,!0,itms,$cfs));$(this).append(opts.pagination.anchorBuilder.call(b[0],a+1))}})),opts.pagination.container.each(function(){$(this).children().unbind(opts.pagination.event).each(function(a){$(this).bind(opts.pagination.event,function(b){b.preventDefault(),$cfs.trigger(cf_e("slideTo",conf),[a*d,-opts.pagination.deviation,!0,opts.pagination])})})}));var f=$cfs.triggerHandler(cf_e("currentPage",conf))+opts.pagination.deviation;return f>=e&&(f=0),0>f&&(f=e-1),opts.pagination.container.each(function(){$(this).children().removeClass(cf_c("selected",conf)).eq(f).addClass(cf_c("selected",conf))}),!0}}),$cfs.bind(cf_e("updateSizes",conf),function(){var b=opts.items.visible,c=$cfs.children(),d=ms_getParentSize($wrp,opts,"width");if(itms.total=c.length,crsl.primarySizePercentage?(opts.maxDimension=d,opts[opts.d.width]=ms_getPercentage(d,crsl.primarySizePercentage)):opts.maxDimension=ms_getMaxDimension(opts,d),opts.responsive?(opts.items.width=opts.items.sizesConf.width,opts.items.height=opts.items.sizesConf.height,opts=in_getResponsiveValues(opts,c,d),b=opts.items.visible,sz_setResponsiveSizes(opts,c)):opts.items.visibleConf.variable?b=gn_getVisibleItemsNext(c,opts,0):"*"!=opts.items.filter&&(b=gn_getVisibleItemsNextFilter(c,opts,0)),!opts.circular&&0!=itms.first&&b>itms.first){if(opts.items.visibleConf.variable)var e=gn_getVisibleItemsPrev(c,opts,itms.first)-itms.first;else if("*"!=opts.items.filter)var e=gn_getVisibleItemsPrevFilter(c,opts,itms.first)-itms.first;else var e=opts.items.visible-itms.first;debug(conf,"Preventing non-circular: sliding "+e+" items backward."),$cfs.trigger(cf_e("prev",conf),e)}opts.items.visible=cf_getItemsAdjust(b,opts,opts.items.visibleConf.adjust,$tt0),opts.items.visibleConf.old=opts.items.visible,opts=in_getAlignPadding(opts,c);var f=sz_setSizes($cfs,opts);return $cfs.trigger(cf_e("updatePageStatus",conf),[!0,f]),nv_showNavi(opts,itms.total,conf),nv_enableNavi(opts,itms.first,conf),f}),$cfs.bind(cf_e("destroy",conf),function(a,b){return a.stopPropagation(),tmrs=sc_clearTimers(tmrs),$cfs.data("_cfs_isCarousel",!1),$cfs.trigger(cf_e("finish",conf)),b&&$cfs.trigger(cf_e("jumpToStart",conf)),sz_restoreOrigCss($cfs.children()),sz_restoreOrigCss($cfs),FN._unbind_events(),FN._unbind_buttons(),"parent"==conf.wrapper?sz_restoreOrigCss($wrp):$wrp.replaceWith($cfs),!0}),$cfs.bind(cf_e("debug",conf),function(){return debug(conf,"Carousel width: "+opts.width),debug(conf,"Carousel height: "+opts.height),debug(conf,"Item widths: "+opts.items.width),debug(conf,"Item heights: "+opts.items.height),debug(conf,"Number of items visible: "+opts.items.visible),opts.auto.play&&debug(conf,"Number of items scrolled automatically: "+opts.auto.items),opts.prev.button&&debug(conf,"Number of items scrolled backward: "+opts.prev.items),opts.next.button&&debug(conf,"Number of items scrolled forward: "+opts.next.items),conf.debug}),$cfs.bind("_cfs_triggerEvent",function(a,b,c){return a.stopPropagation(),$cfs.triggerHandler(cf_e(b,conf),c)})},FN._unbind_events=function(){$cfs.unbind(cf_e("",conf)),$cfs.unbind(cf_e("",conf,!1)),$cfs.unbind("_cfs_triggerEvent")},FN._bind_buttons=function(){if(FN._unbind_buttons(),nv_showNavi(opts,itms.total,conf),nv_enableNavi(opts,itms.first,conf),opts.auto.pauseOnHover){var a=bt_pauseOnHoverConfig(opts.auto.pauseOnHover);$wrp.bind(cf_e("mouseenter",conf,!1),function(){$cfs.trigger(cf_e("pause",conf),a)}).bind(cf_e("mouseleave",conf,!1),function(){$cfs.trigger(cf_e("resume",conf))})}if(opts.auto.button&&opts.auto.button.bind(cf_e(opts.auto.event,conf,!1),function(a){a.preventDefault();var b=!1,c=null;crsl.isPaused?b="play":opts.auto.pauseOnEvent&&(b="pause",c=bt_pauseOnHoverConfig(opts.auto.pauseOnEvent)),b&&$cfs.trigger(cf_e(b,conf),c)}),opts.prev.button&&(opts.prev.button.bind(cf_e(opts.prev.event,conf,!1),function(a){a.preventDefault(),$cfs.trigger(cf_e("prev",conf))}),opts.prev.pauseOnHover)){var a=bt_pauseOnHoverConfig(opts.prev.pauseOnHover);opts.prev.button.bind(cf_e("mouseenter",conf,!1),function(){$cfs.trigger(cf_e("pause",conf),a)}).bind(cf_e("mouseleave",conf,!1),function(){$cfs.trigger(cf_e("resume",conf))})}if(opts.next.button&&(opts.next.button.bind(cf_e(opts.next.event,conf,!1),function(a){a.preventDefault(),$cfs.trigger(cf_e("next",conf))}),opts.next.pauseOnHover)){var a=bt_pauseOnHoverConfig(opts.next.pauseOnHover);opts.next.button.bind(cf_e("mouseenter",conf,!1),function(){$cfs.trigger(cf_e("pause",conf),a)}).bind(cf_e("mouseleave",conf,!1),function(){$cfs.trigger(cf_e("resume",conf))})}if(opts.pagination.container&&opts.pagination.pauseOnHover){var a=bt_pauseOnHoverConfig(opts.pagination.pauseOnHover);opts.pagination.container.bind(cf_e("mouseenter",conf,!1),function(){$cfs.trigger(cf_e("pause",conf),a)}).bind(cf_e("mouseleave",conf,!1),function(){$cfs.trigger(cf_e("resume",conf))})}if((opts.prev.key||opts.next.key)&&$(document).bind(cf_e("keyup",conf,!1,!0,!0),function(a){var b=a.keyCode;b==opts.next.key&&(a.preventDefault(),$cfs.trigger(cf_e("next",conf))),b==opts.prev.key&&(a.preventDefault(),$cfs.trigger(cf_e("prev",conf)))}),opts.pagination.keys&&$(document).bind(cf_e("keyup",conf,!1,!0,!0),function(a){var b=a.keyCode;b>=49&&58>b&&(b=(b-49)*opts.items.visible,itms.total>=b&&(a.preventDefault(),$cfs.trigger(cf_e("slideTo",conf),[b,0,!0,opts.pagination])))}),$.fn.swipe){var b="ontouchstart"in window;if(b&&opts.swipe.onTouch||!b&&opts.swipe.onMouse){var c=$.extend(!0,{},opts.prev,opts.swipe),d=$.extend(!0,{},opts.next,opts.swipe),e=function(){$cfs.trigger(cf_e("prev",conf),[c])},f=function(){$cfs.trigger(cf_e("next",conf),[d])};switch(opts.direction){case"up":case"down":opts.swipe.options.swipeUp=f,opts.swipe.options.swipeDown=e;break;default:opts.swipe.options.swipeLeft=f,opts.swipe.options.swipeRight=e}crsl.swipe&&$cfs.swipe("destroy"),$wrp.swipe(opts.swipe.options),$wrp.css("cursor","move"),crsl.swipe=!0}}if($.fn.mousewheel&&opts.mousewheel){var g=$.extend(!0,{},opts.prev,opts.mousewheel),h=$.extend(!0,{},opts.next,opts.mousewheel);crsl.mousewheel&&$wrp.unbind(cf_e("mousewheel",conf,!1)),$wrp.bind(cf_e("mousewheel",conf,!1),function(a,b){a.preventDefault(),b>0?$cfs.trigger(cf_e("prev",conf),[g]):$cfs.trigger(cf_e("next",conf),[h])}),crsl.mousewheel=!0}if(opts.auto.play&&$cfs.trigger(cf_e("play",conf),opts.auto.delay),crsl.upDateOnWindowResize){var i=function(){$cfs.trigger(cf_e("finish",conf)),opts.auto.pauseOnResize&&!crsl.isPaused&&$cfs.trigger(cf_e("play",conf)),sz_resetMargin($cfs.children(),opts),$cfs.trigger(cf_e("updateSizes",conf))},j=$(window),k=null;if($.debounce&&"debounce"==conf.onWindowResize)k=$.debounce(200,i);else if($.throttle&&"throttle"==conf.onWindowResize)k=$.throttle(300,i);else{var l=0,m=0;k=function(){var a=j.width(),b=j.height();(a!=l||b!=m)&&(i(),l=a,m=b)}}j.bind(cf_e("resize",conf,!1,!0,!0),k)}},FN._unbind_buttons=function(){var b=(cf_e("",conf),cf_e("",conf,!1));ns3=cf_e("",conf,!1,!0,!0),$(document).unbind(ns3),$(window).unbind(ns3),$wrp.unbind(b),opts.auto.button&&opts.auto.button.unbind(b),opts.prev.button&&opts.prev.button.unbind(b),opts.next.button&&opts.next.button.unbind(b),opts.pagination.container&&(opts.pagination.container.unbind(b),opts.pagination.anchorBuilder&&opts.pagination.container.children().remove()),crsl.swipe&&($cfs.swipe("destroy"),$wrp.css("cursor","default"),crsl.swipe=!1),crsl.mousewheel&&(crsl.mousewheel=!1),nv_showNavi(opts,"hide",conf),nv_enableNavi(opts,"removeClass",conf)},is_boolean(configs)&&(configs={debug:configs});var crsl={direction:"next",isPaused:!0,isScrolling:!1,isStopped:!1,mousewheel:!1,swipe:!1},itms={total:$cfs.children().length,first:0},tmrs={auto:null,progress:null,startTime:getTime(),timePassed:0},scrl={isStopped:!1,duration:0,startTime:0,easing:"",anims:[]},clbk={onBefore:[],onAfter:[]},queu=[],conf=$.extend(!0,{},$.fn.carouFredSel.configs,configs),opts={},opts_orig=$.extend(!0,{},options),$wrp="parent"==conf.wrapper?$cfs.parent():$cfs.wrap("<"+conf.wrapper.element+' class="'+conf.wrapper.classname+'" />').parent();if(conf.selector=$cfs.selector,conf.serialNumber=$.fn.carouFredSel.serialNumber++,conf.transition=conf.transition&&$.fn.transition?"transition":"animate",FN._init(opts_orig,!0,starting_position),FN._build(),FN._bind_events(),FN._bind_buttons(),is_array(opts.items.start))var start_arr=opts.items.start;else{var start_arr=[];0!=opts.items.start&&start_arr.push(opts.items.start)}if(opts.cookie&&start_arr.unshift(parseInt(cf_getCookie(opts.cookie),10)),start_arr.length>0)for(var a=0,l=start_arr.length;l>a;a++){var s=start_arr[a];if(0!=s){if(s===!0){if(s=window.location.hash,1>s.length)continue}else"random"===s&&(s=Math.floor(Math.random()*itms.total));if($cfs.triggerHandler(cf_e("slideTo",conf),[s,0,!0,{fx:"none"}]))break}}var siz=sz_setSizes($cfs,opts),itm=gi_getCurrentItems($cfs.children(),opts);return opts.onCreate&&opts.onCreate.call($tt0,{width:siz.width,height:siz.height,items:itm}),$cfs.trigger(cf_e("updatePageStatus",conf),[!0,siz]),$cfs.trigger(cf_e("linkAnchors",conf)),conf.debug&&$cfs.trigger(cf_e("debug",conf)),$cfs},$.fn.carouFredSel.serialNumber=1,$.fn.carouFredSel.defaults={synchronise:!1,infinite:!0,circular:!0,responsive:!1,direction:"left",items:{start:0},scroll:{easing:"swing",duration:500,pauseOnHover:!1,event:"click",queue:!1}},$.fn.carouFredSel.configs={debug:!1,transition:!1,onWindowResize:"throttle",events:{prefix:"",namespace:"cfs"},wrapper:{element:"div",classname:"caroufredsel_wrapper"},classnames:{}},$.fn.carouFredSel.pageAnchorBuilder=function(a){return'<a href="#"><span>'+a+"</span></a>"},$.fn.carouFredSel.progressbarUpdater=function(a){$(this).css("width",a+"%")},$.fn.carouFredSel.cookie={get:function(a){a+="=";for(var b=document.cookie.split(";"),c=0,d=b.length;d>c;c++){for(var e=b[c];" "==e.charAt(0);)e=e.slice(1);if(0==e.indexOf(a))return e.slice(a.length)}return 0},set:function(a,b,c){var d="";if(c){var e=new Date;e.setTime(e.getTime()+1e3*60*60*24*c),d="; expires="+e.toGMTString()}document.cookie=a+"="+b+d+"; path=/"},remove:function(a){$.fn.carouFredSel.cookie.set(a,"",-1)}},$.extend($.easing,{quadratic:function(a){var b=a*a;return a*(-b*a+4*b-6*a+4)},cubic:function(a){return a*(4*a*a-9*a+6)},elastic:function(a){var b=a*a;return a*(33*b*b-106*b*a+126*b-67*a+15)}}))})(jQuery);

(function($){$.fn.Tabs=function(){TabsWidget.init();};var TabsWidget={init:function(){if($(".tabs-widget").length>0){$(".tabs").each(function(){var $tabs=$(this);if(!$tabs.data("tab")){TabsWidget.initTabs($(this));$tabs.data("tab",true);}});$("a[href^='#']:not(.tab-nav a):not(.coolBar a)").off("click.tabsWidget").on("click.tabsWidget",function(e){var href=$(this).attr("href");if($(href).closest(".tab-nav").length)return;var target=$(href);var pane=target.closest(".tab-pane");if(!pane.length)return;$(".tab-nav [href='#"+pane.attr("id")+"']").click();var anchor=target.offset().top;var layoutTabs=target.closest(".layout-tabs");if(layoutTabs.length){var tabTop=target.closest(".layout-tabs").offset().top;if(anchor-tabTop<window.innerHeight/2){$('html, body').scrollTop(tabTop);}else{$('html, body').scrollTop(anchor);}}else{if(target.is(':visible')===!target.is(':hidden'))
$('html, body').scrollTop(anchor);}
e.preventDefault();});$(document).on("click",".tab-nav .active > a",function(e){e.preventDefault();});$("li[role='tab']").each(function(){if($(this).hasClass('active')){$(this).attr("aria-selected","true");}else{$(this).attr("aria-selected","false");}});$(".accordion-heading").off("click");$(".accordion-heading").on("click",function(){if($(this).hasClass("active"))
$(this).removeClass("active");else{$(this).parent('.tab-pane').children(".accordion-heading.active").removeClass("active");$(this).addClass("active");}});var hashCode=location.href.split('#')[1];if(hashCode){try{var targetTag=$('a[href="#'+hashCode+'"]');if(targetTag.length>0){targetTag.click();}else{var nodeToShow=$("#"+hashCode);if(nodeToShow.length>0){var tabPane=nodeToShow.parents(".tab-pane");if(tabPane.length>0){var id=tabPane.attr("id");targetTag=$('a[href="#'+id+'"]');if(targetTag.length>0){targetTag.click();}}}}}catch(ex){}}}},initTabs:function($tabs){$tabs.find(".tab-nav li a").off("click.tabsWidget").on("click.tabsWidget",TabsWidget.tabClicked);var $menuTabs=$tabs.closest(".menu-tabs");if($menuTabs.length!==0){$(document).click(function(event){if($(event.target).parents().index($menuTabs)==-1){$menuTabs.children(".tab-nav").children().removeClass("active");$menuTabs.children(".tab-content").children(".tab-pane").removeClass("active");}})}else{var $activeTab=[];var $activePane=$tabs.find(".tab-content .activeWidget").closest('.tab-pane');if($activePane.length!=0){var tabId=$activePane.get(0).id;$activeTab=$tabs.find('.tab-nav li a[href="#'+tabId+'"]').closest('li');}
if($activeTab.length==0){$activeTab=$tabs.find(".tab-nav li.active");if($activeTab.length==0){$activeTab=$tabs.find(".tab-nav li").first();}}
$activeTab.children("a").click();}},tabClicked:function(event){var $tabModule=$(this).closest(".tabs");var href=$(this).attr("href")||"";if(href.indexOf("#")==0){var isEmpty=$(this).hasClass("tab-has-no-content");if(!isEmpty){$tabModule.children(".tab-nav").children().removeClass("active");$tabModule.children(".tab-content").children(".tab-pane").removeClass("active");$tabModule.children(".tab-nav").find("li[aria-selected='true']").attr({"aria-selected":"false"});$tabModule.children(".accordion-heading.active").removeClass("active");$(this).closest("li").attr({"aria-selected":"true"}).addClass("active");$(this).closest("li").siblings("li").find("a").not(".tab-ext-link").attr({"aria-selected":"false","aria-expanded":"false"});$(href).addClass("active");$(href).find(".accordion-heading").addClass("active");}
event.preventDefault();}
if($tabModule.hasClass("lazy-tabs-widget")){if($(this).closest("li").hasClass("loaded")||(event.originalEvent===undefined)){return;}
var selectedTabIndex=$(this).closest("li").prevAll().length;var $tab=$($tabModule.find(".tab-pane").get(selectedTabIndex));var $form=$tabModule.children(".tabContextData");var data={};$form.find(':input').each(function(){data[$(this).attr('name')]=$(this).val();});data['tabId']=$tab.attr('data-pb-dropzone');$tab.html('');$tab.addClass("loading");renderTabContent(data,$tab,$tabModule.closest(".layout-tabs"));$(this).parent().addClass("loaded");}
$.event.trigger("TabsWidgetChangedTab");}};$(document).ready(TabsWidget.init);$(document).on("reloadTabsWidget",function(){TabsWidget.init;});if(window.PB&&window.PB.$){window.PB.$(document.documentElement).on("WidgetReinit.layout-tabs",function(){try{TabsWidget.init()}catch(ex){if(console&&console.log){console.log("Error reinitializing tabs",ex);}}});}})(jQuery);function renderTabContent(data,$target,$widget){$widget.pbAjax({type:'GET',url:'/pb/widgets/lazyTabs/loadTab',dataType:'html',async:'false',data:data,success:function(data){renderDynamicContent(data,$target);}});}
function renderDynamicContent(data,$tab){$tab.removeClass("loading");$tab.html(data);$.event.trigger("reloadTabsWidget");};
(function($){var CarouselWidget={init:function(){try{CarouselWidget.checkForNewElements();}catch(ex){}},checkForNewElements:function(){$(".carousel").each(function(){var $C=$(this);if(!$C.data("initialized")||insideTab){$C.data("initialized",true);var carouselOption={width:"variable"};carouselOption.items=$C.data("visibleitems")||2;var auto=carouselOption.auto={play:false};if($C.data("autoplay")){auto.play=true;auto.timeoutDuration=$C.data("delay")||3000;auto.button='.play';}
if($C.data("positioncontrol")=="Bookend"){carouselOption.next=$C.find(".next");carouselOption.prev=$C.find(".prev");}else{carouselOption.next=$C.find(".overlayNext");carouselOption.prev=$C.find(".overlayPrev");if($C.data("pageindicator")){carouselOption.pagination=$C.find(".pagination");}
$C.find(".overlayNav").removeClass("overlay-left overlay-right overlay-center overlay-top overlay-bottom").addClass("overlay-"+$C.data("positioncontrolhorizontalalignment")).addClass("overlay-"+$C.data("positioncontrolverticalalignment"));$C.find(".overlayNav").css("display",'block');}
carouselOption.scroll=1200;$C.find(".items").carouFredSel(carouselOption);if($C.data("positioncontrol")=="Overlay"){if($C.find(".overlayNav").hasClass("overlay-center")){var w=$C.find(".overlayNav").width();$C.find(".overlayNav").css("margin-left",-1*w/2);}
var cW=$C.find(".items :first-child").width();}else{var h=$C.find(".items").height();$C.find(".next").css("line-height",h+"px");$C.find(".prev").css("line-height",h+"px");}}});}};var insideTab=false;$(document).ready(function(){var loadables=$(".carousel *[src]");if(loadables.length){var total=loadables.length;function onLoaded(){total--;if(total==0){CarouselWidget.init();}}
loadables.load(onLoaded);loadables.error(onLoaded);setTimeout(CarouselWidget.init,500);}else{CarouselWidget.init();}
$(".carousel .next").on('focus',function(){$(window).keydown(function(e){if((e.which===13)||(e.which===32)){$(".carousel .next").click();}});});$(".carousel .prev").on('focus',function(){$(window).keydown(function(e){if((e.which===13)||(e.which===32)){$(".carousel .prev").click();}});});$(document).on('TabsWidgetChangedTab',function(){if($('.carousel').closest('div.lazyTab').length==0){insideTab=true;CarouselWidget.init();}});});if(window.PB&&window.PB.$){window.PB.$(document.documentElement).on("WidgetReinit.layout-carousel-dropzones",CarouselWidget.init);}})(jQuery);
(function($){function init(){$('.slideshowWidget').each(function(){var $slideshow=$(this);makeDirectNav($slideshow);enablePrevNext($slideshow);enableAnimation($slideshow);pauseAnimation($slideshow);bindTouchEvents($slideshow);var $img=$(this).find("img");$img.one("load",function(){responsiveSlideShowResize();}).each(function(){if(this.complete)
$(this).load();});setTimeout(function(){exposeDelayedContent($slideshow);},0);});}
function exposeDelayedContent($context){$context.find('noscript').each(function(){var $n=$(this);var t=$n.text()||$n.attr('alt');if(t.indexOf('<')==-1)t=$('<div />').html(t).text();$n.after(t);}).remove();}
function activateSlide($slideshow,$slide){if($slide.hasClass('active'))return;if($slideshow.hasClass('pause'))return;var $currentSlide=$slideshow.find('li.active');$currentSlide.removeClass('active');var newSlideNum=$slide.attr('data-relatedSlide');var newSlideClass="slide"+newSlideNum;var $newSlide=$slideshow.find('.'+newSlideClass);exposeDelayedContent($newSlide);if($slideshow.hasClass("animate-fade")){$slideshow.find('div.slide:visible').stop(true,true).fadeOut(500);$newSlide.stop(true,true).fadeIn(500);populateCaption($slideshow,$newSlide);}
else if($slideshow.hasClass("animate-slide")){var slideLeft=$newSlide.position().left;$('.slides').animate({left:-slideLeft},{duration:300,easing:"linear"});populateCaption($slideshow,$newSlide);$(window).resize(function(){var slideLeft=$newSlide.position().left;$('.slides').css({left:-slideLeft});});}
else{$slideshow.find('div.slide:visible').hide();$($newSlide).show();populateCaption($slideshow,$newSlide);}
$slide.addClass('active');}
function makeDirectNav($slideshow){var numSlides=$slideshow.find('.slide').length;var $navIndicator=$slideshow.find('ul.navIndicator');$navIndicator.empty();for(var n=1;n<numSlides+1;n++){var navElement=createNavigationElement(n);navElement.appendTo($navIndicator);}
$navIndicator.find('li').off().bind('click keypress',function(e){var eType=e.type;if(eType=='click'||(eType=='keypress'&&e.which==13)){if($slideshow.hasClass('pause'))return;disableAnimation($slideshow);activateSlide($slideshow,$(this));}});}
function previousSlide($slideshow){var $currentSlide=$slideshow.find('.navIndicator li.active');var $prev=$currentSlide.prev();if($prev.length>0){$currentSlide=$prev;}else{$currentSlide=$slideshow.find(".navIndicator li").last();}
activateSlide($slideshow,$currentSlide);}
function nextSlide($slideshow){var $currentSlide=$slideshow.find('.navIndicator li.active');var $next=$currentSlide.next();if($next.length>0){$currentSlide=$next;}else{$currentSlide=$slideshow.find(".navIndicator li").first();}
activateSlide($slideshow,$currentSlide);}
function enablePrevNext($slideshow){$('.slideNav',$slideshow).show();$slideshow.find('.previousSlide').off().click(function(){if($slideshow.hasClass('pause'))return;previousSlide($slideshow);});$slideshow.find('.nextSlide').off().click(function(){if($slideshow.hasClass('pause'))return;nextSlide($slideshow);})}
function enableAnimation($slideshow){var autoplay=$slideshow.data('autoplay');if(autoplay){clearInterval(autoplay);}
var autoplayTime=$('.autoplayTime',$slideshow).val();if(autoplayTime){exposeDelayedContent($slideshow);autoplayTime=autoplayTime*1000;function nextSlideFunc(){var attached=$slideshow.closest('body').length;if(!attached){disableAnimation($slideshow);return;}
nextSlide($slideshow);}
autoplay=window.setInterval(nextSlideFunc,autoplayTime);$slideshow.data('autoplay',autoplay);$slideshow.off().bind({mouseenter:function(){clearInterval(autoplay);},mouseleave:function(){enableAnimation($slideshow);}});}}
function pauseAnimation($slideShow){var pauseBtn=$($slideShow).find('.playSlide');if(pauseBtn.length>0){pauseBtn.on('click keypress',function(e){var eType=e.type;if(eType=='click'||(eType=='keypress'&&e.which==13)){$slideShow.toggleClass('pause');pauseBtn.toggleClass('pauseSlide');}});}}
function disableAnimation($slideshow){var autoplay=$slideshow.data('autoplay');if(autoplay){$('.autoplayTime',$slideshow).remove();clearInterval(autoplay);}}
function populateCaption($slideshow,$slide){var $slideshowCaption=$slideshow.find('div.slideshowCaption');var caption=$slide.find('div.slideCaption').html()||"";$slideshowCaption.html(caption);}
function bindTouchEvents($slideshow){var holder=$slideshow.find(".slidePort"),touchstartx=undefined,touchmovex=undefined,movex,longTouch=undefined,slideWidth=holder.width(),touchstarty=undefined,touchmovey=undefined;holder.on("touchstart",function(event){touchStart(event);});holder.on("touchmove",function(event){touchMove(event);});holder.on("touchend",function(event){touchEnd(event);});function touchStart(event){longTouch=false;setTimeout(function(){longTouch=true;},250);touchstartx=event.originalEvent.touches[0].pageX;touchstarty=event.originalEvent.touches[0].pageY;movex=undefined;}
function touchMove(event){touchmovex=event.originalEvent.touches[0].pageX;touchmovey=event.originalEvent.touches[0].pageY;movex=slideWidth+(touchstartx-touchmovex);}
function touchEnd(event){if(movex!=undefined){var absMovex=Math.abs(slideWidth-movex);var absMovey=Math.abs(touchmovey-touchstarty);if(!(absMovey>absMovex)){if(absMovex>slideWidth/4||longTouch===false){if(touchmovex>touchstartx){previousSlide($slideshow);}else{nextSlide($slideshow);}}}}}}
function createNavigationElement(index){var elem=$('<li role="button" tabindex="0"/>');elem.attr('aria-describedby','offscreen'+index);elem.attr('data-relatedSlide',index);if(parseInt(index)==1){elem.attr('class','active');}
var descriptionHeader=$('<label class="off-screen"/>');descriptionHeader.attr('id','offscreen'+index);descriptionHeader.html('show Slide '+index);var descriptionSpan=$('<span />');descriptionSpan.html(index);descriptionHeader.appendTo(elem);descriptionSpan.appendTo(elem);return elem;}
$(document).ready(init);if(window.PB&&window.PB.$){window.PB.$(document.documentElement).on("WidgetReinit.genericSlideshow WidgetReinit.imageSlideshow",init);}
$(window).resize(function(){responsiveSlideShowResize();});function responsiveSlideShowResize(){$('.slideshowWidget.res-slider .slidePort .slide').each(function(){if($(this).height()!=0){$(this).closest('.slidePort').css('min-height',$(this).height());}});}})(jQuery);
(function($){function init(){var $fragmentNavigation=$('.fragmentNavigationContent');var $fragmentNavigationWrapper=$(".fragment-navigation");if($fragmentNavigation){$fragmentNavigation.each(function(index,element){$(element).empty();var className=element.getAttribute("data-pb-class-name")?element.getAttribute("data-pb-class-name"):"fragmentNavigationMarker";var fragmentsByClass=document.getElementsByClassName(className);var list=document.createElement("ul");var textCategory;if(fragmentsByClass.length<1){$fragmentNavigationWrapper.hide();}
for(var i=0;i<fragmentsByClass.length;i++){var fragment=fragmentsByClass[i];if(!($(fragment).parent(".about-this").length)){var id=fragment.id;if(!id){id="fragmentNav_"+i;fragment.setAttribute("id",id);}
var text=fragment.getAttribute("data-pb-title");if(!text){if(document.body.innerText){text=fragment.innerText.length?fragment.innerText:null;}else{var regFragment=fragment.innerHTML;regFragment=regFragment.replace(/(&nbsp;|<([^>]+)>)/ig,"\n").replace(/(&lt;([^&gt;]+)&gt;)/gi,"").replace(/\n\s*\n/g,'\n');text=regFragment.length?regFragment:null;}
if(text){text=text.trim();var link,listItem,sublist,sublistItem;if(!(text.split('\n')[1])){text=text.split('\n')[0];link=document.createElement("a");link.setAttribute("href","#"+id);link.setAttribute("onclick","EscapeDrawer()");link.innerHTML=text;listItem=document.createElement("li");listItem.setAttribute("class","fragmentList");listItem.appendChild(link);}else{text=text.split('\n')[0];if(textCategory!=text){textCategory=text.split('\n')[0];link=document.createElement("a");link.setAttribute("href","#"+id);link.setAttribute("class","fragmentList_expand expander");link.innerHTML=text;listItem=document.createElement("li");listItem.setAttribute("class","fragmentList");listItem.appendChild(link);sublist=document.createElement("ul");sublist.setAttribute("class","hidden");for(var ii=0;ii<fragmentsByClass.length;ii++){var subfragment=fragmentsByClass[ii];id=subfragment.id;if(!id){id="subFragmentNav_"+ii;subfragment.setAttribute("id",id);}
var subText=subfragment.getAttribute("data-pb-title");if(!subText){if(document.body.innerText){subText=subfragment.innerText.length?subfragment.innerText:i;}else{var regSubfragment=subfragment.innerHTML;regSubfragment=regSubfragment.replace(/(&nbsp;|<([^>]+)>)/ig,"\n").replace(/(&lt;([^&gt;]+)&gt;)/gi,"").replace(/\n\s*\n/g,'\n');subText=regSubfragment.length?regSubfragment:i;}
if(subText)
subText=subText.trim();if((subText.split('\n')[0])==(text.split('\n')[0])&&(subText.split('\n')[1])){subText=subText.split('\n')[1];link=document.createElement("a");link.setAttribute("href","#"+id);link.innerHTML=subText;sublistItem=document.createElement("li");sublistItem.setAttribute("class","fragmentSubList");sublistItem.appendChild(link);sublist.appendChild(sublistItem);listItem.appendChild(sublist);}}}}}
list.appendChild(listItem);}}}}
element.appendChild(list);});}}
$(document).ready(init);})(jQuery);function EscapeDrawer(){if($(window).width()<992){$(".fragment-navigation").parents(".toc-right-column").slideUp(300);$(".is-sticky-fixed").css("visibility","hidden");$(".is-sticky-fixed").css("top","0px");}};
$(document).ready(function(){$(".addthis_toolbox").attr("addthis:url",window.location.href.replace("(","%28").replace(")","%29"));});
(function($){$.fn.pbAjax=function(args){var widgetId=$(this).attr('widget-id');if(!widgetId){widgetId=$(this).data('widget-id');}
if(!widgetId){widgetId=$(this).attr('id');}
var pbContext=$("[name='pbContext']").attr('content');if((widgetId!==null)&&(widgetId!=="undefined")){var data=args['data']?args['data']:{};data['pbContext']=pbContext;data['widgetId']=widgetId;var targetUrl=args['url'];var requestMethod=args.hasOwnProperty('type')?args['type']:'GET';var requestDataType=args.hasOwnProperty('dataType')?args['dataType']:'html';var asyncRequest=args.hasOwnProperty('async')?args['async']:true;var successFunction=args['success'];var failFunction=args['error'];return $.ajax({type:requestMethod,dataType:requestDataType,async:asyncRequest,url:targetUrl,data:data,success:successFunction,error:failFunction});}
else{console.log("widgetId not found");}};})(jQuery);/*! jQuery UI - v1.10.2 - 2013-03-14
* http://jqueryui.com
* Copyright 2013 jQuery Foundation and other contributors; Licensed MIT */
(function(t,e){var i="ui-effects-";t.effects={effect:{}},function(t,e){function i(t,e,i){var s=u[e.type]||{};return null==t?i||!e.def?null:e.def:(t=s.floor?~~t:parseFloat(t),isNaN(t)?e.def:s.mod?(t+s.mod)%s.mod:0>t?0:t>s.max?s.max:t)}function s(i){var s=l(),n=s._rgba=[];return i=i.toLowerCase(),f(h,function(t,a){var o,r=a.re.exec(i),h=r&&a.parse(r),l=a.space||"rgba";return h?(o=s[l](h),s[c[l].cache]=o[c[l].cache],n=s._rgba=o._rgba,!1):e}),n.length?("0,0,0,0"===n.join()&&t.extend(n,a.transparent),s):a[i]}function n(t,e,i){return i=(i+1)%1,1>6*i?t+6*(e-t)*i:1>2*i?e:2>3*i?t+6*(e-t)*(2/3-i):t}var a,o="backgroundColor borderBottomColor borderLeftColor borderRightColor borderTopColor color columnRuleColor outlineColor textDecorationColor textEmphasisColor",r=/^([\-+])=\s*(\d+\.?\d*)/,h=[{re:/rgba?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,parse:function(t){return[t[1],t[2],t[3],t[4]]}},{re:/rgba?\(\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,parse:function(t){return[2.55*t[1],2.55*t[2],2.55*t[3],t[4]]}},{re:/#([a-f0-9]{2})([a-f0-9]{2})([a-f0-9]{2})/,parse:function(t){return[parseInt(t[1],16),parseInt(t[2],16),parseInt(t[3],16)]}},{re:/#([a-f0-9])([a-f0-9])([a-f0-9])/,parse:function(t){return[parseInt(t[1]+t[1],16),parseInt(t[2]+t[2],16),parseInt(t[3]+t[3],16)]}},{re:/hsla?\(\s*(\d+(?:\.\d+)?)\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,space:"hsla",parse:function(t){return[t[1],t[2]/100,t[3]/100,t[4]]}}],l=t.Color=function(e,i,s,n){return new t.Color.fn.parse(e,i,s,n)},c={rgba:{props:{red:{idx:0,type:"byte"},green:{idx:1,type:"byte"},blue:{idx:2,type:"byte"}}},hsla:{props:{hue:{idx:0,type:"degrees"},saturation:{idx:1,type:"percent"},lightness:{idx:2,type:"percent"}}}},u={"byte":{floor:!0,max:255},percent:{max:1},degrees:{mod:360,floor:!0}},d=l.support={},p=t("<p>")[0],f=t.each;p.style.cssText="background-color:rgba(1,1,1,.5)",d.rgba=p.style.backgroundColor.indexOf("rgba")>-1,f(c,function(t,e){e.cache="_"+t,e.props.alpha={idx:3,type:"percent",def:1}}),l.fn=t.extend(l.prototype,{parse:function(n,o,r,h){if(n===e)return this._rgba=[null,null,null,null],this;(n.jquery||n.nodeType)&&(n=t(n).css(o),o=e);var u=this,d=t.type(n),p=this._rgba=[];return o!==e&&(n=[n,o,r,h],d="array"),"string"===d?this.parse(s(n)||a._default):"array"===d?(f(c.rgba.props,function(t,e){p[e.idx]=i(n[e.idx],e)}),this):"object"===d?(n instanceof l?f(c,function(t,e){n[e.cache]&&(u[e.cache]=n[e.cache].slice())}):f(c,function(e,s){var a=s.cache;f(s.props,function(t,e){if(!u[a]&&s.to){if("alpha"===t||null==n[t])return;u[a]=s.to(u._rgba)}u[a][e.idx]=i(n[t],e,!0)}),u[a]&&0>t.inArray(null,u[a].slice(0,3))&&(u[a][3]=1,s.from&&(u._rgba=s.from(u[a])))}),this):e},is:function(t){var i=l(t),s=!0,n=this;return f(c,function(t,a){var o,r=i[a.cache];return r&&(o=n[a.cache]||a.to&&a.to(n._rgba)||[],f(a.props,function(t,i){return null!=r[i.idx]?s=r[i.idx]===o[i.idx]:e})),s}),s},_space:function(){var t=[],e=this;return f(c,function(i,s){e[s.cache]&&t.push(i)}),t.pop()},transition:function(t,e){var s=l(t),n=s._space(),a=c[n],o=0===this.alpha()?l("transparent"):this,r=o[a.cache]||a.to(o._rgba),h=r.slice();return s=s[a.cache],f(a.props,function(t,n){var a=n.idx,o=r[a],l=s[a],c=u[n.type]||{};null!==l&&(null===o?h[a]=l:(c.mod&&(l-o>c.mod/2?o+=c.mod:o-l>c.mod/2&&(o-=c.mod)),h[a]=i((l-o)*e+o,n)))}),this[n](h)},blend:function(e){if(1===this._rgba[3])return this;var i=this._rgba.slice(),s=i.pop(),n=l(e)._rgba;return l(t.map(i,function(t,e){return(1-s)*n[e]+s*t}))},toRgbaString:function(){var e="rgba(",i=t.map(this._rgba,function(t,e){return null==t?e>2?1:0:t});return 1===i[3]&&(i.pop(),e="rgb("),e+i.join()+")"},toHslaString:function(){var e="hsla(",i=t.map(this.hsla(),function(t,e){return null==t&&(t=e>2?1:0),e&&3>e&&(t=Math.round(100*t)+"%"),t});return 1===i[3]&&(i.pop(),e="hsl("),e+i.join()+")"},toHexString:function(e){var i=this._rgba.slice(),s=i.pop();return e&&i.push(~~(255*s)),"#"+t.map(i,function(t){return t=(t||0).toString(16),1===t.length?"0"+t:t}).join("")},toString:function(){return 0===this._rgba[3]?"transparent":this.toRgbaString()}}),l.fn.parse.prototype=l.fn,c.hsla.to=function(t){if(null==t[0]||null==t[1]||null==t[2])return[null,null,null,t[3]];var e,i,s=t[0]/255,n=t[1]/255,a=t[2]/255,o=t[3],r=Math.max(s,n,a),h=Math.min(s,n,a),l=r-h,c=r+h,u=.5*c;return e=h===r?0:s===r?60*(n-a)/l+360:n===r?60*(a-s)/l+120:60*(s-n)/l+240,i=0===l?0:.5>=u?l/c:l/(2-c),[Math.round(e)%360,i,u,null==o?1:o]},c.hsla.from=function(t){if(null==t[0]||null==t[1]||null==t[2])return[null,null,null,t[3]];var e=t[0]/360,i=t[1],s=t[2],a=t[3],o=.5>=s?s*(1+i):s+i-s*i,r=2*s-o;return[Math.round(255*n(r,o,e+1/3)),Math.round(255*n(r,o,e)),Math.round(255*n(r,o,e-1/3)),a]},f(c,function(s,n){var a=n.props,o=n.cache,h=n.to,c=n.from;l.fn[s]=function(s){if(h&&!this[o]&&(this[o]=h(this._rgba)),s===e)return this[o].slice();var n,r=t.type(s),u="array"===r||"object"===r?s:arguments,d=this[o].slice();return f(a,function(t,e){var s=u["object"===r?t:e.idx];null==s&&(s=d[e.idx]),d[e.idx]=i(s,e)}),c?(n=l(c(d)),n[o]=d,n):l(d)},f(a,function(e,i){l.fn[e]||(l.fn[e]=function(n){var a,o=t.type(n),h="alpha"===e?this._hsla?"hsla":"rgba":s,l=this[h](),c=l[i.idx];return"undefined"===o?c:("function"===o&&(n=n.call(this,c),o=t.type(n)),null==n&&i.empty?this:("string"===o&&(a=r.exec(n),a&&(n=c+parseFloat(a[2])*("+"===a[1]?1:-1))),l[i.idx]=n,this[h](l)))})})}),l.hook=function(e){var i=e.split(" ");f(i,function(e,i){t.cssHooks[i]={set:function(e,n){var a,o,r="";if("transparent"!==n&&("string"!==t.type(n)||(a=s(n)))){if(n=l(a||n),!d.rgba&&1!==n._rgba[3]){for(o="backgroundColor"===i?e.parentNode:e;(""===r||"transparent"===r)&&o&&o.style;)try{r=t.css(o,"backgroundColor"),o=o.parentNode}catch(h){}n=n.blend(r&&"transparent"!==r?r:"_default")}n=n.toRgbaString()}try{e.style[i]=n}catch(h){}}},t.fx.step[i]=function(e){e.colorInit||(e.start=l(e.elem,i),e.end=l(e.end),e.colorInit=!0),t.cssHooks[i].set(e.elem,e.start.transition(e.end,e.pos))}})},l.hook(o),t.cssHooks.borderColor={expand:function(t){var e={};return f(["Top","Right","Bottom","Left"],function(i,s){e["border"+s+"Color"]=t}),e}},a=t.Color.names={aqua:"#00ffff",black:"#000000",blue:"#0000ff",fuchsia:"#ff00ff",gray:"#808080",green:"#008000",lime:"#00ff00",maroon:"#800000",navy:"#000080",olive:"#808000",purple:"#800080",red:"#ff0000",silver:"#c0c0c0",teal:"#008080",white:"#ffffff",yellow:"#ffff00",transparent:[null,null,null,0],_default:"#ffffff"}}(jQuery),function(){function i(e){var i,s,n=e.ownerDocument.defaultView?e.ownerDocument.defaultView.getComputedStyle(e,null):e.currentStyle,a={};if(n&&n.length&&n[0]&&n[n[0]])for(s=n.length;s--;)i=n[s],"string"==typeof n[i]&&(a[t.camelCase(i)]=n[i]);else for(i in n)"string"==typeof n[i]&&(a[i]=n[i]);return a}function s(e,i){var s,n,o={};for(s in i)n=i[s],e[s]!==n&&(a[s]||(t.fx.step[s]||!isNaN(parseFloat(n)))&&(o[s]=n));return o}var n=["add","remove","toggle"],a={border:1,borderBottom:1,borderColor:1,borderLeft:1,borderRight:1,borderTop:1,borderWidth:1,margin:1,padding:1};t.each(["borderLeftStyle","borderRightStyle","borderBottomStyle","borderTopStyle"],function(e,i){t.fx.step[i]=function(t){("none"!==t.end&&!t.setAttr||1===t.pos&&!t.setAttr)&&(jQuery.style(t.elem,i,t.end),t.setAttr=!0)}}),t.fn.addBack||(t.fn.addBack=function(t){return this.add(null==t?this.prevObject:this.prevObject.filter(t))}),t.effects.animateClass=function(e,a,o,r){var h=t.speed(a,o,r);return this.queue(function(){var a,o=t(this),r=o.attr("class")||"",l=h.children?o.find("*").addBack():o;l=l.map(function(){var e=t(this);return{el:e,start:i(this)}}),a=function(){t.each(n,function(t,i){e[i]&&o[i+"Class"](e[i])})},a(),l=l.map(function(){return this.end=i(this.el[0]),this.diff=s(this.start,this.end),this}),o.attr("class",r),l=l.map(function(){var e=this,i=t.Deferred(),s=t.extend({},h,{queue:!1,complete:function(){i.resolve(e)}});return this.el.animate(this.diff,s),i.promise()}),t.when.apply(t,l.get()).done(function(){a(),t.each(arguments,function(){var e=this.el;t.each(this.diff,function(t){e.css(t,"")})}),h.complete.call(o[0])})})},t.fn.extend({addClass:function(e){return function(i,s,n,a){return s?t.effects.animateClass.call(this,{add:i},s,n,a):e.apply(this,arguments)}}(t.fn.addClass),removeClass:function(e){return function(i,s,n,a){return arguments.length>1?t.effects.animateClass.call(this,{remove:i},s,n,a):e.apply(this,arguments)}}(t.fn.removeClass),toggleClass:function(i){return function(s,n,a,o,r){return"boolean"==typeof n||n===e?a?t.effects.animateClass.call(this,n?{add:s}:{remove:s},a,o,r):i.apply(this,arguments):t.effects.animateClass.call(this,{toggle:s},n,a,o)}}(t.fn.toggleClass),switchClass:function(e,i,s,n,a){return t.effects.animateClass.call(this,{add:i,remove:e},s,n,a)}})}(),function(){function s(e,i,s,n){return t.isPlainObject(e)&&(i=e,e=e.effect),e={effect:e},null==i&&(i={}),t.isFunction(i)&&(n=i,s=null,i={}),("number"==typeof i||t.fx.speeds[i])&&(n=s,s=i,i={}),t.isFunction(s)&&(n=s,s=null),i&&t.extend(e,i),s=s||i.duration,e.duration=t.fx.off?0:"number"==typeof s?s:s in t.fx.speeds?t.fx.speeds[s]:t.fx.speeds._default,e.complete=n||i.complete,e}function n(e){return!e||"number"==typeof e||t.fx.speeds[e]?!0:"string"!=typeof e||t.effects.effect[e]?t.isFunction(e)?!0:"object"!=typeof e||e.effect?!1:!0:!0}t.extend(t.effects,{version:"1.10.2",save:function(t,e){for(var s=0;e.length>s;s++)null!==e[s]&&t.data(i+e[s],t[0].style[e[s]])},restore:function(t,s){var n,a;for(a=0;s.length>a;a++)null!==s[a]&&(n=t.data(i+s[a]),n===e&&(n=""),t.css(s[a],n))},setMode:function(t,e){return"toggle"===e&&(e=t.is(":hidden")?"show":"hide"),e},getBaseline:function(t,e){var i,s;switch(t[0]){case"top":i=0;break;case"middle":i=.5;break;case"bottom":i=1;break;default:i=t[0]/e.height}switch(t[1]){case"left":s=0;break;case"center":s=.5;break;case"right":s=1;break;default:s=t[1]/e.width}return{x:s,y:i}},createWrapper:function(e){if(e.parent().is(".ui-effects-wrapper"))return e.parent();var i={width:e.outerWidth(!0),height:e.outerHeight(!0),"float":e.css("float")},s=t("<div></div>").addClass("ui-effects-wrapper").css({fontSize:"100%",background:"transparent",border:"none",margin:0,padding:0}),n={width:e.width(),height:e.height()},a=document.activeElement;try{a.id}catch(o){a=document.body}return e.wrap(s),(e[0]===a||t.contains(e[0],a))&&t(a).focus(),s=e.parent(),"static"===e.css("position")?(s.css({position:"relative"}),e.css({position:"relative"})):(t.extend(i,{position:e.css("position"),zIndex:e.css("z-index")}),t.each(["top","left","bottom","right"],function(t,s){i[s]=e.css(s),isNaN(parseInt(i[s],10))&&(i[s]="auto")}),e.css({position:"relative",top:0,left:0,right:"auto",bottom:"auto"})),e.css(n),s.css(i).show()},removeWrapper:function(e){var i=document.activeElement;return e.parent().is(".ui-effects-wrapper")&&(e.parent().replaceWith(e),(e[0]===i||t.contains(e[0],i))&&t(i).focus()),e},setTransition:function(e,i,s,n){return n=n||{},t.each(i,function(t,i){var a=e.cssUnit(i);a[0]>0&&(n[i]=a[0]*s+a[1])}),n}}),t.fn.extend({effect:function(){function e(e){function s(){t.isFunction(a)&&a.call(n[0]),t.isFunction(e)&&e()}var n=t(this),a=i.complete,r=i.mode;(n.is(":hidden")?"hide"===r:"show"===r)?(n[r](),s()):o.call(n[0],i,s)}var i=s.apply(this,arguments),n=i.mode,a=i.queue,o=t.effects.effect[i.effect];return t.fx.off||!o?n?this[n](i.duration,i.complete):this.each(function(){i.complete&&i.complete.call(this)}):a===!1?this.each(e):this.queue(a||"fx",e)},show:function(t){return function(e){if(n(e))return t.apply(this,arguments);var i=s.apply(this,arguments);return i.mode="show",this.effect.call(this,i)}}(t.fn.show),hide:function(t){return function(e){if(n(e))return t.apply(this,arguments);var i=s.apply(this,arguments);return i.mode="hide",this.effect.call(this,i)}}(t.fn.hide),toggle:function(t){return function(e){if(n(e)||"boolean"==typeof e)return t.apply(this,arguments);var i=s.apply(this,arguments);return i.mode="toggle",this.effect.call(this,i)}}(t.fn.toggle),cssUnit:function(e){var i=this.css(e),s=[];return t.each(["em","px","%","pt"],function(t,e){i.indexOf(e)>0&&(s=[parseFloat(i),e])}),s}})}(),function(){var e={};t.each(["Quad","Cubic","Quart","Quint","Expo"],function(t,i){e[i]=function(e){return Math.pow(e,t+2)}}),t.extend(e,{Sine:function(t){return 1-Math.cos(t*Math.PI/2)},Circ:function(t){return 1-Math.sqrt(1-t*t)},Elastic:function(t){return 0===t||1===t?t:-Math.pow(2,8*(t-1))*Math.sin((80*(t-1)-7.5)*Math.PI/15)},Back:function(t){return t*t*(3*t-2)},Bounce:function(t){for(var e,i=4;((e=Math.pow(2,--i))-1)/11>t;);return 1/Math.pow(4,3-i)-7.5625*Math.pow((3*e-2)/22-t,2)}}),t.each(e,function(e,i){t.easing["easeIn"+e]=i,t.easing["easeOut"+e]=function(t){return 1-i(1-t)},t.easing["easeInOut"+e]=function(t){return.5>t?i(2*t)/2:1-i(-2*t+2)/2}})}()})(jQuery);/*! jQuery UI - v1.10.2 - 2013-03-14
* http://jqueryui.com
* Copyright 2013 jQuery Foundation and other contributors; Licensed MIT */
(function(t){var e=0,i={},s={};i.height=i.paddingTop=i.paddingBottom=i.borderTopWidth=i.borderBottomWidth="hide",s.height=s.paddingTop=s.paddingBottom=s.borderTopWidth=s.borderBottomWidth="show",t.widget("ui.accordion",{version:"1.10.2",options:{active:0,animate:{},collapsible:!1,event:"click",header:"> li > :first-child,> :not(li):even",heightStyle:"auto",icons:{activeHeader:"ui-icon-triangle-1-s",header:"ui-icon-triangle-1-e"},activate:null,beforeActivate:null},_create:function(){var e=this.options;this.prevShow=this.prevHide=t(),this.element.addClass("ui-accordion ui-widget ui-helper-reset").attr("role","tablist"),e.collapsible||e.active!==!1&&null!=e.active||(e.active=0),this._processPanels(),0>e.active&&(e.active+=this.headers.length),this._refresh()},_getCreateEventData:function(){return{header:this.active,panel:this.active.length?this.active.next():t(),content:this.active.length?this.active.next():t()}},_createIcons:function(){var e=this.options.icons;e&&(t("<span>").addClass("ui-accordion-header-icon ui-icon "+e.header).prependTo(this.headers),this.active.children(".ui-accordion-header-icon").removeClass(e.header).addClass(e.activeHeader),this.headers.addClass("ui-accordion-icons"))},_destroyIcons:function(){this.headers.removeClass("ui-accordion-icons").children(".ui-accordion-header-icon").remove()},_destroy:function(){var t;this.element.removeClass("ui-accordion ui-widget ui-helper-reset").removeAttr("role"),this.headers.removeClass("ui-accordion-header ui-accordion-header-active ui-helper-reset ui-state-default ui-corner-all ui-state-active ui-state-disabled ui-corner-top").removeAttr("role").removeAttr("aria-selected").removeAttr("aria-controls").removeAttr("tabIndex").each(function(){/^ui-accordion/.test(this.id)&&this.removeAttribute("id")}),this._destroyIcons(),t=this.headers.next().css("display","").removeAttr("role").removeAttr("aria-expanded").removeAttr("aria-hidden").removeAttr("aria-labelledby").removeClass("ui-helper-reset ui-widget-content ui-corner-bottom ui-accordion-content ui-accordion-content-active ui-state-disabled").each(function(){/^ui-accordion/.test(this.id)&&this.removeAttribute("id")}),"content"!==this.options.heightStyle&&t.css("height","")},_setOption:function(t,e){return"active"===t?(this._activate(e),undefined):("event"===t&&(this.options.event&&this._off(this.headers,this.options.event),this._setupEvents(e)),this._super(t,e),"collapsible"!==t||e||this.options.active!==!1||this._activate(0),"icons"===t&&(this._destroyIcons(),e&&this._createIcons()),"disabled"===t&&this.headers.add(this.headers.next()).toggleClass("ui-state-disabled",!!e),undefined)},_keydown:function(e){if(!e.altKey&&!e.ctrlKey){var i=t.ui.keyCode,s=this.headers.length,n=this.headers.index(e.target),a=!1;switch(e.keyCode){case i.RIGHT:case i.DOWN:a=this.headers[(n+1)%s];break;case i.LEFT:case i.UP:a=this.headers[(n-1+s)%s];break;case i.SPACE:case i.ENTER:this._eventHandler(e);break;case i.HOME:a=this.headers[0];break;case i.END:a=this.headers[s-1]}a&&(t(e.target).attr("tabIndex",-1),t(a).attr("tabIndex",0),a.focus(),e.preventDefault())}},_panelKeyDown:function(e){e.keyCode===t.ui.keyCode.UP&&e.ctrlKey&&t(e.currentTarget).prev().focus()},refresh:function(){var e=this.options;this._processPanels(),(e.active===!1&&e.collapsible===!0||!this.headers.length)&&(e.active=!1,this.active=t()),e.active===!1?this._activate(0):this.active.length&&!t.contains(this.element[0],this.active[0])?this.headers.length===this.headers.find(".ui-state-disabled").length?(e.active=!1,this.active=t()):this._activate(Math.max(0,e.active-1)):e.active=this.headers.index(this.active),this._destroyIcons(),this._refresh()},_processPanels:function(){this.headers=this.element.find(this.options.header).addClass("ui-accordion-header ui-helper-reset ui-state-default ui-corner-all"),this.headers.next().addClass("ui-accordion-content ui-helper-reset ui-widget-content ui-corner-bottom").filter(":not(.ui-accordion-content-active)").hide()},_refresh:function(){var i,s=this.options,n=s.heightStyle,a=this.element.parent(),o=this.accordionId="ui-accordion-"+(this.element.attr("id")||++e);this.active=this._findActive(s.active).addClass("ui-accordion-header-active ui-state-active ui-corner-top").removeClass("ui-corner-all"),this.active.next().addClass("ui-accordion-content-active").show(),this.headers.attr("role","tab").each(function(e){var i=t(this),s=i.attr("id"),n=i.next(),a=n.attr("id");s||(s=o+"-header-"+e,i.attr("id",s)),a||(a=o+"-panel-"+e,n.attr("id",a)),i.attr("aria-controls",a),n.attr("aria-labelledby",s)}).next().attr("role","tabpanel"),this.headers.not(this.active).attr({"aria-selected":"false",tabIndex:-1}).next().attr({"aria-expanded":"false","aria-hidden":"true"}).hide(),this.active.length?this.active.attr({"aria-selected":"true",tabIndex:0}).next().attr({"aria-expanded":"true","aria-hidden":"false"}):this.headers.eq(0).attr("tabIndex",0),this._createIcons(),this._setupEvents(s.event),"fill"===n?(i=a.height(),this.element.siblings(":visible").each(function(){var e=t(this),s=e.css("position");"absolute"!==s&&"fixed"!==s&&(i-=e.outerHeight(!0))}),this.headers.each(function(){i-=t(this).outerHeight(!0)}),this.headers.next().each(function(){t(this).height(Math.max(0,i-t(this).innerHeight()+t(this).height()))}).css("overflow","auto")):"auto"===n&&(i=0,this.headers.next().each(function(){i=Math.max(i,t(this).css("height","").height())}).height(i))},_activate:function(e){var i=this._findActive(e)[0];i!==this.active[0]&&(i=i||this.active[0],this._eventHandler({target:i,currentTarget:i,preventDefault:t.noop}))},_findActive:function(e){return"number"==typeof e?this.headers.eq(e):t()},_setupEvents:function(e){var i={keydown:"_keydown"};e&&t.each(e.split(" "),function(t,e){i[e]="_eventHandler"}),this._off(this.headers.add(this.headers.next())),this._on(this.headers,i),this._on(this.headers.next(),{keydown:"_panelKeyDown"}),this._hoverable(this.headers),this._focusable(this.headers)},_eventHandler:function(e){var i=this.options,s=this.active,n=t(e.currentTarget),a=n[0]===s[0],o=a&&i.collapsible,r=o?t():n.next(),h=s.next(),l={oldHeader:s,oldPanel:h,newHeader:o?t():n,newPanel:r};e.preventDefault(),a&&!i.collapsible||this._trigger("beforeActivate",e,l)===!1||(i.active=o?!1:this.headers.index(n),this.active=a?t():n,this._toggle(l),s.removeClass("ui-accordion-header-active ui-state-active"),i.icons&&s.children(".ui-accordion-header-icon").removeClass(i.icons.activeHeader).addClass(i.icons.header),a||(n.removeClass("ui-corner-all").addClass("ui-accordion-header-active ui-state-active ui-corner-top"),i.icons&&n.children(".ui-accordion-header-icon").removeClass(i.icons.header).addClass(i.icons.activeHeader),n.next().addClass("ui-accordion-content-active")))},_toggle:function(e){var i=e.newPanel,s=this.prevShow.length?this.prevShow:e.oldPanel;this.prevShow.add(this.prevHide).stop(!0,!0),this.prevShow=i,this.prevHide=s,this.options.animate?this._animate(i,s,e):(s.hide(),i.show(),this._toggleComplete(e)),s.attr({"aria-expanded":"false","aria-hidden":"true"}),s.prev().attr("aria-selected","false"),i.length&&s.length?s.prev().attr("tabIndex",-1):i.length&&this.headers.filter(function(){return 0===t(this).attr("tabIndex")}).attr("tabIndex",-1),i.attr({"aria-expanded":"true","aria-hidden":"false"}).prev().attr({"aria-selected":"true",tabIndex:0})},_animate:function(t,e,n){var a,o,r,h=this,l=0,c=t.length&&(!e.length||t.index()<e.index()),u=this.options.animate||{},d=c&&u.down||u,p=function(){h._toggleComplete(n)};return"number"==typeof d&&(r=d),"string"==typeof d&&(o=d),o=o||d.easing||u.easing,r=r||d.duration||u.duration,e.length?t.length?(a=t.show().outerHeight(),e.animate(i,{duration:r,easing:o,step:function(t,e){e.now=Math.round(t)}}),t.hide().animate(s,{duration:r,easing:o,complete:p,step:function(t,i){i.now=Math.round(t),"height"!==i.prop?l+=i.now:"content"!==h.options.heightStyle&&(i.now=Math.round(a-e.outerHeight()-l),l=0)}}),undefined):e.animate(i,r,o,p):t.animate(s,r,o,p)},_toggleComplete:function(t){var e=t.oldPanel;e.removeClass("ui-accordion-content-active").prev().removeClass("ui-corner-top").addClass("ui-corner-all"),e.length&&(e.parent()[0].className=e.parent()[0].className),this._trigger("activate",null,t)}})})(jQuery);
$(document).ready(function($){$('#accordionWidget:not(.js__accordionWidget)').accordion({collapsible:true,heightStyle:"content",icons:null});$(".js__accordionWidget").accordion({collapsible:true,heightStyle:"content",icons:null});});
$(document).ready(function(){$(".general-rss-feed-reader").each(function(){var $resultsTarget=$(this).find('.rss-body');$(this).pbAjax({type:'GET',url:'/pb/widgets/rssWidget/loadWidget',dataType:'html',async:'false',success:function(data){$resultsTarget.html(data);}});});});
(function($){function init(){$(".transplant-target").each(function(){var $transplantTarget=$(this);var cssSelector=$transplantTarget.data("cssSelector");if(cssSelector.length>0){var $transplantSource=$(cssSelector+":not(.transplant "+cssSelector+")");if($transplantSource.length>0){var newClass=$transplantTarget.data("newClassname");var removeOriginal=$transplantTarget.data("removeOriginal");var $transplantEl=$transplantSource.clone();$transplantEl.removeClass("hide");cleanup($transplantEl);$transplantTarget.html($transplantEl);if(removeOriginal&&!$transplantTarget.data("isPbedit")){$transplantSource.addClass("hide");}else{$transplantSource.removeClass("hide");}
if(typeof(newClass)!=="undefined"&&newClass.length>0)$transplantSource.addClass(newClass);}else{if($transplantTarget.data("isPbedit")){$transplantTarget.html("<div class='transplant-error'>CSS Selector not found in the DOM</div>");}}}else{if($transplantTarget.data("isPbedit")){$transplantTarget.html("<div class='transplant-error'>No CSS Selector Defined</div>");}}})}
function cleanup($transplantEl){findAndRemoveAttr($transplantEl,"id");findAndRemoveAttr($transplantEl,"data-pb-widget");}
function findAndRemoveAttr($element,attr){$element.find("["+attr+"]").each(function(){$(this).removeAttr(attr);});}
function findAndRemoveClass($element,className){$element.find("."+className).each(function(el){$(this).removeClass(className);})}
function findAndRemoveElement($element,selector){$element.find(selector).each(function(){$(this).remove();})}
$(document).ready(init);if(window.PB&&window.PB.$){window.PB.$(document.documentElement).on("WidgetReinit.transplant",init);}})(jQuery);/*!
 * jQuery Smart Banner
 * Copyright (c) 2012 Arnold Daniels <arnold@jasny.net>
 * Based on 'jQuery Smart Web App Banner' by Kurt Zenisek @ kzeni.com
 */!function($){var SmartBanner=function(options){this.origHtmlMargin=parseFloat($('html').css('margin-top'))
this.options=$.extend({},$.smartbanner.defaults,options)
var standalone=navigator.standalone,UA=navigator.userAgent
if(this.options.force){this.type=this.options.force}else if(UA.match(/Windows Phone 8/i)!=null&&UA.match(/Touch/i)!==null){this.type='windows'}else if(UA.match(/iPhone|iPod/i)!=null||(UA.match(/iPad/)&&this.options.iOSUniversalApp)){if(UA.match(/Safari/i)!=null&&(UA.match(/CriOS/i)!=null||window.Number(UA.substr(UA.indexOf('OS ')+3,3).replace('_','.'))<6))this.type='ios'}else if(UA.match(/\bSilk\/(.*\bMobile Safari\b)?/)||UA.match(/\bKF\w/)||UA.match('Kindle Fire')){this.type='kindle'}else if(UA.match(/Android/i)!=null){this.type='android'}
if(!this.type||standalone||this.getCookie('sb-closed')||this.getCookie('sb-installed')){return}
this.scale=this.options.scale=='auto'?$(window).width()/window.screen.width:this.options.scale
if(this.scale<1)this.scale=1
var meta=$(this.type=='android'?'meta[name="google-play-app"]':this.type=='ios'?'meta[name="apple-itunes-app"]':this.type=='kindle'?'meta[name="kindle-fire-app"]':'meta[name="msApplication-ID"]');if(meta.length==0)return
if(this.type=='windows'){this.appId=$('meta[name="msApplication-PackageFamilyName"]').attr('content');}else{var parsedMetaContent=/app-id=([^\s,]+)/.exec(meta.attr('content'));if(parsedMetaContent){this.appId=parsedMetaContent[1];}else{return;}}
this.title=this.options.title?this.options.title:meta.data('title')||$('title').text().replace(/\s*[|\-·].*$/,'')
this.author=this.options.author?this.options.author:meta.data('author')||($('meta[name="author"]').length?$('meta[name="author"]').attr('content'):window.location.hostname)
this.iconUrl=meta.data('icon-url');this.price=meta.data('price');if(typeof this.options.onInstall==='function'){this.options.onInstall=this.options.onInstall;}else{this.options.onInstall=function(){};}
if(typeof this.options.onClose==='function'){this.options.onClose=this.options.onClose;}else{this.options.onClose=function(){};}
this.create()
this.show()
this.listen()}
SmartBanner.prototype={constructor:SmartBanner,create:function(){var iconURL,link=(this.options.url?this.options.url:(this.type=='windows'?'ms-windows-store:navigate?appid=':(this.type=='android'?'market://details?id=':(this.type=='kindle'?'amzn://apps/android?asin=':'https://itunes.apple.com/'+this.options.appStoreLanguage+'/app/id')))+this.appId),price=this.price||this.options.price,inStore=price?price+' - '+(this.type=='android'?this.options.inGooglePlay:this.type=='kindle'?this.options.inAmazonAppStore:this.type=='ios'?this.options.inAppStore:this.options.inWindowsStore):'',gloss=this.options.iconGloss===null?(this.type=='ios'):this.options.iconGloss
if(this.type=='android'&&this.options.GooglePlayParams){link=link+'&referrer='+this.options.GooglePlayParams;}
var banner='<div id="smartbanner" class="'+this.type+'"><div class="sb-container"><a href="#" class="sb-close">&times;</a><span class="sb-icon"></span><div class="sb-info"><strong>'+this.title+'</strong><span>'+this.author+'</span><span>'+inStore+'</span></div><a href="'+link+'" class="sb-button"><span>'+this.options.button+'</span></a></div></div>';(this.options.layer)?$(this.options.appendToSelector).append(banner):$(this.options.appendToSelector).prepend(banner);if(this.options.icon){iconURL=this.options.icon}else if(this.iconUrl){iconURL=this.iconUrl;}else if($('link[rel="apple-touch-icon-precomposed"]').length>0){iconURL=$('link[rel="apple-touch-icon-precomposed"]').attr('href')
if(this.options.iconGloss===null)gloss=false}else if($('link[rel="apple-touch-icon"]').length>0){iconURL=$('link[rel="apple-touch-icon"]').attr('href')}else if($('meta[name="msApplication-TileImage"]').length>0){iconURL=$('meta[name="msApplication-TileImage"]').attr('content')}else if($('meta[name="msapplication-TileImage"]').length>0){iconURL=$('meta[name="msapplication-TileImage"]').attr('content')}
if(iconURL){$('#smartbanner .sb-icon').css('background-image','url('+iconURL+')')
if(gloss)$('#smartbanner .sb-icon').addClass('gloss')}else{$('#smartbanner').addClass('no-icon')}
this.bannerHeight=$('#smartbanner').outerHeight()+2
if(this.scale>1){$('#smartbanner').css('top',parseFloat($('#smartbanner').css('top'))*this.scale).css('height',parseFloat($('#smartbanner').css('height'))*this.scale).hide()
$('#smartbanner .sb-container').css('-webkit-transform','scale('+this.scale+')').css('-msie-transform','scale('+this.scale+')').css('-moz-transform','scale('+this.scale+')').css('width',$(window).width()/this.scale)}
$('#smartbanner').css('position',(this.options.layer)?'absolute':'static')},listen:function(){$('#smartbanner .sb-close').on('click',$.proxy(this.close,this))
$('#smartbanner .sb-button').on('click',$.proxy(this.install,this))},show:function(callback){var banner=$('#smartbanner');banner.stop();if(this.options.layer){banner.animate({top:0,display:'block'},this.options.speedIn).addClass('shown').show();$(this.pushSelector).animate({paddingTop:this.origHtmlMargin+(this.bannerHeight*this.scale)},this.options.speedIn,'swing',callback);}else{if($.support.transition){banner.animate({top:0},this.options.speedIn).addClass('shown');var transitionCallback=function(){$('html').removeClass('sb-animation');if(callback){callback();}};$(this.pushSelector).addClass('sb-animation').one($.support.transition.end,transitionCallback).emulateTransitionEnd(this.options.speedIn).css('margin-top',this.origHtmlMargin+(this.bannerHeight*this.scale));}else{banner.slideDown(this.options.speedIn).addClass('shown');}}},hide:function(callback){var banner=$('#smartbanner');banner.stop();if(this.options.layer){banner.animate({top:-1*this.bannerHeight*this.scale,display:'block'},this.options.speedIn).removeClass('shown');$(this.pushSelector).animate({paddingTop:this.origHtmlMargin},this.options.speedIn,'swing',callback);}else{if($.support.transition){if(this.type!=='android')
banner.css('top',-1*this.bannerHeight*this.scale).removeClass('shown');else
banner.css({display:'none'}).removeClass('shown');var transitionCallback=function(){$('html').removeClass('sb-animation');if(callback){callback();}};$(this.pushSelector).addClass('sb-animation').one($.support.transition.end,transitionCallback).emulateTransitionEnd(this.options.speedOut).css('margin-top',this.origHtmlMargin);}else{banner.slideUp(this.options.speedOut).removeClass('shown');}}},close:function(e){e.preventDefault()
this.hide()
this.setCookie('sb-closed','true',this.options.daysHidden);this.options.onClose(e);},install:function(e){if(this.options.hideOnInstall){this.hide()}
this.setCookie('sb-installed','true',this.options.daysReminder)
this.options.onInstall(e);},setCookie:function(name,value,exdays){var exdate=new Date()
exdate.setDate(exdate.getDate()+exdays)
value=encodeURI(value)+((exdays==null)?'':'; expires='+exdate.toUTCString())
document.cookie=name+'='+value+'; path=/;'},getCookie:function(name){var i,x,y,ARRcookies=document.cookie.split(";")
for(i=0;i<ARRcookies.length;i++){x=ARRcookies[i].substr(0,ARRcookies[i].indexOf("="))
y=ARRcookies[i].substr(ARRcookies[i].indexOf("=")+1)
x=x.replace(/^\s+|\s+$/g,"")
if(x==name){return decodeURI(y)}}
return null},switchType:function(){var that=this
this.hide(function(){that.type=that.type=='android'?'ios':'android'
var meta=$(that.type=='android'?'meta[name="google-play-app"]':'meta[name="apple-itunes-app"]').attr('content')
that.appId=/app-id=([^\s,]+)/.exec(meta)[1]
$('#smartbanner').detach()
that.create()
that.show()})}}
$.smartbanner=function(option){var $window=$(window),data=$window.data('smartbanner'),options=typeof option=='object'&&option
if(!data)$window.data('smartbanner',(data=new SmartBanner(options)))
if(typeof option=='string')data[option]()}
$.smartbanner.defaults={title:null,author:null,price:'FREE',appStoreLanguage:'us',inAppStore:'On the App Store',inGooglePlay:'In Google Play',inAmazonAppStore:'In the Amazon Appstore',inWindowsStore:'In the Windows Store',GooglePlayParams:null,icon:null,iconGloss:null,button:'VIEW',url:null,scale:'auto',speedIn:300,speedOut:400,daysHidden:15,daysReminder:90,force:null,hideOnInstall:true,layer:false,iOSUniversalApp:true,appendToSelector:'body',pushSelector:'html'}
$.smartbanner.Constructor=SmartBanner;function transitionEnd(){var el=document.createElement('smartbanner')
var transEndEventNames={WebkitTransition:'webkitTransitionEnd',MozTransition:'transitionend',OTransition:'oTransitionEnd otransitionend',transition:'transitionend'}
for(var name in transEndEventNames){if(el.style[name]!==undefined){return{end:transEndEventNames[name]}}}
return false}
if($.support.transition!==undefined)
return
$.fn.emulateTransitionEnd=function(duration){var called=false,$el=this
$(this).one($.support.transition.end,function(){called=true})
var callback=function(){if(!called)$($el).trigger($.support.transition.end)}
setTimeout(callback,duration)
return this}
$(function(){$.support.transition=transitionEnd()})}(window.jQuery);
jQuery(document).ready(function($){$.smartbanner({layer:true,title:($('meta[name="AppTitle"]').attr('content')),author:($('meta[name="AppAuthor"]').attr('content')),icon:($('meta[name="AppIconUrl"]').attr('content'))});});
$(document).ready(function($){$('#articleTools,.publicationToolSelect').change(function(){var action=$(this).val();if(!action)
return;if($(this).parents('form[name="frmAbs"]').length){var result=submitArticles($(this).parents('form[name="frmAbs"]').get(0),action);if(result){$('#articleTools')[0].selectedIndex=0;$('#articleTools').selectmenu("refresh");}}else{window.location.href=action;}});});
function searchResultPage(aForm,page,aSubject)
{getFormInput(aForm.name,'startPage').value=page;aForm.submit();}
$(document).ready(function($){$('#select_all').change(function(){$(this).closest('form').find(':checkbox').prop('checked',this.checked)});$('#menuAction').click(function(){var hasMarked=false;$('#browsePublicationsForm input[type=checkbox][name="doi"]:checked').each(function(){hasMarked=true;return true;});if(!hasMarked){alert("Please select publications.");return;}
var form=$('#browsePublicationsForm');form.submit();});$('.subjectListing .subjectList').parent().closest('.subjectList').addClass('hideSubList').prepend('<a href="javascript:void(0)" class="toggle">+</a>');$('.subjectList .toggle').click(function(){$(this).closest('.subjectList').toggleClass('hideSubList');var txt=$(this).text();if(txt.indexOf('+')>-1)
txt='-';else
txt="+";$(this).text(txt);});$(".subjectList span.selected").parents('.hideSubList').toggleClass('hideSubList').children('.toggle').text('-');});
$(document).ready(function(){$('.js__searchInSelector').on('change',function(){var form=$('.quickSearchForm');var inputJournal=$(form.find('input[name="quickLinkJournal"]'));var inputYear=$(form.find('input[name="quickLinkYear"]'));var inputVolume=$(form.find('input[name="quickLinkVolume"]'));var inputIssue=$(form.find('input[name="quickLinkIssue"]'));var inputPage=$(form.find('input[name="quickLinkPage"]'));if($(inputJournal).val()){$(inputYear).removeAttr("disabled");$(inputVolume).removeAttr("disabled");if($(inputYear).val()||$(inputVolume).val()){$(inputIssue).removeAttr("disabled");if($(inputIssue).val()){$(inputPage).removeAttr("disabled");}}}});var args=window.location.search.slice(1).split("&");var year;var volume;$(args).each(function(i,elm){var arg=elm.split('=');if(arg[0]=='year'){year=arg[1]}else if(arg[0]=='volume'){volume=arg[1]};});if(volume){var elem=$(".volume-list").find("[data-attr-vol='"+volume+"']").addClass("open");if(elem.length){$("html, body").animate({scrollTop:elem.offset().top},800);}}else if(year){var decades=$(".decade > h3 > .title.expander");var currentDecade;for(i=0;i<decades.length;i++){dec=$(decades[i]).data("attr-vol");var bot=dec.split("-")[0];var top=dec.split("-")[1];if(year==top||year==bot||(year>bot&&year<top)){currentDecade=dec;break;}}
var elem=$(".volume-list").find("[data-attr-vol='"+currentDecade+"']").addClass("open").parent().siblings(".expandable").addClass("expandedDiv").find("[data-attr-vol='"+year+"']").addClass("open").parent().siblings(".expandable").addClass("expandedDiv");if(elem.length){$("html, body").animate({scrollTop:elem.offset().top},800);}}else{$('.slider:first-child').addClass('opened');}
$(".volume-list .expander.open").each(function(){$(this).siblings(".expandable").addClass("expandedDiv");$(this).closest(".decade").find(".title.expander").siblings(".expandable.years").addClass("expandedDiv");if($(this).closest(".slider").length>0){$(this).closest(".slider").parents(".expandable").addClass("expandedDiv");$(this).closest(".slider").closest(".expandable.volumes").prev(".expander").addClass("open");}
else if($(this).parent().find(".slider").length>0){$(this).parent().find(".slider").children(".expandable").addClass("expandedDiv");$(this).parent().find(".slider").closest(".expandable.volumes").prev(".expander").addClass("open");}});$('.opener, .volume-list .expander:not(.js__noloi)').click(function(e){e.preventDefault();$(this).closest('.slider').toggleClass('opened');var vol=$(this).attr("data-attr-vol");var url=window.location.href;var state_to_push="";if(url.indexOf("&expanded="+vol)>0){state_to_push=url.replace("&expanded="+vol,"");}
else if(url.indexOf("?expanded="+vol)>0){state_to_push=url.replace("?expanded="+vol,"?");}
else{var connector="";if(url.indexOf("?")>=0&&url.lastIndexOf("&")<(url.length-1)&&url.lastIndexOf("?")<(url.length-1))
connector="&";else
if(url.lastIndexOf("?")<(url.length-1)&&url.lastIndexOf("&")<(url.length-1))
connector="?";state_to_push=url+connector+"expanded="+vol;}
if(state_to_push.slice(-1)=="?")
state_to_push=state_to_push.replace("?","");state_to_push=state_to_push.replace("?&","?");history.replaceState(null,null,state_to_push);});var yearQueried=$("input[data-name='yearQueried']").data('year');var volumeQueried=$("input[data-name='volumeQueried']").data('volume');if(!yearQueried||!volumeQueried){$(".js_issue").each(function(){var elem=$(this).closest(".slider");if(yearQueried){var currentIssueYear=$(this).data('year');if(yearQueried==currentIssueYear){elem.toggleClass("opened");return false;}}else{var currentVolumeId=$(this).data("volume");if(volumeQueried==currentVolumeId){elem.toggleClass("opened");return false;}}});}else{$(".js_issue").each(function(){var elem=$(this).closest(".slider");var currentYearId=$(this).data("year");var currentVolumeId=$(this).data("volume");if((yearQueried==currentYearId)&&(volumeQueried==currentVolumeId)){elem.toggleClass("opened");return false;}});}});
function onChangeSavedQuerySort(aOpt,aAsc)
{var url='/search/saved';if(url.indexOf('?')>0)
window.location=url+="&asc="+aAsc+"&sortOption="+aOpt;else
window.location=url+="?asc="+aAsc+"&sortOption="+aOpt;};
(function($){function init(){$(".accessWidget .sortBy").change(function(e){var sortByUrl=$(this).val();window.location.href=sortByUrl;});}
$(document).ready(init);if(window.PB&&window.PB.$){window.PB.$(document.documentElement).on("WidgetReinit.accessWidget WidgetReinit.literatumAccessWidget",init);}})(jQuery);$(document).ready(function($){$(".collectionItem").click(function(e){e.preventDefault();var $target=$(this).closest('tr');if($(this).hasClass('loaded')){renderAccessWidgetContent('',$target,true);}
else{var $widget=$(this).closest(".literatumAccessWidget");var code=$(this).attr('data-id');$widget.pbAjax({type:'GET',url:'/pb/widgets/AccessWidgetController/category',dataType:'html',async:'false',data:{categoryCode:code},success:function(data){renderAccessWidgetContent(data,$target,false);}});$(this).addClass("loaded");}})});function renderAccessWidgetContent(data,$target,loaded){if(loaded)
$target.next().toggle();else
$target.after(data);};
$(document).ready(addSelectAllHandlerForscheduledReprt);if(window.PB&&window.PB.$){window.PB.$(document.documentElement).on("WidgetReinit.*",addSelectAllHandlerForscheduledReprt);}
function addSelectAllHandlerForscheduledReprt(){addSelectAllHandler("#counterIdsAll",'.report-type',"#counterReportTypes");}
function addSelectAllHandler(selectAll,checkAll,parent){checkSelectAllIfNecessary(selectAll,checkAll,parent);$(selectAll).click(function(){var check=$(this).is(":checked");var boxes;if(parent==""){boxes=$(this).parents().find("input[type=checkbox]");}
else
{boxes=$(this).closest(parent).find("input[type=checkbox]");}
boxes.prop("checked",check);});$(checkAll).change(function(){checkSelectAllIfNecessary(selectAll,checkAll,parent);});}
function selectRangeRadio(){document.getElementById("monthRange").checked=true;}
function selectYearOnlyRadio(){document.getElementById("yearOnlyRadioOption").checked=true;}
function checkSelectAllIfNecessary(selectAll,checkboxes,parent){var $parent=$(parent);var allCheckboxes;var checkedCheckboxes;var $selectAllField;if($parent.length==0){allCheckboxes=$(checkboxes);checkedCheckboxes=$(checkboxes+':checked');$selectAllField=$(selectAll);}else{allCheckboxes=$parent.find(checkboxes);checkedCheckboxes=$parent.find(checkboxes+':checked');$selectAllField=$parent.find(selectAll);}
if($selectAllField.length==0){return;}
if(allCheckboxes.length!=0&&allCheckboxes.length==checkedCheckboxes.length){$selectAllField.prop('checked',true);}else{$selectAllField.prop('checked',false);}};
$(document).ready(function($){$(".selectAll").change(function(){var selectAll=$(this);if(selectAll.hasClass("selectAllCitation")){if(selectAll.is(":checked")){$("input[type=checkbox][name=citId]").prop('checked',true);$(".selectAll.selectAllCitation").prop("checked",true);}else{$("input[type=checkbox][name=citId]").prop("checked",false);$(".selectAll.selectAllCitation").prop("checked",false);}}else if(selectAll.hasClass("customAlert")){if(selectAll.is(":checked")){$("input[type=checkbox][name=code]").prop('checked',true);$(".selectAll.customAlert").prop("checked",true);}else{$("input[type=checkbox][name=code]").prop("checked",false);$(".selectAll.customAlert").prop("checked",false);}}else if(selectAll.hasClass("allCategories")){if($(this).is(":checked")){$("[name='selectedCategory']").prop('checked',true);}else{$("[name='selectedCategory']").prop('checked',false);}}else{var $inputs=selectAll.closest("fieldset,form , form .profile-sections").find("input[type=checkbox]");$inputs.prop("checked",selectAll.is(":checked"));if(selectAll.closest('.jcf-unchecked,.jcf-checked').length){$inputs.each(function(){var $this=$(this);if($this.is(":checked")){$this.closest('.jcf-unchecked,.jcf-checked').removeClass('jcf-unchecked').addClass('jcf-checked');}
else{$this.closest('.jcf-unchecked,.jcf-checked').removeClass('jcf-checked').addClass('jcf-unchecked');}});}}});$(".axafrequency").change(function(){$(".axafrequency").val($(this).val());var form=$(this).parents("form");form.find("input[name=action]").val("");createAndAppendInput("save","true",form);createAndAppendInput("updateAxa","true",form);form.submit();});$(".axafrequencyWithButton").change(function(){$(".axafrequencyWithButton").val($(this).val());});$(".axafrequencyButton").click(function(){var form=$(this).closest("form");form.find("input[name=action]").val("");createAndAppendInput("save","true",form);createAndAppendInput("updateAxa","true",form);form.submit();});$("[name='sortBy1']").change(function(){var sortBy=$(this).val();$('<form action="/action/showAlertSettings">'+'<input type="hidden" name="type" value="citation" />'+'<input type="hidden" name="menuTab" value="Alerts"/>'+'<input type="hidden" name="sortBy" value="'+sortBy+'"/>'+'</form>').appendTo('body').submit();});if(window.location.hash=='#customAlerts'){$('.active').removeClass('active');$('#customsTabLabel').parent().addClass('active');}
var $categoriesList=$(".categoriesList");$categoriesList.hide();$("[name='selectedTitles']").click(function(){if("custom"==$(this).val()||"customDigest"==$(this).val()){$categoriesList.show();}else{$categoriesList.hide();}});if($("#customTitles").is(":checked")){$categoriesList.show();}
$(".close").click(function(){$categoriesList.hide();});});function createAndAppendInput(name,value,form){var inp=document.createElement("input");inp.type="hidden";inp.name=name;inp.value=value;form.append(inp);};
$(document).ready(function($){$(".favoritePublicationsOptions").change(function(){if(!$('input[type=checkbox][name="doi"]:checked').length){showErrorMsg();$(this).val('');return;}
var val=$(this).val();var form=$(this).parents("form");var action='';if(!val)
return;if(val=='email'){$(form).append($('<input>').attr({"name":"title","type":"hidden","value":"email to a friend"}));action='/action/showMailPage';}
else if(val=='alert'){action='/action/doUpdateAlertSettings';$('option[value='+val+']',this).val('addJournalBookAlert');}
else if(val=='delete'){action=form.attr('action');}else if(val=='publicationAddJournalBookAlert'){action='/action/doUpdateAlertSettings';$('option[value='+val+']',this).val('addJournalBookAlert');$("input[type=checkbox][name=doi]").each(function(){$(this).val($(this).parent("td").attr("serialDoi"));});}else{action=val;}
form.attr('action',action);form.get(0).submit();});$(".js__actionsDropdown .action").click(function(e){$(this).closest(".slct").find(".js__favPubOpts").val($(this).data("value"));$(this).closest(".slct").find(".js__favPubOpts").trigger("change");});$(".js__actionsDropdown .default").click(function(e){$(this).siblings(".actions").toggle();$(this).find(".icon-arrow_d_n").toggle();$(this).find(".icon-arrow_u_p").toggle();e.stopPropagation();});$("body").click(function(){$(".js__actionsDropdown .actions").hide();$(".js__actionsDropdown .default").find(".icon-arrow_d_n").show();$(".js__actionsDropdown .default").find(".icon-arrow_u_p").hide();});try{$(document).on('click','#removeArticle',function(e){if(!$('input[type=checkbox][name="citId"]:checked').length){showErrorMsg();e.preventDefault();}});}catch(err){$('#removeArticle').click(function(e){if(!$('input[type=checkbox][name="citId"]:checked').length){showErrorMsg();e.preventDefault();}});}
$(".sortOptions").change(function(){var val=$(this).val();if(!val)
return;var action=$('[name="currentUrl"]').val();var form=['<form method="GET" action="'+action+'">'];form.push('<input type="hidden" name="'+'menuTab'+'" value="'+'favorites'+'"/>');form.push('<input type="hidden" name="'+'sortBy'+'" value="'+val+'"/>');form.push('<input type="hidden" name="'+'publicationSortBy'+'" value="'+$("select.publicationSortOptions").val()+'"/>');form.push('<input type="hidden" name="'+'type'+'" value="'+'articles'+'"/>');form.push('<input type="hidden" name="'+'tabIndex'+'" value="'+'0'+'"/>');form.push('</form>');$(form.join('')).appendTo('body')[0].submit();form.submit();$(form).remove();});$(".publicationSortOptions").change(function(){var val=$(this).val();if(!val)
return;var action=$('[name="currentUrl"]').val();var form=['<form method="GET" action="'+action+'">'];form.push('<input type="hidden" name="'+'menuTab'+'" value="'+'favorites'+'"/>');form.push('<input type="hidden" name="'+'publicationSortBy'+'" value="'+val+'"/>');form.push('<input type="hidden" name="'+'sortBy'+'" value="'+$("select.sortOptions").val()+'"/>');form.push('<input type="hidden" name="'+'type'+'" value="'+'articles'+'"/>');form.push('<input type="hidden" name="'+'tabIndex'+'" value="'+'1'+'"/>');form.push('</form>');$(form.join('')).appendTo('body')[0].submit();form.submit();$(form).remove();});selectCorrectTab();});function selectCorrectTab(){try{var tabIndex=parseInt(getParameterByName("tabIndex"));if(tabIndex!=null){$($("div.manageFavorites ul li")[tabIndex]).find("a").trigger("click");$($("div.manageFavorites ul li")[tabIndex]).addClass("active");}}catch(e){}}
function getParameterByName(name){name=name.replace(/[\[]/,"\\\[").replace(/[\]]/,"\\\]");var regex=new RegExp("[\\?&]"+name+"=([^&#]*)"),results=regex.exec(location.search);return results==null?"":decodeURIComponent(results[1].replace(/\+/g," "));}
function showErrorMsg(){alert('Please select one publication at least');};
$(document).ready(function(){var pairedDevicesTable=$(".pairedDevicesTable");if(pairedDevicesTable.length){$.get("/pb/widgets/DevicePairingController/pairedDevices").done(function(html){$(".pairedDevicesTable tbody").html(html);pairedDevicesTable.trigger("update");addDeviceSelectionChangeListener();});$("#unpairSelected").click(function(){var selectedDevicesArray=[];$(".pairedDevicesTable input[name='deviceId']:checked").each(function(){selectedDevicesArray.push($(this).attr('id'));});unpairSelectedDevices(selectedDevicesArray);});$("#unpairAll").click(function(){var selectedDevicesArray=[];$(".pairedDevicesTable input[name='deviceId']").each(function(){selectedDevicesArray.push($(this).attr('id'));});unpairSelectedDevices(selectedDevicesArray);});pairedDevicesTable.tablesorter({theme:'ice',headers:{0:{sorter:false}},dateFormat:'us',widgets:['zebra']});}
function unpairSelectedDevices(selectedDevicesArray){$.get("/pb/widgets/DevicePairingController/unpairSelected",{devices:JSON.stringify(selectedDevicesArray)}).done(function(html){$(".pairedDevicesTable tbody").html(html);pairedDevicesTable.trigger("update");addDeviceSelectionChangeListener();});}
function addDeviceSelectionChangeListener(){$("#unpairSelected").prop("disabled",true);$("input[name=deviceId]").change(function(){if($("input[name=deviceId]:checked").length>0){$("#unpairSelected").prop("disabled",false);}else{$("#unpairSelected").prop("disabled",true);}});}});
$(document).ready(function(){var pairedEmailsTable=$(".pairedEmailsTable");function refreshPairedDevices(){$.get("/pb/widgets/DevicePairingManagementController/institutionPairedDevices",{serviceName:$(".serviceNameHidden").text(),emailFilter:$('input[name=emailFilter]:checked').attr("id"),permissionFilter:$('input[name=permissionFilter]:checked').attr("id"),emailAddress:$('input[name=emailAddress]').val(),name:$('input[name=name]').val(),fromDate:$('input[name=fromDate]').val(),toDate:$('input[name=toDate]').val()}).done(function(html){$(".pairedEmailsTable tbody").html(html);pairedEmailsTable.trigger("update");addEmailSelectionChangeListener();showPager();});}
function addEmailSelectionChangeListener(){$("#extendReinstateButton").prop("disabled",true);$("#revokeButton").prop("disabled",true);$("#viewDetailButton").prop("disabled",true);$("input[name=userEmail]").change(function(){$("#extendReinstateButton").prop("disabled",false);$("#revokeButton").prop("disabled",false);$("#viewDetailButton").prop("disabled",false);});}
function showPager(){if($('.pairedEmailsTable > tbody > tr').length>pagerOptions.size){pairedEmailsTable.tablesorterPager(pagerOptions);}else{pagerOptions.container.hide();}}
if(pairedEmailsTable.length){refreshPairedDevices();var pagerOptions={container:$(".pager"),ajaxUrl:null,customAjaxUrl:function(table,url){return url;},ajaxObject:{dataType:'json'},ajaxProcessing:null,processAjaxOnInit:false,output:'',updateArrows:true,page:0,size:25,savePages:false,storageKey:'tablesorter-pager',pageReset:0,fixedHeight:false,removeRows:true,countChildRows:false,cssNext:'.next',cssPrev:'.prev',cssFirst:'.first',cssLast:'.last',cssGoto:'.gotoPage',cssPageDisplay:'.pagedisplay',cssPageSize:'.pagesize',cssDisabled:'disabled',cssErrorRow:'tablesorter-errorRow'};pairedEmailsTable.tablesorter({theme:'ice',headers:{0:{sorter:false}},sortList:[[3,1]],dateFormat:'us',widgets:['zebra']});var fromDateElement=$("#fromDate");var toDateElement=$("#toDate");fromDateElement.datepicker({defaultDate:"-1w",changeMonth:true,numberOfMonths:1,onClose:function(selectedDate){$("#toDate").datepicker("option","minDate",selectedDate);}});fromDateElement.datepicker("setDate","-180d");toDateElement.datepicker({defaultDate:"+0",changeMonth:true,numberOfMonths:1,onClose:function(selectedDate){$("#fromDate").datepicker("option","maxDate",selectedDate);}});toDateElement.datepicker("setDate","+1d");$("#refreshButton").click(function(event){event.preventDefault();refreshPairedDevices();});$(".next,.prev").click(function(){$("input[name=userEmail]").prop("checked",false);addEmailSelectionChangeListener();});var intRegex=/^\d+$/;var addExtEmailEmailField=$("#addExternalEmail");var addExtEmailExpDaysField=$("#addExternalEmailExp");var addExtEmailReasonField=$("#addExternalEmailReason");var addExtEmailInputFields=$([]).add(addExtEmailEmailField).add(addExtEmailExpDaysField).add(addExtEmailReasonField);var addExternalEmailDialog=$("#externalEmailDialogForm").dialog({autoOpen:false,height:300,width:400,modal:true,dialogClass:'device-pairing-dialog',buttons:{Confirm:addExternalEmail,Cancel:function(){addExternalEmailDialog.dialog("close");}},close:function(){addExternalEmailDialog.find("form")[0].reset();addExtEmailInputFields.removeClass("ui-state-error");}});$("#addExternalEmailButton").click(function(){addExternalEmailDialog.dialog("open");});var extendReinstateEmailField=$("#extendEmail");var extendReinstateExpDaysField=$("#extendEmailExp");var extendReinstateReasonField=$("#extendEmailReason");var extendReinstateInputFields=$([]).add(extendReinstateEmailField).add(extendReinstateExpDaysField).add(extendReinstateReasonField);var extendReinstateEmailDialog=$("#extendReinstateAccessDialogForm").dialog({autoOpen:false,height:300,width:400,modal:true,dialogClass:'device-pairing-dialog',buttons:{Confirm:extendReinstateEmail,Cancel:function(){extendReinstateEmailDialog.dialog("close");}},close:function(){extendReinstateEmailDialog.find("form")[0].reset();extendReinstateInputFields.removeClass("ui-state-error");}});$("#extendReinstateButton").click(function(){var selectedEmail=$("input[name=userEmail]:checked").val();extendReinstateEmailField.val(selectedEmail);extendReinstateEmailDialog.dialog("open");});var revokeEmailField=$("#revokeAccessEmail");var revokeReasonField=$("#revokeAccessReason");var revokeInputFields=$([]).add(revokeEmailField).add(revokeReasonField);var revokeAccessDialog=$("#revokeAccessDialogForm").dialog({autoOpen:false,height:300,width:400,modal:true,dialogClass:'device-pairing-dialog',buttons:{Confirm:revokeAccess,Cancel:function(){revokeAccessDialog.dialog("close");}},close:function(){revokeAccessDialog.find("form")[0].reset();revokeInputFields.removeClass("ui-state-error");}});$("#revokeButton").click(function(){var selectedEmail=$("input[name=userEmail]:checked").val();revokeEmailField.val(selectedEmail);revokeAccessDialog.dialog("open");});$("#viewDetailButton").click(function(){var userEmail=$("input[name=userEmail]:checked").attr("id");$(this).closest("form").append("<input type='hidden' name='userEmail' value='"+userEmail+"'/>");});}
function checkExpirationDays(expirationDaysField){if(!intRegex.test(expirationDaysField.val())){expirationDaysField.addClass("ui-state-error");return false;}
return true;}
function checkReason(reasonField){if(!reasonField.val()){reasonField.addClass("ui-state-error");return false;}
return true;}
function checkEmail(emailField){if(!emailField.val()||$.trim($(emailField).val()).length==0){emailField.addClass("ui-state-error");return false;}
return true;}
function addExternalEmail(){addExtEmailInputFields.removeClass("ui-state-error");var valid=true;valid=valid&&checkEmail(addExtEmailEmailField);valid=valid&&checkExpirationDays(addExtEmailExpDaysField);valid=valid&&checkReason(addExtEmailReasonField);if(valid){$.get("/pb/widgets/DevicePairingManagementController/addExternalEmail",{serviceName:$(".serviceNameHidden").text(),email:addExtEmailEmailField.val(),daysToExpiration:addExtEmailExpDaysField.val(),reason:addExtEmailReasonField.val(),antiForgeryToken:$(".antiForgeryToken").text()}).done(function(html){if(html.indexOf("externalEmailError")==-1){$(".pairedEmailsTable tbody").html(html);pairedEmailsTable.trigger("update");addEmailSelectionChangeListener();showPager();$("input[name=emailFilter]").prop("checked",function(){return this.getAttribute("checked")=="checked";});$("input[name=permissionFilter]").prop("checked",function(){return this.getAttribute("checked")=="checked";});$("input[name=emailAddress]").val("");$("input[name=name]").val("");fromDateElement.datepicker({defaultDate:"-1w",changeMonth:true,numberOfMonths:1,onClose:function(selectedDate){$("#toDate").datepicker("option","minDate",selectedDate);}});fromDateElement.datepicker("setDate","-180d");toDateElement.datepicker({defaultDate:"+0",changeMonth:true,numberOfMonths:1,onClose:function(selectedDate){$("#fromDate").datepicker("option","maxDate",selectedDate);}});toDateElement.datepicker("setDate","+1d");if(html){pairedEmailsTable.trigger("sorton",[[0,1]]);}}else{$(".pairingManagementBody").append(html);displayAddExternalEmailErrorDialog();}});addExternalEmailDialog.dialog("close");}
return valid;}
function displayAddExternalEmailErrorDialog(){$("#externalEmailError").dialog({modal:true,buttons:{Ok:function(){$(this).dialog("close");$(".pairingManagementBody").remove("#externalEmailError");}}});}
function extendReinstateEmail(){extendReinstateInputFields.removeClass("ui-state-error");var valid=true;valid=valid&&checkExpirationDays(extendReinstateExpDaysField);valid=valid&&checkReason(extendReinstateReasonField);var selectedEmail=extendReinstateEmailField.val();if(valid){$.get("/pb/widgets/DevicePairingManagementController/extendReinstateEmail",{serviceName:$(".serviceNameHidden").text(),extendReinstateEmail:selectedEmail,daysToExpiration:extendReinstateExpDaysField.val(),reason:extendReinstateReasonField.val(),emailFilter:$('input[name=emailFilter]:checked').attr("id"),permissionFilter:$('input[name=permissionFilter]:checked').attr("id"),emailAddress:$('input[name=emailAddress]').val(),name:$('input[name=name]').val(),fromDate:$('input[name=fromDate]').val(),toDate:$('input[name=toDate]').val(),antiForgeryToken:$(".antiForgeryToken").text()}).done(function(html){$(".pairedEmailsTable tbody").html(html);pairedEmailsTable.trigger("update");$("input[value="+"'"+selectedEmail+"'"+"]").prop("checked",true);});extendReinstateEmailDialog.dialog("close");}
return valid;}
function revokeAccess(){revokeInputFields.removeClass("ui-state-error");var valid=true;var selectedEmail=revokeEmailField.val();if(valid){$.get("/pb/widgets/DevicePairingManagementController/revokeAccess",{serviceName:$(".serviceNameHidden").text(),revokeEmail:selectedEmail,reason:revokeReasonField.val(),emailFilter:$('input[name=emailFilter]:checked').attr("id"),permissionFilter:$('input[name=permissionFilter]:checked').attr("id"),emailAddress:$('input[name=emailAddress]').val(),name:$('input[name=name]').val(),fromDate:$('input[name=fromDate]').val(),toDate:$('input[name=toDate]').val(),antiForgeryToken:$(".antiForgeryToken").text()}).done(function(html){$(".pairedEmailsTable tbody").html(html);pairedEmailsTable.trigger("update");$("input[value="+"'"+selectedEmail+"'"+"]").prop("checked",true);});revokeAccessDialog.dialog("close");}
return valid;}
var instAdminPairedDevicesTable=$(".inst_admin_userPairedDevicesTable");if(instAdminPairedDevicesTable.length){var pairingHistoryPagerOptions={container:$(".pager"),ajaxUrl:null,customAjaxUrl:function(table,url){return url;},ajaxObject:{dataType:'json'},ajaxProcessing:null,processAjaxOnInit:false,output:'',updateArrows:true,page:0,size:10,savePages:false,storageKey:'pairingHistory-pager',pageReset:0,fixedHeight:false,removeRows:true,countChildRows:false,cssNext:'.next',cssPrev:'.prev',cssFirst:'.first',cssLast:'.last',cssGoto:'.gotoPage',cssPageDisplay:'.pagedisplay',cssPageSize:'.pagesize',cssDisabled:'disabled',cssErrorRow:'tablesorter-errorRow'};$.get("/pb/widgets/DevicePairingManagementController/pairedDevicesOfUser",{serviceName:$(".serviceNameHidden").text(),userEmail:$(".userEmailHidden").text()}).done(function(html){$(".inst_admin_userPairedDevicesTable tbody").html(html);instAdminPairedDevicesTable.trigger("update");addDeviceSelectionChangeListener();handleEmptyPairedDevices(html);handleNonEmptyPairedDevices(html);});instAdminPairedDevicesTable.tablesorter({theme:'ice',headers:{0:{sorter:false}},dateFormat:'us',widgets:['zebra']});var selectedDevicesArray=[];var unpairDialog=$("#unpairDialogForm").dialog({autoOpen:false,height:300,width:400,modal:true,dialogClass:'device-pairing-dialog',buttons:{Confirm:function(){instAdmin_unpairSelectedDevices(selectedDevicesArray);unpairDialog.dialog("close");},Cancel:function(){unpairDialog.dialog("close");}},close:function(){selectedDevicesArray=[];}});$("#instAdminUnpairSelected").click(function(){selectedDevicesArray=[];var unpairDialogForm=$("#unpairDialogForm");unpairDialogForm.empty();$(".inst_admin_userPairedDevicesTable input[name='deviceId']:checked").each(function(){selectedDevicesArray.push($(this).attr('id'));unpairDialogForm.append("<p>"+$(this).val()+"</p>");});unpairDialog.dialog("open");});$("#instAdminUnpairAll").click(function(){selectedDevicesArray=[];var unpairDialogForm=$("#unpairDialogForm");unpairDialogForm.empty();$(".inst_admin_userPairedDevicesTable input[name='deviceId']").each(function(){selectedDevicesArray.push($(this).attr('id'));unpairDialogForm.append("<p>"+$(this).val()+"</p>");});unpairDialog.dialog("open");});$.get("/pb/widgets/DevicePairingManagementController/pairingHistory",{serviceName:$(".serviceNameHidden").text(),userEmail:$(".userEmailHidden").text()}).done(function(html){if(html.indexOf("<tr>")>=0){$(".pairingHistoryTable tbody").html(html);$(".pairingHistoryTable").trigger("update");if($('.pairingHistoryTable > tbody > tr').length>pairingHistoryPagerOptions.size)
$(".pairingHistoryTable").tablesorterPager(pairingHistoryPagerOptions);}else{$(".pairingHistoryTable").replaceWith("<p>None</p>");}});$(".pairingHistoryTable").tablesorter({theme:'ice',dateFormat:'us',widgets:['zebra']});}
function instAdmin_unpairSelectedDevices(selectedDevicesArray){$.get("/pb/widgets/DevicePairingManagementController/unpairSelected",{serviceName:$(".serviceNameHidden").text(),userEmail:$(".userEmailHidden").text(),devices:JSON.stringify(selectedDevicesArray),antiForgeryToken:$(".antiForgeryToken").text()}).done(function(html){$(".inst_admin_userPairedDevicesTable tbody").html(html);$(".inst_admin_userPairedDevicesTable").trigger("update");addDeviceSelectionChangeListener();handleEmptyPairedDevices(html);});}
function addDeviceSelectionChangeListener(){$("#instAdminUnpairSelected").prop("disabled",true);$("input[name=deviceId]").change(function(){if($("input[name=deviceId]:checked").length>0){$("#instAdminUnpairSelected").prop("disabled",false);}else{$("#instAdminUnpairSelected").prop("disabled",true);}});}
function handleEmptyPairedDevices(tableData){if(tableData.indexOf("<tr>")<0){$(".inst_admin_userPairedDevicesTable").replaceWith("<p>None</p>");$("#instAdminUnpairSelected").remove();$("#instAdminUnpairAll").remove();}}
function handleNonEmptyPairedDevices(tableData){if(tableData.indexOf("<tr>")>0){$(".inst_admin_userPairedDevicesTable").show();$(".unpairButtonsPanel").show();}}});
function emailDomainsConfirmation(){$(".confirmation").toggleClass("showEmailDomainsConfirmation");};/*! TableSorter (FORK) v2.24.5 */;(function($){'use strict';var ts=$.tablesorter={version:'2.24.5',parsers:[],widgets:[],defaults:{theme:'default',widthFixed:false,showProcessing:false,headerTemplate:'{content}',onRenderTemplate:null,onRenderHeader:null,cancelSelection:true,tabIndex:true,dateFormat:'mmddyyyy',sortMultiSortKey:'shiftKey',sortResetKey:'ctrlKey',usNumberFormat:true,delayInit:false,serverSideSorting:false,resort:true,headers:{},ignoreCase:true,sortForce:null,sortList:[],sortAppend:null,sortStable:false,sortInitialOrder:'asc',sortLocaleCompare:false,sortReset:false,sortRestart:false,emptyTo:'bottom',stringTo:'max',textExtraction:'basic',textAttribute:'data-text',textSorter:null,numberSorter:null,widgets:[],widgetOptions:{zebra:['even','odd']},initWidgets:true,widgetClass:'widget-{name}',initialized:null,tableClass:'',cssAsc:'',cssDesc:'',cssNone:'',cssHeader:'',cssHeaderRow:'',cssProcessing:'',cssChildRow:'tablesorter-childRow',cssInfoBlock:'tablesorter-infoOnly',cssNoSort:'tablesorter-noSort',cssIgnoreRow:'tablesorter-ignoreRow',cssIcon:'tablesorter-icon',cssIconNone:'',cssIconAsc:'',cssIconDesc:'',pointerClick:'click',pointerDown:'mousedown',pointerUp:'mouseup',selectorHeaders:'> thead th, > thead td',selectorSort:'th, td',selectorRemove:'.remove-me',debug:false,headerList:[],empties:{},strings:{},parsers:[]},css:{table:'tablesorter',cssHasChild:'tablesorter-hasChildRow',childRow:'tablesorter-childRow',colgroup:'tablesorter-colgroup',header:'tablesorter-header',headerRow:'tablesorter-headerRow',headerIn:'tablesorter-header-inner',icon:'tablesorter-icon',processing:'tablesorter-processing',sortAsc:'tablesorter-headerAsc',sortDesc:'tablesorter-headerDesc',sortNone:'tablesorter-headerUnSorted'},language:{sortAsc:'Ascending sort applied, ',sortDesc:'Descending sort applied, ',sortNone:'No sort applied, ',sortDisabled:'sorting is disabled',nextAsc:'activate to apply an ascending sort',nextDesc:'activate to apply a descending sort',nextNone:'activate to remove the sort'},regex:{templateContent:/\{content\}/g,templateIcon:/\{icon\}/g,templateName:/\{name\}/i,spaces:/\s+/g,nonWord:/\W/g,formElements:/(input|select|button|textarea)/i,chunk:/(^([+\-]?(?:\d*)(?:\.\d*)?(?:[eE][+\-]?\d+)?)?$|^0x[0-9a-f]+$|\d+)/gi,chunks:/(^\\0|\\0$)/,hex:/^0x[0-9a-f]+$/i,comma:/,/g,digitNonUS:/[\s|\.]/g,digitNegativeTest:/^\s*\([.\d]+\)/,digitNegativeReplace:/^\s*\(([.\d]+)\)/,digitTest:/^[\-+(]?\d+[)]?$/,digitReplace:/[,.'"\s]/g},string:{max:1,min:-1,emptymin:1,emptymax:-1,zero:0,none:0,'null':0,top:true,bottom:false},instanceMethods:{},setup:function(table,c){if(!table||!table.tHead||table.tBodies.length===0||table.hasInitialized===true){if(c.debug){if(table.hasInitialized){console.warn('Stopping initialization. Tablesorter has already been initialized');}else{console.error('Stopping initialization! No table, thead or tbody');}}
return;}
var tmp='',$table=$(table),meta=$.metadata;table.hasInitialized=false;table.isProcessing=true;table.config=c;$.data(table,'tablesorter',c);if(c.debug){console[console.group?'group':'log']('Initializing tablesorter');$.data(table,'startoveralltimer',new Date());}
c.supportsDataObject=(function(version){version[0]=parseInt(version[0],10);return(version[0]>1)||(version[0]===1&&parseInt(version[1],10)>=4);})($.fn.jquery.split('.'));c.emptyTo=c.emptyTo.toLowerCase();c.stringTo=c.stringTo.toLowerCase();c.last={sortList:[],clickedIndex:-1};if(!/tablesorter\-/.test($table.attr('class'))){tmp=(c.theme!==''?' tablesorter-'+c.theme:'');}
c.table=table;c.$table=$table.addClass(ts.css.table+' '+c.tableClass+tmp).attr('role','grid');c.$headers=$table.find(c.selectorHeaders);if(!c.namespace){c.namespace='.tablesorter'+Math.random().toString(16).slice(2);}else{c.namespace='.'+c.namespace.replace(ts.regex.nonWord,'');}
c.$table.children().children('tr').attr('role','row');c.$tbodies=$table.children('tbody:not(.'+c.cssInfoBlock+')').attr({'aria-live':'polite','aria-relevant':'all'});if(c.$table.children('caption').length){tmp=c.$table.children('caption')[0];if(!tmp.id){tmp.id=c.namespace.slice(1)+'caption';}
c.$table.attr('aria-labelledby',tmp.id);}
c.widgetInit={};c.textExtraction=c.$table.attr('data-text-extraction')||c.textExtraction||'basic';ts.buildHeaders(c);ts.fixColumnWidth(table);ts.addWidgetFromClass(table);ts.applyWidgetOptions(table);ts.setupParsers(c);c.totalRows=0;if(!c.delayInit){ts.buildCache(c);}
ts.bindEvents(table,c.$headers,true);ts.bindMethods(c);if(c.supportsDataObject&&typeof $table.data().sortlist!=='undefined'){c.sortList=$table.data().sortlist;}else if(meta&&($table.metadata()&&$table.metadata().sortlist)){c.sortList=$table.metadata().sortlist;}
ts.applyWidget(table,true);if(c.sortList.length>0){ts.sortOn(c,c.sortList,{},!c.initWidgets);}else{ts.setHeadersCss(c);if(c.initWidgets){ts.applyWidget(table,false);}}
if(c.showProcessing){$table.unbind('sortBegin'+c.namespace+' sortEnd'+c.namespace).bind('sortBegin'+c.namespace+' sortEnd'+c.namespace,function(e){clearTimeout(c.processTimer);ts.isProcessing(table);if(e.type==='sortBegin'){c.processTimer=setTimeout(function(){ts.isProcessing(table,true);},500);}});}
table.hasInitialized=true;table.isProcessing=false;if(c.debug){console.log('Overall initialization time: '+ts.benchmark($.data(table,'startoveralltimer')));if(c.debug&&console.groupEnd){console.groupEnd();}}
$table.trigger('tablesorter-initialized',table);if(typeof c.initialized==='function'){c.initialized(table);}},bindMethods:function(c){var $table=c.$table,namespace=c.namespace,events=('sortReset update updateRows updateAll updateHeaders addRows updateCell updateComplete '+'sorton appendCache updateCache applyWidgetId applyWidgets refreshWidgets destroy mouseup '+'mouseleave ').split(' ').join(namespace+' ');$table.unbind(events.replace(ts.regex.spaces,' ')).bind('sortReset'+namespace,function(e,callback){e.stopPropagation();ts.sortReset(this.config,callback);}).bind('updateAll'+namespace,function(e,resort,callback){e.stopPropagation();ts.updateAll(this.config,resort,callback);}).bind('update'+namespace+' updateRows'+namespace,function(e,resort,callback){e.stopPropagation();ts.update(this.config,resort,callback);}).bind('updateHeaders'+namespace,function(e,callback){e.stopPropagation();ts.updateHeaders(this.config,callback);}).bind('updateCell'+namespace,function(e,cell,resort,callback){e.stopPropagation();ts.updateCell(this.config,cell,resort,callback);}).bind('addRows'+namespace,function(e,$row,resort,callback){e.stopPropagation();ts.addRows(this.config,$row,resort,callback);}).bind('updateComplete'+namespace,function(){this.isUpdating=false;}).bind('sorton'+namespace,function(e,list,callback,init){e.stopPropagation();ts.sortOn(this.config,list,callback,init);}).bind('appendCache'+namespace,function(e,callback,init){e.stopPropagation();ts.appendCache(this.config,init);if($.isFunction(callback)){callback(this);}}).bind('updateCache'+namespace,function(e,callback,$tbodies){e.stopPropagation();ts.updateCache(this.config,callback,$tbodies);}).bind('applyWidgetId'+namespace,function(e,id){e.stopPropagation();ts.getWidgetById(id).format(this,this.config,this.config.widgetOptions);}).bind('applyWidgets'+namespace,function(e,init){e.stopPropagation();ts.applyWidget(this,init);}).bind('refreshWidgets'+namespace,function(e,all,dontapply){e.stopPropagation();ts.refreshWidgets(this,all,dontapply);}).bind('destroy'+namespace,function(e,removeClasses,callback){e.stopPropagation();ts.destroy(this,removeClasses,callback);}).bind('resetToLoadState'+namespace,function(e){e.stopPropagation();ts.removeWidget(this,true,false);c=$.extend(true,ts.defaults,c.originalSettings);this.hasInitialized=false;ts.setup(this,c);});},bindEvents:function(table,$headers,core){table=$(table)[0];var tmp,c=table.config,namespace=c.namespace,downTarget=null;if(core!==true){$headers.addClass(namespace.slice(1)+'_extra_headers');tmp=$.fn.closest?$headers.closest('table')[0]:$headers.parents('table')[0];if(tmp&&tmp.nodeName==='TABLE'&&tmp!==table){$(tmp).addClass(namespace.slice(1)+'_extra_table');}}
tmp=(c.pointerDown+' '+c.pointerUp+' '+c.pointerClick+' sort keyup ').replace(ts.regex.spaces,' ').split(' ').join(namespace+' ');$headers.find(c.selectorSort).add($headers.filter(c.selectorSort)).unbind(tmp).bind(tmp,function(e,external){var $cell,cell,temp,$target=$(e.target),type=' '+e.type+' ';if(((e.which||e.button)!==1&&!type.match(' '+c.pointerClick+' | sort | keyup '))||(type===' keyup '&&e.which!==13)||(type.match(' '+c.pointerClick+' ')&&typeof e.which!=='undefined')){return;}
if(type.match(' '+c.pointerUp+' ')&&downTarget!==e.target&&external!==true){return;}
if(type.match(' '+c.pointerDown+' ')){downTarget=e.target;temp=$target.jquery.split('.');if(temp[0]==='1'&&temp[1]<4){e.preventDefault();}
return;}
downTarget=null;if(ts.regex.formElements.test(e.target.nodeName)||$target.hasClass(c.cssNoSort)||$target.parents('.'+c.cssNoSort).length>0||$target.parents('button').length>0){return!c.cancelSelection;}
if(c.delayInit&&ts.isEmptyObject(c.cache)){ts.buildCache(c);}
$cell=$.fn.closest?$(this).closest('th, td'):/TH|TD/.test(this.nodeName)?$(this):$(this).parents('th, td');temp=$headers.index($cell);c.last.clickedIndex=(temp<0)?$cell.attr('data-column'):temp;cell=c.$headers[c.last.clickedIndex];if(cell&&!cell.sortDisabled){ts.initSort(c,cell,e);}});if(c.cancelSelection){$headers.attr('unselectable','on').bind('selectstart',false).css({'user-select':'none','MozUserSelect':'none'});}},buildHeaders:function(c){var $temp,icon,timer,indx;c.headerList=[];c.headerContent=[];c.sortVars=[];if(c.debug){timer=new Date();}
c.columns=ts.computeColumnIndex(c.$table.children('thead, tfoot').children('tr'));icon=c.cssIcon?'<i class="'+(c.cssIcon===ts.css.icon?ts.css.icon:c.cssIcon+' '+ts.css.icon)+'"></i>':'';c.$headers=$($.map(c.$table.find(c.selectorHeaders),function(elem,index){var configHeaders,header,column,template,tmp,$elem=$(elem);if($elem.parent().hasClass(c.cssIgnoreRow)){return;}
configHeaders=ts.getColumnData(c.table,c.headers,index,true);c.headerContent[index]=$elem.html();if(c.headerTemplate!==''&&!$elem.find('.'+ts.css.headerIn).length){template=c.headerTemplate.replace(ts.regex.templateContent,$elem.html()).replace(ts.regex.templateIcon,$elem.find('.'+ts.css.icon).length?'':icon);if(c.onRenderTemplate){header=c.onRenderTemplate.apply($elem,[index,template]);if(header&&typeof header==='string'){template=header;}}
$elem.html('<div class="'+ts.css.headerIn+'">'+template+'</div>');}
if(c.onRenderHeader){c.onRenderHeader.apply($elem,[index,c,c.$table]);}
column=parseInt($elem.attr('data-column'),10);elem.column=column;tmp=ts.getData($elem,configHeaders,'sortInitialOrder')||c.sortInitialOrder;c.sortVars[column]={count:-1,order:ts.formatSortingOrder(tmp)?[1,0,2]:[0,1,2],lockedOrder:false};tmp=ts.getData($elem,configHeaders,'lockedOrder')||false;if(typeof tmp!=='undefined'&&tmp!==false){c.sortVars[column].lockedOrder=true;c.sortVars[column].order=ts.formatSortingOrder(tmp)?[1,1,1]:[0,0,0];}
c.headerList[index]=elem;$elem.addClass(ts.css.header+' '+c.cssHeader).parent().addClass(ts.css.headerRow+' '+c.cssHeaderRow).attr('role','row');if(c.tabIndex){$elem.attr('tabindex',0);}
return elem;}));c.$headerIndexed=[];for(indx=0;indx<c.columns;indx++){if(ts.isEmptyObject(c.sortVars[indx])){c.sortVars[indx]={};}
$temp=c.$headers.filter('[data-column="'+indx+'"]');c.$headerIndexed[indx]=$temp.length?$temp.not('.sorter-false').length?$temp.not('.sorter-false').filter(':last'):$temp.filter(':last'):$();}
c.$table.find(c.selectorHeaders).attr({scope:'col',role:'columnheader'});ts.updateHeader(c);if(c.debug){console.log('Built headers:'+ts.benchmark(timer));console.log(c.$headers);}},addInstanceMethods:function(methods){$.extend(ts.instanceMethods,methods);},setupParsers:function(c,$tbodies){var rows,list,span,max,colIndex,indx,header,configHeaders,noParser,parser,extractor,time,tbody,len,table=c.table,tbodyIndex=0,debug={};c.$tbodies=c.$table.children('tbody:not(.'+c.cssInfoBlock+')');tbody=typeof $tbodies==='undefined'?c.$tbodies:$tbodies;len=tbody.length;if(len===0){return c.debug?console.warn('Warning: *Empty table!* Not building a parser cache'):'';}else if(c.debug){time=new Date();console[console.group?'group':'log']('Detecting parsers for each column');}
list={extractors:[],parsers:[]};while(tbodyIndex<len){rows=tbody[tbodyIndex].rows;if(rows.length){colIndex=0;max=c.columns;for(indx=0;indx<max;indx++){header=c.$headerIndexed[colIndex];if(header&&header.length){configHeaders=ts.getColumnData(table,c.headers,colIndex);extractor=ts.getParserById(ts.getData(header,configHeaders,'extractor'));parser=ts.getParserById(ts.getData(header,configHeaders,'sorter'));noParser=ts.getData(header,configHeaders,'parser')==='false';c.empties[colIndex]=(ts.getData(header,configHeaders,'empty')||c.emptyTo||(c.emptyToBottom?'bottom':'top')).toLowerCase();c.strings[colIndex]=(ts.getData(header,configHeaders,'string')||c.stringTo||'max').toLowerCase();if(noParser){parser=ts.getParserById('no-parser');}
if(!extractor){extractor=false;}
if(!parser){parser=ts.detectParserForColumn(c,rows,-1,colIndex);}
if(c.debug){debug['('+colIndex+') '+header.text()]={parser:parser.id,extractor:extractor?extractor.id:'none',string:c.strings[colIndex],empty:c.empties[colIndex]};}
list.parsers[colIndex]=parser;list.extractors[colIndex]=extractor;span=header[0].colSpan-1;if(span>0){colIndex+=span;max+=span;}}
colIndex++;}}
tbodyIndex+=(list.parsers.length)?len:1;}
if(c.debug){if(!ts.isEmptyObject(debug)){console[console.table?'table':'log'](debug);}else{console.warn('  No parsers detected!');}
console.log('Completed detecting parsers'+ts.benchmark(time));if(console.groupEnd){console.groupEnd();}}
c.parsers=list.parsers;c.extractors=list.extractors;},addParser:function(parser){var indx,len=ts.parsers.length,add=true;for(indx=0;indx<len;indx++){if(ts.parsers[indx].id.toLowerCase()===parser.id.toLowerCase()){add=false;}}
if(add){ts.parsers.push(parser);}},getParserById:function(name){if(name=='false'){return false;}
var indx,len=ts.parsers.length;for(indx=0;indx<len;indx++){if(ts.parsers[indx].id.toLowerCase()===(name.toString()).toLowerCase()){return ts.parsers[indx];}}
return false;},detectParserForColumn:function(c,rows,rowIndex,cellIndex){var cur,$node,indx=ts.parsers.length,node=false,nodeValue='',keepLooking=true;while(nodeValue===''&&keepLooking){rowIndex++;if(rows[rowIndex]){node=rows[rowIndex].cells[cellIndex];nodeValue=ts.getElementText(c,node,cellIndex);$node=$(node);if(c.debug){console.log('Checking if value was empty on row '+rowIndex+', column: '+
cellIndex+': "'+nodeValue+'"');}}else{keepLooking=false;}}
while(--indx>=0){cur=ts.parsers[indx];if(cur&&cur.id!=='text'&&cur.is&&cur.is(nodeValue,c.table,node,$node)){return cur;}}
return ts.getParserById('text');},getElementText:function(c,node,cellIndex){if(!node){return'';}
var tmp,extract=c.textExtraction||'',$node=node.jquery?node:$(node);if(typeof extract==='string'){if(extract==='basic'&&typeof(tmp=$node.attr(c.textAttribute))!=='undefined'){return $.trim(tmp);}
return $.trim(node.textContent||$node.text());}else{if(typeof extract==='function'){return $.trim(extract($node[0],c.table,cellIndex));}else if(typeof(tmp=ts.getColumnData(c.table,extract,cellIndex))==='function'){return $.trim(tmp($node[0],c.table,cellIndex));}}
return $.trim($node[0].textContent||$node.text());},getParsedText:function(c,cell,colIndex,txt){if(typeof txt==='undefined'){txt=ts.getElementText(c,cell,colIndex);}
var val=''+txt,parser=c.parsers[colIndex],extractor=c.extractors[colIndex];if(parser){if(extractor&&typeof extractor.format==='function'){txt=extractor.format(txt,c.table,cell,colIndex);}
val=parser.id==='no-parser'?'':parser.format(''+txt,c.table,cell,colIndex);if(c.ignoreCase&&typeof val==='string'){val=val.toLowerCase();}}
return val;},buildCache:function(c,callback,$tbodies){var cache,val,txt,rowIndex,colIndex,tbodyIndex,$tbody,$row,cols,$cells,cell,cacheTime,totalRows,rowData,prevRowData,colMax,span,cacheIndex,max,len,table=c.table,parsers=c.parsers;c.$tbodies=c.$table.children('tbody:not(.'+c.cssInfoBlock+')');$tbody=typeof $tbodies==='undefined'?c.$tbodies:$tbodies,c.cache={};c.totalRows=0;if(!parsers){return c.debug?console.warn('Warning: *Empty table!* Not building a cache'):'';}
if(c.debug){cacheTime=new Date();}
if(c.showProcessing){ts.isProcessing(table,true);}
for(tbodyIndex=0;tbodyIndex<$tbody.length;tbodyIndex++){colMax=[];cache=c.cache[tbodyIndex]={normalized:[]};totalRows=($tbody[tbodyIndex]&&$tbody[tbodyIndex].rows.length)||0;for(rowIndex=0;rowIndex<totalRows;++rowIndex){rowData={child:[],raw:[]};$row=$($tbody[tbodyIndex].rows[rowIndex]);cols=[];if($row.hasClass(c.cssChildRow)&&rowIndex!==0){len=cache.normalized.length-1;prevRowData=cache.normalized[len][c.columns];prevRowData.$row=prevRowData.$row.add($row);if(!$row.prev().hasClass(c.cssChildRow)){$row.prev().addClass(ts.css.cssHasChild);}
$cells=$row.children('th, td');len=prevRowData.child.length;prevRowData.child[len]=[];cacheIndex=0;max=c.columns;for(colIndex=0;colIndex<max;colIndex++){cell=$cells[colIndex];if(cell){prevRowData.child[len][colIndex]=ts.getParsedText(c,cell,colIndex);span=$cells[colIndex].colSpan-1;if(span>0){cacheIndex+=span;max+=span;}}
cacheIndex++;}
continue;}
rowData.$row=$row;rowData.order=rowIndex;cacheIndex=0;max=c.columns;for(colIndex=0;colIndex<max;++colIndex){cell=$row[0].cells[colIndex];if(typeof parsers[cacheIndex]==='undefined'){if(c.debug){console.warn('No parser found for column '+colIndex+'; cell:',cell,'does it have a header?');}}else if(cell){val=ts.getElementText(c,cell,cacheIndex);rowData.raw[cacheIndex]=val;txt=ts.getParsedText(c,cell,cacheIndex,val);cols[cacheIndex]=txt;if((parsers[cacheIndex].type||'').toLowerCase()==='numeric'){colMax[cacheIndex]=Math.max(Math.abs(txt)||0,colMax[cacheIndex]||0);}
span=cell.colSpan-1;if(span>0){cacheIndex+=span;max+=span;}}
cacheIndex++;}
cols[c.columns]=rowData;cache.normalized.push(cols);}
cache.colMax=colMax;c.totalRows+=cache.normalized.length;}
if(c.showProcessing){ts.isProcessing(table);}
if(c.debug){console.log('Building cache for '+totalRows+' rows'+ts.benchmark(cacheTime));}
if($.isFunction(callback)){callback(table);}},getColumnText:function(table,column,callback,rowFilter){table=$(table)[0];var tbodyIndex,rowIndex,cache,row,tbodyLen,rowLen,raw,parsed,$cell,result,hasCallback=typeof callback==='function',allColumns=column==='all',data={raw:[],parsed:[],$cell:[]},c=table.config;if(ts.isEmptyObject(c)){if(c.debug){console.warn('No cache found - aborting getColumnText function!');}}else{tbodyLen=c.$tbodies.length;for(tbodyIndex=0;tbodyIndex<tbodyLen;tbodyIndex++){cache=c.cache[tbodyIndex].normalized;rowLen=cache.length;for(rowIndex=0;rowIndex<rowLen;rowIndex++){row=cache[rowIndex];if(rowFilter&&!row[c.columns].$row.is(rowFilter)){continue;}
result=true;parsed=(allColumns)?row.slice(0,c.columns):row[column];row=row[c.columns];raw=(allColumns)?row.raw:row.raw[column];$cell=(allColumns)?row.$row.children():row.$row.children().eq(column);if(hasCallback){result=callback({tbodyIndex:tbodyIndex,rowIndex:rowIndex,parsed:parsed,raw:raw,$row:row.$row,$cell:$cell});}
if(result!==false){data.parsed.push(parsed);data.raw.push(raw);data.$cell.push($cell);}}}
return data;}},setHeadersCss:function(c){var $sorted,indx,column,list=c.sortList,len=list.length,none=ts.css.sortNone+' '+c.cssNone,css=[ts.css.sortAsc+' '+c.cssAsc,ts.css.sortDesc+' '+c.cssDesc],cssIcon=[c.cssIconAsc,c.cssIconDesc,c.cssIconNone],aria=['ascending','descending'],$headers=c.$table.find('tfoot tr').children().add($(c.namespace+'_extra_headers')).removeClass(css.join(' '));c.$headers.removeClass(css.join(' ')).addClass(none).attr('aria-sort','none').find('.'+ts.css.icon).removeClass(cssIcon.join(' ')).addClass(cssIcon[2]);for(indx=0;indx<len;indx++){if(list[indx][1]!==2){$sorted=c.$headers.filter(function(i){var include=true,$el=c.$headers.eq(i),col=parseInt($el.attr('data-column'),10),end=col+c.$headers[i].colSpan;for(;col<end;col++){include=include?ts.isValueInArray(col,c.sortList)>-1:false;}
return include;});$sorted=$sorted.not('.sorter-false').filter('[data-column="'+list[indx][0]+'"]'+(len===1?':last':''));if($sorted.length){for(column=0;column<$sorted.length;column++){if(!$sorted[column].sortDisabled){$sorted.eq(column).removeClass(none).addClass(css[list[indx][1]]).attr('aria-sort',aria[list[indx][1]]).find('.'+ts.css.icon).removeClass(cssIcon[2]).addClass(cssIcon[list[indx][1]]);}}
if($headers.length){$headers.filter('[data-column="'+list[indx][0]+'"]').removeClass(none).addClass(css[list[indx][1]]);}}}}
len=c.$headers.length;for(indx=0;indx<len;indx++){ts.setColumnAriaLabel(c,c.$headers.eq(indx));}},setColumnAriaLabel:function(c,$header,nextSort){if($header.length){var column=parseInt($header.attr('data-column'),10),tmp=$header.hasClass(ts.css.sortAsc)?'sortAsc':$header.hasClass(ts.css.sortDesc)?'sortDesc':'sortNone',txt=$.trim($header.text())+': '+ts.language[tmp];if($header.hasClass('sorter-false')||nextSort===false){txt+=ts.language.sortDisabled;}else{nextSort=c.sortVars[column].order[(c.sortVars[column].count+1)%(c.sortReset?3:2)];txt+=ts.language[nextSort===0?'nextAsc':nextSort===1?'nextDesc':'nextNone'];}
$header.attr('aria-label',txt);}},updateHeader:function(c){var index,isDisabled,$header,col,table=c.table,len=c.$headers.length;for(index=0;index<len;index++){$header=c.$headers.eq(index);col=ts.getColumnData(table,c.headers,index,true);isDisabled=ts.getData($header,col,'sorter')==='false'||ts.getData($header,col,'parser')==='false';ts.setColumnSort(c,$header,isDisabled);}},setColumnSort:function(c,$header,isDisabled){var id=c.table.id;$header[0].sortDisabled=isDisabled;$header[isDisabled?'addClass':'removeClass']('sorter-false').attr('aria-disabled',''+isDisabled);if(c.tabIndex){if(isDisabled){$header.removeAttr('tabindex');}else{$header.attr('tabindex','0');}}
if(id){if(isDisabled){$header.removeAttr('aria-controls');}else{$header.attr('aria-controls',id);}}},updateHeaderSortCount:function(c,list){var col,dir,group,indx,primary,temp,val,order,sortList=list||c.sortList,len=sortList.length;c.sortList=[];for(indx=0;indx<len;indx++){val=sortList[indx];col=parseInt(val[0],10);if(col<c.columns){order=c.sortVars[col].order;dir=(''+val[1]).match(/^(1|d|s|o|n)/);dir=dir?dir[0]:'';switch(dir){case'1':case'd':dir=1;break;case's':dir=primary||0;break;case'o':temp=order[(primary||0)%(c.sortReset?3:2)];dir=temp===0?1:temp===1?0:2;break;case'n':dir=order[(++c.sortVars[col].count)%(c.sortReset?3:2)];break;default:dir=0;break;}
primary=indx===0?dir:primary;group=[col,parseInt(dir,10)||0];c.sortList.push(group);dir=$.inArray(group[1],order);c.sortVars[col].count=dir>=0?dir:group[1]%(c.sortReset?3:2);}}},updateAll:function(c,resort,callback){var table=c.table;table.isUpdating=true;ts.refreshWidgets(table,true,true);ts.buildHeaders(c);ts.bindEvents(table,c.$headers,true);ts.bindMethods(c);ts.commonUpdate(c,resort,callback);},update:function(c,resort,callback){var table=c.table;table.isUpdating=true;ts.updateHeader(c);ts.commonUpdate(c,resort,callback);},updateHeaders:function(c,callback){c.table.isUpdating=true;ts.buildHeaders(c);ts.bindEvents(c.table,c.$headers,true);ts.resortComplete(c,callback);},updateCell:function(c,cell,resort,callback){c.table.isUpdating=true;c.$table.find(c.selectorRemove).remove();var tmp,indx,row,icell,cache,len,$tbodies=c.$tbodies,$cell=$(cell),tbodyIndex=$tbodies.index($.fn.closest?$cell.closest('tbody'):$cell.parents('tbody').filter(':first')),tbcache=c.cache[tbodyIndex],$row=$.fn.closest?$cell.closest('tr'):$cell.parents('tr').filter(':first');cell=$cell[0];if($tbodies.length&&tbodyIndex>=0){row=$tbodies.eq(tbodyIndex).find('tr').index($row);cache=tbcache.normalized[row];len=$row[0].cells.length;if(len!==c.columns){icell=0;tmp=false;for(indx=0;indx<len;indx++){if(!tmp&&$row[0].cells[indx]!==cell){icell+=$row[0].cells[indx].colSpan;}else{tmp=true;}}}else{icell=$cell.index();}
tmp=ts.getElementText(c,cell,icell);cache[c.columns].raw[icell]=tmp;tmp=ts.getParsedText(c,cell,icell,tmp);cache[icell]=tmp;cache[c.columns].$row=$row;if((c.parsers[icell].type||'').toLowerCase()==='numeric'){tbcache.colMax[icell]=Math.max(Math.abs(tmp)||0,tbcache.colMax[icell]||0);}
tmp=resort!=='undefined'?resort:c.resort;if(tmp!==false){ts.checkResort(c,tmp,callback);}else{ts.resortComplete(c,callback);}}},addRows:function(c,$row,resort,callback){var txt,val,tbodyIndex,rowIndex,rows,cellIndex,len,cacheIndex,rowData,cells,cell,span,valid=typeof $row==='string'&&c.$tbodies.length===1&&/<tr/.test($row||''),table=c.table;if(valid){$row=$($row);c.$tbodies.append($row);}else if(!$row||!($row instanceof jQuery)||($.fn.closest?$row.closest('table')[0]:$row.parents('table')[0])!==c.table){if(c.debug){console.error('addRows method requires (1) a jQuery selector reference to rows that have already '+'been added to the table, or (2) row HTML string to be added to a table with only one tbody');}
return false;}
table.isUpdating=true;if(ts.isEmptyObject(c.cache)){ts.updateHeader(c);ts.commonUpdate(c,resort,callback);}else{rows=$row.filter('tr').attr('role','row').length;tbodyIndex=c.$tbodies.index($row.parents('tbody').filter(':first'));if(!(c.parsers&&c.parsers.length)){ts.setupParsers(c);}
for(rowIndex=0;rowIndex<rows;rowIndex++){cacheIndex=0;len=$row[rowIndex].cells.length;cells=[];rowData={child:[],raw:[],$row:$row.eq(rowIndex),order:c.cache[tbodyIndex].normalized.length};for(cellIndex=0;cellIndex<len;cellIndex++){cell=$row[rowIndex].cells[cellIndex];txt=ts.getElementText(c,cell,cacheIndex);rowData.raw[cacheIndex]=txt;val=ts.getParsedText(c,cell,cacheIndex,txt);cells[cacheIndex]=val;if((c.parsers[cacheIndex].type||'').toLowerCase()==='numeric'){c.cache[tbodyIndex].colMax[cacheIndex]=Math.max(Math.abs(val)||0,c.cache[tbodyIndex].colMax[cacheIndex]||0);}
span=cell.colSpan-1;if(span>0){cacheIndex+=span;}
cacheIndex++;}
cells[c.columns]=rowData;c.cache[tbodyIndex].normalized.push(cells);}
ts.checkResort(c,resort,callback);}},updateCache:function(c,callback,$tbodies){if(!(c.parsers&&c.parsers.length)){ts.setupParsers(c,$tbodies);}
ts.buildCache(c,callback,$tbodies);},appendCache:function(c,init){var parsed,totalRows,$tbody,$curTbody,rowIndex,tbodyIndex,appendTime,table=c.table,wo=c.widgetOptions,$tbodies=c.$tbodies,rows=[],cache=c.cache;if(ts.isEmptyObject(cache)){return c.appender?c.appender(table,rows):table.isUpdating?c.$table.trigger('updateComplete',table):'';}
if(c.debug){appendTime=new Date();}
for(tbodyIndex=0;tbodyIndex<$tbodies.length;tbodyIndex++){$tbody=$tbodies.eq(tbodyIndex);if($tbody.length){$curTbody=ts.processTbody(table,$tbody,true);parsed=cache[tbodyIndex].normalized;totalRows=parsed.length;for(rowIndex=0;rowIndex<totalRows;rowIndex++){rows.push(parsed[rowIndex][c.columns].$row);if(!c.appender||(c.pager&&(!c.pager.removeRows||!wo.pager_removeRows)&&!c.pager.ajax)){$curTbody.append(parsed[rowIndex][c.columns].$row);}}
ts.processTbody(table,$curTbody,false);}}
if(c.appender){c.appender(table,rows);}
if(c.debug){console.log('Rebuilt table'+ts.benchmark(appendTime));}
if(!init&&!c.appender){ts.applyWidget(table);}
if(table.isUpdating){c.$table.trigger('updateComplete',table);}},commonUpdate:function(c,resort,callback){c.$table.find(c.selectorRemove).remove();ts.setupParsers(c);ts.buildCache(c);ts.checkResort(c,resort,callback);},initSort:function(c,cell,event){if(c.table.isUpdating){return setTimeout(function(){ts.initSort(c,cell,event);},50);}
var arry,indx,headerIndx,dir,temp,tmp,$header,notMultiSort=!event[c.sortMultiSortKey],table=c.table,len=c.$headers.length,col=parseInt($(cell).attr('data-column'),10),order=c.sortVars[col].order;c.$table.trigger('sortStart',table);c.sortVars[col].count=event[c.sortResetKey]?2:(c.sortVars[col].count+1)%(c.sortReset?3:2);if(c.sortRestart){for(headerIndx=0;headerIndx<len;headerIndx++){$header=c.$headers.eq(headerIndx);tmp=parseInt($header.attr('data-column'),10);if(col!==tmp&&(notMultiSort||$header.hasClass(ts.css.sortNone))){c.sortVars[tmp].count=-1;}}}
if(notMultiSort){c.sortList=[];c.last.sortList=[];if(c.sortForce!==null){arry=c.sortForce;for(indx=0;indx<arry.length;indx++){if(arry[indx][0]!==col){c.sortList.push(arry[indx]);}}}
dir=order[c.sortVars[col].count];if(dir<2){c.sortList.push([col,dir]);if(cell.colSpan>1){for(indx=1;indx<cell.colSpan;indx++){c.sortList.push([col+indx,dir]);c.sortVars[col+indx].count=$.inArray(dir,order);}}}}else{c.sortList=$.extend([],c.last.sortList);if(ts.isValueInArray(col,c.sortList)>=0){for(indx=0;indx<c.sortList.length;indx++){tmp=c.sortList[indx];if(tmp[0]===col){tmp[1]=order[c.sortVars[col].count];if(tmp[1]===2){c.sortList.splice(indx,1);c.sortVars[col].count=-1;}}}}else{dir=order[c.sortVars[col].count];if(dir<2){c.sortList.push([col,dir]);if(cell.colSpan>1){for(indx=1;indx<cell.colSpan;indx++){c.sortList.push([col+indx,dir]);c.sortVars[col+indx].count=$.inArray(dir,order);}}}}}
c.last.sortList=$.extend([],c.sortList);if(c.sortList.length&&c.sortAppend){arry=$.isArray(c.sortAppend)?c.sortAppend:c.sortAppend[c.sortList[0][0]];if(!ts.isEmptyObject(arry)){for(indx=0;indx<arry.length;indx++){if(arry[indx][0]!==col&&ts.isValueInArray(arry[indx][0],c.sortList)<0){dir=arry[indx][1];temp=(''+dir).match(/^(a|d|s|o|n)/);if(temp){tmp=c.sortList[0][1];switch(temp[0]){case'd':dir=1;break;case's':dir=tmp;break;case'o':dir=tmp===0?1:0;break;case'n':dir=(tmp+1)%(c.sortReset?3:2);break;default:dir=0;break;}}
c.sortList.push([arry[indx][0],dir]);}}}}
c.$table.trigger('sortBegin',table);setTimeout(function(){ts.setHeadersCss(c);ts.multisort(c);ts.appendCache(c);c.$table.trigger('sortEnd',table);},1);},multisort:function(c){var tbodyIndex,sortTime,colMax,rows,table=c.table,dir=0,textSorter=c.textSorter||'',sortList=c.sortList,sortLen=sortList.length,len=c.$tbodies.length;if(c.serverSideSorting||ts.isEmptyObject(c.cache)){return;}
if(c.debug){sortTime=new Date();}
for(tbodyIndex=0;tbodyIndex<len;tbodyIndex++){colMax=c.cache[tbodyIndex].colMax;rows=c.cache[tbodyIndex].normalized;rows.sort(function(a,b){var sortIndex,num,col,order,sort,x,y;for(sortIndex=0;sortIndex<sortLen;sortIndex++){col=sortList[sortIndex][0];order=sortList[sortIndex][1];dir=order===0;if(c.sortStable&&a[col]===b[col]&&sortLen===1){return a[c.columns].order-b[c.columns].order;}
num=/n/i.test(ts.getSortType(c.parsers,col));if(num&&c.strings[col]){if(typeof(ts.string[c.strings[col]])==='boolean'){num=(dir?1:-1)*(ts.string[c.strings[col]]?-1:1);}else{num=(c.strings[col])?ts.string[c.strings[col]]||0:0;}
sort=c.numberSorter?c.numberSorter(a[col],b[col],dir,colMax[col],table):ts['sortNumeric'+(dir?'Asc':'Desc')](a[col],b[col],num,colMax[col],col,c);}else{x=dir?a:b;y=dir?b:a;if(typeof textSorter==='function'){sort=textSorter(x[col],y[col],dir,col,table);}else if(typeof textSorter==='object'&&textSorter.hasOwnProperty(col)){sort=textSorter[col](x[col],y[col],dir,col,table);}else{sort=ts['sortNatural'+(dir?'Asc':'Desc')](a[col],b[col],col,c);}}
if(sort){return sort;}}
return a[c.columns].order-b[c.columns].order;});}
if(c.debug){console.log('Applying sort '+sortList.toString()+ts.benchmark(sortTime));}},resortComplete:function(c,callback){if(c.table.isUpdating){c.$table.trigger('updateComplete',c.table);}
if($.isFunction(callback)){callback(c.table);}},checkResort:function(c,resort,callback){var sortList=$.isArray(resort)?resort:c.sortList,resrt=typeof resort==='undefined'?c.resort:resort;if(resrt!==false&&!c.serverSideSorting&&!c.table.isProcessing){if(sortList.length){ts.sortOn(c,sortList,function(){ts.resortComplete(c,callback);},true);}else{ts.sortReset(c,function(){ts.resortComplete(c,callback);ts.applyWidget(c.table,false);});}}else{ts.resortComplete(c,callback);ts.applyWidget(c.table,false);}},sortOn:function(c,list,callback,init){var table=c.table;c.$table.trigger('sortStart',table);ts.updateHeaderSortCount(c,list);ts.setHeadersCss(c);if(c.delayInit&&ts.isEmptyObject(c.cache)){ts.buildCache(c);}
c.$table.trigger('sortBegin',table);ts.multisort(c);ts.appendCache(c,init);c.$table.trigger('sortEnd',table);ts.applyWidget(table);if($.isFunction(callback)){callback(table);}},sortReset:function(c,callback){c.sortList=[];ts.setHeadersCss(c);ts.multisort(c);ts.appendCache(c);if($.isFunction(callback)){callback(c.table);}},getSortType:function(parsers,column){return(parsers&&parsers[column])?parsers[column].type||'':'';},formatSortingOrder:function(val){return(/^d/i.test(val)||val===1);},sortNatural:function(a,b){if(a===b){return 0;}
var aNum,bNum,aFloat,bFloat,indx,max,regex=ts.regex;if(regex.hex.test(b)){aNum=parseInt(a.match(regex.hex),16);bNum=parseInt(b.match(regex.hex),16);if(aNum<bNum){return-1;}
if(aNum>bNum){return 1;}}
aNum=a.replace(regex.chunk,'\\0$1\\0').replace(regex.chunks,'').split('\\0');bNum=b.replace(regex.chunk,'\\0$1\\0').replace(regex.chunks,'').split('\\0');max=Math.max(aNum.length,bNum.length);for(indx=0;indx<max;indx++){aFloat=isNaN(aNum[indx])?aNum[indx]||0:parseFloat(aNum[indx])||0;bFloat=isNaN(bNum[indx])?bNum[indx]||0:parseFloat(bNum[indx])||0;if(isNaN(aFloat)!==isNaN(bFloat)){return isNaN(aFloat)?1:-1;}
if(typeof aFloat!==typeof bFloat){aFloat+='';bFloat+='';}
if(aFloat<bFloat){return-1;}
if(aFloat>bFloat){return 1;}}
return 0;},sortNaturalAsc:function(a,b,col,c){if(a===b){return 0;}
var empty=ts.string[(c.empties[col]||c.emptyTo)];if(a===''&&empty!==0){return typeof empty==='boolean'?(empty?-1:1):-empty||-1;}
if(b===''&&empty!==0){return typeof empty==='boolean'?(empty?1:-1):empty||1;}
return ts.sortNatural(a,b);},sortNaturalDesc:function(a,b,col,c){if(a===b){return 0;}
var empty=ts.string[(c.empties[col]||c.emptyTo)];if(a===''&&empty!==0){return typeof empty==='boolean'?(empty?-1:1):empty||1;}
if(b===''&&empty!==0){return typeof empty==='boolean'?(empty?1:-1):-empty||-1;}
return ts.sortNatural(b,a);},sortText:function(a,b){return a>b?1:(a<b?-1:0);},getTextValue:function(val,num,max){if(max){var indx,len=val?val.length:0,n=max+num;for(indx=0;indx<len;indx++){n+=val.charCodeAt(indx);}
return num*n;}
return 0;},sortNumericAsc:function(a,b,num,max,col,c){if(a===b){return 0;}
var empty=ts.string[(c.empties[col]||c.emptyTo)];if(a===''&&empty!==0){return typeof empty==='boolean'?(empty?-1:1):-empty||-1;}
if(b===''&&empty!==0){return typeof empty==='boolean'?(empty?1:-1):empty||1;}
if(isNaN(a)){a=ts.getTextValue(a,num,max);}
if(isNaN(b)){b=ts.getTextValue(b,num,max);}
return a-b;},sortNumericDesc:function(a,b,num,max,col,c){if(a===b){return 0;}
var empty=ts.string[(c.empties[col]||c.emptyTo)];if(a===''&&empty!==0){return typeof empty==='boolean'?(empty?-1:1):empty||1;}
if(b===''&&empty!==0){return typeof empty==='boolean'?(empty?1:-1):-empty||-1;}
if(isNaN(a)){a=ts.getTextValue(a,num,max);}
if(isNaN(b)){b=ts.getTextValue(b,num,max);}
return b-a;},sortNumeric:function(a,b){return a-b;},addWidget:function(widget){ts.widgets.push(widget);},hasWidget:function($table,name){$table=$($table);return $table.length&&$table[0].config&&$table[0].config.widgetInit[name]||false;},getWidgetById:function(name){var indx,widget,len=ts.widgets.length;for(indx=0;indx<len;indx++){widget=ts.widgets[indx];if(widget&&widget.id&&widget.id.toLowerCase()===name.toLowerCase()){return widget;}}},applyWidgetOptions:function(table){var indx,widget,c=table.config,len=c.widgets.length;if(len){for(indx=0;indx<len;indx++){widget=ts.getWidgetById(c.widgets[indx]);if(widget&&widget.options){c.widgetOptions=$.extend(true,{},widget.options,c.widgetOptions);}}}},addWidgetFromClass:function(table){var len,indx,c=table.config,regex='\\s'+c.widgetClass.replace(ts.regex.templateName,'([\\w-]+)')+'\\s',widgetClass=new RegExp(regex,'g'),widget=(' '+c.table.className+' ').match(widgetClass);if(widget){len=widget.length;for(indx=0;indx<len;indx++){c.widgets.push(widget[indx].replace(widgetClass,'$1'));}}},applyWidget:function(table,init,callback){table=$(table)[0];var indx,len,names,widget,name,applied,time,time2,c=table.config,widgets=[];if(init!==false&&table.hasInitialized&&(table.isApplyingWidgets||table.isUpdating)){return;}
if(c.debug){time=new Date();}
ts.addWidgetFromClass(table);if(c.widgets.length){table.isApplyingWidgets=true;c.widgets=$.grep(c.widgets,function(val,index){return $.inArray(val,c.widgets)===index;});names=c.widgets||[];len=names.length;for(indx=0;indx<len;indx++){widget=ts.getWidgetById(names[indx]);if(widget&&widget.id){if(!widget.priority){widget.priority=10;}
widgets[indx]=widget;}}
widgets.sort(function(a,b){return a.priority<b.priority?-1:a.priority===b.priority?0:1;});len=widgets.length;if(c.debug){console[console.group?'group':'log']('Start '+(init?'initializing':'applying')+' widgets');}
for(indx=0;indx<len;indx++){widget=widgets[indx];if(widget){name=widget.id;applied=false;if(c.debug){time2=new Date();}
if(init||!(c.widgetInit[name])){c.widgetInit[name]=true;if(table.hasInitialized){ts.applyWidgetOptions(table);}
if(typeof widget.init==='function'){applied=true;if(c.debug){console[console.group?'group':'log']('Initializing '+name+' widget');}
widget.init(table,widget,table.config,table.config.widgetOptions);}}
if(!init&&typeof widget.format==='function'){applied=true;if(c.debug){console[console.group?'group':'log']('Updating '+name+' widget');}
widget.format(table,table.config,table.config.widgetOptions,false);}
if(c.debug){if(applied){console.log('Completed '+(init?'initializing ':'applying ')+name+' widget'+ts.benchmark(time2));if(console.groupEnd){console.groupEnd();}}}}}
if(c.debug&&console.groupEnd){console.groupEnd();}
if(!init&&typeof callback==='function'){callback(table);}}
setTimeout(function(){table.isApplyingWidgets=false;$.data(table,'lastWidgetApplication',new Date());c.$table.trigger('tablesorter-ready');},0);if(c.debug){widget=c.widgets.length;console.log('Completed '+
(init===true?'initializing ':'applying ')+widget+' widget'+(widget!==1?'s':'')+ts.benchmark(time));}},removeWidget:function(table,name,refreshing){table=$(table)[0];var index,widget,indx,len,c=table.config;if(name===true){name=[];len=ts.widgets.length;for(indx=0;indx<len;indx++){widget=ts.widgets[indx];if(widget&&widget.id){name.push(widget.id);}}}else{name=($.isArray(name)?name.join(','):name||'').toLowerCase().split(/[\s,]+/);}
len=name.length;for(index=0;index<len;index++){widget=ts.getWidgetById(name[index]);indx=$.inArray(name[index],c.widgets);if(widget&&widget.remove){if(c.debug){console.log((refreshing?'Refreshing':'Removing')+' "'+name[index]+'" widget');}
widget.remove(table,c,c.widgetOptions,refreshing);c.widgetInit[name[index]]=false;}
if(indx>=0&&refreshing!==true){c.widgets.splice(indx,1);}}},refreshWidgets:function(table,doAll,dontapply){table=$(table)[0];var indx,widget,c=table.config,curWidgets=c.widgets,widgets=ts.widgets,len=widgets.length,list=[],callback=function(table){$(table).trigger('refreshComplete');};for(indx=0;indx<len;indx++){widget=widgets[indx];if(widget&&widget.id&&(doAll||$.inArray(widget.id,curWidgets)<0)){list.push(widget.id);}}
ts.removeWidget(table,list.join(','),true);if(dontapply!==true){ts.applyWidget(table,doAll||false,callback);if(doAll){ts.applyWidget(table,false,callback);}}else{callback(table);}},benchmark:function(diff){return(' ( '+(new Date().getTime()-diff.getTime())+'ms )');},log:function(){console.log(arguments);},isEmptyObject:function(obj){for(var name in obj){return false;}
return true;},isValueInArray:function(column,arry){var indx,len=arry&&arry.length||0;for(indx=0;indx<len;indx++){if(arry[indx][0]===column){return indx;}}
return-1;},formatFloat:function(str,table){if(typeof str!=='string'||str===''){return str;}
var num,usFormat=table&&table.config?table.config.usNumberFormat!==false:typeof table!=='undefined'?table:true;if(usFormat){str=str.replace(ts.regex.comma,'');}else{str=str.replace(ts.regex.digitNonUS,'').replace(ts.regex.comma,'.');}
if(ts.regex.digitNegativeTest.test(str)){str=str.replace(ts.regex.digitNegativeReplace,'-$1');}
num=parseFloat(str);return isNaN(num)?$.trim(str):num;},isDigit:function(str){return isNaN(str)?ts.regex.digitTest.test(str.toString().replace(ts.regex.digitReplace,'')):str!=='';},computeColumnIndex:function($rows){var i,j,k,l,$cell,cell,cells,rowIndex,cellId,rowSpan,colSpan,firstAvailCol,matrix=[],matrixrow=[];for(i=0;i<$rows.length;i++){cells=$rows[i].cells;for(j=0;j<cells.length;j++){cell=cells[j];$cell=$(cell);rowIndex=cell.parentNode.rowIndex;cellId=rowIndex+'-'+$cell.index();rowSpan=cell.rowSpan||1;colSpan=cell.colSpan||1;if(typeof matrix[rowIndex]==='undefined'){matrix[rowIndex]=[];}
for(k=0;k<matrix[rowIndex].length+1;k++){if(typeof matrix[rowIndex][k]==='undefined'){firstAvailCol=k;break;}}
if(cell.setAttribute){cell.setAttribute('data-column',firstAvailCol);}else{$cell.attr('data-column',firstAvailCol);}
for(k=rowIndex;k<rowIndex+rowSpan;k++){if(typeof matrix[k]==='undefined'){matrix[k]=[];}
matrixrow=matrix[k];for(l=firstAvailCol;l<firstAvailCol+colSpan;l++){matrixrow[l]='x';}}}}
return matrixrow.length;},fixColumnWidth:function(table){table=$(table)[0];var overallWidth,percent,$tbodies,len,index,c=table.config,$colgroup=c.$table.children('colgroup');if($colgroup.length&&$colgroup.hasClass(ts.css.colgroup)){$colgroup.remove();}
if(c.widthFixed&&c.$table.children('colgroup').length===0){$colgroup=$('<colgroup class="'+ts.css.colgroup+'">');overallWidth=c.$table.width();$tbodies=c.$tbodies.find('tr:first').children(':visible');len=$tbodies.length;for(index=0;index<len;index++){percent=parseInt(($tbodies.eq(index).width()/overallWidth)*1000,10)/10+'%';$colgroup.append($('<col>').css('width',percent));}
c.$table.prepend($colgroup);}},getData:function(header,configHeader,key){var meta,cl4ss,val='',$header=$(header);if(!$header.length){return'';}
meta=$.metadata?$header.metadata():false;cl4ss=' '+($header.attr('class')||'');if(typeof $header.data(key)!=='undefined'||typeof $header.data(key.toLowerCase())!=='undefined'){val+=$header.data(key)||$header.data(key.toLowerCase());}else if(meta&&typeof meta[key]!=='undefined'){val+=meta[key];}else if(configHeader&&typeof configHeader[key]!=='undefined'){val+=configHeader[key];}else if(cl4ss!==' '&&cl4ss.match(' '+key+'-')){val=cl4ss.match(new RegExp('\\s'+key+'-([\\w-]+)'))[1]||'';}
return $.trim(val);},getColumnData:function(table,obj,indx,getCell,$headers){if(typeof obj==='undefined'||obj===null){return;}
table=$(table)[0];var $header,key,c=table.config,$cells=($headers||c.$headers),$cell=c.$headerIndexed&&c.$headerIndexed[indx]||$cells.filter('[data-column="'+indx+'"]:last');if(obj[indx]){return getCell?obj[indx]:obj[$cells.index($cell)];}
for(key in obj){if(typeof key==='string'){$header=$cell.filter(key).add($cell.find(key));if($header.length){return obj[key];}}}
return;},isProcessing:function($table,toggle,$headers){$table=$($table);var c=$table[0].config,$header=$headers||$table.find('.'+ts.css.header);if(toggle){if(typeof $headers!=='undefined'&&c.sortList.length>0){$header=$header.filter(function(){return this.sortDisabled?false:ts.isValueInArray(parseFloat($(this).attr('data-column')),c.sortList)>=0;});}
$table.add($header).addClass(ts.css.processing+' '+c.cssProcessing);}else{$table.add($header).removeClass(ts.css.processing+' '+c.cssProcessing);}},processTbody:function(table,$tb,getIt){table=$(table)[0];if(getIt){table.isProcessing=true;$tb.before('<colgroup class="tablesorter-savemyplace"/>');return $.fn.detach?$tb.detach():$tb.remove();}
var holdr=$(table).find('colgroup.tablesorter-savemyplace');$tb.insertAfter(holdr);holdr.remove();table.isProcessing=false;},clearTableBody:function(table){$(table)[0].config.$tbodies.children().detach();},characterEquivalents:{'a':'\u00e1\u00e0\u00e2\u00e3\u00e4\u0105\u00e5','A':'\u00c1\u00c0\u00c2\u00c3\u00c4\u0104\u00c5','c':'\u00e7\u0107\u010d','C':'\u00c7\u0106\u010c','e':'\u00e9\u00e8\u00ea\u00eb\u011b\u0119','E':'\u00c9\u00c8\u00ca\u00cb\u011a\u0118','i':'\u00ed\u00ec\u0130\u00ee\u00ef\u0131','I':'\u00cd\u00cc\u0130\u00ce\u00cf','o':'\u00f3\u00f2\u00f4\u00f5\u00f6\u014d','O':'\u00d3\u00d2\u00d4\u00d5\u00d6\u014c','ss':'\u00df','SS':'\u1e9e','u':'\u00fa\u00f9\u00fb\u00fc\u016f','U':'\u00da\u00d9\u00db\u00dc\u016e'},replaceAccents:function(str){var chr,acc='[',eq=ts.characterEquivalents;if(!ts.characterRegex){ts.characterRegexArray={};for(chr in eq){if(typeof chr==='string'){acc+=eq[chr];ts.characterRegexArray[chr]=new RegExp('['+eq[chr]+']','g');}}
ts.characterRegex=new RegExp(acc+']');}
if(ts.characterRegex.test(str)){for(chr in eq){if(typeof chr==='string'){str=str.replace(ts.characterRegexArray[chr],chr);}}}
return str;},restoreHeaders:function(table){var index,$cell,c=$(table)[0].config,$headers=c.$table.find(c.selectorHeaders),len=$headers.length;for(index=0;index<len;index++){$cell=$headers.eq(index);if($cell.find('.'+ts.css.headerIn).length){$cell.html(c.headerContent[index]);}}},destroy:function(table,removeClasses,callback){table=$(table)[0];if(!table.hasInitialized){return;}
ts.removeWidget(table,true,false);var events,$t=$(table),c=table.config,debug=c.debug,$h=$t.find('thead:first'),$r=$h.find('tr.'+ts.css.headerRow).removeClass(ts.css.headerRow+' '+c.cssHeaderRow),$f=$t.find('tfoot:first > tr').children('th, td');if(removeClasses===false&&$.inArray('uitheme',c.widgets)>=0){$t.trigger('applyWidgetId',['uitheme']);$t.trigger('applyWidgetId',['zebra']);}
$h.find('tr').not($r).remove();events='sortReset update updateRows updateAll updateHeaders updateCell addRows updateComplete sorton '+'appendCache updateCache applyWidgetId applyWidgets refreshWidgets destroy mouseup mouseleave keypress '+'sortBegin sortEnd resetToLoadState '.split(' ').join(c.namespace+' ');$t.removeData('tablesorter').unbind(events.replace(ts.regex.spaces,' '));c.$headers.add($f).removeClass([ts.css.header,c.cssHeader,c.cssAsc,c.cssDesc,ts.css.sortAsc,ts.css.sortDesc,ts.css.sortNone].join(' ')).removeAttr('data-column').removeAttr('aria-label').attr('aria-disabled','true');$r.find(c.selectorSort).unbind(('mousedown mouseup keypress '.split(' ').join(c.namespace+' ')).replace(ts.regex.spaces,' '));ts.restoreHeaders(table);$t.toggleClass(ts.css.table+' '+c.tableClass+' tablesorter-'+c.theme,removeClasses===false);table.hasInitialized=false;delete table.config.cache;if(typeof callback==='function'){callback(table);}
if(debug){console.log('tablesorter has been removed');}}};$.fn.tablesorter=function(settings){return this.each(function(){var table=this,c=$.extend(true,{},ts.defaults,settings,ts.instanceMethods);c.originalSettings=settings;if(!table.hasInitialized&&ts.buildTable&&this.nodeName!=='TABLE'){ts.buildTable(table,c);}else{ts.setup(table,c);}});};if(!(window.console&&window.console.log)){ts.logs=[];console={};console.log=console.warn=console.error=console.table=function(){var arg=arguments.length>1?arguments:arguments[0];ts.logs.push({date:Date.now(),log:arg});};}
ts.addParser({id:'no-parser',is:function(){return false;},format:function(){return'';},type:'text'});ts.addParser({id:'text',is:function(){return true;},format:function(str,table){var c=table.config;if(str){str=$.trim(c.ignoreCase?str.toLocaleLowerCase():str);str=c.sortLocaleCompare?ts.replaceAccents(str):str;}
return str;},type:'text'});ts.regex.nondigit=/[^\w,. \-()]/g;ts.addParser({id:'digit',is:function(str){return ts.isDigit(str);},format:function(str,table){var num=ts.formatFloat((str||'').replace(ts.regex.nondigit,''),table);return str&&typeof num==='number'?num:str?$.trim(str&&table.config.ignoreCase?str.toLocaleLowerCase():str):str;},type:'numeric'});ts.regex.currencyReplace=/[+\-,. ]/g;ts.regex.currencyTest=/^\(?\d+[\u00a3$\u20ac\u00a4\u00a5\u00a2?.]|[\u00a3$\u20ac\u00a4\u00a5\u00a2?.]\d+\)?$/;ts.addParser({id:'currency',is:function(str){str=(str||'').replace(ts.regex.currencyReplace,'');return ts.regex.currencyTest.test(str);},format:function(str,table){var num=ts.formatFloat((str||'').replace(ts.regex.nondigit,''),table);return str&&typeof num==='number'?num:str?$.trim(str&&table.config.ignoreCase?str.toLocaleLowerCase():str):str;},type:'numeric'});ts.regex.urlProtocolTest=/^(https?|ftp|file):\/\//;ts.regex.urlProtocolReplace=/(https?|ftp|file):\/\//;ts.addParser({id:'url',is:function(str){return ts.regex.urlProtocolTest.test(str);},format:function(str){return str?$.trim(str.replace(ts.regex.urlProtocolReplace,'')):str;},parsed:true,type:'text'});ts.regex.dash=/-/g;ts.regex.isoDate=/^\d{4}[\/\-]\d{1,2}[\/\-]\d{1,2}/;ts.addParser({id:'isoDate',is:function(str){return ts.regex.isoDate.test(str);},format:function(str,table){var date=str?new Date(str.replace(ts.regex.dash,'/')):str;return date instanceof Date&&isFinite(date)?date.getTime():str;},type:'numeric'});ts.regex.percent=/%/g;ts.regex.percentTest=/(\d\s*?%|%\s*?\d)/;ts.addParser({id:'percent',is:function(str){return ts.regex.percentTest.test(str)&&str.length<15;},format:function(str,table){return str?ts.formatFloat(str.replace(ts.regex.percent,''),table):str;},type:'numeric'});ts.addParser({id:'image',is:function(str,table,node,$node){return $node.find('img').length>0;},format:function(str,table,cell){return $(cell).find('img').attr(table.config.imgAttr||'alt')||str;},parsed:true,type:'text'});ts.regex.dateReplace=/(\S)([AP]M)$/i;ts.regex.usLongDateTest1=/^[A-Z]{3,10}\.?\s+\d{1,2},?\s+(\d{4})(\s+\d{1,2}:\d{2}(:\d{2})?(\s+[AP]M)?)?$/i;ts.regex.usLongDateTest2=/^\d{1,2}\s+[A-Z]{3,10}\s+\d{4}/i;ts.addParser({id:'usLongDate',is:function(str){return ts.regex.usLongDateTest1.test(str)||ts.regex.usLongDateTest2.test(str);},format:function(str,table){var date=str?new Date(str.replace(ts.regex.dateReplace,'$1 $2')):str;return date instanceof Date&&isFinite(date)?date.getTime():str;},type:'numeric'});ts.regex.shortDateTest=/(^\d{1,2}[\/\s]\d{1,2}[\/\s]\d{4})|(^\d{4}[\/\s]\d{1,2}[\/\s]\d{1,2})/;ts.regex.shortDateReplace=/[\-.,]/g;ts.regex.shortDateXXY=/(\d{1,2})[\/\s](\d{1,2})[\/\s](\d{4})/;ts.regex.shortDateYMD=/(\d{4})[\/\s](\d{1,2})[\/\s](\d{1,2})/;ts.convertFormat=function(dateString,format){dateString=(dateString||'').replace(ts.regex.spaces,' ').replace(ts.regex.shortDateReplace,'/');if(format==='mmddyyyy'){dateString=dateString.replace(ts.regex.shortDateXXY,'$3/$1/$2');}else if(format==='ddmmyyyy'){dateString=dateString.replace(ts.regex.shortDateXXY,'$3/$2/$1');}else if(format==='yyyymmdd'){dateString=dateString.replace(ts.regex.shortDateYMD,'$1/$2/$3');}
var date=new Date(dateString);return date instanceof Date&&isFinite(date)?date.getTime():'';};ts.addParser({id:'shortDate',is:function(str){str=(str||'').replace(ts.regex.spaces,' ').replace(ts.regex.shortDateReplace,'/');return ts.regex.shortDateTest.test(str);},format:function(str,table,cell,cellIndex){if(str){var c=table.config,$header=c.$headerIndexed[cellIndex],format=$header.length&&$header.data('dateFormat')||ts.getData($header,ts.getColumnData(table,c.headers,cellIndex),'dateFormat')||c.dateFormat;if($header.length){$header.data('dateFormat',format);}
return ts.convertFormat(str,format)||str;}
return str;},type:'numeric'});ts.regex.timeTest=/^([1-9]|1[0-2]):([0-5]\d)(\s[AP]M)|((?:[01]\d|[2][0-4]):[0-5]\d)$/i;ts.regex.timeMatch=/([1-9]|1[0-2]):([0-5]\d)(\s[AP]M)|((?:[01]\d|[2][0-4]):[0-5]\d)/i;ts.addParser({id:'time',is:function(str){return ts.regex.timeTest.test(str);},format:function(str,table){var temp,timePart=(str||'').match(ts.regex.timeMatch),orig=new Date(str),time=str&&(timePart!==null?timePart[0]:'00:00 AM'),date=time?new Date('2000/01/01 '+time.replace(ts.regex.dateReplace,'$1 $2')):time;if(date instanceof Date&&isFinite(date)){temp=orig instanceof Date&&isFinite(orig)?orig.getTime():0;return temp?parseFloat(date.getTime()+'.'+orig.getTime()):date.getTime();}
return str;},type:'numeric'});ts.addParser({id:'metadata',is:function(){return false;},format:function(str,table,cell){var c=table.config,p=(!c.parserMetadataName)?'sortValue':c.parserMetadataName;return $(cell).metadata()[p];},type:'numeric'});ts.addWidget({id:'zebra',priority:90,format:function(table,c,wo){var $visibleRows,$row,count,isEven,tbodyIndex,rowIndex,len,child=new RegExp(c.cssChildRow,'i'),$tbodies=c.$tbodies.add($(c.namespace+'_extra_table').children('tbody:not(.'+c.cssInfoBlock+')'));for(tbodyIndex=0;tbodyIndex<$tbodies.length;tbodyIndex++){count=0;$visibleRows=$tbodies.eq(tbodyIndex).children('tr:visible').not(c.selectorRemove);len=$visibleRows.length;for(rowIndex=0;rowIndex<len;rowIndex++){$row=$visibleRows.eq(rowIndex);if(!child.test($row[0].className)){count++;}
isEven=(count%2===0);$row.removeClass(wo.zebra[isEven?1:0]).addClass(wo.zebra[isEven?0:1]);}}},remove:function(table,c,wo,refreshing){if(refreshing){return;}
var tbodyIndex,$tbody,$tbodies=c.$tbodies,toRemove=(wo.zebra||['even','odd']).join(' ');for(tbodyIndex=0;tbodyIndex<$tbodies.length;tbodyIndex++){$tbody=ts.processTbody(table,$tbodies.eq(tbodyIndex),true);$tbody.children().removeClass(toRemove);ts.processTbody(table,$tbody,false);}}});})(jQuery);/*!
 * tablesorter (FORK) pager plugin
 * updated 11/10/2015 (v2.24.5)
 */
/*jshint browser:true, jquery:true, unused:false */
;(function($) {
	'use strict';
	/*jshint supernew:true */
	var ts = $.tablesorter;

	$.extend({ tablesorterPager: new function() {

		this.defaults = {
			// target the pager markup
			container: null,

			// use this format: "http://mydatabase.com?page={page}&size={size}&{sortList:col}&{filterList:fcol}"
			// where {page} is replaced by the page number, {size} is replaced by the number of records to show,
			// {sortList:col} adds the sortList to the url into a "col" array, and {filterList:fcol} adds
			// the filterList to the url into an "fcol" array.
			// So a sortList = [[2,0],[3,0]] becomes "&col[2]=0&col[3]=0" in the url
			// and a filterList = [[2,Blue],[3,13]] becomes "&fcol[2]=Blue&fcol[3]=13" in the url
			ajaxUrl: null,

			// modify the url after all processing has been applied
			customAjaxUrl: function(table, url) { return url; },

			// ajax error callback from $.tablesorter.showError function
			// ajaxError: function( config, xhr, settings, exception ){ return exception; };
			// returning false will abort the error message
			ajaxError: null,

			// modify the $.ajax object to allow complete control over your ajax requests
			ajaxObject: {
				dataType: 'json'
			},

			// set this to false if you want to block ajax loading on init
			processAjaxOnInit: true,

			// process ajax so that the following information is returned:
			// [ total_rows (number), rows (array of arrays), headers (array; optional) ]
			// example:
			// [
			//   100,  // total rows
			//   [
			//     [ "row1cell1", "row1cell2", ... "row1cellN" ],
			//     [ "row2cell1", "row2cell2", ... "row2cellN" ],
			//     ...
			//     [ "rowNcell1", "rowNcell2", ... "rowNcellN" ]
			//   ],
			//   [ "header1", "header2", ... "headerN" ] // optional
			// ]
			ajaxProcessing: function(ajax){ return [ 0, [], null ]; },

			// output default: '{page}/{totalPages}'
			// possible variables: {size}, {page}, {totalPages}, {filteredPages}, {startRow},
			// {endRow}, {filteredRows} and {totalRows}
			output: '{startRow} to {endRow} of {totalRows} rows', // '{page}/{totalPages}'

			// apply disabled classname to the pager arrows when the rows at either extreme is visible
			updateArrows: true,

			// starting page of the pager (zero based index)
			page: 0,

			// reset pager after filtering; set to desired page #
			// set to false to not change page at filter start
			pageReset: 0,

			// Number of visible rows
			size: 10,

			// Number of options to include in the pager number selector
			maxOptionSize: 20,

			// Save pager page & size if the storage script is loaded (requires $.tablesorter.storage in jquery.tablesorter.widgets.js)
			savePages: true,

			// defines custom storage key
			storageKey: 'tablesorter-pager',

			// if true, the table will remain the same height no matter how many records are displayed. The space is made up by an empty
			// table row set to a height to compensate; default is false
			fixedHeight: false,

			// count child rows towards the set page size? (set true if it is a visible table row within the pager)
			// if true, child row(s) may not appear to be attached to its parent row, may be split across pages or
			// may distort the table if rowspan or cellspans are included.
			countChildRows: false,

			// remove rows from the table to speed up the sort of large tables.
			// setting this to false, only hides the non-visible rows; needed if you plan to add/remove rows with the pager enabled.
			removeRows: false, // removing rows in larger tables speeds up the sort

			// css class names of pager arrows
			cssFirst: '.first', // go to first page arrow
			cssPrev: '.prev', // previous page arrow
			cssNext: '.next', // next page arrow
			cssLast: '.last', // go to last page arrow
			cssGoto: '.gotoPage', // go to page selector - select dropdown that sets the current page
			cssPageDisplay: '.pagedisplay', // location of where the "output" is displayed
			cssPageSize: '.pagesize', // page size selector - select dropdown that sets the "size" option
			cssErrorRow: 'tablesorter-errorRow', // error information row

			// class added to arrows when at the extremes (i.e. prev/first arrows are "disabled" when on the first page)
			cssDisabled: 'disabled', // Note there is no period "." in front of this class name

			// stuff not set by the user
			totalRows: 0,
			totalPages: 0,
			filteredRows: 0,
			filteredPages: 0,
			ajaxCounter: 0,
			currentFilters: [],
			startRow: 0,
			endRow: 0,
			$size: null,
			last: {}

		};

		var pagerEvents = 'filterInit filterStart filterEnd sortEnd disablePager enablePager destroyPager updateComplete ' +
				'pageSize pageSet pageAndSize pagerUpdate refreshComplete ',

			$this = this,

		// hide arrows at extremes
			pagerArrows = function(p, disable) {
				var a = 'addClass',
					r = 'removeClass',
					d = p.cssDisabled,
					dis = !!disable,
					first = ( dis || p.page === 0 ),
					tp = Math.min( p.totalPages, p.filteredPages ),
					last = ( dis || (p.page === tp - 1) || tp === 0 );
				if ( p.updateArrows ) {
					p.$container.find(p.cssFirst + ',' + p.cssPrev)[ first ? a : r ](d).attr('aria-disabled', first);
					p.$container.find(p.cssNext + ',' + p.cssLast)[ last ? a : r ](d).attr('aria-disabled', last);
				}
			},

			calcFilters = function(table, p) {
				var normalized, indx, len,
					c = table.config,
					hasFilters = c.$table.hasClass('hasFilters');
				if (hasFilters && !p.ajaxUrl) {
					if (ts.isEmptyObject(c.cache)) {
						// delayInit: true so nothing is in the cache
						p.filteredRows = p.totalRows = c.$tbodies.eq(0).children('tr').not( p.countChildRows ? '' : '.' + c.cssChildRow ).length;
					} else {
						p.filteredRows = 0;
						normalized = c.cache[0].normalized;
						len = normalized.length;
						for (indx = 0; indx < len; indx++) {
							p.filteredRows += p.regexRows.test(normalized[indx][c.columns].$row[0].className) ? 0 : 1;
						}
					}
				} else if (!hasFilters) {
					p.filteredRows = p.totalRows;
				}
			},

			updatePageDisplay = function(table, p, completed) {
				if ( p.initializing ) { return; }
				var s, t, $out, indx, len, options,
					c = table.config,
					namespace = c.namespace + 'pager',
					sz = parsePageSize( p, p.size, 'get' ); // don't allow dividing by zero
				if (p.countChildRows) { t.push(c.cssChildRow); }
				p.totalPages = Math.ceil( p.totalRows / sz ); // needed for "pageSize" method
				c.totalRows = p.totalRows;
				parsePageNumber( p );
				calcFilters(table, p);
				c.filteredRows = p.filteredRows;
				p.filteredPages = Math.ceil( p.filteredRows / sz ) || 0;
				if ( Math.min( p.totalPages, p.filteredPages ) >= 0 ) {
					t = (p.size * p.page > p.filteredRows) && completed;
					p.page = (t) ? p.pageReset || 0 : p.page;
					p.startRow = (t) ? p.size * p.page + 1 : (p.filteredRows === 0 ? 0 : p.size * p.page + 1);
					p.endRow = Math.min( p.filteredRows, p.totalRows, p.size * ( p.page + 1 ) );
					$out = p.$container.find(p.cssPageDisplay);
					// form the output string (can now get a new output string from the server)
					s = ( p.ajaxData && p.ajaxData.output ? p.ajaxData.output || p.output : p.output )
						// {page} = one-based index; {page+#} = zero based index +/- value
						.replace(/\{page([\-+]\d+)?\}/gi, function(m, n){
							return p.totalPages ? p.page + (n ? parseInt(n, 10) : 1) : 0;
						})
						// {totalPages}, {extra}, {extra:0} (array) or {extra : key} (object)
						.replace(/\{\w+(\s*:\s*\w+)?\}/gi, function(m){
							var len, indx,
								str = m.replace(/[{}\s]/g, ''),
								extra = str.split(':'),
								data = p.ajaxData,
							// return zero for default page/row numbers
								deflt = /(rows?|pages?)$/i.test(str) ? 0 : '';
							if (/(startRow|page)/.test(extra[0]) && extra[1] === 'input') {
								len = ('' + (extra[0] === 'page' ? p.totalPages : p.totalRows)).length;
								indx = extra[0] === 'page' ? p.page + 1 : p.startRow;
								return '<input type="text" class="ts-' + extra[0] + '" style="max-width:' + len + 'em" value="' + indx + '"/>';
							}
							return extra.length > 1 && data && data[extra[0]] ? data[extra[0]][extra[1]] : p[str] || (data ? data[str] : deflt) || deflt;
						});
					if ( p.$goto.length ) {
						t = '';
						options = buildPageSelect(p);
						len = options.length;
						for (indx = 0; indx < len; indx++) {
							t += '<option value="' + options[indx] + '">' + options[indx] + '</option>';
						}
						// innerHTML doesn't work in IE9 - http://support2.microsoft.com/kb/276228
						p.$goto.html(t).val( p.page + 1 );
					}
					if ($out.length) {
						$out[ ($out[0].nodeName === 'INPUT') ? 'val' : 'html' ](s);
						// rebind startRow/page inputs
						$out.find('.ts-startRow, .ts-page').unbind('change' + namespace).bind('change' + namespace, function(){
							var v = $(this).val(),
								pg = $(this).hasClass('ts-startRow') ? Math.floor( v / p.size ) + 1 : v;
							c.$table.trigger('pageSet' + namespace, [ pg ]);
						});
					}
				}
				pagerArrows(p);
				fixHeight(table, p);
				if (p.initialized && completed !== false) {
					if (c.debug) {
						console.log('Pager: Triggering pagerComplete');
					}
					c.$table.trigger('pagerComplete', p);
					// save pager info to storage
					if (p.savePages && ts.storage) {
						ts.storage(table, p.storageKey, {
							page : p.page,
							size : p.size
						});
					}
				}
			},

			buildPageSelect = function(p) {
				// Filter the options page number link array if it's larger than 'maxOptionSize'
				// as large page set links will slow the browser on large dom inserts
				var i, central_focus_size, focus_option_pages, insert_index, option_length, focus_length,
					pg = Math.min( p.totalPages, p.filteredPages ) || 1,
				// make skip set size multiples of 5
					skip_set_size = Math.ceil( ( pg / p.maxOptionSize ) / 5 ) * 5,
					large_collection = pg > p.maxOptionSize,
					current_page = p.page + 1,
					start_page = skip_set_size,
					end_page = pg - skip_set_size,
					option_pages = [ 1 ],
				// construct default options pages array
					option_pages_start_page = (large_collection) ? skip_set_size : 1;

				for ( i = option_pages_start_page; i <= pg; ) {
					option_pages.push(i);
					i = i + ( large_collection ? skip_set_size : 1 );
				}
				option_pages.push(pg);
				if (large_collection) {
					focus_option_pages = [];
					// don't allow central focus size to be > 5 on either side of current page
					central_focus_size = Math.max( Math.floor( p.maxOptionSize / skip_set_size ) - 1, 5 );

					start_page = current_page - central_focus_size;
					if (start_page < 1) { start_page = 1; }
					end_page = current_page + central_focus_size;
					if (end_page > pg) { end_page = pg; }
					// construct an array to get a focus set around the current page
					for (i = start_page; i <= end_page ; i++) {
						focus_option_pages.push(i);
					}

					// keep unique values
					option_pages = $.grep(option_pages, function(value, indx) {
						return $.inArray(value, option_pages) === indx;
					});

					option_length = option_pages.length;
					focus_length = focus_option_pages.length;

					// make sure at all option_pages aren't replaced
					if (option_length - focus_length > skip_set_size / 2 && option_length + focus_length > p.maxOptionSize ) {
						insert_index = Math.floor(option_length / 2) - Math.floor(focus_length / 2);
						Array.prototype.splice.apply(option_pages, [ insert_index, focus_length ]);
					}
					option_pages = option_pages.concat(focus_option_pages);

				}

				// keep unique values again
				option_pages = $.grep(option_pages, function(value, indx) {
					return $.inArray(value, option_pages) === indx;
				})
					.sort(function(a, b) { return a - b; });

				return option_pages;
			},

			fixHeight = function(table, p) {
				var d, h,
					c = table.config,
					$b = c.$tbodies.eq(0);
				$b.find('tr.pagerSavedHeightSpacer').remove();
				if (p.fixedHeight && !p.isDisabled) {
					h = $.data(table, 'pagerSavedHeight');
					if (h) {
						d = h - $b.height();
						if ( d > 5 && $.data(table, 'pagerLastSize') === p.size && $b.children('tr:visible').length < p.size ) {
							$b.append('<tr class="pagerSavedHeightSpacer ' + c.selectorRemove.slice(1) + '" style="height:' + d + 'px;"></tr>');
						}
					}
				}
			},

			changeHeight = function(table, p) {
				var h,
					c = table.config,
					$b = c.$tbodies.eq(0);
				$b.find('tr.pagerSavedHeightSpacer').remove();
				if (!$b.children('tr:visible').length) {
					$b.append('<tr class="pagerSavedHeightSpacer ' + c.selectorRemove.slice(1) + '"><td>&nbsp</td></tr>');
				}
				h = $b.children('tr').eq(0).height() * p.size;
				$.data(table, 'pagerSavedHeight', h);
				fixHeight(table, p);
				$.data(table, 'pagerLastSize', p.size);
			},

			hideRows = function(table, p){
				if (!p.ajaxUrl) {
					var i,
						lastIndex = 0,
						c = table.config,
						rows = c.$tbodies.eq(0).children('tr'),
						l = rows.length,
						s = ( p.page * p.size ),
						e =  s + p.size,
						f = c.widgetOptions && c.widgetOptions.filter_filteredRow || 'filtered',
						last = 0, // for cache indexing
						j = 0; // size counter
					p.cacheIndex = [];
					for ( i = 0; i < l; i++ ){
						if ( !rows[i].className.match(f) ) {
							if (j === s && rows[i].className.match(c.cssChildRow)) {
								// hide child rows @ start of pager (if already visible)
								rows[i].style.display = 'none';
							} else {
								rows[i].style.display = ( j >= s && j < e ) ? '' : 'none';
								if (last !== j && j >= s && j < e) {
									p.cacheIndex.push(i);
									last = j;
								}
								// don't count child rows
								j += rows[i].className.match(c.cssChildRow + '|' + c.selectorRemove.slice(1)) && !p.countChildRows ? 0 : 1;
								if ( j === e && rows[i].style.display !== 'none' && rows[i].className.match(ts.css.cssHasChild) ) {
									lastIndex = i;
								}
							}
						}
					}
					// add any attached child rows to last row of pager. Fixes part of issue #396
					if ( lastIndex > 0 && rows[lastIndex].className.match(ts.css.cssHasChild) ) {
						while ( ++lastIndex < l && rows[lastIndex].className.match(c.cssChildRow) ) {
							rows[lastIndex].style.display = '';
						}
					}
				}
			},

			hideRowsSetup = function(table, p){
				p.size = parsePageSize( p, p.$size.val(), 'get' );
				p.$size.val( parsePageSize( p, p.size, 'set' ) );
				$.data(table, 'pagerLastSize', p.size);
				pagerArrows(p);
				if ( !p.removeRows ) {
					hideRows(table, p);
					$(table).bind('sortEnd filterEnd '.split(' ').join(table.config.namespace + 'pager '), function(){
						hideRows(table, p);
					});
				}
			},

			renderAjax = function(data, table, p, xhr, settings, exception){
				// process data
				if ( typeof p.ajaxProcessing === 'function' ) {

					// in case nothing is returned by ajax, empty out the table; see #1032
					// but do it before calling pager_ajaxProcessing because that function may add content
					// directly to the table
					table.config.$tbodies.eq(0).empty();

					// ajaxProcessing result: [ total, rows, headers ]
					var i, j, t, hsh, $f, $sh, $headers, $h, icon, th, d, l, rr_count, len,
						c = table.config,
						$table = c.$table,
						tds = '',
						result = p.ajaxProcessing(data, table, xhr) || [ 0, [] ],
						hl = $table.find('thead th').length;

					// Clean up any previous error.
					ts.showError( table );

					if ( exception ) {
						if (c.debug) {
							console.error('Pager: >> Ajax Error', xhr, settings, exception);
						}
						ts.showError( table, xhr, settings, exception );
						c.$tbodies.eq(0).children('tr').detach();
						p.totalRows = 0;
					} else {
						// process ajax object
						if (!$.isArray(result)) {
							p.ajaxData = result;
							c.totalRows = p.totalRows = result.total;
							c.filteredRows = p.filteredRows = typeof result.filteredRows !== 'undefined' ? result.filteredRows : result.total;
							th = result.headers;
							d = result.rows || [];
						} else {
							// allow [ total, rows, headers ]  or [ rows, total, headers ]
							t = isNaN(result[0]) && !isNaN(result[1]);
							// ensure a zero returned row count doesn't fail the logical ||
							rr_count = result[t ? 1 : 0];
							p.totalRows = isNaN(rr_count) ? p.totalRows || 0 : rr_count;
							// can't set filtered rows when returning an array
							c.totalRows = c.filteredRows = p.filteredRows = p.totalRows;
							// set row data to empty array if nothing found - see http://stackoverflow.com/q/30875583/145346
							d = p.totalRows === 0 ? [] : result[t ? 0 : 1] || []; // row data
							th = result[2]; // headers
						}
						l = d && d.length;
						if (d instanceof jQuery) {
							if (p.processAjaxOnInit) {
								// append jQuery object
								c.$tbodies.eq(0).empty();
								c.$tbodies.eq(0).append(d);
							}
						} else if (l) {
							// build table from array
							for ( i = 0; i < l; i++ ) {
								tds += '<tr>';
								for ( j = 0; j < d[i].length; j++ ) {
									// build tbody cells; watch for data containing HTML markup - see #434
									tds += /^\s*<td/.test(d[i][j]) ? $.trim(d[i][j]) : '<td>' + d[i][j] + '</td>';
								}
								tds += '</tr>';
							}
							// add rows to first tbody
							if (p.processAjaxOnInit) {
								c.$tbodies.eq(0).html( tds );
							}
						}
						p.processAjaxOnInit = true;
						// only add new header text if the length matches
						if ( th && th.length === hl ) {
							hsh = $table.hasClass('hasStickyHeaders');
							$sh = hsh ? c.widgetOptions.$sticky.children('thead:first').children('tr').children() : '';
							$f = $table.find('tfoot tr:first').children();
							// don't change td headers (may contain pager)
							$headers = c.$headers.filter( 'th ' );
							len = $headers.length;
							for ( j = 0; j < len; j++ ) {
								$h = $headers.eq( j );
								// add new test within the first span it finds, or just in the header
								if ( $h.find('.' + ts.css.icon).length ) {
									icon = $h.find('.' + ts.css.icon).clone(true);
									$h.find('.tablesorter-header-inner').html( th[j] ).append(icon);
									if ( hsh && $sh.length ) {
										icon = $sh.eq(j).find('.' + ts.css.icon).clone(true);
										$sh.eq(j).find('.tablesorter-header-inner').html( th[j] ).append(icon);
									}
								} else {
									$h.find('.tablesorter-header-inner').html( th[j] );
									if (hsh && $sh.length) {
										$sh.eq(j).find('.tablesorter-header-inner').html( th[j] );
									}
								}
								$f.eq(j).html( th[j] );
							}
						}
					}
					if (c.showProcessing) {
						ts.isProcessing(table); // remove loading icon
					}
					// make sure last pager settings are saved, prevents multiple server side calls with
					// the same parameters
					p.totalPages = Math.ceil( p.totalRows / parsePageSize( p, p.size, 'get' ) );
					p.last.totalRows = p.totalRows;
					p.last.currentFilters = p.currentFilters;
					p.last.sortList = (c.sortList || []).join(',');
					updatePageDisplay(table, p, false);
					// tablesorter core updateCache (not pager)
					ts.updateCache( c, function(){
						if (p.initialized) {
							// apply widgets after table has rendered & after a delay to prevent
							// multiple applyWidget blocking code from blocking this trigger
							setTimeout(function(){
								if (c.debug) {
									console.log('Pager: Triggering pagerChange');
								}
								$table.trigger( 'pagerChange', p );
								ts.applyWidget( table );
								updatePageDisplay(table, p, true);
							}, 0);
						}
					});

				}
				if (!p.initialized) {
					p.initialized = true;
					p.initializing = false;
					if (table.config.debug) {
						console.log('Pager: Triggering pagerInitialized');
					}
					$(table).trigger( 'pagerInitialized', p );
					ts.applyWidget( table );
					updatePageDisplay(table, p);
				}
			},

			getAjax = function(table, p) {
				var url = getAjaxUrl(table, p),
					$doc = $(document),
					counter,
					c = table.config,
					namespace = c.namespace + 'pager';
				if ( url !== '' ) {
					if (c.showProcessing) {
						ts.isProcessing(table, true); // show loading icon
					}
					$doc.bind('ajaxError' + namespace, function(e, xhr, settings, exception) {
						renderAjax(null, table, p, xhr, settings, exception);
						$doc.unbind('ajaxError' + namespace);
					});

					counter = ++p.ajaxCounter;

					p.last.ajaxUrl = url; // remember processed url
					p.ajaxObject.url = url; // from the ajaxUrl option and modified by customAjaxUrl
					p.ajaxObject.success = function(data, status, jqxhr) {
						// Refuse to process old ajax commands that were overwritten by new ones - see #443
						if (counter < p.ajaxCounter){
							return;
						}
						renderAjax(data, table, p, jqxhr);
						$doc.unbind('ajaxError' + namespace);
						if (typeof p.oldAjaxSuccess === 'function') {
							p.oldAjaxSuccess(data);
						}
					};
					if (c.debug) {
						console.log('Pager: Ajax initialized', p.ajaxObject);
					}
					$.ajax(p.ajaxObject);
				}
			},

			getAjaxUrl = function(table, p) {
				var indx, len,
					c = table.config,
					url = (p.ajaxUrl) ? p.ajaxUrl
						// allow using "{page+1}" in the url string to switch to a non-zero based index
						.replace(/\{page([\-+]\d+)?\}/, function(s, n){ return p.page + (n ? parseInt(n, 10) : 0); })
						.replace(/\{size\}/g, p.size) : '',
					sortList = c.sortList,
					filterList = p.currentFilters || $(table).data('lastSearch') || [],
					sortCol = url.match(/\{\s*sort(?:List)?\s*:\s*(\w*)\s*\}/),
					filterCol = url.match(/\{\s*filter(?:List)?\s*:\s*(\w*)\s*\}/),
					arry = [];
				if (sortCol) {
					sortCol = sortCol[1];
					len = sortList.length;
					for (indx = 0; indx < len; indx++) {
						arry.push(sortCol + '[' + sortList[indx][0] + ']=' + sortList[indx][1]);
					}
					// if the arry is empty, just add the col parameter... "&{sortList:col}" becomes "&col"
					url = url.replace(/\{\s*sort(?:List)?\s*:\s*(\w*)\s*\}/g, arry.length ? arry.join('&') : sortCol );
					arry = [];
				}
				if (filterCol) {
					filterCol = filterCol[1];
					len = filterList.length;
					for (indx = 0; indx < len; indx++) {
						if (filterList[indx]) {
							arry.push(filterCol + '[' + indx + ']=' + encodeURIComponent(filterList[indx]));
						}
					}
					// if the arry is empty, just add the fcol parameter... "&{filterList:fcol}" becomes "&fcol"
					url = url.replace(/\{\s*filter(?:List)?\s*:\s*(\w*)\s*\}/g, arry.length ? arry.join('&') : filterCol );
					p.currentFilters = filterList;
				}
				if ( typeof p.customAjaxUrl === 'function' ) {
					url = p.customAjaxUrl(table, url);
				}
				if (c.debug) {
					console.log('Pager: Ajax url = ' + url);
				}
				return url;
			},

			renderTable = function(table, rows, p) {
				var $tb, index, count, added,
					$t = $(table),
					c = table.config,
					f = c.$table.hasClass('hasFilters'),
					l = rows && rows.length || 0, // rows may be undefined
					s = ( p.page * p.size ),
					e = p.size;
				if ( l < 1 ) {
					if (c.debug) {
						console.warn('Pager: >> No rows for pager to render');
					}
					// empty table, abort!
					return;
				}
				if ( p.page >= p.totalPages ) {
					// lets not render the table more than once
					moveToLastPage(table, p);
				}
				p.cacheIndex = [];
				p.isDisabled = false; // needed because sorting will change the page and re-enable the pager
				if (p.initialized) {
					if (c.debug) {
						console.log('Pager: Triggering pagerChange');
					}
					$t.trigger( 'pagerChange', p );
				}
				if ( !p.removeRows ) {
					hideRows(table, p);
				} else {
					ts.clearTableBody(table);
					$tb = ts.processTbody(table, c.$tbodies.eq(0), true);
					// not filtered, start from the calculated starting point (s)
					// if filtered, start from zero
					index = f ? 0 : s;
					count = f ? 0 : s;
					added = 0;
					while (added < e && index < rows.length) {
						if (!f || !/filtered/.test(rows[index][0].className)){
							count++;
							if (count > s && added <= e) {
								added++;
								p.cacheIndex.push(index);
								$tb.append(rows[index]);
							}
						}
						index++;
					}
					ts.processTbody(table, $tb, false);
				}
				updatePageDisplay(table, p);
				if (table.isUpdating) {
					if (c.debug) {
						console.log('Pager: Triggering updateComplete');
					}
					$t.trigger('updateComplete', [ table, true ]);
				}
			},

			showAllRows = function(table, p) {
				var index, $controls, len;
				if ( p.ajax ) {
					pagerArrows(p, true);
				} else {
					$.data(table, 'pagerLastPage', p.page);
					$.data(table, 'pagerLastSize', p.size);
					p.page = 0;
					p.size = p.totalRows;
					p.totalPages = 1;
					$(table)
						.addClass('pagerDisabled')
						.removeAttr('aria-describedby')
						.find('tr.pagerSavedHeightSpacer').remove();
					renderTable(table, table.config.rowsCopy, p);
					p.isDisabled = true;
					ts.applyWidget( table );
					if (table.config.debug) {
						console.log('Pager: Disabled');
					}
				}
				// disable size selector
				$controls = p.$size
					.add( p.$goto )
					.add( p.$container.find( '.ts-startRow, .ts-page' ) );
				len = $controls.length;
				for ( index = 0; index < len; index++ ) {
					$controls.eq( index )
						.attr( 'aria-disabled', 'true' )
						.addClass( p.cssDisabled )[0].disabled = true;
				}
			},

		// updateCache if delayInit: true
			updateCache = function(table) {
				var c = table.config,
					p = c.pager;
				// tablesorter core updateCache (not pager)
				ts.updateCache( c, function(){
					var i,
						rows = [],
						n = table.config.cache[0].normalized;
					p.totalRows = n.length;
					for (i = 0; i < p.totalRows; i++) {
						rows.push(n[i][c.columns].$row);
					}
					c.rowsCopy = rows;
					moveToPage(table, p, true);
				});
			},

			moveToPage = function(table, p, pageMoved) {
				if ( p.isDisabled ) { return; }
				var c = table.config,
					$t = $(table),
					l = p.last;
				if ( pageMoved !== false && p.initialized && ts.isEmptyObject(c.cache)) {
					return updateCache(table);
				}
				// abort page move if the table has filters and has not been initialized
				if (p.ajax && ts.hasWidget(table, 'filter') && !c.widgetOptions.filter_initialized) { return; }

				parsePageNumber( p );
				calcFilters(table, p);
				// fixes issue where one currentFilter is [] and the other is ['','',''],
				// making the next if comparison think the filters are different (joined by commas). Fixes #202.
				l.currentFilters = (l.currentFilters || []).join('') === '' ? [] : l.currentFilters;
				p.currentFilters = (p.currentFilters || []).join('') === '' ? [] : p.currentFilters;
				// don't allow rendering multiple times on the same page/size/totalRows/filters/sorts
				if ( l.page === p.page && l.size === p.size && l.totalRows === p.totalRows &&
					(l.currentFilters || []).join(',') === (p.currentFilters || []).join(',') &&
						// check for ajax url changes see #730
					(l.ajaxUrl || '') === (p.ajaxObject.url || '') &&
						// & ajax url option changes (dynamically add/remove/rename sort & filter parameters)
					(l.optAjaxUrl || '') === (p.ajaxUrl || '') &&
					l.sortList === (c.sortList || []).join(',') ) { return; }
				if (c.debug) {
					console.log('Pager: Changing to page ' + p.page);
				}
				p.last = {
					page : p.page,
					size : p.size,
					// fixes #408; modify sortList otherwise it auto-updates
					sortList : (c.sortList || []).join(','),
					totalRows : p.totalRows,
					currentFilters : p.currentFilters || [],
					ajaxUrl : p.ajaxObject.url || '',
					optAjaxUrl : p.ajaxUrl || ''
				};
				if (p.ajax) {
					getAjax(table, p);
				} else if (!p.ajax) {
					renderTable(table, c.rowsCopy, p);
				}
				$.data(table, 'pagerLastPage', p.page);
				if (p.initialized && pageMoved !== false) {
					if (c.debug) {
						console.log('Pager: Triggering pageMoved');
					}
					$t.trigger('pageMoved', p);
					ts.applyWidget( table );
					if (table.isUpdating) {
						if (c.debug) {
							console.log('Pager: Triggering updateComplete');
						}
						$t.trigger('updateComplete', [ table, true ]);
					}
				}
			},

		// set to either set or get value
			parsePageSize = function( p, size, mode ) {
				var s = parseInt( size, 10 ) || p.size || p.settings.size || 10,
				// if select does not contain an "all" option, use size
					setAll = p.$size.find( 'option[value="all"]' ).length ? 'all' : p.totalRows;
				return /all/i.test( size ) || s === p.totalRows ?
					// "get" to set `p.size` or "set" to set `p.$size.val()`
					( mode === 'get' ? p.totalRows : setAll ) :
					( mode === 'get' ? s : p.size );
			},

			parsePageNumber = function( p ) {
				var min = Math.min( p.totalPages, p.filteredPages ) - 1;
				p.page = parseInt( p.page, 10 );
				if ( p.page < 0 || isNaN( p.page ) ) { p.page = 0; }
				if ( p.page > min && p.page !== 0 ) { p.page = min; }
				return p.page;
			},

			setPageSize = function(table, size, p) {
				p.size = parsePageSize( p, size, 'get' );
				p.$size.val( parsePageSize( p, p.size, 'set' ) );
				$.data(table, 'pagerLastPage', parsePageNumber( p ) );
				$.data(table, 'pagerLastSize', p.size);
				p.totalPages = Math.ceil( p.totalRows / p.size );
				p.filteredPages = Math.ceil( p.filteredRows / p.size );
				moveToPage(table, p);
			},

			moveToFirstPage = function(table, p) {
				p.page = 0;
				moveToPage(table, p);
			},

			moveToLastPage = function(table, p) {
				p.page = ( Math.min( p.totalPages, p.filteredPages ) - 1 );
				moveToPage(table, p);
			},

			moveToNextPage = function(table, p) {
				p.page++;
				if ( p.page >= ( Math.min( p.totalPages, p.filteredPages ) - 1 ) ) {
					p.page = ( Math.min( p.totalPages, p.filteredPages ) - 1 );
				}
				moveToPage(table, p);
			},

			moveToPrevPage = function(table, p) {
				p.page--;
				if ( p.page <= 0 ) {
					p.page = 0;
				}
				moveToPage(table, p);
			},

			destroyPager = function(table, p) {
				var c = table.config,
					namespace = c.namespace + 'pager',
					ctrls = [ p.cssFirst, p.cssPrev, p.cssNext, p.cssLast, p.cssGoto, p.cssPageSize ].join( ',' );
				showAllRows(table, p);
				p.$container
					// hide pager controls
					.hide()
					// unbind
					.find( ctrls )
					.unbind( namespace );
				c.appender = null; // remove pager appender function
				c.$table.unbind( namespace );
				if (ts.storage) {
					ts.storage(table, p.storageKey, '');
				}
				delete c.pager;
				delete c.rowsCopy;
			},

			enablePager = function(table, p, triggered) {
				var info, size,
					c = table.config;
				p.$size.add(p.$goto).add(p.$container.find('.ts-startRow, .ts-page'))
					.removeClass(p.cssDisabled)
					.removeAttr('disabled')
					.attr('aria-disabled', 'false');
				p.isDisabled = false;
				p.page = $.data(table, 'pagerLastPage') || p.page || 0;
				size = p.$size.find('option[selected]').val();
				p.size = $.data(table, 'pagerLastSize') || parsePageSize( p, p.size, 'get' );
				p.$size.val( parsePageSize( p, p.size, 'set' ) ); // set page size
				p.totalPages = Math.ceil( Math.min( p.totalRows, p.filteredRows ) / p.size );
				// if table id exists, include page display with aria info
				if ( table.id ) {
					info = table.id + '_pager_info';
					p.$container.find(p.cssPageDisplay).attr('id', info);
					c.$table.attr('aria-describedby', info);
				}
				changeHeight(table, p);
				if ( triggered ) {
					// tablesorter core update table
					ts.update( c );
					setPageSize(table, p.size, p);
					hideRowsSetup(table, p);
					if (c.debug) {
						console.log('Pager: Enabled');
					}
				}
			};

		$this.appender = function(table, rows) {
			var c = table.config,
				p = c.pager;
			if ( !p.ajax ) {
				c.rowsCopy = rows;
				p.totalRows = p.countChildRows ? c.$tbodies.eq(0).children('tr').length : rows.length;
				p.size = $.data(table, 'pagerLastSize') || p.size || p.settings.size || 10;
				p.totalPages = Math.ceil( p.totalRows / p.size );
				renderTable(table, rows, p);
				// update display here in case all rows are removed
				updatePageDisplay(table, p, false);
			}
		};

		$this.construct = function(settings) {
			return this.each(function() {
				// check if tablesorter has initialized
				if (!(this.config && this.hasInitialized)) { return; }
				var t, ctrls, fxn,
					table = this,
					c = table.config,
					wo = c.widgetOptions,
					p = c.pager = $.extend( true, {}, $.tablesorterPager.defaults, settings ),
					$t = c.$table,
					namespace = c.namespace + 'pager',
				// added in case the pager is reinitialized after being destroyed.
					pager = p.$container = $(p.container).addClass('tablesorter-pager').show();
				// save a copy of the original settings
				p.settings = $.extend( true, {}, $.tablesorterPager.defaults, settings );
				if (c.debug) {
					console.log('Pager: Initializing');
				}
				p.oldAjaxSuccess = p.oldAjaxSuccess || p.ajaxObject.success;
				c.appender = $this.appender;
				p.initializing = true;
				if (p.savePages && ts.storage) {
					t = ts.storage(table, p.storageKey) || {}; // fixes #387
					p.page = isNaN(t.page) ? p.page : t.page;
					p.size = ( isNaN(t.size) ? p.size : t.size ) || p.settings.size || 10;
					$.data(table, 'pagerLastSize', p.size);
				}

				// skipped rows
				p.regexRows = new RegExp('(' + (wo.filter_filteredRow || 'filtered') + '|' + c.selectorRemove.slice(1) + '|' + c.cssChildRow + ')');

				$t
					// .unbind( namespace ) adding in jQuery 1.4.3 ( I think )
					.unbind( pagerEvents.split(' ').join(namespace + ' ').replace(/\s+/g, ' ') )
					.bind('filterInit filterStart '.split(' ').join(namespace + ' '), function(e, filters) {
						p.currentFilters = $.isArray(filters) ? filters : c.$table.data('lastSearch');
						// don't change page if filters are the same (pager updating, etc)
						if (e.type === 'filterStart' && p.pageReset !== false && (c.lastCombinedFilter || '') !== (p.currentFilters || []).join('')) {
							p.page = p.pageReset; // fixes #456 & #565
						}
					})
					// update pager after filter widget completes
					.bind('filterEnd sortEnd '.split(' ').join(namespace + ' '), function() {
						p.currentFilters = c.$table.data('lastSearch');
						if (p.initialized || p.initializing) {
							if (c.delayInit && c.rowsCopy && c.rowsCopy.length === 0) {
								// make sure we have a copy of all table rows once the cache has been built
								updateCache(table);
							}
							updatePageDisplay(table, p, false);
							moveToPage(table, p, false);
							ts.applyWidget( table );
						}
					})
					.bind('disablePager' + namespace, function(e){
						e.stopPropagation();
						showAllRows(table, p);
					})
					.bind('enablePager' + namespace, function(e){
						e.stopPropagation();
						enablePager(table, p, true);
					})
					.bind('destroyPager' + namespace, function(e){
						e.stopPropagation();
						destroyPager(table, p);
					})
					.bind('updateComplete' + namespace, function(e, table, triggered){
						e.stopPropagation();
						// table can be unintentionally undefined in tablesorter v2.17.7 and earlier
						// don't recalculate total rows/pages if using ajax
						if ( !table || triggered || p.ajax ) { return; }
						var $rows = c.$tbodies.eq(0).children('tr').not(c.selectorRemove);
						p.totalRows = $rows.length - ( p.countChildRows ? 0 : $rows.filter('.' + c.cssChildRow).length );
						p.totalPages = Math.ceil( p.totalRows / p.size );
						if ($rows.length && c.rowsCopy && c.rowsCopy.length === 0) {
							// make a copy of all table rows once the cache has been built
							updateCache(table);
						}
						if ( p.page >= p.totalPages ) {
							moveToLastPage(table, p);
						}
						hideRows(table, p);
						changeHeight(table, p);
						updatePageDisplay(table, p, true);
					})
					.bind('pageSize refreshComplete '.split(' ').join(namespace + ' '), function(e, size){
						e.stopPropagation();
						setPageSize(table, parsePageSize( p, size, 'get' ), p);
						hideRows(table, p);
						updatePageDisplay(table, p, false);
					})
					.bind('pageSet pagerUpdate '.split(' ').join(namespace + ' '), function(e, num){
						e.stopPropagation();
						// force pager refresh
						if (e.type === 'pagerUpdate') {
							num = typeof num === 'undefined' ? p.page + 1 : num;
							p.last.page = true;
						}
						p.page = (parseInt(num, 10) || 1) - 1;
						moveToPage(table, p, true);
						updatePageDisplay(table, p, false);
					})
					.bind('pageAndSize' + namespace, function(e, page, size){
						e.stopPropagation();
						p.page = (parseInt(page, 10) || 1) - 1;
						setPageSize(table, parsePageSize( p, size, 'get' ), p);
						moveToPage(table, p, true);
						hideRows(table, p);
						updatePageDisplay(table, p, false);
					});

				// clicked controls
				ctrls = [ p.cssFirst, p.cssPrev, p.cssNext, p.cssLast ];
				fxn = [ moveToFirstPage, moveToPrevPage, moveToNextPage, moveToLastPage ];
				if (c.debug && !pager.length) {
					console.warn('Pager: >> Container not found');
				}
				pager.find(ctrls.join(','))
					.attr('tabindex', 0)
					.unbind('click' + namespace)
					.bind('click' + namespace, function(e){
						e.stopPropagation();
						var i, $t = $(this), l = ctrls.length;
						if ( !$t.hasClass(p.cssDisabled) ) {
							for (i = 0; i < l; i++) {
								if ($t.is(ctrls[i])) {
									fxn[i](table, p);
									break;
								}
							}
						}
					});

				// goto selector
				p.$goto = pager.find(p.cssGoto);
				if ( p.$goto.length ) {
					p.$goto
						.unbind('change' + namespace)
						.bind('change' + namespace, function(){
							p.page = $(this).val() - 1;
							moveToPage(table, p, true);
							updatePageDisplay(table, p, false);
						});
				} else if (c.debug) {
					console.warn('Pager: >> Goto selector not found');
				}
				// page size selector
				p.$size = pager.find(p.cssPageSize);
				if ( p.$size.length ) {
					// setting an option as selected appears to cause issues with initial page size
					p.$size.find('option').removeAttr('selected');
					p.$size.unbind('change' + namespace).bind('change' + namespace, function() {
						if ( !$(this).hasClass(p.cssDisabled) ) {
							var size = $(this).val();
							p.$size.val( size ); // in case there are more than one pagers
							setPageSize(table, size, p);
							changeHeight(table, p);
						}
						return false;
					});
				} else if (c.debug) {
					console.warn('Pager: >> Size selector not found');
				}

				// clear initialized flag
				p.initialized = false;
				// before initialization event
				$t.trigger('pagerBeforeInitialized', p);

				enablePager(table, p, false);
				if ( typeof p.ajaxUrl === 'string' ) {
					// ajax pager; interact with database
					p.ajax = true;
					// When filtering with ajax, allow only custom filtering function, disable default
					// filtering since it will be done server side.
					c.widgetOptions.filter_serversideFiltering = true;
					c.serverSideSorting = true;
					moveToPage(table, p);
				} else {
					p.ajax = false;
					// Regular pager; all rows stored in memory
					ts.appendCache( c, true ); // true = don't apply widgets
					hideRowsSetup(table, p);
				}

				// pager initialized
				if (!p.ajax && !p.initialized) {
					p.initializing = false;
					p.initialized = true;
					moveToPage(table, p);
					if (c.debug) {
						console.log('Pager: Triggering pagerInitialized');
					}
					c.$table.trigger( 'pagerInitialized', p );
					if ( !( c.widgetOptions.filter_initialized && ts.hasWidget(table, 'filter') ) ) {
						updatePageDisplay(table, p, false);
					}
				}

				// make the hasWidget function think that the pager widget is being used
				c.widgetInit.pager = true;
			});
		};

	}() });

	// see #486
	ts.showError = function( table, xhr, settings, exception ) {
		var $row,
			$table = $( table ),
			c = $table[0].config,
			wo = c && c.widgetOptions,
			errorRow = c.pager && c.pager.cssErrorRow ||
				wo && wo.pager_css && wo.pager_css.errorRow ||
				'tablesorter-errorRow',
			typ = typeof xhr,
			valid = true,
			message = '',
			removeRow = function(){
				c.$table.find( 'thead' ).find( '.' + errorRow ).remove();
			};

		if ( !$table.length ) {
			console.error('tablesorter showError: no table parameter passed');
			return;
		}

		// ajaxError callback for plugin or widget - see #992
		if ( typeof c.pager.ajaxError === 'function' ) {
			valid = c.pager.ajaxError( c, xhr, settings, exception );
			if ( valid === false ) {
				return removeRow();
			} else {
				message = valid;
			}
		} else if ( typeof wo.pager_ajaxError === 'function' ) {
			valid = wo.pager_ajaxError( c, xhr, settings, exception );
			if ( valid === false ) {
				return removeRow();
			} else {
				message = valid;
			}
		}

		if ( message === '' ) {
			if ( typ === 'object' ) {
				message =
					xhr.status === 0 ? 'Not connected, verify Network' :
						xhr.status === 404 ? 'Requested page not found [404]' :
							xhr.status === 500 ? 'Internal Server Error [500]' :
								exception === 'parsererror' ? 'Requested JSON parse failed' :
									exception === 'timeout' ? 'Time out error' :
										exception === 'abort' ? 'Ajax Request aborted' :
										'Uncaught error: ' + xhr.statusText + ' [' + xhr.status + ']';
			} else if ( typ === 'string'  ) {
				// keep backward compatibility (external usage just passes a message string)
				message = xhr;
			} else {
				// remove all error rows
				return removeRow();
			}
		}

		// allow message to include entire row HTML!
		$row = ( /tr\>/.test(message) ? $(message) : $('<tr><td colspan="' + c.columns + '">' + message + '</td></tr>') )
			.click( function() {
				$( this ).remove();
			})
			// add error row to thead instead of tbody, or clicking on the header will result in a parser error
			.appendTo( c.$table.find( 'thead:first' ) )
			.addClass( errorRow + ' ' + c.selectorRemove.slice(1) )
			.attr({
				role : 'alert',
				'aria-live' : 'assertive'
			});

	};

	// extend plugin scope
	$.fn.extend({
		tablesorterPager: $.tablesorterPager.construct
	});

})(jQuery);

function doExtraWorkAfterOfferRemove(){}
$(document).on("keyup",".offerQuantity",function(e){var offer=$(this).attr('name');$(this).parent().find('span').html('<a class="updateLink" href="/action/updateCart?updateQuantity=true&'+offer+'_quantity='+$(this).val()+'">Update</a>');});$(document).on("click",".updateLink",function(e){var url=$(this).attr('href');$.ajax({type:'GET',url:url,dataType:'html',data:{forwardPage:'/pb2/widgets/pageBuilderLiteratum/ecomm/cart/offersTable.jsp',attributesParameter:'editCartView',editCartView:true},async:'false',success:renderOffers});$(this).trigger("AddedToCart");return false;});function renderOffers(data){$("div#offersTable").html(data);};
$(document).ready(function($){$(".moreAddress a").click(function(){$(".paymentAddress2").toggle('slow',function(){var $link=$(".moreAddress a");if($link.html().indexOf("+")>-1){$link.html("-")}else{$link.html("+");}});});});
function volumeOrYearChanged(selectedYearOrVolumeElement){var currentForm=$(selectedYearOrVolumeElement).closest('form'),partialLink=$(currentForm).attr('action')+'?'+(currentForm).serialize()+'&partial=true';jQuery('.CoverGallery').load(partialLink);checkAndDisableNavigation();}
function checkAndDisableNavigation(){var currentYearElem=$('#currentYear'),currentOptionElem=currentYearElem.find('option:selected');if(currentOptionElem.next()&&currentOptionElem.next().attr('value')){$('.pagingPrev').removeClass('disabled');}else{$('.pagingPrev').addClass('disabled');}
if(currentOptionElem.prev()&&currentOptionElem.prev().attr('value')){$('.pagingNext').removeClass('disabled');}else{$('.pagingNext').addClass('disabled');}}
$(document).ready(function(){checkAndDisableNavigation();});$(document).on('click','.ui-widget-overlay.ui-front',function(){$('.modalCoverDialog').dialog('close');});$(document).on('click','.coverArt-ajax-link',function(evt){evt.preventDefault();var link=$(this).attr('href'),windowHeight=$(window).height(),windowWidth=$(window).width()*0.9;jQuery('.modalCoverDialog').load(link,function(){$(this).dialog({modal:true,resizable:false,width:windowWidth,maxHeight:windowHeight,position:{my:"center",at:"top",of:window}});});});$(document).on('click','.pagingPrev',function(evt){evt.preventDefault();var currentYearElem=$('#currentYear'),currentOptionElem=currentYearElem.find('option:selected');if(currentOptionElem.next()&&currentOptionElem.next().attr('value')){currentYearElem.val(currentOptionElem.next().attr('value'));currentYearElem.trigger('change');currentYearElem[0].jcf.refreshSelectedText();}});$(document).on('click','.pagingNext',function(evt){evt.preventDefault();var currentYearElem=$('#currentYear'),currentOptionElem=currentYearElem.find('option:selected');if(currentOptionElem.prev()&&currentOptionElem.prev().attr('value')){currentYearElem.val(currentOptionElem.prev().attr('value'));currentYearElem.trigger('change');currentYearElem[0].jcf.refreshSelectedText();}});
$(document).ready(function(){$(document).on('click','.showTableEvent',function(e){e.preventDefault();var ID=$(e.target).closest("a").attr("data-id");showTable('div-'+ID+'');});$('.showTableEEvent').click(function(e){e.preventDefault();var ID=$(".showtable_wrap a.showTableEvent").attr("data-id");showTable('div-'+ID+'');});$(".tableWrapper").scroll(function(e){$(this).find("#tableCloseButton").css({"right":10-$(this).scrollLeft()});});});function showTable(id){$('.tableWrapper').addClass("visuallyhidden");var target=$("#"+id);var tables=$(".tableWrapper");var len=tables.length;var i=0;var index=-1;var nextTarget,prevTarget;for(i;i<len;i++){if(tables[i].id==id)
index=i;if((index-1)>=0)
prevTarget="'"+tables[index-1].id+"'";if((index+1)<len)
nextTarget="'"+tables[index+1].id+"'";}
var hideParam="'"+id+"'";var nLink=(index+1)<len?'<a class="next" title="Next Table" href="javascript:void(0)" onclick="showTable('+nextTarget+')"></a>':'';var pLink=(index-1)>-1?'<a class="prev" title="Previous Table" href="javascript:void(0)" onclick="showTable('+prevTarget+')"></a>':'';var navigator='<a title="Close Table Viewer" id="tableCloseButton" href="#" onclick="hideTable('+hideParam+'); return false;" class="close"></a>\
                        <div class="tableNav">\
                            '+pLink+'\
                            <span id="NavText">Table <span class="index">'+(index+1)+'</span> of '+len+'</span>\
                            '+nLink+'\
                        </div>';$(".tableViewerNav",target).html(navigator);target.find("#tableCloseButton").css({"right":10-target.scrollLeft()});target.removeClass("visuallyhidden");}
function hideTable(id){$('.tableWrapper').addClass("visuallyhidden");}
$(document).mouseup(function(e)
{var tableWrapper=$('.tableWrapper');if(!tableWrapper.is(e.target)&&tableWrapper.has(e.target).length===0){tableWrapper.addClass("visuallyhidden");}});
function showHideTocPublicationAbs(doi,idToShow){if(!$("#"+idToShow).is(":visible")){showTocPublicationAbstract(doi,idToShow+" .previewContent",idToShow);}else{$("#"+idToShow).hide();$("#show"+idToShow+" a").text(previewLabel());}}
function previewLabel(){return"Preview";}
function hidePreviewLabel(){return"Hide Preview";}
function showTocPublicationAbstract(doi_param,div,idToShow){if($("#"+div).html()==""){var data={ajax:'true',doi:doi_param};jQuery.ajax({url:'/action/PB2showAjaxAbstract',type:'POST',data:data,success:function(data,status){populateTocPublicationAbstract(data,div,idToShow,true);}});}else{populateTocPublicationAbstract(data,div,idToShow,false)}}
function populateTocPublicationAbstract(msg,div,idToShow,importData){if(importData){$("#"+div).html(msg);renderMathJax();}
$("#"+idToShow).css("display","block");$("#show"+idToShow+" a").text(hidePreviewLabel());}
function renderMathJax(){}
$(document).ready(initTocTasks);function initTocTasks(){hideViewChaptersLink();}
function hideViewChaptersLink(){if($(".tocContent input[type='checkbox'][name='doi']").length==0){$("span.bookViewChaptersLink").css("display","none");}};
$(document).ready(function(){var citationDetails=$(".citation-details");var $issue=citationDetails.find("input[name='quickLinkIssue']");var $page=citationDetails.find("input[name='quickLinkPage']");var $volume=citationDetails.find("input[name='quickLinkVolume']");var $year=citationDetails.find("input[name='quickLinkYear']");disableAndCleanInput($year);disableAndCleanInput($volume);disableAndCleanInput($page);disableAndCleanInput($issue);function enableInput(input){input.removeAttr("disabled");}
function disableAndCleanInput(input){if((input.attr("name")!="quickLinkIssue")||(input.attr("name")=="quickLinkIssue"&&!(input.attr("type")=="hidden"))){input.attr("disabled",true);input.val("");}}
citationDetails.on("focusout change paste textInput input",issuePageControl);$(".citationSearchBoxContainer").on("focusout change paste textInput input",issuePageControl);function issuePageControl(event){var $elem=$(event.target);var $year=$(this).find('input[name="quickLinkYear"]');var $volume=$(this).find('input[name="quickLinkVolume"]');var $issue=$(this).find('input[name="quickLinkIssue"]');var $page=$(this).find('input[name="quickLinkPage"]');if($elem.attr("name")=="quickLinkJournal"){if($elem.val()||$(this).find('input[name="quickLinkJournal"]').val()){enableInput($year);enableInput($volume);}else{disableAndCleanInput($year);disableAndCleanInput($volume);disableAndCleanInput($page);disableAndCleanInput($issue);}}else if($elem.attr("name")=="quickLinkVolume"){if($elem.val()||$(this).find('input[name="quickLinkYear"]').val()){enableInput($issue);if($issue.val()||$issue.hasClass("enable")){enableInput($page);}}else{disableAndCleanInput($page);disableAndCleanInput($issue);}}else if($elem.attr("name")=="quickLinkYear"){if($elem.val()||$(this).find('input[name="quickLinkVolume"]').val()){enableInput($issue);if($issue.val()||$issue.hasClass("enable")){enableInput($page);}}else{disableAndCleanInput($page);disableAndCleanInput($issue);}}else if($elem.attr("name")=="quickLinkIssue"){if($elem.val()){enableInput($page);}
else{if(!$issue.hasClass("enable"))
disableAndCleanInput($page);}}};prepareCitationEvents();});if(window.PB&&window.PB.$){window.PB.$(document.documentElement).on("WidgetReinit.*",function(){try{prepareCitationEvents();}catch(ex){}});}
function prepareCitationEvents(){var citationJournal=$(".citation.magicsuggest");var $citationSelectElement=$(".citation.citation-search-title");var ms=$(citationJournal).magicSuggest({allowFreeEntries:'false',maxSelection:1,resultAsString:true,cls:'citationJournalName',expandOnFocus:true,placeholder:$(citationJournal).data('placeholder')});$(ms).on('selectionchange',function(){if(this.getValue()!=""){SearchUtil.enableButton('citationSearchSubmitButton');}
else{SearchUtil.disableButton('citationSearchSubmitButton');}
if(this.getSelection().length){$('#citationSearchForm input[name="quickLinkYear"]').removeAttr("disabled");$('#citationSearchForm input[name="quickLinkVolume"]').removeAttr("disabled");}else{$('#citationSearchForm input[name="quickLinkYear"]').attr("disabled",true).val("");$('#citationSearchForm input[name="quickLinkVolume"]').attr("disabled",true).val("");$('#citationSearchForm input[name="quickLinkIssue"]').attr("disabled",true).val("");$('#citationSearchForm input[name="quickLinkPage"]').attr("disabled",true).val("");}});$('.ms-trigger').on('click',function(){if($('.citationJournalName').find('.dropdown-menu').is(':visible'))
{ms.getValue().length>0?ms.collapse():ms.expand();}
else
ms.getValue().length>0?ms.expand():ms.collapse();});if($citationSelectElement.length<1){return;}
$citationSelectElement.on('change',function(){if(this.value!=""){SearchUtil.enableButton('citationSearchSubmitButton');}
else{SearchUtil.disableButton('citationSearchSubmitButton');}});};
$(document).ready(function($){$(".subject .moreLess").click(function(e){$(this).toggleClass("hideIcon");$(this).siblings(".booksList").toggle('slow');});});
$(document).ready(function($){$(".jsOnly").removeClass("jsOnly");});
function onDecadeChange(select){var volumes=[];if(select.selectedIndex>0){var selectedOption=select.options[select.selectedIndex];var decadesVols=$(select).closest('.author-index-container').find('.decadesVolumes');var decadesVolsJson=$.parseJSON($(decadesVols).val());volumes=decadesVolsJson.map[$(selectedOption).val()];}
var volumeSelect=$(select).closest('.volumes-nav').find('.volumeSelect');$(volumeSelect).empty().append("<option value=''>Volume</option>");for(i=0;i<volumes.length;i++){$(volumeSelect).append("<option value='"+volumes[i]+"'>"+volumes[i]+"</option>");}}
function goToLetter(a,index,volume){var linkHref=$(a).attr('href');var selectVolume=$(a).closest('.author-index-container').find('.volumeSelect').val();if(selectVolume>0){volume=selectVolume;}
if(linkHref.indexOf('?')<0){linkHref=linkHref+'?';}
linkHref=linkHref+"&volume="+volume;if(index!=null){linkHref=linkHref+"&index="+index;}
$(a).attr('href',linkHref);return true;};
if(document.addEventListener){document.addEventListener("DOMContentLoaded",twoFactorAuthentication,false);}
else{document.onreadystatechange=twoFactorAuthentication;}
function twoFactorAuthentication(){if(document.getElementById('select-list-hidden')){var first=document.getElementById('container-all');var scrollableList=document.createElement("div");scrollableList.setAttribute('class','scrollableList');first.appendChild(scrollableList);var parent_node=document.querySelectorAll('.scrollableList');var selectOneOfTheOptions=document.createElement("div");selectOneOfTheOptions.setAttribute('id','selectOneOfTheOptions');parent_node[0].appendChild(selectOneOfTheOptions);var js__countries_select=document.createElement("ul");js__countries_select.setAttribute('tabindex','-1');js__countries_select.setAttribute('id','js__countries-select');js__countries_select.setAttribute('class','f32 hide');parent_node[0].appendChild(js__countries_select);var selectList=document.getElementById('select-list-hidden').getElementsByTagName('option');for(var j=0;j<selectList.length;j++){var a=selectList[j];var countries_text=selectList[j].text;var ulss=document.getElementById('js__countries-select');var classesAll=selectList[j].getAttribute("class");var node=document.createElement("li");ulss.appendChild(node);var ulss=document.getElementById('js__countries-select').getElementsByTagName('li')[j];var linkes_to_add=document.createElement("a");var textnode=document.createTextNode(countries_text);if(j==0){linkes_to_add.setAttribute('tabindex','0');}
linkes_to_add.setAttribute('href','#');linkes_to_add.appendChild(textnode);linkes_to_add.setAttribute('class',classesAll);ulss.appendChild(linkes_to_add);}
var li23=document.createElement('i');li23.innerHTML='';li23.setAttribute('class','countries-select ');document.getElementById("selectOneOfTheOptions").appendChild(li23);var true2=document.getElementById('selectOneOfTheOptions').getElementsByTagName("a");var innerdeep=document.getElementById("js__countries-select").getElementsByTagName("li")[0].getElementsByTagName("a")[0];document.createElement('a');var like=innerdeep;true2.innerHTML=like;var clon3=like.cloneNode(true);var res=clon3.innerHTML.split("+");clon3.innerHTML='+'+res[1];document.getElementById("selectOneOfTheOptions").appendChild(clon3);document.getElementById("selectOneOfTheOptions").onclick=function(e){if(typeof e=='undefined')e=window.event;e.preventDefault?e.preventDefault():(e.returnValue=false);if(document.getElementById("js__countries-select").className=="f32 hide"){e.preventDefault?e.preventDefault():(e.returnValue=false);document.getElementById("js__countries-select").className="f32";var focusedElement=document.getElementById("js__countries-select").getElementsByTagName('a')[0];focusedElement.focus();e=e||window.event;document.getElementById("js__countries-select").className="f32";}
else{document.getElementById("js__countries-select").className="f32 hide";}};var ul=document.getElementById('js__countries-select');if(ul.addEventListener){ul.addEventListener("click",function(e){functionX((e||event))},false);}
else{ul.attachEvent("onclick",function(e){functionX((e||event))});}
function functionX(e){var targetedElement=null;if(typeof e=='undefined')e=window.event;if(typeof e.srcElement=='undefined'){targetedElement=e.originalTarget;}else{targetedElement=e.srcElement;}
if(targetedElement.tagName==='A'){e.preventDefault?e.preventDefault():(e.returnValue=false);var firstchildnew=document.getElementById('selectOneOfTheOptions').getElementsByTagName('a')[0];var true1=document.getElementById('selectOneOfTheOptions').getElementsByTagName("a");if(true1){e.preventDefault?e.preventDefault():(e.returnValue=false);true1.innerHTML=targetedElement;var clon3=targetedElement.cloneNode(true);var res=clon3.innerHTML.split("+");clon3.innerHTML='+'+res[1];document.getElementById("selectOneOfTheOptions").appendChild(clon3);firstchildnew.remove();}
functionaddToHidden(e);}}
document.getElementById('js__mobile-countries').onkeydown=function(e){if(typeof e=='undefined'){e=window.event;}
functionaddToHidden(e);};function stripNonNumbers(val){return val.replace(/\D/g,'');}
document.getElementById('js__mobile-countries').onkeyup=function(e){var start=this.selectionStart,end=this.selectionEnd;this.value=stripNonNumbers(this.value);this.setSelectionRange(start,end);};document.getElementById('js__mobile-countries').addEventListener("focusout",function(e){this.value=stripNonNumbers(this.value);});document.getElementById('js__countries-select').getElementsByTagName('a').onmousedown=function(e){if(typeof e=='undefined')e=window.event;functionaddToHidden(e);};function functionaddToHidden(e){var input=document.getElementById('js__mobile-countries');var messages=document.getElementById('codeAndPhone');e=e||window.event;if(typeof e=='undefined')e=window.event;if(typeof e.srcElement=='undefined'){var sourceb=e.originalTarget;}else{var sourceb=e.srcElement;}
if(sourceb.tagName=="A"){var code2=sourceb.innerHTML;var res=code2.split("+");code2='+'+res[1];var messages=document.getElementById('codeAndPhone');messages.value=code2+input.value;}
else if(sourceb.tagName=="INPUT"){if(input.addEventListener){input.addEventListener("input",function(e){functionY((e||event))},false);}
else{input.attachEvent("onpropertychange",function(e){functionY((e||event))});}
function functionY(e){var code=document.getElementById('selectOneOfTheOptions').getElementsByTagName('a')[0].innerHTML;var res=code.split("+");code='+'+res[1];messages.value=code+input.value;};}
document.getElementById("js__countries-select").className="f32 hide";}
if(!Array.prototype.some)
{Array.prototype.some=function(func)
{for(var i in this)
{if(func(i))return true;}
return false;};}
function hasClass(element,cls){return(' '+element.className+' ').indexOf(' '+cls+' ')>-1;}
document.onmousedown=function(e){if(typeof e=='undefined')e=window.event;if(typeof e.srcElement=='undefined'){var sourceE=e.originalTarget;}else{var sourceE=e.srcElement;}
if((closestt(sourceE,'.js__pincode-container')==null)&&!(sourceE.id=="js__countries-select")){if(document.getElementById('js__mobile-countries')){document.getElementById("js__countries-select").className="f32 hide";}}};function closestt(el,selector){while(el!==null){elementParent=el.parentElement;if(elementParent!==null&&(hasClass(elementParent,selector)||hasClass(el,"flag"))){return elementParent;}
el=elementParent;}
return null;}
function hide(){var elem=document.getElementById('select-list-hidden');elem.style.display='none';}
window.onload=hide;Element.prototype.remove=function(){this.parentElement.removeChild(this);}
NodeList.prototype.remove=HTMLCollection.prototype.remove=function(){for(var i=this.length-1;i>=0;i--){if(this[i]&&this[i].parentElement){this[i].parentElement.removeChild(this[i]);}}}
if(!Array.prototype.filter)
{Array.prototype.filter=function(fun)
{"use strict";if(this===void 0||this===null)
throw new TypeError();var t=Object(this);var len=t.length>>>0;if(typeof fun!=="function")
throw new TypeError();var res=[];var thisp=arguments[1];for(var i=0;i<len;i++)
{if(i in t)
{var val=t[i];if(fun.call(thisp,val,i,t))
res.push(val);}}
return res;};}
if(!Array.prototype.indexOf)
{Array.prototype.indexOf=function(elt)
{var len=this.length>>>0;var from=Number(arguments[1])||0;from=(from<0)?Math.ceil(from):Math.floor(from);if(from<0)
from+=len;for(;from<len;from++)
{if(from in this&&this[from]===elt)
return from;}
return-1;};}
function findNextTabStop(el,dir){var universe=document.querySelectorAll('#js__countries-select a');var list=Array.prototype.filter.call(universe,function(item){return item.tabIndex>="-1"});var index=list.indexOf(el);if(dir=="next"){return list[index+1]||list[0];}else{return list[index-1]||list[0];}}
document.onkeydown=function(event){event=event||window.event;if(typeof event.srcElement=='undefined'){var classes=event.originalTarget;}else{var classes=event.srcElement;}
if(event.keyCode==40||event.which==40){event.preventDefault?event.preventDefault():(event.returnValue=false);var nextEl=findNextTabStop(classes,"next");nextEl.focus();}
else if(event.keyCode==38||event.which==38){event.preventDefault?event.preventDefault():(event.returnValue=false);var nextEl=findNextTabStop(classes,"prev");nextEl.focus();}
var isEscape=false;if("key"in event){isEscape=event.key=="Escape";}else{isEscape=event.keyCode==27;}
if(isEscape){document.getElementById("js__countries-select").className="f32 hide";}
var targetEL=event.target;if((event.keyCode==13||event.which==13)&&hasClass(targetEL,"flag")){if(document.getElementById("js__countries-select").className=="f32 hide"){var focusedElement=document.getElementById("js__countries-select").getElementsByTagName('a')[0];focusedElement.focus();event=event||window.event;document.getElementById("js__countries-select").className="f32";}else{if(!(hasClass(document.getElementById("js__countries-select"),"hide"))){event.preventDefault?event.preventDefault():(event.returnValue=false);document.getElementById("js__mobile-countries").focus();document.getElementById("js__countries-select").className="f32 hide"}}
var keycode1=(event.keyCode?event.keyCode:event.which);var targetedElement=event.target;if(targetedElement.tagName==='A'){var firstchildnew=document.getElementById('selectOneOfTheOptions').getElementsByTagName('a')[0];var true1=document.getElementById('selectOneOfTheOptions').getElementsByTagName("a");if(true1){var targetedElement=event.target;var like=targetedElement;var li2=document.createElement('a');li2.setAttribute('href','#');true1.innerHTML=li2;var toremove=document.getElementById('selectOneOfTheOptions').getElementsByTagName("a")[0];var toremoveinner=toremove;var clon3=like.cloneNode(true);var res=clon3.innerHTML.split("+");clon3.innerHTML='+'+res[1];document.getElementById("selectOneOfTheOptions").appendChild(clon3);firstchildnew.remove();}}}
e=event||document.event;if(typeof e=='undefined')e=document.event;if((e.keyCode>=65&&e.keyCode<=130)||(e.which>=65&&e.which<=130)){var keycode1=(e.keyCode?e.keyCode:e.which);var string1=String.fromCharCode(keycode1);var searchon1=document.getElementById('js__countries-select').getElementsByTagName('a');for(var j=0;j<searchon1.length;j++){var a=searchon1[j];var countries_text=searchon1[j].innerHTML;var chare=countries_text.charAt(0);var lowercase=chare.toLowerCase();var lowString1=string1.toLowerCase();if(lowString1==lowercase){searchon1[j].focus();return true;}}}};}
if(document.getElementById('check-if-exist')){setTimeout(function(){document.getElementById('hidden-message').style.visibility="visible";document.getElementById('hidden-message').style.display="block";},30000);}
var submit,passPin=document.getElementsByClassName("type-pass-pin")[0];if(passPin){passPin.addEventListener('keyup',function(){var children=this.closest('form').children;for(var i=0;i<children.length;i++){if(children[i].className=="OK-btn"){submit=children[i];break;}}
submit.disabled=(this.value?false:true);});}
var pinForm=document.getElementsByClassName('js__pinCode')[0];if(pinForm){pinForm.addEventListener('submit',function(){var passPin=document.getElementsByClassName('type-pass-pin')[0];var pinValue=passPin.value;var numeric=isNumeric(pinValue);if(!numeric||pinValue==''||pinValue=="Type the 6 diget PIN  Code"){var errorMsg=this.querySelector('.error-msg')
errorMsg.innerHTML="Please fill this field with numbers";errorMsg.className=errorMsg.className.replace(/\bhidden\b/,'');return false;}});}}
function isNumeric(n){return!isNaN(parseFloat(n))&&isFinite(n);}
if(!(typeof jQuery=='undefined')){(function($){var selectElement=$(".scrollableList").siblings("select");$(".scrollableList").siblings().each(function(){if($(this).hasClass("sbHolder")){selectElement.selectbox("detach");}else if($(this).hasClass("bootstrap-select")){$(this).hide();}});selectElement.hide();})(jQuery);jQuery(document).ready(function(){jQuery('.pb-collapse').click(function(){jQuery(".notAuth-msg-container").toggleClass('collapsed');jQuery(this).find('img').toggle();});});}
function tfaOptionVisible(event){event.preventDefault()
if(document.getElementById('tfa-options')){if(document.getElementById('tfa-options').style.display=='none'){document.getElementById('tfa-options').style.display='block';}
else{document.getElementById('tfa-options').style.display='none';}}}
function tfaResetAuthentication(){if(document.getElementById('reset-verification-warning').style.display=='none'){document.getElementById('reset-verification-warning').style.display='block';document.getElementsByClassName('reset-verification-option')[0].style.display='none';}
var redirectUri=document.getElementsByName('redirectUri')[0].value;document.getElementsByName('redirectUri')[0].value=encodeURI('/action/resetTfaMethod?redirectUri='+redirectUri);};var commerce = {};

commerce.page = {};

commerce.page.cart = {};literatum.utils = {
    send: function (request, callback, error) {
        if (!request)
            return;

        request.ajaxRequest = true;

        return $.ajax({
            url: '/action/' + request.action,
            type: 'POST',
            contentType: 'application/x-www-form-urlencoded',
            crossDomain: true,
            xhrFields: {withCredentials: true},
            data: request,
            success: callback,
            error: error
        });
    },
    copyForm: function (source, to) {
        $(source).find('input').each(function () {
            var name = $(this).attr('name');
            var targetField = $(to).find("input[name='" + name + "']");
            targetField.val($(this).val());
        });

        $(source).find('select').each(function () {
            var value = $(this).find('option:selected').val();
            $(to).find("select[name='" + $(this).attr('name') + "']").find("option[value='" + value + "']").attr('selected', '');
        });
    },
    clearForm: function (form) {
        $(form).click(function () {
            $(this).find("input[type=text], select, textarea").val('');
        });
    },
    hasErrors: function (attributes) {
        var hasErrors = false;
        Object.keys(attributes).forEach(function (key) {
            hasErrors |= (key.toLowerCase().indexOf("error") > -1);
        });
        return hasErrors;
    },
    hasAttributes: function (attributes) {
        return attributes && Object.keys(attributes).length > 0;
    },
    scroll: function(selector, speed, offset) {
        var $object = null;

        if (selector instanceof jQuery) {
            $object = selector;
        } else {
            $object = $(selector);
        }

        if (!$object || $object.length == 0)
            return;

        if (typeof speed === 'undefined') {
            speed = 2000;
        }

        if (typeof offset === 'undefined') {
            offset = $object.offset().top;
        } else {
            offset = $object.offset().top - offset
        }

        $('html, body').animate({
            scrollTop: offset
        }, speed);
    },
    nextCheckoutSection: function () {
        var $widget = $(".eCommerceCheckoutFieldsWidget .scroll-focus").closest('.widget');
        if ($(window).width() > 992) {
            literatum.utils.scroll($widget, 800, 10);
        }else{
            literatum.utils.scroll($widget, 800, 60);
        }
    },
    getCountryState: function(iso2Alpha, callback) {
        return literatum.utils.send({
            action: 'getCountryStates',
            country: iso2Alpha
        }, callback);
    }
};


///////////////////////////////// TEMP

/*$(".add-to-cart").click(function (e) {
    e.preventDefault();
    $(this).toggleClass("opened");
    $(this).find(".purchaseArea").slideToggle();

    var purchaseAreaWidth = $(this).parent().width();
    $(this).find(".purchaseArea").css('width', purchaseAreaWidth);

});*/

if ($(".add-to-cart").length > 0) {
    $("body").click(function (e) {
        var $target = $(e.target);
        if (!$target.hasClass("add-to-cart") && $target.closest(".add-to-cart").length == 0) {
            $(".add-to-cart").removeClass("opened");
            $(".add-to-cart").find(".purchaseArea").slideUp();
        }
    });
}

// Needs review
$.fn.serializeObject = function()
{
    var o = {};
    var a = this.serializeArray();
    console.log("Form");
    console.log(a);
    $.each(a, function() {
        if (o[this.name] !== undefined) {
            if (!o[this.name].push) {
                o[this.name] = [o[this.name]];
            }
            o[this.name].push(this.value || '');
        } else {
            o[this.name] = this.value || '';
        }
    });
    return o;
};commerce.cart = (function () {
    var instance = {};
    var cartInfo;
    var listeners = {};
    var callbacks = [];
    var errorHandler;

    function triggerRefresh(updatedCartInfo) {
        console.log("Trying to refresh current cart state...");

        Object.keys(listeners).forEach(function(key) {
            commerce.cart.notify(key, updatedCartInfo);
        });

        cartInfo = updatedCartInfo;
    }

    instance.refresh = function () {
        literatum.utils.send({
            action: 'showCart'
        }, triggerRefresh, errorHandler);
    };

    instance.identity = {
        name: 'identity',
        guest: function (email, acceptTermsConditions) {
            literatum.utils.send({
                action: 'guestCheckout',
                email: email,
                acceptTermsConditions: acceptTermsConditions
            }, commerce.cart.identity.refresh, errorHandler);
        },
        login: function (email, password) {
            literatum.utils.send({
                action: 'doLogin',
                email: email,
                password: password
            }, commerce.cart.identity.refresh, errorHandler);
        },
        registration: function (email) {
            literatum.utils.send({
                action: 'register',
                email: email
            }, commerce.cart.identity.refresh, errorHandler);
        },
        clear: function () {
            literatum.utils.send({
                action: 'resetCartAction'
            }, commerce.cart.identity.refresh, errorHandler);
        },
        refresh: function (cartInfo) {
            commerce.cart.notify(commerce.cart.identity, cartInfo);
        },
        changed: function(updatedCartInfo) {
            return (cartInfo == null || cartInfo.identityHash != updatedCartInfo.identityHash);
        }
    };

    instance.buyingList = {
        name: 'buyingList',
        addItem: function (itemId) {
            literatum.utils.send({
                action: 'addToCart',
                id: itemId
            }, commerce.cart.buyingList.refresh, errorHandler);
        },
        remove: function (itemId) {
            literatum.utils.send({
                action: 'removeCartItem',
                id: itemId
            }, commerce.cart.buyingList.refresh, errorHandler);
        },
        decreaseQuantity: function (itemId) {
            literatum.utils.send({
                action: 'decreaseQuantity',
                id: itemId
            }, commerce.cart.buyingList.refresh, errorHandler);
        },
        increaseQuantity: function (itemId) {
            literatum.utils.send({
                action: 'increaseQuantity',
                id: itemId
            }, commerce.cart.buyingList.refresh, errorHandler);
        },
        refresh: function (cartInfo) {
            commerce.cart.notify(commerce.cart.buyingList, cartInfo);
        },
        changed: function(updatedCartInfo) {
            return (cartInfo == null || cartInfo.buyingItemHash != updatedCartInfo.buyingItemHash);
        }
    };

    instance.restoreAccess = {
        name: 'restoreAccess',
        request: function(email) {
            literatum.utils.send({
                action: 'restoreContentAccess',
                email: email
            }, commerce.cart.restoreAccess.refresh, errorHandler);
        },
        refresh: function(cartInfo) {
            commerce.cart.notify(commerce.cart.restoreAccess, cartInfo);
        },
        changed: function(updatedCartInfo) {
            return true;
        }
    };

    instance.discounts = {
        name: 'discounts',
        apply: function (discountCode) {
            literatum.utils.send({
                action: 'applyDiscount',
                discount: discountCode
            }, commerce.cart.discounts.refresh, errorHandler);
        },
        remove: function (discountCode) {
            literatum.utils.send({
                action: 'removeDiscount',
                discount: discountCode
            }, commerce.cart.discounts.refresh, errorHandler);
        },
        enable: function (discountCode) {
            literatum.utils.send({
                action: 'enableDiscount',
                discount: discountCode
            }, commerce.cart.discounts.refresh, errorHandler);
        },
        disable: function (discountCode) {
            literatum.utils.send({
                action: 'disableDiscount',
                discount: discountCode
            }, commerce.cart.discounts.refresh, errorHandler);
        },
        refresh: function (cartInfo) {
            commerce.cart.notify(commerce.cart.discounts, cartInfo);
        },
        changed: function(updatedCartInfo) {
            return (cartInfo == null || cartInfo.cartHash != updatedCartInfo.cartHash);
        }
    };

    instance.summary = {
        name: 'summary',
        refresh: function () {
            commerce.cart.notify(commerce.cart.summary, cartInfo);
        },
        changed: function(updatedCartInfo) {
            return (cartInfo == null || cartInfo.cartHash != updatedCartInfo.cartHash);
        }
    };

    instance.shipping = {
        name: 'shipping',
        update: function (form) {
            var request = {};
            $.extend(request, {
                action: 'updateShippingAddress'
            }, form);
            literatum.utils.send(request, commerce.cart.shipping.refresh, errorHandler);
        },
        getShippingCosts: function(country, callback) {
            literatum.utils.send({
                action: 'getShippingCosts',
                country: country
            }, callback);
        },
        refresh: function (cartInfo) {
            commerce.cart.notify(commerce.cart.shipping, cartInfo);
        },
        changed: function(updatedCartInfo) {
            return (cartInfo == null || cartInfo.shippingHash != updatedCartInfo.shippingHash || cartInfo.buyingItemHash != updatedCartInfo.buyingItemHash);
        }
    };

    instance.tax = {
        name: 'tax',
        update: function (form) {
            var request = {};
            $.extend(request, {
                action: 'updateTax'
            }, form);
            literatum.utils.send(request, commerce.cart.tax.refresh, errorHandler);
        },
        refresh: function (cartInfo) {
            commerce.cart.notify(commerce.cart.tax, cartInfo);
        },
        changed: function(updatedCartInfo) {
            return (cartInfo == null || cartInfo.cartHash != updatedCartInfo.cartHash);
        }
    };

    instance.billing = {
        name: 'billing',
        update: function (form) {
            var request = {};
            $.extend(request, {
                action: 'updateBillingAddress'
            }, form);
            literatum.utils.send(request, commerce.cart.billing.refresh, errorHandler);
        },
        refresh: function (cartInfo) {
            commerce.cart.notify(commerce.cart.billing, cartInfo);
        },
        changed: function(updatedCartInfo) {
            return (cartInfo == null || cartInfo.billingHash != updatedCartInfo.billingHash);
        }
    };

    instance.savedItems = {
        name: 'savedItems',
        saveById: function (itemId) {
            literatum.utils.send({
                action: 'saveItem',
                id: itemId
            }, commerce.cart.savedItems.refresh, errorHandler);
        },
        saveByDoi: function (doi) {
            literatum.utils.send({
                action: 'saveItem',
                doi: doi
            }, commerce.cart.savedItems.refresh, errorHandler);
        },
        remove: function (id) {
            literatum.utils.send({
                action: 'removeSavedItem',
                id: id
            }, commerce.cart.savedItems.refresh, errorHandler);
        },
        refresh: function (cartInfo) {
            commerce.cart.notify(commerce.cart.savedItems, cartInfo);
        },
        changed: function(updatedCartInfo) {
            return (cartInfo == null || cartInfo.savedItemsHash != updatedCartInfo.savedItemsHash);
        }
    };


    instance.register = function (service, callback) {
        console.log("Commerce Cart :: Registering service " + service.name + " listener...");
        if (service) {
            if (!listeners[service.name]) {
                listeners[service.name] = [];
            }
            listeners[service.name].push(callback);
        }
    };
    instance.notify = function (service, updatedCartInfo) {
        if (updatedCartInfo) {
            if (updatedCartInfo.sessionChanged) {
                location.reload();
                return;
            }
        }
        if (updatedCartInfo && cartInfo) {
            if (cartInfo.sessionHash != updatedCartInfo.sessionHash) {
                location.reload();
                return;
            }
        }

        var result = [];

        console.log("Commerce Cart :: Notifying " + service.name + " listeners...");
        if (service && service.changed && service.changed(updatedCartInfo) || literatum.utils.hasAttributes(updatedCartInfo.attributes)) {
            if (listeners[service.name]) {
                listeners[service.name].forEach(function (listener) {
                    var value = listener(updatedCartInfo);
                    result.push(value);
                });
            }
        }

        var clone = callbacks;

        $.when.apply($, result).then(function() {
            clone.forEach(function(callback) {
                callback();
            });
        });

        commerce.cart.clearCallbacks();

        if (updatedCartInfo) {
            cartInfo = updatedCartInfo;
        }
    };

    instance.setErrorHandler = function(handler) {
        errorHandler = handler;
    };

    instance.addCallback = function(callback) {
        callbacks.push(callback);
    };

    instance.clearCallbacks = function() {
        callbacks = [];
    };

    return instance;
}());
console.log("Cart Service initialized!");
// Later might be a better idea to create form objects so they can be overridden and each handled separately
commerce.validators = (function() {
    var instance = {};

    var creditCardsPattern = {};
    creditCardsPattern['visa'] = new RegExp("^4[0-9]{12}(?:[0-9]{3})?$");
    creditCardsPattern['mastercard'] = new RegExp("^5[1-5][0-9]{14}$");
    creditCardsPattern['amex'] = new RegExp("^3[47][0-9]{13}$");
    creditCardsPattern['dinner'] = new RegExp("^3(?:0[0-5]|[68][0-9])[0-9]{11}$");
    creditCardsPattern['discover'] = new RegExp("^6(?:011|5[0-9]{2})[0-9]{12}$");
    creditCardsPattern['jcb'] = new RegExp("^(?:2131|1800|35\\d{3})\\d{11}$");

    instance.creditcard = function(value, element) {

        var number = value.match(/\d/g);

        if (!number)
            return true;

        value = number.join("");

        var invalid = true;

        $(element).closest(".input-group").prop("class", "input-group cc-number");
        Object.keys(creditCardsPattern).forEach(function(k) {
            if (creditCardsPattern[k].test(value) && invalid && /^\d+$/.test($("#realNumber").val())) {
                invalid = false;
                $(element).closest(".input-group").addClass(k);
            }
        });
        return invalid;
    };

    instance.creditcardDate = function (value, element, form) {
        var currentDate = new Date();
        var currentMonth = currentDate.getMonth(5) + 1;
        var currentYear = currentDate.getFullYear();
        var monthExpiry = form.find("select[name='expMonth']").val();
        var yearExpiry = form.find("select[name='expYear']").val();
        var expireMonth = parseInt(monthExpiry);
        var expireYear = parseInt(yearExpiry);

        var expireDate = new Date();
        expireDate.setMonth(expireMonth-1);
        expireDate.setYear(expireYear);

        if (currentYear > expireYear) {
            return true;
        }

        return expireDate < currentDate;
    };

    instance.notEmpty =  function(value) {
        return !(!!(value));
    };

    instance.validate = function(form) {
        var $form = null;
        var invalid = true;

        if (form instanceof jQuery) {
            $form = form;
        } else {
            $form = $(form);
        }

        $form.find("input[data-validate]").each(function() {
            var $this = $(this);
            invalid = commerce.validators.validateField($this, $form) && invalid;
        });
        return invalid;
    };

    instance.validateField = function(field, form) {
        var $field = null;

        if (field instanceof jQuery) {
            $field = field;
        } else {
            $field = $(field);
        }

        var validatorName = $field.data("validate");
        var validator = instance[validatorName];
        var value = $field.val();
        return validator(value, $field, form);
    };

    instance.securityCode = function (value) {
        return !(/^[0-9]{3,4}$/.test(value));
    };

    return instance;
}());commerce.binders = (function() {
    var instance = {};

    instance.removeDiscount = function(e) {
        e.preventDefault();
        commerce.cart.discounts.remove($(this).data('discount'));
    };

    instance.disableDiscount = function(e) {
        e.preventDefault();
        commerce.cart.discounts.disable($(this).data('discount'));
    };

    instance.removeItem = function(e) {
        e.preventDefault();
        commerce.cart.buyingList.remove($(this).data("item-id"));
    };







    instance.submitBilling = function(e) {
        e.preventDefault();
        commerce.cart.billing.update($("form.billing").serializeObject());
    };

    instance.editBilling = function(e) {
        e.preventDefault();
        literatum.widgets.billing.render({}, {editing: true});
    };

    instance.expandBilling = function(e) {
        e.preventDefault();
        $(".billingAddress").slideToggle();
    };

    instance.sameAsShipping = function(e) {
        if ($(this).is(":checked")) {
            literatum.utils.copyForm('.checkoutShipping form', '.billingPayment form')
        } else {
            literatum.utils.clearForm('.billingPayment form');
        }
    };

    instance.countryChanged = function(e) {
        var countryCode = $(this).val();

        var $state = $(this).closest("form").find("select[name='state']");

        if ($state.find("option[data-country='" + countryCode + "']").length > 0) {
            $state.find("option:not([data-country='" + countryCode + "'])").hide();
            $state.find("option[data-country='" + countryCode + "']").show();
            if (!$state.is(":visible")) {
                $state.parent().slideDown(); // review
            }
        } else {
            $state.parent().slideUp(); // review
        }

        $state.val(null);
    };

    instance.bind = function() {
        $("*[data-bind]").each(function() {
            var binderName = $(this).data("bind");
            console.log("Binding '" + binderName + "' to element '" + this + "'");
            var binder = instance[binderName];
            $(this).on('click', binder);
        });
    };

    instance.unbind = function() {
        $("*[data-bind]").each(function() {
            try {
                var binderName = $(this).data("bind");
                //console.log("Unbinding '" + binderName + "' to element '" + this + "'");
                var binder = instance[binderName];
                $(this).off('click', binder);
            } catch (e) {
                console.log(e);
            }
        });
    };

    return instance;
}());

function registerListeners() {
    // Always unbind before binding again
    try {
        commerce.binders.unbind();
    } catch(e) {
        console.log(e);
    }
    try {
        //console.log("Binding events to candidate elements");
        commerce.binders.bind();
    } catch (e) {
        //console.log("Failed to bind events, rolling back...");
        commerce.binders.unbind();
    }
}
;commerce.Notification = function(element) {
    if (element instanceof jQuery) {
        this.$element = element;
    } else {
        this.$element = $(element);
    }
    this.$p = $(this.$element.find("p"));
};

commerce.Notification.dummy = new commerce.Notification("<div></div>");

commerce.Notification.prototype.show = function() {
    this.$element.show();
};

commerce.Notification.prototype.showFlex = function() {
    this.$element.css('display','flex');
};

commerce.Notification.get = function(element) {
    return new commerce.Notification(element);
};

commerce.Notification.create = function(element) {
    if (!(element instanceof jQuery)) {
        element = $(element);
    }
    element.html("<p></p>");
    return new commerce.Notification(element);
};

commerce.Notification.prototype.hide = function() {
    this.$element.hide();
};

commerce.Notification.prototype.reset = function() {
    this.$p.removeClass("itemAddedMsgBox");
    this.$p.removeClass("errorMsgBox");
    this.$element.hide();
};

commerce.Notification.prototype.error = function() {
    this.$p.removeClass("itemAddedMsgBox");
    this.$p.addClass("errorMsgBox");
};

commerce.Notification.prototype.warning = function() {
    this.$p.removeClass("itemAddedMsgBox");
    this.$p.addClass("errorMsgBox");
};

commerce.Notification.prototype.info = function() {
    this.$p.removeClass("errorMsgBox");
    this.$p.addClass("itemAddedMsgBox");
};

commerce.Notification.prototype.setMessage = function(message) {
    this.$p.html(message);
};

/////////////////////////////////////////
commerce.FieldNotification = function(element) {
    if (element instanceof jQuery) {
        this.$element = element;
    } else {
        this.$element = $(element);
    }
    this.$message = $(this.$element.find(".message"));
    this.$label = $(this.$element.find(".label"));
    this.$show = $(this.$element.find(".field-info"));
};


commerce.FieldNotification.prototype.show = function() {
    if (this.$message.text().length > 0) {
        this.$show.show();
    } else {
        this.$show.hide();
    }
};

commerce.FieldNotification.get = function(element) {
    return new commerce.FieldNotification(element);
};

commerce.FieldNotification.prototype.hide = function() {
    this.$show.hide();
};

commerce.FieldNotification.prototype.error = function() {
    this.$label.removeClass("warning");
    this.$label.removeClass("info");
    this.$label.addClass("error");
};

commerce.FieldNotification.prototype.warning = function() {
    this.$label.removeClass("error");
    this.$label.removeClass("info");
    this.$label.addClass("warning");
};

commerce.FieldNotification.prototype.info = function() {
    this.$label.removeClass("warning");
    this.$label.removeClass("error");
    this.$label.addClass("info");
};

commerce.FieldNotification.prototype.reset = function() {
    this.hide();
    this.$label.removeClass("warning");
    this.$label.removeClass("error");
    this.$label.removeClass("info");
    this.setMessage("");
};

commerce.FieldNotification.prototype.setMessage = function(message) {
    this.$message.html(message);
};commerce.BuyingItemWidget = function(widgetDef, element) {
    literatum.Widget.call(this, widgetDef, element);
    this.register(commerce.cart.buyingList);
    this.register(commerce.cart.discounts);
    this.register(commerce.cart.savedItems);
    this.register(commerce.cart.summary);
};

commerce.BuyingItemWidget.prototype = new literatum.Widget();

commerce.BuyingItemWidget.id = 'eCommerceCheckoutBuyingItemsWidget';
commerce.BuyingItemWidget.action = '/pb/widgets/commerce/buyingItems';

commerce.BuyingItemWidget.notifications = {
    info: commerce.Notification
};

commerce.BuyingItemWidget.binders = {
    applyDiscount: function(e, widget) {
        var loading = new literatum.FullPageLoading();
        loading.start();
        commerce.cart.addCallback(loading.done);
        e.preventDefault();
        commerce.cart.discounts.apply(widget.find("input[name='discount']").val());
    },
    removeDiscount: function(e) {
        var loading = new literatum.FullPageLoading();
        loading.start();
        commerce.cart.addCallback(loading.done);
        e.preventDefault();
        commerce.cart.discounts.remove($(this).data('discount'));
    },
    disableDiscount: function(e) {
        var loading = new literatum.FullPageLoading();
        loading.start();
        commerce.cart.addCallback(loading.done);
        e.preventDefault();
        commerce.cart.discounts.disable($(this).data('discount'));
    },
    enableDiscount: function(e) {
        var loading = new literatum.FullPageLoading();
        loading.start();
        commerce.cart.addCallback(loading.done);
        e.preventDefault();
        commerce.cart.discounts.enable($(this).data('discount'));
    },
    saveItem: function(e) {
        var loading = new literatum.FullPageLoading();
        loading.start();
        commerce.cart.addCallback(loading.done);
        e.preventDefault();
        var itemId = $(this).data("item-id");
        if (itemId) {
            commerce.cart.savedItems.saveById(itemId);
        } else {
            commerce.cart.savedItems.saveByDoi($(this).data("item-doi"));
        }
    },
    removeItem: function(e) {
        var loading = new literatum.FullPageLoading();
        loading.start();
        commerce.cart.addCallback(loading.done);
        e.preventDefault();
        commerce.cart.buyingList.remove($(this).data("item-id"));
    },
    increaseQuantity: function(e) {
        var loading = new literatum.FullPageLoading();
        loading.start();
        commerce.cart.addCallback(loading.done);
        e.preventDefault();
        commerce.cart.buyingList.increaseQuantity($(this).data("item-id"));
    },
    decreaseQuantity: function(e) {
        var loading = new literatum.FullPageLoading();
        loading.start();
        commerce.cart.addCallback(loading.done);
        e.preventDefault();
        commerce.cart.buyingList.decreaseQuantity($(this).data("item-id"));
    }
};

commerce.BuyingItemWidget.prototype.reset = function() {
    Object.getPrototypeOf(commerce.BuyingItemWidget.prototype).reset.call(this);
    this.find("input[name='discount']").removeClass("errorMsg");
    this.find(".promoCodeMsg .errorMsg").hide();
    this.find(".promoCodeMsg .infoMsg").hide();
};

commerce.BuyingItemWidget.infoHandlers = {
    discountError: function(message, widget) {
        widget.find(".promoCodeMsg .infoMsg").hide();
        widget.find("input[name='discount']").addClass("errorMsg");
        var $error = widget.find(".promoCodeMsg .errorMsg");
        $error.html(message);
        $error.show();
    },
    discountInfo: function(message, widget) {
        widget.find(".promoCodeMsg .errorMsg").hide();
        widget.find("input[name='discount']").removeClass("errorMsg");
        var $info = widget.find(".promoCodeMsg .infoMsg");
        $info.html(message);
        $info.show();
    },
    discount: function(message, widget) {
        $(widget.find("input[name='promoCode']")).val(message);
    },
    savedItemError: function(message, widget) {
        var notification = widget.getNotification('info');
        if (notification) {
            notification.error();
            notification.setMessage(message);
            notification.show();
        }
    },
    error: function(message, widget) {
        var notification = widget.getNotification('info');
        if (notification) {
            notification.error();
            notification.setMessage(message);
            notification.show();
        }
    }
};

commerce.BuyingItemWidget.prototype.registerListeners = function() {
    Object.getPrototypeOf(commerce.BuyingItemWidget.prototype).registerListeners.call(this);

    var widget = this;

    var $applyButton = this.find("#applyDiscountForm input.applyDiscount");
    var $discountField = this.find("input[name='discount']");

    $discountField.on('keyup', function () {
        if ($discountField.val()) {
            $applyButton.addClass('primary');
            $applyButton.prop('disabled', false);
        } else {
            $applyButton.removeClass('primary');
            $applyButton.prop('disabled', true);
            widget.find(".promoCodeMsg .errorMsg").hide();
            widget.find("input[name='discount']").removeClass("errorMsg");
            var $info = widget.find(".promoCodeMsg .infoMsg");
            $info.html(message);
            $info.show();
        }
    });
};

commerce.BuyingItemWidget.find = function() {
    var $result = $("*[data-widget-def='" + commerce.BuyingItemWidget.id +"']");
    if ($result.length > 0) {
        return $result;
    }
    return $("." + commerce.BuyingItemWidget.id);
};

literatum.widgets.register(commerce.BuyingItemWidget);
commerce.SavedItemsWidget = function (widgetDef, element) {
    literatum.Widget.call(this, widgetDef, element);
    this.register(commerce.cart.buyingList);
    this.register(commerce.cart.savedItems);
};

commerce.SavedItemsWidget.prototype = new literatum.Widget();

commerce.SavedItemsWidget.id = 'eCommerceCheckoutSavedForLaterItemsWidget';
commerce.SavedItemsWidget.action = '/pb/widgets/commerce/savedItems';

commerce.SavedItemsWidget.notifications = {
    info: commerce.Notification
};

commerce.SavedItemsWidget.binders = {
    saveItem: function (e) {
        var loading = new literatum.FullPageLoading();
        loading.start();
        commerce.cart.addCallback(loading.done);
        e.preventDefault();
        var itemId = $(this).data("item-id");
        if (itemId) {
            commerce.cart.savedItems.saveById(itemId);
        } else {
            commerce.cart.savedItems.saveByDoi($(this).data("item-doi"));
        }
    },
    removeSavedItem: function (e, widget) {
        var loading = new literatum.FullPageLoading();
        loading.start();
        commerce.cart.addCallback(loading.done);
        e.preventDefault();
        commerce.cart.savedItems.remove($(this).data("item-id"));
    },
    expand: function (e) {
        e.preventDefault();
        $(this).closest(".add-to-cart").toggleClass("opened");
        var offerVisibility = $(this).next(".purchaseArea").is(':visible');
        $(".purchaseArea").slideUp();
        if (!offerVisibility) {
            $(this).next(".purchaseArea").slideToggle();
            var subject = $(".demo");
            if (e.target.id != subject.attr('id')) {
                subject.show();
            }
        }
    },
    addItem: function(e, widget) {
        if (!$(e.target).parents('.disable-click').length) {
            var loading = new literatum.FullPageLoading();
            loading.start();
            commerce.cart.addCallback(loading.done);
            e.preventDefault();
            var key = $(this).attr("data-key");
            commerce.cart.buyingList.addItem(key);
        }
    }
};

commerce.SavedItemsWidget.prototype.registerListeners = function () {
    Object.getPrototypeOf(commerce.SavedItemsWidget.prototype).registerListeners.call(this);
    if ($(window).width() >= 992) {
        $(document).on('touchend click', function (e) {
            var container = $(".demoContainer");
            if (!$(e.target).closest('.superDemo').length) {
                $(".add-to-cart.opened").removeClass("opened");
                container.hide();
                container.find('.add-journal-to-cart').removeClass('disable-click');
                container.find('.add-journal-to-cart header').removeClass('open');
                container.find('.journal-options-expanded').hide();
                container.find('.add-journal-to-cart').css('margin-bottom', '10px');
                e.stopPropagation();
            }
        });
    }
};

commerce.SavedItemsWidget.infoHandlers = {
    savedItemError: function (message, widget) {
        var notification = widget.getNotification('info');
        if (notification) {
            notification.setMessage(message);
            notification.error();
            notification.show();
        }
    }
};


commerce.SavedItemsWidget.find = function () {
    var $result = $("*[data-widget-def='" + commerce.SavedItemsWidget.id +"']");
    if ($result.length > 0) {
        return $result;
    }
    return $("." + commerce.SavedItemsWidget.id);
};

literatum.widgets.register(commerce.SavedItemsWidget);
commerce.RecommendedWidget = function(widgetDef, element) {
    literatum.Widget.call(this, widgetDef, element);
    this.register(commerce.cart.identity);
    this.register(commerce.cart.buyingList);
    this.register(commerce.cart.savedItems);
};

commerce.RecommendedWidget.prototype = new literatum.Widget();

commerce.RecommendedWidget.id = 'eCommerceCheckoutRecommendedItemsWidget';
commerce.RecommendedWidget.action = '/pb/widgets/commerce/recommended';

commerce.RecommendedWidget.binders = {
    expand: function (e) {
        e.preventDefault();
        $(this).closest(".add-to-cart").toggleClass("opened");
        var offerVisibility = $(this).next(".purchaseArea").is(':visible');
        $(".purchaseArea").slideUp();
        if (!offerVisibility) {
            $(this).next(".purchaseArea").slideToggle();
            var subject = $(".demo");
            if (e.target.id != subject.attr('id')) {
                subject.show();
            }
        }
    },
    addItem: function(e) {
        if (!$(e.target).parents('.disable-click').length) {
            var loading = new literatum.FullPageLoading();
            loading.start();
            commerce.cart.addCallback(loading.done);
            e.preventDefault();
            var key = $(this).attr("data-key");
            commerce.cart.buyingList.addItem(key);
        }
    },
    saveItem: function(e) {
        var loading = new literatum.FullPageLoading();
        loading.start();
        commerce.cart.addCallback(loading.done);
        e.preventDefault();
        var itemId = $(this).data("item-id");
        if (itemId) {
            commerce.cart.savedItems.saveById(itemId);
        } else {
            commerce.cart.savedItems.saveByDoi($(this).data("item-doi"));
        }
    }
};

commerce.RecommendedWidget.prototype.registerListeners = function () {
    Object.getPrototypeOf(commerce.RecommendedWidget.prototype).registerListeners.call(this);
    if ($(window).width() >= 992) {
        $(document).on('touchend click', function (e) {
            var container = $(".demoContainer");
            if (!$(e.target).closest('.superDemo').length) {
                $(".add-to-cart.opened").removeClass("opened");
                container.hide();
                container.find('.add-journal-to-cart').removeClass('disable-click');
                container.find('.add-journal-to-cart header').removeClass('open');
                container.find('.journal-options-expanded').hide();
                container.find('.add-journal-to-cart').css('margin-bottom', '10px');
                e.stopPropagation();
            }
        });
    }
};


commerce.RecommendedWidget.find = function() {
    var $result = $("*[data-widget-def='" + commerce.RecommendedWidget.id +"']");
    if ($result.length > 0) {
        return $result;
    }
    return $("." + commerce.RecommendedWidget.id);
};

literatum.widgets.register(commerce.RecommendedWidget);
commerce.RecentlyViewedWidget = function(widgetDef, element) {
    literatum.Widget.call(this, widgetDef, element);
    this.register(commerce.cart.identity);
    this.register(commerce.cart.buyingList);
    this.register(commerce.cart.savedItems);
};

commerce.RecentlyViewedWidget.prototype = new literatum.Widget();

commerce.RecentlyViewedWidget.id = 'eCommerceCheckoutRecentlyViewedItemsWidget';
commerce.RecentlyViewedWidget.action = '/pb/widgets/commerce/recentlyViewed';

commerce.RecentlyViewedWidget.binders = {
    expand: function (e) {
        e.preventDefault();
        $(this).closest(".add-to-cart").toggleClass("opened");
        var offerVisibility =$(this).next(".purchaseArea").is(':visible');
        $(".purchaseArea").slideUp();
        if (!offerVisibility) {
            $(this).next(".purchaseArea").slideToggle();
            var subject = $(".demo");
            if (e.target.id != subject.attr('id')) {
                subject.show();
            }
        }
    },
    addItem: function(e, widget) {
        if (!$(e.target).parents('.disable-click').length) {
            var loading = new literatum.FullPageLoading();
            loading.start();
            commerce.cart.addCallback(loading.done);
            e.preventDefault();
            var key = $(this).attr("data-key");
            commerce.cart.buyingList.addItem(key);
        }
    },
    saveItem: function(e, widget) {
        var loading = new literatum.FullPageLoading();
        loading.start();
        commerce.cart.addCallback(loading.done);
        e.preventDefault();
        var itemId = $(this).data("item-id");
        if (itemId) {
            commerce.cart.savedItems.saveById(itemId);
        } else {
            commerce.cart.savedItems.saveByDoi($(this).data("item-doi"));
        }
    }
};

commerce.RecentlyViewedWidget.prototype.registerListeners = function () {
    Object.getPrototypeOf(commerce.RecentlyViewedWidget.prototype).registerListeners.call(this);
    if ($(window).width() >= 992) {
        $(document).on('touchend', function (e) {
            var container = $(".demoContainer");
            if (!$(e.target).closest('.superDemo').length) {
                $(".add-to-cart.opened").removeClass("opened");
                container.hide();
                container.find('.add-journal-to-cart').removeClass('disable-click');
                container.find('.add-journal-to-cart header').removeClass('open');
                container.find('.journal-options-expanded').hide();
                container.find('.add-journal-to-cart').css('margin-bottom', '10px');
                e.stopPropagation();
            }
        });
    }
};

commerce.RecentlyViewedWidget.find = function() {
    var $result = $("*[data-widget-def='" + commerce.RecentlyViewedWidget.id +"']");
    if ($result.length > 0) {
        return $result;
    }
    return $("." + commerce.RecentlyViewedWidget.id);
};

literatum.widgets.register(commerce.RecentlyViewedWidget);
commerce.OrderSummaryWidget = function(widgetDef, element) {
    literatum.Widget.call(this, widgetDef, element);
    this.register(commerce.cart.identity);
    this.register(commerce.cart.buyingList);
    this.register(commerce.cart.discounts);
    this.register(commerce.cart.savedItems);
    this.register(commerce.cart.shipping);
    this.register(commerce.cart.billing);
    this.register(commerce.cart.tax);
    this.register(commerce.cart.summary);
};

commerce.OrderSummaryWidget.prototype = new literatum.Widget();

commerce.OrderSummaryWidget.id = 'eCommerceCheckoutSummaryWidget';
commerce.OrderSummaryWidget.action = '/pb/widgets/commerce/orderSummary';

commerce.OrderSummaryWidget.find = function() {
    var $result = $("*[data-widget-def='" + commerce.OrderSummaryWidget.id +"']");
    if ($result.length > 0) {
        return $result;
    }
    return $("." + commerce.OrderSummaryWidget.id);
};

literatum.widgets.register(commerce.OrderSummaryWidget);
commerce.IdentityWidget = function(widgetDef, element) {
    literatum.Widget.call(this, widgetDef, element);
    this.register(commerce.cart.identity);
    this.register(commerce.cart.buyingList);
    this.register(commerce.cart.savedItems);
};

commerce.IdentityWidget.prototype = new literatum.Widget();

commerce.IdentityWidget.id = 'eCommerceCheckoutIdentityWidget';
commerce.IdentityWidget.action = '/pb/widgets/commerce/identity';

commerce.IdentityWidget.find = function() {
    var $result = $("*[data-widget-def='" + commerce.IdentityWidget.id +"']");
    if ($result.length > 0) {
        return $result;
    }
    return $("." + commerce.IdentityWidget.id);
};

commerce.IdentityWidget.notifications = {
    identity: commerce.Notification,
    email: commerce.FieldNotification,
    acceptTermsConditions: commerce.FieldNotification
};

commerce.IdentityWidget.binders = {
    guest: function(e, widget) {
        e.preventDefault();
        var loading = new literatum.FullPageLoading();
        loading.start();
        commerce.cart.addCallback(literatum.utils.nextCheckoutSection);
        commerce.cart.addCallback(loading.done);
        var acceptTermsConditions = widget.find("input[name='acceptTermsConditions']").is(":checked");
        commerce.cart.identity.guest(widget.find("input[name='email'].user").val(), acceptTermsConditions);
    },
    showUserLogin: function(e, widget) {
        e.preventDefault();
        var $loginForm = widget.find(".frmLogin");
        var email = widget.find("input[name='email'].user").val();

        widget.find(".checkoutLogin").hide();
        $loginForm.show();
        $loginForm.find("input[name='login']").val(email).focus();
    },
    register: function(e, widget) {
        var email = widget.find("input[name='email'].user").val();
        if (email) {
            e.preventDefault();
            window.location = "/action/registration?email=" + encodeURIComponent(email) + "&redirectUri=" + encodeURIComponent(location.href);
        }
    },
    cancelLogin: function(e, widget) {
        e.preventDefault();
        var notification =  widget.getNotification("identity");
        if (notification) {
            notification.reset();
        }
        widget.find(".message.error").remove();
        widget.find(".checkoutLogin").show();
        widget.find(".frmLogin").hide();
    },
    userLogin: function(e) {
        var loading = new literatum.FullPageLoading();
        loading.start();
    },
    resetCart: function(e) {
        //e.preventDefault();
        //commerce.cart.identity.clear();
        var loading = new literatum.FullPageLoading();
        loading.start();
    },
    expand: function(e, widget) {
        widget.find(".checkout-expand").slideToggle();
    }
};

commerce.IdentityWidget.prototype.registerListeners = function() {
    Object.getPrototypeOf(commerce.IdentityWidget.prototype).registerListeners.call(this);

    var $loginInput = this.find(".frmLogin .login");
    var $passwordInput = this.find(".frmLogin .password");
    var $continueButton = this.find(".frmLogin input[type='submit']");

    $continueButton.removeClass("primary");
    $continueButton.prop('disabled', true);

    $loginInput.on('keyup', function() {
        if ($loginInput.val() && $passwordInput.val()) {
            $continueButton.addClass("primary");
            $continueButton.prop('disabled', false);
        } else {
            $continueButton.removeClass("primary");
            $continueButton.prop('disabled', true);
        }
    });

    $passwordInput.on('keyup', function() {
        if ($loginInput.val() && $passwordInput.val()) {
            $continueButton.addClass("primary");
            $continueButton.prop('disabled', false);
        } else {
            $continueButton.removeClass("primary");
            $continueButton.prop('disabled', true);
        }
    });
};

commerce.IdentityWidget.prototype.triggerInfoHandlers = function (widget, model) {
    Object.getPrototypeOf(commerce.IdentityWidget.prototype).triggerInfoHandlers.call(this, widget, model);

    widget.find("input,select").each(function () {
        var $this = $(this);
        var name = $this.attr('name');
        var errorName = name + "Error";
        var notification = widget.getNotification(name);
        if (notification) {
            notification.reset();
            if (model && model.attributes && model.attributes[errorName]) {
                notification.error();
                notification.setMessage(model.attributes[errorName]);
                notification.show();
            }
        }
    });
};

commerce.IdentityWidget.infoHandlers = {
    identityError: function(message, widget) {
        var notification = widget.getNotification("identity");
        if (notification) {
            notification.setMessage(message);
            notification.error();
            notification.show();
        }
    },
    emailError: function(message, widget) {
        var notification = widget.getNotification("email");
        if (notification) {
            notification.error();
            notification.setMessage(message);
            notification.show();
        }
    },
    acceptTermsConditionsError: function(message, widget) {
        var notification = widget.getNotification("acceptTermsConditions");
        if (notification) {
            notification.error();
            notification.setMessage(message);
            notification.show();
        }
    }
};

literatum.widgets.register(commerce.IdentityWidget);
commerce.ShippingWidget = function(widgetDef, element) {
    literatum.Widget.call(this, widgetDef, element);
    this.register(commerce.cart.identity);
    this.register(commerce.cart.buyingList);
    this.register(commerce.cart.savedItems);
    this.register(commerce.cart.shipping);
};

commerce.ShippingWidget.prototype = new literatum.Widget();

commerce.ShippingWidget.id = 'eCommerceCheckoutShippingWidget';
commerce.ShippingWidget.action = '/pb/widgets/commerce/TandfShipping';

commerce.ShippingWidget.notifications = {
    info: commerce.Notification,
    givennames: commerce.FieldNotification,
    surname: commerce.FieldNotification,
    email: commerce.FieldNotification,
    phone: commerce.FieldNotification,
    organization: commerce.FieldNotification,
    address1: commerce.FieldNotification,
    city: commerce.FieldNotification,
    country: commerce.FieldNotification,
    state: commerce.FieldNotification,
    zipCode: commerce.FieldNotification,
    shippingCost: commerce.FieldNotification

};

commerce.ShippingWidget.prototype.lostFocus = function() {
    if (this.find("form").length) {
        return literatum.widgets.render(this, {}, {});
    }
};

commerce.ShippingWidget.binders = {
    editShipping: function(e, widget) {
        var loading = new literatum.FullPageLoading();
        loading.start();
        commerce.cart.addCallback(literatum.utils.nextCheckoutSection);
        commerce.cart.addCallback(loading.done);
        e.preventDefault();

        var d = literatum.widgets.render(widget, {}, {editing: true});
        literatum.widgets.all().forEach(function(item) {
            if (widget.widgetDef.id != item.widgetDef.id) {
                d = d.then(item.lostFocus());
            }
        });
        d.then(function() {
            literatum.utils.nextCheckoutSection();
            loading.done();
        });
    },
    submitShipping: function(e, widget) {
        e.preventDefault();
        var loading = new literatum.FullPageLoading();
        loading.start();
        commerce.cart.addCallback(literatum.utils.nextCheckoutSection);
        commerce.cart.addCallback(loading.done);
        commerce.cart.shipping.update(widget.find("form").serializeObject());
    },
    shippingOptions: function(e, widget) {
        e.preventDefault();
        var forms = widget.collectForms();
        commerce.cart.shipping.shippingOptions(forms.shipping.country, forms.shipping.state)
    },
    expand: function(e, widget) {
        widget.find(".checkout-expand").slideToggle();
    },
    countryChanged: function(e, widget) {
        var loading = new literatum.FullPageLoading();
        loading.start();
        var notification = widget.getNotification('shippingCost');
        if (notification) {
            notification.reset();
        }
        var countryCode = $(this).val();
        if (countryCode == "US"){
            widget.find(".zipcode label").html(widget.find(".zipcode-text").html())
        }else{
            widget.find(".zipcode label").html(widget.find(".postcode-text").html())
        }

        literatum.utils.getCountryState(countryCode, function (model) {
            var $states = widget.find(".state");
            var $select = $states.find("select");

            if (e.type == 'change') {
                $select.val(null);
            }

            $select.find("option:not([value='-1'])").remove();
            if (model.states.length > 0) {
                model.states.forEach(function (item) {
                    $select.append('<option value="' + item['id'] + '">' + item['description'] + '</option>'); // seriously?!
                });

                $states.show();
            } else {
                $states.hide();
            }

            commerce.cart.shipping.getShippingCosts(countryCode, function(model) {
                if (model.shippingOptions.length != 1) {
                    var $shippingOptions = widget.find(".shipping-cost-select");
                    var $select = $shippingOptions.find("select");
                    $select.find("option:not([value='-1'])").remove();
                    model.shippingOptions.forEach(function (item) {
                        $select.append('<option value="' + item['id'] + '">' + item['description'] + '</option>'); // seriously?!
                    });
                    if (model.error) {
                        notification.reset();
                        notification.error();
                        notification.setMessage(model.error);
                        notification.show();
                    }
                    widget.find(".shipping-cost-one input").prop('disabled', true);
                    widget.find(".shipping-cost-select select").prop('disabled', false);
                    widget.find(".shipping-cost-one").hide();
                    widget.find(".shipping-cost-select").show();
                } else {
                    widget.find(".shipping-cost-select select").prop('disabled', true);
                    widget.find(".shipping-cost-one input[name='shippingCost']").prop('disabled', false);
                    widget.find(".shipping-cost-select").hide();
                    widget.find("input[name='shippingCost']").val(model.shippingOptions[0].id);
                    widget.find("input[name='shippingCostDescription']").val(model.shippingOptions[0].description);
                    widget.find(".shipping-cost-one").show();
                }
                loading.done();
            });
        });
    },
    selectAddress: function(e, widget) {
        var addressUuid = $(this).val();
        if (e.type == 'change'){
            if (addressUuid != '-1') {
                var loading = new literatum.FullPageLoading();
                loading.start();
                widget.render({}, {editing: true, uuid: addressUuid}, function () {
                    var $country = widget.find("select[name='country']");
                    if ($country.val() != '') {
                        commerce.cart.shipping.getShippingCosts($country.val(), function (model) {
                            var $shippingOptions = widget.find(".shippingOptions");
                            var $select = $shippingOptions.find("select");
                            $select.find("option:not([value='-1'])").remove();
                            model.shippingOptions.forEach(function (item) {
                                $select.append('<option value="' + item['id'] + '">' + item['description'] + '</option>'); // seriously?!
                            });
                            $shippingOptions.show();
                            loading.done();
                        });
                    } else {
                        loading.done();
                    }
                });
            } else {
                widget.updateForm('shipping', {});
            }
        }
    }
};

commerce.ShippingWidget.infoHandlers = {
    addressError: function(message, widget) {
        var notification = widget.getNotification('info');
        if (notification) {
            notification.error();
            notification.setMessage(message);
            notification.show();
        }
        literatum.utils.scroll('.errorMsgBox:visible', 0);
    },
    integrationErrors: function (message,widget) {
        var notification = widget.getNotification('info');
        if (notification) {
            notification.error();
            notification.setMessage(message);
            notification.show();
        }
        literatum.utils.scroll('.errorMsgBox:visible', 0);
    }
};

commerce.ShippingWidget.prototype.triggerInfoHandlers = function(widget, model) {
    Object.getPrototypeOf(commerce.ShippingWidget.prototype).triggerInfoHandlers.call(this, widget, model);
    defaultVals = [] ;
    widget.find("input,select").each(function() {
        var $this = $(this);
        var name = $this.attr('name');
        var errorName = name + "Error";
        var notification = widget.getNotification(name);
        if (notification) {
            notification.reset();
            if (model && model.attributes && model.attributes[errorName]) {
                $this.val('');
                notification.error();
                notification.setMessage(model.attributes[errorName]);
                notification.show();
            }
            else {
                defaultVals[name] = $(this).val();
            }
        }

    });
    if (defaultVals && Object.keys(defaultVals).length > 0){
        $(".checkoutShipping").find("form")[0].reset();
        widget.find("input[type='text'],select").each(function(){
            $(this).val(defaultVals[$(this).attr('name')]);
        });
    }
};

commerce.ShippingWidget.find = function() {
    var $result = $("*[data-widget-def='" + commerce.ShippingWidget.id +"']");
    if ($result.length > 0) {
        return $result;
    }
    return $("." + commerce.ShippingWidget.id);
};

literatum.widgets.register(commerce.ShippingWidget);
commerce.TaxWidget = function(widgetDef, element) {
    literatum.Widget.call(this, widgetDef, element);
    this.register(commerce.cart.buyingList);
    this.register(commerce.cart.savedItems);
    this.register(commerce.cart.billing);
    this.register(commerce.cart.shipping);
    this.register(commerce.cart.tax);
};

commerce.TaxWidget.prototype = new literatum.Widget();

commerce.TaxWidget.id = 'eCommerceCheckoutTaxWidget';
commerce.TaxWidget.action = '/pb/widgets/commerce/tax';

commerce.TaxWidget.prototype.lostFocus = function() {
    if (this.find("form").length) {
        return literatum.widgets.render(this, {}, {});
    }
};

commerce.TaxWidget.binders = {
    updateTax: function(e, widget) {
        var loading = new literatum.FullPageLoading();
        loading.start();
        commerce.cart.addCallback(literatum.utils.nextCheckoutSection);
        commerce.cart.addCallback(loading.done);
        e.preventDefault();

        var d = literatum.widgets.render(widget, {}, {editing: true});
        literatum.widgets.all().forEach(function(item) {
            if (widget.widgetDef.id != item.widgetDef.id) {
                d = d.then(item.lostFocus());
            }
        });
        d.then(function() {
            literatum.utils.nextCheckoutSection();
            loading.done();
        });
    },
    tax: function(e) {
        var loading = new literatum.FullPageLoading();
        loading.start();
        commerce.cart.addCallback(literatum.utils.nextCheckoutSection);
        commerce.cart.addCallback(loading.done);
        e.preventDefault();
        commerce.cart.tax.update($("form.tax").serializeObject());
    }
};

commerce.TaxWidget.find = function() {
    var $result = $("*[data-widget-def='" + commerce.TaxWidget.id +"']");
    if ($result.length > 0) {
        return $result;
    }
    return $("." + commerce.TaxWidget.id);
};

literatum.widgets.register(commerce.TaxWidget);
commerce.BillingWidget = function (widgetDef, element) {
    literatum.Widget.call(this, widgetDef, element);
    this.register(commerce.cart.identity);
    this.register(commerce.cart.shipping);
    this.register(commerce.cart.billing);
    this.register(commerce.cart.buyingList);
    this.register(commerce.cart.savedItems);
};

commerce.BillingWidget.prototype = new literatum.Widget();

commerce.BillingWidget.id = 'eCommerceCheckoutBillingWidget';
commerce.BillingWidget.action = '/pb/widgets/commerce/TandfBilling';

commerce.BillingWidget.notifications = {
    info: commerce.Notification,
    givennames: commerce.FieldNotification,
    surname: commerce.FieldNotification,
    email: commerce.FieldNotification,
    phone: commerce.FieldNotification,
    organization: commerce.FieldNotification,
    address1: commerce.FieldNotification,
    city: commerce.FieldNotification,
    country: commerce.FieldNotification,
    state: commerce.FieldNotification,
    zipCode: commerce.FieldNotification

};

commerce.BillingWidget.prototype.lostFocus = function() {
    if (this.find("form").length) {
        return literatum.widgets.render(this, {}, {});
    }
};

commerce.BillingWidget.binders = {
    submitBilling: function (e, widget) {
        var loading = new literatum.FullPageLoading();
        loading.start();
        commerce.cart.addCallback(literatum.utils.nextCheckoutSection);
        commerce.cart.addCallback(loading.done);
        e.preventDefault();
        commerce.cart.billing.update($("form[name='billing']").serializeObject());
    },
    editBilling: function (e, widget) {
        var loading = new literatum.FullPageLoading();
        loading.start();
        commerce.cart.addCallback(loading.done);
        e.preventDefault();

        var d = literatum.widgets.render(widget, {}, {editing: true});
        literatum.widgets.all().forEach(function(item) {
            if (widget.widgetDef.id != item.widgetDef.id) {
                d = d.then(item.lostFocus());
            }
        });
        d.then(function() {
            literatum.utils.nextCheckoutSection();
            loading.done();
            var countryCode = $("#country").val();
            if (countryCode == "US"){
                widget.find(".zipcode label").text(widget.find(".zipcode-text").text())
            }else {
                widget.find(".zipcode label").text(widget.find(".postcode-text").text())
            }
            literatum.widgets.initialize();
        });
    },
    sameAsShipping: function (e, widget) {
        if ($(this).is(":checked")) {
            var shippingWidgets = literatum.widgets.get('eCommerceCheckoutShippingWidget');
            var shippingWidget = shippingWidgets[0];
            if (shippingWidget) {
                var forms = shippingWidget.collectForms();
                widget.updateForm('billing', forms['shipping'], true);
                widget.find("select[name='country']").change();
            }

            var identityWidgets = literatum.widgets.get('eCommerceCheckoutIdentityWidget');
            var identityWidget = identityWidgets[0];
            if (identityWidget) {
                var forms = identityWidget.collectForms();
                widget.updateForm('billing', forms['personal-info'], true);
            }
        } else {
            literatum.utils.clearForm('billing', {});
        }
    },
    placeOrder: function (e, widget) {
        if (!commerce.validators.validate(widget.find("form[name='apg']"))) {
            e.preventDefault();
        }
    },
    expand: function (e, widget) {
        widget.find(".checkout-expand").slideToggle();
    },
    countryChanged: function (e, widget) {
        if (e.type == 'change') {
            var loading = new literatum.FullPageLoading();
            loading.start();
            var countryCode = $(this).val();
            if (countryCode == "US"){
                widget.find(".zipcode label").html(widget.find(".zipcode-text").html())
            }else {
                widget.find(".zipcode label").html(widget.find(".postcode-text").html())
            }

            literatum.utils.getCountryState(countryCode, function (model) {
                var $states = widget.find(".state");
                var $select = $states.find("select");

                if (e.type == 'change') {
                    $select.val(null);
                }

                $select.find("option:not([value='-1'])").remove();
                if (model.states.length > 0) {
                    model.states.forEach(function (item) {
                        $select.append('<option value="' + item['id'] + '">' + item['description'] + '</option>'); // seriously?!
                    });

                    $states.show();
                } else {
                    $states.hide();
                }
                loading.done();
            });
        }
    },
    selectAddress: function (e, widget) {
        var addressUuid = $(this).val();
        if (e.type == 'change'){
            if (addressUuid != '-1') {
                var loading = new literatum.FullPageLoading();
                loading.start();
                widget.render({}, {editing: true, uuid: addressUuid}, function () {
                    loading.done();
                    literatum.widgets.initialize();
                });
            } else {
                widget.updateForm('billing', {});
                literatum.widgets.initialize();
            }
        }
    }
};

commerce.BillingWidget.infoHandlers = {
    addressError: function (message, widget) {
        var notification = widget.getNotification('info');
        if (notification) {
            notification.error();
            notification.setMessage(message);
            notification.show();
        }
        literatum.utils.scroll('.errorMsgBox:visible', 0);
    },
    integrationErrors: function (message,widget) {
        var notification = widget.getNotification('info');
        if (notification) {
            notification.error();
            notification.setMessage(message);
            notification.show();
        }
        literatum.utils.scroll('.errorMsgBox:visible', 0);
    }
};

commerce.BillingWidget.prototype.triggerInfoHandlers = function (widget, model) {
    Object.getPrototypeOf(commerce.BillingWidget.prototype).triggerInfoHandlers.call(this, widget, model);
    defaultVals = [];
    widget.find("input,select").each(function () {
        var $this = $(this);
        var name = $this.attr('name');
        var errorName = name + "Error";
        var notification = widget.getNotification(name);
        if (notification) {
            notification.reset();
            if (model && model.attributes && model.attributes[errorName]) {
                $this.val('');
                notification.error();
                notification.setMessage(model.attributes[errorName]);
                notification.show();
            }
            else {
                defaultVals[name] = $(this).val();
            }
        }
    });
    if (defaultVals && Object.keys(defaultVals).length > 0) {
        $(".billingPayment").find("form")[0].reset();
        widget.find("input[type='text'],select").each(function () {
            $(this).val(defaultVals[$(this).attr('name')]);
        });
    }
};

commerce.BillingWidget.prototype.validateForm = function (cartInfo) {

};

commerce.BillingWidget.find = function () {
    var $result = $("*[data-widget-def='" + commerce.BillingWidget.id +"']");
    if ($result.length > 0) {
        return $result;
    }
    return $("." + commerce.BillingWidget.id);
};

literatum.widgets.register(commerce.BillingWidget);
commerce.PaymentWidget = function (widgetDef, element) {
    literatum.Widget.call(this, widgetDef, element);
    this.register(commerce.cart.identity);
    this.register(commerce.cart.billing);
    this.register(commerce.cart.shipping);
    this.register(commerce.cart.buyingList);
    this.register(commerce.cart.savedItems);
    this.register(commerce.cart.discounts);
    this.register(commerce.cart.tax);

    var $error = this.find('.errorMsgBox').not('.hidden');

    if ($error.length == 0) {
        $error = this.find(".label.error");
    }

    if ($error.length > 0) {
        commerce.page.cart.show();
        literatum.utils.scroll($error, 800, 100);
    }
};

commerce.PaymentWidget.prototype = new literatum.Widget();

commerce.PaymentWidget.id = 'eCommerceCheckoutPaymentWidget';
commerce.PaymentWidget.action = '/pb/widgets/commerce/payment';

commerce.PaymentWidget.notifications = {
    holderName: commerce.FieldNotification,
    realNumber: commerce.FieldNotification,
    creditcardDate: commerce.FieldNotification,
    secNumber: commerce.FieldNotification
};

commerce.PaymentWidget.binders = {
    expandPayment: function (e, widget) {
        e.preventDefault();
        widget.find(".payment").slideToggle();
    },
    placeOrder: function (e, widget) {
        var $form = widget.find("form[name='apg']");

        var valid = true;
        $form.find("input[data-validate],select[data-validate]").each(function () {
            var $this = $(this);
            var $group = $this.closest(".input-group");
            var invalid = commerce.validators.validateField($this, $form);
            var notification = widget.getNotification($group.data('notification'));
            if (!notification) {
                return;
            }
            if (invalid) {
                notification.reset();
                notification.setMessage('');
                notification.error();
                notification.show();
            } else {
                notification.reset()
            }
            valid = !invalid && valid;
        });

        if (!valid) {
            e.preventDefault();
        } else {
            var loading = new literatum.FullPageLoading();
            loading.setMessage("Do not close your browser while we are processing your payment"); // Figure out later how to move it to resource bundle
            loading.start();
        }
    },
    expand: function (e, widget) {
        var $header = widget.find(".checkout-expand");
        $header.stop(true, true);
        $header.slideToggle();
    }
};

commerce.PaymentWidget.find = function () {
    var $result = $("*[data-widget-def='" + commerce.PaymentWidget.id +"']");
    if ($result.length > 0) {
        return $result;
    }
    return $("." + commerce.PaymentWidget.id);
};

commerce.PaymentWidget.prototype.registerListeners = function () {

    Object.getPrototypeOf(commerce.PaymentWidget.prototype).registerListeners.call(this);

    var widget = this;
    var $date = $(this.find("input[name='expireDate']"));

    $date.on('keyup', function (e) {
        var thisVal = $(this).val();

        if (thisVal.length == 0)
            $(this).closest(".input-group").removeClass("focused");
        else
            $(this).closest(".input-group").addClass("focused");

        var numChars = $(this).val().length;

        if (numChars === 2) {
            if (thisVal > 12) {
                thisVal = 12;
            }
            if (!/\//.test(thisVal)) {
                thisVal += '/';
            }
            $(this).val(thisVal);
        }

        if (e.which == 8 && numChars === 2) {
            thisVal = thisVal.substring(0, thisVal.length - 2);
            $(this).val(thisVal);
        }
    });

    $date.on('blur', function () {
        var dateValue = $date.val().split('/');
        var numChars = $date.val().length;
        var thisVal = $date.val();
        if (this.value) {
            $(widget.find("input[name='expYear']")).val(dateValue[1]);
            $(widget.find("input[name='expMonth']")).val(dateValue[0]);
        } else {
            $(widget.find("input[name='expYear']")).val("");
            $(widget.find("input[name='expMonth']")).val("");
        }
        if (numChars > 6) {
            var currentDate = new Date();
            var currentYear = currentDate.getFullYear();
            var value = thisVal.split('/');
            var yearExpiry = value[1];
            var expireYear = parseInt(yearExpiry);

            // if (currentYear > expireYear) {
            //     thisVal = value[0] + '/' + currentYear;
            //     $date.val(thisVal);
            // }
        }
    });


    $(this.find("#realNumber")).on("blur", function(e){
        var $value = $("#realNumber").val();
        var $cElement = $("#realNumber");
        var creditCard = commerce.validators.creditcard($value, $cElement);
    });

    $(this.find(".billingPayment .actions .primary")).on("click", function(e){
        var $form = widget.find("form[name='apg']");
        var $dropdowns = $(".credit-card-date-field select");
        var $ccNumber = $("#realNumber");
        var $secNumber = $("#secNumber");
        var $this = $('input[data-validate]');
        var $group = $this.closest(".input-group");
        var invalid = commerce.validators.validateField($this, $form);
        var notification = widget.getNotification($group.data('notification'));
        var $message;
        if ($dropdowns.attr("id") == "expMonth" && $("#expMonth").val()!= "00" || $("#expYear").val()== "0000"){ //if year was empty message but month is not
            $message = "Year";
        }

        if ($dropdowns.attr("id") == "expMonth" && $("#expYear").val()!= "0000" || $("#expMonth").val()== "00"){ //if month was empty message but year is not
            $message = "Month";
        }

        if ($("#expMonth").val()== "00" && $("#expYear").val()== "0000"){ //if month was empty message and year also empty
            $message = "month and year";
        }

        if (!notification) {
            return;
        }
        if (invalid) {
            notification.reset();
            notification.setMessage('');
            notification.error();
            notification.show();
        } else {
            notification.reset()
        }

        if ($(".credit-card-date-field .error").length > 0) {
            if ($dropdowns.closest(".input-group").find(".invalid-cc").length > 0) { // check if message already exists
                $($dropdowns).closest(".input-group").find(".invalid-cc").remove(); // remove message if it already exists
            }
            $($dropdowns).parent().find(".field-info").after("<div class='invalid-cc'>Please enter "+ $message +"</div>");
        }
        else {
            $($dropdowns).closest(".input-group").find(".invalid-cc").remove();
        }

        if ($(".cc-number .error").length > 0){
            if ($ccNumber.closest(".input-group").find(".invalid-cc").length > 0) { // check if message already exists
                $($ccNumber).closest(".input-group").find(".invalid-cc").remove(); // remove message if it already exists
            }
            $($ccNumber).parent().find(".field-info").after("<div class='invalid-cc'>- IS INVALID</div>");
        }
        else {
            $($ccNumber).closest(".input-group").find(".invalid-cc").remove();
        }

        if ($("[data-notification='secNumber'] .error").length > 0){
            if ($secNumber.closest(".input-group").find(".invalid-cc").length > 0) { // check if message already exists
                $($secNumber).closest(".input-group").find(".invalid-cc").remove(); // remove message if it already exists
            }
            $($secNumber).parent().find(".field-info").after("<div class='invalid-cc'>- IS INVALID</div>");
        }
        else {
            $($secNumber).closest(".input-group").find(".invalid-cc").remove();
        }

    });


    $(document).ready(function () {
        var $confirmOrderMsg = $('.eCommerceCheckoutPaymentWidget .infoMsgBox');
        if ($confirmOrderMsg.is(':visible')) {
            $confirmOrderMsg[0].scrollIntoView();
        }
        if ($(".errorMsgBox").length > 0 &&!$(".checkout-expand > .errorMsgBox").hasClass("hidden")) {
            $('html, body').animate({
                scrollTop: $(".checkout-expand > .errorMsgBox").offset().top
            }, 1000);
        }
    });
};

literatum.widgets.register(commerce.PaymentWidget);
commerce.PurchaseOptionsWidget = function(widgetDef, element) {
    literatum.Widget.call(this, widgetDef, element);
    this.register(commerce.cart.savedItems);
    this.register(commerce.cart.buyingList);
    var $obj = this.find(".scroll-into-view").closest(".purchaseArea");
    if ($obj && $obj.length > 0) {
        literatum.utils.scroll($obj, 1000, 50);
        var $expandSection = this.find("*[data-bind='expandSection']");
        if ($expandSection.length && !$expandSection.hasClass('active')) {
            $expandSection.click();
        }
    }
};

commerce.PurchaseOptionsWidget.prototype = new literatum.Widget();

commerce.PurchaseOptionsWidget.id = 'eCommercePurchaseAccessWidget';
commerce.PurchaseOptionsWidget.action = '/pb/widgets/commerce/purchaseOptions';

commerce.PurchaseOptionsWidget.find = function() {
    var $result = $("*[data-widget-def='" + commerce.PurchaseOptionsWidget.id +"']");
    if ($result.length > 0) {
        return $result;
    }
    return $("." + commerce.PurchaseOptionsWidget.id);
};

commerce.PurchaseOptionsWidget.binders = {
    saveItem: function(e, widget) {
        var loading = new literatum.FullPageLoading();
        loading.start();
        commerce.cart.addCallback(loading.done);
        e.preventDefault();
        var key = $(this).attr("data-doi");
        commerce.cart.savedItems.saveByDoi(key);
    },
    addItem: function(e, widget) {
        var loading = new literatum.FullPageLoading();
        loading.start();
        commerce.cart.addCallback(loading.done);
        e.preventDefault();
        var key = $(this).attr("data-key");
        commerce.cart.buyingList.addItem(key);
    },
    expandSection: function(e, widget) {
        e.preventDefault();
        // TODO: UI Review if all of this still needed
        widget.find('.purchaseAreaList_expanded').slideUp();
        widget.find('.purchaseAreaList_expand').attr("aria-expanded", false);
        if ($(e.target).hasClass('active')) {
            $(e.target).removeClass('active');
            $(e.target).siblings('.purchaseAreaList_expanded').slideUp();
            $(e.target).attr("aria-expanded", false);
        } else {
            $(e.target).addClass('active');
            widget.find(".purchaseAreaList_expand").not($(e.target)).removeClass('active');
            $(e.target).siblings('.purchaseAreaList_expanded').slideDown();
            $(e.target).attr("aria-expanded", true);
        }
    }
};


commerce.PurchaseOptionsWidget.prototype.update = function(model) {
    // no need to update this widget's view, only trigger info handlers
    this.triggerInfoHandlers(this, model);
    this.loaded();
};


commerce.PurchaseOptionsWidget.infoHandlers = {
    info: function(message, widget, model) {
        var key = model.attributes['itemAdded'];
        var notification = commerce.Notification.get(widget.find(".purchaseMessage[data-item='" + key + "'].info"));
        if (notification) {
            notification.setMessage(message);
            notification.info();
            notification.show();
            notification.$element.siblings("a").find(".add-to-cart-msg").remove();
            setTimeout(function () {
                notification.$element.fadeOut();
                $(widget.find("*[data-entity='" + key + "']")).parent().hide();
                commerce.Notification.get(widget.find(".addedMessage[data-item='" + key + "']")).show();
            }, 1000);

        }
    },
    error: function(message, widget, model) {
        var key = model.attributes['itemAdded'];
        var notification = commerce.Notification.get(widget.find(".purchaseMessage[data-item='" + key + "']"));
        if (notification) {
            notification.setMessage(message);
            notification.error();
            notification.show();
        }
        $(widget.find("*[data-entity='" + key + "']")).hide();
    },
    savedItemInfo: function(message, widget) {
        var notification = commerce.Notification.get(widget.find(".savedItem-info"));
        if (notification) {
            notification.setMessage(message);
            notification.info();
            // notification.show();
        }
        $(widget.find(".save-for-later-link")).hide();
    },
    savedItemError: function(message, widget) {
        var notification = commerce.Notification.get(widget.find(".savedItem-info"));
        if (notification) {
            notification.setMessage(message);
            notification.error();
            notification.show();
        }
    },
    nextAction: function(message) {
        if (message == 'refreshPage') {
            setTimeout(function () {
                location.reload();
            }, 5000);
        }
    }
};

literatum.widgets.register(commerce.PurchaseOptionsWidget);commerce.CartIndicatorWidget = function(widgetDef, element) {
    literatum.Widget.call(this, widgetDef, element);
    this.register(commerce.cart.buyingList);
    this.register(commerce.cart.savedItems);
};

commerce.CartIndicatorWidget.prototype = new literatum.Widget();

commerce.CartIndicatorWidget.id = 'eCommerceCartIndicatorWidget';
commerce.CartIndicatorWidget.action = null;

commerce.CartIndicatorWidget.prototype.update = function(model) {
    var $cartSize = this.find("*[data-id='cart-size']");
    if (model.size == 0) {
        $cartSize.hide();
        $cartSize.html(model.size);
    } else {
        $cartSize.show("hidden");
        $cartSize.html(model.size);
    }
};

commerce.CartIndicatorWidget.find = function() {
    var $result = $("*[data-widget-def='" + commerce.CartIndicatorWidget.id +"']");
    if ($result.length > 0) {
        return $result;
    }
    return $("." + commerce.CartIndicatorWidget.id);
};

literatum.widgets.register(commerce.CartIndicatorWidget);
commerce.AddToCartWidget = function (widgetDef, element) {
    literatum.Widget.call(this, widgetDef, element);
    this.register(commerce.cart.buyingList);
};

commerce.AddToCartWidget.prototype = new literatum.Widget();

commerce.AddToCartWidget.id = 'eCommerceCheckoutAddToCartWidget';
commerce.AddToCartWidget.action = '/pb/widgets/commerce/addToCart';

commerce.AddToCartWidget.binders = {
    expand: function (e, widget) {
        e.preventDefault();
        if (widget.find(".add-journal-to-cart-container").length > 0) {
            var addToCart = document.createElement('div');
            $(addToCart).addClass('eCommerceCheckoutAddToCartWidgetExpanded');
            $(addToCart).appendTo('body');
            $('body').css('overflow', 'hidden');
            widget.find(".add-journal-to-cart-container").clone().prepend('<a href="#" class="close float-right"><i class="icon-close_thin"></i></a>').appendTo(addToCart).slideToggle().find("a").first().focus();
            var overlay = document.createElement('div');
            $(overlay).addClass('overlay-fixed');
            $(overlay).appendTo('.eCommerceCheckoutAddToCartWidgetExpanded');
            $(overlay).find("a").first().focus();
        }
        widget.registerListeners();
    },
    addItem: function (e) {
        var loading = new literatum.FullPageLoading();
        loading.start();
        commerce.cart.addCallback(loading.done);
        e.preventDefault();
        var key = $(this).attr("data-key");
        commerce.cart.buyingList.addItem(key);
    }
};

commerce.AddToCartWidget.find = function () {
    var $result = $("*[data-widget-def='" + commerce.AddToCartWidget.id +"']");
    if ($result.length > 0) {
        return $result;
    }
    return $("." + commerce.AddToCartWidget.id);
};

commerce.AddToCartWidget.infoHandlers = {
    info: function(message, widget, model) {
        var key = model.attributes['itemAdded'];
        var notification = commerce.Notification.get($(".eCommerceCheckoutAddToCartWidgetExpanded .purchaseMessage[data-item='" + key + "']"));
        if (notification) {
            notification.setMessage(message);
            notification.info();
            notification.show();
            notification.$element.siblings("a").find(".add-to-cart-msg").remove();
            setTimeout(function () {
                notification.$element.fadeOut();
                $(".eCommerceCheckoutAddToCartWidgetExpanded *[data-entity='" + key + "']").hide();
                notification.$element.siblings(".addedMessage[data-item='" + key + "']").show();
            }, 2000);
        }
    },
    error: function(message, widget, model) {
        var key = model.attributes['itemAdded'];
        var notification = commerce.Notification.get($(".eCommerceCheckoutAddToCartWidgetExpanded .purchaseMessage[data-item='" + key + "']"));
        if (notification) {
            notification.setMessage(message);
            notification.error();
            notification.show();
        }
        $(".eCommerceCheckoutAddToCartWidgetExpanded *[data-entity='" + key + "']").hide();

    },
    savedItemInfo: function(message, widget) {
        var notification = commerce.Notification.get(widget.find(".savedItem-info"));
        if (notification) {
            notification.setMessage(message);
            notification.info();
            notification.show();
        }
        $(".eCommerceCheckoutAddToCartWidgetExpanded .save-for-later-link").hide();
    },
    savedItemError: function(message, widget) {
        var notification = commerce.Notification.get(widget.find(".savedItem-info"));
        if (notification) {
            notification.setMessage(message);
            notification.error();
            notification.show();
        }
    },
    nextAction: function(message) {
        if (message == 'refreshPage') {
            setTimeout(function () {
                location.reload();
            }, 5000);
        }
    }
};

commerce.AddToCartWidget.prototype.render = function(model, params) {
    params['doi'] = this.find("a[data-doi]").attr("data-doi");
    Object.getPrototypeOf(commerce.AddToCartWidget.prototype).render.call(this, model, params);
};

commerce.AddToCartWidget.prototype.registerListeners = function() {

    Object.getPrototypeOf(commerce.AddToCartWidget.prototype).registerListeners.call(this);

    $(document).on('click', function(event) {
        if (!$(event.target).closest('.eCommerceCheckoutAddToCartWidgetExpanded').length && !$(event.target).closest('.eCommerceCheckoutAddToCartWidget').length && $('.eCommerceCheckoutAddToCartWidgetExpanded').is(':visible')) {
            event.preventDefault();
            $('.eCommerceCheckoutAddToCartWidgetExpanded').remove();
            $('body').css('overflow','auto');
        }
    });

    $(document).on('click', '.eCommerceCheckoutAddToCartWidgetExpanded .close', function () {
        $('.eCommerceCheckoutAddToCartWidgetExpanded').remove();
        $('body').css('overflow','auto');
    });
    // FIXME: this is a workaround because of how currently the content of this widget is being copied
    // FIXME: which ruins how this widget works.

    $(".eCommerceCheckoutAddToCartWidgetExpanded *[data-bind='addItem']").off();

    $(".eCommerceCheckoutAddToCartWidgetExpanded *[data-bind='addItem']").click(function(e) {
        var loading = new literatum.FullPageLoading();
        loading.start();
        commerce.cart.addCallback(loading.done);
        e.preventDefault();
        var key = $(this).attr("data-key");
        commerce.cart.buyingList.addItem(key);
    });
};

literatum.widgets.register(commerce.AddToCartWidget);
commerce.CartInfoWidget = function(widgetDef, element) {
    literatum.Widget.call(this, widgetDef, element);
    this.register(commerce.cart.identity);
    this.register(commerce.cart.discounts);
    this.register(commerce.cart.buyingList);
    this.register(commerce.cart.savedItems);
    this.register(commerce.cart.billing);
    this.register(commerce.cart.shipping);
};

commerce.CartInfoWidget.prototype = new literatum.Widget();

commerce.CartInfoWidget.id = 'eCommerceCartInfoWidget';
commerce.CartInfoWidget.action = null;

commerce.CartInfoWidget.prototype.update = function() {
    var notification = commerce.Notification.get(this.find(".cartInfo"));
    if (notification) {
        notification.reset();
    }
};

commerce.CartInfoWidget.find = function() {
    var $result = $("*[data-widget-def='" + commerce.CartInfoWidget.id +"']");
    if ($result.length > 0) {
        return $result;
    }
    return $("." + commerce.CartInfoWidget.id);
};

literatum.widgets.register(commerce.CartInfoWidget);
commerce.IdentityBarWidget = function(widgetDef, element) {
    literatum.Widget.call(this, widgetDef, element);
    this.register(commerce.cart.identity);
};

commerce.IdentityBarWidget.prototype = new literatum.Widget();

commerce.IdentityBarWidget.id = 'literatumNavigationLoginBar';
commerce.IdentityBarWidget.action = '/pb/widgets/commerce/identityBar';

commerce.IdentityBarWidget.binders = {
    expand: function (e, widget) {
        widget.find(".navigation-login-dropdown-container").toggle();
    }
};

commerce.IdentityBarWidget.find = function() {
    var $result = $("*[data-widget-def='" + commerce.IdentityBarWidget.id +"']");
    if ($result.length > 0) {
        return $result;
    }
    return $("." + commerce.IdentityBarWidget.id);
};

commerce.IdentityBarWidget.prototype.registerListeners = function () {
    Object.getPrototypeOf(commerce.RecommendedWidget.prototype).registerListeners.call(this);
    var $popups = $('.popup');
    var $popup = $('.login-popup');

    $('.show-login').off();

    $('.show-login').click(function(event) {
        if ($popups.length) {
            $popups.addClass('hidden');
            $popup.removeClass('hidden');
            $('body').addClass('noscroll');
            event.preventDefault();
        }
    });
};

literatum.widgets.register(commerce.IdentityBarWidget);
commerce.RestoreAccessWidget = function(widgetDef, element) {
    literatum.Widget.call(this, widgetDef, element);
    this.register(commerce.cart.restoreAccess);
};

commerce.RestoreAccessWidget.prototype = new literatum.Widget();

commerce.RestoreAccessWidget.id = 'eCommerceRestoreContentAccessWidget';
commerce.RestoreAccessWidget.action = '/pb/widgets/commerce/restoreAccess';

commerce.RestoreAccessWidget.find = function() {
    var $result = $("*[data-widget-def='" + commerce.RestoreAccessWidget.id +"']");
    if ($result.length > 0) {
        return $result;
    }
    return $("." + commerce.RestoreAccessWidget.id);
};

commerce.RestoreAccessWidget.binders = {
    request: function(e, widget) {
        var loading = new literatum.FullPageLoading();
        loading.start();
        commerce.cart.addCallback(loading.done);
        e.preventDefault();
        commerce.cart.restoreAccess.request(widget.find("input[name='email']").val());
    }
};

commerce.RestoreAccessWidget.prototype.update = function(model) {
    // no need to update this widget's view, only trigger info handlers
    this.triggerInfoHandlers(this, model);
    this.loaded();
};

commerce.RestoreAccessWidget.infoHandlers = {
    restoreError: function(message, widget) {
        widget.find('.restore-info').hide();
        widget.find('.restore-error').hide();
        var notification = commerce.Notification.get(widget.find(".restore-error"));
        notification.setMessage(message);
        notification.error();
        notification.show();
    },
    error: function(message, widget) {
        widget.find('.restore-info').hide();
        var $inputGroup = widget.find("input[name='email']").closest(".input-group");
        var notification = commerce.FieldNotification.get($inputGroup);
        if (notification) {
            notification.error();
            notification.setMessage(message);
            notification.show();
        }
    },
    info: function(message, widget) {
        widget.find('.restore-error').hide();
        var $inputGroup = widget.find("input[name='email']").closest(".input-group");
        var notification = commerce.Notification.get(widget.find(".restore-info"));
        var fieldNotification = commerce.FieldNotification.get($inputGroup);
        if (fieldNotification) {
            fieldNotification.reset();
            fieldNotification.hide();
        }
        if (notification) {
            notification.setMessage(message);
            notification.info();
            notification.show();
        }
    }
};

literatum.widgets.register(commerce.RestoreAccessWidget);
$(document).on('click', '.checkoutStickyBtn .button', function () {
    commerce.page.cart.show();
    literatum.utils.nextCheckoutSection();
});

$(document).on('scroll', function (e) {
    if ($(".checkoutStickyBtn").length) {
        var freezePoint = window.pageYOffset + $(window).height() - 50;
        var parentTop = $(".checkoutStickyBtn").parent().offset().top;
        if (freezePoint >= parentTop) {
            $(".checkoutStickyBtn").addClass("freeze");
        } else {
            $(".checkoutStickyBtn").removeClass("freeze");
        }
    }
});

$(document).on('click touchstart', '.checkoutProcessRightCol .icon-close_thin', function (e) {
    if ($(window).width() < 993 && $('.checkoutProcessRightCol').is(':visible')) {
        $('.checkoutProcessRightCol').toggle();
        $('.checkoutProcessLeftCol').toggle();
        $('.pageHeader').toggle();
        $('.pageFooter').toggle();
        e.preventDefault();
        e.stopPropagation();
    }
});

commerce.page.cart.show = function () {
    if ($(window).width() < 993 && $('.checkoutProcessRightCol').length != 0) {
        $('.checkoutProcessRightCol').toggle();
        $('.checkoutProcessLeftCol').toggle();
        $('.pageHeader').toggle();
        $('.pageFooter').toggle();

        if ($('.checkoutProcessRightCol .icon-close_thin').length == 0)
            $('.eCommerceCheckoutFieldsWidget').before('<div class="clearfix close-btn-container"><a href="#" class="icon-close_thin hidden-lg hidden-md"></a></div>');
    }
};

commerce.page.cart.checkoutButton = function (data) {
    var $leftCol = $('.checkoutProcessLeftCol');
    if (data.size == 0) {
        $leftCol.removeClass('no-buying');
    } else {
        $leftCol.addClass('no-buying');
    }

    if (data.size > 0 && $(window).width() < 993 && $('.checkoutStickyBtn').length == 0 && $leftCol.length) {
        $leftCol.append('<div><div class="checkoutStickyBtn"><input class="button primary" type="button" title="checkout" value="checkout"></div></div>');
    }
    if (!data.size || $(window).width() >= 993) {
        $('.checkoutStickyBtn').remove();
    }
};

commerce.cart.register(commerce.cart.buyingList, commerce.page.cart.checkoutButton);
commerce.cart.register(commerce.cart.savedItems, commerce.page.cart.checkoutButton);
$(document).ready(function() {

    var checkout = location.hash.indexOf("checkout") > -1 || location.href.indexOf('checkout') > -1;

    if (checkout && $(".cartLabel .shopping-cart").html() > 0) {
        commerce.page.cart.show();
    }

    if (checkout) {
        literatum.utils.nextCheckoutSection();
    }

    commerce.page.cart.checkoutButton({size: $(".cartLabel .shopping-cart").html()});

    $(document).on('click', '.add-journal-to-cart .prevent-fix, .add-journal-to-cart .tab-nav a', function (e) {

        if ($(this).parent().hasClass('disable-click')) {
            return false;
        } else {
            $(this).next(".journal-options-expanded").slideToggle();
            $(this).toggleClass("open");
            setTimeout(function () {
                $('.eCommerceCheckoutSavedForLaterItemsWidget .journal-options-expanded,.eCommerceCheckoutRecommendedItemsWidget .journal-options-expanded,.eCommerceCheckoutRecentlyViewedItemsWidget .journal-options-expanded').each(function () {
                    //if ($(this).is(':visible')) {
                        var expandedMargin = $(this).height() + 21;
                        if (expandedMargin > 25 && $(this).is(':visible')) {
                            $(this).closest('.add-journal-to-cart').css('margin-bottom', expandedMargin);
                        } else {
                            $(this).closest('.add-journal-to-cart').css('margin-bottom', '10px');
                        }
                    //}

                });
            }, 400);
            if ($(this).closest('.purchaseArea').css('position') == 'absolute' && !$(e.target).closest('.tab-nav').length) {
                $('.add-journal-to-cart').toggleClass('disable-click');
                $(this).closest('.add-journal-to-cart').toggleClass("disable-click");
            }
        }
        return false;
    });
});

$(document).on("keyup", ".js__verifyAddress input", function(e){
    var pattern = new RegExp('[PO.]*\\s?B(ox)?.*\\d+', 'i');
    if ($(this).val().match(pattern) && $(this).val().indexOf("PO BOX") != 0) {
        $(this).addClass("error");
        if ($(this).siblings(".errorMsg").length == 0)
            $(this).after("<span class='errorMsg'>PO BOX addresses should start with 'PO BOX'</span>");
    }else{
        $(this).removeClass("error");
        $(this).siblings(".errorMsg").remove();
    }
});

$(window).resize(function () {
    commerce.page.cart.checkoutButton({size: $(".cartLabel .shopping-cart").html()});
});

literatum.events.register('user-action', function() {
    literatum.widgets.all().forEach(function(item){ item.reset()});
});

literatum.events.register('widget-rendered', function() {
    if ($(document).Tabs) {
        $(document).Tabs();
    }
});

commerce.cart.setErrorHandler(function() {
    location.reload();
});
commerce.RedeemAllowanceWidget = function (widgetDef, element) {
    literatum.Widget.call(this, widgetDef, element);
};

commerce.RedeemAllowanceWidget.prototype = new literatum.Widget();

commerce.RedeemAllowanceWidget.id = 'eCommerceRedeemOfferWidget';
commerce.RedeemAllowanceWidget.action = '/pb/widgets/commerce/redeemAllowance';

commerce.RedeemAllowanceWidget.binders = {
    expand: function (e, widget) {
        e.preventDefault();
        widget.find('.expand-purchase-options').toggleClass('expanded');
        widget.find(".add-allowance").slideToggle();
    }
};

commerce.RedeemAllowanceWidget.find = function () {
    var $result = $("*[data-widget-def='" + commerce.RedeemAllowanceWidget.id +"']");
    if ($result.length > 0) {
        return $result;
    }
    return $("." + commerce.RedeemAllowanceWidget.id);
};

literatum.widgets.register(commerce.RedeemAllowanceWidget);

$(function(){var $purchase=$('.purchaseArea');$purchase.on('click','.expand-link',function(event){event.preventDefault();var $link=$(this);var $content=$link.nextAll('.content');$link.toggleClass('active');$content.toggleClass('hidden');});$('.save-for-later-link').click(function(){$(".save-for-later-link").hide();$(".saved-go-cart").show();});$('.add-article-to-cart').click(function(){$(".save-for-later-link").hide();});var $deepdyve=$purchase.find('.deep-dyve');if($deepdyve.length){var url='http://www.deepdyve.com/rental-link';var data=$deepdyve.data();if(data.affid&&data.issn&&data.doi){$.ajax({url:url,data:{docId:data.doi,fieldName:'journal_doi',journal:data.issn,affiliateId:data.affid,format:'jsonp'},dataType:'jsonp',jsonp:'callback'}).then(function(json){if(json.status==='ok'){$deepdyve.attr('href',json.url);$deepdyve.removeClass('hidden');}});}}});/*!
 * Masonry PACKAGED v3.3.2
 * Cascading grid layout library
 * http://masonry.desandro.com
 * MIT License
 * by David DeSandro
 *//*!
 * eventie v1.0.6
 * event binding helper
 *   eventie.bind( elem, 'click', myFn )
 *   eventie.unbind( elem, 'click', myFn )
 * MIT license
 *//*!
 * EventEmitter v4.2.11 - git.io/ee
 * Unlicense - http://unlicense.org/
 * Oliver Caldwell - http://oli.me.uk/
 * @preserve
 *//*!
 * getStyleProperty v1.0.4
 * original by kangax
 * http://perfectionkills.com/feature-testing-css-properties/
 * MIT license
 *//*!
 * getSize v1.2.2
 * measure size of elements
 * MIT license
 *//*!
 * docReady v1.0.4
 * Cross browser DOMContentLoaded event emitter
 * MIT license
 *//*!
 * Outlayer v1.4.2
 * the brains and guts of a layout library
 * MIT license
 *//*!
 * Masonry v3.3.2
 * Cascading grid layout library
 * http://masonry.desandro.com
 * MIT License
 * by David DeSandro
 */
(function(window){var slice=Array.prototype.slice;function noop(){}
function defineBridget($){if(!$){return;}
function addOptionMethod(PluginClass){if(PluginClass.prototype.option){return;}
PluginClass.prototype.option=function(opts){if(!$.isPlainObject(opts)){return;}
this.options=$.extend(true,this.options,opts);};}
var logError=typeof console==='undefined'?noop:function(message){console.error(message);};function bridge(namespace,PluginClass){$.fn[namespace]=function(options){if(typeof options==='string'){var args=slice.call(arguments,1);for(var i=0,len=this.length;i<len;i++){var elem=this[i];var instance=$.data(elem,namespace);if(!instance){logError("cannot call methods on "+namespace+" prior to initialization; "+"attempted to call '"+options+"'");continue;}
if(!$.isFunction(instance[options])||options.charAt(0)==='_'){logError("no such method '"+options+"' for "+namespace+" instance");continue;}
var returnValue=instance[options].apply(instance,args);if(returnValue!==undefined){return returnValue;}}
return this;}else{return this.each(function(){var instance=$.data(this,namespace);if(instance){instance.option(options);instance._init();}else{instance=new PluginClass(this,options);$.data(this,namespace,instance);}});}};}
$.bridget=function(namespace,PluginClass){addOptionMethod(PluginClass);bridge(namespace,PluginClass);};return $.bridget;}
if(typeof exports==='object'){defineBridget(require('jquery'));}else{defineBridget(window.jQuery);}})(window);(function(window){var docElem=document.documentElement;var bind=function(){};function getIEEvent(obj){var event=window.event;event.target=event.target||event.srcElement||obj;return event;}
if(docElem.addEventListener){bind=function(obj,type,fn){obj.addEventListener(type,fn,false);};}else if(docElem.attachEvent){bind=function(obj,type,fn){obj[type+fn]=fn.handleEvent?function(){var event=getIEEvent(obj);fn.handleEvent.call(fn,event);}:function(){var event=getIEEvent(obj);fn.call(obj,event);};obj.attachEvent("on"+type,obj[type+fn]);};}
var unbind=function(){};if(docElem.removeEventListener){unbind=function(obj,type,fn){obj.removeEventListener(type,fn,false);};}else if(docElem.detachEvent){unbind=function(obj,type,fn){obj.detachEvent("on"+type,obj[type+fn]);try{delete obj[type+fn];}catch(err){obj[type+fn]=undefined;}};}
var eventie={bind:bind,unbind:unbind};if(typeof exports==='object'){module.exports=eventie;}else{window.eventie=eventie;}})(window);;(function(){function EventEmitter(){}
var proto=EventEmitter.prototype;var exports=this;var originalGlobalValue=exports.EventEmitter;function indexOfListener(listeners,listener){var i=listeners.length;while(i--){if(listeners[i].listener===listener){return i;}}
return-1;}
function alias(name){return function aliasClosure(){return this[name].apply(this,arguments);};}
proto.getListeners=function getListeners(evt){var events=this._getEvents();var response;var key;if(evt instanceof RegExp){response={};for(key in events){if(events.hasOwnProperty(key)&&evt.test(key)){response[key]=events[key];}}}
else{response=events[evt]||(events[evt]=[]);}
return response;};proto.flattenListeners=function flattenListeners(listeners){var flatListeners=[];var i;for(i=0;i<listeners.length;i+=1){flatListeners.push(listeners[i].listener);}
return flatListeners;};proto.getListenersAsObject=function getListenersAsObject(evt){var listeners=this.getListeners(evt);var response;if(listeners instanceof Array){response={};response[evt]=listeners;}
return response||listeners;};proto.addListener=function addListener(evt,listener){var listeners=this.getListenersAsObject(evt);var listenerIsWrapped=typeof listener==='object';var key;for(key in listeners){if(listeners.hasOwnProperty(key)&&indexOfListener(listeners[key],listener)===-1){listeners[key].push(listenerIsWrapped?listener:{listener:listener,once:false});}}
return this;};proto.on=alias('addListener');proto.addOnceListener=function addOnceListener(evt,listener){return this.addListener(evt,{listener:listener,once:true});};proto.once=alias('addOnceListener');proto.defineEvent=function defineEvent(evt){this.getListeners(evt);return this;};proto.defineEvents=function defineEvents(evts){for(var i=0;i<evts.length;i+=1){this.defineEvent(evts[i]);}
return this;};proto.removeListener=function removeListener(evt,listener){var listeners=this.getListenersAsObject(evt);var index;var key;for(key in listeners){if(listeners.hasOwnProperty(key)){index=indexOfListener(listeners[key],listener);if(index!==-1){listeners[key].splice(index,1);}}}
return this;};proto.off=alias('removeListener');proto.addListeners=function addListeners(evt,listeners){return this.manipulateListeners(false,evt,listeners);};proto.removeListeners=function removeListeners(evt,listeners){return this.manipulateListeners(true,evt,listeners);};proto.manipulateListeners=function manipulateListeners(remove,evt,listeners){var i;var value;var single=remove?this.removeListener:this.addListener;var multiple=remove?this.removeListeners:this.addListeners;if(typeof evt==='object'&&!(evt instanceof RegExp)){for(i in evt){if(evt.hasOwnProperty(i)&&(value=evt[i])){if(typeof value==='function'){single.call(this,i,value);}
else{multiple.call(this,i,value);}}}}
else{i=listeners.length;while(i--){single.call(this,evt,listeners[i]);}}
return this;};proto.removeEvent=function removeEvent(evt){var type=typeof evt;var events=this._getEvents();var key;if(type==='string'){delete events[evt];}
else if(evt instanceof RegExp){for(key in events){if(events.hasOwnProperty(key)&&evt.test(key)){delete events[key];}}}
else{delete this._events;}
return this;};proto.removeAllListeners=alias('removeEvent');proto.emitEvent=function emitEvent(evt,args){var listeners=this.getListenersAsObject(evt);var listener;var i;var key;var response;for(key in listeners){if(listeners.hasOwnProperty(key)){i=listeners[key].length;while(i--){listener=listeners[key][i];if(listener.once===true){this.removeListener(evt,listener.listener);}
response=listener.listener.apply(this,args||[]);if(response===this._getOnceReturnValue()){this.removeListener(evt,listener.listener);}}}}
return this;};proto.trigger=alias('emitEvent');proto.emit=function emit(evt){var args=Array.prototype.slice.call(arguments,1);return this.emitEvent(evt,args);};proto.setOnceReturnValue=function setOnceReturnValue(value){this._onceReturnValue=value;return this;};proto._getOnceReturnValue=function _getOnceReturnValue(){if(this.hasOwnProperty('_onceReturnValue')){return this._onceReturnValue;}
else{return true;}};proto._getEvents=function _getEvents(){return this._events||(this._events={});};EventEmitter.noConflict=function noConflict(){exports.EventEmitter=originalGlobalValue;return EventEmitter;};if(typeof module==='object'&&module.exports){module.exports=EventEmitter;}
else{exports.EventEmitter=EventEmitter;}}.call(this));(function(window){var prefixes='Webkit Moz ms Ms O'.split(' ');var docElemStyle=document.documentElement.style;function getStyleProperty(propName){if(!propName){return;}
if(typeof docElemStyle[propName]==='string'){return propName;}
propName=propName.charAt(0).toUpperCase()+propName.slice(1);var prefixed;for(var i=0,len=prefixes.length;i<len;i++){prefixed=prefixes[i]+propName;if(typeof docElemStyle[prefixed]==='string'){return prefixed;}}}
if(typeof exports==='object'){module.exports=getStyleProperty;}else{window.getStyleProperty=getStyleProperty;}})(window);(function(window,undefined){function getStyleSize(value){var num=parseFloat(value);var isValid=value.indexOf('%')===-1&&!isNaN(num);return isValid&&num;}
function noop(){}
var logError=typeof console==='undefined'?noop:function(message){console.error(message);};var measurements=['paddingLeft','paddingRight','paddingTop','paddingBottom','marginLeft','marginRight','marginTop','marginBottom','borderLeftWidth','borderRightWidth','borderTopWidth','borderBottomWidth'];function getZeroSize(){var size={width:0,height:0,innerWidth:0,innerHeight:0,outerWidth:0,outerHeight:0};for(var i=0,len=measurements.length;i<len;i++){var measurement=measurements[i];size[measurement]=0;}
return size;}
function defineGetSize(getStyleProperty){var isSetup=false;var getStyle,boxSizingProp,isBoxSizeOuter;function setup(){if(isSetup){return;}
isSetup=true;var getComputedStyle=window.getComputedStyle;getStyle=(function(){var getStyleFn=getComputedStyle?function(elem){return getComputedStyle(elem,null);}:function(elem){return elem.currentStyle;};return function getStyle(elem){var style=getStyleFn(elem);if(!style){logError('Style returned '+style+'. Are you running this code in a hidden iframe on Firefox? '+'See http://bit.ly/getsizebug1');}
return style;};})();boxSizingProp=getStyleProperty('boxSizing');if(boxSizingProp){var div=document.createElement('div');div.style.width='200px';div.style.padding='1px 2px 3px 4px';div.style.borderStyle='solid';div.style.borderWidth='1px 2px 3px 4px';div.style[boxSizingProp]='border-box';var body=document.body||document.documentElement;body.appendChild(div);var style=getStyle(div);isBoxSizeOuter=getStyleSize(style.width)===200;body.removeChild(div);}}
function getSize(elem){setup();if(typeof elem==='string'){elem=document.querySelector(elem);}
if(!elem||typeof elem!=='object'||!elem.nodeType){return;}
var style=getStyle(elem);if(style.display==='none'){return getZeroSize();}
var size={};size.width=elem.offsetWidth;size.height=elem.offsetHeight;var isBorderBox=size.isBorderBox=!!(boxSizingProp&&style[boxSizingProp]&&style[boxSizingProp]==='border-box');for(var i=0,len=measurements.length;i<len;i++){var measurement=measurements[i];var value=style[measurement];value=mungeNonPixel(elem,value);var num=parseFloat(value);size[measurement]=!isNaN(num)?num:0;}
var paddingWidth=size.paddingLeft+size.paddingRight;var paddingHeight=size.paddingTop+size.paddingBottom;var marginWidth=size.marginLeft+size.marginRight;var marginHeight=size.marginTop+size.marginBottom;var borderWidth=size.borderLeftWidth+size.borderRightWidth;var borderHeight=size.borderTopWidth+size.borderBottomWidth;var isBorderBoxSizeOuter=isBorderBox&&isBoxSizeOuter;var styleWidth=getStyleSize(style.width);if(styleWidth!==false){size.width=styleWidth+
(isBorderBoxSizeOuter?0:paddingWidth+borderWidth);}
var styleHeight=getStyleSize(style.height);if(styleHeight!==false){size.height=styleHeight+
(isBorderBoxSizeOuter?0:paddingHeight+borderHeight);}
size.innerWidth=size.width-(paddingWidth+borderWidth);size.innerHeight=size.height-(paddingHeight+borderHeight);size.outerWidth=size.width+marginWidth;size.outerHeight=size.height+marginHeight;return size;}
function mungeNonPixel(elem,value){if(window.getComputedStyle||value.indexOf('%')===-1){return value;}
var style=elem.style;var left=style.left;var rs=elem.runtimeStyle;var rsLeft=rs&&rs.left;if(rsLeft){rs.left=elem.currentStyle.left;}
style.left=value;value=style.pixelLeft;style.left=left;if(rsLeft){rs.left=rsLeft;}
return value;}
return getSize;}
if(typeof exports==='object'){module.exports=defineGetSize(require('desandro-get-style-property'));}else{window.getSize=defineGetSize(window.getStyleProperty);}})(window);(function(window){var document=window.document;var queue=[];function docReady(fn){if(typeof fn!=='function'){return;}
if(docReady.isReady){fn();}else{queue.push(fn);}}
docReady.isReady=false;function onReady(event){var isIE8NotReady=event.type==='readystatechange'&&document.readyState!=='complete';if(docReady.isReady||isIE8NotReady){return;}
trigger();}
function trigger(){docReady.isReady=true;for(var i=0,len=queue.length;i<len;i++){var fn=queue[i];fn();}}
function defineDocReady(eventie){if(document.readyState==='complete'){trigger();}else{eventie.bind(document,'DOMContentLoaded',onReady);eventie.bind(document,'readystatechange',onReady);eventie.bind(window,'load',onReady);}
return docReady;}
if(typeof exports==='object'){module.exports=defineDocReady(require('eventie'));}else{window.docReady=defineDocReady(window.eventie);}})(window);(function(ElemProto){var matchesMethod=(function(){if(ElemProto.matches){return'matches';}
if(ElemProto.matchesSelector){return'matchesSelector';}
var prefixes=['webkit','moz','ms','o'];for(var i=0,len=prefixes.length;i<len;i++){var prefix=prefixes[i];var method=prefix+'MatchesSelector';if(ElemProto[method]){return method;}}})();function match(elem,selector){return elem[matchesMethod](selector);}
function checkParent(elem){if(elem.parentNode){return;}
var fragment=document.createDocumentFragment();fragment.appendChild(elem);}
function query(elem,selector){checkParent(elem);var elems=elem.parentNode.querySelectorAll(selector);for(var i=0,len=elems.length;i<len;i++){if(elems[i]===elem){return true;}}
return false;}
function matchChild(elem,selector){checkParent(elem);return match(elem,selector);}
var matchesSelector;if(matchesMethod){var div=document.createElement('div');var supportsOrphans=match(div,'div');matchesSelector=supportsOrphans?match:matchChild;}else{matchesSelector=query;}
if(typeof exports==='object'){module.exports=matchesSelector;}
else{window.matchesSelector=matchesSelector;}})(Element.prototype);(function(window,factory){if(typeof exports=='object'){module.exports=factory(window,require('doc-ready'),require('desandro-matches-selector'));}else{window.fizzyUIUtils=factory(window,window.docReady,window.matchesSelector);}}(window,function factory(window,docReady,matchesSelector){var utils={};utils.extend=function(a,b){for(var prop in b){a[prop]=b[prop];}
return a;};utils.modulo=function(num,div){return((num%div)+div)%div;};var objToString=Object.prototype.toString;utils.isArray=function(obj){return objToString.call(obj)=='[object Array]';};utils.makeArray=function(obj){var ary=[];if(utils.isArray(obj)){ary=obj;}else if(obj&&typeof obj.length=='number'){for(var i=0,len=obj.length;i<len;i++){ary.push(obj[i]);}}else{ary.push(obj);}
return ary;};utils.indexOf=Array.prototype.indexOf?function(ary,obj){return ary.indexOf(obj);}:function(ary,obj){for(var i=0,len=ary.length;i<len;i++){if(ary[i]===obj){return i;}}
return-1;};utils.removeFrom=function(ary,obj){var index=utils.indexOf(ary,obj);if(index!=-1){ary.splice(index,1);}};utils.isElement=(typeof HTMLElement=='function'||typeof HTMLElement=='object')?function isElementDOM2(obj){return obj instanceof HTMLElement;}:function isElementQuirky(obj){return obj&&typeof obj=='object'&&obj.nodeType==1&&typeof obj.nodeName=='string';};utils.setText=(function(){var setTextProperty;function setText(elem,text){setTextProperty=setTextProperty||(document.documentElement.textContent!==undefined?'textContent':'innerText');elem[setTextProperty]=text;}
return setText;})();utils.getParent=function(elem,selector){while(elem!=document.body){elem=elem.parentNode;if(matchesSelector(elem,selector)){return elem;}}};utils.getQueryElement=function(elem){if(typeof elem=='string'){return document.querySelector(elem);}
return elem;};utils.handleEvent=function(event){var method='on'+event.type;if(this[method]){this[method](event);}};utils.filterFindElements=function(elems,selector){elems=utils.makeArray(elems);var ffElems=[];for(var i=0,len=elems.length;i<len;i++){var elem=elems[i];if(!utils.isElement(elem)){continue;}
if(selector){if(matchesSelector(elem,selector)){ffElems.push(elem);}
var childElems=elem.querySelectorAll(selector);for(var j=0,jLen=childElems.length;j<jLen;j++){ffElems.push(childElems[j]);}}else{ffElems.push(elem);}}
return ffElems;};utils.debounceMethod=function(_class,methodName,threshold){var method=_class.prototype[methodName];var timeoutName=methodName+'Timeout';_class.prototype[methodName]=function(){var timeout=this[timeoutName];if(timeout){clearTimeout(timeout);}
var args=arguments;var _this=this;this[timeoutName]=setTimeout(function(){method.apply(_this,args);delete _this[timeoutName];},threshold||100);};};utils.toDashed=function(str){return str.replace(/(.)([A-Z])/g,function(match,$1,$2){return $1+'-'+$2;}).toLowerCase();};var console=window.console;utils.htmlInit=function(WidgetClass,namespace){docReady(function(){var dashedNamespace=utils.toDashed(namespace);var elems=document.querySelectorAll('.js-'+dashedNamespace);var dataAttr='data-'+dashedNamespace+'-options';for(var i=0,len=elems.length;i<len;i++){var elem=elems[i];var attr=elem.getAttribute(dataAttr);var options;try{options=attr&&JSON.parse(attr);}catch(error){if(console){console.error('Error parsing '+dataAttr+' on '+
elem.nodeName.toLowerCase()+(elem.id?'#'+elem.id:'')+': '+
error);}
continue;}
var instance=new WidgetClass(elem,options);var jQuery=window.jQuery;if(jQuery){jQuery.data(elem,namespace,instance);}}});};return utils;}));(function(window,factory){if(typeof exports==='object'){module.exports=factory(window,require('wolfy87-eventemitter'),require('get-size'),require('desandro-get-style-property'),require('fizzy-ui-utils'));}else{window.Outlayer={};window.Outlayer.Item=factory(window,window.EventEmitter,window.getSize,window.getStyleProperty,window.fizzyUIUtils);}}(window,function factory(window,EventEmitter,getSize,getStyleProperty,utils){var getComputedStyle=window.getComputedStyle;var getStyle=getComputedStyle?function(elem){return getComputedStyle(elem,null);}:function(elem){return elem.currentStyle;};function isEmptyObj(obj){for(var prop in obj){return false;}
prop=null;return true;}
var transitionProperty=getStyleProperty('transition');var transformProperty=getStyleProperty('transform');var supportsCSS3=transitionProperty&&transformProperty;var is3d=!!getStyleProperty('perspective');var transitionEndEvent={WebkitTransition:'webkitTransitionEnd',MozTransition:'transitionend',OTransition:'otransitionend',transition:'transitionend'}[transitionProperty];var prefixableProperties=['transform','transition','transitionDuration','transitionProperty'];var vendorProperties=(function(){var cache={};for(var i=0,len=prefixableProperties.length;i<len;i++){var prop=prefixableProperties[i];var supportedProp=getStyleProperty(prop);if(supportedProp&&supportedProp!==prop){cache[prop]=supportedProp;}}
return cache;})();function Item(element,layout){if(!element){return;}
this.element=element;this.layout=layout;this.position={x:0,y:0};this._create();}
utils.extend(Item.prototype,EventEmitter.prototype);Item.prototype._create=function(){this._transn={ingProperties:{},clean:{},onEnd:{}};this.css({position:'absolute'});};Item.prototype.handleEvent=function(event){var method='on'+event.type;if(this[method]){this[method](event);}};Item.prototype.getSize=function(){this.size=getSize(this.element);};Item.prototype.css=function(style){var elemStyle=this.element.style;for(var prop in style){var supportedProp=vendorProperties[prop]||prop;elemStyle[supportedProp]=style[prop];}};Item.prototype.getPosition=function(){var style=getStyle(this.element);var layoutOptions=this.layout.options;var isOriginLeft=layoutOptions.isOriginLeft;var isOriginTop=layoutOptions.isOriginTop;var xValue=style[isOriginLeft?'left':'right'];var yValue=style[isOriginTop?'top':'bottom'];var layoutSize=this.layout.size;var x=xValue.indexOf('%')!=-1?(parseFloat(xValue)/100)*layoutSize.width:parseInt(xValue,10);var y=yValue.indexOf('%')!=-1?(parseFloat(yValue)/100)*layoutSize.height:parseInt(yValue,10);x=isNaN(x)?0:x;y=isNaN(y)?0:y;x-=isOriginLeft?layoutSize.paddingLeft:layoutSize.paddingRight;y-=isOriginTop?layoutSize.paddingTop:layoutSize.paddingBottom;this.position.x=x;this.position.y=y;};Item.prototype.layoutPosition=function(){var layoutSize=this.layout.size;var layoutOptions=this.layout.options;var style={};var xPadding=layoutOptions.isOriginLeft?'paddingLeft':'paddingRight';var xProperty=layoutOptions.isOriginLeft?'left':'right';var xResetProperty=layoutOptions.isOriginLeft?'right':'left';var x=this.position.x+layoutSize[xPadding];style[xProperty]=this.getXValue(x);style[xResetProperty]='';var yPadding=layoutOptions.isOriginTop?'paddingTop':'paddingBottom';var yProperty=layoutOptions.isOriginTop?'top':'bottom';var yResetProperty=layoutOptions.isOriginTop?'bottom':'top';var y=this.position.y+layoutSize[yPadding];style[yProperty]=this.getYValue(y);style[yResetProperty]='';this.css(style);this.emitEvent('layout',[this]);};Item.prototype.getXValue=function(x){var layoutOptions=this.layout.options;return layoutOptions.percentPosition&&!layoutOptions.isHorizontal?((x/this.layout.size.width)*100)+'%':x+'px';};Item.prototype.getYValue=function(y){var layoutOptions=this.layout.options;return layoutOptions.percentPosition&&layoutOptions.isHorizontal?((y/this.layout.size.height)*100)+'%':y+'px';};Item.prototype._transitionTo=function(x,y){this.getPosition();var curX=this.position.x;var curY=this.position.y;var compareX=parseInt(x,10);var compareY=parseInt(y,10);var didNotMove=compareX===this.position.x&&compareY===this.position.y;this.setPosition(x,y);if(didNotMove&&!this.isTransitioning){this.layoutPosition();return;}
var transX=x-curX;var transY=y-curY;var transitionStyle={};transitionStyle.transform=this.getTranslate(transX,transY);this.transition({to:transitionStyle,onTransitionEnd:{transform:this.layoutPosition},isCleaning:true});};Item.prototype.getTranslate=function(x,y){var layoutOptions=this.layout.options;x=layoutOptions.isOriginLeft?x:-x;y=layoutOptions.isOriginTop?y:-y;if(is3d){return'translate3d('+x+'px, '+y+'px, 0)';}
return'translate('+x+'px, '+y+'px)';};Item.prototype.goTo=function(x,y){this.setPosition(x,y);this.layoutPosition();};Item.prototype.moveTo=supportsCSS3?Item.prototype._transitionTo:Item.prototype.goTo;Item.prototype.setPosition=function(x,y){this.position.x=parseInt(x,10);this.position.y=parseInt(y,10);};Item.prototype._nonTransition=function(args){this.css(args.to);if(args.isCleaning){this._removeStyles(args.to);}
for(var prop in args.onTransitionEnd){args.onTransitionEnd[prop].call(this);}};Item.prototype._transition=function(args){if(!parseFloat(this.layout.options.transitionDuration)){this._nonTransition(args);return;}
var _transition=this._transn;for(var prop in args.onTransitionEnd){_transition.onEnd[prop]=args.onTransitionEnd[prop];}
for(prop in args.to){_transition.ingProperties[prop]=true;if(args.isCleaning){_transition.clean[prop]=true;}}
if(args.from){this.css(args.from);var h=this.element.offsetHeight;h=null;}
this.enableTransition(args.to);this.css(args.to);this.isTransitioning=true;};function toDashedAll(str){return str.replace(/([A-Z])/g,function($1){return'-'+$1.toLowerCase();});}
var transitionProps='opacity,'+
toDashedAll(vendorProperties.transform||'transform');Item.prototype.enableTransition=function(){if(this.isTransitioning){return;}
this.css({transitionProperty:transitionProps,transitionDuration:this.layout.options.transitionDuration});this.element.addEventListener(transitionEndEvent,this,false);};Item.prototype.transition=Item.prototype[transitionProperty?'_transition':'_nonTransition'];Item.prototype.onwebkitTransitionEnd=function(event){this.ontransitionend(event);};Item.prototype.onotransitionend=function(event){this.ontransitionend(event);};var dashedVendorProperties={'-webkit-transform':'transform','-moz-transform':'transform','-o-transform':'transform'};Item.prototype.ontransitionend=function(event){if(event.target!==this.element){return;}
var _transition=this._transn;var propertyName=dashedVendorProperties[event.propertyName]||event.propertyName;delete _transition.ingProperties[propertyName];if(isEmptyObj(_transition.ingProperties)){this.disableTransition();}
if(propertyName in _transition.clean){this.element.style[event.propertyName]='';delete _transition.clean[propertyName];}
if(propertyName in _transition.onEnd){var onTransitionEnd=_transition.onEnd[propertyName];onTransitionEnd.call(this);delete _transition.onEnd[propertyName];}
this.emitEvent('transitionEnd',[this]);};Item.prototype.disableTransition=function(){this.removeTransitionStyles();this.element.removeEventListener(transitionEndEvent,this,false);this.isTransitioning=false;};Item.prototype._removeStyles=function(style){var cleanStyle={};for(var prop in style){cleanStyle[prop]='';}
this.css(cleanStyle);};var cleanTransitionStyle={transitionProperty:'',transitionDuration:''};Item.prototype.removeTransitionStyles=function(){this.css(cleanTransitionStyle);};Item.prototype.removeElem=function(){this.element.parentNode.removeChild(this.element);this.css({display:''});this.emitEvent('remove',[this]);};Item.prototype.remove=function(){if(!transitionProperty||!parseFloat(this.layout.options.transitionDuration)){this.removeElem();return;}
var _this=this;this.once('transitionEnd',function(){_this.removeElem();});this.hide();};Item.prototype.reveal=function(){delete this.isHidden;this.css({display:''});var options=this.layout.options;var onTransitionEnd={};var transitionEndProperty=this.getHideRevealTransitionEndProperty('visibleStyle');onTransitionEnd[transitionEndProperty]=this.onRevealTransitionEnd;this.transition({from:options.hiddenStyle,to:options.visibleStyle,isCleaning:true,onTransitionEnd:onTransitionEnd});};Item.prototype.onRevealTransitionEnd=function(){if(!this.isHidden){this.emitEvent('reveal');}};Item.prototype.getHideRevealTransitionEndProperty=function(styleProperty){var optionStyle=this.layout.options[styleProperty];if(optionStyle.opacity){return'opacity';}
for(var prop in optionStyle){return prop;}};Item.prototype.hide=function(){this.isHidden=true;this.css({display:''});var options=this.layout.options;var onTransitionEnd={};var transitionEndProperty=this.getHideRevealTransitionEndProperty('hiddenStyle');onTransitionEnd[transitionEndProperty]=this.onHideTransitionEnd;this.transition({from:options.visibleStyle,to:options.hiddenStyle,isCleaning:true,onTransitionEnd:onTransitionEnd});};Item.prototype.onHideTransitionEnd=function(){if(this.isHidden){this.css({display:'none'});this.emitEvent('hide');}};Item.prototype.destroy=function(){this.css({position:'',left:'',right:'',top:'',bottom:'',transition:'',transform:''});};return Item;}));(function(window,factory){if(typeof exports=='object'){module.exports=factory(window,require('eventie'),require('wolfy87-eventemitter'),require('get-size'),require('fizzy-ui-utils'),require('./item'));}else{window.Outlayer=factory(window,window.eventie,window.EventEmitter,window.getSize,window.fizzyUIUtils,window.Outlayer.Item);}}(window,function factory(window,eventie,EventEmitter,getSize,utils,Item){var console=window.console;var jQuery=window.jQuery;var noop=function(){};var GUID=0;var instances={};function Outlayer(element,options){var queryElement=utils.getQueryElement(element);if(!queryElement){if(console){console.error('Bad element for '+this.constructor.namespace+': '+(queryElement||element));}
return;}
this.element=queryElement;if(jQuery){this.$element=jQuery(this.element);}
this.options=utils.extend({},this.constructor.defaults);this.option(options);var id=++GUID;this.element.outlayerGUID=id;instances[id]=this;this._create();if(this.options.isInitLayout){this.layout();}}
Outlayer.namespace='outlayer';Outlayer.Item=Item;Outlayer.defaults={containerStyle:{position:'relative'},isInitLayout:true,isOriginLeft:true,isOriginTop:true,isResizeBound:true,isResizingContainer:true,transitionDuration:'0.4s',hiddenStyle:{opacity:0,transform:'scale(0.001)'},visibleStyle:{opacity:1,transform:'scale(1)'}};utils.extend(Outlayer.prototype,EventEmitter.prototype);Outlayer.prototype.option=function(opts){utils.extend(this.options,opts);};Outlayer.prototype._create=function(){this.reloadItems();this.stamps=[];this.stamp(this.options.stamp);utils.extend(this.element.style,this.options.containerStyle);if(this.options.isResizeBound){this.bindResize();}};Outlayer.prototype.reloadItems=function(){this.items=this._itemize(this.element.children);};Outlayer.prototype._itemize=function(elems){var itemElems=this._filterFindItemElements(elems);var Item=this.constructor.Item;var items=[];for(var i=0,len=itemElems.length;i<len;i++){var elem=itemElems[i];var item=new Item(elem,this);items.push(item);}
return items;};Outlayer.prototype._filterFindItemElements=function(elems){return utils.filterFindElements(elems,this.options.itemSelector);};Outlayer.prototype.getItemElements=function(){var elems=[];for(var i=0,len=this.items.length;i<len;i++){elems.push(this.items[i].element);}
return elems;};Outlayer.prototype.layout=function(){this._resetLayout();this._manageStamps();var isInstant=this.options.isLayoutInstant!==undefined?this.options.isLayoutInstant:!this._isLayoutInited;this.layoutItems(this.items,isInstant);this._isLayoutInited=true;};Outlayer.prototype._init=Outlayer.prototype.layout;Outlayer.prototype._resetLayout=function(){this.getSize();};Outlayer.prototype.getSize=function(){this.size=getSize(this.element);};Outlayer.prototype._getMeasurement=function(measurement,size){var option=this.options[measurement];var elem;if(!option){this[measurement]=0;}else{if(typeof option==='string'){elem=this.element.querySelector(option);}else if(utils.isElement(option)){elem=option;}
this[measurement]=elem?getSize(elem)[size]:option;}};Outlayer.prototype.layoutItems=function(items,isInstant){items=this._getItemsForLayout(items);this._layoutItems(items,isInstant);this._postLayout();};Outlayer.prototype._getItemsForLayout=function(items){var layoutItems=[];for(var i=0,len=items.length;i<len;i++){var item=items[i];if(!item.isIgnored){layoutItems.push(item);}}
return layoutItems;};Outlayer.prototype._layoutItems=function(items,isInstant){this._emitCompleteOnItems('layout',items);if(!items||!items.length){return;}
var queue=[];for(var i=0,len=items.length;i<len;i++){var item=items[i];var position=this._getItemLayoutPosition(item);position.item=item;position.isInstant=isInstant||item.isLayoutInstant;queue.push(position);}
this._processLayoutQueue(queue);};Outlayer.prototype._getItemLayoutPosition=function(){return{x:0,y:0};};Outlayer.prototype._processLayoutQueue=function(queue){for(var i=0,len=queue.length;i<len;i++){var obj=queue[i];this._positionItem(obj.item,obj.x,obj.y,obj.isInstant);}};Outlayer.prototype._positionItem=function(item,x,y,isInstant){if(isInstant){item.goTo(x,y);}else{item.moveTo(x,y);}};Outlayer.prototype._postLayout=function(){this.resizeContainer();};Outlayer.prototype.resizeContainer=function(){if(!this.options.isResizingContainer){return;}
var size=this._getContainerSize();if(size){this._setContainerMeasure(size.width,true);this._setContainerMeasure(size.height,false);}};Outlayer.prototype._getContainerSize=noop;Outlayer.prototype._setContainerMeasure=function(measure,isWidth){if(measure===undefined){return;}
var elemSize=this.size;if(elemSize.isBorderBox){measure+=isWidth?elemSize.paddingLeft+elemSize.paddingRight+
elemSize.borderLeftWidth+elemSize.borderRightWidth:elemSize.paddingBottom+elemSize.paddingTop+
elemSize.borderTopWidth+elemSize.borderBottomWidth;}
measure=Math.max(measure,0);this.element.style[isWidth?'width':'height']=measure+'px';};Outlayer.prototype._emitCompleteOnItems=function(eventName,items){var _this=this;function onComplete(){_this.dispatchEvent(eventName+'Complete',null,[items]);}
var count=items.length;if(!items||!count){onComplete();return;}
var doneCount=0;function tick(){doneCount++;if(doneCount===count){onComplete();}}
for(var i=0,len=items.length;i<len;i++){var item=items[i];item.once(eventName,tick);}};Outlayer.prototype.dispatchEvent=function(type,event,args){var emitArgs=event?[event].concat(args):args;this.emitEvent(type,emitArgs);if(jQuery){this.$element=this.$element||jQuery(this.element);if(event){var $event=jQuery.Event(event);$event.type=type;this.$element.trigger($event,args);}else{this.$element.trigger(type,args);}}};Outlayer.prototype.ignore=function(elem){var item=this.getItem(elem);if(item){item.isIgnored=true;}};Outlayer.prototype.unignore=function(elem){var item=this.getItem(elem);if(item){delete item.isIgnored;}};Outlayer.prototype.stamp=function(elems){elems=this._find(elems);if(!elems){return;}
this.stamps=this.stamps.concat(elems);for(var i=0,len=elems.length;i<len;i++){var elem=elems[i];this.ignore(elem);}};Outlayer.prototype.unstamp=function(elems){elems=this._find(elems);if(!elems){return;}
for(var i=0,len=elems.length;i<len;i++){var elem=elems[i];utils.removeFrom(this.stamps,elem);this.unignore(elem);}};Outlayer.prototype._find=function(elems){if(!elems){return;}
if(typeof elems==='string'){elems=this.element.querySelectorAll(elems);}
elems=utils.makeArray(elems);return elems;};Outlayer.prototype._manageStamps=function(){if(!this.stamps||!this.stamps.length){return;}
this._getBoundingRect();for(var i=0,len=this.stamps.length;i<len;i++){var stamp=this.stamps[i];this._manageStamp(stamp);}};Outlayer.prototype._getBoundingRect=function(){var boundingRect=this.element.getBoundingClientRect();var size=this.size;this._boundingRect={left:boundingRect.left+size.paddingLeft+size.borderLeftWidth,top:boundingRect.top+size.paddingTop+size.borderTopWidth,right:boundingRect.right-(size.paddingRight+size.borderRightWidth),bottom:boundingRect.bottom-(size.paddingBottom+size.borderBottomWidth)};};Outlayer.prototype._manageStamp=noop;Outlayer.prototype._getElementOffset=function(elem){var boundingRect=elem.getBoundingClientRect();var thisRect=this._boundingRect;var size=getSize(elem);var offset={left:boundingRect.left-thisRect.left-size.marginLeft,top:boundingRect.top-thisRect.top-size.marginTop,right:thisRect.right-boundingRect.right-size.marginRight,bottom:thisRect.bottom-boundingRect.bottom-size.marginBottom};return offset;};Outlayer.prototype.handleEvent=function(event){var method='on'+event.type;if(this[method]){this[method](event);}};Outlayer.prototype.bindResize=function(){if(this.isResizeBound){return;}
eventie.bind(window,'resize',this);this.isResizeBound=true;};Outlayer.prototype.unbindResize=function(){if(this.isResizeBound){eventie.unbind(window,'resize',this);}
this.isResizeBound=false;};Outlayer.prototype.onresize=function(){if(this.resizeTimeout){clearTimeout(this.resizeTimeout);}
var _this=this;function delayed(){_this.resize();delete _this.resizeTimeout;}
this.resizeTimeout=setTimeout(delayed,100);};Outlayer.prototype.resize=function(){if(!this.isResizeBound||!this.needsResizeLayout()){return;}
this.layout();};Outlayer.prototype.needsResizeLayout=function(){var size=getSize(this.element);var hasSizes=this.size&&size;return hasSizes&&size.innerWidth!==this.size.innerWidth;};Outlayer.prototype.addItems=function(elems){var items=this._itemize(elems);if(items.length){this.items=this.items.concat(items);}
return items;};Outlayer.prototype.appended=function(elems){var items=this.addItems(elems);if(!items.length){return;}
this.layoutItems(items,true);this.reveal(items);};Outlayer.prototype.prepended=function(elems){var items=this._itemize(elems);if(!items.length){return;}
var previousItems=this.items.slice(0);this.items=items.concat(previousItems);this._resetLayout();this._manageStamps();this.layoutItems(items,true);this.reveal(items);this.layoutItems(previousItems);};Outlayer.prototype.reveal=function(items){this._emitCompleteOnItems('reveal',items);var len=items&&items.length;for(var i=0;len&&i<len;i++){var item=items[i];item.reveal();}};Outlayer.prototype.hide=function(items){this._emitCompleteOnItems('hide',items);var len=items&&items.length;for(var i=0;len&&i<len;i++){var item=items[i];item.hide();}};Outlayer.prototype.revealItemElements=function(elems){var items=this.getItems(elems);this.reveal(items);};Outlayer.prototype.hideItemElements=function(elems){var items=this.getItems(elems);this.hide(items);};Outlayer.prototype.getItem=function(elem){for(var i=0,len=this.items.length;i<len;i++){var item=this.items[i];if(item.element===elem){return item;}}};Outlayer.prototype.getItems=function(elems){elems=utils.makeArray(elems);var items=[];for(var i=0,len=elems.length;i<len;i++){var elem=elems[i];var item=this.getItem(elem);if(item){items.push(item);}}
return items;};Outlayer.prototype.remove=function(elems){var removeItems=this.getItems(elems);this._emitCompleteOnItems('remove',removeItems);if(!removeItems||!removeItems.length){return;}
for(var i=0,len=removeItems.length;i<len;i++){var item=removeItems[i];item.remove();utils.removeFrom(this.items,item);}};Outlayer.prototype.destroy=function(){var style=this.element.style;style.height='';style.position='';style.width='';for(var i=0,len=this.items.length;i<len;i++){var item=this.items[i];item.destroy();}
this.unbindResize();var id=this.element.outlayerGUID;delete instances[id];delete this.element.outlayerGUID;if(jQuery){jQuery.removeData(this.element,this.constructor.namespace);}};Outlayer.data=function(elem){elem=utils.getQueryElement(elem);var id=elem&&elem.outlayerGUID;return id&&instances[id];};Outlayer.create=function(namespace,options){function Layout(){Outlayer.apply(this,arguments);}
if(Object.create){Layout.prototype=Object.create(Outlayer.prototype);}else{utils.extend(Layout.prototype,Outlayer.prototype);}
Layout.prototype.constructor=Layout;Layout.defaults=utils.extend({},Outlayer.defaults);utils.extend(Layout.defaults,options);Layout.prototype.settings={};Layout.namespace=namespace;Layout.data=Outlayer.data;Layout.Item=function LayoutItem(){Item.apply(this,arguments);};Layout.Item.prototype=new Item();utils.htmlInit(Layout,namespace);if(jQuery&&jQuery.bridget){jQuery.bridget(namespace,Layout);}
return Layout;};Outlayer.Item=Item;return Outlayer;}));(function(window,factory){if(typeof exports==='object'){module.exports=factory(require('outlayer'),require('get-size'),require('fizzy-ui-utils'));}else{window.Masonry=factory(window.Outlayer,window.getSize,window.fizzyUIUtils);}}(window,function factory(Outlayer,getSize,utils){var Masonry=Outlayer.create('masonry');Masonry.prototype._resetLayout=function(){this.getSize();this._getMeasurement('columnWidth','outerWidth');this._getMeasurement('gutter','outerWidth');this.measureColumns();var i=this.cols;this.colYs=[];while(i--){this.colYs.push(0);}
this.maxY=0;};Masonry.prototype.measureColumns=function(){this.getContainerWidth();if(!this.columnWidth){var firstItem=this.items[0];var firstItemElem=firstItem&&firstItem.element;this.columnWidth=firstItemElem&&getSize(firstItemElem).outerWidth||this.containerWidth;}
var columnWidth=this.columnWidth+=this.gutter;var containerWidth=this.containerWidth+this.gutter;var cols=containerWidth/columnWidth;var excess=columnWidth-containerWidth%columnWidth;var mathMethod=excess&&excess<1?'round':'floor';cols=Math[mathMethod](cols);this.cols=Math.max(cols,1);};Masonry.prototype.getContainerWidth=function(){var container=this.options.isFitWidth?this.element.parentNode:this.element;var size=getSize(container);this.containerWidth=size&&size.innerWidth;};Masonry.prototype._getItemLayoutPosition=function(item){item.getSize();var remainder=item.size.outerWidth%this.columnWidth;var mathMethod=remainder&&remainder<1?'round':'ceil';var colSpan=Math[mathMethod](item.size.outerWidth/this.columnWidth);colSpan=Math.min(colSpan,this.cols);var colGroup=this._getColGroup(colSpan);var minimumY=Math.min.apply(Math,colGroup);var shortColIndex=utils.indexOf(colGroup,minimumY);var position={x:this.columnWidth*shortColIndex,y:minimumY};var setHeight=minimumY+item.size.outerHeight;var setSpan=this.cols+1-colGroup.length;for(var i=0;i<setSpan;i++){this.colYs[shortColIndex+i]=setHeight;}
return position;};Masonry.prototype._getColGroup=function(colSpan){if(colSpan<2){return this.colYs;}
var colGroup=[];var groupCount=this.cols+1-colSpan;for(var i=0;i<groupCount;i++){var groupColYs=this.colYs.slice(i,i+colSpan);colGroup[i]=Math.max.apply(Math,groupColYs);}
return colGroup;};Masonry.prototype._manageStamp=function(stamp){var stampSize=getSize(stamp);var offset=this._getElementOffset(stamp);var firstX=this.options.isOriginLeft?offset.left:offset.right;var lastX=firstX+stampSize.outerWidth;var firstCol=Math.floor(firstX/this.columnWidth);firstCol=Math.max(0,firstCol);var lastCol=Math.floor(lastX/this.columnWidth);lastCol-=lastX%this.columnWidth?0:1;lastCol=Math.min(this.cols-1,lastCol);var stampMaxY=(this.options.isOriginTop?offset.top:offset.bottom)+
stampSize.outerHeight;for(var i=firstCol;i<=lastCol;i++){this.colYs[i]=Math.max(stampMaxY,this.colYs[i]);}};Masonry.prototype._getContainerSize=function(){this.maxY=Math.max.apply(Math,this.colYs);var size={height:this.maxY};if(this.options.isFitWidth){size.width=this._getContainerFitWidth();}
return size;};Masonry.prototype._getContainerFitWidth=function(){var unusedCols=0;var i=this.cols;while(--i){if(this.colYs[i]!==0){break;}
unusedCols++;}
return(this.cols-unusedCols)*this.columnWidth-this.gutter;};Masonry.prototype.needsResizeLayout=function(){var previousWidth=this.containerWidth;this.getContainerWidth();return previousWidth!==this.containerWidth;};return Masonry;}));/*!
 * imagesLoaded PACKAGED v3.1.8
 * JavaScript is all like "You images are done yet or what?"
 * MIT License
 *//*!
 * EventEmitter v4.2.6 - git.io/ee
 * Oliver Caldwell
 * MIT license
 * @preserve
 *//*!
 * eventie v1.0.4
 * event binding helper
 *   eventie.bind( elem, 'click', myFn )
 *   eventie.unbind( elem, 'click', myFn )
 *//*!
 * imagesLoaded v3.1.8
 * JavaScript is all like "You images are done yet or what?"
 * MIT License
 */
(function(){function EventEmitter(){}
var proto=EventEmitter.prototype;var exports=this;var originalGlobalValue=exports.EventEmitter;function indexOfListener(listeners,listener){var i=listeners.length;while(i--){if(listeners[i].listener===listener){return i;}}
return-1;}
function alias(name){return function aliasClosure(){return this[name].apply(this,arguments);};}
proto.getListeners=function getListeners(evt){var events=this._getEvents();var response;var key;if(typeof evt==='object'){response={};for(key in events){if(events.hasOwnProperty(key)&&evt.test(key)){response[key]=events[key];}}}
else{response=events[evt]||(events[evt]=[]);}
return response;};proto.flattenListeners=function flattenListeners(listeners){var flatListeners=[];var i;for(i=0;i<listeners.length;i+=1){flatListeners.push(listeners[i].listener);}
return flatListeners;};proto.getListenersAsObject=function getListenersAsObject(evt){var listeners=this.getListeners(evt);var response;if(listeners instanceof Array){response={};response[evt]=listeners;}
return response||listeners;};proto.addListener=function addListener(evt,listener){var listeners=this.getListenersAsObject(evt);var listenerIsWrapped=typeof listener==='object';var key;for(key in listeners){if(listeners.hasOwnProperty(key)&&indexOfListener(listeners[key],listener)===-1){listeners[key].push(listenerIsWrapped?listener:{listener:listener,once:false});}}
return this;};proto.on=alias('addListener');proto.addOnceListener=function addOnceListener(evt,listener){return this.addListener(evt,{listener:listener,once:true});};proto.once=alias('addOnceListener');proto.defineEvent=function defineEvent(evt){this.getListeners(evt);return this;};proto.defineEvents=function defineEvents(evts){for(var i=0;i<evts.length;i+=1){this.defineEvent(evts[i]);}
return this;};proto.removeListener=function removeListener(evt,listener){var listeners=this.getListenersAsObject(evt);var index;var key;for(key in listeners){if(listeners.hasOwnProperty(key)){index=indexOfListener(listeners[key],listener);if(index!==-1){listeners[key].splice(index,1);}}}
return this;};proto.off=alias('removeListener');proto.addListeners=function addListeners(evt,listeners){return this.manipulateListeners(false,evt,listeners);};proto.removeListeners=function removeListeners(evt,listeners){return this.manipulateListeners(true,evt,listeners);};proto.manipulateListeners=function manipulateListeners(remove,evt,listeners){var i;var value;var single=remove?this.removeListener:this.addListener;var multiple=remove?this.removeListeners:this.addListeners;if(typeof evt==='object'&&!(evt instanceof RegExp)){for(i in evt){if(evt.hasOwnProperty(i)&&(value=evt[i])){if(typeof value==='function'){single.call(this,i,value);}
else{multiple.call(this,i,value);}}}}
else{i=listeners.length;while(i--){single.call(this,evt,listeners[i]);}}
return this;};proto.removeEvent=function removeEvent(evt){var type=typeof evt;var events=this._getEvents();var key;if(type==='string'){delete events[evt];}
else if(type==='object'){for(key in events){if(events.hasOwnProperty(key)&&evt.test(key)){delete events[key];}}}
else{delete this._events;}
return this;};proto.removeAllListeners=alias('removeEvent');proto.emitEvent=function emitEvent(evt,args){var listeners=this.getListenersAsObject(evt);var listener;var i;var key;var response;for(key in listeners){if(listeners.hasOwnProperty(key)){i=listeners[key].length;while(i--){listener=listeners[key][i];if(listener.once===true){this.removeListener(evt,listener.listener);}
response=listener.listener.apply(this,args||[]);if(response===this._getOnceReturnValue()){this.removeListener(evt,listener.listener);}}}}
return this;};proto.trigger=alias('emitEvent');proto.emit=function emit(evt){var args=Array.prototype.slice.call(arguments,1);return this.emitEvent(evt,args);};proto.setOnceReturnValue=function setOnceReturnValue(value){this._onceReturnValue=value;return this;};proto._getOnceReturnValue=function _getOnceReturnValue(){if(this.hasOwnProperty('_onceReturnValue')){return this._onceReturnValue;}
else{return true;}};proto._getEvents=function _getEvents(){return this._events||(this._events={});};EventEmitter.noConflict=function noConflict(){exports.EventEmitter=originalGlobalValue;return EventEmitter;};if(typeof module==='object'&&module.exports){module.exports=EventEmitter;}
else{this.EventEmitter=EventEmitter;}}.call(this));(function(window){var docElem=document.documentElement;var bind=function(){};function getIEEvent(obj){var event=window.event;event.target=event.target||event.srcElement||obj;return event;}
if(docElem.addEventListener){bind=function(obj,type,fn){obj.addEventListener(type,fn,false);};}else if(docElem.attachEvent){bind=function(obj,type,fn){obj[type+fn]=fn.handleEvent?function(){var event=getIEEvent(obj);fn.handleEvent.call(fn,event);}:function(){var event=getIEEvent(obj);fn.call(obj,event);};obj.attachEvent("on"+type,obj[type+fn]);};}
var unbind=function(){};if(docElem.removeEventListener){unbind=function(obj,type,fn){obj.removeEventListener(type,fn,false);};}else if(docElem.detachEvent){unbind=function(obj,type,fn){obj.detachEvent("on"+type,obj[type+fn]);try{delete obj[type+fn];}catch(err){obj[type+fn]=undefined;}};}
var eventie={bind:bind,unbind:unbind};window.eventie=eventie;})(this);(function(window,factory){if(typeof exports==='object'){module.exports=factory(window,require('wolfy87-eventemitter'),require('eventie'));}else{window.imagesLoaded=factory(window,window.EventEmitter,window.eventie);}})(window,function factory(window,EventEmitter,eventie){var $=window.jQuery;var console=window.console;var hasConsole=typeof console!=='undefined';function extend(a,b){for(var prop in b){a[prop]=b[prop];}
return a;}
var objToString=Object.prototype.toString;function isArray(obj){return objToString.call(obj)==='[object Array]';}
function makeArray(obj){var ary=[];if(isArray(obj)){ary=obj;}else if(typeof obj.length==='number'){for(var i=0,len=obj.length;i<len;i++){ary.push(obj[i]);}}else{ary.push(obj);}
return ary;}
function ImagesLoaded(elem,options,onAlways){if(!(this instanceof ImagesLoaded)){return new ImagesLoaded(elem,options);}
if(typeof elem==='string'){elem=document.querySelectorAll(elem);}
this.elements=makeArray(elem);this.options=extend({},this.options);if(typeof options==='function'){onAlways=options;}else{extend(this.options,options);}
if(onAlways){this.on('always',onAlways);}
this.getImages();if($){this.jqDeferred=new $.Deferred();}
var _this=this;setTimeout(function(){_this.check();});}
ImagesLoaded.prototype=new EventEmitter();ImagesLoaded.prototype.options={};ImagesLoaded.prototype.getImages=function(){this.images=[];for(var i=0,len=this.elements.length;i<len;i++){var elem=this.elements[i];if(elem.nodeName==='IMG'){this.addImage(elem);}
var nodeType=elem.nodeType;if(!nodeType||!(nodeType===1||nodeType===9||nodeType===11)){continue;}
var childElems=elem.querySelectorAll('img');for(var j=0,jLen=childElems.length;j<jLen;j++){var img=childElems[j];this.addImage(img);}}};ImagesLoaded.prototype.addImage=function(img){var loadingImage=new LoadingImage(img);this.images.push(loadingImage);};ImagesLoaded.prototype.check=function(){var _this=this;var checkedCount=0;var length=this.images.length;this.hasAnyBroken=false;if(!length){this.complete();return;}
function onConfirm(image,message){if(_this.options.debug&&hasConsole){console.log('confirm',image,message);}
_this.progress(image);checkedCount++;if(checkedCount===length){_this.complete();}
return true;}
for(var i=0;i<length;i++){var loadingImage=this.images[i];loadingImage.on('confirm',onConfirm);loadingImage.check();}};ImagesLoaded.prototype.progress=function(image){this.hasAnyBroken=this.hasAnyBroken||!image.isLoaded;var _this=this;setTimeout(function(){_this.emit('progress',_this,image);if(_this.jqDeferred&&_this.jqDeferred.notify){_this.jqDeferred.notify(_this,image);}});};ImagesLoaded.prototype.complete=function(){var eventName=this.hasAnyBroken?'fail':'done';this.isComplete=true;var _this=this;setTimeout(function(){_this.emit(eventName,_this);_this.emit('always',_this);if(_this.jqDeferred){var jqMethod=_this.hasAnyBroken?'reject':'resolve';_this.jqDeferred[jqMethod](_this);}});};if($){$.fn.imagesLoaded=function(options,callback){var instance=new ImagesLoaded(this,options,callback);return instance.jqDeferred.promise($(this));};}
function LoadingImage(img){this.img=img;}
LoadingImage.prototype=new EventEmitter();LoadingImage.prototype.check=function(){var resource=cache[this.img.src]||new Resource(this.img.src);if(resource.isConfirmed){this.confirm(resource.isLoaded,'cached was confirmed');return;}
if(this.img.complete&&this.img.naturalWidth!==undefined){this.confirm(this.img.naturalWidth!==0,'naturalWidth');return;}
var _this=this;resource.on('confirm',function(resrc,message){_this.confirm(resrc.isLoaded,message);return true;});resource.check();};LoadingImage.prototype.confirm=function(isLoaded,message){this.isLoaded=isLoaded;this.emit('confirm',this,message);};var cache={};function Resource(src){this.src=src;cache[src]=this;}
Resource.prototype=new EventEmitter();Resource.prototype.check=function(){if(this.isChecked){return;}
var proxyImage=new Image();eventie.bind(proxyImage,'load',this);eventie.bind(proxyImage,'error',this);proxyImage.src=this.src;this.isChecked=true;};Resource.prototype.handleEvent=function(event){var method='on'+event.type;if(this[method]){this[method](event);}};Resource.prototype.onload=function(event){this.confirm(true,'onload');this.unbindProxyEvents(event);};Resource.prototype.onerror=function(event){this.confirm(false,'onerror');this.unbindProxyEvents(event);};Resource.prototype.confirm=function(isLoaded,message){this.isConfirmed=true;this.isLoaded=isLoaded;this.emit('confirm',this,message);};Resource.prototype.unbindProxyEvents=function(event){eventie.unbind(event.target,'load',this);eventie.unbind(event.target,'error',this);};return ImagesLoaded;});/*! Hammer.JS - v2.0.8 - 2016-04-23
 * http://hammerjs.github.io/
 *
 * Copyright (c) 2016 Jorik Tangelder;
 * Licensed under the MIT license */
(function(window,document,exportName,undefined){'use strict';var VENDOR_PREFIXES=['','webkit','Moz','MS','ms','o'];var TEST_ELEMENT=document.createElement('div');var TYPE_FUNCTION='function';var round=Math.round;var abs=Math.abs;var now=Date.now;function setTimeoutContext(fn,timeout,context){return setTimeout(bindFn(fn,context),timeout);}
function invokeArrayArg(arg,fn,context){if(Array.isArray(arg)){each(arg,context[fn],context);return true;}
return false;}
function each(obj,iterator,context){var i;if(!obj){return;}
if(obj.forEach){obj.forEach(iterator,context);}else if(obj.length!==undefined){i=0;while(i<obj.length){iterator.call(context,obj[i],i,obj);i++;}}else{for(i in obj){obj.hasOwnProperty(i)&&iterator.call(context,obj[i],i,obj);}}}
function deprecate(method,name,message){var deprecationMessage='DEPRECATED METHOD: '+name+'\n'+message+' AT \n';return function(){var e=new Error('get-stack-trace');var stack=e&&e.stack?e.stack.replace(/^[^\(]+?[\n$]/gm,'').replace(/^\s+at\s+/gm,'').replace(/^Object.<anonymous>\s*\(/gm,'{anonymous}()@'):'Unknown Stack Trace';var log=window.console&&(window.console.warn||window.console.log);if(log){log.call(window.console,deprecationMessage,stack);}
return method.apply(this,arguments);};}
var assign;if(typeof Object.assign!=='function'){assign=function assign(target){if(target===undefined||target===null){throw new TypeError('Cannot convert undefined or null to object');}
var output=Object(target);for(var index=1;index<arguments.length;index++){var source=arguments[index];if(source!==undefined&&source!==null){for(var nextKey in source){if(source.hasOwnProperty(nextKey)){output[nextKey]=source[nextKey];}}}}
return output;};}else{assign=Object.assign;}
var extend=deprecate(function extend(dest,src,merge){var keys=Object.keys(src);var i=0;while(i<keys.length){if(!merge||(merge&&dest[keys[i]]===undefined)){dest[keys[i]]=src[keys[i]];}
i++;}
return dest;},'extend','Use `assign`.');var merge=deprecate(function merge(dest,src){return extend(dest,src,true);},'merge','Use `assign`.');function inherit(child,base,properties){var baseP=base.prototype,childP;childP=child.prototype=Object.create(baseP);childP.constructor=child;childP._super=baseP;if(properties){assign(childP,properties);}}
function bindFn(fn,context){return function boundFn(){return fn.apply(context,arguments);};}
function boolOrFn(val,args){if(typeof val==TYPE_FUNCTION){return val.apply(args?args[0]||undefined:undefined,args);}
return val;}
function ifUndefined(val1,val2){return(val1===undefined)?val2:val1;}
function addEventListeners(target,types,handler){each(splitStr(types),function(type){target.addEventListener(type,handler,false);});}
function removeEventListeners(target,types,handler){each(splitStr(types),function(type){target.removeEventListener(type,handler,false);});}
function hasParent(node,parent){while(node){if(node==parent){return true;}
node=node.parentNode;}
return false;}
function inStr(str,find){return str.indexOf(find)>-1;}
function splitStr(str){return str.trim().split(/\s+/g);}
function inArray(src,find,findByKey){if(src.indexOf&&!findByKey){return src.indexOf(find);}else{var i=0;while(i<src.length){if((findByKey&&src[i][findByKey]==find)||(!findByKey&&src[i]===find)){return i;}
i++;}
return-1;}}
function toArray(obj){return Array.prototype.slice.call(obj,0);}
function uniqueArray(src,key,sort){var results=[];var values=[];var i=0;while(i<src.length){var val=key?src[i][key]:src[i];if(inArray(values,val)<0){results.push(src[i]);}
values[i]=val;i++;}
if(sort){if(!key){results=results.sort();}else{results=results.sort(function sortUniqueArray(a,b){return a[key]>b[key];});}}
return results;}
function prefixed(obj,property){var prefix,prop;var camelProp=property[0].toUpperCase()+property.slice(1);var i=0;while(i<VENDOR_PREFIXES.length){prefix=VENDOR_PREFIXES[i];prop=(prefix)?prefix+camelProp:property;if(prop in obj){return prop;}
i++;}
return undefined;}
var _uniqueId=1;function uniqueId(){return _uniqueId++;}
function getWindowForElement(element){var doc=element.ownerDocument||element;return(doc.defaultView||doc.parentWindow||window);}
var MOBILE_REGEX=/mobile|tablet|ip(ad|hone|od)|android/i;var SUPPORT_TOUCH=('ontouchstart'in window);var SUPPORT_POINTER_EVENTS=prefixed(window,'PointerEvent')!==undefined;var SUPPORT_ONLY_TOUCH=SUPPORT_TOUCH&&MOBILE_REGEX.test(navigator.userAgent);var INPUT_TYPE_TOUCH='touch';var INPUT_TYPE_PEN='pen';var INPUT_TYPE_MOUSE='mouse';var INPUT_TYPE_KINECT='kinect';var COMPUTE_INTERVAL=25;var INPUT_START=1;var INPUT_MOVE=2;var INPUT_END=4;var INPUT_CANCEL=8;var DIRECTION_NONE=1;var DIRECTION_LEFT=2;var DIRECTION_RIGHT=4;var DIRECTION_UP=8;var DIRECTION_DOWN=16;var DIRECTION_HORIZONTAL=DIRECTION_LEFT|DIRECTION_RIGHT;var DIRECTION_VERTICAL=DIRECTION_UP|DIRECTION_DOWN;var DIRECTION_ALL=DIRECTION_HORIZONTAL|DIRECTION_VERTICAL;var PROPS_XY=['x','y'];var PROPS_CLIENT_XY=['clientX','clientY'];function Input(manager,callback){var self=this;this.manager=manager;this.callback=callback;this.element=manager.element;this.target=manager.options.inputTarget;this.domHandler=function(ev){if(boolOrFn(manager.options.enable,[manager])){self.handler(ev);}};this.init();}
Input.prototype={handler:function(){},init:function(){this.evEl&&addEventListeners(this.element,this.evEl,this.domHandler);this.evTarget&&addEventListeners(this.target,this.evTarget,this.domHandler);this.evWin&&addEventListeners(getWindowForElement(this.element),this.evWin,this.domHandler);},destroy:function(){this.evEl&&removeEventListeners(this.element,this.evEl,this.domHandler);this.evTarget&&removeEventListeners(this.target,this.evTarget,this.domHandler);this.evWin&&removeEventListeners(getWindowForElement(this.element),this.evWin,this.domHandler);}};function createInputInstance(manager){var Type;var inputClass=manager.options.inputClass;if(inputClass){Type=inputClass;}else if(SUPPORT_POINTER_EVENTS){Type=PointerEventInput;}else if(SUPPORT_ONLY_TOUCH){Type=TouchInput;}else if(!SUPPORT_TOUCH){Type=MouseInput;}else{Type=TouchMouseInput;}
return new(Type)(manager,inputHandler);}
function inputHandler(manager,eventType,input){var pointersLen=input.pointers.length;var changedPointersLen=input.changedPointers.length;var isFirst=(eventType&INPUT_START&&(pointersLen-changedPointersLen===0));var isFinal=(eventType&(INPUT_END|INPUT_CANCEL)&&(pointersLen-changedPointersLen===0));input.isFirst=!!isFirst;input.isFinal=!!isFinal;if(isFirst){manager.session={};}
input.eventType=eventType;computeInputData(manager,input);manager.emit('hammer.input',input);manager.recognize(input);manager.session.prevInput=input;}
function computeInputData(manager,input){var session=manager.session;var pointers=input.pointers;var pointersLength=pointers.length;if(!session.firstInput){session.firstInput=simpleCloneInputData(input);}
if(pointersLength>1&&!session.firstMultiple){session.firstMultiple=simpleCloneInputData(input);}else if(pointersLength===1){session.firstMultiple=false;}
var firstInput=session.firstInput;var firstMultiple=session.firstMultiple;var offsetCenter=firstMultiple?firstMultiple.center:firstInput.center;var center=input.center=getCenter(pointers);input.timeStamp=now();input.deltaTime=input.timeStamp-firstInput.timeStamp;input.angle=getAngle(offsetCenter,center);input.distance=getDistance(offsetCenter,center);computeDeltaXY(session,input);input.offsetDirection=getDirection(input.deltaX,input.deltaY);var overallVelocity=getVelocity(input.deltaTime,input.deltaX,input.deltaY);input.overallVelocityX=overallVelocity.x;input.overallVelocityY=overallVelocity.y;input.overallVelocity=(abs(overallVelocity.x)>abs(overallVelocity.y))?overallVelocity.x:overallVelocity.y;input.scale=firstMultiple?getScale(firstMultiple.pointers,pointers):1;input.rotation=firstMultiple?getRotation(firstMultiple.pointers,pointers):0;input.maxPointers=!session.prevInput?input.pointers.length:((input.pointers.length>session.prevInput.maxPointers)?input.pointers.length:session.prevInput.maxPointers);computeIntervalInputData(session,input);var target=manager.element;if(hasParent(input.srcEvent.target,target)){target=input.srcEvent.target;}
input.target=target;}
function computeDeltaXY(session,input){var center=input.center;var offset=session.offsetDelta||{};var prevDelta=session.prevDelta||{};var prevInput=session.prevInput||{};if(input.eventType===INPUT_START||prevInput.eventType===INPUT_END){prevDelta=session.prevDelta={x:prevInput.deltaX||0,y:prevInput.deltaY||0};offset=session.offsetDelta={x:center.x,y:center.y};}
input.deltaX=prevDelta.x+(center.x-offset.x);input.deltaY=prevDelta.y+(center.y-offset.y);}
function computeIntervalInputData(session,input){var last=session.lastInterval||input,deltaTime=input.timeStamp-last.timeStamp,velocity,velocityX,velocityY,direction;if(input.eventType!=INPUT_CANCEL&&(deltaTime>COMPUTE_INTERVAL||last.velocity===undefined)){var deltaX=input.deltaX-last.deltaX;var deltaY=input.deltaY-last.deltaY;var v=getVelocity(deltaTime,deltaX,deltaY);velocityX=v.x;velocityY=v.y;velocity=(abs(v.x)>abs(v.y))?v.x:v.y;direction=getDirection(deltaX,deltaY);session.lastInterval=input;}else{velocity=last.velocity;velocityX=last.velocityX;velocityY=last.velocityY;direction=last.direction;}
input.velocity=velocity;input.velocityX=velocityX;input.velocityY=velocityY;input.direction=direction;}
function simpleCloneInputData(input){var pointers=[];var i=0;while(i<input.pointers.length){pointers[i]={clientX:round(input.pointers[i].clientX),clientY:round(input.pointers[i].clientY)};i++;}
return{timeStamp:now(),pointers:pointers,center:getCenter(pointers),deltaX:input.deltaX,deltaY:input.deltaY};}
function getCenter(pointers){var pointersLength=pointers.length;if(pointersLength===1){return{x:round(pointers[0].clientX),y:round(pointers[0].clientY)};}
var x=0,y=0,i=0;while(i<pointersLength){x+=pointers[i].clientX;y+=pointers[i].clientY;i++;}
return{x:round(x/pointersLength),y:round(y/pointersLength)};}
function getVelocity(deltaTime,x,y){return{x:x/deltaTime||0,y:y/deltaTime||0};}
function getDirection(x,y){if(x===y){return DIRECTION_NONE;}
if(abs(x)>=abs(y)){return x<0?DIRECTION_LEFT:DIRECTION_RIGHT;}
return y<0?DIRECTION_UP:DIRECTION_DOWN;}
function getDistance(p1,p2,props){if(!props){props=PROPS_XY;}
var x=p2[props[0]]-p1[props[0]],y=p2[props[1]]-p1[props[1]];return Math.sqrt((x*x)+(y*y));}
function getAngle(p1,p2,props){if(!props){props=PROPS_XY;}
var x=p2[props[0]]-p1[props[0]],y=p2[props[1]]-p1[props[1]];return Math.atan2(y,x)*180/Math.PI;}
function getRotation(start,end){return getAngle(end[1],end[0],PROPS_CLIENT_XY)+getAngle(start[1],start[0],PROPS_CLIENT_XY);}
function getScale(start,end){return getDistance(end[0],end[1],PROPS_CLIENT_XY)/getDistance(start[0],start[1],PROPS_CLIENT_XY);}
var MOUSE_INPUT_MAP={mousedown:INPUT_START,mousemove:INPUT_MOVE,mouseup:INPUT_END};var MOUSE_ELEMENT_EVENTS='mousedown';var MOUSE_WINDOW_EVENTS='mousemove mouseup';function MouseInput(){this.evEl=MOUSE_ELEMENT_EVENTS;this.evWin=MOUSE_WINDOW_EVENTS;this.pressed=false;Input.apply(this,arguments);}
inherit(MouseInput,Input,{handler:function MEhandler(ev){var eventType=MOUSE_INPUT_MAP[ev.type];if(eventType&INPUT_START&&ev.button===0){this.pressed=true;}
if(eventType&INPUT_MOVE&&ev.which!==1){eventType=INPUT_END;}
if(!this.pressed){return;}
if(eventType&INPUT_END){this.pressed=false;}
this.callback(this.manager,eventType,{pointers:[ev],changedPointers:[ev],pointerType:INPUT_TYPE_MOUSE,srcEvent:ev});}});var POINTER_INPUT_MAP={pointerdown:INPUT_START,pointermove:INPUT_MOVE,pointerup:INPUT_END,pointercancel:INPUT_CANCEL,pointerout:INPUT_CANCEL};var IE10_POINTER_TYPE_ENUM={2:INPUT_TYPE_TOUCH,3:INPUT_TYPE_PEN,4:INPUT_TYPE_MOUSE,5:INPUT_TYPE_KINECT};var POINTER_ELEMENT_EVENTS='pointerdown';var POINTER_WINDOW_EVENTS='pointermove pointerup pointercancel';if(window.MSPointerEvent&&!window.PointerEvent){POINTER_ELEMENT_EVENTS='MSPointerDown';POINTER_WINDOW_EVENTS='MSPointerMove MSPointerUp MSPointerCancel';}
function PointerEventInput(){this.evEl=POINTER_ELEMENT_EVENTS;this.evWin=POINTER_WINDOW_EVENTS;Input.apply(this,arguments);this.store=(this.manager.session.pointerEvents=[]);}
inherit(PointerEventInput,Input,{handler:function PEhandler(ev){var store=this.store;var removePointer=false;var eventTypeNormalized=ev.type.toLowerCase().replace('ms','');var eventType=POINTER_INPUT_MAP[eventTypeNormalized];var pointerType=IE10_POINTER_TYPE_ENUM[ev.pointerType]||ev.pointerType;var isTouch=(pointerType==INPUT_TYPE_TOUCH);var storeIndex=inArray(store,ev.pointerId,'pointerId');if(eventType&INPUT_START&&(ev.button===0||isTouch)){if(storeIndex<0){store.push(ev);storeIndex=store.length-1;}}else if(eventType&(INPUT_END|INPUT_CANCEL)){removePointer=true;}
if(storeIndex<0){return;}
store[storeIndex]=ev;this.callback(this.manager,eventType,{pointers:store,changedPointers:[ev],pointerType:pointerType,srcEvent:ev});if(removePointer){store.splice(storeIndex,1);}}});var SINGLE_TOUCH_INPUT_MAP={touchstart:INPUT_START,touchmove:INPUT_MOVE,touchend:INPUT_END,touchcancel:INPUT_CANCEL};var SINGLE_TOUCH_TARGET_EVENTS='touchstart';var SINGLE_TOUCH_WINDOW_EVENTS='touchstart touchmove touchend touchcancel';function SingleTouchInput(){this.evTarget=SINGLE_TOUCH_TARGET_EVENTS;this.evWin=SINGLE_TOUCH_WINDOW_EVENTS;this.started=false;Input.apply(this,arguments);}
inherit(SingleTouchInput,Input,{handler:function TEhandler(ev){var type=SINGLE_TOUCH_INPUT_MAP[ev.type];if(type===INPUT_START){this.started=true;}
if(!this.started){return;}
var touches=normalizeSingleTouches.call(this,ev,type);if(type&(INPUT_END|INPUT_CANCEL)&&touches[0].length-touches[1].length===0){this.started=false;}
this.callback(this.manager,type,{pointers:touches[0],changedPointers:touches[1],pointerType:INPUT_TYPE_TOUCH,srcEvent:ev});}});function normalizeSingleTouches(ev,type){var all=toArray(ev.touches);var changed=toArray(ev.changedTouches);if(type&(INPUT_END|INPUT_CANCEL)){all=uniqueArray(all.concat(changed),'identifier',true);}
return[all,changed];}
var TOUCH_INPUT_MAP={touchstart:INPUT_START,touchmove:INPUT_MOVE,touchend:INPUT_END,touchcancel:INPUT_CANCEL};var TOUCH_TARGET_EVENTS='touchstart touchmove touchend touchcancel';function TouchInput(){this.evTarget=TOUCH_TARGET_EVENTS;this.targetIds={};Input.apply(this,arguments);}
inherit(TouchInput,Input,{handler:function MTEhandler(ev){var type=TOUCH_INPUT_MAP[ev.type];var touches=getTouches.call(this,ev,type);if(!touches){return;}
this.callback(this.manager,type,{pointers:touches[0],changedPointers:touches[1],pointerType:INPUT_TYPE_TOUCH,srcEvent:ev});}});function getTouches(ev,type){var allTouches=toArray(ev.touches);var targetIds=this.targetIds;if(type&(INPUT_START|INPUT_MOVE)&&allTouches.length===1){targetIds[allTouches[0].identifier]=true;return[allTouches,allTouches];}
var i,targetTouches,changedTouches=toArray(ev.changedTouches),changedTargetTouches=[],target=this.target;targetTouches=allTouches.filter(function(touch){return hasParent(touch.target,target);});if(type===INPUT_START){i=0;while(i<targetTouches.length){targetIds[targetTouches[i].identifier]=true;i++;}}
i=0;while(i<changedTouches.length){if(targetIds[changedTouches[i].identifier]){changedTargetTouches.push(changedTouches[i]);}
if(type&(INPUT_END|INPUT_CANCEL)){delete targetIds[changedTouches[i].identifier];}
i++;}
if(!changedTargetTouches.length){return;}
return[uniqueArray(targetTouches.concat(changedTargetTouches),'identifier',true),changedTargetTouches];}
var DEDUP_TIMEOUT=2500;var DEDUP_DISTANCE=25;function TouchMouseInput(){Input.apply(this,arguments);var handler=bindFn(this.handler,this);this.touch=new TouchInput(this.manager,handler);this.mouse=new MouseInput(this.manager,handler);this.primaryTouch=null;this.lastTouches=[];}
inherit(TouchMouseInput,Input,{handler:function TMEhandler(manager,inputEvent,inputData){var isTouch=(inputData.pointerType==INPUT_TYPE_TOUCH),isMouse=(inputData.pointerType==INPUT_TYPE_MOUSE);if(isMouse&&inputData.sourceCapabilities&&inputData.sourceCapabilities.firesTouchEvents){return;}
if(isTouch){recordTouches.call(this,inputEvent,inputData);}else if(isMouse&&isSyntheticEvent.call(this,inputData)){return;}
this.callback(manager,inputEvent,inputData);},destroy:function destroy(){this.touch.destroy();this.mouse.destroy();}});function recordTouches(eventType,eventData){if(eventType&INPUT_START){this.primaryTouch=eventData.changedPointers[0].identifier;setLastTouch.call(this,eventData);}else if(eventType&(INPUT_END|INPUT_CANCEL)){setLastTouch.call(this,eventData);}}
function setLastTouch(eventData){var touch=eventData.changedPointers[0];if(touch.identifier===this.primaryTouch){var lastTouch={x:touch.clientX,y:touch.clientY};this.lastTouches.push(lastTouch);var lts=this.lastTouches;var removeLastTouch=function(){var i=lts.indexOf(lastTouch);if(i>-1){lts.splice(i,1);}};setTimeout(removeLastTouch,DEDUP_TIMEOUT);}}
function isSyntheticEvent(eventData){var x=eventData.srcEvent.clientX,y=eventData.srcEvent.clientY;for(var i=0;i<this.lastTouches.length;i++){var t=this.lastTouches[i];var dx=Math.abs(x-t.x),dy=Math.abs(y-t.y);if(dx<=DEDUP_DISTANCE&&dy<=DEDUP_DISTANCE){return true;}}
return false;}
var PREFIXED_TOUCH_ACTION=prefixed(TEST_ELEMENT.style,'touchAction');var NATIVE_TOUCH_ACTION=PREFIXED_TOUCH_ACTION!==undefined;var TOUCH_ACTION_COMPUTE='compute';var TOUCH_ACTION_AUTO='auto';var TOUCH_ACTION_MANIPULATION='manipulation';var TOUCH_ACTION_NONE='none';var TOUCH_ACTION_PAN_X='pan-x';var TOUCH_ACTION_PAN_Y='pan-y';var TOUCH_ACTION_MAP=getTouchActionProps();function TouchAction(manager,value){this.manager=manager;this.set(value);}
TouchAction.prototype={set:function(value){if(value==TOUCH_ACTION_COMPUTE){value=this.compute();}
if(NATIVE_TOUCH_ACTION&&this.manager.element.style&&TOUCH_ACTION_MAP[value]){this.manager.element.style[PREFIXED_TOUCH_ACTION]=value;}
this.actions=value.toLowerCase().trim();},update:function(){this.set(this.manager.options.touchAction);},compute:function(){var actions=[];each(this.manager.recognizers,function(recognizer){if(boolOrFn(recognizer.options.enable,[recognizer])){actions=actions.concat(recognizer.getTouchAction());}});return cleanTouchActions(actions.join(' '));},preventDefaults:function(input){var srcEvent=input.srcEvent;var direction=input.offsetDirection;if(this.manager.session.prevented){srcEvent.preventDefault();return;}
var actions=this.actions;var hasNone=inStr(actions,TOUCH_ACTION_NONE)&&!TOUCH_ACTION_MAP[TOUCH_ACTION_NONE];var hasPanY=inStr(actions,TOUCH_ACTION_PAN_Y)&&!TOUCH_ACTION_MAP[TOUCH_ACTION_PAN_Y];var hasPanX=inStr(actions,TOUCH_ACTION_PAN_X)&&!TOUCH_ACTION_MAP[TOUCH_ACTION_PAN_X];if(hasNone){var isTapPointer=input.pointers.length===1;var isTapMovement=input.distance<2;var isTapTouchTime=input.deltaTime<250;if(isTapPointer&&isTapMovement&&isTapTouchTime){return;}}
if(hasPanX&&hasPanY){return;}
if(hasNone||(hasPanY&&direction&DIRECTION_HORIZONTAL)||(hasPanX&&direction&DIRECTION_VERTICAL)){return this.preventSrc(srcEvent);}},preventSrc:function(srcEvent){this.manager.session.prevented=true;srcEvent.preventDefault();}};function cleanTouchActions(actions){if(inStr(actions,TOUCH_ACTION_NONE)){return TOUCH_ACTION_NONE;}
var hasPanX=inStr(actions,TOUCH_ACTION_PAN_X);var hasPanY=inStr(actions,TOUCH_ACTION_PAN_Y);if(hasPanX&&hasPanY){return TOUCH_ACTION_NONE;}
if(hasPanX||hasPanY){return hasPanX?TOUCH_ACTION_PAN_X:TOUCH_ACTION_PAN_Y;}
if(inStr(actions,TOUCH_ACTION_MANIPULATION)){return TOUCH_ACTION_MANIPULATION;}
return TOUCH_ACTION_AUTO;}
function getTouchActionProps(){if(!NATIVE_TOUCH_ACTION){return false;}
var touchMap={};var cssSupports=window.CSS&&window.CSS.supports;['auto','manipulation','pan-y','pan-x','pan-x pan-y','none'].forEach(function(val){touchMap[val]=cssSupports?window.CSS.supports('touch-action',val):true;});return touchMap;}
var STATE_POSSIBLE=1;var STATE_BEGAN=2;var STATE_CHANGED=4;var STATE_ENDED=8;var STATE_RECOGNIZED=STATE_ENDED;var STATE_CANCELLED=16;var STATE_FAILED=32;function Recognizer(options){this.options=assign({},this.defaults,options||{});this.id=uniqueId();this.manager=null;this.options.enable=ifUndefined(this.options.enable,true);this.state=STATE_POSSIBLE;this.simultaneous={};this.requireFail=[];}
Recognizer.prototype={defaults:{},set:function(options){assign(this.options,options);this.manager&&this.manager.touchAction.update();return this;},recognizeWith:function(otherRecognizer){if(invokeArrayArg(otherRecognizer,'recognizeWith',this)){return this;}
var simultaneous=this.simultaneous;otherRecognizer=getRecognizerByNameIfManager(otherRecognizer,this);if(!simultaneous[otherRecognizer.id]){simultaneous[otherRecognizer.id]=otherRecognizer;otherRecognizer.recognizeWith(this);}
return this;},dropRecognizeWith:function(otherRecognizer){if(invokeArrayArg(otherRecognizer,'dropRecognizeWith',this)){return this;}
otherRecognizer=getRecognizerByNameIfManager(otherRecognizer,this);delete this.simultaneous[otherRecognizer.id];return this;},requireFailure:function(otherRecognizer){if(invokeArrayArg(otherRecognizer,'requireFailure',this)){return this;}
var requireFail=this.requireFail;otherRecognizer=getRecognizerByNameIfManager(otherRecognizer,this);if(inArray(requireFail,otherRecognizer)===-1){requireFail.push(otherRecognizer);otherRecognizer.requireFailure(this);}
return this;},dropRequireFailure:function(otherRecognizer){if(invokeArrayArg(otherRecognizer,'dropRequireFailure',this)){return this;}
otherRecognizer=getRecognizerByNameIfManager(otherRecognizer,this);var index=inArray(this.requireFail,otherRecognizer);if(index>-1){this.requireFail.splice(index,1);}
return this;},hasRequireFailures:function(){return this.requireFail.length>0;},canRecognizeWith:function(otherRecognizer){return!!this.simultaneous[otherRecognizer.id];},emit:function(input){var self=this;var state=this.state;function emit(event){self.manager.emit(event,input);}
if(state<STATE_ENDED){emit(self.options.event+stateStr(state));}
emit(self.options.event);if(input.additionalEvent){emit(input.additionalEvent);}
if(state>=STATE_ENDED){emit(self.options.event+stateStr(state));}},tryEmit:function(input){if(this.canEmit()){return this.emit(input);}
this.state=STATE_FAILED;},canEmit:function(){var i=0;while(i<this.requireFail.length){if(!(this.requireFail[i].state&(STATE_FAILED|STATE_POSSIBLE))){return false;}
i++;}
return true;},recognize:function(inputData){var inputDataClone=assign({},inputData);if(!boolOrFn(this.options.enable,[this,inputDataClone])){this.reset();this.state=STATE_FAILED;return;}
if(this.state&(STATE_RECOGNIZED|STATE_CANCELLED|STATE_FAILED)){this.state=STATE_POSSIBLE;}
this.state=this.process(inputDataClone);if(this.state&(STATE_BEGAN|STATE_CHANGED|STATE_ENDED|STATE_CANCELLED)){this.tryEmit(inputDataClone);}},process:function(inputData){},getTouchAction:function(){},reset:function(){}};function stateStr(state){if(state&STATE_CANCELLED){return'cancel';}else if(state&STATE_ENDED){return'end';}else if(state&STATE_CHANGED){return'move';}else if(state&STATE_BEGAN){return'start';}
return'';}
function directionStr(direction){if(direction==DIRECTION_DOWN){return'down';}else if(direction==DIRECTION_UP){return'up';}else if(direction==DIRECTION_LEFT){return'left';}else if(direction==DIRECTION_RIGHT){return'right';}
return'';}
function getRecognizerByNameIfManager(otherRecognizer,recognizer){var manager=recognizer.manager;if(manager){return manager.get(otherRecognizer);}
return otherRecognizer;}
function AttrRecognizer(){Recognizer.apply(this,arguments);}
inherit(AttrRecognizer,Recognizer,{defaults:{pointers:1},attrTest:function(input){var optionPointers=this.options.pointers;return optionPointers===0||input.pointers.length===optionPointers;},process:function(input){var state=this.state;var eventType=input.eventType;var isRecognized=state&(STATE_BEGAN|STATE_CHANGED);var isValid=this.attrTest(input);if(isRecognized&&(eventType&INPUT_CANCEL||!isValid)){return state|STATE_CANCELLED;}else if(isRecognized||isValid){if(eventType&INPUT_END){return state|STATE_ENDED;}else if(!(state&STATE_BEGAN)){return STATE_BEGAN;}
return state|STATE_CHANGED;}
return STATE_FAILED;}});function PanRecognizer(){AttrRecognizer.apply(this,arguments);this.pX=null;this.pY=null;}
inherit(PanRecognizer,AttrRecognizer,{defaults:{event:'pan',threshold:10,pointers:1,direction:DIRECTION_ALL},getTouchAction:function(){var direction=this.options.direction;var actions=[];if(direction&DIRECTION_HORIZONTAL){actions.push(TOUCH_ACTION_PAN_Y);}
if(direction&DIRECTION_VERTICAL){actions.push(TOUCH_ACTION_PAN_X);}
return actions;},directionTest:function(input){var options=this.options;var hasMoved=true;var distance=input.distance;var direction=input.direction;var x=input.deltaX;var y=input.deltaY;if(!(direction&options.direction)){if(options.direction&DIRECTION_HORIZONTAL){direction=(x===0)?DIRECTION_NONE:(x<0)?DIRECTION_LEFT:DIRECTION_RIGHT;hasMoved=x!=this.pX;distance=Math.abs(input.deltaX);}else{direction=(y===0)?DIRECTION_NONE:(y<0)?DIRECTION_UP:DIRECTION_DOWN;hasMoved=y!=this.pY;distance=Math.abs(input.deltaY);}}
input.direction=direction;return hasMoved&&distance>options.threshold&&direction&options.direction;},attrTest:function(input){return AttrRecognizer.prototype.attrTest.call(this,input)&&(this.state&STATE_BEGAN||(!(this.state&STATE_BEGAN)&&this.directionTest(input)));},emit:function(input){this.pX=input.deltaX;this.pY=input.deltaY;var direction=directionStr(input.direction);if(direction){input.additionalEvent=this.options.event+direction;}
this._super.emit.call(this,input);}});function PinchRecognizer(){AttrRecognizer.apply(this,arguments);}
inherit(PinchRecognizer,AttrRecognizer,{defaults:{event:'pinch',threshold:0,pointers:2},getTouchAction:function(){return[TOUCH_ACTION_NONE];},attrTest:function(input){return this._super.attrTest.call(this,input)&&(Math.abs(input.scale-1)>this.options.threshold||this.state&STATE_BEGAN);},emit:function(input){if(input.scale!==1){var inOut=input.scale<1?'in':'out';input.additionalEvent=this.options.event+inOut;}
this._super.emit.call(this,input);}});function PressRecognizer(){Recognizer.apply(this,arguments);this._timer=null;this._input=null;}
inherit(PressRecognizer,Recognizer,{defaults:{event:'press',pointers:1,time:251,threshold:9},getTouchAction:function(){return[TOUCH_ACTION_AUTO];},process:function(input){var options=this.options;var validPointers=input.pointers.length===options.pointers;var validMovement=input.distance<options.threshold;var validTime=input.deltaTime>options.time;this._input=input;if(!validMovement||!validPointers||(input.eventType&(INPUT_END|INPUT_CANCEL)&&!validTime)){this.reset();}else if(input.eventType&INPUT_START){this.reset();this._timer=setTimeoutContext(function(){this.state=STATE_RECOGNIZED;this.tryEmit();},options.time,this);}else if(input.eventType&INPUT_END){return STATE_RECOGNIZED;}
return STATE_FAILED;},reset:function(){clearTimeout(this._timer);},emit:function(input){if(this.state!==STATE_RECOGNIZED){return;}
if(input&&(input.eventType&INPUT_END)){this.manager.emit(this.options.event+'up',input);}else{this._input.timeStamp=now();this.manager.emit(this.options.event,this._input);}}});function RotateRecognizer(){AttrRecognizer.apply(this,arguments);}
inherit(RotateRecognizer,AttrRecognizer,{defaults:{event:'rotate',threshold:0,pointers:2},getTouchAction:function(){return[TOUCH_ACTION_NONE];},attrTest:function(input){return this._super.attrTest.call(this,input)&&(Math.abs(input.rotation)>this.options.threshold||this.state&STATE_BEGAN);}});function SwipeRecognizer(){AttrRecognizer.apply(this,arguments);}
inherit(SwipeRecognizer,AttrRecognizer,{defaults:{event:'swipe',threshold:10,velocity:0.3,direction:DIRECTION_HORIZONTAL|DIRECTION_VERTICAL,pointers:1},getTouchAction:function(){return PanRecognizer.prototype.getTouchAction.call(this);},attrTest:function(input){var direction=this.options.direction;var velocity;if(direction&(DIRECTION_HORIZONTAL|DIRECTION_VERTICAL)){velocity=input.overallVelocity;}else if(direction&DIRECTION_HORIZONTAL){velocity=input.overallVelocityX;}else if(direction&DIRECTION_VERTICAL){velocity=input.overallVelocityY;}
return this._super.attrTest.call(this,input)&&direction&input.offsetDirection&&input.distance>this.options.threshold&&input.maxPointers==this.options.pointers&&abs(velocity)>this.options.velocity&&input.eventType&INPUT_END;},emit:function(input){var direction=directionStr(input.offsetDirection);if(direction){this.manager.emit(this.options.event+direction,input);}
this.manager.emit(this.options.event,input);}});function TapRecognizer(){Recognizer.apply(this,arguments);this.pTime=false;this.pCenter=false;this._timer=null;this._input=null;this.count=0;}
inherit(TapRecognizer,Recognizer,{defaults:{event:'tap',pointers:1,taps:1,interval:300,time:250,threshold:9,posThreshold:10},getTouchAction:function(){return[TOUCH_ACTION_MANIPULATION];},process:function(input){var options=this.options;var validPointers=input.pointers.length===options.pointers;var validMovement=input.distance<options.threshold;var validTouchTime=input.deltaTime<options.time;this.reset();if((input.eventType&INPUT_START)&&(this.count===0)){return this.failTimeout();}
if(validMovement&&validTouchTime&&validPointers){if(input.eventType!=INPUT_END){return this.failTimeout();}
var validInterval=this.pTime?(input.timeStamp-this.pTime<options.interval):true;var validMultiTap=!this.pCenter||getDistance(this.pCenter,input.center)<options.posThreshold;this.pTime=input.timeStamp;this.pCenter=input.center;if(!validMultiTap||!validInterval){this.count=1;}else{this.count+=1;}
this._input=input;var tapCount=this.count%options.taps;if(tapCount===0){if(!this.hasRequireFailures()){return STATE_RECOGNIZED;}else{this._timer=setTimeoutContext(function(){this.state=STATE_RECOGNIZED;this.tryEmit();},options.interval,this);return STATE_BEGAN;}}}
return STATE_FAILED;},failTimeout:function(){this._timer=setTimeoutContext(function(){this.state=STATE_FAILED;},this.options.interval,this);return STATE_FAILED;},reset:function(){clearTimeout(this._timer);},emit:function(){if(this.state==STATE_RECOGNIZED){this._input.tapCount=this.count;this.manager.emit(this.options.event,this._input);}}});function Hammer(element,options){options=options||{};options.recognizers=ifUndefined(options.recognizers,Hammer.defaults.preset);return new Manager(element,options);}
Hammer.VERSION='2.0.8';Hammer.defaults={domEvents:false,touchAction:TOUCH_ACTION_COMPUTE,enable:true,inputTarget:null,inputClass:null,preset:[[RotateRecognizer,{enable:false}],[PinchRecognizer,{enable:false},['rotate']],[SwipeRecognizer,{direction:DIRECTION_HORIZONTAL}],[PanRecognizer,{direction:DIRECTION_HORIZONTAL},['swipe']],[TapRecognizer],[TapRecognizer,{event:'doubletap',taps:2},['tap']],[PressRecognizer]],cssProps:{userSelect:'none',touchSelect:'none',touchCallout:'none',contentZooming:'none',userDrag:'none',tapHighlightColor:'rgba(0,0,0,0)'}};var STOP=1;var FORCED_STOP=2;function Manager(element,options){this.options=assign({},Hammer.defaults,options||{});this.options.inputTarget=this.options.inputTarget||element;this.handlers={};this.session={};this.recognizers=[];this.oldCssProps={};this.element=element;this.input=createInputInstance(this);this.touchAction=new TouchAction(this,this.options.touchAction);toggleCssProps(this,true);each(this.options.recognizers,function(item){var recognizer=this.add(new(item[0])(item[1]));item[2]&&recognizer.recognizeWith(item[2]);item[3]&&recognizer.requireFailure(item[3]);},this);}
Manager.prototype={set:function(options){assign(this.options,options);if(options.touchAction){this.touchAction.update();}
if(options.inputTarget){this.input.destroy();this.input.target=options.inputTarget;this.input.init();}
return this;},stop:function(force){this.session.stopped=force?FORCED_STOP:STOP;},recognize:function(inputData){var session=this.session;if(session.stopped){return;}
this.touchAction.preventDefaults(inputData);var recognizer;var recognizers=this.recognizers;var curRecognizer=session.curRecognizer;if(!curRecognizer||(curRecognizer&&curRecognizer.state&STATE_RECOGNIZED)){curRecognizer=session.curRecognizer=null;}
var i=0;while(i<recognizers.length){recognizer=recognizers[i];if(session.stopped!==FORCED_STOP&&(!curRecognizer||recognizer==curRecognizer||recognizer.canRecognizeWith(curRecognizer))){recognizer.recognize(inputData);}else{recognizer.reset();}
if(!curRecognizer&&recognizer.state&(STATE_BEGAN|STATE_CHANGED|STATE_ENDED)){curRecognizer=session.curRecognizer=recognizer;}
i++;}},get:function(recognizer){if(recognizer instanceof Recognizer){return recognizer;}
var recognizers=this.recognizers;for(var i=0;i<recognizers.length;i++){if(recognizers[i].options.event==recognizer){return recognizers[i];}}
return null;},add:function(recognizer){if(invokeArrayArg(recognizer,'add',this)){return this;}
var existing=this.get(recognizer.options.event);if(existing){this.remove(existing);}
this.recognizers.push(recognizer);recognizer.manager=this;this.touchAction.update();return recognizer;},remove:function(recognizer){if(invokeArrayArg(recognizer,'remove',this)){return this;}
recognizer=this.get(recognizer);if(recognizer){var recognizers=this.recognizers;var index=inArray(recognizers,recognizer);if(index!==-1){recognizers.splice(index,1);this.touchAction.update();}}
return this;},on:function(events,handler){if(events===undefined){return;}
if(handler===undefined){return;}
var handlers=this.handlers;each(splitStr(events),function(event){handlers[event]=handlers[event]||[];handlers[event].push(handler);});return this;},off:function(events,handler){if(events===undefined){return;}
var handlers=this.handlers;each(splitStr(events),function(event){if(!handler){delete handlers[event];}else{handlers[event]&&handlers[event].splice(inArray(handlers[event],handler),1);}});return this;},emit:function(event,data){if(this.options.domEvents){triggerDomEvent(event,data);}
var handlers=this.handlers[event]&&this.handlers[event].slice();if(!handlers||!handlers.length){return;}
data.type=event;data.preventDefault=function(){data.srcEvent.preventDefault();};var i=0;while(i<handlers.length){handlers[i](data);i++;}},destroy:function(){this.element&&toggleCssProps(this,false);this.handlers={};this.session={};this.input.destroy();this.element=null;}};function toggleCssProps(manager,add){var element=manager.element;if(!element.style){return;}
var prop;each(manager.options.cssProps,function(value,name){prop=prefixed(element.style,name);if(add){manager.oldCssProps[prop]=element.style[prop];element.style[prop]=value;}else{element.style[prop]=manager.oldCssProps[prop]||'';}});if(!add){manager.oldCssProps={};}}
function triggerDomEvent(event,data){var gestureEvent=document.createEvent('Event');gestureEvent.initEvent(event,true,true);gestureEvent.gesture=data;data.target.dispatchEvent(gestureEvent);}
assign(Hammer,{INPUT_START:INPUT_START,INPUT_MOVE:INPUT_MOVE,INPUT_END:INPUT_END,INPUT_CANCEL:INPUT_CANCEL,STATE_POSSIBLE:STATE_POSSIBLE,STATE_BEGAN:STATE_BEGAN,STATE_CHANGED:STATE_CHANGED,STATE_ENDED:STATE_ENDED,STATE_RECOGNIZED:STATE_RECOGNIZED,STATE_CANCELLED:STATE_CANCELLED,STATE_FAILED:STATE_FAILED,DIRECTION_NONE:DIRECTION_NONE,DIRECTION_LEFT:DIRECTION_LEFT,DIRECTION_RIGHT:DIRECTION_RIGHT,DIRECTION_UP:DIRECTION_UP,DIRECTION_DOWN:DIRECTION_DOWN,DIRECTION_HORIZONTAL:DIRECTION_HORIZONTAL,DIRECTION_VERTICAL:DIRECTION_VERTICAL,DIRECTION_ALL:DIRECTION_ALL,Manager:Manager,Input:Input,TouchAction:TouchAction,TouchInput:TouchInput,MouseInput:MouseInput,PointerEventInput:PointerEventInput,TouchMouseInput:TouchMouseInput,SingleTouchInput:SingleTouchInput,Recognizer:Recognizer,AttrRecognizer:AttrRecognizer,Tap:TapRecognizer,Pan:PanRecognizer,Swipe:SwipeRecognizer,Pinch:PinchRecognizer,Rotate:RotateRecognizer,Press:PressRecognizer,on:addEventListeners,off:removeEventListeners,each:each,merge:merge,extend:extend,assign:assign,inherit:inherit,bindFn:bindFn,prefixed:prefixed});var freeGlobal=(typeof window!=='undefined'?window:(typeof self!=='undefined'?self:{}));freeGlobal.Hammer=Hammer;if(typeof define==='function'&&define.amd){define(function(){return Hammer;});}else if(typeof module!='undefined'&&module.exports){module.exports=Hammer;}else{window[exportName]=Hammer;}})(window,document,'Hammer');
function showFigures(element,e){if(!e)var e=$.event;initViewer(element,e);$('#figureViewer-wrap').delay(100).fadeIn("fast",function(){if($('#figureCanvas').height()+10>$(window).height()){$('#figureCanvas').css({'overflow-y':'scroll','height':$(window).height()-40+'px'});}
$('body').css({'overflow':'hidden'});});}
function initViewer(element,e){if(!window.figureViewer)return false;var figures=window.figureViewer.figures;for(var i=figures.length-1;i>=0;i--){var figureMeta=figures[i];if(!figureMeta||!$(figureMeta.i))figures.splice(i,1);}
if(figures.length==0){window.figureViewer=null;return false;}
var fvw=$("<div>",{id:"figureViewer-wrap"}).hide();$(fvw).html('<div id="figureViewer">\
            <div id="figureCanvas">\
            <i class="closeButton fa fa-times-circle figureViewerSprite figureViewerSprite_close_32" title="Close Figure Viewer"></i>\
                <div id="figTools">\
                </div>\
                <div id="figureDescriptionPart">\
                     <div id="figureViewerTopArticleInfo" class="figureViewerTopArticleInfo"></div>\
                    <div id="figureViewerDescription"></div>\
                </div>\
                <div class="imageControlContainer">\
                <a class="prev figureViewerSprite figureViewerSprite_back_arrow_32" title="Previous Figure" href="#" class="disabled"></a>\
                <div class="figBox">\
                </div>\
                <a class="next figureViewerSprite figureViewerSprite_next_arrow_32" title="Next Figure" href="#" class="disabled"></a>\
                </div>\
                <div class="figureViewer-footer">\
                     \
                </div>\
            </div>\
        </div>');appendFVW(fvw);fvw.find('.closeButton').on('click',function(e){closeFigureViewer(e);loadMathToggle();});$('#figureViewer-wrap').on('click',function(e){closeAll(e);loadMathToggle();});var index=0,figureElement=$("#"+$(element).closest(".figure").attr("id"));if(figureElement&&figureElement.attr('id')){var figureId=figureElement.attr('id').indexOf('ref-')>-1?figureElement.attr('id').substring('ref-'.length):figureElement.attr('id');while(index<figures.length&&figures[index].i!=figureId)index++;}
showImage(index,e);}
function appendFVW(fvw){$('.pageBody').append(fvw);}
function closeAll(e){var fvw=$('#figureViewer-wrap');var canvas=$("#figureCanvas");if(!canvas.is(e.target)&&canvas.has(e.target).length===0){fvw.hide();$("body, html").css({"overflow":"initial"});}}
function showImage(index,e){$(".imageControlContainer, .figureViewer-footer").on({mouseenter:function(){$(".figureViewer-footer").addClass("visible");},mouseleave:function(){$(".figureViewer-footer").removeClass("visible");}});var figures=window.figureViewer.figures
figureMeta=figures[index];if(!figureMeta)figureMeta=figures[index=0];var graphics=figureMeta.g,figureElement=$("#"+figureMeta.i),fvw=$('#figureViewer-wrap');$("#figureViewerTopArticleInfo").html($("#figureViewerArticleInfo").html());$("#figureViewerDescription").html("<div id=\"figureCount\"><h3>Figure <span class=\"index\">1</span> of "+figures.length+" </h3></div>"+"<div>"+$("#fig-description-"+figureMeta.i).html()+"</div>"+$("#figureFootNote-"+figureMeta.i).html());var html="";for(var i=0;i<graphics.length;i++){html+='<img id="imgFig" alt="Figure" src="'+window.figureViewer.path+'/images/large/'+graphics[i].l+'"/>';}
$(".figBox",fvw).html(html);var captionElement=$(".caption",figureElement);$(".caption",fvw).html(captionElement.html());$(".caption p",fvw).css("display","block");var pLink=$('.prev',fvw);if(index==0){pLink.addClass("disabled");}else{pLink.removeClass("disabled");pLink.attr("href","JavaScript:showImage("+(index-1)+")");}
$(fvw).show("slow",function(e){$(this).find("[data-formula-source]").loadInview();});index++;var nLink=$('.next',fvw);if(index==figures.length){nLink.addClass("disabled");}else{nLink.removeClass("disabled");nLink.attr("href","JavaScript:showImage("+index+")");}
$('.index',fvw).html(index);var ftHtml='';if(figureMeta.weo){for(var i=0;i<figureMeta.weo.length;i++){var weo=figureMeta.weo[i];if(weo&&weo.h){ftHtml+='<div class="weo"><a title="View this Web Enhanced Object'
if(weo.t){ftHtml+=': '+weo.t;}
ftHtml+='" href="'+weo.h+'" target="_blank"><span>Web Enhanced Object</span></a></div>';}}}
var articleDOI=window.figureViewer.doi;html='';var imgSrc=document.getElementById('imgFig').getAttribute('src');for(var i=0;i<graphics.length;i++){if(graphics[i].l){var originalSize=$("#originalFileSize"+figureMeta.i).text();if(html)html+='<br />';if($(e).parents(".tableView").length==1){html+=''+'<div class="bottomLeft">\
                    <a class="fwButton" href="#">CSV</a>\
                    <a class="fwButton" href="#">PDF</a>\
                </div>';}}}
if(html){ftHtml+='<div class="highRes">'+html+'</div>';}
$('.figureViewer-footer').html(ftHtml);var largeImage=$("<img src='"+imgSrc+"'/>");$(largeImage).load(function(){if($('#figureCanvas').height()+60>$(window).height()){$('#figureCanvas').css({'overflow-y':'scroll','max-height':$(window).height()-40+'px'});}else{$('#figureCanvas').css({'overflow-y':'scroll','max-height':$(window).height()-40+'px'});}});}
function closeFigureViewer(){$('#figureViewer-wrap').fadeOut('fast',function(){$(this).remove();$('body').css({'overflow':'auto'});})}
function showTables(id,element,e){if(!e)var e=$.event;initTableViewer(id,element,e);displayWithEffect('#tableViewer-wrap',e,offClickFigViewer);}
function closeTableViewer(e){if(!e)var e=$.event;initTableViewer(null,null,e);displayWithEffect('#tableViewer-wrap',e,offClickFigViewer);}
function initTableViewer(id,element,e){if(!window.tableViewer)return false;var fvw=$('#tableViewer-wrap');var tables=window.tableViewer.tables;if(tables.length==0){window.tableViewer=null;return false;}
var tableDOI=window.tableViewer.doi;if(!fvw.length){var c=$('#tandf_content');if(!c.length)
c=$('#container');if(!c.length)
c=$('#content');if(!c.length){fvw=$(document.createElement("div"));fvw.attr('id','tableViewer-wrap');fvw.css("display",'none');c.append(fvw);$(fvw).html('<div id="tableViewer">\
                    <div id="tableViewerNav">\
                        <i title="Close Table Viewer" href="#" class="closeButton fa fa-times-circle"></i>\
                        <div class="tableNav">\
                                <a class="prev" title="Previous Table" href="#" class="disabled"></a>\
                  <a class="next" title="Next Table" href="#" class="disabled"></a>\
                </div>\
                    </div>\
                    <div id="tableDescriptionPart">\
                        <div id="tableViewerTopArticleInfo" class="tableViewerTopArticleInfo"></div>\
                    </div>\
                   <div id="tableCanvas">\
                            <div id="tableTools">\
                            </div>\
                            <div class="tableBox">\
                            </div>\
                            <a class="next" title="Next Table" href="#" class="disabled"></a>\
                            <div class="caption">&nbsp;\
                            </div>\
                            <div class="tableDownloadOption"></div>\
                            <div id="tableViewer-footer">\
                                <img alt="" src="/templates/jsp/images/figureViewer-bg3.gif"/>\
                            </div>\
                        </div>\
                </div>');appendFVW(fvw);}}
var index;index=window.tableIDIndexMap[id];showTable(index-1,id);$('.closeButton').on('click',function(e){closeTableViewer(e);});}
function showTable(index,id){var tableDOI=window.tableViewer.doi;var tables=window.tableViewer.tables;var tableMeta=tables[index];if(!tableMeta)tableMeta=tables[index=0];var tableContent=$("#table-content-"+tableMeta.i);var tbl=tableContent.find('table');if(tbl.find('caption').length<=0){tbl.prepend('<caption><h3> </h3></caption>')}
var fvw=$('#tableViewer-wrap');var html=tableContent.html();$(".tableBox",fvw).html("<div id=\"tableCount\"><h3>Table <span class=\"index\">1</span> of "+tables.length+" </h3></div>"+html);var captionTxt=$(".caption",fvw).html();$(".tableBox table caption",fvw).html("<div class=\"paragraph\">"+captionTxt+"</div>");$(".caption",fvw).remove();var pLink=$('.prev',fvw);if(index==0){pLink.addClass("disabled");pLink.css('visibility','hidden');}else{pLink.removeClass("disabled");pLink.css('visibility','visible');pLink.attr("href","JavaScript:showTable("+(index-1)+",'"+tables[index-1]['i']+"')");}
index++;var nLink=$('.next',fvw);if(index==tables.length){nLink.addClass("disabled");nLink.css('visibility','hidden');}else{nLink.removeClass("disabled");nLink.css('visibility','visible');nLink.attr("href","JavaScript:showTable("+index+",'"+tables[index]['i']+"')");}
$('.index',fvw).html(index);var ftHtml=$(tableContent).find('.footnote .paragraph').text();$('#tableViewer-footer').html(ftHtml);$("#tableViewerTopArticleInfo").html($("#tableViewerArticleInfo").html());var hasCsVLnk=$('#'+id+"-table-wrapper").data('hascsvlnk');var downloadOption=$('#tableViewer').find('.tableDownloadOption');if(hasCsVLnk){$(downloadOption).html("<a id='CSVdownloadButton' class='downloadButton btnGrey' href='/action/downloadTable?id="+id+"&doi="+tableDOI+"&downloadType=CSV"+"'>CSV</a>");}else{$(downloadOption).empty();}
$('#tableViewer-wrap').find("[data-formula-source]").loadInview();}
function displayWithEffect(viewerId,e,funct){if(!e)var e=$.event;var n=0;var viewer=$(viewerId);if(!viewer)return;if(viewer.css('display')!='block'){bg=new Array();bg[0]=$('header');bg[1]=$('mainBody');bg[2]=$('pageFooter-wrap');while(bg[n]){$(bg[n]).css("MozOpacity","0.70");$(bg[n]).css("KHTMLOpacity","0.70");$(bg[n]).css("opacity","0.70");n++;}
$(viewerId).show("slow",function(e){$(this).find("[data-formula-source]").loadInview();});var top=0;if(window.pageXOffset!==undefined){top=(window.pageYOffset||document.scrollTop)-(document.clientTop||0);}else{top=document.documentElement.scrollLeft+document.documentElement.scrollTop;}
viewer.css("position","absolute");viewer.css("top",top+"px");viewer.mouseSelectionFixed=true;}
else{while(bg[n]){$(bg[n]).css("MozOpacity","1");$(bg[n]).css("KHTMLOpacity","1");$(bg[n]).css("opacity","1");n++;}
$(viewerId).hide("slow");}}
offClickFigViewer=function(event,elementId){var target=$(elementId);var fvw=$('figureViewer-wrap');if(fvw.css("display")!="none"&&target!=fvw){fvw.css("display","none");fvw.css("position","absolute");}};$(document).ready(function(){$('body').keyup(function(e){if(e.keyCode==27){closeFigureViewer();loadMathToggle();$('#tableViewer-wrap').fadeOut('fast',function(){$(this).remove();$('body').css({'overflow':'auto'});})}});});
var PersonUserResponsiveLogin=PersonUserResponsiveLogin||{};(function($){PersonUserResponsiveLogin.Initialize=function(){$('.website-login').click(function(e){$('.log-popup .login-reg-popup-container').addClass('showElement');return false;});$('.loginBar .website-register').click(function(e){$('.reg-popup .login-reg-popup-container').addClass('showElement');return false;});var logRegCheck=0;$('.social-icons .social-icons-container .toggable').click(function(){if($(this).closest('.log-popup').length){logRegCheck=1;}
if($(this).closest('.reg-popup').length){logRegCheck=2}
if(logRegCheck==1){$(this).toggleClass('icon-more  icon-close_thin');$(this).siblings('.hiddenIcon').toggleClass('showElement');$('.log-popup .log-publisher-msg').toggleClass('showElement');}
if(logRegCheck==2){$(this).toggleClass('icon-more  icon-close_thin');$(this).siblings('.hiddenIcon').toggleClass('showElement');$('.reg-popup .log-publisher-msg').toggleClass('showElement');}
if(logRegCheck==0){$(this).toggleClass('icon-more icon-close_thin');$(this).siblings('.hiddenIcon').toggleClass('showElement');$(this).parent('.social-icons-container').siblings('.log-publisher-msg').toggleClass('showElement');}});$('.login-reg-popup-container .close-log').click(function(){$('.login-reg-popup-container').removeClass('showElement');});$('.popup-content .popup-newuser').click(function(e){e.preventDefault();$('.log-popup .login-reg-popup-container').removeClass('showElement');$('.reg-popup .login-reg-popup-container').addClass('showElement');});$('.popup-content .popup-returnuser').click(function(){$('.reg-popup .login-reg-popup-container').removeClass('showElement');$('.log-popup .login-reg-popup-container').addClass('showElement');});$(".raa-login-form input").on("keyup",function(){$container=$(this).closest(".raa-login-form");$user=$container.find(".personal-info-user input");$pass=$container.find(".personal-info-pass input[type='password']");if($user.val().trim().length>0&&$pass.val().trim().length>0){$container.find(".popup-login-btn").addClass("blue-subb-btn");}else{$container.find(".popup-login-btn").removeClass("blue-subb-btn");}});$(".login-reg-popup-container input").on("keyup",function(){$container=$(this).closest("form");$email=$container.find(".input-group input[type='email'],.input-group input[type='text']");if($email.val().trim().length>0){$container.find(".popup-login-btn").addClass("blue-subb-btn");}else{$container.find(".popup-login-btn").removeClass("blue-subb-btn");}});PersonUserResponsiveLogin.ready=true;}})($);$(document).ready(function(){PersonUserResponsiveLogin.Initialize();$('form[name="frmLogin"]').each(function(){var target=$(this).find('.error');if(target.length){var elOffset=target.offset().top;var elHeight=target.height();var windowHeight=$(window).height();var offset;if(elHeight<windowHeight){offset=elOffset-((windowHeight/2)-(elHeight/2));}
else{offset=elOffset;}
$('html,body').animate({scrollTop:target.offset().top},1000);}});});
$(document).ready(function(){var MenuDrawerModule=(function(){var appbarElement=$('.app-bar'),darkbgElement=$('.navdrawer-bg'),menuBtn=$('.appbar-icons-container'),pageBodyContainer=$('.pageBody'),mainBody=$('body, html'),index=0,oldindex=[],touchstarty=0,touchmovey=0,movey=0,quartViewport=parseInt($(window).height()/24),isScrolling=false,menuScrollBegin=0,menuTopPosition=0;function appBarActions(){var state=menuBtn.attr('aria-expanded')==='false'?true:false;appbarElement.toggleClass('menu-open');pageBodyContainer.toggleClass('menu-open');mainBody.toggleClass('no-scroll');menuBtn.attr('aria-expanded',state);darkbgElement.toggleClass('overlay-fixed');}
return{bindUIActions:function(){$(document).on('click','.appbar-icons-container',function(){appBarActions();});darkbgElement.on("touchstart click",function(e){e.preventDefault();appBarActions();});$(".navdrawer-items .expander").click(function(e){if($(".appbar-icons-container").is(":visible")){var self=$(this);$(".navdrawer-container .secondary-nav").toggle();$(".navdrawer-container .call-to-action").toggle();$(".navdrawer-container .social-menu-links").toggle();$(".navdrawer-items").toggleClass("darkerBG");if(self.closest('.navdrawer-container').hasClass('navdrawer-container-rtl')){if(!(self.parent().hasClass("menu-rail"))){if(self.parents().hasClass("menu-rail")){self.parents(".menu-rail").addClass("sub-opened");}
self.closest("li").addClass("menu-rail").siblings("li").addClass("menu-prev-item");oldindex.push(index);index=0;return false;}else{$(this).parent().removeClass("menu-rail").siblings("li").removeClass("menu-prev-item").closest(".sub-opened").removeClass("sub-opened");var popped=oldindex.pop();index=popped;return false;}}
else{if(!(self.parent().hasClass("menu-rail"))){if(self.parents().hasClass("menu-rail")){self.parents(".menu-rail").addClass("sub-opened");}
self.addClass("icon-arrow_l").closest("li").addClass("menu-rail").siblings("li").addClass("menu-prev-item");oldindex.push(index);index=0;return false;}else{$(this).removeClass("icon-arrow_l").parent().removeClass("menu-rail").siblings("li").removeClass("menu-prev-item").closest(".sub-opened").removeClass("sub-opened");var popped=oldindex.pop();index=popped;return false;}}}});menuBtn.on('keydown',function(e){$(".navdrawer-container").addClass("is-tabbing");if(appbarElement.hasClass("menu-open")){}
if((appbarElement.hasClass("menu-open")&&((e.keyCode||e.which)==$.ui.keyCode.ESCAPE))){appBarActions();}
if((e.keyCode||e.which)==$.ui.keyCode.TAB){if($(this).attr('aria-expanded')=='true'){e.preventDefault();$('.navdrawer-items a:visible').not(".submenu-prev").first().focus();}}});$('.navdrawer-container').on('keydown',function(e){var focusableElements=$('.navdrawer-items a:visible');if(((e.keyCode||e.which)==$.ui.keyCode.ESCAPE)){appBarActions();menuBtn.focus();}
if(e.shiftKey&&(e.keyCode||e.which)==$.ui.keyCode.TAB){prevTab();}else if((e.keyCode||e.which)==$.ui.keyCode.TAB){nextTab();}
function nextTab(){e.preventDefault();if(index==focusableElements.length-1){focusableElements[0].focus();index=0;}else{index++;focusableElements[index].focus();}}
function prevTab(){e.preventDefault();if(index==0){focusableElements[focusableElements.length-1].focus()
index=focusableElements.length-1;}else{index--;focusableElements[index].focus();}}});$('#navdrawer').on('touchstart',function(e){e.stopPropagation();isScrolling=true;menuScrollBegin=e.originalEvent.touches[0].pageY;menuTopPosition=$(this).offset().top;});$('#navdrawer').on('touchmove',function(e){e.stopPropagation();if(isScrolling){var $this=$(this);var currentPosition=e.originalEvent.touches[0].pageY;var distance=currentPosition-menuScrollBegin;distance=distance+menuTopPosition;if(distance>=0){distance=0;}
var maxOffset=-1*($this.outerHeight()-$(window).outerHeight());if(distance<=maxOffset){distance=maxOffset;}}});$('#navdrawer').on('touchend',function(e){e.stopPropagation();isScrolling=false;});$(window).resize(function(){if($(this).outerWidth()>=992){isScrolling=false;}});}};})();MenuDrawerModule.bindUIActions();});
$(document).ready(function(){function expandableList(){var scrWidth=screen.width,mobView=768,tabView=992;$('.expandableList .widget-body').each(function(){if(scrWidth<tabView){$(this).children('.collapse-tablet').closest('.expandableList').addClass('collapse-tablet-wrapper');$('.collapse-tablet-wrapper .widget-header').click(function(){$(this).toggleClass("open");$(this).next('.widget-body').slideToggle();});}
if(scrWidth<mobView){$(this).children('.collapse-mobile').closest('.expandableList').addClass('collapse-mobile-wrapper');$('.collapse-mobile-wrapper .widget-header').click(function(){$(this).toggleClass("open");$(this).next('.widget-body').slideToggle();});}
if($(this).children('.collapse-desktop').length){$(this).closest('.expandableList').addClass('collapse-desktop-wrapper');$('.collapse-desktop-wrapper .widget-header').click(function(){$(this).toggleClass("open");$(this).next('.widget-body').slideToggle();});}});}
expandableList();});
var desktopWidth=992;var isdesktop=true;(function($){"use strict";$.fn.openSelect=function()
{return this.each(function(idx,domEl){if(document.createEvent){var event=new MouseEvent('mousedown');domEl.dispatchEvent(event);}else if(element.fireEvent){domEl.fireEvent("onmousedown");}});}}(jQuery));$(document).ready(function(){if(/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)){isdesktop=false;}
$(".js__articleTableRowToggle").on("click",function(e){e.preventDefault();$(this).closest(".cit-row").toggleClass("unfolded");$(this).children("span").toggleClass("icon-unfold-less");});$(".js__showCustomSidebar").on("click",function(){$('.right-sidebar').show();});$(".js__closeCustomSidebar").on("click",function(){$('.right-sidebar').hide();});$(".js__alertsSubscribe").on("click",function(e){e.preventDefault();$(".js__alertsBoxContainer").fadeIn();});$(".js__alertsBoxContainer").on("click",function(e){$(this).fadeOut();});$(".js__alertsBoxContainer *").on("click",function(e){e.stopPropagation();});$(".js__alertsBoxContainerClose").on("click",function(e){$(".js__alertsBoxContainer").fadeOut();});$('.showRefEvent').off("click");$('.tab-content').on("click",".showRefEvent",function(e){e.preventDefault();if(!$("#reftab").closest("li").hasClass("active")){$("li a#reftab").trigger("click");}
$('.ref-action').trigger("click");e.preventDefault();var id=$(this).data("rid");$("#reftab").trigger("mouseenter");var fv_to_show=$(".references#"+id);if(fv_to_show.length>0){if($(window).width()>desktopWidth){var scrollDistance=fv_to_show.position().top;scrollDistance=scrollDistance+$('#reftabcontent').scrollTop();$("#reftabcontent").mCustomScrollbar("scrollTo",scrollDistance);}else{var scrollDistance=fv_to_show.offset().top;$('html, body').stop().animate({scrollTop:scrollDistance-60},1000);}}});$('.further-reading-wrapper a').on("click",function(e){e.preventDefault();if(!$("#reftab").closest("li").hasClass("active")){$("li a#reftab").trigger("click");}
$('.ref-further-reading-action').trigger("click");});$('.cited-by-count-wrapper a').on("click",function(e){e.preventDefault();if(!$("#reftab").closest("li").hasClass("active")){$("li a#reftab").trigger("click");}
$('.ref-cited-by-action').trigger("click");});$(".js__UserProfileMenu").on("click",".active",function(e){e.preventDefault();$(".js__UserProfileMenu").toggleClass("open");});$(".js__UserProfileMenu .active").clone(true).addClass("mobile-header").prependTo($(".js__UserProfileMenu"));$(".js__savedQuerySort").on("click",function(e){e.preventDefault();var id=$(this).data("id");var selected=$(this).data("selected");onChangeSavedQuerySort(id,selected);});$(".js__ipTableRow").on("change","input[type='text']",function(e){$(this).closest("tr").find("input[type='checkbox']").prop("checked",true);});$(".js__feedback_subjects").on("click",function(e){$(this).toggleClass("open");});$(".js__feedback_subjects").on("click",".subject",function(e){$(this).closest(".js__feedback_subjects").find(".selected").text($(this).find("label").text());$(this).closest(".js__feedback_subjects").removeClass("open");$(".js__feedback_subjects").scrollTop(0);e.stopPropagation();});$(".responsiveQuickSearchWidget .custom-dropdown").addClass(($(".responsiveQuickSearchWidget .custom-dropdown option").length==1)?"no-options":"");$(".responsiveQuickSearchWidget .custom-dropdown").selectbox();$(document).on('click','.quickSearchFormContainer .sbSelector, .quickSearchFormContainer .sbToggle',function(){var simpleBoxWidth=0;var searchWidth=$(this).closest(".container").outerWidth();var dropdownWidth=searchWidth+simpleBoxWidth;$('.quickSearchFormContainer .sbOptions').css('width',''+dropdownWidth+'px');});$(document).on('click',function(event){var isNavigationClicked=$(event.target).closest('.navigation-login-dropdown').length;var isLoginBarClicked=$(event.target).closest('.mini-loginBar').length;if(!isNavigationClicked&&!isLoginBarClicked){if(!$(".navigation-login-dropdown-container").hasClass('hidden')){$(".navigation-login-dropdown-container").addClass('hidden');$(".indivLogin").removeClass("active");}}});$(document).on('scroll touchmove click',function(){if(!$(".navigation-login-dropdown-container").hasClass('hidden')){$(".navigation-login-dropdown-container").addClass('hidden');$(".indivLogin").removeClass("active");}
if(!$('.login-options').hasClass('hidden')){$('.login-options').addClass('hidden');$('.show-login-options').removeClass('active');}});$(document).on('click','.indivLogin',function(event){event.preventDefault();event.stopPropagation();$(this).toggleClass("active");$(".navigation-login-dropdown-container:not(.login-options)").toggleClass('hidden');if($('.search-open').is(":visible")){toggleQuickSearch();}});$(document).on('click','.show-login-options',function(event){event.preventDefault();event.stopPropagation();$(this).toggleClass('active');$('.login-options').toggleClass('hidden');if($('.search-open').is(":visible")){toggleQuickSearch();}});$(document).on('change','.section-switch-select',function(){$(this).find("option").removeClass("active");$(this).find("option[value='"+$(this).val()+"']").addClass("active");var tabId='#'+$(this).find(".active").data("section");$(tabId).addClass('active');$(tabId).closest('.tab-content').siblings().children('.tab-pane').removeClass('active');});$(".res-publication-content .publication-tabs-nav a").on("click",function(event){isMobile=$(window).width()<992;var $this=$(this);var isEmpty=$(this).hasClass("tab-has-no-content");if(!isEmpty){var allTabs=$(".res-publication-content .publication-tabs-nav li");if(!$(this).hasClass("tool_icon_tool"))
allTabs.removeClass("active");if(!isMobile){allTabs.eq(0).addClass("active");}
var id=$(this).attr("href");$(id).addClass("active");$(this).closest("li").addClass("active");if($this.is("#reftab")&&!$this.hasClass("content-loaded")&&$(this).data("service")!==undefined){$this.addClass("content-loaded");var title=$(".article .ref-heading");var content=$(".article .references");var references=$("#reftabcontent .ref-content");references.append(title);references.append(content);}else if($this.is("#figtab")&&!$this.hasClass("content-loaded")){$this.addClass("content-loaded");var figures=$("#figtabcontent");figures.append($('<div class="figuresContent"></div>'));var content=$(".figure-image-content").clone();var doi=encodeURIComponent($("meta[scheme='doi']").attr('content'));content.each(function(index){var nextIndex=index+1;var $$this=$(this);$$this.find(".holder").removeAttr("id");});figures.find(".figuresContent").append(content);$("article .figure-image-content a").attr("href","#");$this.addClass("content-loaded")}else if($(this).data("service")!==undefined&&!$this.hasClass("content-loaded")){populateTabData(this);}}
if($(window).width()>desktopWidth){var height=$(id).siblings('.left-sided').height();$(id).css('max-height',height+'px');customScroll($(id));}});var contentTab=$(".res-publication-content .publication-tabs-nav li:nth-of-type(1)");var secondTab=$(".res-publication-content .publication-tabs-nav li:nth-of-type(2)");var contentTabContent=$(".res-publication-content .publication-tabs > .tab-content > .tab-pane:first-child");var secondTabContent=$(".res-publication-content .publication-tabs > .tab-content > .tab-pane:nth-child(5)");if($(window).width()>desktopWidth){if(contentTab.hasClass("active")){contentTabContent.addClass("show-content  left-sided");secondTab.addClass("active");}}
mediaTabTrigger();$(window).resize(function(){$(".res-publication-content .publication-tabs > .tab-content > .tab-pane:visible:not(.no-scroll)").each(function(){tabFullHeight($(this));});if(isdesktop){mediaTabTrigger()}});var hasNoFigures=($("#texttabcontent").find(".figure-image-content").length<=0);if(hasNoFigures){$("#figtab").addClass("tab-has-no-content");}
$(".responsiveAccessDenialWidget").find("#reftab").addClass("tab-has-no-content");function mediaTabTrigger(){if($(window).width()>desktopWidth){if(contentTab.hasClass("active")){secondTab.find("a").trigger("click");contentTab.addClass("active");}
contentTabContent.addClass("show-content ");}};(function(){$(".responsive-footer .links-container .title").click(function(){var width=$(window).outerWidth();if(width<desktopWidth){$(this).toggleClass("open");$(this).closest(".links").find(".mobile-slider").slideToggle();}});}());(function(){var expandedTools=$(".tools_dropdown .expanded-tools");function closeTools(){$(".tools_dropdown_container").removeClass("showTools");$(".tool_icon_tool .icon-tools").removeClass("hidden");$(".tool_icon_close").addClass("hidden");$(".tools_dropdown").removeClass("showTools");expandedTools.addClass("icon-arrow_d_n");expandedTools.removeClass("icon-arrow_u_p");$(".blackBg").removeClass("overlay-fixed");return false;}
function openTools(){$(".tools_dropdown_container").addClass("showTools");$(".tool_icon_tool .icon-tools").addClass("hidden");$(".tool_icon_close").removeClass("hidden");$(".tools_dropdown").addClass("showTools");expandedTools.removeClass("icon-arrow_d_n");expandedTools.addClass("icon-arrow_u_p");if(window.innerWidth<desktopWidth){$(".blackBg").addClass("overlay-fixed");}
return false;}
$(document).on("click",".tools_dropdown",function(){var width=$(window).outerWidth();if(width>=993){if($(".tools_dropdown").hasClass("showTools")){closeTools();}else{openTools();}}});$(document).on('click touchmove',function(e){if($(".tools_dropdown").hasClass("showTools")&&!$(e.target).closest('.tools_dropdown').length||$(".tools_dropdown").hasClass("showTools")&&$(e.target).closest('.tools_dropdown').length&&$(e.target).closest('.overlay-fixed').length){closeTools();}});$(document).on('click',".tools_dropdown .tool_icon_close",function(){var width=$(window).outerWidth();if(width<993){closeTools();}});$(document).on('click','.tools_dropdown .tool_icon_tool .icon-tools',function(){var width=$(window).outerWidth();if(width<993){openTools();}});$(".tools_dropdown .blackBg").click(function(){closeTools();});$(document).scroll(function(){closeTools();});$(document).on('click',function(event){var width=$(window).outerWidth();if(width>=993){var isToolsDropdownClicked=$(event.target).closest('.tools_dropdown').length;if(!isToolsDropdownClicked){closeTools();}}});}());if(!Object.create){Object.create=function(o,properties){if(typeof o!=='object'&&typeof o!=='function')throw new TypeError('Object prototype may only be an Object: '+o);else if(o===null)throw new Error("This browser's implementation of Object.create is a shim and doesn't support 'null' as the first argument.");if(typeof properties!='undefined')throw new Error("This browser's implementation of Object.create is a shim and doesn't support a second argument.");function F(){}
F.prototype=o;return new F();};}
var NavigationDrawerModule=(function(){var mobileRangeWidth=768;var stickyAddedClass='sticky-added';var classStickyNavigationListWithDot='.sticky-navigation-list';var classStickyTitleWithDot='.fragment-navigation .widget-header';var classStickyTitleWithArrow='.fullText_jump,.figuresStickyNav';var backgroundStickyNavigationWithDot='.sticky-navigation-background';var stickyArrowUpWithDot='.sticky_icons_up';var stickyArrowDownWithDot='.sticky_icons_down';var isFixedClass='is-sticky-fixed';var globalNavigationEnabled=true;var TouchEventHandler={quartViewport:parseInt($(window).height()/24),touchstarty:0,touchmovey:0,movey:0,scrollTop:0,lastScrollTop:0,isLastScrollDown:0,touchStart:function(event){this.touchstarty=event.originalEvent.touches[0].screenY;this.touchmovey=0;},touchMove:function(event){this.touchmovey=event.originalEvent.touches[0].screenY;this.movey=this.touchmovey-this.touchstarty;},isScrollMovingUp:function(){if(this.lastScrollTop==this.scrollTop){return null;}
this.isLastScrollUp=this.lastScrollTop>this.scrollTop;this.lastScrollTop=this.scrollTop;return this.isLastScrollUp;},scrollMove:function(){this.scrollTop=$(window).scrollTop();},isTouchMovingUp:function(){if(this.movey!=undefined){var movingUp=this.touchmovey>this.touchstarty;return movingUp;}},isSwipeDetected:function(){var absMovey=Math.abs(this.movey);var isSwipeDetected=absMovey>=this.quartViewport;return isSwipeDetected;}};var ScrollingFeature={navigationMovement:null,attachEventListeners:function(){var touchEventHandler=Object.create(TouchEventHandler);var self=this;if('ontouchstart'in document.documentElement){$(document).on("touchstart",function(event){touchEventHandler.touchStart(event);});$(document).on("touchmove",function(event){touchEventHandler.touchMove(event);var movementInformation=self.createMovementInformation(touchEventHandler.isTouchMovingUp(),touchEventHandler.isSwipeDetected());if(!$(classStickyNavigationListWithDot).is(":visible")){self.navigationMovement.hideNavigationList();self.animateNavigation(movementInformation);}});$(document).scroll(function(){touchEventHandler.scrollMove();var movementInformation=self.createMovementInformation(touchEventHandler.isScrollMovingUp(),false);self.navigationMovement.hideNavigationList();self.animateNavigation(movementInformation);});}else{$(document).scroll(function(){touchEventHandler.scrollMove();var movementInformation=self.createMovementInformation(touchEventHandler.isScrollMovingUp(),true);if(!$(classStickyNavigationListWithDot).is(":visible")){self.navigationMovement.hideNavigationList();}
self.animateNavigation(movementInformation);});}},createMovementInformation:function(movingUp,isSwipeDetected){return{isSwipeDetected:isSwipeDetected,movingUp:movingUp};},animateNavigation:function(movementInformation){if(globalNavigationEnabled&&movementInformation.movingUp!==undefined){this.navigationMovement.changeNavigationPosition(movementInformation.isSwipeDetected,movementInformation.movingUp);}}};var NavigationMovement={elementForScrolling:null,fixedElement:null,isNavigationAnimating:false,stickWhenScrollingDown:null,isLastScrollDirectionUp:false,originalOffsetTop:null,positionFromBottomToDisplayDownSticky:120,setNavigationOriginal:function(){this.hideNavigationList();this.hideNavigationList();this.isNavigationAnimating=false;if(!($(".search-bg.overlay-fixed").css("display")=="block")){this.elementForScrolling.css({'visibility':'hidden','top':'-'+this.elementForScrolling.height()+'px'});}},setOriginalOffsetTop:function(){if(this.originalOffsetTop==null){this.originalOffsetTop=this.fixedElement.offset().top;}},isScrollChangedMovementDirection:function(movingUp){if(movingUp){if(!this.isLastScrollDirectionUp){this.isLastScrollDirectionUp=true;return true;}}else{if(this.isLastScrollDirectionUp){this.isLastScrollDirectionUp=false;return true;}}
return false;},changeNavigationPosition:function(isSwipeDetected,movingUp){var movingDown=!movingUp;if(this.isScrollChangedMovementDirection(movingUp)&&$(window).scrollTop()!=0){return;}
this.setOriginalOffsetTop();var scrollTop=$(window).scrollTop();var isHeaderStartedScrollingOut=scrollTop>this.originalOffsetTop+this.fixedElement.height();if(this.stickWhenScrollingDown){var isNavigationCloseToBottom=$(window).scrollTop()+$(window).height()+this.positionFromBottomToDisplayDownSticky>$('body').height();if(isNavigationCloseToBottom){this.setNavigationScrolling();return;}
if(movingUp){this.setNavigationOriginal();}else{if(isHeaderStartedScrollingOut){this.setNavigationScrolling();}}}
else{if(movingDown){this.setNavigationOriginal();}else{if(isHeaderStartedScrollingOut&&isSwipeDetected){this.setNavigationScrolling();}
if(!isHeaderStartedScrollingOut){this.setNavigationOriginal();}}}},toggleList:function(elementToToggle){if(elementToToggle.find(classStickyNavigationListWithDot).hasClass('hidden')){this.showNavigationList(elementToToggle);}else{this.hideNavigationList();if(elementToToggle.find(classStickyNavigationListWithDot).hasClass('hidden')){$(classStickyTitleWithDot).toggleClass('sticky_icons_down');$(classStickyTitleWithDot).toggleClass('sticky_icons_up');$(classStickyTitleWithArrow).find($('.sticky_icons_up')).addClass('sticky_icons_down');$(classStickyTitleWithArrow).find($('.sticky_icons_up')).removeClass('sticky_icons_up');}}},showNavigationList:function(elementToExpand){elementToExpand.find(classStickyNavigationListWithDot).removeClass('hidden');elementToExpand.find(backgroundStickyNavigationWithDot).removeClass('hidden');$(classStickyTitleWithDot).toggleClass('sticky_icons_down');$(classStickyTitleWithDot).toggleClass('sticky_icons_up');$(classStickyTitleWithArrow).find($('.sticky_icons_down')).addClass('sticky_icons_up');$(classStickyTitleWithArrow).find($('.sticky_icons_down')).removeClass('sticky_icons_down');},hideNavigationList:function(){this.elementForScrolling.find(classStickyNavigationListWithDot).addClass('hidden');this.fixedElement.find(classStickyNavigationListWithDot).addClass('hidden');this.elementForScrolling.find(backgroundStickyNavigationWithDot).addClass('hidden');this.fixedElement.find(backgroundStickyNavigationWithDot).addClass('hidden');},setNavigationScrolling:function(){var self=this;if(!this.isNavigationAnimating){this.isNavigationAnimating=true;this.elementForScrolling.css({'position':'fixed','visibility':'visible','top':'0px'});setTimeout(function(){self.isNavigationAnimating=true;},500);}},scrollToDesiredElement:function(){if(!$(event.target).closest('.fragmentList .expander').length){this.setNavigationOriginal();globalNavigationEnabled=false;}
setTimeout(function(){globalNavigationEnabled=true;},500)},initOnResize:function(){this.elementForScrolling.width(this.fixedElement.width());}};function cloneFixedElementAndAttachToDOM(fixedElement){var elementForScrolling=fixedElement.clone();elementForScrolling.css({'position':'fixed','visibility':'hidden','top':'-'+elementForScrolling.height()+'px','z-index':999});elementForScrolling.addClass(isFixedClass);fixedElement.after(elementForScrolling);return elementForScrolling;}
function attachNavigationListBehavior(fixedElement,elementForScrolling,navigationMovement){var ts=null;$(document).on('touchstart scroll',classStickyNavigationListWithDot,function(e){ts=e.originalEvent.touches[0].clientY;});$(document).on('touchmove scroll',classStickyNavigationListWithDot,function(e){var te=e.originalEvent.changedTouches[0].clientY,direction=ts>te?'down':'up';var $container=$('body');if(($(this).scrollTop()<=1&&direction=='up')||($container.scrollTop()>1&&$(this).scrollTop()+$(this).innerHeight()>=this.scrollHeight&&direction=='down')){e.preventDefault();}});$(document).on('touchmove',function(e){if(!$(e.target).closest('.sticky-widget').length&&!elementForScrolling.find(classStickyNavigationListWithDot).hasClass('hidden')){navigationMovement.toggleList(elementForScrolling);}});fixedElement.click(function(){var isListClicked=$(event.target).closest(classStickyNavigationListWithDot+" li").length;if(!isListClicked){navigationMovement.toggleList(fixedElement);}});elementForScrolling.click(function(){var isListClicked=$(event.target).closest(classStickyNavigationListWithDot+" li").length;if(!isListClicked){navigationMovement.toggleList(elementForScrolling);}});fixedElement.find(classStickyNavigationListWithDot+' a').click(function(){navigationMovement.scrollToDesiredElement();});elementForScrolling.find(classStickyNavigationListWithDot+' a').click(function(){navigationMovement.scrollToDesiredElement();});}
function attachStickinessToElement(fixedElement,stickWhenScrollingDown){if(fixedElement.hasClass(stickyAddedClass)){return;}
var elementForScrolling=cloneFixedElementAndAttachToDOM(fixedElement);fixedElement.addClass(stickyAddedClass);elementForScrolling.addClass(stickyAddedClass);var navigationMovement=Object.create(NavigationMovement);navigationMovement.stickWhenScrollingDown=stickWhenScrollingDown;navigationMovement.elementForScrolling=elementForScrolling;navigationMovement.fixedElement=fixedElement;var scrollingFeature=Object.create(ScrollingFeature);scrollingFeature.navigationMovement=navigationMovement;scrollingFeature.attachEventListeners();if(!fixedElement.hasClass('fullText_jump','tools_drop_down_sticky')){navigationMovement.initOnResize();$(window).resize(function(){navigationMovement.initOnResize();});}
attachNavigationListBehavior(fixedElement,elementForScrolling,navigationMovement);}
return{bindUIActions:function(){if(window.innerWidth<desktopWidth){var stickyAppBarMain=$('.app-bar-main');stickyAppBarMain.each(function(){attachStickinessToElement($(this),false);});var stickyQuicksUp=$('.sticky-widget.show-when-scrolling-up');stickyQuicksUp.each(function(){attachStickinessToElement($(this),false);});var stickyQuicksDown=$('.sticky-widget.show-when-scrolling-down');stickyQuicksDown.each(function(){attachStickinessToElement($(this),true);});}else{$(classStickyNavigationListWithDot).removeClass('hidden');}}};})();NavigationDrawerModule.bindUIActions();$(document).on('click','.enlarge',function(e){e.preventDefault();showFigures(this,e);});$(document).on('click','.filter-toggle',function(e){e.preventDefault();$(".newSearchFacets").addClass("full-overlay");$("body").removeClass('topToDown');if(window.innerWidth<769){$("body, html").addClass("no-scroll");}});$(document).on('click','.advanced-toggle',function(e){e.preventDefault();$("#refine-panel").toggleClass("full-overlay");$("#refine-panel").toggleClass('hidden');if(window.innerWidth<769){$("body, html").addClass("no-scroll");$("body").removeClass('topToDown');}else{$(this).toggleClass('open');}
$("#refine-panel select").selectbox();});$('.newSearchFacets').on('click','.overlay-close',function(e){e.preventDefault();$("body").addClass('closeDataRangeXs');$(this).parents().removeClass("full-overlay sub-overlay openDataRangeXs");$("#refine-panel").addClass("hidden");$("body, html").removeClass("no-scroll");});$('#refine-panel').on('click','.overlay-close',function(e){e.preventDefault();$(this).parents().removeClass("full-overlay sub-overlay");$("body").addClass('topToDown');$("#refine-panel").addClass("hidden");$("body").removeClass('closeDataRangeXs');$("body, html").removeClass("no-scroll");});$('.newSearchFacets').on('click','.overlay-close',function(e){e.preventDefault();$(this).parents().removeClass("full-overlay sub-overlay");$("body").addClass('topToDown');$("body").removeClass('closeDataRangeXs');$("body, html").removeClass("no-scroll");});$(document).on('touchmove','.full-overlay',function(e){e.stopPropagation();});$(document).on('click','.otheroverlaytrigger',function(e){e.preventDefault();$("body").removeClass('closeDataRangeXs');$(this).parent().parent().addClass("full-overlay sub-overlay openDataRangeXs");});$('.newSearchFacets').on('click','.prev-overlay',function(e){e.preventDefault();$("body").addClass('closeDataRangeXs');$(this).closest(".full-overlay").removeClass("full-overlay sub-overlay openDataRangeXs");});SearchUtil.migrateFilters();function buildImagesnavigator(){var figureCounter=0;var figureNum=1;$(".figuresContent .figure").each(function(){$(".figureNavigatorHtml").append("<li><a href=#extrafiglink-F"+figureNum+">Figure "+figureNum+"</a></li>");figureCounter++;figureNum++;});$(".figureNavigatorHtml a").click(function(){$(".figuresStickyNav .sticky-navigation-list").addClass("hidden");$(".figuresStickyNav .sticky-title").html($(this).text()+'<span class="sticky_icons_down"></span>');});}
function buildFulltext(){$(".fulltextdd").first().children("option").each(function(){if($(this).text()!="Choose"){$(".fullText_jump ul").append("<li><a href='"+this.value+"'>"+$(this).text()+"</a></li>");}});$(".fullText_jump a").click(function(){$(".fullText_jump .sticky-navigation-list").addClass("hidden");$(".fullText_jump .sticky-title").html($(this).text()+'<span class="sticky_icons_down"></span>');});}
buildFulltext();function populateTabData(clickedtab){var doitest=$(clickedtab).data("doi");var servicetest=$(clickedtab).data("service");if($(clickedtab).data("servicerequested")!==true){var data={ajax:'true',doi:doitest};jQuery.ajax({url:'/action/'+servicetest,type:'POST',data:data,success:function(data,status){$(clickedtab).attr('data-servicerequested','true')
populateData(data,servicetest,clickedtab);}});}}
function populateData(msg,serviceName,clickedtab){if(serviceName=='ajaxShowCitedBy'){$("#citedtabcontent").html(msg);if(msg!='')
$("#citedtab").removeClass("tab-has-no-content");}else{var activeTab=$(clickedtab).attr('href');$(activeTab).html(msg);if(serviceName=='ajaxShowFigures'){NavigationDrawerModule.bindUIActions();var nextIndex;var doi=encodeURIComponent($("meta[scheme='doi']").attr('content'));$(".figuresContent .holder").each(function(index){nextIndex=index+1;$(this).before("<div class='figure-actions'>"+"Figure "+
nextIndex+" .<div class='pull-right'>"+"<a href='#ref-F"+
nextIndex+"'><span class='icon icon-point-to-text'></span></a>"+"<a class='enlarge'  href='#' ><span class='icon icon-to-figure-viewer'></span></a>"+"<span class='collapse-expand-icon js__collapse_expand_icon'></span></div></div>");});}
buildImagesnavigator();}}
$('#sortBy1').selectbox();$('.searchResultOrder .sbHolder').on('click',function(e){if($('.searchResultOrder .relevancy-bg').is(':visible')){$('.searchResultOrder .relevancy-bg').remove();$('.searchResultOrder .sbSelector').removeClass('sbToggleOpen');$('.searchResultOrder .sbOptions').css('display','none');$(".sortBy_wrap").removeClass("sortBy_wrap_white");}else{var node=document.createElement("div");node.setAttribute('class','relevancy-bg');$(".searchResultOrder").append(node);$('.searchResultOrder .relevancy-bg').css('display','block');$('.searchResultOrder .sbOptions').css('display','block');$('.searchResultOrder .sbSelector').addClass('sbToggleOpen');$(".sortBy_wrap").addClass("sortBy_wrap_white");}});$(document).on('touchstart touchmove click',function(e){if(!$(e.target).closest('.searchResultOrder .sbHolder').length){$('.searchResultOrder .sbOptions').css('display','none');$('.searchResultOrder .sbSelector').removeClass('sbToggleOpen');$('.searchResultOrder .relevancy-bg').remove();$(".sortBy_wrap").removeClass("sortBy_wrap_white");}});if(window.innerWidth<desktopWidth){$(".sortBy_wrap select").selectbox();}
$(document).keyup(function(e){if(e.keyCode==27){if($('.search-open').is(":visible")){toggleQuickSearch();}
if($('.eCommerceCheckoutAddToCartWidgetExpanded').is(':visible')){$('.eCommerceCheckoutAddToCartWidgetExpanded').remove();}
if($(".js__alertsBoxContainer").is(":visible")){$(".js__alertsBoxContainer").fadeOut();}}});$(".responsive-layout").each(function(){var self=$(this);if(self.height()===1){self.addClass("lose-spot");}});$(document).on('click touchstart',function(e){$('.overlay-fixed').filter(":visible").each(function(){if($('.overlay-fixed:visible').length!=1){$(this).remove();}});if($(e.target).closest('.showMoreDetails').length){$(e.target).parent().siblings('.articleAuthorDate').show();$(e.target).siblings('.showLessDetails').show();$(e.target).hide();e.preventDefault();}
if($(e.target).closest('.showLessDetails').length){$(e.target).parent().siblings('.articleAuthorDate').hide();$(e.target).siblings('.showMoreDetails').show();$(e.target).hide();e.preventDefault();}});$(document).on('click','#email-cncl',function(){$(this).parent('.input-group').remove();});$(document).on('input','#appended-email-group input',function(){if($(this).val()){$(this).siblings('#email-sub').addClass('showInline');}
else{$(this).siblings('#email-sub').removeClass('showInline');}});$('#add-number').on('click',function(){$(this).before("<div class='input-group id='appended-number-group'><input type='text' required><span class='highlight'></span><span class='bar'></span><label>Phone number</label></div>");});$('#social-links .social-group .switch label').on('click',function(){$(this).parents('.social-group').toggleClass('active-label');});$('#institutional-bttn').on('click',function(){$(this).prev('#add-institutional').addClass('showElement');});$(document).on('click','#add-institutional',function(){$(this).after("<div class='input-group'><input type='text' required><span class='highlight'></span><span class='bar'></span><label>Institutional email</label></div><a href='#' id='add-institutional' class='add-institutional'>+ add more institutional accounts</a>");$(this).removeClass('showElement');});$(".purchaseAreaList_expanded input").keyup(function(event){var target=$(event.target);var container_ID=target.closest(".purchaseAreaList_expanded").attr("id");var allEmpty=false;var x;$("#"+container_ID+" "+"input:visible").each(function(){if($(this).val()===''){allEmpty=true;}
x=allEmpty;});if(x==true){$("#"+container_ID+" "+"button").attr('disabled','disabled');}else{$("#"+container_ID+" "+"button").removeAttr('disabled');}});$('.restoreLink').click(function(e){$('.purchaseAreaList_expand').removeClass('active');$('.purchaseAreaList_expanded').slideUp();var target=$(event.target);$('.restoreLink').attr("aria-expanded",false);target.siblings('.restorePanel').show();target.attr("aria-expanded",true);$('.restoreLink').hide();e.preventDefault();});$('.restoreBack').click(function(e){$('.restoreLink').attr("aria-expanded",false);$('.restorePanel').hide();$('.restoreLink').show();e.preventDefault();});$("img").one("load",function(){responsiveSlideShowResize();}).each(function(){if(this.complete)$(this).load();});$('.checkout-process-tab-nav a').each(function(){var anchorId=$(this).attr('href');if($(anchorId).length==0){$(this).removeAttr('href');$(this).css('opacity','0.6');}});$(".res-publication-content .publication-tabs > .tab-content > .tab-pane:not(.no-scroll)").addClass("custom-scroller");customScroller=$(".custom-scroller");$(".responsiveLiteratumPublicationContentWidget .publication-tabs-header .publication-tabs-nav li >a ").click(function(){var id=$(this).attr("href");});if(window.innerWidth>desktopWidth){(function(){var isDragging=false;var scrollY=0;var scrollBegin=0;var currentOffset=0;var scrlBarHeight=0;var scrollSizeHeight=0;var elementIndex=0;$("body").on("mousedown",".custom-scroller",function(event){isDragging=false;scrollY=$(event.target).offset().top;scrollBegin=0;currentOffset=$(event.target).position().top;scrlBarHeight=0;scrollSizeHeight=0;elementIndex=$(event.target).closest(".custom-scroller").index(".custom-scroller");customScroller=$(".custom-scroller").eq(elementIndex);if($(event.target).hasClass("dragger-bar")){isDragging=true;scrollBegin=$(event.target).offset().top;$("body").disableSelection();scrlBarHeight=customScroller.outerHeight();scrollSizeHeight=customScroller[0].scrollHeight;}});$("body").mousemove(function(event){if(isDragging){scrollY=event.pageY;if(currentOffset==""){currentOffset=0;}else{currentOffset=parseFloat(currentOffset)}
var scrollTotal=scrollY-scrollBegin+currentOffset;if(scrollTotal<0){scrollTotal=0;}
else if(scrollTotal>scrlBarHeight){}else{var scrollSum=(scrollTotal/(scrlBarHeight))*(scrollSizeHeight-customScroller.outerHeight());customScroller.scrollTop(scrollSum);}}}).mouseup(function(){isDragging=false;$("body").enableSelection();});}());}
$(".responsive-book-header .journalArchiveBackground .journalArchive").append("<span class='icon-info'></span>");$(".responsive-book-header .journalArchiveBackground .journalArchive").on("click",".icon-info",function(){$(".book-right-column").show();$(".book-right-column").css("height",$(".pageBody").outerHeight());});$(".book-right-column").on("click",".icon-tools_close",function(){$(".book-right-column").hide();});var initialScreenSize=$(window).width();resizeFunction(initialScreenSize);window.addEventListener("resize",function(){var screenWidth=$(window).width();resizeFunction(screenWidth);},false);$("article .figure-image-content a").off("click");$(".article .showFiguresEEvent").on("click",function(e){if(!$("#figtab").closest("li").hasClass("active"))
$("li a#figtab").trigger("click");e.preventDefault();var id=$(this).attr("data-attr-fig-id");setTimeout(function(){var isLoaded=$("#figtab").hasClass("content-loaded");if(isLoaded){$("#figtabcontent").trigger("mouseenter");var fv_to_show=$("#figtabcontent #extrafiglink-"+id);if($(window).width()>desktopWidth){var scrollDistance=fv_to_show.position().top;scrollDistance=scrollDistance+$('#figtabcontent').scrollTop();$("#figtabcontent").mCustomScrollbar("scrollTo",scrollDistance);}else{var scrollDistance=fv_to_show.offset().top;$('html, body').stop().animate({scrollTop:scrollDistance-60},1000);}}},500);});if(window.innerWidth>desktopWidth){var toc_right_col=$(".tocRightScroller");if(toc_right_col.length>0&&$(".pb-sidebar").length<=0){$(document).on("scroll touchstart touchmove",function(){if($(this).scrollTop()>$(".TOCWidget").offset().top){if($(".tocListWidget").outerHeight()>$(window).height()){toc_right_col.addClass("sticky");var scrollableContetnHeight=($(".pageHeader").outerHeight()+$(".pageBody").outerHeight());var panePosition=$(document).scrollTop()-
toc_right_col.offsetParent().offset().top+parseInt(toc_right_col.offsetParent().css("margin-top"),10);if(($(window).scrollTop()+$(window).height())<scrollableContetnHeight){toc_right_col.css("margin-top",panePosition+"px");tabFullHeight(toc_right_col);}else{var offestYTop=window.pageYOffset;var windowHeight=window.innerHeight;var upperRegion=windowHeight-(scrollableContetnHeight-offestYTop);var newHright=windowHeight-upperRegion;$(".tocRightScroller").css("height",newHright+"px");toc_right_col.css("margin-top",panePosition+"px");}
customScroll(toc_right_col);toc_right_col.on("scroll",function(e){$(".custom-scroll").css("top",$(this).scrollTop()+"px");$(".tab-pane:not(.no-scroll) .custom-scroll").css("bottom","auto");});}}
else{toc_right_col.removeClass("sticky");toc_right_col.find(".custom-scroll").remove();}});}
var header=$(".publication-tabs-header");if(header.length>0){if($(".custom-scroller.tab-pane:visible").length){$(".custom-scroller.tab-pane").css("left",$(".custom-scroller.tab-pane:visible").offset().left);var right=$(window).outerWidth()-$(".custom-scroller.tab-pane:visible").offset().left-$(".custom-scroller.tab-pane:visible").outerWidth();$(".custom-scroller.tab-pane").css("right",right);var stickyPoint=$(".pubcontent-header").offset().top+$(".pubcontent-header").outerHeight();var showSecondTitlePoint=$(".publicationContentTitle").offset().top+$(".publicationContentTitle").innerHeight()-60;$(window).on("scroll",function(){if(!header.hasClass("sticky")){if($(window).scrollTop()>=stickyPoint){header.addClass("sticky");}}else{if($(window).scrollTop()<stickyPoint){header.removeClass("sticky");}}
if($(this).scrollTop()>showSecondTitlePoint){$(".js__publicationTitleContainer").fadeIn();}else{$(".js__publicationTitleContainer").fadeOut();}
var scrollPercent=100*$(window).scrollTop()/($(document).height()-$(window).height());$(".ux3-progress-bar").css("width",scrollPercent+"%");if(scrollPercent>98){$(".js__publicationTitleContainer .progress-bar").addClass("ellipsis");}else{$(".js__publicationTitleContainer .progress-bar").removeClass("ellipsis");}});}}}
if(window.innerWidth<desktopWidth){var header=$(".publication-tabs-header");$(window).on("scroll",function(){if(header.length>0){var scrollPercent=100*$(window).scrollTop()/($(document).height()-$(window).height());$(".ux3-progress-bar-sm").css("width",scrollPercent+"%");}});}
if($('.static-page').length){var screenWidth=screen.width;var tabletViewportWidth=desktopWidth;var mobileViewportWidth=768;$(document).on('click',function(e){if($(e.target).closest('.expand-sections').length&&screenWidth<mobileViewportWidth){$('.static-page-right').addClass('section-active');}
if(($(e.target).closest('.static-page-right a').length||$(e.target).closest('.sections-icon-toggle').length)&&screenWidth<mobileViewportWidth){$('.static-page-right').removeClass('section-active');}});$(document).on("scroll",onScroll);$('a[href^="#"]').on('click',function(e){e.preventDefault();$(document).off("scroll");$('a.active').removeClass('active');$(this).addClass('active');var target=this.hash,menu=target;$target=$(target);if($(target).length){$('html, body').stop().animate({'scrollTop':$target.offset().top+2},500,'swing',function(){window.location.hash=target;$(document).on("scroll",onScroll);});}});}
$(document).on('input','.input-group-clearance',function(){var icon=$(this).siblings('.input-group-clearance-icon');if(!icon.length){$(this).parent().append('<span class="input-group-clearance-icon"></span>');}
$(this).on('focusout',function(){if($(this).val()==''){$(this).siblings('.input-group-clearance-icon').remove();}});});$(document).on('click','.input-group-clearance-icon',function(){$(this).siblings('input').val('').focus();});$(document).on('change','.select-group select',function(){if($(this).val()!=$(this).find('option:first-of-type').val()){$(this).addClass('black');}else{$(this).removeClass('black');}});$(document).on('input, focusout','.validate-number',function(){var phone=$(this).val();var phoneNum=phone.replace(/[^\d]/g,'');var input=$(this).parent();if(phoneNum.length>6&&phoneNum.length<11){input.prev('.error').remove();return true;}
if(!input.prev('.error').length&&$(this).val()!=''){$('<div class="error">Sorry - the phone number appears to be incorrect.</div>').insertBefore(input);}
if($(this).val()==''){input.prev('.error').remove();}});$(document).on('input, focusout','.validate-email',function(){var x=$(this).val();var atpos=x.indexOf("@");var dotpos=x.lastIndexOf(".");var input=$(this).parent();if(atpos<1||dotpos<atpos+2||dotpos+2>=x.length){if(!input.prev('.error').length){$('<div class="error">Sorry - the Email appears to be incorrect.</div>').insertBefore(input);}}else{return true;}
if($(this).val()==''){input.prev('.error').remove()
$('<div class="error">Sorry - this required field below was left empty. Please complete this field and then click "Submit" at the bottom of the page.</div>').insertBefore(input);}});$(document).on('input','.forgottenPasswordRow input[type="password"]',function(){if($(this).val()==''){$('.reset-pass-actions input[type="submit"]').removeClass('active');}else{$('.reset-pass-actions input[type="submit"]').addClass('active');}});$(document).on('change',function(){$('.input-group').each(function(){var value=$(this).find('input').val();if(value!=''){$(this).removeClass('empty');}});});$(document).on('input','.claim-number',function(){if($(this).val()!=''){$(this).parent().siblings('.popup-login-btn').addClass('blue-subb-btn');}else{$(this).parent().siblings('.popup-login-btn').removeClass('blue-subb-btn');}});var $errorMessage=$('.message.error, .error .message');$errorMessage.each(function(e){if($(this).is(':visible')){var $widget=$(this).closest('.widget');if($widget.length){$('html, body').animate({scrollTop:$widget.offset().top},0);}
return false;}});});$(window).resize(function(){responsiveSlideShowResize();});function responsiveSlideShowResize(){$('.slideshowWidget.res-slider .slidePort .slide').each(function(){if($(this).height()!=0){$(this).closest('.slidePort').css('min-height',$(this).height());}});}
function resizeFunction(width){var booksSection=$(".books-section");if(width>=500&&width<=600){booksSection.addClass("tighten");}else{booksSection.removeClass("tighten");}
if(width<=510){booksSection.addClass("shrink");}else{booksSection.removeClass("shrink");}
if(width<=470){booksSection.addClass("two-columns");}else{booksSection.removeClass("two-columns");}
if(width<=400){booksSection.addClass("lower");}else{booksSection.removeClass("lower");}}
$(document).on("click",".toc-right-column-mobile-header .js__close_btn",function(){$(this).parents(".toc-right-column").slideUp(300);});$(document).on("click",".js__icon_grid",function(){$(".toc-right-column").slideDown(300);});$(document).on("click",".confirmation-widget .close",function(){$(this).closest(".confirmation-widget").hide();});$(document).on("click",function(e){$(".rsd-collapsible.download").addClass("collapsed");});function tabFullHeight(tab){var scroller=tab;var position=scroller.offset();var positionTop=position.top-$(document).scrollTop();var windowHeight=$(window).height();var height=windowHeight-positionTop+15;var cssHeight=height+"px";if(window.innerWidth<desktopWidth){scroller.css("height","auto");}else{scroller.css("height",cssHeight);}}
(function($){function init(){var $masonGrid=$('.mason-grid .container').masonry({itemSelector:'.mason-block',columnWidth:'.mason-block',percentPosition:true,"gutter":10});$masonGrid.imagesLoaded().progress(function(){$masonGrid.masonry('layout');});}
$(document).ready(init);})(jQuery);$(document).on('input','.clearableInput',function(){if(!$(this).next('.clearableIcon').length){$(this).after($('<span class="clearableIcon"/>'));}
$(this).next('.clearableIcon').click(function(){$(this).prev('input').val('').focus();});$(this).on('focusout',function(){if($(this).val()==''){$(this).next('.clearableIcon').remove();}});});$(document).on('click','.fragmentList .expander',function(e){$(this).parents('.fragmentList').children('ul').toggle('slow');$(this).parents('.fragmentList').children('a').toggleClass('fragmentList_expand');$(this).parents('.fragmentList').children('a').toggleClass('fragmentList_collapse');return false;});$(document).on('click','.promoOffers .icon-close_thin',function(e){$(this).parent('div').remove();e.stopPropagation();});function hidePreviewLabel(){return"<span class='icon-arrow_u_p'></span>";}
function previewLabel(){return"<span class='icon-arrow_d_n'></span>";}
function customScroll(self){self.mCustomScrollbar({theme:"dark-3",alwaysShowScrollbar:1,autoExpandScrollbar:true});}
if($(window).width()<desktopWidth){$(".toc-right-column .fragmentList a").click(function(){$(".toc-right-column-mobile-header").parents(".toc-right-column").slideUp(300);});}
$.fn.classList=function(){return this[0].className.split(/\s+/);};var moved=false;var moveStart=function(container){var children=container.children("div");children.removeClass("in-left in-right out-right-right out-right-left out-left-right out-left-left");var left_col=children.first();var right_col=left_col.next("div");var next_left_col=right_col.next("div");var next_right_col=next_left_col.next("div");left_col.addClass("in-left");right_col.addClass("in-right");next_left_col.addClass("out-right-left");next_right_col.addClass("out-right-right");};var moveNext=function(container){var children=container.children("div");var left_col=children.filter(function(){return($(this).css('left')=='0px'||$(this).css('left')=='0%'||$(this).hasClass("in-left"))});left_col=left_col.first();var right_col=left_col.next("div");var next_left_col=right_col.next("div");var next_right_col=next_left_col.next("div");left_col.removeClass("in-left in-right out-right-right out-left-right out-right-left out-left-left");right_col.removeClass("in-left in-right out-right-right out-left-right out-right-left out-left-left");next_right_col.removeClass("out-right-right out-left-right out-right-left out-left-left");next_left_col.removeClass("out-right-left out-left-left out-right-right out-left-right");left_col.addClass("out-left-left");right_col.addClass("out-left-right");next_left_col.addClass("in-left");next_right_col.addClass("in-right");};var movePrev=function(container){var children=container.children("div");var left_col=children.filter(function(){return($(this).css('left')=='0px'||$(this).css('left')=='0%'||$(this).hasClass("in-left"))});left_col=left_col.first();var right_col=left_col.next("div");var next_right_col=left_col.prev("div");var next_left_col=next_right_col.prev("div");left_col.removeClass("in-left in-right out-right-right out-left-right out-right-left out-left-left");right_col.removeClass("in-left in-right out-right-right out-left-right out-right-left out-left-left");next_right_col.removeClass("out-right-right out-left-right out-right-left out-left-left");next_left_col.removeClass("out-right-left out-left-left out-right-right out-left-right");left_col.addClass("out-right-left");right_col.addClass("out-right-right");next_right_col.addClass("in-right");next_left_col.addClass("in-left");};function callBookSetAjax(doi_param,div,book_doi,chapter_doi){$(".js__container").append("<span class='ajax-loader'></span>");var data={ajax:'true',doi:doi_param};jQuery.ajax({url:'/action/showBookSetAjax',type:'POST',data:data,success:function(data,status){$(".ajax-loader").fadeOut(300,function(){populateBookSet(data,div);resizeContainer();$(".js__doi_info").attr("data-book-set-doi",doi_param);$(".mabs-list-of-abstracts-widget").removeClass("static");if(book_doi){callSingleBookAjax(book_doi,'.singleBookToc','',chapter_doi);moveNext($(".js__container"));}});}});var state={};var title='';var url='?selected='+doi_param;history.pushState(state,title,url);}
function populateBookSet(data,div){$(div).empty();$(div).html(data);if($(window).width()>768){$(".js__mabs_contents_list li.bookParts:first-child > a").trigger("click");}}
$(document).on('click','.showHide',function(e){var titleID=$(this).attr('href');var html=$(titleID).html();$(".js__mabs_contents_list a.selected").removeClass("selected");$(this).addClass("selected");$(".js__mabs_chapters_list").html(html);});function resizeContainer(){$(".mabs-content-container .js__container").css("min-height",function(){var maxHeight=-1;$(this).children().each(function(){if($(this).outerHeight()>maxHeight)
maxHeight=$(this).height();});return maxHeight;});}
function callSingleBookAjax(doi_param,div,title,chapter_doi){$(div).html("<span class='ajax-loader'></span>");var data={ajax:'true',doi:doi_param};jQuery.ajax({url:'/action/showSingleBookAjax',type:'POST',data:data,success:function(data,status){populateSingleBook(data,div,title);$(".js__doi_info").attr("data-book-doi",doi_param);var book_link=$("a[data-book-part-doi='"+doi_param+"']").first();book_link.closest("ul").prev("a").trigger("click");$(".js__mabs_chapters_list a.selected").removeClass("selected");book_link.addClass("selected");$(".js__mabs_chapters_with_header a.selected").removeClass("selected");var book_id=$(this).attr("data-book-id");$(".js__mabs_chapters_with_header ul a[data-book-id='"+book_id+"']").addClass("selected");$("a[data-book-id='"+book_id+"']").addClass("selected");var contents_list=book_link.parents("ul");var chapter_name=$(".js__mabs_contents_list a.selected").html();var html='<h3 class="chapter-name"><a href="#back"><span class="icon icon-arrow_l"></span> '+chapter_name+'</a></h3>';html+="<ul>"+contents_list.html()+"</ul>";$(".js__mabs_articles_list_container .selected-chapter").text(book_link.text());$(".js__mabs_chapters_with_header").html(html);resizeContainer();var state={};var title='';var url='?selected='+doi_param;history.pushState(state,title,url);if(chapter_doi){callAbstractAjax(chapter_doi,'.abstractChapterDisplay');if($(window).width()>768)
moveNext($(".js__container"));else{var chapter_name=$("div[data-article-doi='"+chapter_doi+"'] a").html();if($(".article-container h3.chapter-name").length==0)
$(".article-container").prepend('<h3 class="chapter-name"><a href="#back"><span class="icon icon-arrow_l"></span> '+chapter_name+'</a></h3>');else
$(".article-container h3.chapter-name").html('<a href="#back"><span class="icon icon-arrow_l"></span> '+chapter_name+'</a>');$(".mabs-articles-list-with-header, .article-container").removeClass("in-left in-right out-right-right out-left-right out-right-left out-left-left");$(".mabs-articles-list-with-header").addClass("out-left-right");$(".article-container").addClass("in-left");}}}});}
function populateSingleBook(data,div,title){$(div).empty();$('.bookTitle').html(title);$(div).html(data);}
function callAbstractAjax(doi_param,div){$(div).html("<span class='ajax-loader'></span>");var data={ajax:'true',doi:doi_param};jQuery.ajax({url:'/action/showAbstractAjax',type:'POST',data:data,success:function(data,status){populateAbstract(data,div);$(".js__doi_info").attr("data-chapter-doi",doi_param);$(".js__mabs_articles_list_container a.selected").removeClass("selected");$('.js_mabs_articles_list_wh .art_title a.selected').removeClass("selected");$("div[data-article-doi='"+doi_param+"'] a").addClass("selected");var chapter_name=$(".js__mabs_chapters_with_header a.selected").text();$(".js_mabs_articles_list_wh .chapter-name a").html('<span class="icon icon-arrow_l"></span> '+chapter_name);resizeContainer();var state={};var title='';var url='?selected='+doi_param;history.pushState(state,title,url);}});}
function populateAbstract(data,div){$(div).empty();$(div).html(data);}
$(window).load(function(){$('.static-page .row.gutterless').equalHeights();});$(window).scroll(toggleSearchCallOnScroll);function toggleSearchCallOnScroll(){if($(".search-bg.overlay-fixed:visible").length>0){toggleQuickSearch();}}
function onScroll(event){var scrollPos=$(document).scrollTop()-$('.pageHeader').height();$('.static-page-right a').each(function(){var currLink=$(this);var refElement=$(currLink.attr("href"));if(refElement.position().top<=scrollPos&&refElement.position().top+refElement.height()>scrollPos){$('.static-page-right ul li a').removeClass("active");currLink.addClass("active");}
else{currLink.removeClass("active");}});}
function showLinkTextLayer(event){var maxWidth=$(".page-body .container").first().outerWidth()-50;event.preventDefault();$("#layerDialog").dialog({dialogClass:"no-title-bar",width:maxWidth,modal:true,buttons:{Ok:function(){$(this).dialog("close");}}});};
rsdCollapsible=(function($){var collapsedClass="collapsed";var containerClass="rsd-collapsible";var bodyClass="rsd-collapsible-body";var headerClass="rsd-collapsible-header";var rsdcollapsible={include:include,initialize:initialize}
function collapse($contanier){$contanier.toggleClass(collapsedClass);_makeCollapsed($contanier);}
function _makeCollapsed($container){var $header=$container.find("."+headerClass);$header.attr("aria-expanded","false");}
function _makeExpanded($container){var $header=$container.find("."+headerClass);$header.attr("aria-expanded","true");}
function expand($contanier){$contanier.toggleClass(collapsedClass);_makeExpanded($contanier);};function include($container){var $body=$container.find("."+bodyClass);if($body.attr('id')){$container.find("."+headerClass).attr("aria-controls",$body.attr('id'));}
if($container.hasClass(collapsedClass)){_makeCollapsed($container);}else{_makeExpanded($container);}}
function initialize(){$(document).on("click",".rsd-collapsible-header",function(e){e.preventDefault();e.stopPropagation();var $header=$(e.target);var $container=$header.closest("."+containerClass);var $body=$header.siblings("."+bodyClass);$container.hasClass(collapsedClass)?expand($container):collapse($container);})
$("."+containerClass).each(function(i,container){include($(container));})}
return rsdcollapsible;})($);$(document).ready(rsdCollapsible.initialize);
var supplementaryFiles=(function($){var supplFiles={selector:".supplement-files-listing-action",init:init};function _displaySupplementaryFiles(destination,source){destination.html(source);}
function load(v){var target=$(v);var serviceUrl=target.attr('href');$.getJSON(serviceUrl,function(data){_displaySupplementaryFiles(target.parent(),data.html)});};function init(){$.each($(supplementaryFiles.selector),function(i,v){load(v);})}
return supplFiles;})($);var citedBy=(function($){var citedBy={actionSelector:".cited-by-action",contentSelector:".cited-by-content",countSelector:".cited-by-count",init:init,onClick:onClick};var failureHtml="<div>Please try again later</div>";function _display(html){if(_isValidDisplay(html)){$(citedBy.contentSelector).html(html);$(citedBy.countSelector).text("("+$(html).find('.citedByEntry').length+")");$(document).off("click",citedBy.actionSelector,onClick);}else{console.log("cited-by error: I'm sorry, I don't recognize this content as a valid cited by response",html);_display(failureHtml)}}
function _isValidDisplay(html){return $(html).hasClass("citedBySection")||html==failureHtml;}
function onClick(e){e.preventDefault();}
function init(){if($(citedBy.actionSelector).length>0){$(document).on("click",citedBy.actionSelector,onClick)}
var upperNav=$('.rsd-lower-tab-nav:not(.tab-nav)');var abstractArea=$(".hlFld-Abstract");var fullContentArea=$('.hlFld-Fulltext');if(abstractArea.length>0){upperNav.insertAfter(abstractArea);}else{upperNav.remove();}
if($(citedBy.contentSelector).length){var target=$(".ref-cited-by-action");var serviceUrl=target.attr('data-cited-by-href');$.ajax(serviceUrl).success(function(data){_display(data)}).fail(function(){_display(failureHtml)});}}
return citedBy;})($);$(document).ready(function(){supplementaryFiles.init();citedBy.init();});
$(document).ready(function(){$(".yearSlider .expander").off("click");var currentEl=$(".literatumListOfIssuesResponsiveWidget .yearSlider .decade-container.open");if(currentEl.length>0){currentEl.parent(".yearSliderInner").css("height","110px");}
$(document).on("click",".literatumListOfIssuesResponsiveWidget .yearSlider .decade-container",function(){var currentEl=$(this);$(".literatumListOfIssuesResponsiveWidget .yearSlider .decade-container.open").removeClass("open");$(".literatumListOfIssuesResponsiveWidget .yearSlider a.open").removeClass("open");$(".literatumListOfIssuesResponsiveWidget .yearContent.open").removeClass("open");currentEl.parent(".yearSliderInner").css("height","110px");currentEl.addClass("open");currentEl.find("a:first-child").trigger("click");var thisLink=currentEl;var thisLinkPosition=thisLink.offset().left;var nextButton=$(".loi-next-btn");var nextButtonPosition=nextButton.offset().left;var prevButton=$(".loi-prev-btn");var prevButtonPosition=prevButton.offset().left;if(thisLinkPosition>(nextButtonPosition-thisLink.outerWidth())){if(thisLink.hasClass("expander")){$(".yearSliderInner").animate({marginLeft:'-='+thisLink.outerWidth()+'px'});if($(this).get(0)==$(".yearSliderInner > *:last").get(0)){nextButton.addClass("inactive");}
if($(".yearSliderInner > *:first").offset().left<(prevButtonPosition+2*prevButton.outerWidth())){prevButton.removeClass("inactive");}}}else if(thisLinkPosition<(prevButtonPosition+prevButton.outerWidth())){if(thisLink.hasClass("expander")){$(".yearSliderInner").animate({marginLeft:'+='+thisLink.outerWidth()+'px'});if($(this).get(0)==$(".yearSliderInner > *:first").get(0)){prevButton.addClass("inactive");}
nextButton.removeClass("inactive");}}else{}
var yearsContainerWidth=0;var yearsContainer=$(thisLink).find('.years');var years2LvlSlider=$(thisLink).find('.years2LvlSlider');$(yearsContainer).find('.expander').each(function(){yearsContainerWidth=yearsContainerWidth+$(this).outerWidth();});var yearsWidth=$(thisLink).find('.years').width();var ContainerWidth=$(".container").width();if((yearsContainerWidth>ContainerWidth)){if($(thisLink).find(".loi-lvl2-next-btn").length<1){$(yearsContainer).append("<span class='loi-nav-btn loi-lvl2-next-btn'></span>");}
if($(thisLink).find(".loi-lvl2-prev-btn").length<1){$(yearsContainer).prepend("<span class='loi-nav-btn loi-lvl2-prev-btn'></span>");}
$(yearsContainer).css("width","100%");}
var level2NextButton=".loi-lvl2-next-btn";var level2PrevButton=".loi-lvl2-prev-btn";var screenSize=$(window).width();var shiftSize=screenSize/3;$(document).on('click','.loi-lvl2-next-btn',function(e){years2LvlSlider.animate({marginLeft:'-='+shiftSize+'px'},500,"linear",function(){var level2NextButtonPos=$(".loi-lvl2-next-btn").offset().left;var level2PrevButtonPos=$(".loi-lvl2-prev-btn").offset().left;var firstElementPos=$(thisLink).find('.expander').first().offset().left;var lastElementPos=$(thisLink).find('.expander').last().offset().left;if(lastElementPos+60<level2NextButtonPos){$('.loi-lvl2-next-btn').addClass("inactiveLvl2");}else{$('.loi-lvl2-next-btn').removeClass("inactiveLvl2");}
if(firstElementPos>=level2PrevButtonPos+40){$('.loi-lvl2-prev-btn').addClass("inactiveLvl2");}else{$('.loi-lvl2-prev-btn').removeClass("inactiveLvl2");}
return false;});e.stopPropagation();e.preventDefault();});$(document).on('click','.loi-lvl2-prev-btn',function(e){years2LvlSlider.animate({marginLeft:'+='+shiftSize+'px'},500,"linear",function(){var level2NextButtonPos=$(".loi-lvl2-next-btn").offset().left;var level2PrevButtonPos=$(".loi-lvl2-prev-btn").offset().left;var firstElementPos=$(thisLink).find('.expander').first().offset().left;var lastElementPos=$(thisLink).find('.expander').last().offset().left;if(firstElementPos>=level2PrevButtonPos+40){$('.loi-lvl2-prev-btn').addClass("inactiveLvl2");}else{$('.loi-lvl2-prev-btn').removeClass("inactiveLvl2");}
if(lastElementPos+60<level2NextButtonPos){$('.loi-lvl2-next-btn').addClass("inactiveLvl2");}else{$('.loi-lvl2-next-btn').removeClass("inactiveLvl2");}
return false;});e.stopPropagation();e.preventDefault();});});$(document).on("click",".literatumListOfIssuesResponsiveWidget .yearSlider .decade-container a",function(e){e.preventDefault();e.stopPropagation();if($(this).hasClass("expander")){e.preventDefault();}else{return null;}
$(".literatumListOfIssuesResponsiveWidget .yearSlider a").removeClass("open");$(this).addClass("open");var itemIndex=$(".literatumListOfIssuesResponsiveWidget .yearSlider .expander").index($(this));$(".literatumListOfIssuesResponsiveWidget .yearContent").removeClass("open");var year=$(this).attr("data-year");$(".literatumListOfIssuesResponsiveWidget .yearContent#"+year).addClass("open");var thisLink=$(this);var thisLinkPosition=thisLink.offset().left;var nextButton=$(".loi-next-btn");var nextButtonPosition=nextButton.offset().left;var prevButton=$(".loi-prev-btn");var prevButtonPosition=prevButton.offset().left;});(function(){var loiWidget=$(".literatumListOfIssuesResponsiveWidget .volume-list");var archiveWidget=$(".journalArchive");var transparentBG=$(".transparentBG");$(document).on("click",".journalArchive a.js__open_loi",function(e){e.preventDefault();toggleArchive();});$(document).on('click touchmove',function(e){if(loiWidget.is(':visible')&&!$(e.target).closest('.literatumListOfIssuesResponsiveWidget').length&&!$(e.target).closest('.journalArchive a').length||loiWidget.is(':visible')&&$(e.target).closest('.literatumListOfIssuesResponsiveWidget').length&&$(e.target).closest('.transparentBG').length&&!$(e.target).closest('.journalArchive a').length){toggleArchive();}});function toggleArchive(){if(loiWidget.is(":visible")){loiWidget.slideUp("linear",function(){transparentBG.fadeOut("fast");});archiveWidget.addClass("isClosed");}else{loiWidget.slideDown("linear");transparentBG.fadeIn();archiveWidget.removeClass("isClosed");var yearSliderInnerWidth=0;$(".yearSliderInner").children('.expander').each(function(){yearSliderInnerWidth=yearSliderInnerWidth+$(this).outerWidth();if(yearSliderInnerWidth<$(".container").width){$(".loi-next-btn").hide();$(".loi-prev-btn").hide();}});}
if(($(".yearSliderInner > *:last").offset().left+$(".yearSliderInner > *:last").outerWidth())<$(".loi-next-btn").offset().left){$(".loi-next-btn").addClass("inactive");}}
if($(".literatumListOfIssuesResponsiveWidget .yearSlider .expander.open").length===0){$(".literatumListOfIssuesResponsiveWidget .yearSlider .expander:first").addClass("open");$(".literatumListOfIssuesResponsiveWidget .yearContent:first").addClass("open");}
$(".literatumListOfIssuesResponsiveWidget .yearSlider .yearSliderInner > a.expander").click(function(e){e.preventDefault();e.stopPropagation();if($(this).hasClass("expander")){e.preventDefault();}else{return null;}
if($(".literatumListOfIssuesResponsiveWidget .yearSlider .decade-container.open").length>0){$(".literatumListOfIssuesResponsiveWidget .yearSlider .decade-container.open").removeClass("open");$(".yearSliderInner").css("height","auto");}
$(".literatumListOfIssuesResponsiveWidget .yearSlider a").removeClass("open");$(this).addClass("open");var itemIndex=$(".literatumListOfIssuesResponsiveWidget .yearSlider .expander").index($(this));$(".literatumListOfIssuesResponsiveWidget .yearContent").removeClass("open");$(".literatumListOfIssuesResponsiveWidget .yearContent:eq("+itemIndex+")").addClass("open");var thisLink=$(this);var thisLinkPosition=thisLink.offset().left;var nextButton=$(".loi-next-btn");var nextButtonPosition=nextButton.offset().left;var prevButton=$(".loi-prev-btn");var prevButtonPosition=prevButton.offset().left;if(thisLinkPosition>(nextButtonPosition-thisLink.outerWidth())){if(thisLink.hasClass("expander")){$(".yearSliderInner").animate({marginLeft:'-='+thisLink.outerWidth()+'px'});if($(this).get(0)==$(".yearSliderInner > *:last").get(0)){nextButton.addClass("inactive");}
if($(".yearSliderInner > *:first").offset().left<(prevButtonPosition+2*prevButton.outerWidth())){prevButton.removeClass("inactive");}}}else if(thisLinkPosition<(prevButtonPosition+prevButton.outerWidth())){if(thisLink.hasClass("expander")){$(".yearSliderInner").animate({marginLeft:'+='+thisLink.outerWidth()+'px'});if($(this).get(0)==$(".yearSliderInner > *:first").get(0)){prevButton.addClass("inactive");}
nextButton.removeClass("inactive");}}});$(".loi-prev-btn").addClass("inactive");$(".loi-prev-btn").click(function(){var margin=returnLoiSliderMargin();if(margin<0){shiftSize=$(window).width()/3;var newMargin=margin+shiftSize;if(newMargin>0){shiftSize=-1*margin;newMargin=0;}
$(".yearSliderInner").animate({marginLeft:'+='+shiftSize+'px'},500,"linear",function(){$(".loi-next-btn").removeClass("inactive");if(newMargin>=0){$(".loi-prev-btn").addClass("inactive");}});}});$(".loi-next-btn").click(function(){var yearSlider=$(".yearSliderInner");var screenSize=$(window).width();var shiftSize=screenSize/3;var nextButton=$(".loi-next-btn");var lastLink=$(".yearSliderInner > *:last");var lastLinkPosition=lastLink.offset().left;var expectedPosition=lastLinkPosition-shiftSize;var minRequiredPosition=nextButton.offset().left-lastLink.outerWidth();if(expectedPosition<minRequiredPosition){shiftSize=lastLinkPosition-minRequiredPosition;}
if(!nextButton.hasClass("inactive")){yearSlider.animate({marginLeft:'-='+shiftSize+'px'},500,"linear",function(){$(".loi-prev-btn").removeClass("inactive");if(expectedPosition<minRequiredPosition){nextButton.addClass("inactive");}});}});function returnLoiSliderMargin(){var yearSlider=$(".yearSliderInner");var margin=yearSlider.css("marginLeft");margin=margin.slice(0,-2);margin=parseInt(margin);return margin;}}());(function(){var isDown=false;var pointerPosition=0.0;var cumulativeShift=0.0;$("body").on("touchstart",function(e){isDown=checkSlider(e);var container=$(e.target).closest(".yearSliderInner");if($(e.target).closest(".years2LvlSlider").length)
container=$(e.target).closest(".years2LvlSlider");if(isDown){cumulativeShift=parseFloat(container.css("margin-left").slice(0,-2));}
pointerPosition=e.originalEvent.touches[0].pageX;}).on("touchmove",function(e){if(isDown){var container=$(e.target).closest(".yearSliderInner");var prevButton=container.find(".loi-prev-btn");var nextButton=container.find(".loi-next-btn");if($(e.target).closest(".years2LvlSlider").length){container=$(e.target).closest(".years2LvlSlider");prevButton=container.find(".loi-lvl2-prev-btn");nextButton=container.find(".loi-lvl2-next-btn");}
var shiftSize=parseFloat(e.originalEvent.touches[0].pageX)-parseFloat(pointerPosition);pointerPosition=parseFloat(e.originalEvent.touches[0].pageX);cumulativeShift=cumulativeShift+shiftSize;if(cumulativeShift>10){cumulativeShift=10;prevButton.addClass("inactive");}
var sliderSize=container[0].scrollWidth;var windowSize=$(window).width();console.log(cumulativeShift);if(cumulativeShift<(-1*sliderSize+windowSize-100)){cumulativeShift=-1*sliderSize+windowSize-100;nextButton.addClass("inactive");}else{nextButton.removeClass("inactive");}
if(cumulativeShift<0){prevButton.removeClass("inactive");}
container.css("margin-left",cumulativeShift+"px");}
var isWithinSlider=checkSlider(e);if(!isWithinSlider){isDown=false;}}).on("touchend",function(){isDown=false;});function checkSlider(e){return($(e.target).closest(".yearSliderInner").length||$(e.target).hasClass("yearSliderInner"))}}());(function(){var monthList=$(".month-list .decade-container span");monthList.click(function(){var thiss=$(this);$(".month-list .decade-container").removeClass("open");thiss.closest(".decade-container").addClass("open");thiss.closest(".decade-container").find("a").eq(0).addClass("open");var monthIndex=monthList.index(thiss);var contentList=$(".month-list .yearContent");var decadeList=$(".month-list .decade-container").eq(monthIndex).find("a.expander");console.log("decade list: "+decadeList.length);console.log("monthIndex: "+monthIndex);console.log("content list: "+contentList.length);var selectedIndex=monthIndex*decadeList.length;console.log("selectedIndex: "+selectedIndex);contentList.removeClass("open");contentList.eq(selectedIndex).addClass("open");});var decadeLinks=$(".month-list .decade-container a.expander");decadeLinks.click(function(){console.log("firing up");var thiss=$(this);thiss.closest(".decade-container").find("a.expander").removeClass("open");thiss.addClass("open");var currentMonth=thiss.closest(".decade-container");var monthIndex=$(".month-list .decade-container").index(currentMonth);var decadeList=currentMonth.find(".years .expander");var decadeIndex=decadeList.index(thiss);var selectedIndex=monthIndex*decadeList.length+decadeIndex;console.log("monthIndex"+monthIndex);console.log("decadeList"+decadeList.length);console.log("decadeIndex"+decadeIndex);console.log("selectedIndex"+selectedIndex);var contentList=$(".month-list .yearContent");contentList.removeClass("open");contentList.eq(selectedIndex).addClass("open");return false;});}());(function(){$(".literatumListOfIssuesResponsiveWidget .journalArchive a.js__open_loi").click(function(){$(".issues-scroll-display .loi-issues-scroller").each(function(){setLoiWidgetIssueScrollerWidth($(this));});function setLoiWidgetIssueScrollerWidth(scroller){var numberOfIssues=scroller.find(".row a").length;var issueWidth=86;if($(window).outerWidth()<992){issueWidth=90;}
var scrollerWidth=numberOfIssues*issueWidth;scroller.width(scrollerWidth);}});}());});/*! jQuery UI - v1.10.2 - 2013-03-14
* http://jqueryui.com
* Copyright 2013 jQuery Foundation and other contributors; Licensed MIT */
(function(t,e){var i="ui-effects-";t.effects={effect:{}},function(t,e){function i(t,e,i){var s=u[e.type]||{};return null==t?i||!e.def?null:e.def:(t=s.floor?~~t:parseFloat(t),isNaN(t)?e.def:s.mod?(t+s.mod)%s.mod:0>t?0:t>s.max?s.max:t)}function s(i){var s=l(),n=s._rgba=[];return i=i.toLowerCase(),f(h,function(t,a){var o,r=a.re.exec(i),h=r&&a.parse(r),l=a.space||"rgba";return h?(o=s[l](h),s[c[l].cache]=o[c[l].cache],n=s._rgba=o._rgba,!1):e}),n.length?("0,0,0,0"===n.join()&&t.extend(n,a.transparent),s):a[i]}function n(t,e,i){return i=(i+1)%1,1>6*i?t+6*(e-t)*i:1>2*i?e:2>3*i?t+6*(e-t)*(2/3-i):t}var a,o="backgroundColor borderBottomColor borderLeftColor borderRightColor borderTopColor color columnRuleColor outlineColor textDecorationColor textEmphasisColor",r=/^([\-+])=\s*(\d+\.?\d*)/,h=[{re:/rgba?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,parse:function(t){return[t[1],t[2],t[3],t[4]]}},{re:/rgba?\(\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,parse:function(t){return[2.55*t[1],2.55*t[2],2.55*t[3],t[4]]}},{re:/#([a-f0-9]{2})([a-f0-9]{2})([a-f0-9]{2})/,parse:function(t){return[parseInt(t[1],16),parseInt(t[2],16),parseInt(t[3],16)]}},{re:/#([a-f0-9])([a-f0-9])([a-f0-9])/,parse:function(t){return[parseInt(t[1]+t[1],16),parseInt(t[2]+t[2],16),parseInt(t[3]+t[3],16)]}},{re:/hsla?\(\s*(\d+(?:\.\d+)?)\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,space:"hsla",parse:function(t){return[t[1],t[2]/100,t[3]/100,t[4]]}}],l=t.Color=function(e,i,s,n){return new t.Color.fn.parse(e,i,s,n)},c={rgba:{props:{red:{idx:0,type:"byte"},green:{idx:1,type:"byte"},blue:{idx:2,type:"byte"}}},hsla:{props:{hue:{idx:0,type:"degrees"},saturation:{idx:1,type:"percent"},lightness:{idx:2,type:"percent"}}}},u={"byte":{floor:!0,max:255},percent:{max:1},degrees:{mod:360,floor:!0}},d=l.support={},p=t("<p>")[0],f=t.each;p.style.cssText="background-color:rgba(1,1,1,.5)",d.rgba=p.style.backgroundColor.indexOf("rgba")>-1,f(c,function(t,e){e.cache="_"+t,e.props.alpha={idx:3,type:"percent",def:1}}),l.fn=t.extend(l.prototype,{parse:function(n,o,r,h){if(n===e)return this._rgba=[null,null,null,null],this;(n.jquery||n.nodeType)&&(n=t(n).css(o),o=e);var u=this,d=t.type(n),p=this._rgba=[];return o!==e&&(n=[n,o,r,h],d="array"),"string"===d?this.parse(s(n)||a._default):"array"===d?(f(c.rgba.props,function(t,e){p[e.idx]=i(n[e.idx],e)}),this):"object"===d?(n instanceof l?f(c,function(t,e){n[e.cache]&&(u[e.cache]=n[e.cache].slice())}):f(c,function(e,s){var a=s.cache;f(s.props,function(t,e){if(!u[a]&&s.to){if("alpha"===t||null==n[t])return;u[a]=s.to(u._rgba)}u[a][e.idx]=i(n[t],e,!0)}),u[a]&&0>t.inArray(null,u[a].slice(0,3))&&(u[a][3]=1,s.from&&(u._rgba=s.from(u[a])))}),this):e},is:function(t){var i=l(t),s=!0,n=this;return f(c,function(t,a){var o,r=i[a.cache];return r&&(o=n[a.cache]||a.to&&a.to(n._rgba)||[],f(a.props,function(t,i){return null!=r[i.idx]?s=r[i.idx]===o[i.idx]:e})),s}),s},_space:function(){var t=[],e=this;return f(c,function(i,s){e[s.cache]&&t.push(i)}),t.pop()},transition:function(t,e){var s=l(t),n=s._space(),a=c[n],o=0===this.alpha()?l("transparent"):this,r=o[a.cache]||a.to(o._rgba),h=r.slice();return s=s[a.cache],f(a.props,function(t,n){var a=n.idx,o=r[a],l=s[a],c=u[n.type]||{};null!==l&&(null===o?h[a]=l:(c.mod&&(l-o>c.mod/2?o+=c.mod:o-l>c.mod/2&&(o-=c.mod)),h[a]=i((l-o)*e+o,n)))}),this[n](h)},blend:function(e){if(1===this._rgba[3])return this;var i=this._rgba.slice(),s=i.pop(),n=l(e)._rgba;return l(t.map(i,function(t,e){return(1-s)*n[e]+s*t}))},toRgbaString:function(){var e="rgba(",i=t.map(this._rgba,function(t,e){return null==t?e>2?1:0:t});return 1===i[3]&&(i.pop(),e="rgb("),e+i.join()+")"},toHslaString:function(){var e="hsla(",i=t.map(this.hsla(),function(t,e){return null==t&&(t=e>2?1:0),e&&3>e&&(t=Math.round(100*t)+"%"),t});return 1===i[3]&&(i.pop(),e="hsl("),e+i.join()+")"},toHexString:function(e){var i=this._rgba.slice(),s=i.pop();return e&&i.push(~~(255*s)),"#"+t.map(i,function(t){return t=(t||0).toString(16),1===t.length?"0"+t:t}).join("")},toString:function(){return 0===this._rgba[3]?"transparent":this.toRgbaString()}}),l.fn.parse.prototype=l.fn,c.hsla.to=function(t){if(null==t[0]||null==t[1]||null==t[2])return[null,null,null,t[3]];var e,i,s=t[0]/255,n=t[1]/255,a=t[2]/255,o=t[3],r=Math.max(s,n,a),h=Math.min(s,n,a),l=r-h,c=r+h,u=.5*c;return e=h===r?0:s===r?60*(n-a)/l+360:n===r?60*(a-s)/l+120:60*(s-n)/l+240,i=0===l?0:.5>=u?l/c:l/(2-c),[Math.round(e)%360,i,u,null==o?1:o]},c.hsla.from=function(t){if(null==t[0]||null==t[1]||null==t[2])return[null,null,null,t[3]];var e=t[0]/360,i=t[1],s=t[2],a=t[3],o=.5>=s?s*(1+i):s+i-s*i,r=2*s-o;return[Math.round(255*n(r,o,e+1/3)),Math.round(255*n(r,o,e)),Math.round(255*n(r,o,e-1/3)),a]},f(c,function(s,n){var a=n.props,o=n.cache,h=n.to,c=n.from;l.fn[s]=function(s){if(h&&!this[o]&&(this[o]=h(this._rgba)),s===e)return this[o].slice();var n,r=t.type(s),u="array"===r||"object"===r?s:arguments,d=this[o].slice();return f(a,function(t,e){var s=u["object"===r?t:e.idx];null==s&&(s=d[e.idx]),d[e.idx]=i(s,e)}),c?(n=l(c(d)),n[o]=d,n):l(d)},f(a,function(e,i){l.fn[e]||(l.fn[e]=function(n){var a,o=t.type(n),h="alpha"===e?this._hsla?"hsla":"rgba":s,l=this[h](),c=l[i.idx];return"undefined"===o?c:("function"===o&&(n=n.call(this,c),o=t.type(n)),null==n&&i.empty?this:("string"===o&&(a=r.exec(n),a&&(n=c+parseFloat(a[2])*("+"===a[1]?1:-1))),l[i.idx]=n,this[h](l)))})})}),l.hook=function(e){var i=e.split(" ");f(i,function(e,i){t.cssHooks[i]={set:function(e,n){var a,o,r="";if("transparent"!==n&&("string"!==t.type(n)||(a=s(n)))){if(n=l(a||n),!d.rgba&&1!==n._rgba[3]){for(o="backgroundColor"===i?e.parentNode:e;(""===r||"transparent"===r)&&o&&o.style;)try{r=t.css(o,"backgroundColor"),o=o.parentNode}catch(h){}n=n.blend(r&&"transparent"!==r?r:"_default")}n=n.toRgbaString()}try{e.style[i]=n}catch(h){}}},t.fx.step[i]=function(e){e.colorInit||(e.start=l(e.elem,i),e.end=l(e.end),e.colorInit=!0),t.cssHooks[i].set(e.elem,e.start.transition(e.end,e.pos))}})},l.hook(o),t.cssHooks.borderColor={expand:function(t){var e={};return f(["Top","Right","Bottom","Left"],function(i,s){e["border"+s+"Color"]=t}),e}},a=t.Color.names={aqua:"#00ffff",black:"#000000",blue:"#0000ff",fuchsia:"#ff00ff",gray:"#808080",green:"#008000",lime:"#00ff00",maroon:"#800000",navy:"#000080",olive:"#808000",purple:"#800080",red:"#ff0000",silver:"#c0c0c0",teal:"#008080",white:"#ffffff",yellow:"#ffff00",transparent:[null,null,null,0],_default:"#ffffff"}}(jQuery),function(){function i(e){var i,s,n=e.ownerDocument.defaultView?e.ownerDocument.defaultView.getComputedStyle(e,null):e.currentStyle,a={};if(n&&n.length&&n[0]&&n[n[0]])for(s=n.length;s--;)i=n[s],"string"==typeof n[i]&&(a[t.camelCase(i)]=n[i]);else for(i in n)"string"==typeof n[i]&&(a[i]=n[i]);return a}function s(e,i){var s,n,o={};for(s in i)n=i[s],e[s]!==n&&(a[s]||(t.fx.step[s]||!isNaN(parseFloat(n)))&&(o[s]=n));return o}var n=["add","remove","toggle"],a={border:1,borderBottom:1,borderColor:1,borderLeft:1,borderRight:1,borderTop:1,borderWidth:1,margin:1,padding:1};t.each(["borderLeftStyle","borderRightStyle","borderBottomStyle","borderTopStyle"],function(e,i){t.fx.step[i]=function(t){("none"!==t.end&&!t.setAttr||1===t.pos&&!t.setAttr)&&(jQuery.style(t.elem,i,t.end),t.setAttr=!0)}}),t.fn.addBack||(t.fn.addBack=function(t){return this.add(null==t?this.prevObject:this.prevObject.filter(t))}),t.effects.animateClass=function(e,a,o,r){var h=t.speed(a,o,r);return this.queue(function(){var a,o=t(this),r=o.attr("class")||"",l=h.children?o.find("*").addBack():o;l=l.map(function(){var e=t(this);return{el:e,start:i(this)}}),a=function(){t.each(n,function(t,i){e[i]&&o[i+"Class"](e[i])})},a(),l=l.map(function(){return this.end=i(this.el[0]),this.diff=s(this.start,this.end),this}),o.attr("class",r),l=l.map(function(){var e=this,i=t.Deferred(),s=t.extend({},h,{queue:!1,complete:function(){i.resolve(e)}});return this.el.animate(this.diff,s),i.promise()}),t.when.apply(t,l.get()).done(function(){a(),t.each(arguments,function(){var e=this.el;t.each(this.diff,function(t){e.css(t,"")})}),h.complete.call(o[0])})})},t.fn.extend({addClass:function(e){return function(i,s,n,a){return s?t.effects.animateClass.call(this,{add:i},s,n,a):e.apply(this,arguments)}}(t.fn.addClass),removeClass:function(e){return function(i,s,n,a){return arguments.length>1?t.effects.animateClass.call(this,{remove:i},s,n,a):e.apply(this,arguments)}}(t.fn.removeClass),toggleClass:function(i){return function(s,n,a,o,r){return"boolean"==typeof n||n===e?a?t.effects.animateClass.call(this,n?{add:s}:{remove:s},a,o,r):i.apply(this,arguments):t.effects.animateClass.call(this,{toggle:s},n,a,o)}}(t.fn.toggleClass),switchClass:function(e,i,s,n,a){return t.effects.animateClass.call(this,{add:i,remove:e},s,n,a)}})}(),function(){function s(e,i,s,n){return t.isPlainObject(e)&&(i=e,e=e.effect),e={effect:e},null==i&&(i={}),t.isFunction(i)&&(n=i,s=null,i={}),("number"==typeof i||t.fx.speeds[i])&&(n=s,s=i,i={}),t.isFunction(s)&&(n=s,s=null),i&&t.extend(e,i),s=s||i.duration,e.duration=t.fx.off?0:"number"==typeof s?s:s in t.fx.speeds?t.fx.speeds[s]:t.fx.speeds._default,e.complete=n||i.complete,e}function n(e){return!e||"number"==typeof e||t.fx.speeds[e]?!0:"string"!=typeof e||t.effects.effect[e]?t.isFunction(e)?!0:"object"!=typeof e||e.effect?!1:!0:!0}t.extend(t.effects,{version:"1.10.2",save:function(t,e){for(var s=0;e.length>s;s++)null!==e[s]&&t.data(i+e[s],t[0].style[e[s]])},restore:function(t,s){var n,a;for(a=0;s.length>a;a++)null!==s[a]&&(n=t.data(i+s[a]),n===e&&(n=""),t.css(s[a],n))},setMode:function(t,e){return"toggle"===e&&(e=t.is(":hidden")?"show":"hide"),e},getBaseline:function(t,e){var i,s;switch(t[0]){case"top":i=0;break;case"middle":i=.5;break;case"bottom":i=1;break;default:i=t[0]/e.height}switch(t[1]){case"left":s=0;break;case"center":s=.5;break;case"right":s=1;break;default:s=t[1]/e.width}return{x:s,y:i}},createWrapper:function(e){if(e.parent().is(".ui-effects-wrapper"))return e.parent();var i={width:e.outerWidth(!0),height:e.outerHeight(!0),"float":e.css("float")},s=t("<div></div>").addClass("ui-effects-wrapper").css({fontSize:"100%",background:"transparent",border:"none",margin:0,padding:0}),n={width:e.width(),height:e.height()},a=document.activeElement;try{a.id}catch(o){a=document.body}return e.wrap(s),(e[0]===a||t.contains(e[0],a))&&t(a).focus(),s=e.parent(),"static"===e.css("position")?(s.css({position:"relative"}),e.css({position:"relative"})):(t.extend(i,{position:e.css("position"),zIndex:e.css("z-index")}),t.each(["top","left","bottom","right"],function(t,s){i[s]=e.css(s),isNaN(parseInt(i[s],10))&&(i[s]="auto")}),e.css({position:"relative",top:0,left:0,right:"auto",bottom:"auto"})),e.css(n),s.css(i).show()},removeWrapper:function(e){var i=document.activeElement;return e.parent().is(".ui-effects-wrapper")&&(e.parent().replaceWith(e),(e[0]===i||t.contains(e[0],i))&&t(i).focus()),e},setTransition:function(e,i,s,n){return n=n||{},t.each(i,function(t,i){var a=e.cssUnit(i);a[0]>0&&(n[i]=a[0]*s+a[1])}),n}}),t.fn.extend({effect:function(){function e(e){function s(){t.isFunction(a)&&a.call(n[0]),t.isFunction(e)&&e()}var n=t(this),a=i.complete,r=i.mode;(n.is(":hidden")?"hide"===r:"show"===r)?(n[r](),s()):o.call(n[0],i,s)}var i=s.apply(this,arguments),n=i.mode,a=i.queue,o=t.effects.effect[i.effect];return t.fx.off||!o?n?this[n](i.duration,i.complete):this.each(function(){i.complete&&i.complete.call(this)}):a===!1?this.each(e):this.queue(a||"fx",e)},show:function(t){return function(e){if(n(e))return t.apply(this,arguments);var i=s.apply(this,arguments);return i.mode="show",this.effect.call(this,i)}}(t.fn.show),hide:function(t){return function(e){if(n(e))return t.apply(this,arguments);var i=s.apply(this,arguments);return i.mode="hide",this.effect.call(this,i)}}(t.fn.hide),toggle:function(t){return function(e){if(n(e)||"boolean"==typeof e)return t.apply(this,arguments);var i=s.apply(this,arguments);return i.mode="toggle",this.effect.call(this,i)}}(t.fn.toggle),cssUnit:function(e){var i=this.css(e),s=[];return t.each(["em","px","%","pt"],function(t,e){i.indexOf(e)>0&&(s=[parseFloat(i),e])}),s}})}(),function(){var e={};t.each(["Quad","Cubic","Quart","Quint","Expo"],function(t,i){e[i]=function(e){return Math.pow(e,t+2)}}),t.extend(e,{Sine:function(t){return 1-Math.cos(t*Math.PI/2)},Circ:function(t){return 1-Math.sqrt(1-t*t)},Elastic:function(t){return 0===t||1===t?t:-Math.pow(2,8*(t-1))*Math.sin((80*(t-1)-7.5)*Math.PI/15)},Back:function(t){return t*t*(3*t-2)},Bounce:function(t){for(var e,i=4;((e=Math.pow(2,--i))-1)/11>t;);return 1/Math.pow(4,3-i)-7.5625*Math.pow((3*e-2)/22-t,2)}}),t.each(e,function(e,i){t.easing["easeIn"+e]=i,t.easing["easeOut"+e]=function(t){return 1-i(1-t)},t.easing["easeInOut"+e]=function(t){return.5>t?i(2*t)/2:1-i(-2*t+2)/2}})}()})(jQuery);/*! jQuery UI - v1.10.2 - 2013-03-14
* http://jqueryui.com
* Copyright 2013 jQuery Foundation and other contributors; Licensed MIT */
(function(t){t.effects.effect.slide=function(e,i){var s,n=t(this),a=["position","top","bottom","left","right","width","height"],o=t.effects.setMode(n,e.mode||"show"),r="show"===o,h=e.direction||"left",l="up"===h||"down"===h?"top":"left",c="up"===h||"left"===h,u={};t.effects.save(n,a),n.show(),s=e.distance||n["top"===l?"outerHeight":"outerWidth"](!0),t.effects.createWrapper(n).css({overflow:"hidden"}),r&&n.css(l,c?isNaN(s)?"-"+s:-s:s),u[l]=(r?c?"+=":"-=":c?"-=":"+=")+s,n.animate(u,{queue:!1,duration:e.duration,easing:e.easing,complete:function(){"hide"===o&&n.hide(),t.effects.restore(n,a),t.effects.removeWrapper(n),i()}})}})(jQuery);
$(document).ready(function(e){SearchFacetsUtil.bindFacetHandlers();$(document).on('click','.newSearchFacets .facetHeader',function(){$(this).toggleClass('active');$(this).next('.facetContainer').toggleClass('active');});$(document).on('click','.newSearchFacets .searchFacetsTitle',function(){$(this).toggleClass('active');$('.newSearchFacets .facetsBody').toggleClass('active');});$(document).on('click','#filter input:checkbox',function(){var isChecked=$(this).is(':checked');var name=$(this).attr('name');var url=$(this).attr('value');if(name.indexOf('dbpub-subjects')>-1){var subject=$(this).siblings('.database-facet-subject');subject.toggleClass('hide');subject.find('.facet-val.expand').removeClass('active');$(this).siblings('.database-facet-container').removeClass('hide').addClass('hide');}else{changeCheckboxFilters(isChecked,name,url);}});if($(window).innerWidth()<=1024){$(".newSearchFacets").prepend($(".facetsFilters"));}
$(document).on('click','.showLess',function(){$(this).parents('.hiddenChildrenFacets').toggleClass('hidden');$(this).parents('.hiddenChildrenFacets').siblings('.showMore').toggleClass('hidden');});$(document).on('click','.showMore',function(){$(this).toggleClass('hidden');$(this).siblings('.hiddenChildrenFacets').toggleClass('hidden');});$(document).on("DOMSubtreeModified","#allTabsContainer",function(){adjustFacetsBodyHeight();});$(document).on('click','.ms-sel-ctn',function(){if($('.ms-res-ctn.dropdown-menu').length){$('.ms-res-ctn.dropdown-menu').css('height','300');}});SearchUtil.recoverCustomizedSearchResultDisplay();});function changeCheckboxFilters(isChecked,name,url){if(isChecked){SearchUtil.resultAjaxHandler(false,url);}else{var current_url=removeParamFromUrl(location.href,name);if(name=='access'){current_url=removeParamFromUrl(current_url,'openAccess');}
SearchUtil.resultAjaxHandler(false,current_url);}}
function removeParamFromUrl(url,param){var regex=new RegExp('&?'+param+'=([^&]$|[^&]*)','i');return url.replace(regex,'');}
function adjustFacetsBodyHeight(){var facetsBody=$('.newSearchFacets .facetsBody');var tabsContentBody=$('#allTabsContainer');if(tabsContentBody.height()>($(window).height())/2){facetsBody.css('max-height',($(window).height())-350);}
else{facetsBody.css('max-height',tabsContentBody.height()-150);}}
SearchUtil.recoverCustomizedSearchResultDisplay=function(){$("[name='dateRangeForm']").submit(function(e){SearchUtil.resultAjaxHandler($(this));e.preventDefault();});};var SearchFacetsUtil={bindFacetHandlers:function(){var facetContainer=$('.facetContainer');facetContainer.find('.facet-val.expand').off('click').on('click',SearchFacetsUtil.expandNestedFacets);facetContainer.find('.database-facet-subject').off('click').on('click',SearchFacetsUtil.expandNestedDatabaseFacets);facetContainer.off('click').on('click',SearchFacetsUtil.showMoreFacetNodesHandler);facetContainer.off('click').on('click',SearchFacetsUtil.showLessFacetNodesHandler);$('.chosen-select.facets').each(function(){var mis=$(this).magicSuggest({hideTrigger:'true',allowFreeEntries:'false',expandOnFocus:true,maxSelection:1,placeholder:$(this).data('placeholder')});$(mis).on('selectionchange',function(e,m,selection){if(selection!=undefined){SearchUtil.resultAjaxHandler(false,selection[0].id);}});})},expandNestedFacets:function(){$(this).toggleClass('active');$(this).siblings('.childrenFacets').toggleClass('hide');},expandNestedDatabaseFacets:function(){$(this).siblings('.database-facet-container').toggleClass('hide');},showMoreFacetNodesHandler:function(){$(this).siblings('.hiddenChildrenFacets').slideToggle('slow',function(){$(this).find('input').focus();$(this).find('.dropdown-menu').removeClass('ms-res-ctn-scrollable');$(this).find('.dropdown-menu').scrollintoview({duration:"1000",complete:function(){$(this).find('.dropdown-menu').addClass('ms-res-ctn-scrollable');}});});$(this).parent().find('.hiddenChildrenFacets').find('.showLess').show();$(this).hide();},showLessFacetNodesHandler:function(){$(this).closest('.hiddenChildrenFacets').slideToggle('slow');}};
var cookies={addItem:function(name,value,options){if(!utilities.hasText(value))return;options=options||{};var date=new Date();switch(typeof options.expires){case'number':date.setTime(date.getTime()+(options.expires*(1000*60*60*24)));break;case'string':case'object':date=utilities.getDate(options.expires,date);break;case'undefined':date=undefined;break;}
var expires=date?'; expires='+date.toUTCString():'';var domain=options.domain?'; domain='+options.domain:'';var path=options.path?'; path='+options.path:'';var secure=options.secure?'; secure':'';document.cookie=encodeURIComponent(name)+"="+encodeURIComponent(value)+expires+domain+path+secure;},getItem:function(name,value){if(!utilities.hasText(name))return;value=document.cookie.replace(new RegExp('(?:(?:^|.*;)\\s*'+
encodeURIComponent(name).replace(/[\-\.\+\*]/g,'\\$&')+'\\s*\\=\\s*([^;]*).*$)|^.*$'),'$1');return value?decodeURIComponent(value):value;},hasItem:function(name){if(!utilities.hasText(name))return false;return(new RegExp('(?:^|;\\s*)'+
encodeURIComponent(name).replace(/[\-\.\+\*]/g,'\\$&')
+'\\s*\\=')).test(document.cookie);},removeItem:function(name){if(!utilities.hasText(name)||!this.hasItem(name))return;var expiredDate=new Date();expiredDate.setTime(expiredDate.getTime()-1);document.cookie=encodeURIComponent(name)+"=; expires="+expiredDate.toUTCString();},list:function(){return document.cookie.split(';').map(function(x){return x.trim().split('=');}).reduce(function(accumaltor,element){accumaltor[element[0]]=element[1];return accumaltor;},{});},removeAll:function(){document.cookie.split(';').map(function(x){return x.trim().split('=');}).reduce(function(accumlator,element){cookies.removeItem(element[0]);},{});}};var utilities={hasText:function(str){return(str&&str.trim().length>0);},getDate:function(o,def){var date=new Date(o);return this.isValidDate(date)?date:def;},isValidDate:function(date){return date instanceof Date&&!isNaN(date.valueOf());}};(function($){$.extend({cookies:function(name,value,options){if(utilities.hasText(value)){cookies.addItem(name,value,options);}else{return utilities.hasText(name)?cookies.getItem(name):cookies.list();}},removeCookie:function(name){cookies.removeItem(name);},checkCookie:function(name){return cookies.hasItem(name);},clearCookies:function(){cookies.removeAll();}});}(jQuery));/*! fancyBox v2.1.5 fancyapps.com | fancyapps.com/fancybox/#license */
(function(r,G,f,v){var J=f("html"),n=f(r),p=f(G),b=f.fancybox=function(){b.open.apply(this,arguments)},I=navigator.userAgent.match(/msie/i),B=null,s=G.createTouch!==v,t=function(a){return a&&a.hasOwnProperty&&a instanceof f},q=function(a){return a&&"string"===f.type(a)},E=function(a){return q(a)&&0<a.indexOf("%")},l=function(a,d){var e=parseInt(a,10)||0;d&&E(a)&&(e*=b.getViewport()[d]/100);return Math.ceil(e)},w=function(a,b){return l(a,b)+"px"};f.extend(b,{version:"2.1.5",defaults:{padding:15,margin:20,width:800,height:600,minWidth:100,minHeight:100,maxWidth:9999,maxHeight:9999,pixelRatio:1,autoSize:!0,autoHeight:!1,autoWidth:!1,autoResize:!0,autoCenter:!s,fitToView:!0,aspectRatio:!1,topRatio:0.5,leftRatio:0.5,scrolling:"auto",wrapCSS:"",arrows:!0,closeBtn:!0,closeClick:!1,nextClick:!1,mouseWheel:!0,autoPlay:!1,playSpeed:3E3,preload:3,modal:!1,loop:!0,ajax:{dataType:"html",headers:{"X-fancyBox":!0}},iframe:{scrolling:"auto",preload:!0},swf:{wmode:"transparent",allowfullscreen:"true",allowscriptaccess:"always"},keys:{next:{13:"left",34:"up",39:"left",40:"up"},prev:{8:"right",33:"down",37:"right",38:"down"},close:[27],play:[32],toggle:[70]},direction:{next:"left",prev:"right"},scrollOutside:!0,index:0,type:null,href:null,content:null,title:null,tpl:{wrap:'<div class="fancybox-wrap" tabIndex="-1"><div class="fancybox-skin"><div class="fancybox-outer"><div class="fancybox-inner"></div></div></div></div>',image:'<img class="fancybox-image" src="{href}" alt="" />',iframe:'<iframe id="fancybox-frame{rnd}" name="fancybox-frame{rnd}" class="fancybox-iframe" frameborder="0" vspace="0" hspace="0" webkitAllowFullScreen mozallowfullscreen allowFullScreen'+
(I?' allowtransparency="true"':"")+"></iframe>",error:'<p class="fancybox-error">The requested content cannot be loaded.<br/>Please try again later.</p>',closeBtn:'<a title="Close" class="fancybox-item fancybox-close" href="javascript:;"></a>',next:'<a title="Next" class="fancybox-nav fancybox-next" href="javascript:;"><span></span></a>',prev:'<a title="Previous" class="fancybox-nav fancybox-prev" href="javascript:;"><span></span></a>'},openEffect:"fade",openSpeed:250,openEasing:"swing",openOpacity:!0,openMethod:"zoomIn",closeEffect:"fade",closeSpeed:250,closeEasing:"swing",closeOpacity:!0,closeMethod:"zoomOut",nextEffect:"elastic",nextSpeed:250,nextEasing:"swing",nextMethod:"changeIn",prevEffect:"elastic",prevSpeed:250,prevEasing:"swing",prevMethod:"changeOut",helpers:{overlay:!0,title:!0},onCancel:f.noop,beforeLoad:f.noop,afterLoad:f.noop,beforeShow:f.noop,afterShow:f.noop,beforeChange:f.noop,beforeClose:f.noop,afterClose:f.noop},group:{},opts:{},previous:null,coming:null,current:null,isActive:!1,isOpen:!1,isOpened:!1,wrap:null,skin:null,outer:null,inner:null,player:{timer:null,isActive:!1},ajaxLoad:null,imgPreload:null,transitions:{},helpers:{},open:function(a,d){if(a&&(f.isPlainObject(d)||(d={}),!1!==b.close(!0)))return f.isArray(a)||(a=t(a)?f(a).get():[a]),f.each(a,function(e,c){var k={},g,h,j,m,l;"object"===f.type(c)&&(c.nodeType&&(c=f(c)),t(c)?(k={href:c.data("fancybox-href")||c.attr("href"),title:c.data("fancybox-title")||c.attr("title"),isDom:!0,element:c},f.metadata&&f.extend(!0,k,c.metadata())):k=c);g=d.href||k.href||(q(c)?c:null);h=d.title!==v?d.title:k.title||"";m=(j=d.content||k.content)?"html":d.type||k.type;!m&&k.isDom&&(m=c.data("fancybox-type"),m||(m=(m=c.prop("class").match(/fancybox\.(\w+)/))?m[1]:null));q(g)&&(m||(b.isImage(g)?m="image":b.isSWF(g)?m="swf":"#"===g.charAt(0)?m="inline":q(c)&&(m="html",j=c)),"ajax"===m&&(l=g.split(/\s+/,2),g=l.shift(),l=l.shift()));j||("inline"===m?g?j=f(q(g)?g.replace(/.*(?=#[^\s]+$)/,""):g):k.isDom&&(j=c):"html"===m?j=g:!m&&(!g&&k.isDom)&&(m="inline",j=c));f.extend(k,{href:g,type:m,content:j,title:h,selector:l});a[e]=k}),b.opts=f.extend(!0,{},b.defaults,d),d.keys!==v&&(b.opts.keys=d.keys?f.extend({},b.defaults.keys,d.keys):!1),b.group=a,b._start(b.opts.index)},cancel:function(){var a=b.coming;a&&!1!==b.trigger("onCancel")&&(b.hideLoading(),b.ajaxLoad&&b.ajaxLoad.abort(),b.ajaxLoad=null,b.imgPreload&&(b.imgPreload.onload=b.imgPreload.onerror=null),a.wrap&&a.wrap.stop(!0,!0).trigger("onReset").remove(),b.coming=null,b.current||b._afterZoomOut(a))},close:function(a){b.cancel();!1!==b.trigger("beforeClose")&&(b.unbindEvents(),b.isActive&&(!b.isOpen||!0===a?(f(".fancybox-wrap").stop(!0).trigger("onReset").remove(),b._afterZoomOut()):(b.isOpen=b.isOpened=!1,b.isClosing=!0,f(".fancybox-item, .fancybox-nav").remove(),b.wrap.stop(!0,!0).removeClass("fancybox-opened"),b.transitions[b.current.closeMethod]())))},play:function(a){var d=function(){clearTimeout(b.player.timer)},e=function(){d();b.current&&b.player.isActive&&(b.player.timer=setTimeout(b.next,b.current.playSpeed))},c=function(){d();p.unbind(".player");b.player.isActive=!1;b.trigger("onPlayEnd")};if(!0===a||!b.player.isActive&&!1!==a){if(b.current&&(b.current.loop||b.current.index<b.group.length-1))b.player.isActive=!0,p.bind({"onCancel.player beforeClose.player":c,"onUpdate.player":e,"beforeLoad.player":d}),e(),b.trigger("onPlayStart")}else c()},next:function(a){var d=b.current;d&&(q(a)||(a=d.direction.next),b.jumpto(d.index+1,a,"next"))},prev:function(a){var d=b.current;d&&(q(a)||(a=d.direction.prev),b.jumpto(d.index-1,a,"prev"))},jumpto:function(a,d,e){var c=b.current;c&&(a=l(a),b.direction=d||c.direction[a>=c.index?"next":"prev"],b.router=e||"jumpto",c.loop&&(0>a&&(a=c.group.length+a%c.group.length),a%=c.group.length),c.group[a]!==v&&(b.cancel(),b._start(a)))},reposition:function(a,d){var e=b.current,c=e?e.wrap:null,k;c&&(k=b._getPosition(d),a&&"scroll"===a.type?(delete k.position,c.stop(!0,!0).animate(k,200)):(c.css(k),e.pos=f.extend({},e.dim,k)))},update:function(a){var d=a&&a.type,e=!d||"orientationchange"===d;e&&(clearTimeout(B),B=null);b.isOpen&&!B&&(B=setTimeout(function(){var c=b.current;c&&!b.isClosing&&(b.wrap.removeClass("fancybox-tmp"),(e||"load"===d||"resize"===d&&c.autoResize)&&b._setDimension(),"scroll"===d&&c.canShrink||b.reposition(a),b.trigger("onUpdate"),B=null)},e&&!s?0:300))},toggle:function(a){b.isOpen&&(b.current.fitToView="boolean"===f.type(a)?a:!b.current.fitToView,s&&(b.wrap.removeAttr("style").addClass("fancybox-tmp"),b.trigger("onUpdate")),b.update())},hideLoading:function(){p.unbind(".loading");f("#fancybox-loading").remove()},showLoading:function(){var a,d;b.hideLoading();a=f('<div id="fancybox-loading"><div></div></div>').click(b.cancel).appendTo("body");p.bind("keydown.loading",function(a){if(27===(a.which||a.keyCode))a.preventDefault(),b.cancel()});b.defaults.fixed||(d=b.getViewport(),a.css({position:"absolute",top:0.5*d.h+d.y,left:0.5*d.w+d.x}))},getViewport:function(){var a=b.current&&b.current.locked||!1,d={x:n.scrollLeft(),y:n.scrollTop()};a?(d.w=a[0].clientWidth,d.h=a[0].clientHeight):(d.w=s&&r.innerWidth?r.innerWidth:n.width(),d.h=s&&r.innerHeight?r.innerHeight:n.height());return d},unbindEvents:function(){b.wrap&&t(b.wrap)&&b.wrap.unbind(".fb");p.unbind(".fb");n.unbind(".fb")},bindEvents:function(){var a=b.current,d;a&&(n.bind("orientationchange.fb"+(s?"":" resize.fb")+(a.autoCenter&&!a.locked?" scroll.fb":""),b.update),(d=a.keys)&&p.bind("keydown.fb",function(e){var c=e.which||e.keyCode,k=e.target||e.srcElement;if(27===c&&b.coming)return!1;!e.ctrlKey&&(!e.altKey&&!e.shiftKey&&!e.metaKey&&(!k||!k.type&&!f(k).is("[contenteditable]")))&&f.each(d,function(d,k){if(1<a.group.length&&k[c]!==v)return b[d](k[c]),e.preventDefault(),!1;if(-1<f.inArray(c,k))return b[d](),e.preventDefault(),!1})}),f.fn.mousewheel&&a.mouseWheel&&b.wrap.bind("mousewheel.fb",function(d,c,k,g){for(var h=f(d.target||null),j=!1;h.length&&!j&&!h.is(".fancybox-skin")&&!h.is(".fancybox-wrap");)j=h[0]&&!(h[0].style.overflow&&"hidden"===h[0].style.overflow)&&(h[0].clientWidth&&h[0].scrollWidth>h[0].clientWidth||h[0].clientHeight&&h[0].scrollHeight>h[0].clientHeight),h=f(h).parent();if(0!==c&&!j&&1<b.group.length&&!a.canShrink){if(0<g||0<k)b.prev(0<g?"down":"left");else if(0>g||0>k)b.next(0>g?"up":"right");d.preventDefault()}}))},trigger:function(a,d){var e,c=d||b.coming||b.current;if(c){f.isFunction(c[a])&&(e=c[a].apply(c,Array.prototype.slice.call(arguments,1)));if(!1===e)return!1;c.helpers&&f.each(c.helpers,function(d,e){if(e&&b.helpers[d]&&f.isFunction(b.helpers[d][a]))b.helpers[d][a](f.extend(!0,{},b.helpers[d].defaults,e),c)});p.trigger(a)}},isImage:function(a){return q(a)&&a.match(/(^data:image\/.*,)|(\.(jp(e|g|eg)|gif|png|bmp|webp|svg)((\?|#).*)?$)/i)},isSWF:function(a){return q(a)&&a.match(/\.(swf)((\?|#).*)?$/i)},_start:function(a){var d={},e,c;a=l(a);e=b.group[a]||null;if(!e)return!1;d=f.extend(!0,{},b.opts,e);e=d.margin;c=d.padding;"number"===f.type(e)&&(d.margin=[e,e,e,e]);"number"===f.type(c)&&(d.padding=[c,c,c,c]);d.modal&&f.extend(!0,d,{closeBtn:!1,closeClick:!1,nextClick:!1,arrows:!1,mouseWheel:!1,keys:null,helpers:{overlay:{closeClick:!1}}});d.autoSize&&(d.autoWidth=d.autoHeight=!0);"auto"===d.width&&(d.autoWidth=!0);"auto"===d.height&&(d.autoHeight=!0);d.group=b.group;d.index=a;b.coming=d;if(!1===b.trigger("beforeLoad"))b.coming=null;else{c=d.type;e=d.href;if(!c)return b.coming=null,b.current&&b.router&&"jumpto"!==b.router?(b.current.index=a,b[b.router](b.direction)):!1;b.isActive=!0;if("image"===c||"swf"===c)d.autoHeight=d.autoWidth=!1,d.scrolling="visible";"image"===c&&(d.aspectRatio=!0);"iframe"===c&&s&&(d.scrolling="scroll");d.wrap=f(d.tpl.wrap).addClass("fancybox-"+(s?"mobile":"desktop")+" fancybox-type-"+c+" fancybox-tmp "+d.wrapCSS).appendTo(d.parent||"body");f.extend(d,{skin:f(".fancybox-skin",d.wrap),outer:f(".fancybox-outer",d.wrap),inner:f(".fancybox-inner",d.wrap)});f.each(["Top","Right","Bottom","Left"],function(a,b){d.skin.css("padding"+b,w(d.padding[a]))});b.trigger("onReady");if("inline"===c||"html"===c){if(!d.content||!d.content.length)return b._error("content")}else if(!e)return b._error("href");"image"===c?b._loadImage():"ajax"===c?b._loadAjax():"iframe"===c?b._loadIframe():b._afterLoad()}},_error:function(a){f.extend(b.coming,{type:"html",autoWidth:!0,autoHeight:!0,minWidth:0,minHeight:0,scrolling:"no",hasError:a,content:b.coming.tpl.error});b._afterLoad()},_loadImage:function(){var a=b.imgPreload=new Image;a.onload=function(){this.onload=this.onerror=null;b.coming.width=this.width/b.opts.pixelRatio;b.coming.height=this.height/b.opts.pixelRatio;b._afterLoad()};a.onerror=function(){this.onload=this.onerror=null;b._error("image")};a.src=b.coming.href;!0!==a.complete&&b.showLoading()},_loadAjax:function(){var a=b.coming;b.showLoading();b.ajaxLoad=f.ajax(f.extend({},a.ajax,{url:a.href,error:function(a,e){b.coming&&"abort"!==e?b._error("ajax",a):b.hideLoading()},success:function(d,e){"success"===e&&(a.content=d,b._afterLoad())}}))},_loadIframe:function(){var a=b.coming,d=f(a.tpl.iframe.replace(/\{rnd\}/g,(new Date).getTime())).attr("scrolling",s?"auto":a.iframe.scrolling).attr("src",a.href);f(a.wrap).bind("onReset",function(){try{f(this).find("iframe").hide().attr("src","//about:blank").end().empty()}catch(a){}});a.iframe.preload&&(b.showLoading(),d.one("load",function(){f(this).data("ready",1);s||f(this).bind("load.fb",b.update);f(this).parents(".fancybox-wrap").width("100%").removeClass("fancybox-tmp").show();b._afterLoad()}));a.content=d.appendTo(a.inner);a.iframe.preload||b._afterLoad()},_preloadImages:function(){var a=b.group,d=b.current,e=a.length,c=d.preload?Math.min(d.preload,e-1):0,f,g;for(g=1;g<=c;g+=1)f=a[(d.index+g)%e],"image"===f.type&&f.href&&((new Image).src=f.href)},_afterLoad:function(){var a=b.coming,d=b.current,e,c,k,g,h;b.hideLoading();if(a&&!1!==b.isActive)if(!1===b.trigger("afterLoad",a,d))a.wrap.stop(!0).trigger("onReset").remove(),b.coming=null;else{d&&(b.trigger("beforeChange",d),d.wrap.stop(!0).removeClass("fancybox-opened").find(".fancybox-item, .fancybox-nav").remove());b.unbindEvents();e=a.content;c=a.type;k=a.scrolling;f.extend(b,{wrap:a.wrap,skin:a.skin,outer:a.outer,inner:a.inner,current:a,previous:d});g=a.href;switch(c){case"inline":case"ajax":case"html":a.selector?e=f("<div>").html(e).find(a.selector):t(e)&&(e.data("fancybox-placeholder")||e.data("fancybox-placeholder",f('<div class="fancybox-placeholder"></div>').insertAfter(e).hide()),e=e.show().detach(),a.wrap.bind("onReset",function(){f(this).find(e).length&&e.hide().replaceAll(e.data("fancybox-placeholder")).data("fancybox-placeholder",!1)}));break;case"image":e=a.tpl.image.replace("{href}",g);break;case"swf":e='<object id="fancybox-swf" classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" width="100%" height="100%"><param name="movie" value="'+g+'"></param>',h="",f.each(a.swf,function(a,b){e+='<param name="'+a+'" value="'+b+'"></param>';h+=" "+a+'="'+b+'"'}),e+='<embed src="'+g+'" type="application/x-shockwave-flash" width="100%" height="100%"'+h+"></embed></object>"}(!t(e)||!e.parent().is(a.inner))&&a.inner.append(e);b.trigger("beforeShow");a.inner.css("overflow","yes"===k?"scroll":"no"===k?"hidden":k);b._setDimension();b.reposition();b.isOpen=!1;b.coming=null;b.bindEvents();if(b.isOpened){if(d.prevMethod)b.transitions[d.prevMethod]()}else f(".fancybox-wrap").not(a.wrap).stop(!0).trigger("onReset").remove();b.transitions[b.isOpened?a.nextMethod:a.openMethod]();b._preloadImages()}},_setDimension:function(){var a=b.getViewport(),d=0,e=!1,c=!1,e=b.wrap,k=b.skin,g=b.inner,h=b.current,c=h.width,j=h.height,m=h.minWidth,u=h.minHeight,n=h.maxWidth,p=h.maxHeight,s=h.scrolling,q=h.scrollOutside?h.scrollbarWidth:0,x=h.margin,y=l(x[1]+x[3]),r=l(x[0]+x[2]),v,z,t,C,A,F,B,D,H;e.add(k).add(g).width("auto").height("auto").removeClass("fancybox-tmp");x=l(k.outerWidth(!0)-k.width());v=l(k.outerHeight(!0)-k.height());z=y+x;t=r+v;C=E(c)?(a.w-z)*l(c)/100:c;A=E(j)?(a.h-t)*l(j)/100:j;if("iframe"===h.type){if(H=h.content,h.autoHeight&&1===H.data("ready"))try{H[0].contentWindow.document.location&&(g.width(C).height(9999),F=H.contents().find("body"),q&&F.css("overflow-x","hidden"),A=F.outerHeight(!0))}catch(G){}}else if(h.autoWidth||h.autoHeight)g.addClass("fancybox-tmp"),h.autoWidth||g.width(C),h.autoHeight||g.height(A),h.autoWidth&&(C=g.width()),h.autoHeight&&(A=g.height()),g.removeClass("fancybox-tmp");c=l(C);j=l(A);D=C/A;m=l(E(m)?l(m,"w")-z:m);n=l(E(n)?l(n,"w")-z:n);u=l(E(u)?l(u,"h")-t:u);p=l(E(p)?l(p,"h")-t:p);F=n;B=p;h.fitToView&&(n=Math.min(a.w-z,n),p=Math.min(a.h-t,p));z=a.w-y;r=a.h-r;h.aspectRatio?(c>n&&(c=n,j=l(c/D)),j>p&&(j=p,c=l(j*D)),c<m&&(c=m,j=l(c/D)),j<u&&(j=u,c=l(j*D))):(c=Math.max(m,Math.min(c,n)),h.autoHeight&&"iframe"!==h.type&&(g.width(c),j=g.height()),j=Math.max(u,Math.min(j,p)));if(h.fitToView)if(g.width(c).height(j),e.width(c+x),a=e.width(),y=e.height(),h.aspectRatio)for(;(a>z||y>r)&&(c>m&&j>u)&&!(19<d++);)j=Math.max(u,Math.min(p,j-10)),c=l(j*D),c<m&&(c=m,j=l(c/D)),c>n&&(c=n,j=l(c/D)),g.width(c).height(j),e.width(c+x),a=e.width(),y=e.height();else c=Math.max(m,Math.min(c,c-(a-z))),j=Math.max(u,Math.min(j,j-(y-r)));q&&("auto"===s&&j<A&&c+x+q<z)&&(c+=q);g.width(c).height(j);e.width(c+x);a=e.width();y=e.height();e=(a>z||y>r)&&c>m&&j>u;c=h.aspectRatio?c<F&&j<B&&c<C&&j<A:(c<F||j<B)&&(c<C||j<A);f.extend(h,{dim:{width:w(a),height:w(y)},origWidth:C,origHeight:A,canShrink:e,canExpand:c,wPadding:x,hPadding:v,wrapSpace:y-k.outerHeight(!0),skinSpace:k.height()-j});!H&&(h.autoHeight&&j>u&&j<p&&!c)&&g.height("auto")},_getPosition:function(a){var d=b.current,e=b.getViewport(),c=d.margin,f=b.wrap.width()+c[1]+c[3],g=b.wrap.height()+c[0]+c[2],c={position:"absolute",top:c[0],left:c[3]};d.autoCenter&&d.fixed&&!a&&g<=e.h&&f<=e.w?c.position="fixed":d.locked||(c.top+=e.y,c.left+=e.x);c.top=w(Math.max(c.top,c.top+(e.h-g)*d.topRatio));c.left=w(Math.max(c.left,c.left+(e.w-f)*d.leftRatio));return c},_afterZoomIn:function(){var a=b.current;a&&(b.isOpen=b.isOpened=!0,b.wrap.css("overflow","visible").addClass("fancybox-opened"),b.update(),(a.closeClick||a.nextClick&&1<b.group.length)&&b.inner.css("cursor","pointer").bind("click.fb",function(d){!f(d.target).is("a")&&!f(d.target).parent().is("a")&&(d.preventDefault(),b[a.closeClick?"close":"next"]())}),a.closeBtn&&f(a.tpl.closeBtn).appendTo(b.skin).bind("click.fb",function(a){a.preventDefault();b.close()}),a.arrows&&1<b.group.length&&((a.loop||0<a.index)&&f(a.tpl.prev).appendTo(b.outer).bind("click.fb",b.prev),(a.loop||a.index<b.group.length-1)&&f(a.tpl.next).appendTo(b.outer).bind("click.fb",b.next)),b.trigger("afterShow"),!a.loop&&a.index===a.group.length-1?b.play(!1):b.opts.autoPlay&&!b.player.isActive&&(b.opts.autoPlay=!1,b.play()))},_afterZoomOut:function(a){a=a||b.current;f(".fancybox-wrap").trigger("onReset").remove();f.extend(b,{group:{},opts:{},router:!1,current:null,isActive:!1,isOpened:!1,isOpen:!1,isClosing:!1,wrap:null,skin:null,outer:null,inner:null});b.trigger("afterClose",a)}});b.transitions={getOrigPosition:function(){var a=b.current,d=a.element,e=a.orig,c={},f=50,g=50,h=a.hPadding,j=a.wPadding,m=b.getViewport();!e&&(a.isDom&&d.is(":visible"))&&(e=d.find("img:first"),e.length||(e=d));t(e)?(c=e.offset(),e.is("img")&&(f=e.outerWidth(),g=e.outerHeight())):(c.top=m.y+(m.h-g)*a.topRatio,c.left=m.x+(m.w-f)*a.leftRatio);if("fixed"===b.wrap.css("position")||a.locked)c.top-=m.y,c.left-=m.x;return c={top:w(c.top-h*a.topRatio),left:w(c.left-j*a.leftRatio),width:w(f+j),height:w(g+h)}},step:function(a,d){var e,c,f=d.prop;c=b.current;var g=c.wrapSpace,h=c.skinSpace;if("width"===f||"height"===f)e=d.end===d.start?1:(a-d.start)/(d.end-d.start),b.isClosing&&(e=1-e),c="width"===f?c.wPadding:c.hPadding,c=a-c,b.skin[f](l("width"===f?c:c-g*e)),b.inner[f](l("width"===f?c:c-g*e-h*e))},zoomIn:function(){var a=b.current,d=a.pos,e=a.openEffect,c="elastic"===e,k=f.extend({opacity:1},d);delete k.position;c?(d=this.getOrigPosition(),a.openOpacity&&(d.opacity=0.1)):"fade"===e&&(d.opacity=0.1);b.wrap.css(d).animate(k,{duration:"none"===e?0:a.openSpeed,easing:a.openEasing,step:c?this.step:null,complete:b._afterZoomIn})},zoomOut:function(){var a=b.current,d=a.closeEffect,e="elastic"===d,c={opacity:0.1};e&&(c=this.getOrigPosition(),a.closeOpacity&&(c.opacity=0.1));b.wrap.animate(c,{duration:"none"===d?0:a.closeSpeed,easing:a.closeEasing,step:e?this.step:null,complete:b._afterZoomOut})},changeIn:function(){var a=b.current,d=a.nextEffect,e=a.pos,c={opacity:1},f=b.direction,g;e.opacity=0.1;"elastic"===d&&(g="down"===f||"up"===f?"top":"left","down"===f||"right"===f?(e[g]=w(l(e[g])-200),c[g]="+=200px"):(e[g]=w(l(e[g])+200),c[g]="-=200px"));"none"===d?b._afterZoomIn():b.wrap.css(e).animate(c,{duration:a.nextSpeed,easing:a.nextEasing,complete:b._afterZoomIn})},changeOut:function(){var a=b.previous,d=a.prevEffect,e={opacity:0.1},c=b.direction;"elastic"===d&&(e["down"===c||"up"===c?"top":"left"]=("up"===c||"left"===c?"-":"+")+"=200px");a.wrap.animate(e,{duration:"none"===d?0:a.prevSpeed,easing:a.prevEasing,complete:function(){f(this).trigger("onReset").remove()}})}};b.helpers.overlay={defaults:{closeClick:!0,speedOut:200,showEarly:!0,css:{},locked:!s,fixed:!0},overlay:null,fixed:!1,el:f("html"),create:function(a){a=f.extend({},this.defaults,a);this.overlay&&this.close();this.overlay=f('<div class="fancybox-overlay"></div>').appendTo(b.coming?b.coming.parent:a.parent);this.fixed=!1;a.fixed&&b.defaults.fixed&&(this.overlay.addClass("fancybox-overlay-fixed"),this.fixed=!0)},open:function(a){var d=this;a=f.extend({},this.defaults,a);this.overlay?this.overlay.unbind(".overlay").width("auto").height("auto"):this.create(a);this.fixed||(n.bind("resize.overlay",f.proxy(this.update,this)),this.update());a.closeClick&&this.overlay.bind("click.overlay",function(a){if(f(a.target).hasClass("fancybox-overlay"))return b.isActive?b.close():d.close(),!1});this.overlay.css(a.css).show()},close:function(){var a,b;n.unbind("resize.overlay");this.el.hasClass("fancybox-lock")&&(f(".fancybox-margin").removeClass("fancybox-margin"),a=n.scrollTop(),b=n.scrollLeft(),this.el.removeClass("fancybox-lock"),n.scrollTop(a).scrollLeft(b));f(".fancybox-overlay").remove().hide();f.extend(this,{overlay:null,fixed:!1})},update:function(){var a="100%",b;this.overlay.width(a).height("100%");I?(b=Math.max(G.documentElement.offsetWidth,G.body.offsetWidth),p.width()>b&&(a=p.width())):p.width()>n.width()&&(a=p.width());this.overlay.width(a).height(p.height())},onReady:function(a,b){var e=this.overlay;f(".fancybox-overlay").stop(!0,!0);e||this.create(a);a.locked&&(this.fixed&&b.fixed)&&(e||(this.margin=p.height()>n.height()?f("html").css("margin-right").replace("px",""):!1),b.locked=this.overlay.append(b.wrap),b.fixed=!1);!0===a.showEarly&&this.beforeShow.apply(this,arguments)},beforeShow:function(a,b){var e,c;b.locked&&(!1!==this.margin&&(f("*").filter(function(){return"fixed"===f(this).css("position")&&!f(this).hasClass("fancybox-overlay")&&!f(this).hasClass("fancybox-wrap")}).addClass("fancybox-margin"),this.el.addClass("fancybox-margin")),e=n.scrollTop(),c=n.scrollLeft(),this.el.addClass("fancybox-lock"),n.scrollTop(e).scrollLeft(c));this.open(a)},onUpdate:function(){this.fixed||this.update()},afterClose:function(a){this.overlay&&!b.coming&&this.overlay.fadeOut(a.speedOut,f.proxy(this.close,this))}};b.helpers.title={defaults:{type:"float",position:"bottom"},beforeShow:function(a){var d=b.current,e=d.title,c=a.type;f.isFunction(e)&&(e=e.call(d.element,d));if(q(e)&&""!==f.trim(e)){d=f('<div class="fancybox-title fancybox-title-'+c+'-wrap">'+e+"</div>");switch(c){case"inside":c=b.skin;break;case"outside":c=b.wrap;break;case"over":c=b.inner;break;default:c=b.skin,d.appendTo("body"),I&&d.width(d.width()),d.wrapInner('<span class="child"></span>'),b.current.margin[2]+=Math.abs(l(d.css("margin-bottom")))}d["top"===a.position?"prependTo":"appendTo"](c)}}};f.fn.fancybox=function(a){var d,e=f(this),c=this.selector||"",k=function(g){var h=f(this).blur(),j=d,k,l;!g.ctrlKey&&(!g.altKey&&!g.shiftKey&&!g.metaKey)&&!h.is(".fancybox-wrap")&&(k=a.groupAttr||"data-fancybox-group",l=h.attr(k),l||(k="rel",l=h.get(0)[k]),l&&(""!==l&&"nofollow"!==l)&&(h=c.length?f(c):e,h=h.filter("["+k+'="'+l+'"]'),j=h.index(this)),a.index=j,!1!==b.open(h,a)&&g.preventDefault())};a=a||{};d=a.index||0;!c||!1===a.live?e.unbind("click.fb-start").bind("click.fb-start",k):p.undelegate(c,"click.fb-start").delegate(c+":not('.fancybox-item, .fancybox-nav')","click.fb-start",k);this.filter("[data-fancybox-start=1]").trigger("click");return this};p.ready(function(){var a,d;f.scrollbarWidth===v&&(f.scrollbarWidth=function(){var a=f('<div style="width:50px;height:50px;overflow:auto"><div/></div>').appendTo("body"),b=a.children(),b=b.innerWidth()-b.height(99).innerWidth();a.remove();return b});if(f.support.fixedPosition===v){a=f.support;d=f('<div style="position:fixed;top:20px;"></div>').appendTo("body");var e=20===d[0].offsetTop||15===d[0].offsetTop;d.remove();a.fixedPosition=e}f.extend(b.defaults,{scrollbarWidth:f.scrollbarWidth(),fixed:f.support.fixedPosition,parent:f("body")});a=f(r).width();J.addClass("fancybox-lock-test");d=f(r).width();J.removeClass("fancybox-lock-test");f("<style type='text/css'>.fancybox-margin{margin-right:"+(d-a)+"px;}</style>").appendTo("head")})})(window,document,jQuery);/*!
 * jQuery UI Progressbar 1.11.4
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * http://api.jqueryui.com/progressbar/
 */
(function($){var progressbar=$.widget("ui.progressbar",{version:"1.11.4",options:{max:100,value:0,change:null,complete:null},min:0,_create:function(){this.oldValue=this.options.value=this._constrainedValue();this.element.addClass("ui-progressbar ui-widget ui-widget-content ui-corner-all").attr({role:"progressbar","aria-valuemin":this.min});this.valueDiv=$("<div class='ui-progressbar-value ui-widget-header ui-corner-left'></div>").appendTo(this.element);this._refreshValue();},_destroy:function(){this.element.removeClass("ui-progressbar ui-widget ui-widget-content ui-corner-all").removeAttr("role").removeAttr("aria-valuemin").removeAttr("aria-valuemax").removeAttr("aria-valuenow");this.valueDiv.remove();},value:function(newValue){if(newValue===undefined){return this.options.value;}
this.options.value=this._constrainedValue(newValue);this._refreshValue();},_constrainedValue:function(newValue){if(newValue===undefined){newValue=this.options.value;}
this.indeterminate=newValue===false;if(typeof newValue!=="number"){newValue=0;}
return this.indeterminate?false:Math.min(this.options.max,Math.max(this.min,newValue));},_setOptions:function(options){var value=options.value;delete options.value;this._super(options);this.options.value=this._constrainedValue(value);this._refreshValue();},_setOption:function(key,value){if(key==="max"){value=Math.max(this.min,value);}
if(key==="disabled"){this.element.toggleClass("ui-state-disabled",!!value).attr("aria-disabled",value);}
this._super(key,value);},_percentage:function(){return this.indeterminate?100:100*(this.options.value-this.min)/(this.options.max-this.min);},_refreshValue:function(){var value=this.options.value,percentage=this._percentage();this.valueDiv.toggle(this.indeterminate||value>this.min).toggleClass("ui-corner-right",value===this.options.max).width(percentage.toFixed(0)+"%");this.element.toggleClass("ui-progressbar-indeterminate",this.indeterminate);if(this.indeterminate){this.element.removeAttr("aria-valuenow");if(!this.overlayDiv){this.overlayDiv=$("<div class='ui-progressbar-overlay'></div>").appendTo(this.valueDiv);}}else{this.element.attr({"aria-valuemax":this.options.max,"aria-valuenow":value});if(this.overlayDiv){this.overlayDiv.remove();this.overlayDiv=null;}}
if(this.oldValue!==value){this.oldValue=value;this._trigger("change");}
if(value===this.options.max){this._trigger("complete");}}});})(jQuery);!function(t,i){"use strict";if(!i)throw new Error("Filterizr requires jQuery to work.");var r=function(t){this.init(t)};r.prototype={init:function(t){this.root={x:0,y:0,w:t}},fit:function(t){var i,r,e,n=t.length,o=n>0?t[0].h:0;for(this.root.h=o,i=0;n>i;i++)e=t[i],(r=this.findNode(this.root,e.w,e.h))?e.fit=this.splitNode(r,e.w,e.h):e.fit=this.growDown(e.w,e.h)},findNode:function(t,i,r){return t.used?this.findNode(t.right,i,r)||this.findNode(t.down,i,r):i<=t.w&&r<=t.h?t:null},splitNode:function(t,i,r){return t.used=!0,t.down={x:t.x,y:t.y+r,w:t.w,h:t.h-r},t.right={x:t.x+i,y:t.y,w:t.w-i,h:r},t},growDown:function(t,i){var r;return this.root={used:!0,x:0,y:0,w:this.root.w,h:this.root.h+i,down:{x:0,y:this.root.h,w:this.root.w,h:i},right:this.root},(r=this.findNode(this.root,t,i))?this.splitNode(r,t,i):null}},i.fn.filterizr=function(){var t=this,r=arguments;if(t._fltr||(t._fltr=i.fn.filterizr.prototype.init(t.selector,"object"==typeof r[0]?r[0]:void 0)),"string"==typeof r[0]){if(r[0].lastIndexOf("_")>-1)throw new Error("Filterizr error: You cannot call private methods");if("function"!=typeof t._fltr[r[0]])throw new Error("Filterizr error: There is no such function");t._fltr[r[0]](r[1],r[2])}return t},i.fn.filterizr.prototype={init:function(t,r){var e=i(t).extend(i.fn.filterizr.prototype);return e.options={animationDuration:.5,callbacks:{onFilteringStart:function(){},onFilteringEnd:function(){},onShufflingStart:function(){},onShufflingEnd:function(){},onSortingStart:function(){},onSortingEnd:function(){}},delay:0,delayMode:"progressive",easing:"ease-out",filter:"all",filterOutCss:{opacity:0,transform:"scale(0.5)"},filterInCss:{opacity:1,transform:"scale(1)"},layout:"sameSize",selector:"string"==typeof t?t:".filtr-container",setupControls:!0},0===arguments.length&&(t=e.options.selector,r=e.options),1===arguments.length&&"object"==typeof arguments[0]&&(r=arguments[0]),r&&e.setOptions(r),e.css({padding:0,position:"relative"}),e._lastCategory=0,e._isAnimating=!1,e._isShuffling=!1,e._isSorting=!1,e._mainArray=e._getFiltrItems(),e._subArrays=e._makeSubarrays(),e._activeArray=e._getCollectionByFilter(e.options.filter),e._toggledCategories={},e._typedText=i("input[data-search]").val()||"",e._uID="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){var i=16*Math.random()|0,r="x"==t?i:3&i|8;return r.toString(16)}),e._setupEvents(),e.options.setupControls&&e._setupControls(),e.filter(e.options.filter),e},filter:function(t){var i=this,r=i._getCollectionByFilter(t);i.options.filter=t,i.trigger("filteringStart"),i._handleFiltering(r),i._isSearchActivated()&&i.search(i._typedText)},toggleFilter:function(t){var i=this,r=[];i.trigger("filteringStart"),t&&(i._toggledCategories[t]?delete i._toggledCategories[t]:i._toggledCategories[t]=!0),i._multifilterModeOn()?(r=i._makeMultifilterArray(),i._handleFiltering(r),i._isSearchActivated()&&i.search(i._typedText)):(i.filter("all"),i._isSearchActivated()&&i.search(i._typedText))},search:function(t){var i=this,r=i._multifilterModeOn()?i._makeMultifilterArray():i._getCollectionByFilter(i.options.filter),e=[],n=0;if(i._isSearchActivated())for(n=0;n<r.length;n++){var o=r[n].text().toLowerCase().indexOf(t.toLowerCase())>-1;o&&e.push(r[n])}if(e.length>0)i._handleFiltering(e);else if(i._isSearchActivated())for(n=0;n<i._activeArray.length;n++)i._activeArray[n]._filterOut();else i._handleFiltering(r)},shuffle:function(){var t=this;t._isAnimating=!0,t._isShuffling=!0,t.trigger("shufflingStart"),t._mainArray=t._fisherYatesShuffle(t._mainArray),t._subArrays=t._makeSubarrays();var i=t._multifilterModeOn()?t._makeMultifilterArray():t._getCollectionByFilter(t.options.filter);t._isSearchActivated()?t.search(t._typedText):t._placeItems(i)},sort:function(t,i){var r=this;t=t||"domIndex",i=i||"asc",r._isAnimating=!0,r._isSorting=!0,r.trigger("sortingStart");var e="domIndex"!==t&&"sortData"!==t&&"w"!==t&&"h"!==t;if(e)for(var n=0;n<r._mainArray.length;n++)r._mainArray[n][t]=r._mainArray[n].data(t);r._mainArray.sort(r._comparator(t,i)),r._subArrays=r._makeSubarrays();var o=r._multifilterModeOn()?r._makeMultifilterArray():r._getCollectionByFilter(r.options.filter);r._isSearchActivated()?r.search(r._typedText):r._placeItems(o)},setOptions:function(t){var i=this,r=0;for(var e in t)i.options[e]=t[e];if(i._mainArray&&(t.animationDuration||t.delay||t.easing||t.delayMode))for(r=0;r<i._mainArray.length;r++)i._mainArray[r].css("transition","all "+i.options.animationDuration+"s "+i.options.easing+" "+i._mainArray[r]._calcDelay()+"ms");t.callbacks&&(t.callbacks.onFilteringStart||(i.options.callbacks.onFilteringStart=function(){}),t.callbacks.onFilteringEnd||(i.options.callbacks.onFilteringEnd=function(){}),t.callbacks.onShufflingStart||(i.options.callbacks.onShufflingStart=function(){}),t.callbacks.onShufflingEnd||(i.options.callbacks.onShufflingEnd=function(){}),t.callbacks.onSortingStart||(i.options.callbacks.onSortingStart=function(){}),t.callbacks.onSortingEnd||(i.options.callbacks.onSortingEnd=function(){})),i.options.filterInCss.transform||(i.options.filterInCss.transform="translate3d(0,0,0)"),i.options.filterOutCss.transform||(i.options.filterOutCss.transform="translate3d(0,0,0)")},_getFiltrItems:function(){var t=this,r=i(t.find(".filtr-item")),n=[];return i.each(r,function(r,o){var a=i(o).extend(e)._init(r,t);n.push(a)}),n},_makeSubarrays:function(){for(var t=this,i=[],r=0;r<t._lastCategory;r++)i.push([]);for(r=0;r<t._mainArray.length;r++)if("object"==typeof t._mainArray[r]._category)for(var e=t._mainArray[r]._category.length,n=0;e>n;n++)i[t._mainArray[r]._category[n]-1].push(t._mainArray[r]);else i[t._mainArray[r]._category-1].push(t._mainArray[r]);return i},_makeMultifilterArray:function(){for(var t=this,i=[],r={},e=0;e<t._mainArray.length;e++){var n=t._mainArray[e],o=!1,a=n.domIndex in r==!1;if(Array.isArray(n._category)){for(var s=0;s<n._category.length;s++)if(n._category[s]in t._toggledCategories){o=!0;break}}else n._category in t._toggledCategories&&(o=!0);a&&o&&(r[n.domIndex]=!0,i.push(n))}return i},_setupControls:function(){var t=this;i("*[data-filter]").click(function(){var r=i(this).data("filter");t.options.filter!==r&&t.filter(r)}),i("*[data-multifilter]").click(function(){var r=i(this).data("multifilter");"all"===r?(t._toggledCategories={},t.filter("all")):t.toggleFilter(r)}),i("*[data-shuffle]").click(function(){t.shuffle()}),i("*[data-sortAsc]").click(function(){var r=i("*[data-sortOrder]").val();t.sort(r,"asc")}),i("*[data-sortDesc]").click(function(){var r=i("*[data-sortOrder]").val();t.sort(r,"desc")}),i("input[data-search]").keyup(function(){t._typedText=i(this).val(),t._delayEvent(function(){t.search(t._typedText)},250,t._uID)})},_setupEvents:function(){var r=this;i(t).resize(function(){r._delayEvent(function(){r.trigger("resizeFiltrContainer")},250,r._uID)}),r.on("resizeFiltrContainer",function(){r._multifilterModeOn()?r.toggleFilter():r.filter(r.options.filter)}).on("filteringStart",function(){r.options.callbacks.onFilteringStart()}).on("filteringEnd",function(){r.options.callbacks.onFilteringEnd()}).on("shufflingStart",function(){r._isShuffling=!0,r.options.callbacks.onShufflingStart()}).on("shufflingEnd",function(){r.options.callbacks.onShufflingEnd(),r._isShuffling=!1}).on("sortingStart",function(){r._isSorting=!0,r.options.callbacks.onSortingStart()}).on("sortingEnd",function(){r.options.callbacks.onSortingEnd(),r._isSorting=!1})},_calcItemPositions:function(){var t=this,e=t._activeArray,n=0,o=Math.round(t.width()/t.find(".filtr-item").outerWidth()),a=0,s=e[0].outerWidth(),l=0,f=0,u=0,c=0,g=0,_=[];if("packed"===t.options.layout){i.each(t._activeArray,function(t,i){i._updateDimensions()});var h=new r(t.outerWidth());for(h.fit(t._activeArray),c=0;c<e.length;c++)_.push({left:e[c].fit.x,top:e[c].fit.y});n=h.root.h}if("horizontal"===t.options.layout)for(a=1,c=1;c<=e.length;c++)s=e[c-1].outerWidth(),l=e[c-1].outerHeight(),_.push({left:f,top:u}),f+=s,l>n&&(n=l);else if("vertical"===t.options.layout){for(c=1;c<=e.length;c++)l=e[c-1].outerHeight(),_.push({left:f,top:u}),u+=l;n=u}else if("sameHeight"===t.options.layout){a=1;var d=t.outerWidth();for(c=1;c<=e.length;c++){s=e[c-1].width();var p=e[c-1].outerWidth(),y=0;e[c]&&(y=e[c].width()),_.push({left:f,top:u}),g=f+s+y,g>d?(g=0,f=0,u+=e[0].outerHeight(),a++):f+=p}n=a*e[0].outerHeight()}else if("sameWidth"===t.options.layout){for(c=1;c<=e.length;c++){if(_.push({left:f,top:u}),c%o===0&&a++,f+=s,u=0,a>0)for(g=a;g>0;)u+=e[c-o*g].outerHeight(),g--;c%o===0&&(f=0)}for(c=0;o>c;c++){for(var m=0,v=c;e[v];)m+=e[v].outerHeight(),v+=o;m>n?(n=m,m=0):m=0}}else if("sameSize"===t.options.layout){for(c=1;c<=e.length;c++)_.push({left:f,top:u}),f+=s,c%o===0&&(u+=e[0].outerHeight(),f=0);a=Math.ceil(e.length/o),n=a*e[0].outerHeight()}return t.css("height",n),_},_handleFiltering:function(t){for(var i=this,r=i._getArrayOfUniqueItems(i._activeArray,t),e=0;e<r.length;e++)r[e]._filterOut();i._activeArray=t,i._placeItems(t)},_multifilterModeOn:function(){var t=this;return Object.keys(t._toggledCategories).length>0},_isSearchActivated:function(){var t=this;return t._typedText.length>0},_placeItems:function(t){var i=this;i._isAnimating=!0,i._itemPositions=i._calcItemPositions();for(var r=0;r<t.length;r++)t[r]._filterIn(i._itemPositions[r])},_getCollectionByFilter:function(t){var i=this;return"all"===t?i._mainArray:i._subArrays[t-1]},_makeDeepCopy:function(t){var i={};for(var r in t)i[r]=t[r];return i},_comparator:function(t,i){return function(r,e){return"asc"===i?r[t]<e[t]?-1:r[t]>e[t]?1:0:"desc"===i?e[t]<r[t]?-1:e[t]>r[t]?1:0:void 0}},_getArrayOfUniqueItems:function(t,i){var r,e,n=[],o={},a=i.length;for(r=0;a>r;r++)o[i[r].domIndex]=!0;for(a=t.length,r=0;a>r;r++)e=t[r],e.domIndex in o||n.push(e);return n},_delayEvent:function(){var t={};return function(i,r,e){if(null===e)throw Error("UniqueID needed");t[e]&&clearTimeout(t[e]),t[e]=setTimeout(i,r)}}(),_fisherYatesShuffle:function(t){for(var i,r,e=t.length;e;)r=Math.floor(Math.random()*e--),i=t[e],t[e]=t[r],t[r]=i;return t}};var e={_init:function(t,i){var r=this;return r._parent=i,r._category=r._getCategory(),r._lastPos={},r.domIndex=t,r.sortData=r.data("sort"),r.w=0,r.h=0,r._isFilteredOut=!0,r._filteringOut=!1,r._filteringIn=!1,r.css(i.options.filterOutCss).css({"-webkit-backface-visibility":"hidden",perspective:"1000px","-webkit-perspective":"1000px","-webkit-transform-style":"preserve-3d",position:"absolute",transition:"all "+i.options.animationDuration+"s "+i.options.easing+" "+r._calcDelay()+"ms"}),r.on("transitionend webkitTransitionEnd oTransitionEnd MSTransitionEnd",function(){r._onTransitionEnd()}),r},_updateDimensions:function(){var t=this;t.w=t.outerWidth(),t.h=t.outerHeight()},_calcDelay:function(){var t=this,i=0;return"progressive"===t._parent.options.delayMode?i=t._parent.options.delay*t.domIndex:t.domIndex%2===0&&(i=t._parent.options.delay),i},_getCategory:function(){var t=this,i=t.data("category");if("string"==typeof i){i=i.split(", ");for(var r=0;r<i.length;r++){if(isNaN(parseInt(i[r])))throw new Error("Filterizr: the value of data-category must be a number, starting from value 1 and increasing.");parseInt(i[r])>t._parent._lastCategory&&(t._parent._lastCategory=parseInt(i[r]))}}else i>t._parent._lastCategory&&(t._parent._lastCategory=i);return i},_onTransitionEnd:function(){var t=this;t._filteringOut?(i(t).addClass("filteredOut"),t._isFilteredOut=!0,t._filteringOut=!1):t._filteringIn&&(t._isFilteredOut=!1,t._filteringIn=!1),t._parent._isAnimating&&(t._parent._isShuffling?t._parent.trigger("shufflingEnd"):t._parent._isSorting?t._parent.trigger("sortingEnd"):t._parent.trigger("filteringEnd"),t._parent._isAnimating=!1)},_filterOut:function(){var t=this,i=t._parent._makeDeepCopy(t._parent.options.filterOutCss);i.transform+=" translate3d("+t._lastPos.left+"px,"+t._lastPos.top+"px, 0)",t.css(i),t.css("pointer-events","none"),t._filteringOut=!0},_filterIn:function(t){var r=this,e=r._parent._makeDeepCopy(r._parent.options.filterInCss);i(r).removeClass("filteredOut"),r._filteringIn=!0,r._lastPos=t,r.css("pointer-events","auto"),e.transform+=" translate3d("+t.left+"px,"+t.top+"px, 0)",r.css(e)}}}(this,jQuery);
/*!
Chosen, a Select Box Enhancer for jQuery and Prototype
by Patrick Filler for Harvest, http://getharvest.com

Version 1.5.1
Full source at https://github.com/harvesthq/chosen
Copyright (c) 2011-2016 Harvest http://getharvest.com

MIT License, https://github.com/harvesthq/chosen/blob/master/LICENSE.md
This file is generated by `grunt build`, do not edit it by hand.
*/
(function(){var $,AbstractChosen,Chosen,SelectParser,_ref,__hasProp={}.hasOwnProperty,__extends=function(child,parent){for(var key in parent){if(__hasProp.call(parent,key))child[key]=parent[key];}function ctor(){this.constructor=child;}ctor.prototype=parent.prototype;child.prototype=new ctor();child.__super__=parent.prototype;return child;};SelectParser=(function(){function SelectParser(){this.options_index=0;this.parsed=[];}
SelectParser.prototype.add_node=function(child){if(child.nodeName.toUpperCase()==="OPTGROUP"){return this.add_group(child);}else{return this.add_option(child);}};SelectParser.prototype.add_group=function(group){var group_position,option,_i,_len,_ref,_results;group_position=this.parsed.length;this.parsed.push({array_index:group_position,group:true,label:this.escapeExpression(group.label),title:group.title?group.title:void 0,children:0,disabled:group.disabled,classes:group.className});_ref=group.childNodes;_results=[];for(_i=0,_len=_ref.length;_i<_len;_i++){option=_ref[_i];_results.push(this.add_option(option,group_position,group.disabled));}
return _results;};SelectParser.prototype.add_option=function(option,group_position,group_disabled){if(option.nodeName.toUpperCase()==="OPTION"){if(option.text!==""){if(group_position!=null){this.parsed[group_position].children+=1;}
this.parsed.push({array_index:this.parsed.length,options_index:this.options_index,value:option.value,text:option.text,html:option.innerHTML,title:option.title?option.title:void 0,selected:option.selected,disabled:group_disabled===true?group_disabled:option.disabled,group_array_index:group_position,group_label:group_position!=null?this.parsed[group_position].label:null,classes:option.className,style:option.style.cssText});}else{this.parsed.push({array_index:this.parsed.length,options_index:this.options_index,empty:true});}
return this.options_index+=1;}};SelectParser.prototype.escapeExpression=function(text){var map,unsafe_chars;if((text==null)||text===false){return"";}
if(!/[\&\<\>\"\'\`]/.test(text)){return text;}
map={"<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"};unsafe_chars=/&(?!\w+;)|[\<\>\"\'\`]/g;return text.replace(unsafe_chars,function(chr){return map[chr]||"&amp;";});};return SelectParser;})();SelectParser.select_to_array=function(select){var child,parser,_i,_len,_ref;parser=new SelectParser();_ref=select.childNodes;for(_i=0,_len=_ref.length;_i<_len;_i++){child=_ref[_i];parser.add_node(child);}
return parser.parsed;};AbstractChosen=(function(){function AbstractChosen(form_field,options){this.form_field=form_field;this.options=options!=null?options:{};if(!AbstractChosen.browser_is_supported()){return;}
this.is_multiple=this.form_field.multiple;this.set_default_text();this.set_default_values();this.setup();this.set_up_html();this.register_observers();this.on_ready();}
AbstractChosen.prototype.set_default_values=function(){var _this=this;this.click_test_action=function(evt){return _this.test_active_click(evt);};this.activate_action=function(evt){return _this.activate_field(evt);};this.active_field=false;this.mouse_on_container=false;this.results_showing=false;this.result_highlighted=null;this.allow_single_deselect=(this.options.allow_single_deselect!=null)&&(this.form_field.options[0]!=null)&&this.form_field.options[0].text===""?this.options.allow_single_deselect:false;this.disable_search_threshold=this.options.disable_search_threshold||0;this.disable_search=this.options.disable_search||false;this.enable_split_word_search=this.options.enable_split_word_search!=null?this.options.enable_split_word_search:true;this.group_search=this.options.group_search!=null?this.options.group_search:true;this.search_contains=this.options.search_contains||false;this.single_backstroke_delete=this.options.single_backstroke_delete!=null?this.options.single_backstroke_delete:true;this.max_selected_options=this.options.max_selected_options||Infinity;this.inherit_select_classes=this.options.inherit_select_classes||false;this.display_selected_options=this.options.display_selected_options!=null?this.options.display_selected_options:true;this.display_disabled_options=this.options.display_disabled_options!=null?this.options.display_disabled_options:true;this.include_group_label_in_selected=this.options.include_group_label_in_selected||false;return this.max_shown_results=this.options.max_shown_results||Number.POSITIVE_INFINITY;};AbstractChosen.prototype.set_default_text=function(){if(this.form_field.getAttribute("data-placeholder")){this.default_text=this.form_field.getAttribute("data-placeholder");}else if(this.is_multiple){this.default_text=this.options.placeholder_text_multiple||this.options.placeholder_text||AbstractChosen.default_multiple_text;}else{this.default_text=this.options.placeholder_text_single||this.options.placeholder_text||AbstractChosen.default_single_text;}
return this.results_none_found=this.form_field.getAttribute("data-no_results_text")||this.options.no_results_text||AbstractChosen.default_no_result_text;};AbstractChosen.prototype.choice_label=function(item){if(this.include_group_label_in_selected&&(item.group_label!=null)){return"<b class='group-name'>"+item.group_label+"</b>"+item.html;}else{return item.html;}};AbstractChosen.prototype.mouse_enter=function(){return this.mouse_on_container=true;};AbstractChosen.prototype.mouse_leave=function(){return this.mouse_on_container=false;};AbstractChosen.prototype.input_focus=function(evt){var _this=this;if(this.is_multiple){if(!this.active_field){return setTimeout((function(){return _this.container_mousedown();}),50);}}else{if(!this.active_field){return this.activate_field();}}};AbstractChosen.prototype.input_blur=function(evt){var _this=this;if(!this.mouse_on_container){this.active_field=false;return setTimeout((function(){return _this.blur_test();}),100);}};AbstractChosen.prototype.results_option_build=function(options){var content,data,data_content,shown_results,_i,_len,_ref;content='';shown_results=0;_ref=this.results_data;for(_i=0,_len=_ref.length;_i<_len;_i++){data=_ref[_i];data_content='';if(data.group){data_content=this.result_add_group(data);}else{data_content=this.result_add_option(data);}
if(data_content!==''){shown_results++;content+=data_content;}
if(options!=null?options.first:void 0){if(data.selected&&this.is_multiple){this.choice_build(data);}else if(data.selected&&!this.is_multiple){this.single_set_selected_text(this.choice_label(data));}}
if(shown_results>=this.max_shown_results){break;}}
return content;};AbstractChosen.prototype.result_add_option=function(option){var classes,option_el;if(!option.search_match){return'';}
if(!this.include_option_in_results(option)){return'';}
classes=[];if(!option.disabled&&!(option.selected&&this.is_multiple)){classes.push("active-result");}
if(option.disabled&&!(option.selected&&this.is_multiple)){classes.push("disabled-result");}
if(option.selected){classes.push("result-selected");}
if(option.group_array_index!=null){classes.push("group-option");}
if(option.classes!==""){classes.push(option.classes);}
option_el=document.createElement("li");option_el.className=classes.join(" ");option_el.style.cssText=option.style;option_el.setAttribute("data-option-array-index",option.array_index);option_el.innerHTML=option.search_text;if(option.title){option_el.title=option.title;}
return this.outerHTML(option_el);};AbstractChosen.prototype.result_add_group=function(group){var classes,group_el;if(!(group.search_match||group.group_match)){return'';}
if(!(group.active_options>0)){return'';}
classes=[];classes.push("group-result");if(group.classes){classes.push(group.classes);}
group_el=document.createElement("li");group_el.className=classes.join(" ");group_el.innerHTML=group.search_text;if(group.title){group_el.title=group.title;}
return this.outerHTML(group_el);};AbstractChosen.prototype.results_update_field=function(){this.set_default_text();if(!this.is_multiple){this.results_reset_cleanup();}
this.result_clear_highlight();this.results_build();if(this.results_showing){return this.winnow_results();}};AbstractChosen.prototype.reset_single_select_options=function(){var result,_i,_len,_ref,_results;_ref=this.results_data;_results=[];for(_i=0,_len=_ref.length;_i<_len;_i++){result=_ref[_i];if(result.selected){_results.push(result.selected=false);}else{_results.push(void 0);}}
return _results;};AbstractChosen.prototype.results_toggle=function(){if(this.results_showing){return this.results_hide();}else{return this.results_show();}};AbstractChosen.prototype.results_search=function(evt){if(this.results_showing){return this.winnow_results();}else{return this.results_show();}};AbstractChosen.prototype.winnow_results=function(){var escapedSearchText,option,regex,results,results_group,searchText,startpos,text,zregex,_i,_len,_ref;this.no_results_clear();results=0;searchText=this.get_search_text();escapedSearchText=searchText.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&");zregex=new RegExp(escapedSearchText,'i');regex=this.get_search_regex(escapedSearchText);_ref=this.results_data;for(_i=0,_len=_ref.length;_i<_len;_i++){option=_ref[_i];option.search_match=false;results_group=null;if(this.include_option_in_results(option)){if(option.group){option.group_match=false;option.active_options=0;}
if((option.group_array_index!=null)&&this.results_data[option.group_array_index]){results_group=this.results_data[option.group_array_index];if(results_group.active_options===0&&results_group.search_match){results+=1;}
results_group.active_options+=1;}
option.search_text=option.group?option.label:option.html;if(!(option.group&&!this.group_search)){option.search_match=this.search_string_match(option.search_text,regex);if(option.search_match&&!option.group){results+=1;}
if(option.search_match){if(searchText.length){startpos=option.search_text.search(zregex);text=option.search_text.substr(0,startpos+searchText.length)+'</em>'+option.search_text.substr(startpos+searchText.length);option.search_text=text.substr(0,startpos)+'<em>'+text.substr(startpos);}
if(results_group!=null){results_group.group_match=true;}}else if((option.group_array_index!=null)&&this.results_data[option.group_array_index].search_match){option.search_match=true;}}}}
this.result_clear_highlight();if(results<1&&searchText.length){this.update_results_content("");return this.no_results(searchText);}else{this.update_results_content(this.results_option_build());return this.winnow_results_set_highlight();}};AbstractChosen.prototype.get_search_regex=function(escaped_search_string){var regex_anchor;regex_anchor=this.search_contains?"":"^";return new RegExp(regex_anchor+escaped_search_string,'i');};AbstractChosen.prototype.search_string_match=function(search_string,regex){var part,parts,_i,_len;if(regex.test(search_string)){return true;}else if(this.enable_split_word_search&&(search_string.indexOf(" ")>=0||search_string.indexOf("[")===0)){parts=search_string.replace(/\[|\]/g,"").split(" ");if(parts.length){for(_i=0,_len=parts.length;_i<_len;_i++){part=parts[_i];if(regex.test(part)){return true;}}}}};AbstractChosen.prototype.choices_count=function(){var option,_i,_len,_ref;if(this.selected_option_count!=null){return this.selected_option_count;}
this.selected_option_count=0;_ref=this.form_field.options;for(_i=0,_len=_ref.length;_i<_len;_i++){option=_ref[_i];if(option.selected){this.selected_option_count+=1;}}
return this.selected_option_count;};AbstractChosen.prototype.choices_click=function(evt){evt.preventDefault();if(!(this.results_showing||this.is_disabled)){return this.results_show();}};AbstractChosen.prototype.keyup_checker=function(evt){var stroke,_ref;stroke=(_ref=evt.which)!=null?_ref:evt.keyCode;this.search_field_scale();switch(stroke){case 8:if(this.is_multiple&&this.backstroke_length<1&&this.choices_count()>0){return this.keydown_backstroke();}else if(!this.pending_backstroke){this.result_clear_highlight();return this.results_search();}
break;case 13:evt.preventDefault();if(this.results_showing){return this.result_select(evt);}
break;case 27:if(this.results_showing){this.results_hide();}
return true;case 9:case 38:case 40:case 16:case 91:case 17:case 18:break;default:return this.results_search();}};AbstractChosen.prototype.clipboard_event_checker=function(evt){var _this=this;return setTimeout((function(){return _this.results_search();}),50);};AbstractChosen.prototype.container_width=function(){if(this.options.width!=null){return this.options.width;}else{return""+this.form_field.offsetWidth+"px";}};AbstractChosen.prototype.include_option_in_results=function(option){if(this.is_multiple&&(!this.display_selected_options&&option.selected)){return false;}
if(!this.display_disabled_options&&option.disabled){return false;}
if(option.empty){return false;}
return true;};AbstractChosen.prototype.search_results_touchstart=function(evt){this.touch_started=true;return this.search_results_mouseover(evt);};AbstractChosen.prototype.search_results_touchend=function(evt){if(this.touch_started){return this.search_results_mouseup(evt);}};AbstractChosen.prototype.outerHTML=function(element){var tmp;if(element.outerHTML){return element.outerHTML;}
tmp=document.createElement("div");tmp.appendChild(element);return tmp.innerHTML;};AbstractChosen.browser_is_supported=function(){if(window.navigator.appName==="Microsoft Internet Explorer"){return document.documentMode>=8;}
return true;};AbstractChosen.default_multiple_text="Select Some Options";AbstractChosen.default_single_text="Select an Option";AbstractChosen.default_no_result_text="No results match";return AbstractChosen;})();$=jQuery;$.fn.extend({chosen:function(options){if(!AbstractChosen.browser_is_supported()){return this;}
return this.each(function(input_field){var $this,chosen;$this=$(this);chosen=$this.data('chosen');if(options==='destroy'){if(chosen instanceof Chosen){chosen.destroy();}
return;}
if(!(chosen instanceof Chosen)){$this.data('chosen',new Chosen(this,options));}});}});Chosen=(function(_super){__extends(Chosen,_super);function Chosen(){_ref=Chosen.__super__.constructor.apply(this,arguments);return _ref;}
Chosen.prototype.setup=function(){this.form_field_jq=$(this.form_field);this.current_selectedIndex=this.form_field.selectedIndex;return this.is_rtl=this.form_field_jq.hasClass("chosen-rtl");};Chosen.prototype.set_up_html=function(){var container_classes,container_props;container_classes=["chosen-container"];container_classes.push("chosen-container-"+(this.is_multiple?"multi":"single"));if(this.inherit_select_classes&&this.form_field.className){container_classes.push(this.form_field.className);}
if(this.is_rtl){container_classes.push("chosen-rtl");}
container_props={'class':container_classes.join(' '),'style':"width: "+(this.container_width())+";",'title':this.form_field.title};if(this.form_field.id.length){container_props.id=this.form_field.id.replace(/[^\w]/g,'_')+"_chosen";}
this.container=$("<div />",container_props);if(this.is_multiple){this.container.html('<ul class="chosen-choices"><li class="search-field"><input type="text" value="'+this.default_text+'" class="default" autocomplete="off" style="width:25px;" /></li></ul><div class="chosen-drop"><ul class="chosen-results"></ul></div>');}else{this.container.html('<a class="chosen-single chosen-default"><span>'+this.default_text+'</span><div><b></b></div></a><div class="chosen-drop"><div class="chosen-search"><input type="text" autocomplete="off" /></div><ul class="chosen-results"></ul></div>');}
this.form_field_jq.hide().after(this.container);this.dropdown=this.container.find('div.chosen-drop').first();this.search_field=this.container.find('input').first();this.search_results=this.container.find('ul.chosen-results').first();this.search_field_scale();this.search_no_results=this.container.find('li.no-results').first();if(this.is_multiple){this.search_choices=this.container.find('ul.chosen-choices').first();this.search_container=this.container.find('li.search-field').first();}else{this.search_container=this.container.find('div.chosen-search').first();this.selected_item=this.container.find('.chosen-single').first();}
this.results_build();this.set_tab_index();return this.set_label_behavior();};Chosen.prototype.on_ready=function(){return this.form_field_jq.trigger("chosen:ready",{chosen:this});};Chosen.prototype.register_observers=function(){var _this=this;this.container.bind('touchstart.chosen',function(evt){_this.container_mousedown(evt);return evt.preventDefault();});this.container.bind('touchend.chosen',function(evt){_this.container_mouseup(evt);return evt.preventDefault();});this.container.bind('mousedown.chosen',function(evt){_this.container_mousedown(evt);});this.container.bind('mouseup.chosen',function(evt){_this.container_mouseup(evt);});this.container.bind('mouseenter.chosen',function(evt){_this.mouse_enter(evt);});this.container.bind('mouseleave.chosen',function(evt){_this.mouse_leave(evt);});this.search_results.bind('mouseup.chosen',function(evt){_this.search_results_mouseup(evt);});this.search_results.bind('mouseover.chosen',function(evt){_this.search_results_mouseover(evt);});this.search_results.bind('mouseout.chosen',function(evt){_this.search_results_mouseout(evt);});this.search_results.bind('mousewheel.chosen DOMMouseScroll.chosen',function(evt){_this.search_results_mousewheel(evt);});this.search_results.bind('touchstart.chosen',function(evt){_this.search_results_touchstart(evt);});this.search_results.bind('touchend.chosen',function(evt){_this.search_results_touchend(evt);});this.form_field_jq.bind("chosen:updated.chosen",function(evt){_this.results_update_field(evt);});this.form_field_jq.bind("chosen:activate.chosen",function(evt){_this.activate_field(evt);});this.form_field_jq.bind("chosen:open.chosen",function(evt){_this.container_mousedown(evt);});this.form_field_jq.bind("chosen:close.chosen",function(evt){_this.input_blur(evt);});this.search_field.bind('blur.chosen',function(evt){_this.input_blur(evt);});this.search_field.bind('keyup.chosen',function(evt){_this.keyup_checker(evt);});this.search_field.bind('keydown.chosen',function(evt){_this.keydown_checker(evt);});this.search_field.bind('focus.chosen',function(evt){_this.input_focus(evt);});this.search_field.bind('cut.chosen',function(evt){_this.clipboard_event_checker(evt);});this.search_field.bind('paste.chosen',function(evt){_this.clipboard_event_checker(evt);});if(this.is_multiple){return this.search_choices.bind('click.chosen',function(evt){_this.choices_click(evt);});}else{return this.container.bind('click.chosen',function(evt){evt.preventDefault();});}};Chosen.prototype.destroy=function(){$(this.container[0].ownerDocument).unbind("click.chosen",this.click_test_action);if(this.search_field[0].tabIndex){this.form_field_jq[0].tabIndex=this.search_field[0].tabIndex;}
this.container.remove();this.form_field_jq.removeData('chosen');return this.form_field_jq.show();};Chosen.prototype.search_field_disabled=function(){this.is_disabled=this.form_field_jq[0].disabled;if(this.is_disabled){this.container.addClass('chosen-disabled');this.search_field[0].disabled=true;if(!this.is_multiple){this.selected_item.unbind("focus.chosen",this.activate_action);}
return this.close_field();}else{this.container.removeClass('chosen-disabled');this.search_field[0].disabled=false;if(!this.is_multiple){return this.selected_item.bind("focus.chosen",this.activate_action);}}};Chosen.prototype.container_mousedown=function(evt){if(!this.is_disabled){if(evt&&evt.type==="mousedown"&&!this.results_showing){evt.preventDefault();}
if(!((evt!=null)&&($(evt.target)).hasClass("search-choice-close"))){if(!this.active_field){if(this.is_multiple){this.search_field.val("");}
$(this.container[0].ownerDocument).bind('click.chosen',this.click_test_action);this.results_show();}else if(!this.is_multiple&&evt&&(($(evt.target)[0]===this.selected_item[0])||$(evt.target).parents("a.chosen-single").length)){evt.preventDefault();this.results_toggle();}
return this.activate_field();}}};Chosen.prototype.container_mouseup=function(evt){if(evt.target.nodeName==="ABBR"&&!this.is_disabled){return this.results_reset(evt);}};Chosen.prototype.search_results_mousewheel=function(evt){var delta;if(evt.originalEvent){delta=evt.originalEvent.deltaY||-evt.originalEvent.wheelDelta||evt.originalEvent.detail;}
if(delta!=null){evt.preventDefault();if(evt.type==='DOMMouseScroll'){delta=delta*40;}
return this.search_results.scrollTop(delta+this.search_results.scrollTop());}};Chosen.prototype.blur_test=function(evt){if(!this.active_field&&this.container.hasClass("chosen-container-active")){return this.close_field();}};Chosen.prototype.close_field=function(){$(this.container[0].ownerDocument).unbind("click.chosen",this.click_test_action);this.active_field=false;this.results_hide();this.container.removeClass("chosen-container-active");this.clear_backstroke();this.show_search_field_default();return this.search_field_scale();};Chosen.prototype.activate_field=function(){this.container.addClass("chosen-container-active");this.active_field=true;this.search_field.val(this.search_field.val());return this.search_field.focus();};Chosen.prototype.test_active_click=function(evt){var active_container;active_container=$(evt.target).closest('.chosen-container');if(active_container.length&&this.container[0]===active_container[0]){return this.active_field=true;}else{return this.close_field();}};Chosen.prototype.results_build=function(){this.parsing=true;this.selected_option_count=null;this.results_data=SelectParser.select_to_array(this.form_field);if(this.is_multiple){this.search_choices.find("li.search-choice").remove();}else if(!this.is_multiple){this.single_set_selected_text();if(this.disable_search||this.form_field.options.length<=this.disable_search_threshold){this.search_field[0].readOnly=true;this.container.addClass("chosen-container-single-nosearch");}else{this.search_field[0].readOnly=false;this.container.removeClass("chosen-container-single-nosearch");}}
this.update_results_content(this.results_option_build({first:true}));this.search_field_disabled();this.show_search_field_default();this.search_field_scale();return this.parsing=false;};Chosen.prototype.result_do_highlight=function(el){var high_bottom,high_top,maxHeight,visible_bottom,visible_top;if(el.length){this.result_clear_highlight();this.result_highlight=el;this.result_highlight.addClass("highlighted");maxHeight=parseInt(this.search_results.css("maxHeight"),10);visible_top=this.search_results.scrollTop();visible_bottom=maxHeight+visible_top;high_top=this.result_highlight.position().top+this.search_results.scrollTop();high_bottom=high_top+this.result_highlight.outerHeight();if(high_bottom>=visible_bottom){return this.search_results.scrollTop((high_bottom-maxHeight)>0?high_bottom-maxHeight:0);}else if(high_top<visible_top){return this.search_results.scrollTop(high_top);}}};Chosen.prototype.result_clear_highlight=function(){if(this.result_highlight){this.result_highlight.removeClass("highlighted");}
return this.result_highlight=null;};Chosen.prototype.results_show=function(){if(this.is_multiple&&this.max_selected_options<=this.choices_count()){this.form_field_jq.trigger("chosen:maxselected",{chosen:this});return false;}
this.container.addClass("chosen-with-drop");this.results_showing=true;this.search_field.focus();this.search_field.val(this.search_field.val());this.winnow_results();return this.form_field_jq.trigger("chosen:showing_dropdown",{chosen:this});};Chosen.prototype.update_results_content=function(content){return this.search_results.html(content);};Chosen.prototype.results_hide=function(){if(this.results_showing){this.result_clear_highlight();this.container.removeClass("chosen-with-drop");this.form_field_jq.trigger("chosen:hiding_dropdown",{chosen:this});}
return this.results_showing=false;};Chosen.prototype.set_tab_index=function(el){var ti;if(this.form_field.tabIndex){ti=this.form_field.tabIndex;this.form_field.tabIndex=-1;return this.search_field[0].tabIndex=ti;}};Chosen.prototype.set_label_behavior=function(){var _this=this;this.form_field_label=this.form_field_jq.parents("label");if(!this.form_field_label.length&&this.form_field.id.length){this.form_field_label=$("label[for='"+this.form_field.id+"']");}
if(this.form_field_label.length>0){return this.form_field_label.bind('click.chosen',function(evt){if(_this.is_multiple){return _this.container_mousedown(evt);}else{return _this.activate_field();}});}};Chosen.prototype.show_search_field_default=function(){if(this.is_multiple&&this.choices_count()<1&&!this.active_field){this.search_field.val(this.default_text);return this.search_field.addClass("default");}else{this.search_field.val("");return this.search_field.removeClass("default");}};Chosen.prototype.search_results_mouseup=function(evt){var target;target=$(evt.target).hasClass("active-result")?$(evt.target):$(evt.target).parents(".active-result").first();if(target.length){this.result_highlight=target;this.result_select(evt);return this.search_field.focus();}};Chosen.prototype.search_results_mouseover=function(evt){var target;target=$(evt.target).hasClass("active-result")?$(evt.target):$(evt.target).parents(".active-result").first();if(target){return this.result_do_highlight(target);}};Chosen.prototype.search_results_mouseout=function(evt){if($(evt.target).hasClass("active-result"||$(evt.target).parents('.active-result').first())){return this.result_clear_highlight();}};Chosen.prototype.choice_build=function(item){var choice,close_link,_this=this;choice=$('<li />',{"class":"search-choice"}).html("<span>"+(this.choice_label(item))+"</span>");if(item.disabled){choice.addClass('search-choice-disabled');}else{close_link=$('<a />',{"class":'search-choice-close','data-option-array-index':item.array_index});close_link.bind('click.chosen',function(evt){return _this.choice_destroy_link_click(evt);});choice.append(close_link);}
return this.search_container.before(choice);};Chosen.prototype.choice_destroy_link_click=function(evt){evt.preventDefault();evt.stopPropagation();if(!this.is_disabled){return this.choice_destroy($(evt.target));}};Chosen.prototype.choice_destroy=function(link){if(this.result_deselect(link[0].getAttribute("data-option-array-index"))){this.show_search_field_default();if(this.is_multiple&&this.choices_count()>0&&this.search_field.val().length<1){this.results_hide();}
link.parents('li').first().remove();return this.search_field_scale();}};Chosen.prototype.results_reset=function(){this.reset_single_select_options();this.form_field.options[0].selected=true;this.single_set_selected_text();this.show_search_field_default();this.results_reset_cleanup();this.form_field_jq.trigger("change");if(this.active_field){return this.results_hide();}};Chosen.prototype.results_reset_cleanup=function(){this.current_selectedIndex=this.form_field.selectedIndex;return this.selected_item.find("abbr").remove();};Chosen.prototype.result_select=function(evt){var high,item;if(this.result_highlight){high=this.result_highlight;this.result_clear_highlight();if(this.is_multiple&&this.max_selected_options<=this.choices_count()){this.form_field_jq.trigger("chosen:maxselected",{chosen:this});return false;}
if(this.is_multiple){high.removeClass("active-result");}else{this.reset_single_select_options();}
high.addClass("result-selected");item=this.results_data[high[0].getAttribute("data-option-array-index")];item.selected=true;this.form_field.options[item.options_index].selected=true;this.selected_option_count=null;if(this.is_multiple){this.choice_build(item);}else{this.single_set_selected_text(this.choice_label(item));}
if(!((evt.metaKey||evt.ctrlKey)&&this.is_multiple)){this.results_hide();}
this.show_search_field_default();if(this.is_multiple||this.form_field.selectedIndex!==this.current_selectedIndex){this.form_field_jq.trigger("change",{'selected':this.form_field.options[item.options_index].value});}
this.current_selectedIndex=this.form_field.selectedIndex;evt.preventDefault();return this.search_field_scale();}};Chosen.prototype.single_set_selected_text=function(text){if(text==null){text=this.default_text;}
if(text===this.default_text){this.selected_item.addClass("chosen-default");}else{this.single_deselect_control_build();this.selected_item.removeClass("chosen-default");}
return this.selected_item.find("span").html(text);};Chosen.prototype.result_deselect=function(pos){var result_data;result_data=this.results_data[pos];if(!this.form_field.options[result_data.options_index].disabled){result_data.selected=false;this.form_field.options[result_data.options_index].selected=false;this.selected_option_count=null;this.result_clear_highlight();if(this.results_showing){this.winnow_results();}
this.form_field_jq.trigger("change",{deselected:this.form_field.options[result_data.options_index].value});this.search_field_scale();return true;}else{return false;}};Chosen.prototype.single_deselect_control_build=function(){if(!this.allow_single_deselect){return;}
if(!this.selected_item.find("abbr").length){this.selected_item.find("span").first().after("<abbr class=\"search-choice-close\"></abbr>");}
return this.selected_item.addClass("chosen-single-with-deselect");};Chosen.prototype.get_search_text=function(){return $('<div/>').text($.trim(this.search_field.val())).html();};Chosen.prototype.winnow_results_set_highlight=function(){var do_high,selected_results;selected_results=!this.is_multiple?this.search_results.find(".result-selected.active-result"):[];do_high=selected_results.length?selected_results.first():this.search_results.find(".active-result").first();if(do_high!=null){return this.result_do_highlight(do_high);}};Chosen.prototype.no_results=function(terms){var no_results_html;no_results_html=$('<li class="no-results">'+this.results_none_found+' "<span></span>"</li>');no_results_html.find("span").first().html(terms);this.search_results.append(no_results_html);return this.form_field_jq.trigger("chosen:no_results",{chosen:this});};Chosen.prototype.no_results_clear=function(){return this.search_results.find(".no-results").remove();};Chosen.prototype.keydown_arrow=function(){var next_sib;if(this.results_showing&&this.result_highlight){next_sib=this.result_highlight.nextAll("li.active-result").first();if(next_sib){return this.result_do_highlight(next_sib);}}else{return this.results_show();}};Chosen.prototype.keyup_arrow=function(){var prev_sibs;if(!this.results_showing&&!this.is_multiple){return this.results_show();}else if(this.result_highlight){prev_sibs=this.result_highlight.prevAll("li.active-result");if(prev_sibs.length){return this.result_do_highlight(prev_sibs.first());}else{if(this.choices_count()>0){this.results_hide();}
return this.result_clear_highlight();}}};Chosen.prototype.keydown_backstroke=function(){var next_available_destroy;if(this.pending_backstroke){this.choice_destroy(this.pending_backstroke.find("a").first());return this.clear_backstroke();}else{next_available_destroy=this.search_container.siblings("li.search-choice").last();if(next_available_destroy.length&&!next_available_destroy.hasClass("search-choice-disabled")){this.pending_backstroke=next_available_destroy;if(this.single_backstroke_delete){return this.keydown_backstroke();}else{return this.pending_backstroke.addClass("search-choice-focus");}}}};Chosen.prototype.clear_backstroke=function(){if(this.pending_backstroke){this.pending_backstroke.removeClass("search-choice-focus");}
return this.pending_backstroke=null;};Chosen.prototype.keydown_checker=function(evt){var stroke,_ref1;stroke=(_ref1=evt.which)!=null?_ref1:evt.keyCode;this.search_field_scale();if(stroke!==8&&this.pending_backstroke){this.clear_backstroke();}
switch(stroke){case 8:this.backstroke_length=this.search_field.val().length;break;case 9:if(this.results_showing&&!this.is_multiple){this.result_select(evt);}
this.mouse_on_container=false;break;case 13:if(this.results_showing){evt.preventDefault();}
break;case 32:if(this.disable_search){evt.preventDefault();}
break;case 38:evt.preventDefault();this.keyup_arrow();break;case 40:evt.preventDefault();this.keydown_arrow();break;}};Chosen.prototype.search_field_scale=function(){var div,f_width,h,style,style_block,styles,w,_i,_len;if(this.is_multiple){h=0;w=0;style_block="position:absolute; left: -1000px; top: -1000px; display:none;";styles=['font-size','font-style','font-weight','font-family','line-height','text-transform','letter-spacing'];for(_i=0,_len=styles.length;_i<_len;_i++){style=styles[_i];style_block+=style+":"+this.search_field.css(style)+";";}
div=$('<div />',{'style':style_block});div.text(this.search_field.val());$('body').append(div);w=div.width()+25;div.remove();f_width=this.container.outerWidth();if(w>f_width-10){w=f_width-10;}
return this.search_field.css({'width':w+'px'});}};return Chosen;})(AbstractChosen);}).call(this);!function(a,b){"object"==typeof exports&&"object"==typeof module?module.exports=b():"function"==typeof define&&define.amd?define([],b):"object"==typeof exports?exports.jwplayer=b():a.jwplayer=b()}(this,function(){return function(a){function b(c){if(d[c])return d[c].exports;var e=d[c]={exports:{},id:c,loaded:!1};return a[c].call(e.exports,e,e.exports,b),e.loaded=!0,e.exports}var c=window.webpackJsonpjwplayer;window.webpackJsonpjwplayer=function(d,f){for(var g,h,i=0,j=[];i<d.length;i++)h=d[i],e[h]&&j.push.apply(j,e[h]),e[h]=0;for(g in f)a[g]=f[g];for(c&&c(d,f);j.length;)j.shift().call(null,b)};var d={},e={0:0};return b.e=function(a,c){if(0===e[a])return c.call(null,b);if(void 0!==e[a])e[a].push(c);else{e[a]=[c];var d=document.getElementsByTagName("head")[0],f=document.createElement("script");f.type="text/javascript",f.charset="utf-8",f.async=!0,f.src=b.p+""+({1:"polyfills.promise",2:"polyfills.base64",3:"provider.youtube",4:"provider.dashjs",5:"provider.shaka",6:"provider.cast"}[a]||a)+".js",d.appendChild(f)}},b.m=a,b.c=d,b.p="",b(0)}([function(a,b,c){a.exports=c(40)},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(a,b,c){var d,e;d=[c(41),c(174),c(45)],e=function(a,b,c){return window.jwplayer?window.jwplayer:c.extend(a,b)}.apply(b,d),!(void 0!==e&&(a.exports=e))},function(a,b,c){var d,e;d=[c(42),c(48),c(168)],e=function(a,b){return c.p=b.loadFrom(),a.selectPlayer}.apply(b,d),!(void 0!==e&&(a.exports=e))},function(a,b,c){var d,e;d=[c(43),c(98),c(45)],e=function(a,b,c){var d=a.selectPlayer,e=function(){var a=d.apply(this,arguments);return a?a:{registerPlugin:function(a,c,d){"jwpsrv"!==a&&b.registerPlugin(a,c,d)}}};return c.extend(a,{selectPlayer:e})}.apply(b,d),!(void 0!==e&&(a.exports=e))},function(a,b,c){var d,e;d=[c(44),c(45),c(86),c(84),c(80),c(98)],e=function(a,b,c,d,e,f){function g(a){var f=a.getName().name;if(!b.find(e,b.matches({name:f}))){if(!b.isFunction(a.supports))throw{message:"Tried to register a provider with an invalid object"};e.unshift({name:f,supports:a.supports})}var g=function(){};g.prototype=c,a.prototype=new g,d[f]=a}var h=[],i=0,j=function(b){var c,d;return b?"string"==typeof b?(c=k(b),c||(d=document.getElementById(b))):"number"==typeof b?c=h[b]:b.nodeType&&(d=b,c=k(d.id)):c=h[0],c?c:d?l(new a(d,m)):{registerPlugin:f.registerPlugin}},k=function(a){for(var b=0;b<h.length;b++)if(h[b].id===a)return h[b];return null},l=function(a){return i++,a.uniqueId=i,h.push(a),a},m=function(a){for(var b=h.length;b--;)if(h[b].uniqueId===a.uniqueId){h.splice(b,1);break}},n={selectPlayer:j,registerProvider:g,availableProviders:e,registerPlugin:f.registerPlugin};return j.api=n,n}.apply(b,d),!(void 0!==e&&(a.exports=e))},function(a,b,c){var d,e;d=[c(46),c(62),c(47),c(48),c(61),c(60),c(45),c(63),c(165),c(166),c(167),c(59)],e=function(a,b,c,d,e,f,g,h,i,j,k,l){var m=function(f,m){var n,o=this,p=!1,q={};g.extend(this,c),this.utils=d,this._=g,this.Events=c,this.version=l,this.trigger=function(a,b){return b=g.isObject(b)?g.extend({},b):{},b.type=a,window.jwplayer&&window.jwplayer.debug?c.trigger.call(o,a,b):c.triggerSafe.call(o,a,b)},this.dispatchEvent=this.trigger,this.removeEventListener=this.off.bind(this);var r=function(){n=new h(f),i(o,n),j(o,n),n.on(a.JWPLAYER_PLAYLIST_ITEM,function(){q={}}),n.on(a.JWPLAYER_MEDIA_META,function(a){g.extend(q,a.metadata)}),n.on(a.JWPLAYER_READY,function(a){p=!0,s.tick("ready"),a.setupTime=s.between("setup","ready")}),n.on("all",o.trigger)};r(),k(this),this.id=f.id;var s=this._qoe=new e;s.tick("init");var t=function(){p=!1,q={},o.off(),n&&n.off(),n&&n.playerDestroy&&n.playerDestroy()};return this.getPlugin=function(a){return o.plugins&&o.plugins[a]},this.addPlugin=function(a,b){this.plugins=this.plugins||{},this.plugins[a]=b,this.onReady(b.addToPlayer),b.resize&&this.onResize(b.resizeHandler)},this.setup=function(a){return s.tick("setup"),t(),r(),d.foreach(a.events,function(a,b){var c=o[a];"function"==typeof c&&c.call(o,b)}),a.id=o.id,n.setup(a,this),o},this.qoe=function(){var b=n.getItemQoe(),c=s.between("setup","ready"),d=b.between(a.JWPLAYER_MEDIA_PLAY_ATTEMPT,a.JWPLAYER_MEDIA_FIRST_FRAME);return{setupTime:c,firstFrame:d,player:s.dump(),item:b.dump()}},this.getContainer=function(){return n.getContainer?n.getContainer():f},this.getMeta=this.getItemMeta=function(){return q},this.getPlaylistItem=function(a){if(!d.exists(a))return n._model.get("playlistItem");var b=o.getPlaylist();return b?b[a]:null},this.getRenderingMode=function(){return"html5"},this.load=function(a){var b=this.getPlugin("vast")||this.getPlugin("googima");return b&&b.destroy(),n.load(a),o},this.play=function(a,c){if(g.isBoolean(a)||(c=a),c||(c={reason:"external"}),a===!0)return n.play(c),o;if(a===!1)return n.pause(),o;switch(a=o.getState()){case b.PLAYING:case b.BUFFERING:n.pause();break;default:n.play(c)}return o},this.pause=function(a){return g.isBoolean(a)?this.play(!a):this.play()},this.createInstream=function(){return n.createInstream()},this.castToggle=function(){n&&n.castToggle&&n.castToggle()},this.playAd=this.pauseAd=d.noop,this.remove=function(){return m(o),o.trigger("remove"),t(),o},this};return m}.apply(b,d),!(void 0!==e&&(a.exports=e))},function(a,b,c){var d,e;d=[],e=function(){var a={},b=Array.prototype,c=Object.prototype,d=Function.prototype,e=b.slice,f=b.concat,g=c.toString,h=c.hasOwnProperty,i=b.map,j=b.reduce,k=b.forEach,l=b.filter,m=b.every,n=b.some,o=b.indexOf,p=Array.isArray,q=Object.keys,r=d.bind,s=function(a){return a instanceof s?a:this instanceof s?void 0:new s(a)},t=s.each=s.forEach=function(b,c,d){if(null==b)return b;if(k&&b.forEach===k)b.forEach(c,d);else if(b.length===+b.length){for(var e=0,f=b.length;f>e;e++)if(c.call(d,b[e],e,b)===a)return}else for(var g=s.keys(b),e=0,f=g.length;f>e;e++)if(c.call(d,b[g[e]],g[e],b)===a)return;return b};s.map=s.collect=function(a,b,c){var d=[];return null==a?d:i&&a.map===i?a.map(b,c):(t(a,function(a,e,f){d.push(b.call(c,a,e,f))}),d)};var u="Reduce of empty array with no initial value";s.reduce=s.foldl=s.inject=function(a,b,c,d){var e=arguments.length>2;if(null==a&&(a=[]),j&&a.reduce===j)return d&&(b=s.bind(b,d)),e?a.reduce(b,c):a.reduce(b);if(t(a,function(a,f,g){e?c=b.call(d,c,a,f,g):(c=a,e=!0)}),!e)throw new TypeError(u);return c},s.find=s.detect=function(a,b,c){var d;return v(a,function(a,e,f){return b.call(c,a,e,f)?(d=a,!0):void 0}),d},s.filter=s.select=function(a,b,c){var d=[];return null==a?d:l&&a.filter===l?a.filter(b,c):(t(a,function(a,e,f){b.call(c,a,e,f)&&d.push(a)}),d)},s.reject=function(a,b,c){return s.filter(a,function(a,d,e){return!b.call(c,a,d,e)},c)},s.compact=function(a){return s.filter(a,s.identity)},s.every=s.all=function(b,c,d){c||(c=s.identity);var e=!0;return null==b?e:m&&b.every===m?b.every(c,d):(t(b,function(b,f,g){return(e=e&&c.call(d,b,f,g))?void 0:a}),!!e)};var v=s.some=s.any=function(b,c,d){c||(c=s.identity);var e=!1;return null==b?e:n&&b.some===n?b.some(c,d):(t(b,function(b,f,g){return e||(e=c.call(d,b,f,g))?a:void 0}),!!e)};s.size=function(a){return null==a?0:a.length===+a.length?a.length:s.keys(a).length},s.after=function(a,b){return function(){return--a<1?b.apply(this,arguments):void 0}},s.before=function(a,b){var c;return function(){return--a>0&&(c=b.apply(this,arguments)),1>=a&&(b=null),c}};var w=function(a){return null==a?s.identity:s.isFunction(a)?a:s.property(a)};s.sortedIndex=function(a,b,c,d){c=w(c);for(var e=c.call(d,b),f=0,g=a.length;g>f;){var h=f+g>>>1;c.call(d,a[h])<e?f=h+1:g=h}return f};var v=s.some=s.any=function(b,c,d){c||(c=s.identity);var e=!1;return null==b?e:n&&b.some===n?b.some(c,d):(t(b,function(b,f,g){return e||(e=c.call(d,b,f,g))?a:void 0}),!!e)};s.contains=s.include=function(a,b){return null==a?!1:(a.length!==+a.length&&(a=s.values(a)),s.indexOf(a,b)>=0)},s.where=function(a,b){return s.filter(a,s.matches(b))},s.findWhere=function(a,b){return s.find(a,s.matches(b))},s.max=function(a,b,c){if(!b&&s.isArray(a)&&a[0]===+a[0]&&a.length<65535)return Math.max.apply(Math,a);var d=-(1/0),e=-(1/0);return t(a,function(a,f,g){var h=b?b.call(c,a,f,g):a;h>e&&(d=a,e=h)}),d},s.difference=function(a){var c=f.apply(b,e.call(arguments,1));return s.filter(a,function(a){return!s.contains(c,a)})},s.without=function(a){return s.difference(a,e.call(arguments,1))},s.indexOf=function(a,b,c){if(null==a)return-1;var d=0,e=a.length;if(c){if("number"!=typeof c)return d=s.sortedIndex(a,b),a[d]===b?d:-1;d=0>c?Math.max(0,e+c):c}if(o&&a.indexOf===o)return a.indexOf(b,c);for(;e>d;d++)if(a[d]===b)return d;return-1};var x=function(){};s.bind=function(a,b){var c,d;if(r&&a.bind===r)return r.apply(a,e.call(arguments,1));if(!s.isFunction(a))throw new TypeError;return c=e.call(arguments,2),d=function(){if(!(this instanceof d))return a.apply(b,c.concat(e.call(arguments)));x.prototype=a.prototype;var f=new x;x.prototype=null;var g=a.apply(f,c.concat(e.call(arguments)));return Object(g)===g?g:f}},s.partial=function(a){var b=e.call(arguments,1);return function(){for(var c=0,d=b.slice(),e=0,f=d.length;f>e;e++)d[e]===s&&(d[e]=arguments[c++]);for(;c<arguments.length;)d.push(arguments[c++]);return a.apply(this,d)}},s.once=s.partial(s.before,2),s.memoize=function(a,b){var c={};return b||(b=s.identity),function(){var d=b.apply(this,arguments);return s.has(c,d)?c[d]:c[d]=a.apply(this,arguments)}},s.delay=function(a,b){var c=e.call(arguments,2);return setTimeout(function(){return a.apply(null,c)},b)},s.defer=function(a){return s.delay.apply(s,[a,1].concat(e.call(arguments,1)))},s.throttle=function(a,b,c){var d,e,f,g=null,h=0;c||(c={});var i=function(){h=c.leading===!1?0:s.now(),g=null,f=a.apply(d,e),d=e=null};return function(){var j=s.now();h||c.leading!==!1||(h=j);var k=b-(j-h);return d=this,e=arguments,0>=k?(clearTimeout(g),g=null,h=j,f=a.apply(d,e),d=e=null):g||c.trailing===!1||(g=setTimeout(i,k)),f}},s.keys=function(a){if(!s.isObject(a))return[];if(q)return q(a);var b=[];for(var c in a)s.has(a,c)&&b.push(c);return b},s.invert=function(a){for(var b={},c=s.keys(a),d=0,e=c.length;e>d;d++)b[a[c[d]]]=c[d];return b},s.defaults=function(a){return t(e.call(arguments,1),function(b){if(b)for(var c in b)void 0===a[c]&&(a[c]=b[c])}),a},s.extend=function(a){return t(e.call(arguments,1),function(b){if(b)for(var c in b)a[c]=b[c]}),a},s.pick=function(a){var c={},d=f.apply(b,e.call(arguments,1));return t(d,function(b){b in a&&(c[b]=a[b])}),c},s.omit=function(a){var c={},d=f.apply(b,e.call(arguments,1));for(var g in a)s.contains(d,g)||(c[g]=a[g]);return c},s.clone=function(a){return s.isObject(a)?s.isArray(a)?a.slice():s.extend({},a):a},s.isArray=p||function(a){return"[object Array]"==g.call(a)},s.isObject=function(a){return a===Object(a)},t(["Arguments","Function","String","Number","Date","RegExp"],function(a){s["is"+a]=function(b){return g.call(b)=="[object "+a+"]"}}),s.isArguments(arguments)||(s.isArguments=function(a){return!(!a||!s.has(a,"callee"))}),s.isFunction=function(a){return"function"==typeof a},s.isFinite=function(a){return isFinite(a)&&!isNaN(parseFloat(a))},s.isNaN=function(a){return s.isNumber(a)&&a!=+a},s.isBoolean=function(a){return a===!0||a===!1||"[object Boolean]"==g.call(a)},s.isNull=function(a){return null===a},s.isUndefined=function(a){return void 0===a},s.has=function(a,b){return h.call(a,b)},s.identity=function(a){return a},s.constant=function(a){return function(){return a}},s.property=function(a){return function(b){return b[a]}},s.propertyOf=function(a){return null==a?function(){}:function(b){return a[b]}},s.matches=function(a){return function(b){if(b===a)return!0;for(var c in a)if(a[c]!==b[c])return!1;return!0}},s.now=Date.now||function(){return(new Date).getTime()},s.result=function(a,b){if(null!=a){var c=a[b];return s.isFunction(c)?c.call(a):c}};var y=0;return s.uniqueId=function(a){var b=++y+"";return a?a+b:b},s}.apply(b,d),!(void 0!==e&&(a.exports=e))},function(a,b,c){var d,e;d=[],e=function(){var a={DRAG:"drag",DRAG_START:"dragStart",DRAG_END:"dragEnd",CLICK:"click",DOUBLE_CLICK:"doubleClick",TAP:"tap",DOUBLE_TAP:"doubleTap",OVER:"over",MOVE:"move",OUT:"out"},b={COMPLETE:"complete",ERROR:"error",JWPLAYER_AD_CLICK:"adClick",JWPLAYER_AD_COMPANIONS:"adCompanions",JWPLAYER_AD_COMPLETE:"adComplete",JWPLAYER_AD_ERROR:"adError",JWPLAYER_AD_IMPRESSION:"adImpression",JWPLAYER_AD_META:"adMeta",JWPLAYER_AD_PAUSE:"adPause",JWPLAYER_AD_PLAY:"adPlay",JWPLAYER_AD_SKIPPED:"adSkipped",JWPLAYER_AD_TIME:"adTime",JWPLAYER_CAST_AD_CHANGED:"castAdChanged",JWPLAYER_MEDIA_COMPLETE:"complete",JWPLAYER_READY:"ready",JWPLAYER_MEDIA_SEEK:"seek",JWPLAYER_MEDIA_BEFOREPLAY:"beforePlay",JWPLAYER_MEDIA_BEFORECOMPLETE:"beforeComplete",JWPLAYER_MEDIA_BUFFER_FULL:"bufferFull",JWPLAYER_DISPLAY_CLICK:"displayClick",JWPLAYER_PLAYLIST_COMPLETE:"playlistComplete",JWPLAYER_CAST_SESSION:"cast",JWPLAYER_MEDIA_ERROR:"mediaError",JWPLAYER_MEDIA_FIRST_FRAME:"firstFrame",JWPLAYER_MEDIA_PLAY_ATTEMPT:"playAttempt",JWPLAYER_MEDIA_LOADED:"loaded",JWPLAYER_MEDIA_SEEKED:"seeked",JWPLAYER_SETUP_ERROR:"setupError",JWPLAYER_ERROR:"error",JWPLAYER_PLAYER_STATE:"state",JWPLAYER_CAST_AVAILABLE:"castAvailable",JWPLAYER_MEDIA_BUFFER:"bufferChange",JWPLAYER_MEDIA_TIME:"time",JWPLAYER_MEDIA_TYPE:"mediaType",JWPLAYER_MEDIA_VOLUME:"volume",JWPLAYER_MEDIA_MUTE:"mute",JWPLAYER_MEDIA_META:"meta",JWPLAYER_MEDIA_LEVELS:"levels",JWPLAYER_MEDIA_LEVEL_CHANGED:"levelsChanged",JWPLAYER_CONTROLS:"controls",JWPLAYER_FULLSCREEN:"fullscreen",JWPLAYER_RESIZE:"resize",JWPLAYER_PLAYLIST_ITEM:"playlistItem",JWPLAYER_PLAYLIST_LOADED:"playlist",JWPLAYER_AUDIO_TRACKS:"audioTracks",JWPLAYER_AUDIO_TRACK_CHANGED:"audioTrackChanged",JWPLAYER_LOGO_CLICK:"logoClick",JWPLAYER_CAPTIONS_LIST:"captionsList",JWPLAYER_CAPTIONS_CHANGED:"captionsChanged",JWPLAYER_PROVIDER_CHANGED:"providerChanged",JWPLAYER_PROVIDER_FIRST_FRAME:"providerFirstFrame",JWPLAYER_USER_ACTION:"userAction",JWPLAYER_PROVIDER_CLICK:"providerClick",JWPLAYER_VIEW_TAB_FOCUS:"tabFocus",JWPLAYER_CONTROLBAR_DRAGGING:"scrubbing",JWPLAYER_INSTREAM_CLICK:"instreamClick"};return b.touchEvents=a,b}.apply(b,d),!(void 0!==e&&(a.exports=e))},function(a,b,c){var d,e;d=[c(45)],e=function(a){var b=[],c=b.slice,d={on:function(a,b,c){if(!f(this,"on",a,[b,c])||!b)return this;this._events||(this._events={});var d=this._events[a]||(this._events[a]=[]);return d.push({callback:b,context:c}),this},once:function(b,c,d){if(!f(this,"once",b,[c,d])||!c)return this;var e=this,g=a.once(function(){e.off(b,g),c.apply(this,arguments)});return g._callback=c,this.on(b,g,d)},off:function(b,c,d){var e,g,h,i,j,k,l,m;if(!this._events||!f(this,"off",b,[c,d]))return this;if(!b&&!c&&!d)return this._events=void 0,this;for(i=b?[b]:a.keys(this._events),j=0,k=i.length;k>j;j++)if(b=i[j],h=this._events[b]){if(this._events[b]=e=[],c||d)for(l=0,m=h.length;m>l;l++)g=h[l],(c&&c!==g.callback&&c!==g.callback._callback||d&&d!==g.context)&&e.push(g);e.length||delete this._events[b]}return this},trigger:function(a){if(!this._events)return this;var b=c.call(arguments,1);if(!f(this,"trigger",a,b))return this;var d=this._events[a],e=this._events.all;return d&&g(d,b,this),e&&g(e,arguments,this),this},triggerSafe:function(a){if(!this._events)return this;var b=c.call(arguments,1);if(!f(this,"trigger",a,b))return this;var d=this._events[a],e=this._events.all;return d&&h(d,b,this),e&&h(e,arguments,this),this}},e=/\s+/,f=function(a,b,c,d){if(!c)return!0;if("object"==typeof c){for(var f in c)a[b].apply(a,[f,c[f]].concat(d));return!1}if(e.test(c)){for(var g=c.split(e),h=0,i=g.length;i>h;h++)a[b].apply(a,[g[h]].concat(d));return!1}return!0},g=function(a,b,c){var d,e=-1,f=a.length,g=b[0],h=b[1],i=b[2];switch(b.length){case 0:for(;++e<f;)(d=a[e]).callback.call(d.context||c);return;case 1:for(;++e<f;)(d=a[e]).callback.call(d.context||c,g);return;case 2:for(;++e<f;)(d=a[e]).callback.call(d.context||c,g,h);return;case 3:for(;++e<f;)(d=a[e]).callback.call(d.context||c,g,h,i);return;default:for(;++e<f;)(d=a[e]).callback.apply(d.context||c,b);return}},h=function(a,b,c){for(var d,e=-1,f=a.length;++e<f;)try{(d=a[e]).callback.apply(d.context||c,b)}catch(g){}};return d}.apply(b,d),!(void 0!==e&&(a.exports=e))},function(a,b,c){var d,e;d=[c(51),c(45),c(52),c(53),c(55),c(49),c(56),c(50),c(57),c(60)],e=function(a,b,c,d,e,f,g,h,i,j){var k={};return k.log=function(){window.console&&("object"==typeof console.log?console.log(Array.prototype.slice.call(arguments,0)):console.log.apply(console,arguments))},k.between=function(a,b,c){return Math.max(Math.min(a,c),b)},k.foreach=function(a,b){var c,d;for(c in a)"function"===k.typeOf(a.hasOwnProperty)?a.hasOwnProperty(c)&&(d=a[c],b(c,d)):(d=a[c],b(c,d))},k.indexOf=b.indexOf,k.noop=function(){},k.seconds=a.seconds,k.prefix=a.prefix,k.suffix=a.suffix,b.extend(k,f,h,c,g,d,e,i,j),k}.apply(b,d),!(void 0!==e&&(a.exports=e))},function(a,b,c){var d,e;d=[c(45),c(50)],e=function(a,b){function c(a){return/^(?:(?:https?|file)\:)?\/\//.test(a)}function d(b){return a.some(b,function(a){return"parsererror"===a.nodeName})}var e={};return e.getAbsolutePath=function(a,d){if(b.exists(d)||(d=document.location.href),b.exists(a)){if(c(a))return a;var e,f=d.substring(0,d.indexOf("://")+3),g=d.substring(f.length,d.indexOf("/",f.length+1));if(0===a.indexOf("/"))e=a.split("/");else{var h=d.split("?")[0];h=h.substring(f.length+g.length+1,h.lastIndexOf("/")),e=h.split("/").concat(a.split("/"))}for(var i=[],j=0;j<e.length;j++)e[j]&&b.exists(e[j])&&"."!==e[j]&&(".."===e[j]?i.pop():i.push(e[j]));return f+g+"/"+i.join("/")}},e.getScriptPath=a.memoize(function(a){for(var b=document.getElementsByTagName("script"),c=0;c<b.length;c++){var d=b[c].src;if(d&&d.indexOf(a)>=0)return d.substr(0,d.indexOf(a))}return""}),e.parseXML=function(a){var b=null;try{"DOMParser"in window?(b=(new window.DOMParser).parseFromString(a,"text/xml"),(d(b.childNodes)||b.childNodes&&d(b.childNodes[0].childNodes))&&(b=null)):(b=new window.ActiveXObject("Microsoft.XMLDOM"),b.async="false",b.loadXML(a))}catch(c){}return b},e.serialize=function(a){if(void 0===a)return null;if("string"==typeof a&&a.length<6){var b=a.toLowerCase();if("true"===b)return!0;if("false"===b)return!1;if(!isNaN(Number(a))&&!isNaN(parseFloat(a)))return Number(a)}return a},e.parseDimension=function(a){return"string"==typeof a?""===a?0:a.lastIndexOf("%")>-1?a:parseInt(a.replace("px",""),10):a},e.timeFormat=function(a,b){if(0>=a&&!b)return"00:00";var c=0>a?"-":"";a=Math.abs(a);var d=Math.floor(a/3600),e=Math.floor((a-3600*d)/60),f=Math.floor(a%60);return c+(d?d+":":"")+(10>e?"0":"")+e+":"+(10>f?"0":"")+f},e.adaptiveType=function(a){if(0!==a){var b=-120;if(b>=a)return"DVR";if(0>a||a===1/0)return"LIVE"}return"VOD"},e}.apply(b,d),!(void 0!==e&&(a.exports=e))},function(a,b,c){var d,e;d=[c(45)],e=function(a){var b={};return b.exists=function(a){switch(typeof a){case"string":return a.length>0;case"object":return null!==a;case"undefined":return!1}return!0},b.isHTTPS=function(){return 0===window.location.href.indexOf("https")},b.isRtmp=function(a,b){return 0===a.indexOf("rtmp")||"rtmp"===b},b.isYouTube=function(a,b){return"youtube"===b||/^(http|\/\/).*(youtube\.com|youtu\.be)\/.+/.test(a)},b.youTubeID=function(a){var b=/v[=\/]([^?&]*)|youtu\.be\/([^?]*)|^([\w-]*)$/i.exec(a);return b?b.slice(1).join("").replace("?",""):""},b.typeOf=function(b){if(null===b)return"null";var c=typeof b;return"object"===c&&a.isArray(b)?"array":c},b}.apply(b,d),!(void 0!==e&&(a.exports=e))},function(a,b,c){var d,e;d=[c(45)],e=function(a){function b(a){return a.indexOf("(format=m3u8-")>-1?"m3u8":!1}var c=function(a){return a.replace(/^\s+|\s+$/g,"")},d=function(a,b,c){for(a=""+a,c=c||"0";a.length<b;)a=c+a;return a},e=function(a,b){for(var c=0;c<a.attributes.length;c++)if(a.attributes[c].name&&a.attributes[c].name.toLowerCase()===b.toLowerCase())return a.attributes[c].value.toString();return""},f=function(a){if(!a||"rtmp"===a.substr(0,4))return"";var c=b(a);return c?c:(a=a.substring(a.lastIndexOf("/")+1,a.length).split("?")[0].split("#")[0],a.lastIndexOf(".")>-1?a.substr(a.lastIndexOf(".")+1,a.length).toLowerCase():void 0)},g=function(a){var b=parseInt(a/3600),c=parseInt(a/60)%60,e=a%60;return d(b,2)+":"+d(c,2)+":"+d(e.toFixed(3),6)},h=function(b){if(a.isNumber(b))return b;b=b.replace(",",".");var c=b.split(":"),d=0;return"s"===b.slice(-1)?d=parseFloat(b):"m"===b.slice(-1)?d=60*parseFloat(b):"h"===b.slice(-1)?d=3600*parseFloat(b):c.length>1?(d=parseFloat(c[c.length-1]),d+=60*parseFloat(c[c.length-2]),3===c.length&&(d+=3600*parseFloat(c[c.length-3]))):d=parseFloat(b),d},i=function(b,c){return a.map(b,function(a){return c+a})},j=function(b,c){return a.map(b,function(a){return a+c})};return{trim:c,pad:d,xmlAttribute:e,extension:f,hms:g,seconds:h,suffix:j,prefix:i}}.apply(b,d),!(void 0!==e&&(a.exports=e))},function(a,b,c){var d,e;d=[c(45)],e=function(a){function b(a){return function(){return d(a)}}var c={},d=a.memoize(function(a){var b=navigator.userAgent.toLowerCase();return null!==b.match(a)}),e=c.isInt=function(a){return parseFloat(a)%1===0};c.isFlashSupported=function(){var a=c.flashVersion();return a&&a>=11.2},c.isFF=b(/firefox/i),c.isIPod=b(/iP(hone|od)/i),c.isIPad=b(/iPad/i),c.isSafari602=b(/Macintosh.*Mac OS X 10_8.*6\.0\.\d* Safari/i),c.isOSX=b(/Mac OS X/i),c.isEdge=b(/\sedge\/\d+/i);var f=c.isIETrident=function(a){return c.isEdge()?!0:a?(a=parseFloat(a).toFixed(1),d(new RegExp("trident/.+rv:\\s*"+a,"i"))):d(/trident/i)},g=c.isMSIE=function(a){return a?(a=parseFloat(a).toFixed(1),d(new RegExp("msie\\s*"+a,"i"))):d(/msie/i)},h=b(/chrome/i);c.isChrome=function(){return h()&&!c.isEdge()},c.isIE=function(a){return a?(a=parseFloat(a).toFixed(1),a>=11?f(a):g(a)):g()||f()},c.isSafari=function(){return d(/safari/i)&&!d(/chrome/i)&&!d(/chromium/i)&&!d(/android/i)};var i=c.isIOS=function(a){return d(a?new RegExp("iP(hone|ad|od).+\\s(OS\\s"+a+"|.*\\sVersion/"+a+")","i"):/iP(hone|ad|od)/i)};c.isAndroidNative=function(a){return j(a,!0)};var j=c.isAndroid=function(a,b){return b&&d(/chrome\/[123456789]/i)&&!d(/chrome\/18/)?!1:a?(e(a)&&!/\./.test(a)&&(a=""+a+"."),d(new RegExp("Android\\s*"+a,"i"))):d(/Android/i)};return c.isMobile=function(){return i()||j()},c.isIframe=function(){return window.frameElement&&"IFRAME"===window.frameElement.nodeName},c.flashVersion=function(){if(c.isAndroid())return 0;var a,b=navigator.plugins;if(b&&(a=b["Shockwave Flash"],a&&a.description))return parseFloat(a.description.replace(/\D+(\d+\.?\d*).*/,"$1"));if("undefined"!=typeof window.ActiveXObject){try{if(a=new window.ActiveXObject("ShockwaveFlash.ShockwaveFlash"))return parseFloat(a.GetVariable("$version").split(" ")[1].replace(/\s*,\s*/,"."))}catch(d){return 0}return a}return 0},c}.apply(b,d),!(void 0!==e&&(a.exports=e))},function(a,b,c){var d,e;d=[c(51),c(45),c(54)],e=function(a,b,c){var d={};d.createElement=function(a){var b=document.createElement("div");return b.innerHTML=a,b.firstChild},d.styleDimension=function(a){return a+(a.toString().indexOf("%")>0?"":"px")};var e=function(a){return b.isString(a.className)?a.className.split(" "):[]},f=function(b,c){c=a.trim(c),b.className!==c&&(b.className=c)};return d.classList=function(a){return a.classList?a.classList:e(a)},d.hasClass=c.hasClass,d.addClass=function(a,c){var d=e(a),g=b.isArray(c)?c:c.split(" ");b.each(g,function(a){b.contains(d,a)||d.push(a)}),f(a,d.join(" "))},d.removeClass=function(a,c){var d=e(a),g=b.isArray(c)?c:c.split(" ");f(a,b.difference(d,g).join(" "))},d.replaceClass=function(a,b,c){var d=a.className||"";b.test(d)?d=d.replace(b,c):c&&(d+=" "+c),f(a,d)},d.toggleClass=function(a,c,e){var f=d.hasClass(a,c);e=b.isBoolean(e)?e:!f,e!==f&&(e?d.addClass(a,c):d.removeClass(a,c))},d.emptyElement=function(a){for(;a.firstChild;)a.removeChild(a.firstChild)},d.addStyleSheet=function(a){var b=document.createElement("link");b.rel="stylesheet",b.href=a,document.getElementsByTagName("head")[0].appendChild(b)},d.empty=function(a){if(a)for(;a.childElementCount>0;)a.removeChild(a.children[0])},d.bounds=function(a){var b={left:0,right:0,width:0,height:0,top:0,bottom:0};if(!a||!document.body.contains(a))return b;var c=a.getBoundingClientRect(a),d=window.pageYOffset,e=window.pageXOffset;return c.width||c.height||c.left||c.top?(b.left=c.left+e,b.right=c.right+e,b.top=c.top+d,b.bottom=c.bottom+d,b.width=c.right-c.left,b.height=c.bottom-c.top,b):b},d}.apply(b,d),!(void 0!==e&&(a.exports=e))},function(a,b,c){var d,e;d=[],e=function(){return{hasClass:function(a,b){var c=" "+b+" ";return 1===a.nodeType&&(" "+a.className+" ").replace(/[\t\r\n\f]/g," ").indexOf(c)>=0}}}.apply(b,d),!(void 0!==e&&(a.exports=e))},function(a,b,c){var d,e;d=[c(51)],e=function(a){function b(a){a=a.split("-");for(var b=1;b<a.length;b++)a[b]=a[b].charAt(0).toUpperCase()+a[b].slice(1);return a.join("")}function c(b,c,d){if(""===c||void 0===c||null===c)return"";var e=d?" !important":"";return"string"==typeof c&&isNaN(c)?/png|gif|jpe?g/i.test(c)&&c.indexOf("url")<0?"url("+c+")":c+e:0===c||"z-index"===b||"opacity"===b?""+c+e:/color/i.test(b)?"#"+a.pad(c.toString(16).replace(/^0x/i,""),6)+e:Math.ceil(c)+"px"+e}var d,e={},f=function(a,b){d||(d=document.createElement("style"),d.type="text/css",document.getElementsByTagName("head")[0].appendChild(d));var c=a+JSON.stringify(b).replace(/"/g,""),f=document.createTextNode(c);e[a]&&d.removeChild(e[a]),e[a]=f,d.appendChild(f)},g=function(a,d){if(void 0!==a&&null!==a){void 0===a.length&&(a=[a]);var e,f={};for(e in d)f[e]=c(e,d[e]);for(var g=0;g<a.length;g++){var h,i=a[g];if(void 0!==i&&null!==i)for(e in f)h=b(e),i.style[h]!==f[e]&&(i.style[h]=f[e])}}},h=function(a){for(var b in e)b.indexOf(a)>=0&&(d.removeChild(e[b]),delete e[b])},i=function(a,b){g(a,{transform:b,webkitTransform:b,msTransform:b,mozTransform:b,oTransform:b})},j=function(a,b){var c="rgb";a?(a=String(a).replace("#",""),3===a.length&&(a=a[0]+a[0]+a[1]+a[1]+a[2]+a[2])):a="000000";var d=[parseInt(a.substr(0,2),16),parseInt(a.substr(2,2),16),parseInt(a.substr(4,2),16)];return void 0!==b&&100!==b&&(c+="a",d.push(b/100)),c+"("+d.join(",")+")"};return{css:f,style:g,clearCss:h,transform:i,hexToRgba:j}}.apply(b,d),!(void 0!==e&&(a.exports=e))},function(a,b,c){var d,e;d=[c(45),c(49)],e=function(a,b){function c(a){a.onload=null,a.onprogress=null,a.onreadystatechange=null,a.onerror=null,"abort"in a&&a.abort()}function d(b,d){return function(e){var f=e.currentTarget||d.xhr;if(clearTimeout(d.timeoutId),d.retryWithoutCredentials&&d.xhr.withCredentials){c(f);var g=a.extend({},d,{xhr:null,withCredentials:!1,retryWithoutCredentials:!1});return void l(g)}d.onerror(b,d.url,f)}}function e(a){return function(b){var c=b.currentTarget||a.xhr;if(4===c.readyState){if(clearTimeout(a.timeoutId),c.status>=400){var d;return d=404===c.status?"File not found":""+c.status+"("+c.statusText+")",a.onerror(d,a.url,c)}if(200===c.status)return f(a)(b)}}}function f(a){return function(c){var d=c.currentTarget||a.xhr;if(clearTimeout(a.timeoutId),a.responseType){if("json"===a.responseType)return g(d,a)}else{var e,f=d.responseXML;if(f)try{e=f.firstChild}catch(i){}if(f&&e)return h(d,f,a);if(j&&d.responseText&&!f&&(f=b.parseXML(d.responseText),f&&f.firstChild))return h(d,f,a);if(a.requireValidXML)return void a.onerror("Invalid XML",a.url,d)}a.oncomplete(d)}}function g(b,c){if(!b.response||a.isString(b.response)&&'"'!==b.responseText.substr(1))try{b=a.extend({},b,{response:JSON.parse(b.responseText)})}catch(d){return void c.onerror("Invalid JSON",c.url,b)}return c.oncomplete(b)}function h(b,c,d){var e=c.documentElement;return d.requireValidXML&&("parsererror"===e.nodeName||e.getElementsByTagName("parsererror").length)?void d.onerror("Invalid XML",d.url,b):(b.responseXML||(b=a.extend({},b,{responseXML:c})),d.oncomplete(b))}var i=function(){},j=!1,k=function(a){var b=document.createElement("a"),c=document.createElement("a");b.href=location.href;try{return c.href=a,c.href=c.href,b.protocol+"//"+b.host!=c.protocol+"//"+c.host}catch(d){}return!0},l=function(b,g,h,l){a.isObject(b)&&(l=b,b=l.url);var m,n=a.extend({xhr:null,url:b,withCredentials:!1,retryWithoutCredentials:!1,timeout:6e4,timeoutId:-1,oncomplete:g||i,onerror:h||i,mimeType:l&&!l.responseType?"text/xml":"",requireValidXML:!1,responseType:l&&l.plainText?"text":""},l);if("XDomainRequest"in window&&k(b))m=n.xhr=new window.XDomainRequest,m.onload=f(n),m.ontimeout=m.onprogress=i,j=!0;else{if(!("XMLHttpRequest"in window))return void n.onerror("",b);m=n.xhr=new window.XMLHttpRequest,m.onreadystatechange=e(n)}var o=d("Error loading file",n);m.onerror=o,"overrideMimeType"in m?n.mimeType&&m.overrideMimeType(n.mimeType):j=!0;try{b=b.replace(/#.*$/,""),m.open("GET",b,!0)}catch(p){return o(p),m}if(n.responseType)try{m.responseType=n.responseType}catch(p){}n.timeout&&(n.timeoutId=setTimeout(function(){c(m),n.onerror("Timeout",b,m)},n.timeout));try{n.withCredentials&&"withCredentials"in m&&(m.withCredentials=!0),m.send()}catch(p){o(p)}return m};return{ajax:l,crossdomain:k}}.apply(b,d),!(void 0!==e&&(a.exports=e))},function(a,b,c){var d,e;d=[c(58),c(45),c(50),c(49),c(59)],e=function(a,b,c,d,e){var f={};return f.repo=b.memoize(function(){var b=e.split("+")[0],d=a.repo+b+"/";return c.isHTTPS()?d.replace(/^http:/,"https:"):d}),f.versionCheck=function(a){var b=("0"+a).split(/\W/),c=e.split(/\W/),d=parseFloat(b[0]),f=parseFloat(c[0]);return d>f?!1:!(d===f&&parseFloat("0"+b[1])>parseFloat(c[1]))},f.isSDK=function(a){return!(!a.analytics||!a.analytics.sdkplatform)},f.loadFrom=function(){return f.repo()},f}.apply(b,d),!(void 0!==e&&(a.exports=e))},function(a,b,c){var d,e;d=[],e=function(){return{repo:"http://ssl.p.jwpcdn.com/player/v/",SkinsIncluded:["seven"],SkinsLoadable:["beelden","bekle","five","glow","roundster","six","stormtrooper","vapor"],dvrSeekLimit:-25}}.apply(b,d),!(void 0!==e&&(a.exports=e))},function(a,b,c){var d,e;d=[],e=function(){return"7.3.6+commercial_v7-3-6.81.commercial.f002db.jwplayer.ad873d.analytics.c31916.vast.0300bb.googima.e8ba93.plugin-sharing.08a279.plugin-related.909f55.plugin-gapro.0374cd"}.apply(b,d),!(void 0!==e&&(a.exports=e))},function(a,b,c){var d,e;d=[],e=function(){var a=function(a,c,d){if(c=c||this,d=d||[],window.jwplayer&&window.jwplayer.debug)return a.apply(c,d);try{return a.apply(c,d)}catch(e){return new b(a.name,e)}},b=function(a,b){this.name=a,this.message=b.message||b.toString(),this.error=b};return{tryCatch:a,Error:b}}.apply(b,d),!(void 0!==e&&(a.exports=e))},function(a,b,c){var d,e;d=[c(45)],e=function(a){var b=function(){var b={},c={},d={},e={};return{start:function(c){b[c]=a.now(),d[c]=d[c]+1||1},end:function(d){if(b[d]){var e=a.now()-b[d];c[d]=c[d]+e||e}},dump:function(){return{counts:d,sums:c,events:e}},tick:function(b,c){e[b]=c||a.now()},between:function(a,b){return e[b]&&e[a]?e[b]-e[a]:-1}}};return b}.apply(b,d),!(void 0!==e&&(a.exports=e))},function(a,b,c){var d,e;d=[],e=function(){return{BUFFERING:"buffering",IDLE:"idle",COMPLETE:"complete",PAUSED:"paused",PLAYING:"playing",ERROR:"error",LOADING:"loading",STALLED:"stalled"}}.apply(b,d),!(void 0!==e&&(a.exports=e))},function(a,b,c){var d,e;d=[c(64),c(81),c(158)],e=function(a,b,d){var e=a.prototype.setup;return a.prototype.setup=function(a,f){e.apply(this,arguments);var g=this._model.get("edition"),h=b(g),i=this._model.get("cast"),j=this;h("casting")&&i&&i.appid&&c.e(6,function(a){var b=c(159);j._castController=new b(j,j._model),j.castToggle=j._castController.castToggle.bind(j._castController)});var k=d.setup();this.once("ready",k.onReady,this),f.getAdBlock=k.checkAdBlock},a}.apply(b,d),!(void 0!==e&&(a.exports=e))},function(a,b,c){var d,e;d=[c(73),c(115),c(74),c(45),c(93),c(111),c(77),c(114),c(65),c(48),c(116),c(47),c(76),c(62),c(46),c(156)],e=function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p){function q(a){return function(){var b=Array.prototype.slice.call(arguments,0);this.eventsQueue.push([a,b])}}function r(a){return a===n.LOADING||a===n.STALLED?n.BUFFERING:a}var s=function(a){this.originalContainer=this.currentContainer=a,this.eventsQueue=[],d.extend(this,l),this._model=new g};return s.prototype={play:q("play"),pause:q("pause"),setVolume:q("setVolume"),setMute:q("setMute"),seek:q("seek"),stop:q("stop"),load:q("load"),playlistNext:q("playlistNext"),playlistPrev:q("playlistPrev"),playlistItem:q("playlistItem"),setFullscreen:q("setFullscreen"),
setCurrentCaptions:q("setCurrentCaptions"),setCurrentQuality:q("setCurrentQuality"),setup:function(g,l){function p(){U.mediaModel.on("change:state",function(a,b){var c=r(b);U.set("state",c)})}function q(){X=null,D(U.get("item")),U.on("change:state",m,this),U.on("change:castState",function(a,b){aa.trigger(o.JWPLAYER_CAST_SESSION,b)}),U.on("change:fullscreen",function(a,b){aa.trigger(o.JWPLAYER_FULLSCREEN,{fullscreen:b})}),U.on("itemReady",function(){aa.trigger(o.JWPLAYER_PLAYLIST_ITEM,{index:U.get("item"),item:U.get("playlistItem")})}),U.on("change:playlist",function(a,b){b.length&&aa.trigger(o.JWPLAYER_PLAYLIST_LOADED,{playlist:b})}),U.on("change:volume",function(a,b){aa.trigger(o.JWPLAYER_MEDIA_VOLUME,{volume:b})}),U.on("change:mute",function(a,b){aa.trigger(o.JWPLAYER_MEDIA_MUTE,{mute:b})}),U.on("change:controls",function(a,b){aa.trigger(o.JWPLAYER_CONTROLS,{controls:b})}),U.on("change:scrubbing",function(a,b){b?y():w()}),U.on("change:captionsList",function(a,b){aa.trigger(o.JWPLAYER_CAPTIONS_LIST,{tracks:b,track:Q()})}),U.mediaController.on("all",aa.trigger.bind(aa)),V.on("all",aa.trigger.bind(aa)),this.showView(V.element()),window.addEventListener("beforeunload",function(){X&&X.destroy(),U&&U.destroy()}),d.defer(s)}function s(){for(aa.trigger(o.JWPLAYER_READY,{setupTime:0}),aa.trigger(o.JWPLAYER_PLAYLIST_LOADED,{playlist:U.get("playlist")}),aa.trigger(o.JWPLAYER_PLAYLIST_ITEM,{index:U.get("item"),item:U.get("playlistItem")}),aa.trigger(o.JWPLAYER_CAPTIONS_LIST,{tracks:U.get("captionsList"),track:U.get("captionsIndex")}),U.get("autostart")&&w({reason:"autostart"});aa.eventsQueue.length>0;){var a=aa.eventsQueue.shift(),b=a[0],c=a[1]||[];aa[b].apply(aa,c)}}function t(a){switch(U.get("state")===n.ERROR&&U.set("state",n.IDLE),x(!0),U.get("autostart")&&U.once("itemReady",w),typeof a){case"string":u(a);break;case"object":var b=C(a);b&&D(0);break;case"number":D(a)}}function u(a){var b=new i;b.on(o.JWPLAYER_PLAYLIST_LOADED,function(a){t(a.playlist)}),b.on(o.JWPLAYER_ERROR,function(a){a.message="Error loading playlist: "+a.message,this.triggerError(a)},this),b.load(a)}function v(){var a=aa._instreamAdapter&&aa._instreamAdapter.getState();return d.isString(a)?a:U.get("state")}function w(a){var b;if(a&&U.set("playReason",a.reason),U.get("state")!==n.ERROR){var c=aa._instreamAdapter&&aa._instreamAdapter.getState();if(d.isString(c))return l.pauseAd(!1);if(U.get("state")===n.COMPLETE&&(x(!0),D(0)),!$&&($=!0,aa.trigger(o.JWPLAYER_MEDIA_BEFOREPLAY,{playReason:U.get("playReason")}),$=!1,Z))return Z=!1,void(Y=null);if(z()){if(0===U.get("playlist").length)return!1;b=j.tryCatch(function(){U.loadVideo()})}else U.get("state")===n.PAUSED&&(b=j.tryCatch(function(){U.playVideo()}));return b instanceof j.Error?(aa.triggerError(b),Y=null,!1):!0}}function x(a){U.off("itemReady",w);var b=!a;Y=null;var c=j.tryCatch(function(){U.stopVideo()},aa);return c instanceof j.Error?(aa.triggerError(c),!1):(b&&(_=!0),$&&(Z=!0),!0)}function y(){Y=null;var a=aa._instreamAdapter&&aa._instreamAdapter.getState();if(d.isString(a))return l.pauseAd(!0);switch(U.get("state")){case n.ERROR:return!1;case n.PLAYING:case n.BUFFERING:var b=j.tryCatch(function(){ba().pause()},this);if(b instanceof j.Error)return aa.triggerError(b),!1;break;default:$&&(Z=!0)}return!0}function z(){var a=U.get("state");return a===n.IDLE||a===n.COMPLETE||a===n.ERROR}function A(a){U.get("state")!==n.ERROR&&(U.get("scrubbing")||U.get("state")===n.PLAYING||w(!0),ba().seek(a))}function B(a,b){x(!0),D(a),w(b)}function C(a){var b=h(a);return b=h.filterPlaylist(b,U.getProviders(),U.get("androidhls"),U.get("drm"),U.get("preload")),U.set("playlist",b),d.isArray(b)&&0!==b.length?!0:(aa.triggerError({message:"Error loading playlist: No playable sources found"}),!1)}function D(a){var b=U.get("playlist");a=(a+b.length)%b.length,U.set("item",a),U.set("playlistItem",b[a]),U.setActiveItem(b[a])}function E(a){B(U.get("item")-1,a||{reason:"external"})}function F(a){B(U.get("item")+1,a||{reason:"external"})}function G(){if(z()){if(_)return void(_=!1);Y=G;var a=U.get("item");return a===U.get("playlist").length-1?void(U.get("repeat")?F({reason:"repeat"}):(U.set("state",n.COMPLETE),aa.trigger(o.JWPLAYER_PLAYLIST_COMPLETE,{}))):void F({reason:"playlist"})}}function H(a){ba().setCurrentQuality(a)}function I(){return ba()?ba().getCurrentQuality():-1}function J(){return this._model?this._model.getConfiguration():void 0}function K(){if(this._model.mediaModel)return this._model.mediaModel.get("visualQuality");var a=L();if(a){var b=I(),c=a[b];if(c)return{level:d.extend({index:b},c),mode:"",reason:""}}return null}function L(){return ba()?ba().getQualityLevels():null}function M(a){ba()&&ba().setCurrentAudioTrack(a)}function N(){return ba()?ba().getCurrentAudioTrack():-1}function O(){return ba()?ba().getAudioTracks():null}function P(a){U.persistVideoSubtitleTrack(a),aa.trigger(o.JWPLAYER_CAPTIONS_CHANGED,{tracks:R(),track:a})}function Q(){return W.getCurrentIndex()}function R(){return W.getCaptionsList()}function S(){var a=U.getVideo();if(a){var b=a.detachMedia();if(b instanceof HTMLVideoElement)return b}return null}function T(){var a=j.tryCatch(function(){U.getVideo().attachMedia()});return a instanceof j.Error?void j.log("Error calling _attachMedia",a):void("function"==typeof Y&&Y())}var U,V,W,X,Y,Z,$=!1,_=!1,aa=this,ba=function(){return U.getVideo()},ca=new a(g);U=this._model.setup(ca),V=this._view=new k(l,U),W=new f(l,U),X=new e(l,U,V,C),X.on(o.JWPLAYER_READY,q,this),X.on(o.JWPLAYER_SETUP_ERROR,this.setupError,this),U.mediaController.on(o.JWPLAYER_MEDIA_COMPLETE,function(){d.defer(G)}),U.mediaController.on(o.JWPLAYER_MEDIA_ERROR,this.triggerError,this),U.on("change:flashBlocked",function(a,b){if(!b)return void this._model.set("errorEvent",void 0);var c=!!a.get("flashThrottle"),d={message:c?"Click to run Flash":"Flash plugin failed to load"};c||this.trigger(o.JWPLAYER_ERROR,d),this._model.set("errorEvent",d)},this),p(),U.on("change:mediaModel",p),this.play=w,this.pause=y,this.seek=A,this.stop=x,this.load=t,this.playlistNext=F,this.playlistPrev=E,this.playlistItem=B,this.setCurrentCaptions=P,this.setCurrentQuality=H,this.detachMedia=S,this.attachMedia=T,this.getCurrentQuality=I,this.getQualityLevels=L,this.setCurrentAudioTrack=M,this.getCurrentAudioTrack=N,this.getAudioTracks=O,this.getCurrentCaptions=Q,this.getCaptionsList=R,this.getVisualQuality=K,this.getConfig=J,this.getState=v,this.setVolume=U.setVolume,this.setMute=U.setMute,this.getProvider=function(){return U.get("provider")},this.getWidth=function(){return U.get("containerWidth")},this.getHeight=function(){return U.get("containerHeight")},this.getContainer=function(){return this.currentContainer},this.resize=V.resize,this.getSafeRegion=V.getSafeRegion,this.setCues=V.addCues,this.setFullscreen=function(a){d.isBoolean(a)||(a=!U.get("fullscreen")),U.set("fullscreen",a),this._instreamAdapter&&this._instreamAdapter._adModel&&this._instreamAdapter._adModel.set("fullscreen",a)},this.addButton=function(a,b,c,e,f){var g={img:a,tooltip:b,callback:c,id:e,btnClass:f},h=U.get("dock");h=h?h.slice(0):[],h=d.reject(h,d.matches({id:g.id})),h.push(g),U.set("dock",h)},this.removeButton=function(a){var b=U.get("dock")||[];b=d.reject(b,d.matches({id:a})),U.set("dock",b)},this.checkBeforePlay=function(){return $},this.getItemQoe=function(){return U._qoeItem},this.setControls=function(a){d.isBoolean(a)||(a=!U.get("controls")),U.set("controls",a);var b=U.getVideo();b&&b.setControls(a)},this.playerDestroy=function(){this.stop(),this.showView(this.originalContainer),V&&V.destroy(),U&&U.destroy(),X&&(X.destroy(),X=null)},this.isBeforePlay=this.checkBeforePlay,this.isBeforeComplete=function(){return U.getVideo().checkComplete()},this.createInstream=function(){return this.instreamDestroy(),this._instreamAdapter=new c(this,U,V),this._instreamAdapter},this.skipAd=function(){this._instreamAdapter&&this._instreamAdapter.skipAd()},this.instreamDestroy=function(){aa._instreamAdapter&&aa._instreamAdapter.destroy()},b(l,this),X.start()},showView:function(a){(document.documentElement.contains(this.currentContainer)||(this.currentContainer=document.getElementById(this._model.get("id")),this.currentContainer))&&(this.currentContainer.parentElement&&this.currentContainer.parentElement.replaceChild(a,this.currentContainer),this.currentContainer=a)},triggerError:function(a){this._model.set("errorEvent",a),this._model.set("state",n.ERROR),this._model.once("change:state",function(){this._model.set("errorEvent",void 0)},this),this.trigger(o.JWPLAYER_ERROR,a)},setupError:function(a){var b=a.message,c=j.createElement(p(this._model.get("id"),this._model.get("skin"),b)),e=this._model.get("width"),f=this._model.get("height");j.style(c,{width:e.toString().indexOf("%")>0?e:e+"px",height:f.toString().indexOf("%")>0?f:f+"px"}),this.showView(c);var g=this;d.defer(function(){g.trigger(o.JWPLAYER_SETUP_ERROR,{message:b})})}},s}.apply(b,d),!(void 0!==e&&(a.exports=e))},function(a,b,c){var d,e;d=[c(66),c(67),c(48),c(46),c(47),c(45)],e=function(a,b,c,d,e,f){var g=function(){function g(e){var g=c.tryCatch(function(){var c,g=e.responseXML?e.responseXML.childNodes:null,h="";if(g){for(var k=0;k<g.length&&(h=g[k],8===h.nodeType);k++);"xml"===a.localName(h)&&(h=h.nextSibling),"rss"===a.localName(h)&&(c=b.parse(h))}if(!c)try{c=JSON.parse(e.responseText),f.isArray(c)||(c=c.playlist)}catch(l){return void i("Not a valid RSS/JSON feed")}j.trigger(d.JWPLAYER_PLAYLIST_LOADED,{playlist:c})});g instanceof c.Error&&i()}function h(a){i("Playlist load error: "+a)}function i(a){j.trigger(d.JWPLAYER_ERROR,{message:a?a:"Error loading file"})}var j=f.extend(this,e);this.load=function(a){c.ajax(a,g,h)},this.destroy=function(){this.off()}};return g}.apply(b,d),!(void 0!==e&&(a.exports=e))},function(a,b,c){var d,e;d=[c(51)],e=function(a){return{localName:function(a){return a?a.localName?a.localName:a.baseName?a.baseName:"":""},textContent:function(b){return b?b.textContent?a.trim(b.textContent):b.text?a.trim(b.text):"":""},getChildNode:function(a,b){return a.childNodes[b]},numChildren:function(a){return a.childNodes?a.childNodes.length:0}}}.apply(b,d),!(void 0!==e&&(a.exports=e))},function(a,b,c){var d,e;d=[c(51),c(66),c(68),c(69),c(70)],e=function(a,b,c,d,e){function f(b){for(var f={},h=0;h<b.childNodes.length;h++){var i=b.childNodes[h],k=j(i);if(k)switch(k.toLowerCase()){case"enclosure":f.file=a.xmlAttribute(i,"url");break;case"title":f.title=g(i);break;case"guid":f.mediaid=g(i);break;case"pubdate":f.date=g(i);break;case"description":f.description=g(i);break;case"link":f.link=g(i);break;case"category":f.tags?f.tags+=g(i):f.tags=g(i)}}return f=d(b,f),f=c(b,f),new e(f)}var g=b.textContent,h=b.getChildNode,i=b.numChildren,j=b.localName,k={};return k.parse=function(a){for(var b=[],c=0;c<i(a);c++){var d=h(a,c),e=j(d).toLowerCase();if("channel"===e)for(var g=0;g<i(d);g++){var k=h(d,g);"item"===j(k).toLowerCase()&&b.push(f(k))}}return b},k}.apply(b,d),!(void 0!==e&&(a.exports=e))},function(a,b,c){var d,e;d=[c(66),c(51),c(48)],e=function(a,b,c){var d="jwplayer",e=function(e,f){for(var g=[],h=[],i=b.xmlAttribute,j="default",k="label",l="file",m="type",n=0;n<e.childNodes.length;n++){var o=e.childNodes[n];if(o.prefix===d){var p=a.localName(o);"source"===p?(delete f.sources,g.push({file:i(o,l),"default":i(o,j),label:i(o,k),type:i(o,m)})):"track"===p?(delete f.tracks,h.push({file:i(o,l),"default":i(o,j),kind:i(o,"kind"),label:i(o,k)})):(f[p]=c.serialize(a.textContent(o)),"file"===p&&f.sources&&delete f.sources)}f[l]||(f[l]=f.link)}if(g.length)for(f.sources=[],n=0;n<g.length;n++)g[n].file.length>0&&(g[n][j]="true"===g[n][j],g[n].label.length||delete g[n].label,f.sources.push(g[n]));if(h.length)for(f.tracks=[],n=0;n<h.length;n++)h[n].file.length>0&&(h[n][j]="true"===h[n][j],h[n].kind=h[n].kind.length?h[n].kind:"captions",h[n].label.length||delete h[n].label,f.tracks.push(h[n]));return f};return e}.apply(b,d),!(void 0!==e&&(a.exports=e))},function(a,b,c){var d,e;d=[c(66),c(51),c(48)],e=function(a,b,c){var d=b.xmlAttribute,e=a.localName,f=a.textContent,g=a.numChildren,h="media",i=function(a,b){function j(a){var b={zh:"Chinese",nl:"Dutch",en:"English",fr:"French",de:"German",it:"Italian",ja:"Japanese",pt:"Portuguese",ru:"Russian",es:"Spanish"};return b[a]?b[a]:a}var k,l,m="tracks",n=[];for(l=0;l<g(a);l++)if(k=a.childNodes[l],k.prefix===h){if(!e(k))continue;switch(e(k).toLowerCase()){case"content":d(k,"duration")&&(b.duration=c.seconds(d(k,"duration"))),g(k)>0&&(b=i(k,b)),d(k,"url")&&(b.sources||(b.sources=[]),b.sources.push({file:d(k,"url"),type:d(k,"type"),width:d(k,"width"),label:d(k,"label")}));break;case"title":b.title=f(k);break;case"description":b.description=f(k);break;case"guid":b.mediaid=f(k);break;case"thumbnail":b.image||(b.image=d(k,"url"));break;case"player":break;case"group":i(k,b);break;case"subtitle":var o={};o.file=d(k,"url"),o.kind="captions",d(k,"lang").length>0&&(o.label=j(d(k,"lang"))),n.push(o)}}for(b.hasOwnProperty(m)||(b[m]=[]),l=0;l<n.length;l++)b[m].push(n[l]);return b};return i}.apply(b,d),!(void 0!==e&&(a.exports=e))},function(a,b,c){var d,e;d=[c(45),c(71),c(72)],e=function(a,b,c){var d={sources:[],tracks:[]},e=function(e){e=e||{},a.isArray(e.tracks)||delete e.tracks;var f=a.extend({},d,e);a.isObject(f.sources)&&!a.isArray(f.sources)&&(f.sources=[b(f.sources)]),a.isArray(f.sources)&&0!==f.sources.length||(e.levels?f.sources=e.levels:f.sources=[b(e)]);for(var g=0;g<f.sources.length;g++){var h=f.sources[g];if(h){var i=h["default"];i?h["default"]="true"===i.toString():h["default"]=!1,f.sources[g].label||(f.sources[g].label=g.toString()),f.sources[g]=b(f.sources[g])}}return f.sources=a.compact(f.sources),a.isArray(f.tracks)||(f.tracks=[]),a.isArray(f.captions)&&(f.tracks=f.tracks.concat(f.captions),delete f.captions),f.tracks=a.compact(a.map(f.tracks,c)),f};return e}.apply(b,d),!(void 0!==e&&(a.exports=e))},function(a,b,c){var d,e;d=[c(48),c(51),c(45)],e=function(a,b,c){var d={"default":!1},e=function(e){if(e&&e.file){var f=c.extend({},d,e);f.file=b.trim(""+f.file);var g=/^[^\/]+\/(?:x-)?([^\/]+)$/;if(a.isYouTube(f.file)?f.type="youtube":a.isRtmp(f.file)?f.type="rtmp":g.test(f.type)?f.type=f.type.replace(g,"$1"):f.type||(f.type=b.extension(f.file)),f.type){switch(f.type){case"m3u8":case"vnd.apple.mpegurl":f.type="hls";break;case"dash+xml":f.type="dash";break;case"smil":f.type="rtmp";break;case"m4a":f.type="aac"}return c.each(f,function(a,b){""===a&&delete f[b]}),f}}};return e}.apply(b,d),!(void 0!==e&&(a.exports=e))},function(a,b,c){var d,e;d=[c(45)],e=function(a){var b={kind:"captions","default":!1},c=function(c){return c&&c.file?a.extend({},b,c):void 0};return c}.apply(b,d),!(void 0!==e&&(a.exports=e))},function(a,b,c){var d,e;d=[c(48),c(45)],e=function(a,b){function d(c){b.each(c,function(b,d){c[d]=a.serialize(b)})}function e(a){return a.slice&&"px"===a.slice(-2)&&(a=a.slice(0,-2)),a}function f(b,c){if(-1===c.toString().indexOf("%"))return 0;if("string"!=typeof b||!a.exists(b))return 0;if(/^\d*\.?\d+%$/.test(b))return b;var d=b.indexOf(":");if(-1===d)return 0;var e=parseFloat(b.substr(0,d)),f=parseFloat(b.substr(d+1));return 0>=e||0>=f?0:f/e*100+"%"}var g={autostart:!1,controls:!0,displaytitle:!0,displaydescription:!0,mobilecontrols:!1,repeat:!1,castAvailable:!1,skin:"seven",stretching:"uniform",mute:!1,volume:90,width:480,height:270},h=function(h){var i=b.extend({},(window.jwplayer||{}).defaults,h);d(i);var j=b.extend({},g,i);if("."===j.base&&(j.base=a.getScriptPath("jwplayer.js")),j.base=(j.base||a.loadFrom()).replace(/\/?$/,"/"),c.p=j.base,j.width=e(j.width),j.height=e(j.height),j.flashplayer=j.flashplayer||a.getScriptPath("jwplayer.js")+"jwplayer.flash.swf","http:"===window.location.protocol&&(j.flashplayer=j.flashplayer.replace("https","http")),j.aspectratio=f(j.aspectratio,j.width),b.isObject(j.skin)&&(j.skinUrl=j.skin.url,j.skinColorInactive=j.skin.inactive,j.skinColorActive=j.skin.active,j.skinColorBackground=j.skin.background,j.skin=b.isString(j.skin.name)?j.skin.name:g.skin),b.isString(j.skin)&&j.skin.indexOf(".xml")>0&&(console.log("JW Player does not support XML skins, please update your config"),j.skin=j.skin.replace(".xml","")),j.aspectratio||delete j.aspectratio,!j.playlist){var k=b.pick(j,["title","description","type","mediaid","image","file","sources","tracks","preload"]);j.playlist=[k]}return j};return h}.apply(b,d),!(void 0!==e&&(a.exports=e))},function(a,b,c){var d,e;d=[c(75),c(92),c(46),c(62),c(48),c(47),c(45)],e=function(a,b,c,d,e,f,g){function h(c){var d=c.get("provider").name||"";return d.indexOf("flash")>=0?b:a}var i={skipoffset:null,tag:null},j=function(a,b,f){function j(a,b){b=b||{},u.tag&&!b.tag&&(b.tag=u.tag),this.trigger(a,b)}function k(a){s._adModel.set("duration",a.duration),s._adModel.set("position",a.position)}function l(a){if(m&&t+1<m.length){s._adModel.set("state","buffering"),b.set("skipButton",!1),t++;var d,e=m[t];n&&(d=n[t]),this.loadItem(e,d)}else a.type===c.JWPLAYER_MEDIA_COMPLETE&&(j.call(this,a.type,a),this.trigger(c.JWPLAYER_PLAYLIST_COMPLETE,{})),this.destroy()}var m,n,o,p,q,r=h(b),s=new r(a,b),t=0,u={},v=g.bind(function(a){a=a||{},a.hasControls=!!b.get("controls"),this.trigger(c.JWPLAYER_INSTREAM_CLICK,a),s&&s._adModel&&(s._adModel.get("state")===d.PAUSED?a.hasControls&&s.instreamPlay():s.instreamPause())},this),w=g.bind(function(){s&&s._adModel&&s._adModel.get("state")===d.PAUSED&&b.get("controls")&&(a.setFullscreen(),a.play())},this);this.type="instream",this.init=function(){o=b.getVideo(),p=b.get("position"),q=b.get("playlist")[b.get("item")],s.on("all",j,this),s.on(c.JWPLAYER_MEDIA_TIME,k,this),s.on(c.JWPLAYER_MEDIA_COMPLETE,l,this),s.init(),o.detachMedia(),b.mediaModel.set("state",d.BUFFERING),a.checkBeforePlay()||0===p&&!o.checkComplete()?(p=0,b.set("preInstreamState","instream-preroll")):o&&o.checkComplete()||b.get("state")===d.COMPLETE?b.set("preInstreamState","instream-postroll"):b.set("preInstreamState","instream-midroll");var g=b.get("state");return g!==d.PLAYING&&g!==d.BUFFERING||o.pause(),f.setupInstream(s._adModel),s._adModel.set("state",d.BUFFERING),f.clickHandler().setAlternateClickHandlers(e.noop,null),this.setText("Loading ad"),this},this.loadItem=function(a,d){if(e.isAndroid(2.3))return void this.trigger({type:c.JWPLAYER_ERROR,message:"Error loading instream: Cannot play instream on Android 2.3"});g.isArray(a)&&(m=a,n=d,a=m[t],n&&(d=n[t])),this.trigger(c.JWPLAYER_PLAYLIST_ITEM,{index:t,item:a}),u=g.extend({},i,d),s.load(a),this.addClickHandler();var f=a.skipoffset||u.skipoffset;f&&(s._adModel.set("skipMessage",u.skipMessage),s._adModel.set("skipText",u.skipText),s._adModel.set("skipOffset",f),b.set("skipButton",!0))},this.applyProviderListeners=function(a){s.applyProviderListeners(a),this.addClickHandler()},this.play=function(){s.instreamPlay()},this.pause=function(){s.instreamPause()},this.hide=function(){s.hide()},this.addClickHandler=function(){f.clickHandler().setAlternateClickHandlers(v,w),s.on(c.JWPLAYER_MEDIA_META,this.metaHandler,this)},this.skipAd=function(a){var b=c.JWPLAYER_AD_SKIPPED;this.trigger(b,a),l.call(this,{type:b})},this.metaHandler=function(a){a.width&&a.height&&f.resizeMedia()},this.destroy=function(){if(this.off(),b.set("skipButton",!1),s){f.clickHandler()&&f.clickHandler().revertAlternateClickHandlers(),s.instreamDestroy(),f.destroyInstream(),s=null,a.attachMedia();var c=b.get("preInstreamState");switch(c){case"instream-preroll":case"instream-midroll":var h=g.extend({},q);h.starttime=p,b.loadVideo(h),e.isMobile()&&b.mediaModel.get("state")===d.BUFFERING&&o.setState(d.BUFFERING),o.play();break;case"instream-postroll":case"instream-idle":o.stop()}}},this.getState=function(){return s&&s._adModel?s._adModel.get("state"):!1},this.setText=function(a){f.setAltText(a?a:"")},this.hide=function(){f.useExternalControls()}};return g.extend(j.prototype,f),j}.apply(b,d),!(void 0!==e&&(a.exports=e))},function(a,b,c){var d,e;d=[c(45),c(47),c(76),c(46),c(62),c(77)],e=function(a,b,c,d,e,f){var g=function(g,h){function i(b){var e=b||m.getVideo();if(n!==e){if(n=e,!e)return;e.off(),e.on("all",function(b,c){c=a.extend({},c,{type:b}),this.trigger(b,c)},o),e.on(d.JWPLAYER_MEDIA_BUFFER_FULL,l),e.on(d.JWPLAYER_PLAYER_STATE,j),e.attachMedia(),e.volume(h.get("volume")),e.mute(h.get("mute")),m.on("change:state",c,o)}}function j(a){switch(a.newstate){case e.PLAYING:m.set("state",a.newstate);break;case e.PAUSED:m.set("state",a.newstate)}}function k(a){h.trigger(a.type,a),o.trigger(d.JWPLAYER_FULLSCREEN,{fullscreen:a.jwstate})}function l(){m.getVideo().play()}var m,n,o=a.extend(this,b);return g.on(d.JWPLAYER_FULLSCREEN,function(a){this.trigger(d.JWPLAYER_FULLSCREEN,a)},o),this.init=function(){m=(new f).setup({id:h.get("id"),volume:h.get("volume"),fullscreen:h.get("fullscreen"),mute:h.get("mute")}),m.on("fullscreenchange",k),this._adModel=m},o.load=function(a){m.set("item",0),m.set("playlistItem",a),m.setActiveItem(a),i(),m.off(d.JWPLAYER_ERROR),m.on(d.JWPLAYER_ERROR,function(a){this.trigger(d.JWPLAYER_ERROR,a)},o),m.loadVideo(a)},o.applyProviderListeners=function(a){i(a),a.off(d.JWPLAYER_ERROR),a.on(d.JWPLAYER_ERROR,function(a){this.trigger(d.JWPLAYER_ERROR,a)},o),h.on("change:volume",function(a,b){n.volume(b)},o),h.on("change:mute",function(a,b){n.mute(b)},o)},this.instreamDestroy=function(){m&&(m.off(),this.off(),n&&(n.detachMedia(),n.off(),m.getVideo()&&n.destroy()),m=null,g.off(null,null,this),g=null)},o.instreamPlay=function(){m.getVideo()&&m.getVideo().play(!0)},o.instreamPause=function(){m.getVideo()&&m.getVideo().pause(!0)},o};return g}.apply(b,d),!(void 0!==e&&(a.exports=e))},function(a,b,c){var d,e;d=[c(62)],e=function(a){function b(b){return b===a.COMPLETE||b===a.ERROR?a.IDLE:b}return function(a,c,d){if(c=b(c),d=b(d),c!==d){var e=c.replace(/(?:ing|d)$/,""),f={type:e,newstate:c,oldstate:d,reason:a.mediaModel.get("state")};"play"===e&&(f.playReason=a.get("playReason")),this.trigger(e,f)}}}.apply(b,d),!(void 0!==e&&(a.exports=e))},function(a,b,c){var d,e;d=[c(48),c(78),c(89),c(90),c(45),c(47),c(91),c(46),c(62)],e=function(a,b,c,d,e,f,g,h,i){var j=["volume","mute","captionLabel","qualityLabel"],k=function(){function g(a,b){switch(a){case"flashThrottle":var c="resume"!==b.state;this.set("flashThrottle",c),this.set("flashBlocked",c);break;case"flashBlocked":return void this.set("flashBlocked",!0);case"flashUnblocked":return void this.set("flashBlocked",!1);case"volume":case"mute":return void this.set(a,b[a]);case h.JWPLAYER_MEDIA_TYPE:this.mediaModel.set("mediaType",b.mediaType);break;case h.JWPLAYER_PLAYER_STATE:return void this.mediaModel.set("state",b.newstate);case h.JWPLAYER_MEDIA_BUFFER:this.set("buffer",b.bufferPercent);case h.JWPLAYER_MEDIA_META:var d=b.duration;e.isNumber(d)&&(this.mediaModel.set("duration",d),this.set("duration",d));break;case h.JWPLAYER_MEDIA_BUFFER_FULL:this.mediaModel.get("playAttempt")?this.playVideo():this.mediaModel.on("change:playAttempt",function(){this.playVideo()},this);break;case h.JWPLAYER_MEDIA_TIME:this.mediaModel.set("position",b.position),this.set("position",b.position),e.isNumber(b.duration)&&(this.mediaModel.set("duration",b.duration),this.set("duration",b.duration));break;case h.JWPLAYER_PROVIDER_CHANGED:this.set("provider",m.getName());break;case h.JWPLAYER_MEDIA_LEVELS:this.setQualityLevel(b.currentQuality,b.levels),this.mediaModel.set("levels",b.levels);break;case h.JWPLAYER_MEDIA_LEVEL_CHANGED:this.setQualityLevel(b.currentQuality,b.levels),this.persistQualityLevel(b.currentQuality,b.levels);break;case h.JWPLAYER_AUDIO_TRACKS:this.setCurrentAudioTrack(b.currentTrack,b.tracks),this.mediaModel.set("audioTracks",b.tracks);break;case h.JWPLAYER_AUDIO_TRACK_CHANGED:this.setCurrentAudioTrack(b.currentTrack,b.tracks);break;case"subtitlesTrackChanged":this.setVideoSubtitleTrack(b.currentTrack,b.tracks);break;case"visualQuality":var f=e.extend({},b);this.mediaModel.set("visualQuality",f)}var g=e.extend({},b,{type:a});this.mediaController.trigger(a,g)}var k,m,n=this,o=a.noop;this.mediaController=e.extend({},f),this.mediaModel=new l,d.model(this),this.set("mediaModel",this.mediaModel),this.setup=function(b){var d=new c;return d.track(j,this),e.extend(this.attributes,d.getAllItems(),b,{item:0,state:i.IDLE,flashBlocked:!1,fullscreen:!1,compactUI:!1,scrubbing:!1,duration:0,position:0,buffer:0}),a.isMobile()&&!b.mobileSdk&&this.set("autostart",!1),this.updateProviders(),this},this.getConfiguration=function(){return e.omit(this.clone(),["mediaModel"])},this.updateProviders=function(){k=new b(this.getConfiguration())},this.setQualityLevel=function(a,b){a>-1&&b.length>1&&"youtube"!==m.getName().name&&this.mediaModel.set("currentLevel",parseInt(a))},this.persistQualityLevel=function(a,b){var c=b[a]||{},d=c.label;this.set("qualityLabel",d)},this.setCurrentAudioTrack=function(a,b){a>-1&&b.length>0&&a<b.length&&this.mediaModel.set("currentAudioTrack",parseInt(a))},this.onMediaContainer=function(){var a=this.get("mediaContainer");o.setContainer(a)},this.changeVideoProvider=function(a){this.off("change:mediaContainer",this.onMediaContainer),m&&(m.off(null,null,this),m.getContainer()&&m.remove()),o=new a(n.get("id"),n.getConfiguration());var b=this.get("mediaContainer");b?o.setContainer(b):this.once("change:mediaContainer",this.onMediaContainer),this.set("provider",o.getName()),-1===o.getName().name.indexOf("flash")&&(this.set("flashThrottle",void 0),this.set("flashBlocked",!1)),m=o,m.volume(n.get("volume")),m.mute(n.get("mute")),m.on("all",g,this)},this.destroy=function(){this.off(),m&&(m.off(null,null,this),m.destroy())},this.getVideo=function(){return m},this.setFullscreen=function(a){a=!!a,a!==n.get("fullscreen")&&n.set("fullscreen",a)},this.chooseProvider=function(a){return k.choose(a).provider},this.setActiveItem=function(a){this.mediaModel.off(),this.mediaModel=new l,this.set("mediaModel",this.mediaModel);var b=a&&a.sources&&a.sources[0];if(void 0!==b){var c=this.chooseProvider(b);if(!c)throw new Error("No suitable provider found");o instanceof c||n.changeVideoProvider(c),o.init&&o.init(a),this.trigger("itemReady",a)}},this.getProviders=function(){return k},this.resetProvider=function(){o=null},this.setVolume=function(a){a=Math.round(a),n.set("volume",a),m&&m.volume(a);var b=0===a;b!==n.get("mute")&&n.setMute(b)},this.setMute=function(b){if(a.exists(b)||(b=!n.get("mute")),n.set("mute",b),m&&m.mute(b),!b){var c=Math.max(10,n.get("volume"));this.setVolume(c)}},this.loadVideo=function(a){if(this.mediaModel.set("playAttempt",!0),this.mediaController.trigger(h.JWPLAYER_MEDIA_PLAY_ATTEMPT,{playReason:this.get("playReason")}),!a){var b=this.get("item");a=this.get("playlist")[b]}this.set("position",a.starttime||0),this.set("duration",a.duration||0),m.load(a)},this.stopVideo=function(){m&&m.stop()},this.playVideo=function(){m.play()},this.persistCaptionsTrack=function(){var a=this.get("captionsTrack");a?this.set("captionLabel",a.label):this.set("captionLabel","Off")},this.setVideoSubtitleTrack=function(a,b){this.set("captionsIndex",a),a&&b&&a<=b.length&&b[a-1].data&&this.set("captionsTrack",b[a-1]),m&&m.setSubtitlesTrack&&m.setSubtitlesTrack(a)},this.persistVideoSubtitleTrack=function(a){this.setVideoSubtitleTrack(a),this.persistCaptionsTrack()}},l=k.MediaModel=function(){this.set("state",i.IDLE)};return e.extend(k.prototype,g),e.extend(l.prototype,g),k}.apply(b,d),!(void 0!==e&&(a.exports=e))},function(a,b,c){var d,e;d=[c(79)],e=function(a){return a.prototype.providerSupports=function(a,b){return a.supports(b,this.config.edition)},a}.apply(b,d),!(void 0!==e&&(a.exports=e))},function(a,b,c){var d,e;d=[c(80),c(84),c(45)],e=function(a,b,c){function d(b){this.providers=a.slice(),this.config=b||{},"flash"===this.config.primary&&f(this.providers,"html5","flash")}function e(a,b){for(var c=0;c<a.length;c++)if(a[c].name===b)return c;return-1}function f(a,b,c){var d=e(a,b),f=e(a,c),g=a[d];a[d]=a[f],a[f]=g}return c.extend(d.prototype,{providerSupports:function(a,b){return a.supports(b)},choose:function(a){a=c.isObject(a)?a:{};for(var d=this.providers.length,e=0;d>e;e++){var f=this.providers[e];if(this.providerSupports(f,a)){var g=d-e-1;return{priority:g,name:f.name,type:a.type,provider:b[f.name]}}}return null}}),d}.apply(b,d),!(void 0!==e&&(a.exports=e))},function(a,b,c){var d,e;d=[c(48),c(81),c(45),c(82)],e=function(a,b,c,d){function e(c,d){var e=b(d);if(!e("dash"))return!1;if(c.drm&&!e("drm"))return!1;if(!window.MediaSource)return!1;if(!a.isChrome()&&!a.isIETrident(11))return!1;var f=c.file||"";return"dash"===c.type||"mpd"===c.type||f.indexOf(".mpd")>-1||f.indexOf("mpd-time-csf")>-1}var f=c.find(d,c.matches({name:"flash"})),g=f.supports;return f.supports=function(c,d){if(!a.isFlashSupported())return!1;var e=c&&c.type;if("hls"===e||"m3u8"===e){var f=b(d);return f("hls")}return g.apply(this,arguments)},d.push({name:"dashjs",supports:c.constant(!1)}),d.push({name:"shaka",supports:e}),d}.apply(b,d),!(void 0!==e&&(a.exports=e))},function(a,b,c){var d,e;d=[c(45)],e=function(a){var b="free",c="premium",d="enterprise",e="ads",f="unlimited",g="trial",h={setup:[b,c,d,e,f,g],dash:[c,d,e,f,g],drm:[d,e,f,g],hls:[c,e,d,f,g],ads:[e,f,g],casting:[c,d,e,f,g],jwpsrv:[b,c,d,e,g]},i=function(b){return function(c){return a.contains(h[c],b)}};return i}.apply(b,d),!(void 0!==e&&(a.exports=e))},function(a,b,c){var d,e;d=[c(48),c(45),c(83)],e=function(a,b,c){function d(b){if("hls"===b.type)if(b.androidhls!==!1){var c=a.isAndroidNative;if(c(2)||c(3)||c("4.0"))return!1;if(a.isAndroid())return!0}else if(a.isAndroid())return!1;return null}var e=[{name:"youtube",supports:function(b){return a.isYouTube(b.file,b.type)}},{name:"html5",supports:function(b){var e={aac:"audio/mp4",mp4:"video/mp4",f4v:"video/mp4",m4v:"video/mp4",mov:"video/mp4",mp3:"audio/mpeg",mpeg:"audio/mpeg",ogv:"video/ogg",ogg:"video/ogg",oga:"video/ogg",vorbis:"video/ogg",webm:"video/webm",f4a:"video/aac",m3u8:"application/vnd.apple.mpegurl",m3u:"application/vnd.apple.mpegurl",hls:"application/vnd.apple.mpegurl"},f=b.file,g=b.type,h=d(b);if(null!==h)return h;if(a.isRtmp(f,g))return!1;if(!e[g])return!1;if(c.canPlayType){var i=c.canPlayType(e[g]);return!!i}return!1}},{name:"flash",supports:function(c){var d={flv:"video",f4v:"video",mov:"video",m4a:"video",m4v:"video",mp4:"video",aac:"video",f4a:"video",mp3:"sound",mpeg:"sound",smil:"rtmp"},e=b.keys(d);if(!a.isFlashSupported())return!1;var f=c.file,g=c.type;return a.isRtmp(f,g)?!0:b.contains(e,g)}}];return e}.apply(b,d),!(void 0!==e&&(a.exports=e))},function(a,b,c){var d,e;d=[],e=function(){return document.createElement("video")}.apply(b,d),!(void 0!==e&&(a.exports=e))},function(a,b,c){var d,e;d=[c(85),c(87)],e=function(a,b){var c={html5:a,flash:b};return c}.apply(b,d),!(void 0!==e&&(a.exports=e))},function(a,b,c){var d,e;d=[c(55),c(48),c(45),c(46),c(62),c(86),c(47)],e=function(a,b,c,d,e,f,g){function h(a,c){b.foreach(a,function(a,b){c.addEventListener(a,b,!1)})}function i(a,c){b.foreach(a,function(a,b){c.removeEventListener(a,b,!1)})}function j(a,b,c){"addEventListener"in a?a.addEventListener(b,c):a["on"+b]=c}function k(a,b,c){a&&("removeEventListener"in a?a.removeEventListener(b,c):a["on"+b]=null)}function l(a){if("hls"===a.type)if(a.androidhls!==!1){var c=b.isAndroidNative;if(c(2)||c(3)||c("4.0"))return!1;if(b.isAndroid())return!0}else if(b.isAndroid())return!1;return null}function m(m,y){function z(){na(Ua.audioTracks),ra(Ua.textTracks)}function A(a){Ca.trigger("click",a)}function B(){Ia&&!Ka&&(I(H()),F(da(),za,ya))}function C(){Ia&&F(da(),za,ya)}function D(){n(Ga),Ea=!0,Ia&&(Ca.state===e.STALLED?Ca.setState(e.PLAYING):Ca.state===e.PLAYING&&(Ga=setTimeout(ca,o)),Ka&&Ua.duration===1/0&&0===Ua.currentTime||(I(H()),G(Ua.currentTime),F(da(),za,ya),Ca.state===e.PLAYING&&(Ca.trigger(d.JWPLAYER_MEDIA_TIME,{position:za,duration:ya}),E())))}function E(){var a=Sa.level;if(a.width!==Ua.videoWidth||a.height!==Ua.videoHeight){if(a.width=Ua.videoWidth,a.height=Ua.videoHeight,ua(),!a.width||!a.height)return;Sa.reason=Sa.reason||"auto",Sa.mode="hls"===Ba[Ja].type?"auto":"manual",Sa.bitrate=0,a.index=Ja,a.label=Ba[Ja].label,Ca.trigger("visualQuality",Sa),
Sa.reason=""}}function F(a,b,c){a===Ha&&c===ya||(Ha=a,Ca.trigger(d.JWPLAYER_MEDIA_BUFFER,{bufferPercent:100*a,position:b,duration:c}))}function G(a){0>ya&&(a=-(_()-a)),za=a}function H(){var a=Ua.duration,b=_();if(a===1/0&&b){var c=b-Ua.seekable.start(0);c!==1/0&&c>120&&(a=-c)}return a}function I(a){ya=a,Fa&&a&&a!==1/0&&Ca.seek(Fa)}function J(){var a=H();Ka&&a===1/0&&(a=0),Ca.trigger(d.JWPLAYER_MEDIA_META,{duration:a,height:Ua.videoHeight,width:Ua.videoWidth}),I(a)}function K(){Ia&&(Ea=!0,M())}function L(){Ia&&(Ua.muted&&(Ua.muted=!1,Ua.muted=!0),ua(),J())}function M(){Aa||(Aa=!0,Ca.trigger(d.JWPLAYER_MEDIA_BUFFER_FULL))}function N(){Ca.setState(e.PLAYING),Ua.hasAttribute("hasplayed")||Ua.setAttribute("hasplayed",""),Ca.trigger(d.JWPLAYER_PROVIDER_FIRST_FRAME,{})}function O(){Ca.state!==e.COMPLETE&&Ua.currentTime!==Ua.duration&&Ca.setState(e.PAUSED)}function P(){Ka||Ua.paused||Ua.ended||Ca.state!==e.LOADING&&Ca.state!==e.ERROR&&(Ca.seeking||Ca.setState(e.STALLED))}function Q(){Ia&&(b.log("Error playing media: %o %s",Ua.error,Ua.src||xa.file),Ca.trigger(d.JWPLAYER_MEDIA_ERROR,{message:"Error loading media: File could not be played"}))}function R(a){var d;return"array"===b.typeOf(a)&&a.length>0&&(d=c.map(a,function(a,b){return{label:a.label||b}})),d}function S(a){Ba=a,Ja=T(a);var b=R(a);b&&Ca.trigger(d.JWPLAYER_MEDIA_LEVELS,{levels:b,currentQuality:Ja})}function T(a){var b=Math.max(0,Ja),c=y.qualityLabel;if(a)for(var d=0;d<a.length;d++)if(a[d]["default"]&&(b=d),c&&a[d].label===c)return d;return Sa.reason="initial choice",Sa.level={width:0,height:0},b}function U(){return r||s}function V(a,c,d){xa=Ba[Ja],Fa=0,n(Ga);var f=document.createElement("source");f.src=xa.file;var g=Ua.src!==f.src;g||U()?(ya=c,W(d),Ua.load()):(0===a&&0!==Ua.currentTime&&(Fa=-1,Ca.seek(a)),Ua.play()),za=Ua.currentTime,r&&(M(),Ua.paused||Ca.state===e.PLAYING||Ca.setState(e.LOADING)),b.isIOS()&&Ca.getFullScreen()&&(Ua.controls=!0),a>0&&Ca.seek(a)}function W(a){if(Na=null,Oa=null,Qa=-1,Pa=-1,Ra=-1,Sa.reason||(Sa.reason="initial choice",Sa.level={width:0,height:0}),Ea=!1,Aa=!1,Ka=l(xa),Ua.src=xa.file,xa.preload&&Ua.setAttribute("preload",xa.preload),a&&a.tracks){var c=b.isIOS()&&!b.isSDK(y);c&&Y(a.tracks)}}function X(){Ua&&(Ua.removeAttribute("src"),!q&&Ua.load&&Ua.load())}function Y(a){for(;Ua.firstChild;)Ua.removeChild(Ua.firstChild);Z(a)}function Z(a){if(a){Ua.setAttribute("crossorigin","anonymous");for(var b=0;b<a.length;b++)if(-1!==a[b].file.indexOf(".vtt")&&/subtitles|captions|descriptions|chapters|metadata/.test(a[b].kind)){var c=document.createElement("track");c.src=a[b].file,c.kind=a[b].kind,c.srclang=a[b].language||"",c.label=a[b].label,c.mode="disabled",Ua.appendChild(c)}}}function $(){for(var a=Ua.seekable?Ua.seekable.length:0,b=1/0;a--;)b=Math.min(b,Ua.seekable.start(a));return b}function _(){for(var a=Ua.seekable?Ua.seekable.length:0,b=0;a--;)b=Math.max(b,Ua.seekable.end(a));return b}function aa(){Ca.seeking=!1,Ca.trigger(d.JWPLAYER_MEDIA_SEEKED)}function ba(){Ca.trigger("volume",{volume:Math.round(100*Ua.volume)}),Ca.trigger("mute",{mute:Ua.muted})}function ca(){Ua.currentTime===za&&P()}function da(){var a=Ua.buffered,c=Ua.duration;return!a||0===a.length||0>=c||c===1/0?0:b.between(a.end(a.length-1)/c,0,1)}function ea(){if(Ia&&Ca.state!==e.IDLE&&Ca.state!==e.COMPLETE){if(n(Ga),Ja=-1,La=!0,Ca.trigger(d.JWPLAYER_MEDIA_BEFORECOMPLETE),!Ia)return;fa()}}function fa(){n(Ga),Ca.setState(e.COMPLETE),La=!1,Ca.trigger(d.JWPLAYER_MEDIA_COMPLETE)}function ga(a){Ma=!0,ma(a),b.isIOS()&&(Ua.controls=!1)}function ha(){var a=-1,b=0;if(Na)for(b;b<Na.length;b++)if("showing"===Na[b].mode){a=b;break}sa(a+1)}function ia(){for(var a=-1,b=0;b<Ua.audioTracks.length;b++)if(Ua.audioTracks[b].enabled){a=b;break}oa(a)}function ja(a){ka(a.currentTarget.activeCues)}function ka(a){if(a&&a.length&&Ra!==a[0].startTime){var b={TIT2:"title",TT2:"title",WXXX:"url",TPE1:"artist",TP1:"artist",TALB:"album",TAL:"album"},d=function(a,b){var c,d,e,f,g,h;for(c="",e=a.length,d=b||0;e>d;)switch(f=a[d++],f>>4){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:c+=String.fromCharCode(f);break;case 12:case 13:g=a[d++],c+=String.fromCharCode((31&f)<<6|63&g);break;case 14:g=a[d++],h=a[d++],c+=String.fromCharCode((15&f)<<12|(63&g)<<6|(63&h)<<0)}return c},e=function(a,b){var c,d,e;for(c="",e=a.length,d=b||0;e>d;)254===a[d]&&255===a[d+1]||(c+=String.fromCharCode((a[d]<<8)+a[d+1])),d+=2;return c},f=c.reduce(a,function(a,f){if(!("value"in f)&&"data"in f&&f.data instanceof ArrayBuffer){var g=f,h=new Uint8Array(g.data);f={value:{key:"",data:""}};for(var i=10;14>i&&i<h.length&&0!==h[i];)f.value.key+=String.fromCharCode(h[i]),i++;var j=h[20];1===j||2===j?f.value.data=e(h,21):f.value.data=d(h,21)}if(b.hasOwnProperty(f.value.key)&&(a[b[f.value.key]]=f.value.data),f.value.info){var k=a[f.value.key];c.isObject(k)||(k={},a[f.value.key]=k),k[f.value.info]=f.value.data}else a[f.value.key]=f.value.data;return a},{});Ra=a[0].startTime,Ca.trigger("meta",{metadataTime:Ra,metadata:f})}}function la(a){Ma=!1,ma(a),b.isIOS()&&(Ua.controls=!1)}function ma(a){Ca.trigger("fullscreenchange",{target:a.target,jwstate:Ma})}function na(a){if(Oa=null,a){if(a.length){for(var b=0;b<a.length;b++)if(a[b].enabled){Qa=b;break}-1===Qa&&(Qa=0,a[Qa].enabled=!0),Oa=c.map(a,function(a){var b={name:a.label||a.language,language:a.language};return b})}j(a,"change",ia),Oa&&Ca.trigger("audioTracks",{currentTrack:Qa,tracks:Oa})}}function oa(a){Ua&&Ua.audioTracks&&Oa&&a>-1&&a<Ua.audioTracks.length&&a!==Qa&&(Ua.audioTracks[Qa].enabled=!1,Qa=a,Ua.audioTracks[Qa].enabled=!0,Ca.trigger("audioTrackChanged",{currentTrack:Qa,tracks:Oa}))}function pa(){return Oa||[]}function qa(){return Qa}function ra(a){if(Na=null,a){if(a.length){var b=0,c=a.length;for(b;c>b;b++)"metadata"===a[b].kind?(a[b].oncuechange=ja,a[b].mode="showing"):"subtitles"!==a[b].kind&&"captions"!==a[b].kind||(a[b].mode="disabled",Na||(Na=[]),Na.push(a[b]))}j(a,"change",ha),Na&&Na.length&&Ca.trigger("subtitlesTracks",{tracks:Na})}}function sa(a){Na&&Pa!==a-1&&(Pa>-1&&Pa<Na.length?Na[Pa].mode="disabled":c.each(Na,function(a){a.mode="disabled"}),a>0&&a<=Na.length?(Pa=a-1,Na[Pa].mode="showing"):Pa=-1,Ca.trigger("subtitlesTrackChanged",{currentTrack:Pa+1,tracks:Na}))}function ta(){return Pa}function ua(){if("hls"===Ba[0].type){var a="video";0===Ua.videoWidth&&(a="audio"),Ca.trigger("mediaType",{mediaType:a})}}function va(){Na&&Na[Pa]&&(Na[Pa].mode="disabled")}this.state=e.IDLE,this.seeking=!1,c.extend(this,g),this.trigger=function(a,b){return Ia?g.trigger.call(this,a,b):void 0},this.setState=function(a){return Ia?f.setState.call(this,a):void 0};var wa,xa,ya,za,Aa,Ba,Ca=this,Da={click:A,durationchange:B,ended:ea,error:Q,loadeddata:z,loadedmetadata:L,canplay:K,playing:N,progress:C,pause:O,seeked:aa,timeupdate:D,volumechange:ba,webkitbeginfullscreen:ga,webkitendfullscreen:la},Ea=!1,Fa=0,Ga=-1,Ha=-1,Ia=!0,Ja=-1,Ka=null,La=!1,Ma=!1,Na=null,Oa=null,Pa=-1,Qa=-1,Ra=-1,Sa={level:{}},Ta=document.getElementById(m),Ua=Ta?Ta.querySelector("video"):void 0;Ua=Ua||document.createElement("video"),Ua.className="jw-video jw-reset",h(Da,Ua),v||(Ua.controls=!0,Ua.controls=!1),Ua.setAttribute("x-webkit-airplay","allow"),Ua.setAttribute("webkit-playsinline",""),this.stop=function(){n(Ga),Ia&&(X(),b.isIETrident()&&Ua.pause(),Ja=-1,this.setState(e.IDLE))},this.destroy=function(){i(Da,Ua),k(Ua.audioTracks,"change",ia),k(Ua.textTracks,"change",ha),this.remove(),this.off()},this.init=function(a){Ia&&(Ba=a.sources,Ja=T(a.sources),a.sources.length&&"hls"!==a.sources[0].type&&this.sendMediaType(a.sources),xa=Ba[Ja],za=a.starttime||0,ya=a.duration||0,Sa.reason="",W(a))},this.load=function(a){Ia&&(S(a.sources),a.sources.length&&"hls"!==a.sources[0].type&&this.sendMediaType(a.sources),r&&!Ua.hasAttribute("hasplayed")||Ca.setState(e.LOADING),V(a.starttime||0,a.duration||0,a))},this.play=function(){return Ca.seeking?(Ca.setState(e.LOADING),void Ca.once(d.JWPLAYER_MEDIA_SEEKED,Ca.play)):void Ua.play()},this.pause=function(){n(Ga),Ua.pause(),this.setState(e.PAUSED)},this.seek=function(a){if(Ia)if(0>a&&(a+=$()+_()),0===Fa&&this.trigger(d.JWPLAYER_MEDIA_SEEK,{position:Ua.currentTime,offset:a}),Ea||(Ea=!!_()),Ea){Fa=0;try{Ca.seeking=!0,Ua.currentTime=a}catch(b){Ca.seeking=!1,Fa=a}}else Fa=a,t&&Ua.paused&&Ua.play()},this.volume=function(a){a=b.between(a/100,0,1),Ua.volume=a},this.mute=function(a){Ua.muted=!!a},this.checkComplete=function(){return La},this.detachMedia=function(){return n(Ga),va(),Ia=!1,Ua},this.attachMedia=function(){Ia=!0,Ea=!1,this.seeking=!1,Ua.loop=!1,La&&fa()},this.setContainer=function(a){wa=a,a.appendChild(Ua)},this.getContainer=function(){return wa},this.remove=function(){X(),n(Ga),Ja=-1,wa===Ua.parentNode&&wa.removeChild(Ua)},this.setVisibility=function(b){b=!!b,b||u?a.style(wa,{visibility:"visible",opacity:1}):a.style(wa,{visibility:"",opacity:0})},this.resize=function(b,c,d){if(!(b&&c&&Ua.videoWidth&&Ua.videoHeight))return!1;var e={objectFit:""};if("uniform"===d){var f=b/c,g=Ua.videoWidth/Ua.videoHeight;Math.abs(f-g)<.09&&(e.objectFit="fill",d="exactfit")}var h=p||u||v||w;if(h){var i=-Math.floor(Ua.videoWidth/2+1),j=-Math.floor(Ua.videoHeight/2+1),k=Math.ceil(100*b/Ua.videoWidth)/100,l=Math.ceil(100*c/Ua.videoHeight)/100;"none"===d?k=l=1:"fill"===d?k=l=Math.max(k,l):"uniform"===d&&(k=l=Math.min(k,l)),e.width=Ua.videoWidth,e.height=Ua.videoHeight,e.top=e.left="50%",e.margin=0,a.transform(Ua,"translate("+i+"px, "+j+"px) scale("+k.toFixed(2)+", "+l.toFixed(2)+")")}return a.style(Ua,e),!1},this.setFullscreen=function(a){if(a=!!a){var c=b.tryCatch(function(){var a=Ua.webkitEnterFullscreen||Ua.webkitEnterFullScreen;a&&a.apply(Ua)});return c instanceof b.Error?!1:Ca.getFullScreen()}var d=Ua.webkitExitFullscreen||Ua.webkitExitFullScreen;return d&&d.apply(Ua),a},Ca.getFullScreen=function(){return Ma||!!Ua.webkitDisplayingFullscreen},this.setCurrentQuality=function(a){if(Ja!==a&&(a=parseInt(a,10),a>=0&&Ba&&Ba.length>a)){Ja=a,Sa.reason="api",Sa.level={width:0,height:0},this.trigger(d.JWPLAYER_MEDIA_LEVEL_CHANGED,{currentQuality:a,levels:R(Ba)}),y.qualityLabel=Ba[a].label;var b=Ua.currentTime||0,c=Ua.duration||0;0>=c&&(c=ya),Ca.setState(e.LOADING),V(b,c)}},this.getCurrentQuality=function(){return Ja},this.getQualityLevels=function(){return R(Ba)},this.getName=function(){return{name:x}},this.setCurrentAudioTrack=oa,this.getAudioTracks=pa,this.getCurrentAudioTrack=qa,this.setSubtitlesTrack=sa,this.getSubtitlesTrack=ta}var n=window.clearTimeout,o=256,p=b.isIE(),q=b.isMSIE(),r=b.isMobile(),s=b.isSafari(),t=b.isFF(),u=b.isAndroidNative(),v=b.isIOS(7),w=b.isIOS(8),x="html5",y=function(){};return y.prototype=f,m.prototype=new y,m}.apply(b,d),!(void 0!==e&&(a.exports=e))},function(a,b,c){var d,e;d=[c(48),c(46),c(62),c(45)],e=function(a,b,c,d){var e=a.noop,f=d.constant(!1),g={supports:f,play:e,load:e,stop:e,volume:e,mute:e,seek:e,resize:e,remove:e,destroy:e,setVisibility:e,setFullscreen:f,getFullscreen:e,getContainer:e,setContainer:f,getName:e,getQualityLevels:e,getCurrentQuality:e,setCurrentQuality:e,getAudioTracks:e,getCurrentAudioTrack:e,setCurrentAudioTrack:e,checkComplete:e,setControls:e,attachMedia:e,detachMedia:e,setState:function(a){var d=this.state||c.IDLE;this.state=a,a!==d&&this.trigger(b.JWPLAYER_PLAYER_STATE,{newstate:a})},sendMediaType:function(a){var c=a[0].type,d="oga"===c||"aac"===c||"mp3"===c||"mpeg"===c||"vorbis"===c;this.trigger(b.JWPLAYER_MEDIA_TYPE,{mediaType:d?"audio":"video"})}};return g}.apply(b,d),!(void 0!==e&&(a.exports=e))},function(a,b,c){var d,e;d=[c(48),c(45),c(46),c(62),c(88),c(86),c(47)],e=function(a,b,c,d,e,f,g){function h(a){return a+"_swf_"+k++}function i(b){var c=document.createElement("a");c.href=b.flashplayer;var d=c.hostname===window.location.host;return a.isChrome()&&!d}function j(j,k){function l(a){if(G)for(var b=0;b<a.length;b++){var c=a[b];if(c.bitrate){var d=Math.round(c.bitrate/1e3);c.label=m(d)}}}function m(a){var b=G[a];if(!b){for(var c=1/0,d=G.bitrates.length;d--;){var e=Math.abs(G.bitrates[d]-a);if(e>c)break;c=e}b=G.labels[G.bitrates[d+1]],G[a]=b}return b}function n(){var a=k.hlslabels;if(!a)return null;var b={},c=[];for(var d in a){var e=parseFloat(d);if(!isNaN(e)){var f=Math.round(e);b[f]=a[d],c.push(f)}}return 0===c.length?null:(c.sort(function(a,b){return a-b}),{labels:b,bitrates:c})}function o(){v=setTimeout(function(){g.trigger.call(D,"flashBlocked")},4e3),s.once("embedded",function(){q(),g.trigger.call(D,"flashUnblocked")},D)}function p(){q(),o()}function q(){clearTimeout(v),window.removeEventListener("focus",p)}var r,s,t,u=null,v=-1,w=!1,x=-1,y=null,z=-1,A=null,B=!0,C=!1,D=this,E=function(){return s&&s.__ready},F=function(){s&&s.triggerFlash.apply(s,arguments)},G=n();b.extend(this,g,{init:function(a){a.preload&&"none"!==a.preload&&!k.autostart&&(u=a)},load:function(a){u=a,w=!1,this.setState(d.LOADING),F("load",a),a.sources.length&&"hls"!==a.sources[0].type&&this.sendMediaType(a.sources)},play:function(){F("play")},pause:function(){F("pause"),this.setState(d.PAUSED)},stop:function(){F("stop"),x=-1,u=null,this.setState(d.IDLE)},seek:function(a){F("seek",a)},volume:function(a){if(b.isNumber(a)){var c=Math.min(Math.max(0,a),100);E()&&F("volume",c)}},mute:function(a){E()&&F("mute",a)},setState:function(){return f.setState.apply(this,arguments)},checkComplete:function(){return w},attachMedia:function(){B=!0,w&&(this.setState(d.COMPLETE),this.trigger(c.JWPLAYER_MEDIA_COMPLETE),w=!1)},detachMedia:function(){return B=!1,null},getSwfObject:function(a){var b=a.getElementsByTagName("object")[0];return b?(b.off(null,null,this),b):e.embed(k.flashplayer,a,h(j),k.wmode)},getContainer:function(){return r},setContainer:function(e){if(r!==e){r=e,s=this.getSwfObject(e),document.hasFocus()?o():window.addEventListener("focus",p),s.once("ready",function(){q(),s.once("pluginsLoaded",function(){s.queueCommands=!1,F("setupCommandQueue",s.__commandQueue),s.__commandQueue=[]});var a=b.extend({},k),d=s.triggerFlash("setup",a);d===s?s.__ready=!0:this.trigger(c.JWPLAYER_MEDIA_ERROR,d),u&&F("init",u)},this);var f=[c.JWPLAYER_MEDIA_META,c.JWPLAYER_MEDIA_ERROR,c.JWPLAYER_MEDIA_SEEK,c.JWPLAYER_MEDIA_SEEKED,"subtitlesTracks","subtitlesTrackChanged","subtitlesTrackData","mediaType"],h=[c.JWPLAYER_MEDIA_BUFFER,c.JWPLAYER_MEDIA_TIME],j=[c.JWPLAYER_MEDIA_BUFFER_FULL];s.on(c.JWPLAYER_MEDIA_LEVELS,function(a){l(a.levels),x=a.currentQuality,y=a.levels,this.trigger(a.type,a)},this),s.on(c.JWPLAYER_MEDIA_LEVEL_CHANGED,function(a){l(a.levels),x=a.currentQuality,y=a.levels,this.trigger(a.type,a)},this),s.on(c.JWPLAYER_AUDIO_TRACKS,function(a){z=a.currentTrack,A=a.tracks,this.trigger(a.type,a)},this),s.on(c.JWPLAYER_AUDIO_TRACK_CHANGED,function(a){z=a.currentTrack,A=a.tracks,this.trigger(a.type,a)},this),s.on(c.JWPLAYER_PLAYER_STATE,function(a){var b=a.newstate;b!==d.IDLE&&this.setState(b)},this),s.on(h.join(" "),function(a){"Infinity"===a.duration&&(a.duration=1/0),this.trigger(a.type,a)},this),s.on(f.join(" "),function(a){this.trigger(a.type,a)},this),s.on(j.join(" "),function(a){this.trigger(a.type)},this),s.on(c.JWPLAYER_MEDIA_BEFORECOMPLETE,function(a){w=!0,this.trigger(a.type),B===!0&&(w=!1)},this),s.on(c.JWPLAYER_MEDIA_COMPLETE,function(a){w||(this.setState(d.COMPLETE),this.trigger(a.type))},this),s.on("visualQuality",function(a){a.reason=a.reason||"api",this.trigger("visualQuality",a),this.trigger(c.JWPLAYER_PROVIDER_FIRST_FRAME,{})},this),s.on(c.JWPLAYER_PROVIDER_CHANGED,function(a){t=a.message,this.trigger(c.JWPLAYER_PROVIDER_CHANGED,a)},this),s.on(c.JWPLAYER_ERROR,function(b){a.log("Error playing media: %o %s",b.code,b.message,b),this.trigger(c.JWPLAYER_MEDIA_ERROR,b)},this),i(k)&&s.on("throttle",function(a){q(),"resume"===a.state?g.trigger.call(D,"flashThrottle",a):v=setTimeout(function(){g.trigger.call(D,"flashThrottle",a)},250)},this)}},remove:function(){x=-1,y=null,e.remove(s)},setVisibility:function(a){a=!!a,r.style.opacity=a?1:0},resize:function(a,b,c){c&&F("stretch",c)},setControls:function(a){F("setControls",a)},setFullscreen:function(a){C=a,F("fullscreen",a)},getFullScreen:function(){return C},setCurrentQuality:function(a){F("setCurrentQuality",a)},getCurrentQuality:function(){return x},setSubtitlesTrack:function(a){F("setSubtitlesTrack",a)},getName:function(){return t?{name:"flash_"+t}:{name:"flash"}},getQualityLevels:function(){return y||u.sources},getAudioTracks:function(){return A},getCurrentAudioTrack:function(){return z},setCurrentAudioTrack:function(a){F("setCurrentAudioTrack",a)},destroy:function(){q(),this.remove(),s&&(s.off(),s=null),r=null,u=null,this.off()}}),this.trigger=function(a,b){return B?g.trigger.call(this,a,b):void 0}}var k=0,l=function(){};return l.prototype=f,j.prototype=new l,j}.apply(b,d),!(void 0!==e&&(a.exports=e))},function(a,b,c){var d,e;d=[c(48),c(47),c(45)],e=function(a,b,c){function d(a,b,c){var d=document.createElement("param");d.setAttribute("name",b),d.setAttribute("value",c),a.appendChild(d)}function e(e,f,i,j){var k;if(j=j||"opaque",a.isMSIE()){var l=document.createElement("div");f.appendChild(l),l.outerHTML='<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" width="100%" height="100%" id="'+i+'" name="'+i+'" tabindex="0"><param name="movie" value="'+e+'"><param name="allowfullscreen" value="true"><param name="allowscriptaccess" value="always"><param name="wmode" value="'+j+'"><param name="bgcolor" value="'+h+'"><param name="menu" value="false"></object>';for(var m=f.getElementsByTagName("object"),n=m.length;n--;)m[n].id===i&&(k=m[n])}else k=document.createElement("object"),k.setAttribute("type","application/x-shockwave-flash"),k.setAttribute("data",e),k.setAttribute("width","100%"),k.setAttribute("height","100%"),k.setAttribute("bgcolor",h),k.setAttribute("id",i),k.setAttribute("name",i),d(k,"allowfullscreen","true"),d(k,"allowscriptaccess","always"),d(k,"wmode",j),d(k,"menu","false"),f.appendChild(k,f);return k.className="jw-swf jw-reset",k.style.display="block",k.style.position="absolute",k.style.left=0,k.style.right=0,k.style.top=0,k.style.bottom=0,c.extend(k,b),k.queueCommands=!0,k.triggerFlash=function(b){var d=this;if("setup"!==b&&d.queueCommands||!d.__externalCall){for(var e=d.__commandQueue,f=e.length;f--;)e[f][0]===b&&e.splice(f,1);return e.push(Array.prototype.slice.call(arguments)),d}var h=Array.prototype.slice.call(arguments,1),i=a.tryCatch(function(){if(h.length){for(var a=h.length;a--;)"object"==typeof h[a]&&c.each(h[a],g);var e=JSON.stringify(h);d.__externalCall(b,e)}else d.__externalCall(b)});return i instanceof a.Error&&(console.error(b,i),"setup"===b)?(i.name="Failed to setup flash",i):d},k.__commandQueue=[],k}function f(a){a&&a.parentNode&&(a.style.display="none",a.parentNode.removeChild(a))}function g(a,b,c){a instanceof window.HTMLElement&&delete c[b]}var h="#000000";return{embed:e,remove:f}}.apply(b,d),!(void 0!==e&&(a.exports=e))},function(a,b,c){var d,e;d=[c(45),c(48)],e=function(a,b){function c(a){return"jwplayer."+a}function d(){return a.reduce(this.persistItems,function(a,d){var e=j[c(d)];return e&&(a[d]=b.serialize(e)),a},{})}function e(a,b){try{j[c(a)]=b}catch(d){i&&i.debug&&console.error(d)}}function f(){a.each(this.persistItems,function(a){j.removeItem(c(a))})}function g(){}function h(b,c){this.persistItems=b,a.each(this.persistItems,function(a){c.on("change:"+a,function(b,c){e(a,c)})})}var i=window.jwplayer,j={removeItem:b.noop};try{j=window.localStorage}catch(k){}return a.extend(g.prototype,{getAllItems:d,track:h,clear:f}),g}.apply(b,d),!(void 0!==e&&(a.exports=e))},function(a,b,c){var d,e;d=[c(61),c(46),c(45)],e=function(a,b,c){function d(a){a.mediaController.off(b.JWPLAYER_MEDIA_PLAY_ATTEMPT,a._onPlayAttempt),a.mediaController.off(b.JWPLAYER_PROVIDER_FIRST_FRAME,a._triggerFirstFrame),a.mediaController.off(b.JWPLAYER_MEDIA_TIME,a._onTime)}function e(a){d(a),a._triggerFirstFrame=c.once(function(){var c=a._qoeItem;c.tick(b.JWPLAYER_MEDIA_FIRST_FRAME);var e=c.between(b.JWPLAYER_MEDIA_PLAY_ATTEMPT,b.JWPLAYER_MEDIA_FIRST_FRAME);a.mediaController.trigger(b.JWPLAYER_MEDIA_FIRST_FRAME,{loadTime:e}),d(a)}),a._onTime=g(a._triggerFirstFrame),a._onPlayAttempt=function(){a._qoeItem.tick(b.JWPLAYER_MEDIA_PLAY_ATTEMPT)},a.mediaController.on(b.JWPLAYER_MEDIA_PLAY_ATTEMPT,a._onPlayAttempt),a.mediaController.once(b.JWPLAYER_PROVIDER_FIRST_FRAME,a._triggerFirstFrame),a.mediaController.on(b.JWPLAYER_MEDIA_TIME,a._onTime)}function f(c){function d(c,d,f){c._qoeItem&&f&&c._qoeItem.end(f.get("state")),c._qoeItem=new a,c._qoeItem.tick(b.JWPLAYER_PLAYLIST_ITEM),c._qoeItem.start(d.get("state")),e(c),d.on("change:state",function(a,b,d){c._qoeItem.end(d),c._qoeItem.start(b)})}c.on("change:mediaModel",d)}var g=function(a){var b=Number.MIN_VALUE;return function(c){c.position>b&&a(),b=c.position}};return{model:f}}.apply(b,d),!(void 0!==e&&(a.exports=e))},function(a,b,c){var d,e;d=[c(45),c(47)],e=function(a,b){var c=a.extend({get:function(a){return this.attributes=this.attributes||{},this.attributes[a]},set:function(a,b){if(this.attributes=this.attributes||{},this.attributes[a]!==b){var c=this.attributes[a];this.attributes[a]=b,this.trigger("change:"+a,this,b,c)}},clone:function(){return a.clone(this.attributes)}},b);return c}.apply(b,d),!(void 0!==e&&(a.exports=e))},function(a,b,c){var d,e;d=[c(47),c(77),c(76),c(46),c(62),c(48),c(45)],e=function(a,b,c,d,e,f,g){var h=function(a,d){this.model=d,this._adModel=(new b).setup({id:d.get("id"),volume:d.get("volume"),fullscreen:d.get("fullscreen"),mute:d.get("mute")}),this._adModel.on("change:state",c,this);var e=a.getContainer();this.swf=e.querySelector("object")};return h.prototype=g.extend({init:function(){if(f.isChrome()){var a=-1,b=!1;this.swf.on("throttle",function(c){if(clearTimeout(a),"resume"===c.state)b&&(b=!1,this.instreamPlay());else{var d=this;a=setTimeout(function(){d._adModel.get("state")===e.PLAYING&&(b=!0,d.instreamPause())},250)}},this)}this.swf.on("instream:state",function(a){switch(a.newstate){case e.PLAYING:this._adModel.set("state",a.newstate);break;case e.PAUSED:this._adModel.set("state",a.newstate)}},this).on("instream:time",function(a){this._adModel.set("position",a.position),this._adModel.set("duration",a.duration),this.trigger(d.JWPLAYER_MEDIA_TIME,a)},this).on("instream:complete",function(a){this.trigger(d.JWPLAYER_MEDIA_COMPLETE,a)},this).on("instream:error",function(a){this.trigger(d.JWPLAYER_MEDIA_ERROR,a)},this),this.swf.triggerFlash("instream:init"),this.applyProviderListeners=function(a){this.model.on("change:volume",function(b,c){a.volume(c)},this),this.model.on("change:mute",function(b,c){a.mute(c)},this)}},instreamDestroy:function(){this._adModel&&(this.off(),this.swf.off(null,null,this),this.swf.triggerFlash("instream:destroy"),this.swf=null,this._adModel.off(),this._adModel=null,this.model=null)},load:function(a){this.swf.triggerFlash("instream:load",a)},instreamPlay:function(){this.swf.triggerFlash("instream:play")},instreamPause:function(){this.swf.triggerFlash("instream:pause")}},a),h}.apply(b,d),!(void 0!==e&&(a.exports=e))},function(a,b,c){var d,e;d=[c(94),c(47),c(45),c(46)],e=function(a,b,c,d){var e=function(b,e,f,g){function h(){m("Setup Timeout Error","Setup took longer than "+q+" seconds to complete.")}function i(){c.each(p,function(a){a.complete!==!0&&a.running!==!0&&null!==b&&k(a.depends)&&(a.running=!0,j(a))})}function j(a){var c=function(b){b=b||{},l(a,b)};a.method(c,e,b,f,g)}function k(a){return c.all(a,function(a){return p[a].complete})}function l(a,b){"error"===b.type?m(b.msg,b.reason):"complete"===b.type?(clearTimeout(n),o.trigger(d.JWPLAYER_READY)):(a.complete=!0,i())}function m(a,b){clearTimeout(n),o.trigger(d.JWPLAYER_SETUP_ERROR,{message:a+": "+b}),o.destroy()}var n,o=this,p=a.getQueue(),q=30;this.start=function(){n=setTimeout(h,1e3*q),i()},this.destroy=function(){clearTimeout(n),this.off(),p.length=0,b=null,e=null,f=null}};return e.prototype=b,e}.apply(b,d),!(void 0!==e&&(a.exports=e))},function(a,b,c){var d,e;d=[c(95),c(81),c(80),c(45),c(48),c(57),c(97)],e=function(a,b,d,e,f,g,h){function i(a,b,c){if(b){var d=b.client;delete b.client,/\.(js|swf)$/.test(d||"")||(d=g.repo()+c),a[d]=b}}function j(a,c){var d=e.clone(c.get("plugins"))||{},f=c.get("edition"),h=b(f),j=/^(vast|googima)$/,k=/\.(js|swf)$/,l=g.repo(),m=c.get("advertising");if(h("ads")&&m&&(k.test(m.client)?d[m.client]=m:j.test(m.client)&&(d[l+m.client+".js"]=m),delete m.client),h("jwpsrv")){var n=c.get("analytics");e.isObject(n)||(n={}),i(d,n,"jwpsrv.js")}i(d,c.get("ga"),"gapro.js"),i(d,c.get("sharing"),"sharing.js"),i(d,c.get("related"),"related.js"),c.set("plugins",d),a()}function k(b,d){var e=d.get("key")||window.jwplayer&&window.jwplayer.key,i=new a(e),j=i.edition();if(d.set("key",e),d.set("edition",j),"unlimited"===j){var k=f.getScriptPath("jwplayer.js");if(!k)return void h.error(b,"Error setting up player","Could not locate jwplayer.js script tag");c.p=k,f.repo=g.repo=g.loadFrom=function(){return k}}d.updateProviders(),"invalid"===j?h.error(b,"Error setting up player",(void 0===e?"Missing":"Invalid")+" license key"):b()}function l(a,b,d){"dashjs"===a?c.e(4,function(a){var e=c(107);e.register(window.jwplayer),d.updateProviders(),b()}):c.e(5,function(a){var e=c(109);e.register(window.jwplayer),d.updateProviders(),b()})}function m(a,b){var c=b.get("playlist"),f=b.get("edition"),g=b.get("dash");e.contains(["shaka","dashjs"],g)||(g="shaka");var h=e.where(d,{name:g})[0].supports,i=e.some(c,function(a){return h(a,f)});i?l(g,a,b):a()}function n(){var a=h.getQueue();return a.LOAD_DASH={method:m,depends:["CHECK_KEY","FILTER_PLAYLIST"]},a.CHECK_KEY={method:k,depends:["LOADED_POLYFILLS"]},a.FILTER_PLUGINS={method:j,depends:["CHECK_KEY"]},a.FILTER_PLAYLIST.depends.push("CHECK_KEY"),a.LOAD_PLUGINS.depends.push("FILTER_PLUGINS"),a.SETUP_VIEW.depends.push("CHECK_KEY"),a.SEND_READY.depends.push("LOAD_DASH"),a}return{getQueue:n}}.apply(b,d),!(void 0!==e&&(a.exports=e))},function(a,b,c){var d,e;d=[c(48),c(96),c(81)],e=function(a,b,c){var d="invalid",e="RnXcsftYjWRDA^Uy",f=function(f){function g(f){a.exists(f)||(f="");try{f=b.decrypt(f,e);var g=f.split("/");h=g[0],"pro"===h&&(h="premium");var k=c(h);if(g.length>2&&k("setup")){i=g[1];var l=parseInt(g[2]);l>0&&(j=new Date,j.setTime(l))}else h=d}catch(m){h=d}}var h,i,j;this.edition=function(){return j&&j.getTime()<(new Date).getTime()?d:h},this.token=function(){return i},this.expiration=function(){return j},g(f)};return f}.apply(b,d),!(void 0!==e&&(a.exports=e))},function(a,b,c){var d,e;d=[],e=function(){var a=function(a){return window.atob(a)},b=function(a){return unescape(encodeURIComponent(a))},c=function(a){try{return decodeURIComponent(escape(a))}catch(b){return a}},d=function(a){for(var b=new Array(Math.ceil(a.length/4)),c=0;c<b.length;c++)b[c]=a.charCodeAt(4*c)+(a.charCodeAt(4*c+1)<<8)+(a.charCodeAt(4*c+2)<<16)+(a.charCodeAt(4*c+3)<<24);return b},e=function(a){for(var b=new Array(a.length),c=0;c<a.length;c++)b[c]=String.fromCharCode(255&a[c],a[c]>>>8&255,a[c]>>>16&255,a[c]>>>24&255);return b.join("")};return{decrypt:function(f,g){if(f=String(f),g=String(g),0==f.length)return"";for(var h,i,j=d(a(f)),k=d(b(g).slice(0,16)),l=j.length,m=j[l-1],n=j[0],o=2654435769,p=Math.floor(6+52/l),q=p*o;0!=q;){i=q>>>2&3;for(var r=l-1;r>=0;r--)m=j[r>0?r-1:l-1],h=(m>>>5^n<<2)+(n>>>3^m<<4)^(q^n)+(k[3&r^i]^m),n=j[r]-=h;q-=o}var s=e(j);return s=s.replace(/\0+$/,""),c(s)}}}.apply(b,d),!(void 0!==e&&(a.exports=e))},function(a,b,c){var d,e;d=[c(98),c(65),c(101),c(58),c(45),c(48),c(46)],e=function(a,b,d,e,f,g,h){function i(){var a={LOAD_PROMISE_POLYFILL:{method:j,depends:[]},LOAD_BASE64_POLYFILL:{method:k,depends:[]},LOADED_POLYFILLS:{method:l,depends:["LOAD_PROMISE_POLYFILL","LOAD_BASE64_POLYFILL"]},LOAD_PLUGINS:{method:m,depends:["LOADED_POLYFILLS"]},INIT_PLUGINS:{method:n,depends:["LOAD_PLUGINS","SETUP_VIEW"]},LOAD_YOUTUBE:{method:v,depends:["FILTER_PLAYLIST"]},LOAD_SKIN:{method:u,depends:["LOADED_POLYFILLS"]},LOAD_PLAYLIST:{method:p,depends:["LOADED_POLYFILLS"]},FILTER_PLAYLIST:{method:q,depends:["LOAD_PLAYLIST"]},SETUP_VIEW:{method:w,depends:["LOAD_SKIN"]},SEND_READY:{method:x,depends:["INIT_PLUGINS","LOAD_YOUTUBE","SETUP_VIEW"]}};return a}function j(a){window.Promise?a():c.e(1,function(b){c(104),a()})}function k(a){window.btoa&&window.atob?a():c.e(2,function(b){c(105),a()})}function l(a){a()}function m(b,c){z=a.loadPlugins(c.get("id"),c.get("plugins")),z.on(h.COMPLETE,b),z.on(h.ERROR,f.partial(o,b)),z.load()}function n(a,b,c){z.setupPlugins(c,b),a()}function o(a,b){y(a,"Could not load plugin",b.message)}function p(a,c){var d=c.get("playlist");f.isString(d)?(A=new b,A.on(h.JWPLAYER_PLAYLIST_LOADED,function(b){c.set("playlist",b.playlist),a()}),A.on(h.JWPLAYER_ERROR,f.partial(r,a)),A.load(d)):a()}function q(a,b,c,d,e){var f=b.get("playlist"),g=e(f);g?a():r(a)}function r(a,b){b&&b.message?y(a,"Error loading playlist",b.message):y(a,"Error loading player","No playable sources found")}function s(a,b){return f.contains(e.SkinsLoadable,a)?b+"skins/"+a+".css":void 0}function t(a){for(var b=document.styleSheets,c=0,d=b.length;d>c;c++)if(b[c].href===a)return!0;return!1}function u(a,b){var c=b.get("skin"),g=b.get("skinUrl");if(f.contains(e.SkinsIncluded,c))return void a();if(g||(g=s(c,b.get("base"))),f.isString(g)&&!t(g)){b.set("skin-loading",!0);var i=!0,j=new d(g,i);j.addEventListener(h.COMPLETE,function(){b.set("skin-loading",!1)}),j.addEventListener(h.ERROR,function(){b.set("skin","seven"),b.set("skin-loading",!1)}),j.load()}f.defer(function(){a()})}function v(a,b){var d=b.get("playlist"),e=f.some(d,function(a){var b=g.isYouTube(a.file,a.type);if(b&&!a.image){var c=a.file,d=g.youTubeID(c);a.image="//i.ytimg.com/vi/"+d+"/0.jpg"}return b});e?c.e(3,function(b){var d=c(106);d.register(window.jwplayer),a()}):a()}function w(a,b,c,d){d.setup(),a()}function x(a){a({type:"complete"})}function y(a,b,c){a({type:"error",msg:b,reason:c})}var z,A;return{getQueue:i,error:y}}.apply(b,d),!(void 0!==e&&(a.exports=e))},function(a,b,c){var d,e;d=[c(99),c(102),c(103),c(100)],e=function(a,b,c,d){var e={},f={},g=function(c,d){return f[c]=new a(new b(e),d),f[c]},h=function(a,b,f,g){var h=d.getPluginName(a);e[h]||(e[h]=new c(a)),e[h].registerPlugin(a,b,f,g)};return{loadPlugins:g,registerPlugin:h}}.apply(b,d),!(void 0!==e&&(a.exports=e))},function(a,b,c){var d,e;d=[c(100),c(48),c(46),c(47),c(45),c(101)],e=function(a,b,c,d,e,f){function g(a,b,c){return function(){var d=a.getContainer().getElementsByClassName("jw-overlays")[0];d&&(d.appendChild(c),c.left=d.style.left,c.top=d.style.top,b.displayArea=d)}}function h(a){function b(){var b=a.displayArea;b&&a.resize(b.clientWidth,b.clientHeight)}return function(){b(),setTimeout(b,400)}}var i=function(i,j){function k(){q||(q=!0,p=f.loaderstatus.COMPLETE,o.trigger(c.COMPLETE))}function l(){if(!s&&(j&&0!==e.keys(j).length||k(),!q)){var d=i.getPlugins();n=e.after(r,k),e.each(j,function(e,g){var h=a.getPluginName(g),i=d[h],j=i.getJS(),k=i.getTarget(),l=i.getStatus();l!==f.loaderstatus.LOADING&&l!==f.loaderstatus.NEW&&(j&&!b.versionCheck(k)&&o.trigger(c.ERROR,{message:"Incompatible player version"}),n())})}}function m(a){if(!s){var d="File not found";a.url&&b.log(d,a.url),this.off(),this.trigger(c.ERROR,{message:d}),l()}}var n,o=e.extend(this,d),p=f.loaderstatus.NEW,q=!1,r=e.size(j),s=!1;this.setupPlugins=function(c,d){var f=[],j=i.getPlugins(),k=d.get("plugins");e.each(k,function(d,i){var l=a.getPluginName(i),m=j[l],n=m.getFlashPath(),o=m.getJS(),p=m.getURL();if(n){var q=e.extend({name:l,swf:n,pluginmode:m.getPluginmode()},d);f.push(q)}var r=b.tryCatch(function(){if(o&&k[p]){var a=document.createElement("div");a.id=c.id+"_"+l,a.className="jw-plugin jw-reset";var b=e.extend({},k[p]),d=m.getNewInstance(c,b,a);d.addToPlayer=g(c,d,a),d.resizeHandler=h(d),c.addPlugin(l,d,a)}});r instanceof b.Error&&b.log("ERROR: Failed to load "+l+".")}),d.set("flashPlugins",f)},this.load=function(){if(b.exists(j)&&"object"!==b.typeOf(j))return void l();p=f.loaderstatus.LOADING,e.each(j,function(a,d){if(b.exists(d)){var e=i.addPlugin(d);e.on(c.COMPLETE,l),e.on(c.ERROR,m)}});var a=i.getPlugins();e.each(a,function(a){a.load()}),l()},this.destroy=function(){
s=!0,this.off()},this.getStatus=function(){return p}};return i}.apply(b,d),!(void 0!==e&&(a.exports=e))},function(a,b,c){var d,e;d=[c(51)],e=function(a){var b={},c=b.pluginPathType={ABSOLUTE:0,RELATIVE:1,CDN:2};return b.getPluginPathType=function(b){if("string"==typeof b){b=b.split("?")[0];var d=b.indexOf("://");if(d>0)return c.ABSOLUTE;var e=b.indexOf("/"),f=a.extension(b);return!(0>d&&0>e)||f&&isNaN(f)?c.RELATIVE:c.CDN}},b.getPluginName=function(a){return a.replace(/^(.*\/)?([^-]*)-?.*\.(swf|js)$/,"$2")},b.getPluginVersion=function(a){return a.replace(/[^-]*-?([^\.]*).*$/,"$1")},b}.apply(b,d),!(void 0!==e&&(a.exports=e))},function(a,b,c){var d,e;d=[c(46),c(47),c(45)],e=function(a,b,c){var d={},e={NEW:0,LOADING:1,ERROR:2,COMPLETE:3},f=function(f,g){function h(b){k=e.ERROR,j.trigger(a.ERROR,b)}function i(b){k=e.COMPLETE,j.trigger(a.COMPLETE,b)}var j=c.extend(this,b),k=e.NEW;this.addEventListener=this.on,this.removeEventListener=this.off,this.makeStyleLink=function(a){var b=document.createElement("link");return b.type="text/css",b.rel="stylesheet",b.href=a,b},this.makeScriptTag=function(a){var b=document.createElement("script");return b.src=a,b},this.makeTag=g?this.makeStyleLink:this.makeScriptTag,this.load=function(){if(k===e.NEW){var b=d[f];if(b&&(k=b.getStatus(),2>k))return b.on(a.ERROR,h),void b.on(a.COMPLETE,i);var c=document.getElementsByTagName("head")[0]||document.documentElement,j=this.makeTag(f),l=!1;j.onload=j.onreadystatechange=function(a){l||this.readyState&&"loaded"!==this.readyState&&"complete"!==this.readyState||(l=!0,i(a),j.onload=j.onreadystatechange=null,c&&j.parentNode&&!g&&c.removeChild(j))},j.onerror=h,c.insertBefore(j,c.firstChild),k=e.LOADING,d[f]=this}},this.getStatus=function(){return k}};return f.loaderstatus=e,f}.apply(b,d),!(void 0!==e&&(a.exports=e))},function(a,b,c){var d,e;d=[c(100),c(103)],e=function(a,b){var c=function(c){this.addPlugin=function(d){var e=a.getPluginName(d);return c[e]||(c[e]=new b(d)),c[e]},this.getPlugins=function(){return c}};return c}.apply(b,d),!(void 0!==e&&(a.exports=e))},function(a,b,c){var d,e;d=[c(48),c(100),c(46),c(47),c(101),c(45)],e=function(a,b,c,d,e,f){var g={FLASH:0,JAVASCRIPT:1,HYBRID:2},h=function(h){function i(){switch(b.getPluginPathType(h)){case b.pluginPathType.ABSOLUTE:return h;case b.pluginPathType.RELATIVE:return a.getAbsolutePath(h,window.location.href)}}function j(){f.defer(function(){q=e.loaderstatus.COMPLETE,p.trigger(c.COMPLETE)})}function k(){q=e.loaderstatus.ERROR,p.trigger(c.ERROR,{url:h})}var l,m,n,o,p=f.extend(this,d),q=e.loaderstatus.NEW;this.load=function(){if(q===e.loaderstatus.NEW){if(h.lastIndexOf(".swf")>0)return l=h,q=e.loaderstatus.COMPLETE,void p.trigger(c.COMPLETE);if(b.getPluginPathType(h)===b.pluginPathType.CDN)return q=e.loaderstatus.COMPLETE,void p.trigger(c.COMPLETE);q=e.loaderstatus.LOADING;var a=new e(i());a.on(c.COMPLETE,j),a.on(c.ERROR,k),a.load()}},this.registerPlugin=function(a,b,d,f){o&&(clearTimeout(o),o=void 0),n=b,d&&f?(l=f,m=d):"string"==typeof d?l=d:"function"==typeof d?m=d:d||f||(l=a),q=e.loaderstatus.COMPLETE,p.trigger(c.COMPLETE)},this.getStatus=function(){return q},this.getPluginName=function(){return b.getPluginName(h)},this.getFlashPath=function(){if(l)switch(b.getPluginPathType(l)){case b.pluginPathType.ABSOLUTE:return l;case b.pluginPathType.RELATIVE:return h.lastIndexOf(".swf")>0?a.getAbsolutePath(l,window.location.href):a.getAbsolutePath(l,i())}return null},this.getJS=function(){return m},this.getTarget=function(){return n},this.getPluginmode=function(){return void 0!==typeof l&&void 0!==typeof m?g.HYBRID:void 0!==typeof l?g.FLASH:void 0!==typeof m?g.JAVASCRIPT:void 0},this.getNewInstance=function(a,b,c){return new m(a,b,c)},this.getURL=function(){return h}};return h}.apply(b,d),!(void 0!==e&&(a.exports=e))},,,,,,,,function(a,b,c){var d,e;d=[c(66),c(112),c(113),c(48)],e=function(a,b,c,d){var e=function(e,f){function g(a){if(a.tracks.length){f.mediaController.off("meta",h),s=[],t={},u={},v=0;for(var b=a.tracks||[],c=0;c<b.length;c++){var d=b[c];d.id=d.name,d.label=d.name||d.language,l(d)}var e=o();this.setCaptionsList(e),p()}}function h(a){var b=a.metadata;if(b&&"textdata"===b.type){if(!b.text)return;var c=t[b.trackid];if(!c){c={kind:"captions",id:b.trackid,data:[]},l(c);var d=o();this.setCaptionsList(d)}var e,g;b.useDTS?(c.source||(c.source=b.source||"mpegts"),e=b.begin,g=b.begin+"_"+b.text):(e=a.position||f.get("position"),g=""+Math.round(10*e)+"_"+b.text);var h=u[g];h||(h={begin:e,text:b.text},b.end&&(h.end=b.end),u[g]=h,c.data.push(h))}}function i(a){d.log("CAPTIONS("+a+")")}function j(a,b){r=b,s=[],t={},u={},v=0,f.mediaController.off("meta",h),f.mediaController.off("subtitlesTracks",g);var c,e,i,j=b.tracks;for(i=0;i<j.length;i++)if(c=j[i],e=c.kind.toLowerCase(),"captions"===e||"subtitles"===e)if(c.file){var k=d.isIOS()&&!d.isSDK(f.getConfiguration())&&-1!==c.file.indexOf(".vtt");k||(l(c),m(c))}else c.data&&l(c);0===s.length&&(f.mediaController.on("meta",h,this),f.mediaController.on("subtitlesTracks",g,this));var n=o();this.setCaptionsList(n),p()}function k(a,b){var c=null;0!==b&&(c=s[b-1]),a.set("captionsTrack",c)}function l(a){"number"!=typeof a.id&&(a.id=a.name||a.file||"cc"+s.length),a.data=a.data||[],a.label||(a.label="Unknown CC",v++,v>1&&(a.label+=" ("+v+")")),s.push(a),t[a.id]=a}function m(a){d.ajax(a.file,function(b){n(b,a)},i)}function n(e,f){var g,h=e.responseXML?e.responseXML.firstChild:null;if(h)for("xml"===a.localName(h)&&(h=h.nextSibling);h.nodeType===h.COMMENT_NODE;)h=h.nextSibling;g=h&&"tt"===a.localName(h)?d.tryCatch(function(){f.data=c(e.responseXML)}):d.tryCatch(function(){f.data=b(e.responseText)}),g instanceof d.Error&&i(g.message+": "+f.file)}function o(){for(var a=[{id:"off",label:"Off"}],b=0;b<s.length;b++)a.push({id:s[b].id,label:s[b].label||"Unknown CC"});return a}function p(){var a=0,b=f.get("captionLabel");if("Off"===b)return void f.set("captionsIndex",0);for(var c=0;c<s.length;c++){var d=s[c];if(b&&b===d.label){a=c+1;break}d["default"]||d.defaulttrack?a=c+1:d.autoselect}q(a)}function q(a){s.length?f.setVideoSubtitleTrack(a,s):f.set("captionsIndex",a)}f.on("change:playlistItem",j,this),f.on("change:captionsIndex",k,this),f.mediaController.on("subtitlesTracks",g,this),f.mediaController.on("subtitlesTrackData",function(a){var b=t[a.name];if(b){b.source=a.source;for(var c=a.captions||[],d=!1,e=0;e<c.length;e++){var f=c[e],g=a.name+"_"+f.begin+"_"+f.end;u[g]||(u[g]=f,b.data.push(f),d=!0)}d&&b.data.sort(function(a,b){return a.begin-b.begin})}},this),f.mediaController.on("meta",h,this);var r={},s=[],t={},u={},v=0;this.getCurrentIndex=function(){return f.get("captionsIndex")},this.getCaptionsList=function(){return f.get("captionsList")},this.setCaptionsList=function(a){f.set("captionsList",a)}};return e}.apply(b,d),!(void 0!==e&&(a.exports=e))},function(a,b,c){var d,e;d=[c(48),c(51)],e=function(a,b){function c(a){var b={},c=a.split("\r\n");1===c.length&&(c=a.split("\n"));var e=1;if(c[0].indexOf(" --> ")>0&&(e=0),c.length>e+1&&c[e+1]){var f=c[e],g=f.indexOf(" --> ");g>0&&(b.begin=d(f.substr(0,g)),b.end=d(f.substr(g+5)),b.text=c.slice(e+1).join("<br/>"))}return b}var d=a.seconds;return function(a){var d=[];a=b.trim(a);var e=a.split("\r\n\r\n");1===e.length&&(e=a.split("\n\n"));for(var f=0;f<e.length;f++)if("WEBVTT"!==e[f]){var g=c(e[f]);g.text&&d.push(g)}if(!d.length)throw new Error("Invalid SRT file");return d}}.apply(b,d),!(void 0!==e&&(a.exports=e))},function(a,b,c){var d,e;d=[c(51)],e=function(a){function b(a){a||c()}function c(){throw new Error("Invalid DFXP file")}var d=a.seconds;return function(e){b(e);var f=[],g=e.getElementsByTagName("p");b(g),g.length||(g=e.getElementsByTagName("tt:p"),g.length||(g=e.getElementsByTagName("tts:p")));for(var h=0;h<g.length;h++){var i=g[h],j=i.innerHTML||i.textContent||i.text||"",k=a.trim(j).replace(/>\s+</g,"><").replace(/tts?:/g,"");if(k){var l=i.getAttribute("begin"),m=i.getAttribute("dur"),n=i.getAttribute("end"),o={begin:d(l),text:k};n?o.end=d(n):m&&(o.end=o.begin+d(m)),f.push(o)}}return f.length||c(),f}}.apply(b,d),!(void 0!==e&&(a.exports=e))},function(a,b,c){var d,e;d=[c(70),c(71),c(45),c(78)],e=function(a,b,c,d){function e(a,b){for(var c=0;c<a.length;c++){var d=a[c],e=b.choose(d);if(e)return d.type}return null}var f=function(b){return b=c.isArray(b)?b:[b],c.compact(c.map(b,a))};f.filterPlaylist=function(a,b,d,e,f){var i=[];return c.each(a,function(a){a=c.extend({},a),a.allSources=g(a.sources,d,a.drm||e,a.preload||f),a.sources=h(a.allSources,b),a.sources.length&&(a.file=a.sources[0].file,(a.preload||f)&&(a.preload=a.preload||f),i.push(a))}),i};var g=function(a,d,e,f){return c.compact(c.map(a,function(a){return c.isObject(a)?(void 0!==d&&null!==d&&(a.androidhls=d),(a.drm||e)&&(a.drm=a.drm||e),(a.preload||f)&&(a.preload=a.preload||f),b(a)):void 0}))},h=function(a,b){b&&b.choose||(b=new d({primary:b?"flash":null}));var f=e(a,b);return c.where(a,{type:f})};return f}.apply(b,d),!(void 0!==e&&(a.exports=e))},function(a,b,c){var d,e;d=[],e=function(){return function(a,b){a.getPlaylistIndex=a.getItem;var c={jwPlay:b.play,jwPause:b.pause,jwSetMute:b.setMute,jwLoad:b.load,jwPlaylistItem:b.item,jwGetAudioTracks:b.getAudioTracks,jwDetachMedia:b.detachMedia,jwAttachMedia:b.attachMedia,jwAddEventListener:b.on,jwRemoveEventListener:b.off,jwStop:b.stop,jwSeek:b.seek,jwSetVolume:b.setVolume,jwPlaylistNext:b.next,jwPlaylistPrev:b.prev,jwSetFullscreen:b.setFullscreen,jwGetQualityLevels:b.getQualityLevels,jwGetCurrentQuality:b.getCurrentQuality,jwSetCurrentQuality:b.setCurrentQuality,jwSetCurrentAudioTrack:b.setCurrentAudioTrack,jwGetCurrentAudioTrack:b.getCurrentAudioTrack,jwGetCaptionsList:b.getCaptionsList,jwGetCurrentCaptions:b.getCurrentCaptions,jwSetCurrentCaptions:b.setCurrentCaptions,jwSetCues:b.setCues};a.callInternal=function(a){console.log("You are using the deprecated callInternal method for "+a);var d=Array.prototype.slice.call(arguments,1);c[a].apply(b,d)}}}.apply(b,d),!(void 0!==e&&(a.exports=e))},function(a,b,c){var d,e;d=[c(117),c(46),c(154)],e=function(a,b,c){var d=function(d,e){var f=new a(d,e),g=f.setup;return f.setup=function(){if(g.call(this),"trial"===e.get("edition")){var a=document.createElement("div");a.className="jw-icon jw-watermark",this.element().appendChild(a)}e.on("change:skipButton",this.onSkipButton,this),e.on("change:castActive change:playlistItem",this.showDisplayIconImage,this)},f.showDisplayIconImage=function(a){var b=a.get("castActive"),c=a.get("playlistItem"),d=f.controlsContainer().getElementsByClassName("jw-display-icon-container")[0];b&&c&&c.image?(d.style.backgroundImage='url("'+c.image+'")',d.style.backgroundSize="contain"):(d.style.backgroundImage="",d.style.backgroundSize="")},f.onSkipButton=function(a,b){b?this.addSkipButton():this._skipButton&&(this._skipButton.destroy(),this._skipButton=null)},f.addSkipButton=function(){this._skipButton=new c(this.instreamModel),this._skipButton.on(b.JWPLAYER_AD_SKIPPED,function(){this.api.skipAd()},this),this.controlsContainer().appendChild(this._skipButton.element())},f};return d}.apply(b,d),!(void 0!==e&&(a.exports=e))},function(a,b,c){var d,e;d=[c(48),c(46),c(47),c(58),c(62),c(128),c(129),c(130),c(118),c(132),c(134),c(148),c(149),c(152),c(45),c(153)],e=function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p){var q=a.style,r=a.bounds,s=a.isMobile(),t=["fullscreenchange","webkitfullscreenchange","mozfullscreenchange","MSFullscreenChange"],u=function(u,v){function w(b){var c=0,e=v.get("duration"),f=v.get("position");"DVR"===a.adaptiveType(e)&&(c=e,e=Math.max(f,d.dvrSeekLimit));var g=a.between(f+b,c,e);u.seek(g)}function x(b){var c=a.between(v.get("volume")+b,0,100);u.setVolume(c)}function y(a){return a.ctrlKey||a.metaKey?!1:!!v.get("controls")}function z(a){if(!y(a))return!0;switch(Ga||aa(),a.keyCode){case 27:u.setFullscreen(!1);break;case 13:case 32:u.play({reason:"interaction"});break;case 37:Ga||w(-5);break;case 39:Ga||w(5);break;case 38:x(10);break;case 40:x(-10);break;case 77:u.setMute();break;case 70:u.setFullscreen();break;default:if(a.keyCode>=48&&a.keyCode<=59){var b=a.keyCode-48,c=b/10*v.get("duration");u.seek(c)}}return/13|32|37|38|39|40/.test(a.keyCode)?(a.preventDefault(),!1):void 0}function A(){La=!1,a.removeClass(ja,"jw-no-focus")}function B(){La=!0,a.addClass(ja,"jw-no-focus")}function C(){La||A(),Ga||aa()}function D(){var a=r(ja),c=Math.round(a.width),d=Math.round(a.height);return document.body.contains(ja)?c&&d&&(c===ma&&d===na||(ma=c,na=d,clearTimeout(Ia),Ia=setTimeout(X,50),v.set("containerWidth",c),v.set("containerHeight",d),Ma.trigger(b.JWPLAYER_RESIZE,{width:c,height:d}))):(window.removeEventListener("resize",D),s&&window.removeEventListener("orientationchange",D)),a}function E(b,c){c=c||!1,a.toggleClass(ja,"jw-flag-casting",c)}function F(b,c){a.toggleClass(ja,"jw-flag-cast-available",c),a.toggleClass(ka,"jw-flag-cast-available",c)}function G(b,c){a.replaceClass(ja,/jw-stretch-\S+/,"jw-stretch-"+c)}function H(b,c){a.toggleClass(ja,"jw-flag-compact-player",c)}function I(a){a&&!s&&(a.element().addEventListener("mousemove",L,!1),a.element().addEventListener("mouseout",M,!1))}function J(){v.get("state")!==e.IDLE&&v.get("state")!==e.COMPLETE&&v.get("state")!==e.PAUSED||!v.get("controls")||u.play({reason:"interaction"}),Ha?_():aa()}function K(a){a.link?(u.pause(!0),u.setFullscreen(!1),window.open(a.link,a.linktarget)):v.get("controls")&&u.play({reason:"interaction"})}function L(){clearTimeout(Da)}function M(){aa()}function N(a){Ma.trigger(a.type,a)}function O(b,c){c?(ya&&ya.destroy(),a.addClass(ja,"jw-flag-flash-blocked")):(ya&&ya.setup(v,ja,ja),a.removeClass(ja,"jw-flag-flash-blocked"))}function P(){v.get("controls")&&u.setFullscreen()}function Q(){var c=ja.getElementsByClassName("jw-overlays")[0];c.addEventListener("mousemove",aa),ra=new g(v,la,{useHover:!0}),ra.on("click",function(){N({type:b.JWPLAYER_DISPLAY_CLICK}),v.get("controls")&&u.play({reason:"interaction"})}),ra.on("tap",function(){N({type:b.JWPLAYER_DISPLAY_CLICK}),J()}),ra.on("doubleClick",P),ra.on("move",aa),ra.on("over",aa);var d=new h(v);d.on("click",function(){N({type:b.JWPLAYER_DISPLAY_CLICK}),u.play({reason:"interaction"})}),d.on("tap",function(){N({type:b.JWPLAYER_DISPLAY_CLICK}),J()}),a.isChrome()&&d.el.addEventListener("mousedown",function(){var a=v.getVideo(),b=a&&0===a.getName().name.indexOf("flash");if(b){var c=function(){document.removeEventListener("mouseup",c),d.el.style.pointerEvents="auto"};this.style.pointerEvents="none",document.addEventListener("mouseup",c)}}),ka.appendChild(d.element()),ta=new i(v),ua=new j(v),ua.on(b.JWPLAYER_LOGO_CLICK,K);var e=document.createElement("div");e.className="jw-controls-right jw-reset",ua.setup(e),e.appendChild(ta.element()),ka.appendChild(e),wa=new f(v),wa.setup(v.get("captions")),ka.parentNode.insertBefore(wa.element(),va.element());var l=v.get("height");s&&("string"==typeof l||l>=1.5*Fa)?a.addClass(ja,"jw-flag-touch"):(ya=new m,ya.setup(v,ja,ja)),pa=new k(u,v),pa.on(b.JWPLAYER_USER_ACTION,aa),v.on("change:scrubbing",S),v.on("change:compactUI",H),ka.appendChild(pa.element()),ja.addEventListener("focus",C),ja.addEventListener("blur",A),ja.addEventListener("keydown",z),ja.onmousedown=B}function R(b){return b.get("state")===e.PAUSED?void b.once("change:state",R):void(b.get("scrubbing")===!1&&a.removeClass(ja,"jw-flag-dragging"))}function S(b,c){b.off("change:state",R),c?a.addClass(ja,"jw-flag-dragging"):R(b)}function T(b,c,d){var e,f=ja.className;d=!!d,d&&(f=f.replace(/\s*aspectMode/,""),ja.className!==f&&(ja.className=f),q(ja,{display:"block"},d)),a.exists(b)&&a.exists(c)&&(v.set("width",b),v.set("height",c)),e={width:b},a.hasClass(ja,"jw-flag-aspect-mode")||(e.height=c),q(ja,e,!0),U(c),X(b,c)}function U(b){if(xa=V(b),pa&&!xa){var c=Ga?oa:v;ia(c,c.get("state"))}a.toggleClass(ja,"jw-flag-audio-player",xa)}function V(a){if(v.get("aspectratio"))return!1;if(o.isString(a)&&a.indexOf("%")>-1)return!1;var b=o.isNumber(a)?a:v.get("containerHeight");return W(b)}function W(a){return a&&Fa*(s?1.75:1)>=a}function X(b,c){if(!b||isNaN(Number(b))){if(!la)return;b=la.clientWidth}if(!c||isNaN(Number(c))){if(!la)return;c=la.clientHeight}a.isMSIE(9)&&document.all&&!window.atob&&(b=c="100%");var d=v.getVideo();if(d){var e=d.resize(b,c,v.get("stretching"));e&&(clearTimeout(Ia),Ia=setTimeout(X,250)),wa.resize(),pa.checkCompactMode(b)}}function Y(){if(Ka){var a=document.fullscreenElement||document.webkitCurrentFullScreenElement||document.mozFullScreenElement||document.msFullscreenElement;return!(!a||a.id!==v.get("id"))}return Ga?oa.getVideo().getFullScreen():v.getVideo().getFullScreen()}function Z(a){var b=v.get("fullscreen"),c=void 0!==a.jwstate?a.jwstate:Y();b!==c&&v.set("fullscreen",c),clearTimeout(Ia),Ia=setTimeout(X,200)}function $(b,c){c?(a.addClass(b,"jw-flag-fullscreen"),q(document.body,{"overflow-y":"hidden"}),aa()):(a.removeClass(b,"jw-flag-fullscreen"),q(document.body,{"overflow-y":""})),X()}function _(){Ha=!1,clearTimeout(Da),pa.hideComponents(),a.addClass(ja,"jw-flag-user-inactive")}function aa(){Ha||(a.removeClass(ja,"jw-flag-user-inactive"),pa.checkCompactMode(la.clientWidth)),Ha=!0,clearTimeout(Da),Da=setTimeout(_,Ea)}function ba(){u.setFullscreen(!1)}function ca(){sa&&sa.setState(v.get("state")),da(v,v.mediaModel.get("mediaType")),v.mediaModel.on("change:mediaType",da,this)}function da(b,c){var d="audio"===c;a.toggleClass(ja,"jw-flag-media-audio",d)}function ea(b,c){var d="LIVE"===a.adaptiveType(c);a.toggleClass(ja,"jw-flag-live",d),Ma.setAltText(d?"Live Broadcast":"")}function fa(a,b){return b?void(b.name?va.updateText(b.name,b.message):va.updateText(b.message,"")):void va.playlistItem(a,a.get("playlistItem"))}function ga(){var a=v.getVideo();return a?a.isCaster:!1}function ha(){a.replaceClass(ja,/jw-state-\S+/,"jw-state-"+za)}function ia(b,c){if(za=c,clearTimeout(Ja),c===e.COMPLETE||c===e.IDLE?Ja=setTimeout(ha,100):ha(),ga())return void a.addClass(la,"jw-media-show");switch(c){case e.PLAYING:X();break;case e.PAUSED:aa()}}var ja,ka,la,ma,na,oa,pa,qa,ra,sa,ta,ua,va,wa,xa,ya,za,Aa,Ba,Ca,Da=-1,Ea=s?4e3:2e3,Fa=40,Ga=!1,Ha=!1,Ia=-1,Ja=-1,Ka=!1,La=!1,Ma=o.extend(this,c);this.model=v,this.api=u,ja=a.createElement(p({id:v.get("id")})),a.isIE()&&a.addClass(ja,"jw-ie");var Na=v.get("width"),Oa=v.get("height");q(ja,{width:Na.toString().indexOf("%")>0?Na:Na+"px",height:Oa.toString().indexOf("%")>0?Oa:Oa+"px"}),Ba=ja.requestFullscreen||ja.webkitRequestFullscreen||ja.webkitRequestFullScreen||ja.mozRequestFullScreen||ja.msRequestFullscreen,Ca=document.exitFullscreen||document.webkitExitFullscreen||document.webkitCancelFullScreen||document.mozCancelFullScreen||document.msExitFullscreen,Ka=Ba&&Ca,this.onChangeSkin=function(b,c){a.replaceClass(ja,/jw-skin-\S+/,c?"jw-skin-"+c:"")},this.handleColorOverrides=function(){function b(b,d,e){if(e){b=a.prefix(b,"#"+c+" ");var f={};f[d]=e,a.css(b.join(", "),f)}}var c=v.get("id"),d=v.get("skinColorActive"),e=v.get("skinColorInactive"),f=v.get("skinColorBackground");b([".jw-toggle",".jw-button-color:hover"],"color",d),b([".jw-active-option",".jw-progress",".jw-playlist-container .jw-option.jw-active-option",".jw-playlist-container .jw-option:hover"],"background",d),b([".jw-text",".jw-option",".jw-button-color",".jw-toggle.jw-off",".jw-tooltip-title",".jw-skip .jw-skip-icon",".jw-playlist-container .jw-icon"],"color",e),b([".jw-cue",".jw-knob"],"background",e),b([".jw-playlist-container .jw-option"],"border-bottom-color",e),b([".jw-background-color",".jw-tooltip-title",".jw-playlist",".jw-playlist-container .jw-option"],"background",f),b([".jw-playlist-container ::-webkit-scrollbar"],"border-color",f)},this.setup=function(){this.handleColorOverrides(),v.get("skin-loading")===!0&&(a.addClass(ja,"jw-flag-skin-loading"),v.once("change:skin-loading",function(){a.removeClass(ja,"jw-flag-skin-loading")})),this.onChangeSkin(v,v.get("skin"),""),v.on("change:skin",this.onChangeSkin,this),la=ja.getElementsByClassName("jw-media")[0],ka=ja.getElementsByClassName("jw-controls")[0];var c=ja.getElementsByClassName("jw-preview")[0];qa=new l(v),qa.setup(c);var d=ja.getElementsByClassName("jw-title")[0];va=new n(v),va.setup(d),Q(),aa(),v.set("mediaContainer",la),v.mediaController.on("fullscreenchange",Z);for(var f=t.length;f--;)document.addEventListener(t[f],Z,!1);window.removeEventListener("resize",D),window.addEventListener("resize",D,!1),s&&(window.removeEventListener("orientationchange",D),window.addEventListener("orientationchange",D,!1)),v.on("change:errorEvent",fa),v.on("change:controls",Pa),Pa(v,v.get("controls")),v.on("change:state",ia),v.on("change:duration",ea,this),v.on("change:flashBlocked",O),O(v,v.get("flashBlocked")),u.onPlaylistComplete(ba),u.onPlaylistItem(ca),v.on("change:castAvailable",F),F(v,v.get("castAvailable")),v.on("change:castActive",E),E(v,v.get("castActive")),v.get("stretching")&&G(v,v.get("stretching")),v.on("change:stretching",G),ia(v,e.IDLE),v.on("change:fullscreen",Qa),I(pa),I(ua);var g=v.get("aspectratio");if(g){a.addClass(ja,"jw-flag-aspect-mode");var h=ja.getElementsByClassName("jw-aspect")[0];q(h,{paddingTop:g})}u.on(b.JWPLAYER_READY,function(){D(),T(v.get("width"),v.get("height"))})};var Pa=function(b,c){if(c){var d=Ga?oa.get("state"):v.get("state");ia(b,d)}a.toggleClass(ja,"jw-flag-controls-disabled",!c)},Qa=function(b,c){var d=v.getVideo();Ka?(c?Ba.apply(ja):Ca.apply(document),$(ja,c)):a.isIE()?$(ja,c):(oa&&oa.getVideo()&&oa.getVideo().setFullscreen(c),d.setFullscreen(c)),d&&0===d.getName().name.indexOf("flash")&&d.setFullscreen(c)};this.resize=function(a,b){var c=!0;T(a,b,c),D()},this.resizeMedia=X,this.reset=function(){document.contains(ja)&&ja.parentNode.replaceChild(Aa,ja),a.emptyElement(ja)},this.setupInstream=function(b){this.instreamModel=oa=b,oa.on("change:controls",Pa,this),oa.on("change:state",ia,this),Ga=!0,a.addClass(ja,"jw-flag-ads"),aa()},this.setAltText=function(a){pa.setAltText(a)},this.useExternalControls=function(){a.addClass(ja,"jw-flag-ads-hide-controls")},this.destroyInstream=function(){if(Ga=!1,oa&&(oa.off(null,null,this),oa=null),this.setAltText(""),a.removeClass(ja,"jw-flag-ads"),a.removeClass(ja,"jw-flag-ads-hide-controls"),v.getVideo){var b=v.getVideo();b.setContainer(la)}ea(v,v.get("duration")),ra.revertAlternateClickHandlers()},this.addCues=function(a){pa&&pa.addCues(a)},this.clickHandler=function(){return ra},this.controlsContainer=function(){return ka},this.getContainer=this.element=function(){return ja},this.getSafeRegion=function(b){var c={x:0,y:0,width:v.get("containerWidth")||0,height:v.get("containerHeight")||0},d=v.get("dock");return d&&d.length&&v.get("controls")&&(c.y=ta.element().clientHeight,c.height-=c.y),b=b||!a.exists(b),b&&v.get("controls")&&(c.height-=pa.element().clientHeight),c},this.destroy=function(){window.removeEventListener("resize",D),window.removeEventListener("orientationchange",D);for(var b=t.length;b--;)document.removeEventListener(t[b],Z,!1);v.mediaController&&v.mediaController.off("fullscreenchange",Z),ja.removeEventListener("keydown",z,!1),ya&&ya.destroy(),sa&&(v.off("change:state",sa.statusDelegate),sa.destroy(),sa=null),Ga&&this.destroyInstream(),ua&&ua.destroy(),a.clearCss("#"+v.get("id"))}};return u}.apply(b,d),!(void 0!==e&&(a.exports=e))},function(a,b,c){var d,e;d=[c(119),c(48),c(45),c(127)],e=function(a,b,c,d){var e=function(a){this.model=a,this.setup(),this.model.on("change:dock",this.render,this)};return c.extend(e.prototype,{setup:function(){var c=this.model.get("dock"),e=this.click.bind(this),f=a(c);this.el=b.createElement(f),new d(this.el).on("click tap",e)},getDockButton:function(a){return b.hasClass(a.target,"jw-dock-button")?a.target:b.hasClass(a.target,"jw-dock-text")?a.target.parentElement.parentElement:a.target.parentElement},click:function(a){var b=this.getDockButton(a),d=b.getAttribute("button"),e=this.model.get("dock"),f=c.findWhere(e,{id:d});f&&f.callback&&f.callback(a)},render:function(){var c=this.model.get("dock"),d=a(c),e=b.createElement(d);this.el.innerHTML=e.innerHTML},element:function(){return this.el}}),e}.apply(b,d),!(void 0!==e&&(a.exports=e))},function(a,b,c){var d=c(120);a.exports=(d["default"]||d).template({1:function(a,b,c,d){var e,f,g="function",h=b.helperMissing,i=this.escapeExpression,j='    <div class="jw-dock-button jw-background-color jw-reset';return e=b["if"].call(a,null!=a?a.btnClass:a,{name:"if",hash:{},fn:this.program(2,d),inverse:this.noop,data:d}),null!=e&&(j+=e),j+='" button="'+i((f=null!=(f=b.id||(null!=a?a.id:a))?f:h,typeof f===g?f.call(a,{name:"id",hash:{},data:d}):f))+'">\n        <div class="jw-icon jw-dock-image jw-reset" ',e=b["if"].call(a,null!=a?a.img:a,{name:"if",hash:{},fn:this.program(4,d),inverse:this.noop,data:d}),null!=e&&(j+=e),j+='></div>\n        <div class="jw-arrow jw-reset"></div>\n',e=b["if"].call(a,null!=a?a.tooltip:a,{name:"if",hash:{},fn:this.program(6,d),inverse:this.noop,data:d}),null!=e&&(j+=e),j+"    </div>\n"},2:function(a,b,c,d){var e,f="function",g=b.helperMissing,h=this.escapeExpression;return" "+h((e=null!=(e=b.btnClass||(null!=a?a.btnClass:a))?e:g,typeof e===f?e.call(a,{name:"btnClass",hash:{},data:d}):e))},4:function(a,b,c,d){var e,f="function",g=b.helperMissing,h=this.escapeExpression;return"style='background-image: url(\""+h((e=null!=(e=b.img||(null!=a?a.img:a))?e:g,typeof e===f?e.call(a,{name:"img",hash:{},data:d}):e))+"\")'"},6:function(a,b,c,d){var e,f="function",g=b.helperMissing,h=this.escapeExpression;return'        <div class="jw-overlay jw-background-color jw-reset">\n            <span class="jw-text jw-dock-text jw-reset">'+h((e=null!=(e=b.tooltip||(null!=a?a.tooltip:a))?e:g,typeof e===f?e.call(a,{name:"tooltip",hash:{},data:d}):e))+"</span>\n        </div>\n"},compiler:[6,">= 2.0.0-beta.1"],main:function(a,b,c,d){var e,f='<div class="jw-dock jw-reset">\n';return e=b.each.call(a,a,{name:"each",hash:{},fn:this.program(1,d),inverse:this.noop,data:d}),null!=e&&(f+=e),f+"</div>"},useData:!0})},function(a,b,c){a.exports=c(121)},function(a,b,c){"use strict";var d=c(122),e=c(124)["default"],f=c(125)["default"],g=c(123),h=c(126),i=function(){var a=new d.HandlebarsEnvironment;return g.extend(a,d),a.SafeString=e,a.Exception=f,a.Utils=g,a.escapeExpression=g.escapeExpression,a.VM=h,a.template=function(b){return h.template(b,a)},a},j=i();j.create=i,j["default"]=j,b["default"]=j},function(a,b,c){"use strict";function d(a,b){this.helpers=a||{},this.partials=b||{},e(this)}function e(a){a.registerHelper("helperMissing",function(){if(1!==arguments.length)throw new g("Missing helper: '"+arguments[arguments.length-1].name+"'")}),a.registerHelper("blockHelperMissing",function(b,c){var d=c.inverse,e=c.fn;if(b===!0)return e(this);if(b===!1||null==b)return d(this);if(k(b))return b.length>0?(c.ids&&(c.ids=[c.name]),a.helpers.each(b,c)):d(this);if(c.data&&c.ids){var g=q(c.data);g.contextPath=f.appendContextPath(c.data.contextPath,c.name),c={data:g}}return e(b,c)}),a.registerHelper("each",function(a,b){if(!b)throw new g("Must pass iterator to #each");var c,d,e=b.fn,h=b.inverse,i=0,j="";if(b.data&&b.ids&&(d=f.appendContextPath(b.data.contextPath,b.ids[0])+"."),l(a)&&(a=a.call(this)),b.data&&(c=q(b.data)),a&&"object"==typeof a)if(k(a))for(var m=a.length;m>i;i++)c&&(c.index=i,c.first=0===i,c.last=i===a.length-1,d&&(c.contextPath=d+i)),j+=e(a[i],{data:c});else for(var n in a)a.hasOwnProperty(n)&&(c&&(c.key=n,c.index=i,c.first=0===i,d&&(c.contextPath=d+n)),j+=e(a[n],{data:c}),i++);return 0===i&&(j=h(this)),j}),a.registerHelper("if",function(a,b){return l(a)&&(a=a.call(this)),!b.hash.includeZero&&!a||f.isEmpty(a)?b.inverse(this):b.fn(this)}),a.registerHelper("unless",function(b,c){return a.helpers["if"].call(this,b,{fn:c.inverse,inverse:c.fn,hash:c.hash})}),a.registerHelper("with",function(a,b){l(a)&&(a=a.call(this));var c=b.fn;if(f.isEmpty(a))return b.inverse(this);if(b.data&&b.ids){var d=q(b.data);d.contextPath=f.appendContextPath(b.data.contextPath,b.ids[0]),b={data:d}}return c(a,b)}),a.registerHelper("log",function(b,c){var d=c.data&&null!=c.data.level?parseInt(c.data.level,10):1;a.log(d,b)}),a.registerHelper("lookup",function(a,b){return a&&a[b]})}var f=c(123),g=c(125)["default"],h="2.0.0";b.VERSION=h;var i=6;b.COMPILER_REVISION=i;var j={1:"<= 1.0.rc.2",2:"== 1.0.0-rc.3",3:"== 1.0.0-rc.4",4:"== 1.x.x",5:"== 2.0.0-alpha.x",6:">= 2.0.0-beta.1"};b.REVISION_CHANGES=j;var k=f.isArray,l=f.isFunction,m=f.toString,n="[object Object]";b.HandlebarsEnvironment=d,d.prototype={constructor:d,logger:o,log:p,registerHelper:function(a,b){if(m.call(a)===n){if(b)throw new g("Arg not supported with multiple helpers");f.extend(this.helpers,a)}else this.helpers[a]=b},unregisterHelper:function(a){delete this.helpers[a]},registerPartial:function(a,b){m.call(a)===n?f.extend(this.partials,a):this.partials[a]=b},unregisterPartial:function(a){delete this.partials[a]}};var o={methodMap:{0:"debug",1:"info",2:"warn",3:"error"},DEBUG:0,INFO:1,WARN:2,ERROR:3,level:3,log:function(a,b){if(o.level<=a){var c=o.methodMap[a];"undefined"!=typeof console&&console[c]&&console[c].call(console,b)}}};b.logger=o;var p=o.log;b.log=p;var q=function(a){var b=f.extend({},a);return b._parent=a,b};b.createFrame=q},function(a,b,c){"use strict";function d(a){return j[a]}function e(a){for(var b=1;b<arguments.length;b++)for(var c in arguments[b])Object.prototype.hasOwnProperty.call(arguments[b],c)&&(a[c]=arguments[b][c]);return a}function f(a){return a instanceof i?a.toString():null==a?"":a?(a=""+a,l.test(a)?a.replace(k,d):a):a+""}function g(a){return a||0===a?!(!o(a)||0!==a.length):!0}function h(a,b){return(a?a+".":"")+b}var i=c(124)["default"],j={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},k=/[&<>"'`]/g,l=/[&<>"'`]/;b.extend=e;var m=Object.prototype.toString;b.toString=m;var n=function(a){return"function"==typeof a};n(/x/)&&(n=function(a){return"function"==typeof a&&"[object Function]"===m.call(a)});var n;b.isFunction=n;var o=Array.isArray||function(a){return a&&"object"==typeof a?"[object Array]"===m.call(a):!1};b.isArray=o,b.escapeExpression=f,b.isEmpty=g,b.appendContextPath=h},function(a,b){"use strict";function c(a){this.string=a}c.prototype.toString=function(){return""+this.string},b["default"]=c},function(a,b){"use strict";function c(a,b){var c;b&&b.firstLine&&(c=b.firstLine,a+=" - "+c+":"+b.firstColumn);for(var e=Error.prototype.constructor.call(this,a),f=0;f<d.length;f++)this[d[f]]=e[d[f]];c&&(this.lineNumber=c,this.column=b.firstColumn)}var d=["description","fileName","lineNumber","message","name","number","stack"];c.prototype=new Error,b["default"]=c},function(a,b,c){"use strict";function d(a){var b=a&&a[0]||1,c=l;if(b!==c){if(c>b){var d=m[c],e=m[b];throw new k("Template was precompiled with an older version of Handlebars than the current runtime. Please update your precompiler to a newer version ("+d+") or downgrade your runtime to an older version ("+e+").")}throw new k("Template was precompiled with a newer version of Handlebars than the current runtime. Please update your runtime to a newer version ("+a[1]+").")}}function e(a,b){if(!b)throw new k("No environment passed to template");if(!a||!a.main)throw new k("Unknown template object: "+typeof a);b.VM.checkRevision(a.compiler);var c=function(c,d,e,f,g,h,i,l,m){g&&(f=j.extend({},f,g));var n=b.VM.invokePartial.call(this,c,e,f,h,i,l,m);if(null==n&&b.compile){var o={helpers:h,partials:i,data:l,depths:m};i[e]=b.compile(c,{data:void 0!==l,compat:a.compat},b),n=i[e](f,o)}if(null!=n){if(d){for(var p=n.split("\n"),q=0,r=p.length;r>q&&(p[q]||q+1!==r);q++)p[q]=d+p[q];n=p.join("\n")}return n}throw new k("The partial "+e+" could not be compiled when running in runtime-only mode")},d={lookup:function(a,b){for(var c=a.length,d=0;c>d;d++)if(a[d]&&null!=a[d][b])return a[d][b]},lambda:function(a,b){return"function"==typeof a?a.call(b):a},escapeExpression:j.escapeExpression,invokePartial:c,fn:function(b){return a[b]},programs:[],program:function(a,b,c){var d=this.programs[a],e=this.fn(a);return b||c?d=f(this,a,e,b,c):d||(d=this.programs[a]=f(this,a,e)),d},data:function(a,b){for(;a&&b--;)a=a._parent;return a},merge:function(a,b){
var c=a||b;return a&&b&&a!==b&&(c=j.extend({},b,a)),c},noop:b.VM.noop,compilerInfo:a.compiler},e=function(b,c){c=c||{};var f=c.data;e._setup(c),!c.partial&&a.useData&&(f=i(b,f));var g;return a.useDepths&&(g=c.depths?[b].concat(c.depths):[b]),a.main.call(d,b,d.helpers,d.partials,f,g)};return e.isTop=!0,e._setup=function(c){c.partial?(d.helpers=c.helpers,d.partials=c.partials):(d.helpers=d.merge(c.helpers,b.helpers),a.usePartial&&(d.partials=d.merge(c.partials,b.partials)))},e._child=function(b,c,e){if(a.useDepths&&!e)throw new k("must pass parent depths");return f(d,b,a[b],c,e)},e}function f(a,b,c,d,e){var f=function(b,f){return f=f||{},c.call(a,b,a.helpers,a.partials,f.data||d,e&&[b].concat(e))};return f.program=b,f.depth=e?e.length:0,f}function g(a,b,c,d,e,f,g){var h={partial:!0,helpers:d,partials:e,data:f,depths:g};if(void 0===a)throw new k("The partial "+b+" could not be found");return a instanceof Function?a(c,h):void 0}function h(){return""}function i(a,b){return b&&"root"in b||(b=b?n(b):{},b.root=a),b}var j=c(123),k=c(125)["default"],l=c(122).COMPILER_REVISION,m=c(122).REVISION_CHANGES,n=c(122).createFrame;b.checkRevision=d,b.template=e,b.program=f,b.invokePartial=g,b.noop=h},function(a,b,c){var d,e;d=[c(47),c(46),c(45),c(48)],e=function(a,b,c,d){function e(a,b){return/touch/.test(a.type)?(a.originalEvent||a).changedTouches[0]["page"+b]:a["page"+b]}function f(a){var b=a||window.event;return a instanceof MouseEvent?"which"in b?3===b.which:"button"in b?2===b.button:!1:!1}function g(a,b,c){var d;return d=b instanceof MouseEvent||!b.touches&&!b.changedTouches?b:b.touches&&b.touches.length?b.touches[0]:b.changedTouches[0],{type:a,target:b.target,currentTarget:c,pageX:d.pageX,pageY:d.pageY}}function h(a){(a instanceof MouseEvent||a instanceof window.TouchEvent)&&(a.preventManipulation&&a.preventManipulation(),a.cancelable&&a.preventDefault&&a.preventDefault())}var i=!c.isUndefined(window.PointerEvent),j=!i&&d.isMobile(),k=!i&&!j,l=d.isFF()&&d.isOSX(),m=function(a,d){function j(a){(k||i&&"touch"!==a.pointerType)&&r(b.touchEvents.OVER,a)}function m(a){(k||i&&"touch"!==a.pointerType)&&r(b.touchEvents.MOVE,a)}function n(c){(k||i&&"touch"!==c.pointerType&&!a.contains(document.elementFromPoint(c.x,c.y)))&&r(b.touchEvents.OUT,c)}function o(b){s=b.target,w=e(b,"X"),x=e(b,"Y"),f(b)||(i?b.isPrimary&&(d.preventScrolling&&(t=b.pointerId,a.setPointerCapture(t)),a.addEventListener("pointermove",p),a.addEventListener("pointercancel",q),a.addEventListener("pointerup",q)):k&&(document.addEventListener("mousemove",p),l&&"object"===b.target.nodeName.toLowerCase()?a.addEventListener("click",q):document.addEventListener("mouseup",q)),s.addEventListener("touchmove",p),s.addEventListener("touchcancel",q),s.addEventListener("touchend",q))}function p(a){var c=b.touchEvents,f=6;if(v)r(c.DRAG,a);else{var g=e(a,"X"),i=e(a,"Y"),j=g-w,k=i-x;j*j+k*k>f*f&&(r(c.DRAG_START,a),v=!0,r(c.DRAG,a))}d.preventScrolling&&h(a)}function q(c){var e=b.touchEvents;i?(d.preventScrolling&&a.releasePointerCapture(t),a.removeEventListener("pointermove",p),a.removeEventListener("pointercancel",q),a.removeEventListener("pointerup",q)):k&&(document.removeEventListener("mousemove",p),document.removeEventListener("mouseup",q)),s.removeEventListener("touchmove",p),s.removeEventListener("touchcancel",q),s.removeEventListener("touchend",q),v?r(e.DRAG_END,c):d.directSelect&&c.target!==a||-1!==c.type.indexOf("cancel")||(i&&c instanceof window.PointerEvent?"touch"===c.pointerType?r(e.TAP,c):r(e.CLICK,c):k?r(e.CLICK,c):(r(e.TAP,c),h(c))),s=null,v=!1}function r(a,e){var f;if(d.enableDoubleTap&&(a===b.touchEvents.CLICK||a===b.touchEvents.TAP))if(c.now()-y<z){var h=a===b.touchEvents.CLICK?b.touchEvents.DOUBLE_CLICK:b.touchEvents.DOUBLE_TAP;f=g(h,e,u),A.trigger(h,f),y=0}else y=c.now();f=g(a,e,u),A.trigger(a,f)}var s,t,u=a,v=!1,w=0,x=0,y=0,z=300;d=d||{},i?(a.addEventListener("pointerdown",o),d.useHover&&(a.addEventListener("pointerover",j),a.addEventListener("pointerout",n)),d.useMove&&a.addEventListener("pointermove",m)):k&&(a.addEventListener("mousedown",o),d.useHover&&(a.addEventListener("mouseover",j),a.addEventListener("mouseout",n)),d.useMove&&a.addEventListener("mousemove",m)),a.addEventListener("touchstart",o);var A=this;return this.triggerEvent=r,this.destroy=function(){a.removeEventListener("touchstart",o),a.removeEventListener("mousedown",o),s&&(s.removeEventListener("touchmove",p),s.removeEventListener("touchcancel",q),s.removeEventListener("touchend",q)),i&&(d.preventScrolling&&a.releasePointerCapture(t),a.removeEventListener("pointerover",j),a.removeEventListener("pointerdown",o),a.removeEventListener("pointermove",p),a.removeEventListener("pointermove",m),a.removeEventListener("pointercancel",q),a.removeEventListener("pointerout",n),a.removeEventListener("pointerup",q)),a.removeEventListener("click",q),a.removeEventListener("mouseover",j),a.removeEventListener("mousemove",m),a.removeEventListener("mouseout",n),document.removeEventListener("mousemove",p),document.removeEventListener("mouseup",q)},this};return c.extend(m.prototype,a),m}.apply(b,d),!(void 0!==e&&(a.exports=e))},function(a,b,c){var d,e;d=[c(48),c(55),c(62),c(45)],e=function(a,b,c,d){var e=b.style,f={back:!0,fontSize:15,fontFamily:"Arial,sans-serif",fontOpacity:100,color:"#FFF",backgroundColor:"#000",backgroundOpacity:100,edgeStyle:null,windowColor:"#FFF",windowOpacity:0,preprocessor:d.identity},g=function(g){function h(b){b=b||"";var c="jw-captions-window jw-reset";b?(s.innerHTML=b,r.className=c+" jw-captions-window-active"):(r.className=c,a.empty(s))}function i(a){p=a,k(n,p)}function j(a,b){var c=a.source,e=b.metadata;return c?e&&d.isNumber(e[c])?e[c]:!1:b.position}function k(a,b){if(a&&a.data&&b){var c=j(a,b);if(c!==!1){var d=a.data;if(!(o>=0&&l(d,o,c))){for(var e=-1,f=0;f<d.length;f++)if(l(d,f,c)){e=f;break}-1===e?h(""):e!==o&&(o=e,h(t.preprocessor(d[o].text)))}}}}function l(a,b,c){return a[b].begin<=c&&(!a[b].end||a[b].end>=c)&&(b===a.length-1||a[b+1].begin>=c)}function m(a,c,d){var e=b.hexToRgba("#000000",d);"dropshadow"===a?c.textShadow="0 2px 1px "+e:"raised"===a?c.textShadow="0 0 5px "+e+", 0 1px 5px "+e+", 0 2px 5px "+e:"depressed"===a?c.textShadow="0 -2px 1px "+e:"uniform"===a&&(c.textShadow="-2px 0 1px "+e+",2px 0 1px "+e+",0 -2px 1px "+e+",0 2px 1px "+e+",-1px 1px 1px "+e+",1px 1px 1px "+e+",1px -1px 1px "+e+",1px 1px 1px "+e)}var n,o,p,q,r,s,t={};q=document.createElement("div"),q.className="jw-captions jw-reset",this.show=function(){q.className="jw-captions jw-captions-enabled jw-reset"},this.hide=function(){q.className="jw-captions jw-reset"},this.populate=function(a){return o=-1,n=a,a?void k(a,p):void h("")},this.resize=function(){var a=q.clientWidth,b=Math.pow(a/400,.6);if(b){var c=t.fontSize*b;e(q,{fontSize:Math.round(c)+"px"})}},this.setup=function(a){if(r=document.createElement("div"),s=document.createElement("span"),r.className="jw-captions-window jw-reset",s.className="jw-captions-text jw-reset",t=d.extend({},f,a),a){var c=t.fontOpacity,h=t.windowOpacity,i=t.edgeStyle,j=t.backgroundColor,k={},l={color:b.hexToRgba(t.color,c),fontFamily:t.fontFamily,fontStyle:t.fontStyle,fontWeight:t.fontWeight,textDecoration:t.textDecoration};h&&(k.backgroundColor=b.hexToRgba(t.windowColor,h)),m(i,l,c),t.back?l.backgroundColor=b.hexToRgba(j,t.backgroundOpacity):null===i&&m("uniform",l),e(r,k),e(s,l)}r.appendChild(s),q.appendChild(r),this.populate(g.get("captionsTrack"))},this.element=function(){return q},g.on("change:playlistItem",function(){p=null,o=-1,h("")},this),g.on("change:captionsTrack",function(a,b){this.populate(b)},this),g.mediaController.on("seek",function(){o=-1},this),g.mediaController.on("time seek",i,this),g.mediaController.on("subtitlesTrackData",function(){k(n,p)},this),g.on("change:state",function(a,b){switch(b){case c.IDLE:case c.ERROR:case c.COMPLETE:this.hide();break;default:this.show()}},this)};return g}.apply(b,d),!(void 0!==e&&(a.exports=e))},function(a,b,c){var d,e;d=[c(127),c(46),c(47),c(45)],e=function(a,b,c,d){var e=function(e,f,g){function h(a){return e.get("flashBlocked")?void 0:k?void k(a):void o.trigger(a.type===b.touchEvents.CLICK?"click":"tap")}function i(){return l?void l():void o.trigger("doubleClick")}var j,k,l,m={enableDoubleTap:!0,useMove:!0};d.extend(this,c),j=f,this.element=function(){return j};var n=new a(j,d.extend(m,g));n.on("click tap",h),n.on("doubleClick doubleTap",i),n.on("move",function(){o.trigger("move")}),n.on("over",function(){o.trigger("over")}),n.on("out",function(){o.trigger("out")}),this.clickHandler=h;var o=this;this.setAlternateClickHandlers=function(a,b){k=a,l=b||null},this.revertAlternateClickHandlers=function(){k=null,l=null}};return e}.apply(b,d),!(void 0!==e&&(a.exports=e))},function(a,b,c){var d,e;d=[c(48),c(47),c(127),c(131),c(45)],e=function(a,b,c,d,e){var f=function(f){e.extend(this,b),this.model=f,this.el=a.createElement(d({}));var g=this;this.iconUI=new c(this.el).on("click tap",function(a){g.trigger(a.type)})};return e.extend(f.prototype,{element:function(){return this.el}}),f}.apply(b,d),!(void 0!==e&&(a.exports=e))},function(a,b,c){var d=c(120);a.exports=(d["default"]||d).template({compiler:[6,">= 2.0.0-beta.1"],main:function(a,b,c,d){return'<div class="jw-display-icon-container jw-background-color jw-reset">\n    <div class="jw-icon jw-icon-display jw-button-color jw-reset"></div>\n</div>\n'},useData:!0})},function(a,b,c){var d,e;d=[c(127),c(48),c(46),c(45),c(47),c(133)],e=function(a,b,c,d,e,f){var g=b.style,h={linktarget:"_blank",margin:8,hide:!1,position:"top-right"},i=function(i){var j,k,l=new Image,m=d.extend({},i.get("logo"));return d.extend(this,e),this.setup=function(e){if(k=d.extend({},h,m),k.hide="true"===k.hide.toString(),j=b.createElement(f()),k.file){k.hide&&b.addClass(j,"jw-hide"),b.addClass(j,"jw-logo-"+(k.position||h.position)),"top-right"===k.position&&(i.on("change:dock",this.topRight,this),i.on("change:controls",this.topRight,this),this.topRight(i)),i.set("logo",k),l.onload=function(){var a={backgroundImage:'url("'+this.src+'")',width:this.width,height:this.height};if(k.margin!==h.margin){var b=/(\w+)-(\w+)/.exec(k.position);3===b.length&&(a["margin-"+b[1]]=k.margin,a["margin-"+b[2]]=k.margin)}g(j,a),i.set("logoWidth",a.width)},l.src=k.file;var n=new a(j);n.on("click tap",function(a){b.exists(a)&&a.stopPropagation&&a.stopPropagation(),this.trigger(c.JWPLAYER_LOGO_CLICK,{link:k.link,linktarget:k.linktarget})},this),e.appendChild(j)}},this.topRight=function(a){var b=a.get("controls"),c=a.get("dock"),d=b&&(c&&c.length||a.get("sharing")||a.get("related"));g(j,{top:d?"3.5em":0})},this.element=function(){return j},this.position=function(){return k.position},this.destroy=function(){l.onload=null},this};return i}.apply(b,d),!(void 0!==e&&(a.exports=e))},function(a,b,c){var d=c(120);a.exports=(d["default"]||d).template({compiler:[6,">= 2.0.0-beta.1"],main:function(a,b,c,d){return'<div class="jw-logo jw-reset"></div>'},useData:!0})},function(a,b,c){var d,e;d=[c(48),c(45),c(47),c(58),c(127),c(136),c(135),c(142),c(144),c(146),c(147)],e=function(a,b,c,d,e,f,g,h,i,j,k){function l(a,b){var c=document.createElement("div");return c.className="jw-icon jw-icon-inline jw-button-color jw-reset "+a,c.style.display="none",b&&new e(c).on("click tap",function(){b()}),{element:function(){return c},toggle:function(a){a?this.show():this.hide()},show:function(){c.style.display=""},hide:function(){c.style.display="none"}}}function m(a){var b=document.createElement("span");return b.className="jw-text jw-reset "+a,b}function n(a){var b=new h(a);return b}function o(a,c){var d=document.createElement("div");return d.className="jw-group jw-controlbar-"+a+"-group jw-reset",b.each(c,function(a){a.element&&(a=a.element()),d.appendChild(a)}),d}function p(b,c){this._api=b,this._model=c,this._isMobile=a.isMobile(),this._compactModeMaxSize=400,this._maxCompactWidth=-1,this.setup()}return b.extend(p.prototype,c,{setup:function(){this.build(),this.initialize()},build:function(){var a,c,d,e,h=new g(this._model,this._api),p=new k("jw-icon-more");this._model.get("visualplaylist")!==!1&&(a=new i("jw-icon-playlist")),this._isMobile||(e=l("jw-icon-volume",this._api.setMute),c=new f("jw-slider-volume","horizontal"),d=new j(this._model,"jw-icon-volume")),this.elements={alt:m("jw-text-alt"),play:l("jw-icon-playback",this._api.play.bind(this,{reason:"interaction"})),prev:l("jw-icon-prev",this._api.playlistPrev.bind(this,{reason:"interaction"})),next:l("jw-icon-next",this._api.playlistNext.bind(this,{reason:"interaction"})),playlist:a,elapsed:m("jw-text-elapsed"),time:h,duration:m("jw-text-duration"),drawer:p,hd:n("jw-icon-hd"),cc:n("jw-icon-cc"),audiotracks:n("jw-icon-audio-tracks"),mute:e,volume:c,volumetooltip:d,cast:l("jw-icon-cast jw-off",this._api.castToggle),fullscreen:l("jw-icon-fullscreen",this._api.setFullscreen)},this.layout={left:[this.elements.play,this.elements.prev,this.elements.playlist,this.elements.next,this.elements.elapsed],center:[this.elements.time,this.elements.alt],right:[this.elements.duration,this.elements.hd,this.elements.cc,this.elements.audiotracks,this.elements.drawer,this.elements.mute,this.elements.cast,this.elements.volume,this.elements.volumetooltip,this.elements.fullscreen],drawer:[this.elements.hd,this.elements.cc,this.elements.audiotracks]},this.menus=b.compact([this.elements.playlist,this.elements.hd,this.elements.cc,this.elements.audiotracks,this.elements.volumetooltip]),this.layout.left=b.compact(this.layout.left),this.layout.center=b.compact(this.layout.center),this.layout.right=b.compact(this.layout.right),this.layout.drawer=b.compact(this.layout.drawer),this.el=document.createElement("div"),this.el.className="jw-controlbar jw-background-color jw-reset",this.elements.left=o("left",this.layout.left),this.elements.center=o("center",this.layout.center),this.elements.right=o("right",this.layout.right),this.el.appendChild(this.elements.left),this.el.appendChild(this.elements.center),this.el.appendChild(this.elements.right)},initialize:function(){this.elements.play.show(),this.elements.fullscreen.show(),this.elements.mute&&this.elements.mute.show(),this.onVolume(this._model,this._model.get("volume")),this.onPlaylist(this._model,this._model.get("playlist")),this.onPlaylistItem(this._model,this._model.get("playlistItem")),this.onMediaModel(this._model,this._model.get("mediaModel")),this.onCastAvailable(this._model,this._model.get("castAvailable")),this.onCastActive(this._model,this._model.get("castActive")),this.onCaptionsList(this._model,this._model.get("captionsList")),this._model.on("change:volume",this.onVolume,this),this._model.on("change:mute",this.onMute,this),this._model.on("change:playlist",this.onPlaylist,this),this._model.on("change:playlistItem",this.onPlaylistItem,this),this._model.on("change:mediaModel",this.onMediaModel,this),this._model.on("change:castAvailable",this.onCastAvailable,this),this._model.on("change:castActive",this.onCastActive,this),this._model.on("change:duration",this.onDuration,this),this._model.on("change:position",this.onElapsed,this),this._model.on("change:fullscreen",this.onFullscreen,this),this._model.on("change:captionsList",this.onCaptionsList,this),this._model.on("change:captionsIndex",this.onCaptionsIndex,this),this._model.on("change:compactUI",this.onCompactUI,this),this.elements.volume&&this.elements.volume.on("update",function(a){var b=a.percentage;this._api.setVolume(b)},this),this.elements.volumetooltip&&(this.elements.volumetooltip.on("update",function(a){var b=a.percentage;this._api.setVolume(b)},this),this.elements.volumetooltip.on("toggleValue",function(){this._api.setMute()},this)),this.elements.playlist&&this.elements.playlist.on("select",function(a){this._model.once("itemReady",function(){this._api.play({reason:"interaction"})},this),this._api.load(a)},this),this.elements.hd.on("select",function(a){this._model.getVideo().setCurrentQuality(a)},this),this.elements.hd.on("toggleValue",function(){this._model.getVideo().setCurrentQuality(0===this._model.getVideo().getCurrentQuality()?1:0)},this),this.elements.cc.on("select",function(a){this._api.setCurrentCaptions(a)},this),this.elements.cc.on("toggleValue",function(){var a=this._model.get("captionsIndex");this._api.setCurrentCaptions(a?0:1)},this),this.elements.audiotracks.on("select",function(a){this._model.getVideo().setCurrentAudioTrack(a)},this),new e(this.elements.duration).on("click tap",function(){if("DVR"===a.adaptiveType(this._model.get("duration"))){var b=this._model.get("position");this._api.seek(Math.max(d.dvrSeekLimit,b))}},this),new e(this.el).on("click tap drag",function(){this.trigger("userAction")},this),this.elements.drawer.on("open-drawer close-drawer",function(b,c){a.toggleClass(this.el,"jw-drawer-expanded",c.isOpen),c.isOpen||this.closeMenus()},this),b.each(this.menus,function(a){a.on("open-tooltip",this.closeMenus,this)},this)},onCaptionsList:function(a,b){var c=a.get("captionsIndex");this.elements.cc.setup(b,c),this.clearCompactMode()},onCaptionsIndex:function(a,b){this.elements.cc.selectItem(b)},onPlaylist:function(a,b){var c=b.length>1;this.elements.next.toggle(c),this.elements.prev.toggle(c),this.elements.playlist&&this.elements.playlist.setup(b,a.get("item"))},onPlaylistItem:function(a){this.elements.time.updateBuffer(0),this.elements.time.render(0),this.elements.duration.innerHTML="00:00",this.elements.elapsed.innerHTML="00:00",this.clearCompactMode();var b=a.get("item");this.elements.playlist&&this.elements.playlist.selectItem(b),this.elements.audiotracks.setup()},onMediaModel:function(c,d){d.on("change:levels",function(a,b){this.elements.hd.setup(b,a.get("currentLevel")),this.clearCompactMode()},this),d.on("change:currentLevel",function(a,b){this.elements.hd.selectItem(b)},this),d.on("change:audioTracks",function(a,c){var d=b.map(c,function(a){return{label:a.name}});this.elements.audiotracks.setup(d,a.get("currentAudioTrack"),{toggle:!1}),this.clearCompactMode()},this),d.on("change:currentAudioTrack",function(a,b){this.elements.audiotracks.selectItem(b)},this),d.on("change:state",function(b,c){"complete"===c&&(this.elements.drawer.closeTooltip(),a.removeClass(this.el,"jw-drawer-expanded"))},this)},onVolume:function(a,b){this.renderVolume(a.get("mute"),b)},onMute:function(a,b){this.renderVolume(b,a.get("volume"))},renderVolume:function(b,c){this.elements.mute&&a.toggleClass(this.elements.mute.element(),"jw-off",b),this.elements.volume&&this.elements.volume.render(b?0:c),this.elements.volumetooltip&&(this.elements.volumetooltip.volumeSlider.render(b?0:c),a.toggleClass(this.elements.volumetooltip.element(),"jw-off",b))},onCastAvailable:function(a,b){this.elements.cast.toggle(b),this.clearCompactMode()},onCastActive:function(b,c){a.toggleClass(this.elements.cast.element(),"jw-off",!c)},onElapsed:function(b,c){var d,e=b.get("duration");d="DVR"===a.adaptiveType(e)?"-"+a.timeFormat(-e):a.timeFormat(c),this.elements.elapsed.innerHTML=d},onDuration:function(b,c){var d;"DVR"===a.adaptiveType(c)?(d="Live",this.clearCompactMode()):d=a.timeFormat(c),this.elements.duration.innerHTML=d},onFullscreen:function(b,c){a.toggleClass(this.elements.fullscreen.element(),"jw-off",c)},element:function(){return this.el},getVisibleBounds:function(){var b,c=this.el,d=getComputedStyle?getComputedStyle(c):c.currentStyle;return"table"===d.display?a.bounds(c):(c.style.visibility="hidden",c.style.display="table",b=a.bounds(c),c.style.visibility=c.style.display="",b)},setAltText:function(a){this.elements.alt.innerHTML=a},addCues:function(a){this.elements.time&&(b.each(a,function(a){this.elements.time.addCue(a)},this),this.elements.time.drawCues())},closeMenus:function(a){b.each(this.menus,function(b){a&&a.target===b.el||b.closeTooltip(a)})},hideComponents:function(){this.closeMenus(),this.elements.drawer.closeTooltip(),a.removeClass(this.el,"jw-drawer-expanded")},clearCompactMode:function(){this._maxCompactWidth=-1,this._model.set("compactUI",!1),this._containerWidth&&this.checkCompactMode(this._containerWidth)},setCompactModeBounds:function(){if(this.element().offsetWidth>0){var b=this.elements.left.offsetWidth+this.elements.right.offsetWidth;if("LIVE"===a.adaptiveType(this._model.get("duration")))this._maxCompactWidth=b+this.elements.alt.offsetWidth;else{var c=b+(this.elements.center.offsetWidth-this.elements.time.el.offsetWidth),d=.2;this._maxCompactWidth=c/(1-d)}}},checkCompactMode:function(a){-1===this._maxCompactWidth&&this.setCompactModeBounds(),this._containerWidth=a,-1!==this._maxCompactWidth&&(a>=this._compactModeMaxSize&&a>this._maxCompactWidth?this._model.set("compactUI",!1):(a<this._compactModeMaxSize||a<=this._maxCompactWidth)&&this._model.set("compactUI",!0))},onCompactUI:function(c,d){a.removeClass(this.el,"jw-drawer-expanded"),this.elements.drawer.setup(this.layout.drawer,d),(!d||this.elements.drawer.activeContents.length<2)&&b.each(this.layout.drawer,function(a){this.elements.right.insertBefore(a.el,this.elements.drawer.el)},this)}}),p}.apply(b,d),!(void 0!==e&&(a.exports=e))},function(a,b,c){var d,e;d=[c(45),c(48),c(58),c(136),c(139),c(140),c(141)],e=function(a,b,c,d,e,f,g){var h=e.extend({setup:function(){this.text=document.createElement("span"),this.text.className="jw-text jw-reset",this.img=document.createElement("div"),this.img.className="jw-reset";var a=document.createElement("div");a.className="jw-time-tip jw-background-color jw-reset",a.appendChild(this.img),a.appendChild(this.text),b.removeClass(this.el,"jw-hidden"),this.addContent(a)},image:function(a){b.style(this.img,a)},update:function(a){this.text.innerHTML=a}}),i=d.extend({constructor:function(b,c){this._model=b,this._api=c,this.timeTip=new h("jw-tooltip-time"),this.timeTip.setup(),this.cues=[],this.seekThrottled=a.throttle(this.performSeek,400),this._model.on("change:playlistItem",this.onPlaylistItem,this).on("change:position",this.onPosition,this).on("change:duration",this.onDuration,this).on("change:buffer",this.onBuffer,this),d.call(this,"jw-slider-time","horizontal")},setup:function(){d.prototype.setup.apply(this,arguments),this._model.get("playlistItem")&&this.onPlaylistItem(this._model,this._model.get("playlistItem")),this.elementRail.appendChild(this.timeTip.element()),this.el.addEventListener("mousemove",this.showTimeTooltip.bind(this),!1),this.el.addEventListener("mouseout",this.hideTimeTooltip.bind(this),!1)},limit:function(d){if(this.activeCue&&a.isNumber(this.activeCue.pct))return this.activeCue.pct;var e=this._model.get("duration"),f=b.adaptiveType(e);if("DVR"===f){var g=(1-d/100)*e,h=this._model.get("position"),i=Math.min(g,Math.max(c.dvrSeekLimit,h)),j=100*i/e;return 100-j}return d},update:function(a){this.seekTo=a,this.seekThrottled(),d.prototype.update.apply(this,arguments)},dragStart:function(){this._model.set("scrubbing",!0),d.prototype.dragStart.apply(this,arguments)},dragEnd:function(){d.prototype.dragEnd.apply(this,arguments),this._model.set("scrubbing",!1)},onSeeked:function(){this._model.get("scrubbing")&&this.performSeek()},onBuffer:function(a,b){this.updateBuffer(b)},onPosition:function(a,b){this.updateTime(b,a.get("duration"))},onDuration:function(a,b){this.updateTime(a.get("position"),b)},updateTime:function(a,c){var d=0;if(c){var e=b.adaptiveType(c);"DVR"===e?d=(c-a)/c*100:"VOD"===e&&(d=a/c*100)}this.render(d)},onPlaylistItem:function(b,c){this.reset(),b.mediaModel.on("seeked",this.onSeeked,this);var d=c.tracks;a.each(d,function(a){a&&a.kind&&"thumbnails"===a.kind.toLowerCase()?this.loadThumbnails(a.file):a&&a.kind&&"chapters"===a.kind.toLowerCase()&&this.loadChapters(a.file)},this)},performSeek:function(){var a,c=this.seekTo,d=this._model.get("duration"),e=b.adaptiveType(d);0===d?this._api.play():"DVR"===e?(a=(100-c)/100*d,this._api.seek(a)):(a=c/100*d,this._api.seek(Math.min(a,d-.25)))},showTimeTooltip:function(a){var d=this._model.get("duration");if(0!==d){var e=b.bounds(this.elementRail),f=a.pageX?a.pageX-e.left:a.x;f=b.between(f,0,e.width);var g=f/e.width,h=d*g;0>d&&(h=d-h);var i;if(this.activeCue)i=this.activeCue.text;else{var j=!0;i=b.timeFormat(h,j),0>d&&h>c.dvrSeekLimit&&(i="Live")}this.timeTip.update(i),this.showThumbnail(h),b.addClass(this.timeTip.el,"jw-open"),this.timeTip.el.style.left=100*g+"%"}},hideTimeTooltip:function(){b.removeClass(this.timeTip.el,"jw-open")},reset:function(){this.resetChapters(),this.resetThumbnails()}});return a.extend(i.prototype,f,g),i}.apply(b,d),!(void 0!==e&&(a.exports=e))},function(a,b,c){var d,e;d=[c(137),c(127),c(138),c(48)],e=function(a,b,c,d){var e=a.extend({constructor:function(a,b){this.className=a+" jw-background-color jw-reset",this.orientation=b,this.dragStartListener=this.dragStart.bind(this),this.dragMoveListener=this.dragMove.bind(this),this.dragEndListener=this.dragEnd.bind(this),this.tapListener=this.tap.bind(this),this.setup()},setup:function(){var a={"default":this["default"],className:this.className,orientation:"jw-slider-"+this.orientation};this.el=d.createElement(c(a)),this.elementRail=this.el.getElementsByClassName("jw-slider-container")[0],this.elementBuffer=this.el.getElementsByClassName("jw-buffer")[0],this.elementProgress=this.el.getElementsByClassName("jw-progress")[0],this.elementThumb=this.el.getElementsByClassName("jw-knob")[0],this.userInteract=new b(this.element(),{preventScrolling:!0}),this.userInteract.on("dragStart",this.dragStartListener),this.userInteract.on("drag",this.dragMoveListener),this.userInteract.on("dragEnd",this.dragEndListener),this.userInteract.on("tap click",this.tapListener)},dragStart:function(){this.trigger("dragStart"),this.railBounds=d.bounds(this.elementRail)},dragEnd:function(a){this.dragMove(a),this.trigger("dragEnd")},dragMove:function(a){var b,c,e=this.railBounds=this.railBounds?this.railBounds:d.bounds(this.elementRail);"horizontal"===this.orientation?(b=a.pageX,c=b<e.left?0:b>e.right?100:100*d.between((b-e.left)/e.width,0,1)):(b=a.pageY,c=b>=e.bottom?0:b<=e.top?100:100*d.between((e.height-(b-e.top))/e.height,0,1));var f=this.limit(c);return this.render(f),this.update(f),!1},tap:function(a){this.railBounds=d.bounds(this.elementRail),this.dragMove(a)},limit:function(a){return a},update:function(a){this.trigger("update",{percentage:a})},render:function(a){a=Math.max(0,Math.min(a,100)),"horizontal"===this.orientation?(this.elementThumb.style.left=a+"%",this.elementProgress.style.width=a+"%"):(this.elementThumb.style.bottom=a+"%",this.elementProgress.style.height=a+"%")},updateBuffer:function(a){this.elementBuffer.style.width=a+"%"},element:function(){return this.el}});return e}.apply(b,d),!(void 0!==e&&(a.exports=e))},function(a,b,c){var d,e;d=[c(47),c(45)],e=function(a,b){function c(){}var d=function(a,c){var d,e=this;d=a&&b.has(a,"constructor")?a.constructor:function(){return e.apply(this,arguments)},b.extend(d,e,c);var f=function(){this.constructor=d};return f.prototype=e.prototype,d.prototype=new f,a&&b.extend(d.prototype,a),d.__super__=e.prototype,d};return c.extend=d,b.extend(c.prototype,a),c}.apply(b,d),!(void 0!==e&&(a.exports=e))},function(a,b,c){var d=c(120);a.exports=(d["default"]||d).template({compiler:[6,">= 2.0.0-beta.1"],main:function(a,b,c,d){var e,f="function",g=b.helperMissing,h=this.escapeExpression;return'<div class="'+h((e=null!=(e=b.className||(null!=a?a.className:a))?e:g,typeof e===f?e.call(a,{name:"className",hash:{},data:d}):e))+" "+h((e=null!=(e=b.orientation||(null!=a?a.orientation:a))?e:g,typeof e===f?e.call(a,{name:"orientation",hash:{},data:d}):e))+' jw-reset">\n    <div class="jw-slider-container jw-reset">\n        <div class="jw-rail jw-reset"></div>\n        <div class="jw-buffer jw-reset"></div>\n        <div class="jw-progress jw-reset"></div>\n        <div class="jw-knob jw-reset"></div>\n    </div>\n</div>'},useData:!0})},function(a,b,c){var d,e;d=[c(137),c(48)],e=function(a,b){var c=a.extend({constructor:function(a){this.el=document.createElement("div"),this.el.className="jw-icon jw-icon-tooltip "+a+" jw-button-color jw-reset jw-hidden",this.container=document.createElement("div"),this.container.className="jw-overlay jw-reset",this.openClass="jw-open",this.componentType="tooltip",this.el.appendChild(this.container)},addContent:function(a){this.content&&this.removeContent(),this.content=a,this.container.appendChild(a)},removeContent:function(){this.content&&(this.container.removeChild(this.content),this.content=null)},hasContent:function(){return!!this.content},element:function(){return this.el},openTooltip:function(a){this.trigger("open-"+this.componentType,a,{isOpen:!0}),this.isOpen=!0,b.toggleClass(this.el,this.openClass,this.isOpen)},closeTooltip:function(a){this.trigger("close-"+this.componentType,a,{isOpen:!1}),this.isOpen=!1,b.toggleClass(this.el,this.openClass,this.isOpen)},toggleOpenState:function(a){this.isOpen?this.closeTooltip(a):this.openTooltip(a)}});return c}.apply(b,d),!(void 0!==e&&(a.exports=e))},function(a,b,c){var d,e;d=[c(45),c(48),c(112)],e=function(a,b,c){function d(a,b){this.time=a,this.text=b,this.el=document.createElement("div"),this.el.className="jw-cue jw-reset"}a.extend(d.prototype,{align:function(a){if("%"===this.time.toString().slice(-1))this.pct=this.time;else{var b=this.time/a*100;this.pct=b+"%"}this.el.style.left=this.pct}});var e={loadChapters:function(a){b.ajax(a,this.chaptersLoaded.bind(this),this.chaptersFailed,{plainText:!0})},chaptersLoaded:function(b){var d=c(b.responseText);a.isArray(d)&&(a.each(d,this.addCue,this),this.drawCues())},chaptersFailed:function(){},addCue:function(a){this.cues.push(new d(a.begin,a.text))},drawCues:function(){var b=this._model.mediaModel.get("duration");if(!b||0>=b)return void this._model.mediaModel.once("change:duration",this.drawCues,this);var c=this;a.each(this.cues,function(a){a.align(b),a.el.addEventListener("mouseover",function(){c.activeCue=a}),a.el.addEventListener("mouseout",function(){c.activeCue=null}),c.elementRail.appendChild(a.el)})},resetChapters:function(){a.each(this.cues,function(a){a.el.parentNode&&a.el.parentNode.removeChild(a.el)},this),this.cues=[]}};return e}.apply(b,d),!(void 0!==e&&(a.exports=e))},function(a,b,c){var d,e;d=[c(45),c(48),c(112)],e=function(a,b,c){function d(a){this.begin=a.begin,this.end=a.end,this.img=a.text}var e={loadThumbnails:function(a){a&&(this.vttPath=a.split("?")[0].split("/").slice(0,-1).join("/"),this.individualImage=null,b.ajax(a,this.thumbnailsLoaded.bind(this),this.thumbnailsFailed.bind(this),{plainText:!0}))},thumbnailsLoaded:function(b){var e=c(b.responseText);a.isArray(e)&&(a.each(e,function(a){this.thumbnails.push(new d(a))},this),this.drawCues())},thumbnailsFailed:function(){},chooseThumbnail:function(b){var c=a.sortedIndex(this.thumbnails,{end:b},a.property("end"));c>=this.thumbnails.length&&(c=this.thumbnails.length-1);var d=this.thumbnails[c].img;return d.indexOf("://")<0&&(d=this.vttPath?this.vttPath+"/"+d:d),d},loadThumbnail:function(b){var c=this.chooseThumbnail(b),d={display:"block",margin:"0 auto",backgroundPosition:"0 0"},e=c.indexOf("#xywh");if(e>0)try{var f=/(.+)\#xywh=(\d+),(\d+),(\d+),(\d+)/.exec(c);c=f[1],d.backgroundPosition=-1*f[2]+"px "+-1*f[3]+"px",d.width=f[4],d.height=f[5]}catch(g){return}else this.individualImage||(this.individualImage=new Image,this.individualImage.onload=a.bind(function(){this.individualImage.onload=null,this.timeTip.image({width:this.individualImage.width,height:this.individualImage.height})},this),this.individualImage.src=c);return d.backgroundImage='url("'+c+'")',d},showThumbnail:function(a){this.thumbnails.length<1||this.timeTip.image(this.loadThumbnail(a))},resetThumbnails:function(){this.timeTip.image({backgroundImage:"",width:0,height:0}),this.thumbnails=[]}};return e}.apply(b,d),!(void 0!==e&&(a.exports=e))},function(a,b,c){var d,e;d=[c(139),c(48),c(45),c(127),c(143)],e=function(a,b,c,d,e){var f=a.extend({setup:function(a,f,g){this.iconUI||(this.iconUI=new d(this.el,{useHover:!0,directSelect:!0}),this.toggleValueListener=this.toggleValue.bind(this),this.toggleOpenStateListener=this.toggleOpenState.bind(this),this.openTooltipListener=this.openTooltip.bind(this),this.closeTooltipListener=this.closeTooltip.bind(this),
this.selectListener=this.select.bind(this)),this.reset(),a=c.isArray(a)?a:[],b.toggleClass(this.el,"jw-hidden",a.length<2);var h=a.length>2||2===a.length&&g&&g.toggle===!1,i=!h&&2===a.length;if(b.toggleClass(this.el,"jw-toggle",i),b.toggleClass(this.el,"jw-button-color",!i),this.isActive=h||i,h){b.removeClass(this.el,"jw-off"),this.iconUI.on("tap",this.toggleOpenStateListener).on("over",this.openTooltipListener).on("out",this.closeTooltipListener);var j=e(a),k=b.createElement(j);this.addContent(k),this.contentUI=new d(this.content).on("click tap",this.selectListener)}else i&&this.iconUI.on("click tap",this.toggleValueListener);this.selectItem(f)},toggleValue:function(){this.trigger("toggleValue")},select:function(a){if(a.target.parentElement===this.content){var d=b.classList(a.target),e=c.find(d,function(a){return 0===a.indexOf("jw-item")});e&&(this.trigger("select",parseInt(e.split("-")[2])),this.closeTooltipListener())}},selectItem:function(a){if(this.content)for(var c=0;c<this.content.children.length;c++)b.toggleClass(this.content.children[c],"jw-active-option",a===c);else b.toggleClass(this.el,"jw-off",0===a)},reset:function(){b.addClass(this.el,"jw-off"),this.iconUI.off(),this.contentUI&&this.contentUI.off().destroy(),this.removeContent()}});return f}.apply(b,d),!(void 0!==e&&(a.exports=e))},function(a,b,c){var d=c(120);a.exports=(d["default"]||d).template({1:function(a,b,c,d){var e=this.lambda,f=this.escapeExpression;return"        <li class='jw-text jw-option jw-item-"+f(e(d&&d.index,a))+" jw-reset'>"+f(e(null!=a?a.label:a,a))+"</li>\n"},compiler:[6,">= 2.0.0-beta.1"],main:function(a,b,c,d){var e,f='<ul class="jw-menu jw-background-color jw-reset">\n';return e=b.each.call(a,a,{name:"each",hash:{},fn:this.program(1,d),inverse:this.noop,data:d}),null!=e&&(f+=e),f+"</ul>"},useData:!0})},function(a,b,c){var d,e;d=[c(48),c(45),c(139),c(127),c(145)],e=function(a,b,c,d,e){var f=c.extend({setup:function(c,e){if(this.iconUI||(this.iconUI=new d(this.el,{useHover:!0}),this.toggleOpenStateListener=this.toggleOpenState.bind(this),this.openTooltipListener=this.openTooltip.bind(this),this.closeTooltipListener=this.closeTooltip.bind(this),this.selectListener=this.onSelect.bind(this)),this.reset(),c=b.isArray(c)?c:[],a.toggleClass(this.el,"jw-hidden",c.length<2),c.length>=2){this.iconUI=new d(this.el,{useHover:!0}).on("tap",this.toggleOpenStateListener).on("over",this.openTooltipListener).on("out",this.closeTooltipListener);var f=this.menuTemplate(c,e),g=a.createElement(f);this.addContent(g),this.contentUI=new d(this.content),this.contentUI.on("click tap",this.selectListener)}this.originalList=c},menuTemplate:function(a,c){var d=b.map(a,function(a,b){return{active:b===c,label:b+1+".",title:a.title}});return e(d)},onSelect:function(c){var d=c.target;if("UL"!==d.tagName){"LI"!==d.tagName&&(d=d.parentElement);var e=a.classList(d),f=b.find(e,function(a){return 0===a.indexOf("jw-item")});f&&(this.trigger("select",parseInt(f.split("-")[2])),this.closeTooltip())}},selectItem:function(a){this.setup(this.originalList,a)},reset:function(){this.iconUI.off(),this.contentUI&&this.contentUI.off().destroy(),this.removeContent()}});return f}.apply(b,d),!(void 0!==e&&(a.exports=e))},function(a,b,c){var d=c(120);a.exports=(d["default"]||d).template({1:function(a,b,c,d){var e,f="";return e=b["if"].call(a,null!=a?a.active:a,{name:"if",hash:{},fn:this.program(2,d),inverse:this.program(4,d),data:d}),null!=e&&(f+=e),f},2:function(a,b,c,d){var e=this.lambda,f=this.escapeExpression;return"                <li class='jw-option jw-text jw-active-option jw-item-"+f(e(d&&d.index,a))+' jw-reset\'>\n                    <span class="jw-label jw-reset"><span class="jw-icon jw-icon-play jw-reset"></span></span>\n                    <span class="jw-name jw-reset">'+f(e(null!=a?a.title:a,a))+"</span>\n                </li>\n"},4:function(a,b,c,d){var e=this.lambda,f=this.escapeExpression;return"                <li class='jw-option jw-text jw-item-"+f(e(d&&d.index,a))+' jw-reset\'>\n                    <span class="jw-label jw-reset">'+f(e(null!=a?a.label:a,a))+'</span>\n                    <span class="jw-name jw-reset">'+f(e(null!=a?a.title:a,a))+"</span>\n                </li>\n"},compiler:[6,">= 2.0.0-beta.1"],main:function(a,b,c,d){var e,f='<div class="jw-menu jw-playlist-container jw-background-color jw-reset">\n\n    <div class="jw-tooltip-title jw-reset">\n        <span class="jw-icon jw-icon-inline jw-icon-playlist jw-reset"></span>\n        <span class="jw-text jw-reset">PLAYLIST</span>\n    </div>\n\n    <ul class="jw-playlist jw-reset">\n';return e=b.each.call(a,a,{name:"each",hash:{},fn:this.program(1,d),inverse:this.noop,data:d}),null!=e&&(f+=e),f+"    </ul>\n</div>"},useData:!0})},function(a,b,c){var d,e;d=[c(139),c(136),c(127),c(48)],e=function(a,b,c,d){var e=a.extend({constructor:function(e,f){this._model=e,a.call(this,f),this.volumeSlider=new b("jw-slider-volume jw-volume-tip","vertical"),this.addContent(this.volumeSlider.element()),this.volumeSlider.on("update",function(a){this.trigger("update",a)},this),d.removeClass(this.el,"jw-hidden"),new c(this.el,{useHover:!0,directSelect:!0}).on("click",this.toggleValue,this).on("tap",this.toggleOpenState,this).on("over",this.openTooltip,this).on("out",this.closeTooltip,this),this._model.on("change:volume",this.onVolume,this)},toggleValue:function(){this.trigger("toggleValue")}});return e}.apply(b,d),!(void 0!==e&&(a.exports=e))},function(a,b,c){var d,e;d=[c(139),c(48),c(45),c(127)],e=function(a,b,c,d){var e=a.extend({constructor:function(b){a.call(this,b),this.container.className="jw-overlay-horizontal jw-reset",this.openClass="jw-open-drawer",this.componentType="drawer"},setup:function(a,e){this.iconUI||(this.iconUI=new d(this.el,{useHover:!0,directSelect:!0}),this.toggleOpenStateListener=this.toggleOpenState.bind(this),this.openTooltipListener=this.openTooltip.bind(this),this.closeTooltipListener=this.closeTooltip.bind(this)),this.reset(),a=c.isArray(a)?a:[],this.activeContents=c.filter(a,function(a){return a.isActive}),b.toggleClass(this.el,"jw-hidden",!e||this.activeContents.length<2),e&&this.activeContents.length>1&&(b.removeClass(this.el,"jw-off"),this.iconUI.on("tap",this.toggleOpenStateListener).on("over",this.openTooltipListener).on("out",this.closeTooltipListener),c.each(a,function(a){this.container.appendChild(a.el)},this))},reset:function(){b.addClass(this.el,"jw-off"),this.iconUI.off(),this.contentUI&&this.contentUI.off().destroy(),this.removeContent()}});return e}.apply(b,d),!(void 0!==e&&(a.exports=e))},function(a,b,c){var d,e;d=[c(45),c(48)],e=function(a,b){function c(a,b){b.off("change:mediaType",null,this),b.on("change:mediaType",function(b,c){"audio"===c&&this.setImage(a.get("playlistItem").image)},this)}function d(a,c){var d=a.get("autostart")&&!b.isMobile()||a.get("item")>0;return d?(this.setImage(null),a.off("change:state",null,this),void a.on("change:state",function(a,b){"complete"!==b&&"idle"!==b&&"error"!==b||this.setImage(c.image)},this)):void this.setImage(c.image)}var e=function(a){this.model=a,a.on("change:playlistItem",d,this),a.on("change:mediaModel",c,this)};return a.extend(e.prototype,{setup:function(a){this.el=a;var b=this.model.get("playlistItem");b&&this.setImage(b.image)},setImage:function(c){this.model.off("change:state",null,this);var d="";a.isString(c)&&(d='url("'+c+'")'),b.style(this.el,{backgroundImage:d})},element:function(){return this.el}}),e}.apply(b,d),!(void 0!==e&&(a.exports=e))},function(a,b,c){var d,e;d=[c(150),c(45),c(59)],e=function(a,b,c){var d={free:"f",premium:"r",enterprise:"e",ads:"a",unlimited:"u",trial:"t"},e=function(){};return b.extend(e.prototype,a.prototype,{buildArray:function(){var b=a.prototype.buildArray.apply(this,arguments),e=this.model.get("edition"),f="https://jwplayer.com/learn-more/?m=h&e="+(d[e]||e)+"&v="+c;if(b.items[0].link=f,this.model.get("abouttext")){b.items[0].showLogo=!1,b.items.push(b.items.shift());var g={title:this.model.get("abouttext"),link:this.model.get("aboutlink")||f};b.items.unshift(g)}return b}}),e}.apply(b,d),!(void 0!==e&&(a.exports=e))},function(a,b,c){var d,e;d=[c(48),c(151),c(45),c(127),c(59)],e=function(a,b,c,d,e){var f=function(){};return c.extend(f.prototype,{buildArray:function(){var b=e.split("+"),c=b[0],d={items:[{title:"Powered by JW Player "+c,featured:!0,showLogo:!0,link:"https://jwplayer.com/learn-more/?m=h&e=o&v="+e}]},f=c.indexOf("-")>0,g=b[1];if(f&&g){var h=g.split(".");d.items.push({title:"build: ("+h[0]+"."+h[1]+")",link:"#"})}var i=this.model.get("provider").name;if(i.indexOf("flash")>=0){var j="Flash Version "+a.flashVersion();d.items.push({title:j,link:"http://www.adobe.com/software/flash/about/"})}return d},buildMenu:function(){var c=this.buildArray();return a.createElement(b(c))},updateHtml:function(){this.el.innerHTML=this.buildMenu().innerHTML},rightClick:function(a){return this.lazySetup(),this.mouseOverContext?!1:(this.hideMenu(),this.showMenu(a),!1)},getOffset:function(a){for(var b=a.target,c=a.offsetX||a.layerX,d=a.offsetY||a.layerY;b!==this.playerElement;)c+=b.offsetLeft,d+=b.offsetTop,b=b.parentNode;return{x:c,y:d}},showMenu:function(b){var c=this.getOffset(b);return this.el.style.left=c.x+"px",this.el.style.top=c.y+"px",a.addClass(this.playerElement,"jw-flag-rightclick-open"),a.addClass(this.el,"jw-open"),!1},hideMenu:function(){this.mouseOverContext||(a.removeClass(this.playerElement,"jw-flag-rightclick-open"),a.removeClass(this.el,"jw-open"))},lazySetup:function(){this.el||(this.el=this.buildMenu(),this.layer.appendChild(this.el),this.hideMenuHandler=this.hideMenu.bind(this),this.addOffListener(this.playerElement),this.addOffListener(document),this.model.on("change:provider",this.updateHtml,this),this.elementUI=new d(this.el,{useHover:!0}).on("over",function(){this.mouseOverContext=!0},this).on("out",function(){this.mouseOverContext=!1},this))},setup:function(a,b,c){this.playerElement=b,this.model=a,this.mouseOverContext=!1,this.layer=c,b.oncontextmenu=this.rightClick.bind(this)},addOffListener:function(a){a.addEventListener("mousedown",this.hideMenuHandler),a.addEventListener("touchstart",this.hideMenuHandler),a.addEventListener("pointerdown",this.hideMenuHandler)},removeOffListener:function(a){a.removeEventListener("mousedown",this.hideMenuHandler),a.removeEventListener("touchstart",this.hideMenuHandler),a.removeEventListener("pointerdown",this.hideMenuHandler)},destroy:function(){this.el&&(this.hideMenu(),this.elementUI.off(),this.removeOffListener(this.playerElement),this.removeOffListener(document),this.hideMenuHandler=null,this.el=null),this.playerElement&&(this.playerElement.oncontextmenu=null,this.playerElement=null),this.model&&(this.model.off("change:provider",this.updateHtml),this.model=null)}}),f}.apply(b,d),!(void 0!==e&&(a.exports=e))},function(a,b,c){var d=c(120);a.exports=(d["default"]||d).template({1:function(a,b,c,d){var e,f,g="function",h=b.helperMissing,i=this.escapeExpression,j='        <li class="jw-reset';return e=b["if"].call(a,null!=a?a.featured:a,{name:"if",hash:{},fn:this.program(2,d),inverse:this.noop,data:d}),null!=e&&(j+=e),j+='">\n            <a href="'+i((f=null!=(f=b.link||(null!=a?a.link:a))?f:h,typeof f===g?f.call(a,{name:"link",hash:{},data:d}):f))+'" class="jw-reset" target="_top">\n',e=b["if"].call(a,null!=a?a.showLogo:a,{name:"if",hash:{},fn:this.program(4,d),inverse:this.noop,data:d}),null!=e&&(j+=e),j+"                "+i((f=null!=(f=b.title||(null!=a?a.title:a))?f:h,typeof f===g?f.call(a,{name:"title",hash:{},data:d}):f))+"\n            </a>\n        </li>\n"},2:function(a,b,c,d){return" jw-featured"},4:function(a,b,c,d){return'                <span class="jw-icon jw-rightclick-logo jw-reset"></span>\n'},compiler:[6,">= 2.0.0-beta.1"],main:function(a,b,c,d){var e,f='<div class="jw-rightclick jw-reset">\n    <ul class="jw-reset">\n';return e=b.each.call(a,null!=a?a.items:a,{name:"each",hash:{},fn:this.program(1,d),inverse:this.noop,data:d}),null!=e&&(f+=e),f+"    </ul>\n</div>"},useData:!0})},function(a,b,c){var d,e;d=[c(45),c(48)],e=function(a,b){var c=function(a){this.model=a,this.model.on("change:playlistItem",this.playlistItem,this)};return a.extend(c.prototype,{hide:function(){this.el.style.display="none"},show:function(){this.el.style.display=""},setup:function(a){this.el=a;var b=this.el.getElementsByTagName("div");this.title=b[0],this.description=b[1],this.model.get("playlistItem")&&this.playlistItem(this.model,this.model.get("playlistItem")),this.model.on("change:logoWidth",this.update,this),this.model.on("change:dock",this.update,this)},update:function(a){var c={paddingLeft:0,paddingRight:0},d=a.get("controls"),e=a.get("dock"),f=a.get("logo");if(f){var g=1*(""+f.margin).replace("px",""),h=a.get("logoWidth")+(isNaN(g)?0:g);"top-left"===f.position?c.paddingLeft=h:"top-right"===f.position&&(c.paddingRight=h)}if(d&&e&&e.length){var i=56*e.length;c.paddingRight=Math.max(c.paddingRight,i)}b.style(this.el,c)},playlistItem:function(a,b){if(a.get("displaytitle")||a.get("displaydescription")){var c="",d="";b.title&&a.get("displaytitle")&&(c=b.title),b.description&&a.get("displaydescription")&&(d=b.description),this.updateText(c,d)}else this.hide()},updateText:function(a,b){this.title.innerHTML=a,this.description.innerHTML=b,this.title.firstChild||this.description.firstChild?this.show():this.hide()},element:function(){return this.el}}),c}.apply(b,d),!(void 0!==e&&(a.exports=e))},function(a,b,c){var d=c(120);a.exports=(d["default"]||d).template({compiler:[6,">= 2.0.0-beta.1"],main:function(a,b,c,d){var e,f="function",g=b.helperMissing,h=this.escapeExpression;return'<div id="'+h((e=null!=(e=b.id||(null!=a?a.id:a))?e:g,typeof e===f?e.call(a,{name:"id",hash:{},data:d}):e))+'" class="jwplayer jw-reset" tabindex="0">\n    <div class="jw-aspect jw-reset"></div>\n    <div class="jw-media jw-reset"></div>\n    <div class="jw-preview jw-reset"></div>\n    <div class="jw-title jw-reset">\n        <div class="jw-title-primary jw-reset"></div>\n        <div class="jw-title-secondary jw-reset"></div>\n    </div>\n    <div class="jw-overlays jw-reset"></div>\n    <div class="jw-controls jw-reset"></div>\n</div>'},useData:!0})},function(a,b,c){var d,e;d=[c(48),c(46),c(127),c(47),c(45),c(155)],e=function(a,b,c,d,e,f){var g=function(a){this.model=a,this.setup()};return e.extend(g.prototype,d,{setup:function(){this.destroy(),this.skipMessage=this.model.get("skipText"),this.skipMessageCountdown=this.model.get("skipMessage"),this.setWaitTime(this.model.get("skipOffset"));var b=f();this.el=a.createElement(b),this.skiptext=this.el.getElementsByClassName("jw-skiptext")[0],this.skipAdOnce=e.once(this.skipAd.bind(this)),new c(this.el).on("click tap",e.bind(function(){this.skippable&&this.skipAdOnce()},this)),this.model.on("change:duration",this.onChangeDuration,this),this.model.on("change:position",this.onChangePosition,this),this.onChangeDuration(this.model,this.model.get("duration")),this.onChangePosition(this.model,this.model.get("position"))},updateMessage:function(a){this.skiptext.innerHTML=a},updateCountdown:function(a){this.updateMessage(this.skipMessageCountdown.replace(/xx/gi,Math.ceil(this.waitTime-a)))},onChangeDuration:function(b,c){if(c){if(this.waitPercentage){if(!c)return;this.itemDuration=c,this.setWaitTime(this.waitPercentage),delete this.waitPercentage}a.removeClass(this.el,"jw-hidden")}},onChangePosition:function(b,c){this.waitTime-c>0?this.updateCountdown(c):(this.updateMessage(this.skipMessage),this.skippable=!0,a.addClass(this.el,"jw-skippable"))},element:function(){return this.el},setWaitTime:function(b){if(e.isString(b)&&"%"===b.slice(-1)){var c=parseFloat(b);return void(this.itemDuration&&!isNaN(c)?this.waitTime=this.itemDuration*c/100:this.waitPercentage=b)}e.isNumber(b)?this.waitTime=b:"string"===a.typeOf(b)?this.waitTime=a.seconds(b):isNaN(Number(b))?this.waitTime=0:this.waitTime=Number(b)},skipAd:function(){this.trigger(b.JWPLAYER_AD_SKIPPED)},destroy:function(){this.el&&(this.el.removeEventListener("click",this.skipAdOnce),this.el.parentElement&&this.el.parentElement.removeChild(this.el)),delete this.skippable,delete this.itemDuration,delete this.waitPercentage}}),g}.apply(b,d),!(void 0!==e&&(a.exports=e))},function(a,b,c){var d=c(120);a.exports=(d["default"]||d).template({compiler:[6,">= 2.0.0-beta.1"],main:function(a,b,c,d){return'<div class="jw-skip jw-background-color jw-hidden jw-reset">\n    <span class="jw-text jw-skiptext jw-reset"></span>\n    <span class="jw-icon-inline jw-skip-icon jw-reset"></span>\n</div>'},useData:!0})},function(a,b,c){var d,e;d=[c(157)],e=function(a){function b(b,c,d,e){return a({id:b,skin:c,title:d,body:e})}return b}.apply(b,d),!(void 0!==e&&(a.exports=e))},function(a,b,c){var d=c(120);a.exports=(d["default"]||d).template({compiler:[6,">= 2.0.0-beta.1"],main:function(a,b,c,d){var e,f="function",g=b.helperMissing,h=this.escapeExpression;return'<div id="'+h((e=null!=(e=b.id||(null!=a?a.id:a))?e:g,typeof e===f?e.call(a,{name:"id",hash:{},data:d}):e))+'"class="jw-skin-'+h((e=null!=(e=b.skin||(null!=a?a.skin:a))?e:g,typeof e===f?e.call(a,{name:"skin",hash:{},data:d}):e))+' jw-error jw-reset">\n    <div class="jw-title jw-reset">\n        <div class="jw-title-primary jw-reset">'+h((e=null!=(e=b.title||(null!=a?a.title:a))?e:g,typeof e===f?e.call(a,{name:"title",hash:{},data:d}):e))+'</div>\n        <div class="jw-title-secondary jw-reset">'+h((e=null!=(e=b.body||(null!=a?a.body:a))?e:g,typeof e===f?e.call(a,{name:"body",hash:{},data:d}):e))+'</div>\n    </div>\n\n    <div class="jw-icon-container jw-reset">\n        <div class="jw-display-icon-container jw-background-color jw-reset">\n            <div class="jw-icon jw-icon-display jw-reset"></div>\n        </div>\n    </div>\n</div>\n'},useData:!0})},function(a,b,c){var d,e;d=[],e=function(){function a(){var a=document.createElement("div");return a.className=c,a.innerHTML="&nbsp;",a.style.width="1px",a.style.height="1px",a.style.position="absolute",a.style.background="transparent",a}function b(){function b(){var a=this,b=a._view.element();b.appendChild(f),d()&&a.trigger("adBlock")}function d(){return e?!0:(""!==f.innerHTML&&f.className===c&&null!==f.offsetParent&&0!==f.clientHeight||(e=!0),e)}var e=!1,f=a();return{onReady:b,checkAdBlock:d}}var c="afs_ads";return{setup:b}}.apply(b,d),!(void 0!==e&&(a.exports=e))},,,,function(a,b,c){var d,e;d=[],e=function(){var a=window.chrome,b={};return b.NS="urn:x-cast:com.longtailvideo.jwplayer",b.debug=!1,b.availability=null,b.available=function(c){c=c||b.availability;var d="available";return a&&a.cast&&a.cast.ReceiverAvailability&&(d=a.cast.ReceiverAvailability.AVAILABLE),c===d},b.log=function(){if(b.debug){var a=Array.prototype.slice.call(arguments,0);console.log.apply(console,a)}},b.error=function(){var a=Array.prototype.slice.call(arguments,0);console.error.apply(console,a)},b}.apply(b,d),!(void 0!==e&&(a.exports=e))},,,function(a,b,c){var d,e;d=[c(98),c(45)],e=function(a,b){return function(c,d){var e=["seek","skipAd","stop","playlistNext","playlistPrev","playlistItem","resize","addButton","removeButton","registerPlugin","attachMedia"];b.each(e,function(a){c[a]=function(){return d[a].apply(d,arguments),c}}),c.registerPlugin=a.registerPlugin}}.apply(b,d),!(void 0!==e&&(a.exports=e))},function(a,b,c){var d,e;d=[c(45)],e=function(a){return function(b,c){var d=["buffer","controls","position","duration","fullscreen","volume","mute","item","stretching","playlist"];a.each(d,function(a){var d=a.slice(0,1).toUpperCase()+a.slice(1);b["get"+d]=function(){return c._model.get(a)}});var e=["getAudioTracks","getCaptionsList","getWidth","getHeight","getCurrentAudioTrack","setCurrentAudioTrack","getCurrentCaptions","setCurrentCaptions","getCurrentQuality","setCurrentQuality","getQualityLevels","getVisualQuality","getConfig","getState","getSafeRegion","isBeforeComplete","isBeforePlay","getProvider","detachMedia"],f=["setControls","setFullscreen","setVolume","setMute","setCues"];a.each(e,function(a){b[a]=function(){return c[a]?c[a].apply(c,arguments):null}}),a.each(f,function(a){b[a]=function(){return c[a].apply(c,arguments),b}})}}.apply(b,d),!(void 0!==e&&(a.exports=e))},function(a,b,c){var d,e;d=[c(45),c(46)],e=function(a,b){return function(c){var d={onBufferChange:b.JWPLAYER_MEDIA_BUFFER,onBufferFull:b.JWPLAYER_MEDIA_BUFFER_FULL,onError:b.JWPLAYER_ERROR,onSetupError:b.JWPLAYER_SETUP_ERROR,onFullscreen:b.JWPLAYER_FULLSCREEN,onMeta:b.JWPLAYER_MEDIA_META,onMute:b.JWPLAYER_MEDIA_MUTE,onPlaylist:b.JWPLAYER_PLAYLIST_LOADED,onPlaylistItem:b.JWPLAYER_PLAYLIST_ITEM,onPlaylistComplete:b.JWPLAYER_PLAYLIST_COMPLETE,onReady:b.JWPLAYER_READY,onResize:b.JWPLAYER_RESIZE,onComplete:b.JWPLAYER_MEDIA_COMPLETE,onSeek:b.JWPLAYER_MEDIA_SEEK,onTime:b.JWPLAYER_MEDIA_TIME,onVolume:b.JWPLAYER_MEDIA_VOLUME,onBeforePlay:b.JWPLAYER_MEDIA_BEFOREPLAY,onBeforeComplete:b.JWPLAYER_MEDIA_BEFORECOMPLETE,onDisplayClick:b.JWPLAYER_DISPLAY_CLICK,onControls:b.JWPLAYER_CONTROLS,onQualityLevels:b.JWPLAYER_MEDIA_LEVELS,onQualityChange:b.JWPLAYER_MEDIA_LEVEL_CHANGED,onCaptionsList:b.JWPLAYER_CAPTIONS_LIST,onCaptionsChange:b.JWPLAYER_CAPTIONS_CHANGED,onAdError:b.JWPLAYER_AD_ERROR,onAdClick:b.JWPLAYER_AD_CLICK,onAdImpression:b.JWPLAYER_AD_IMPRESSION,onAdTime:b.JWPLAYER_AD_TIME,onAdComplete:b.JWPLAYER_AD_COMPLETE,onAdCompanions:b.JWPLAYER_AD_COMPANIONS,onAdSkipped:b.JWPLAYER_AD_SKIPPED,onAdPlay:b.JWPLAYER_AD_PLAY,onAdPause:b.JWPLAYER_AD_PAUSE,onAdMeta:b.JWPLAYER_AD_META,onCast:b.JWPLAYER_CAST_SESSION,onAudioTrackChange:b.JWPLAYER_AUDIO_TRACK_CHANGED,onAudioTracks:b.JWPLAYER_AUDIO_TRACKS},e={onBuffer:"buffer",onPause:"pause",onPlay:"play",onIdle:"idle"};a.each(e,function(b,d){c[d]=a.partial(c.on,b,a)}),a.each(d,function(b,d){c[d]=a.partial(c.on,b,a)})}}.apply(b,d),!(void 0!==e&&(a.exports=e))},function(a,b,c){var d=c(169);"string"==typeof d&&(d=[[a.id,d,""]]);c(173)(d,{});d.locals&&(a.exports=d.locals)},function(a,b,c){b=a.exports=c(170)(),b.push([a.id,".jw-reset{color:inherit;background-color:transparent;padding:0;margin:0;float:none;font-family:Arial,Helvetica,sans-serif;font-size:1em;line-height:1em;list-style:none;text-align:left;text-transform:none;vertical-align:baseline;border:0;direction:ltr;font-variant:inherit;font-stretch:inherit;-webkit-tap-highlight-color:rgba(255,255,255,0)}@font-face{font-family:'jw-icons';src:url("+c(171)+") format('woff'),url("+c(172)+') format(\'truetype\');font-weight:normal;font-style:normal}.jw-icon-inline,.jw-icon-tooltip,.jw-icon-display,.jw-controlbar .jw-menu .jw-option:before{font-family:\'jw-icons\';-webkit-font-smoothing:antialiased;font-style:normal;font-weight:normal;text-transform:none;background-color:transparent;font-variant:normal;-webkit-font-feature-settings:"liga";-ms-font-feature-settings:"liga" 1;-o-font-feature-settings:"liga";font-feature-settings:"liga";-moz-osx-font-smoothing:grayscale}.jw-icon-audio-tracks:before{content:"\\E600"}.jw-icon-buffer:before{content:"\\E601"}.jw-icon-cast:before{content:"\\E603"}.jw-icon-cast.jw-off:before{content:"\\E602"}.jw-icon-cc:before{content:"\\E605"}.jw-icon-cue:before{content:"\\E606"}.jw-icon-menu-bullet:before{content:"\\E606"}.jw-icon-error:before{content:"\\E607"}.jw-icon-fullscreen:before{content:"\\E608"}.jw-icon-fullscreen.jw-off:before{content:"\\E613"}.jw-icon-hd:before{content:"\\E60A"}.jw-watermark:before,.jw-rightclick-logo:before{content:"\\E60B"}.jw-icon-next:before{content:"\\E60C"}.jw-icon-pause:before{content:"\\E60D"}.jw-icon-play:before{content:"\\E60E"}.jw-icon-prev:before{content:"\\E60F"}.jw-icon-replay:before{content:"\\E610"}.jw-icon-volume:before{content:"\\E612"}.jw-icon-volume.jw-off:before{content:"\\E611"}.jw-icon-more:before{content:"\\E614"}.jw-icon-close:before{content:"\\E615"}.jw-icon-playlist:before{content:"\\E616"}.jwplayer{width:100%;font-size:16px;position:relative;display:block;min-height:0;overflow:hidden;box-sizing:border-box;font-family:Arial,Helvetica,sans-serif;background-color:#000;-webkit-touch-callout:none;-webkit-user-select:none;-khtml-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.jwplayer *{box-sizing:inherit}.jwplayer.jw-flag-aspect-mode{height:auto !important}.jwplayer.jw-flag-aspect-mode .jw-aspect{display:block}.jwplayer .jw-aspect{display:none}.jwplayer.jw-no-focus:focus,.jwplayer .jw-swf{outline:none}.jwplayer.jw-ie:focus{outline:#585858 dotted 1px}.jwplayer:hover .jw-display-icon-container{background-color:#333;background:#333;background-size:#333}.jw-media,.jw-preview,.jw-overlays,.jw-controls{position:absolute;width:100%;height:100%;top:0;left:0;bottom:0;right:0}.jw-media{overflow:hidden;cursor:pointer}.jw-overlays{cursor:auto}.jw-media.jw-media-show{visibility:visible;opacity:1}.jw-controls.jw-controls-disabled{display:none}.jw-controls .jw-controls-right{position:absolute;top:0;right:0;left:0;bottom:2em}.jw-text{height:1em;font-family:Arial,Helvetica,sans-serif;font-size:.75em;font-style:normal;font-weight:normal;color:white;text-align:center;font-variant:normal;font-stretch:normal}.jw-plugin{position:absolute;bottom:2.5em}.jw-plugin .jw-banner{max-width:100%;opacity:0;cursor:pointer;position:absolute;margin:auto auto 0 auto;left:0;right:0;bottom:0;display:block}.jw-cast-screen{width:100%;height:100%}.jw-instream{position:absolute;top:0;right:0;bottom:0;left:0;display:none}.jw-icon-playback:before{content:"\\E60E"}.jw-preview,.jw-captions,.jw-title,.jw-overlays,.jw-controls{pointer-events:none}.jw-overlays>div,.jw-media,.jw-controlbar,.jw-dock,.jw-logo,.jw-skip,.jw-display-icon-container{pointer-events:all}.jwplayer video{position:absolute;top:0;right:0;bottom:0;left:0;width:100%;height:100%;margin:auto;background:transparent}.jwplayer video::-webkit-media-controls-start-playback-button{display:none}.jwplayer video::-webkit-media-text-track-display{-webkit-transform:translateY(-1.5em);transform:translateY(-1.5em)}.jwplayer.jw-flag-user-inactive.jw-state-playing video::-webkit-media-text-track-display{-webkit-transform:translateY(0);transform:translateY(0)}.jwplayer.jw-stretch-uniform video{-o-object-fit:contain;object-fit:contain}.jwplayer.jw-stretch-none video{-o-object-fit:none;object-fit:none}.jwplayer.jw-stretch-fill video{-o-object-fit:cover;object-fit:cover}.jwplayer.jw-stretch-exactfit video{-o-object-fit:fill;object-fit:fill}.jw-click{position:absolute;width:100%;height:100%}.jw-preview{position:absolute;display:none;opacity:1;visibility:visible;width:100%;height:100%;background:#000 no-repeat 50% 50%}.jwplayer .jw-preview,.jw-error .jw-preview,.jw-stretch-uniform .jw-preview{background-size:contain}.jw-stretch-none .jw-preview{background-size:auto auto}.jw-stretch-fill .jw-preview{background-size:cover}.jw-stretch-exactfit .jw-preview{background-size:100% 100%}.jw-display-icon-container{position:relative;top:50%;display:table;height:3.5em;width:3.5em;margin:-1.75em auto 0;cursor:pointer}.jw-display-icon-container .jw-icon-display{position:relative;display:table-cell;text-align:center;vertical-align:middle !important;background-position:50% 50%;background-repeat:no-repeat;font-size:2em}.jw-flag-audio-player .jw-display-icon-container,.jw-flag-dragging .jw-display-icon-container{display:none}.jw-icon{font-family:\'jw-icons\';-webkit-font-smoothing:antialiased;font-style:normal;font-weight:normal;text-transform:none;background-color:transparent;font-variant:normal;-webkit-font-feature-settings:"liga";-ms-font-feature-settings:"liga" 1;-o-font-feature-settings:"liga";font-feature-settings:"liga";-moz-osx-font-smoothing:grayscale}.jw-controlbar{display:table;position:absolute;right:0;left:0;bottom:0;height:2em;padding:0 .25em}.jw-controlbar .jw-hidden{display:none}.jw-controlbar.jw-drawer-expanded .jw-controlbar-left-group,.jw-controlbar.jw-drawer-expanded .jw-controlbar-center-group{opacity:0}.jw-background-color{background-color:#414040}.jw-group{display:table-cell}.jw-controlbar-center-group{width:100%;padding:0 .25em}.jw-controlbar-center-group .jw-slider-time,.jw-controlbar-center-group .jw-text-alt{padding:0}.jw-controlbar-center-group .jw-text-alt{display:none}.jw-controlbar-left-group,.jw-controlbar-right-group{white-space:nowrap}.jw-knob:hover,.jw-icon-inline:hover,.jw-icon-tooltip:hover,.jw-icon-display:hover,.jw-option:before:hover{color:#eee}.jw-icon-inline,.jw-icon-tooltip,.jw-slider-horizontal,.jw-text-elapsed,.jw-text-duration{display:inline-block;height:2em;position:relative;line-height:2em;vertical-align:middle;cursor:pointer}.jw-icon-inline,.jw-icon-tooltip{min-width:1.25em;text-align:center}.jw-icon-playback{min-width:2.25em}.jw-icon-volume{min-width:1.75em;text-align:left}.jw-time-tip{line-height:1em;pointer-events:none}.jw-icon-inline:after,.jw-icon-tooltip:after{width:100%;height:100%;font-size:1em}.jw-icon-cast{display:none}.jw-slider-volume.jw-slider-horizontal,.jw-icon-inline.jw-icon-volume{display:none}.jw-dock{margin:.75em;display:block;opacity:1;clear:right}.jw-dock:after{content:\'\';clear:both;display:block}.jw-dock-button{cursor:pointer;float:right;position:relative;width:2.5em;height:2.5em;margin:.5em}.jw-dock-button .jw-arrow{display:none;position:absolute;bottom:-0.2em;width:.5em;height:.2em;left:50%;margin-left:-0.25em}.jw-dock-button .jw-overlay{display:none;position:absolute;top:2.5em;right:0;margin-top:.25em;padding:.5em;white-space:nowrap}.jw-dock-button:hover .jw-overlay,.jw-dock-button:hover .jw-arrow{display:block}.jw-dock-image{width:100%;height:100%;background-position:50% 50%;background-repeat:no-repeat;opacity:.75}.jw-title{display:none;position:absolute;top:0;width:100%;font-size:.875em;height:8em;background:-webkit-linear-gradient(top, #000 0, #000 18%, rgba(0,0,0,0) 100%);background:linear-gradient(to bottom, #000 0, #000 18%, rgba(0,0,0,0) 100%)}.jw-title-primary,.jw-title-secondary{padding:.75em 1.5em;min-height:2.5em;width:100%;color:white;white-space:nowrap;text-overflow:ellipsis;overflow-x:hidden}.jw-title-primary{font-weight:bold}.jw-title-secondary{margin-top:-0.5em}.jw-slider-container{display:inline-block;height:1em;position:relative;touch-action:none}.jw-rail,.jw-buffer,.jw-progress{position:absolute;cursor:pointer}.jw-progress{background-color:#fff}.jw-rail{background-color:#aaa}.jw-buffer{background-color:#202020}.jw-cue,.jw-knob{position:absolute;cursor:pointer}.jw-cue{background-color:#fff;width:.1em;height:.4em}.jw-knob{background-color:#aaa;width:.4em;height:.4em}.jw-slider-horizontal{width:4em;height:1em}.jw-slider-horizontal.jw-slider-volume{margin-right:5px}.jw-slider-horizontal .jw-rail,.jw-slider-horizontal .jw-buffer,.jw-slider-horizontal .jw-progress{width:100%;height:.4em}.jw-slider-horizontal .jw-progress,.jw-slider-horizontal .jw-buffer{width:0}.jw-slider-horizontal .jw-rail,.jw-slider-horizontal .jw-progress,.jw-slider-horizontal .jw-slider-container{width:100%}.jw-slider-horizontal .jw-knob{left:0;margin-left:-0.325em}.jw-slider-vertical{width:.75em;height:4em;bottom:0;position:absolute;padding:1em}.jw-slider-vertical .jw-rail,.jw-slider-vertical .jw-buffer,.jw-slider-vertical .jw-progress{bottom:0;height:100%}.jw-slider-vertical .jw-progress,.jw-slider-vertical .jw-buffer{height:0}.jw-slider-vertical .jw-slider-container,.jw-slider-vertical .jw-rail,.jw-slider-vertical .jw-progress{bottom:0;width:.75em;height:100%;left:0;right:0;margin:0 auto}.jw-slider-vertical .jw-slider-container{height:4em;position:relative}.jw-slider-vertical .jw-knob{bottom:0;left:0;right:0;margin:0 auto}.jw-slider-time{right:0;left:0;width:100%}.jw-tooltip-time{position:absolute}.jw-slider-volume .jw-buffer{display:none}.jw-captions{position:absolute;display:none;margin:0 auto;width:100%;left:0;bottom:3em;right:0;max-width:90%;text-align:center}.jw-captions.jw-captions-enabled{display:block}.jw-captions-window{display:none;padding:.25em;border-radius:.25em}.jw-captions-window.jw-captions-window-active{display:inline-block}.jw-captions-text{display:inline-block;color:white;background-color:black;word-wrap:break-word;white-space:pre-line;font-style:normal;font-weight:normal;text-align:center;text-decoration:none;line-height:1.3em;padding:.1em .8em}.jw-rightclick{display:none;position:absolute;white-space:nowrap}.jw-rightclick.jw-open{display:block}.jw-rightclick ul{list-style:none;font-weight:bold;border-radius:.15em;margin:0;border:1px solid #444;padding:0}.jw-rightclick .jw-rightclick-logo{font-size:2em;color:#ff0147;vertical-align:middle;padding-right:.3em;margin-right:.3em;border-right:1px solid #444}.jw-rightclick li{background-color:#000;border-bottom:1px solid #444;margin:0}.jw-rightclick a{color:#fff;text-decoration:none;padding:1em;display:block;font-size:.6875em}.jw-rightclick li:last-child{border-bottom:none}.jw-rightclick li:hover{background-color:#1a1a1a;cursor:pointer}.jw-rightclick .jw-featured{background-color:#252525;vertical-align:middle}.jw-rightclick .jw-featured a{color:#777}.jw-logo{position:absolute;margin:.75em;cursor:pointer;pointer-events:all;background-repeat:no-repeat;background-size:contain;top:auto;right:auto;left:auto;bottom:auto}.jw-logo .jw-flag-audio-player{display:none}.jw-logo-top-right{top:0;right:0}.jw-logo-top-left{top:0;left:0}.jw-logo-bottom-left{bottom:0;left:0}.jw-logo-bottom-right{bottom:0;right:0}.jw-watermark{position:absolute;top:50%;left:0;right:0;bottom:0;text-align:center;font-size:14em;color:#eee;opacity:.33;pointer-events:none}.jw-icon-tooltip.jw-open .jw-overlay{opacity:1;visibility:visible}.jw-icon-tooltip.jw-hidden{display:none}.jw-overlay-horizontal{display:none}.jw-icon-tooltip.jw-open-drawer:before{display:none}.jw-icon-tooltip.jw-open-drawer .jw-overlay-horizontal{opacity:1;display:inline-block;vertical-align:top}.jw-overlay:before{position:absolute;top:0;bottom:0;left:-50%;width:100%;background-color:rgba(0,0,0,0);content:" "}.jw-slider-time .jw-overlay:before{height:1em;top:auto}.jw-time-tip,.jw-volume-tip,.jw-menu{position:relative;left:-50%;border:solid 1px #000;margin:0}.jw-volume-tip{width:100%;height:100%;display:block}.jw-time-tip{text-align:center;font-family:inherit;color:#aaa;bottom:1em;border:solid 4px #000}.jw-time-tip .jw-text{line-height:1em}.jw-controlbar .jw-overlay{margin:0;position:absolute;bottom:2em;left:50%;opacity:0;visibility:hidden}.jw-controlbar .jw-overlay .jw-contents{position:relative}.jw-controlbar .jw-option{position:relative;white-space:nowrap;cursor:pointer;list-style:none;height:1.5em;font-family:inherit;line-height:1.5em;color:#aaa;padding:0 .5em;font-size:.8em}.jw-controlbar .jw-option:hover,.jw-controlbar .jw-option:before:hover{color:#eee}.jw-controlbar .jw-option:before{padding-right:.125em}.jw-playlist-container ::-webkit-scrollbar-track{background-color:#333;border-radius:10px}.jw-playlist-container ::-webkit-scrollbar{width:5px;border:10px solid black;border-bottom:0;border-top:0}.jw-playlist-container ::-webkit-scrollbar-thumb{background-color:white;border-radius:5px}.jw-tooltip-title{border-bottom:1px solid #444;text-align:left;padding-left:.7em}.jw-playlist{max-height:11em;min-height:4.5em;overflow-x:hidden;overflow-y:scroll;width:calc(100% - 4px)}.jw-playlist .jw-option{height:3em;margin-right:5px;color:white;padding-left:1em;font-size:.8em}.jw-playlist .jw-label,.jw-playlist .jw-name{display:inline-block;line-height:3em;text-align:left;overflow:hidden;white-space:nowrap}.jw-playlist .jw-label{width:1em}.jw-playlist .jw-name{width:11em}.jw-skip{cursor:default;position:absolute;float:right;display:inline-block;right:.75em;bottom:3em}.jw-skip.jw-skippable{cursor:pointer}.jw-skip.jw-hidden{visibility:hidden}.jw-skip .jw-skip-icon{display:none;margin-left:-0.75em}.jw-skip .jw-skip-icon:before{content:"\\E60C"}.jw-skip .jw-text,.jw-skip .jw-skip-icon{color:#aaa;vertical-align:middle;line-height:1.5em;font-size:.7em}.jw-skip.jw-skippable:hover{cursor:pointer}.jw-skip.jw-skippable:hover .jw-text,.jw-skip.jw-skippable:hover .jw-skip-icon{color:#eee}.jw-skip.jw-skippable .jw-skip-icon{display:inline;margin:0}.jwplayer.jw-state-playing.jw-flag-casting .jw-display-icon-container,.jwplayer.jw-state-paused.jw-flag-casting .jw-display-icon-container{display:table}.jwplayer.jw-flag-casting .jw-display-icon-container{border-radius:0;border:1px solid white;position:absolute;top:auto;left:.5em;right:.5em;bottom:50%;margin-bottom:-12.5%;height:50%;width:50%;padding:0;background-repeat:no-repeat;background-position:center}.jwplayer.jw-flag-casting .jw-display-icon-container .jw-icon{font-size:3em}.jwplayer.jw-flag-casting.jw-state-complete .jw-preview{display:none}.jw-cast{position:absolute;width:100%;height:100%;background-repeat:no-repeat;background-size:auto;background-position:50% 50%}.jw-cast-label{position:absolute;left:.5em;right:.5em;bottom:75%;margin-bottom:1.5em;text-align:center}.jw-cast-name{color:#ccc}.jw-state-idle .jw-preview{display:block}.jw-state-idle .jw-icon-display:before{content:"\\E60E"}.jw-state-idle .jw-controlbar{display:none}.jw-state-idle .jw-captions{display:none}.jw-state-idle .jw-title{display:block}.jwplayer.jw-state-playing .jw-display-icon-container{display:none}.jwplayer.jw-state-playing .jw-display-icon-container .jw-icon-display:before{content:"\\E60D"}.jwplayer.jw-state-playing .jw-icon-playback:before{content:"\\E60D"}.jwplayer.jw-state-paused .jw-display-icon-container{display:none}.jwplayer.jw-state-paused .jw-display-icon-container .jw-icon-display:before{content:"\\E60E"}.jwplayer.jw-state-paused .jw-icon-playback:before{content:"\\E60E"}.jwplayer.jw-state-buffering .jw-display-icon-container .jw-icon-display{-webkit-animation:spin 2s linear infinite;animation:spin 2s linear infinite}.jwplayer.jw-state-buffering .jw-display-icon-container .jw-icon-display:before{content:"\\E601"}@-webkit-keyframes spin{100%{-webkit-transform:rotate(360deg)}}@keyframes spin{100%{-webkit-transform:rotate(360deg);transform:rotate(360deg)}}.jwplayer.jw-state-buffering .jw-display-icon-container .jw-text{display:none}.jwplayer.jw-state-buffering .jw-icon-playback:before{content:"\\E60D"}.jwplayer.jw-state-complete .jw-preview{display:block}.jwplayer.jw-state-complete .jw-display-icon-container .jw-icon-display:before{content:"\\E610"}.jwplayer.jw-state-complete .jw-display-icon-container .jw-text{display:none}.jwplayer.jw-state-complete .jw-icon-playback:before{content:"\\E60E"}.jwplayer.jw-state-complete .jw-captions{display:none}body .jw-error .jw-title,.jwplayer.jw-state-error .jw-title{display:block}body .jw-error .jw-title .jw-title-primary,.jwplayer.jw-state-error .jw-title .jw-title-primary{white-space:normal}body .jw-error .jw-preview,.jwplayer.jw-state-error .jw-preview{display:block}body .jw-error .jw-controlbar,.jwplayer.jw-state-error .jw-controlbar{display:none}body .jw-error .jw-captions,.jwplayer.jw-state-error .jw-captions{display:none}body .jw-error:hover .jw-display-icon-container,.jwplayer.jw-state-error:hover .jw-display-icon-container{cursor:default;color:#fff;background:#000}body .jw-error .jw-icon-display,.jwplayer.jw-state-error .jw-icon-display{cursor:default;font-family:\'jw-icons\';-webkit-font-smoothing:antialiased;font-style:normal;font-weight:normal;text-transform:none;background-color:transparent;font-variant:normal;-webkit-font-feature-settings:"liga";-ms-font-feature-settings:"liga" 1;-o-font-feature-settings:"liga";font-feature-settings:"liga";-moz-osx-font-smoothing:grayscale}body .jw-error .jw-icon-display:before,.jwplayer.jw-state-error .jw-icon-display:before{content:"\\E607"}body .jw-error .jw-icon-display:hover,.jwplayer.jw-state-error .jw-icon-display:hover{color:#fff}body .jw-error{font-size:16px;background-color:#000;color:#eee;width:100%;height:100%;display:table;opacity:1;position:relative}body .jw-error .jw-icon-container{position:absolute;width:100%;height:100%;top:0;left:0;bottom:0;right:0}.jwplayer.jw-flag-cast-available .jw-controlbar{display:table}.jwplayer.jw-flag-cast-available .jw-icon-cast{display:inline-block}.jwplayer.jw-flag-skin-loading .jw-captions,.jwplayer.jw-flag-skin-loading .jw-controls,.jwplayer.jw-flag-skin-loading .jw-title{display:none}.jwplayer.jw-flag-fullscreen{width:100% !important;height:100% !important;top:0;right:0;bottom:0;left:0;z-index:1000;margin:0;position:fixed}.jwplayer.jw-flag-fullscreen.jw-flag-user-inactive{cursor:none;-webkit-cursor-visibility:auto-hide}.jwplayer.jw-flag-live .jw-controlbar .jw-text-elapsed,.jwplayer.jw-flag-live .jw-controlbar .jw-text-duration,.jwplayer.jw-flag-live .jw-controlbar .jw-slider-time{display:none}.jwplayer.jw-flag-live .jw-controlbar .jw-text-alt{display:inline}.jwplayer.jw-flag-user-inactive.jw-state-playing .jw-controlbar,.jwplayer.jw-flag-user-inactive.jw-state-playing .jw-dock{display:none}.jwplayer.jw-flag-user-inactive.jw-state-playing .jw-logo.jw-hide{display:none}.jwplayer.jw-flag-user-inactive.jw-state-playing .jw-plugin,.jwplayer.jw-flag-user-inactive.jw-state-playing .jw-captions{bottom:.5em}.jwplayer.jw-flag-user-inactive.jw-state-buffering .jw-controlbar{display:none}.jwplayer.jw-flag-media-audio .jw-controlbar{display:table}.jwplayer.jw-flag-media-audio.jw-flag-user-inactive .jw-controlbar{display:table}.jwplayer.jw-flag-media-audio.jw-flag-user-inactive.jw-state-playing .jw-plugin,.jwplayer.jw-flag-media-audio.jw-flag-user-inactive.jw-state-playing .jw-captions{bottom:3em}.jw-flag-media-audio .jw-preview{display:block}.jwplayer.jw-flag-ads .jw-preview,.jwplayer.jw-flag-ads .jw-dock{display:none}.jwplayer.jw-flag-ads .jw-controlbar .jw-icon-inline,.jwplayer.jw-flag-ads .jw-controlbar .jw-icon-tooltip,.jwplayer.jw-flag-ads .jw-controlbar .jw-text,.jwplayer.jw-flag-ads .jw-controlbar .jw-slider-horizontal{display:none}.jwplayer.jw-flag-ads .jw-controlbar .jw-icon-playback,.jwplayer.jw-flag-ads .jw-controlbar .jw-icon-volume,.jwplayer.jw-flag-ads .jw-controlbar .jw-slider-volume,.jwplayer.jw-flag-ads .jw-controlbar .jw-icon-fullscreen{display:inline-block}.jwplayer.jw-flag-ads .jw-controlbar .jw-text-alt{display:inline}.jwplayer.jw-flag-ads .jw-controlbar .jw-slider-volume.jw-slider-horizontal,.jwplayer.jw-flag-ads .jw-controlbar .jw-icon-inline.jw-icon-volume{display:inline-block}.jwplayer.jw-flag-ads .jw-controlbar .jw-icon-tooltip.jw-icon-volume{display:none}.jwplayer.jw-flag-ads .jw-logo,.jwplayer.jw-flag-ads .jw-captions{display:none}.jwplayer.jw-flag-ads-googleima .jw-controlbar{display:table;bottom:0}.jwplayer.jw-flag-ads-googleima.jw-flag-touch .jw-controlbar{font-size:1em}.jwplayer.jw-flag-ads-googleima.jw-flag-touch.jw-state-paused .jw-display-icon-container{display:none}.jwplayer.jw-flag-ads-googleima.jw-skin-seven .jw-controlbar{font-size:.9em}.jwplayer.jw-flag-ads-vpaid .jw-controlbar{display:none}.jwplayer.jw-flag-ads-hide-controls .jw-controls{display:none !important}.jwplayer.jw-flag-ads.jw-flag-touch .jw-controlbar{display:table}.jwplayer.jw-flag-overlay-open .jw-title{display:none}.jwplayer.jw-flag-overlay-open .jw-controls-right .jw-logo{display:none}.jwplayer.jw-flag-overlay-open-sharing .jw-controls,.jwplayer.jw-flag-overlay-open-related .jw-controls,.jwplayer.jw-flag-overlay-open-sharing .jw-title,.jwplayer.jw-flag-overlay-open-related .jw-title{display:none}.jwplayer.jw-flag-rightclick-open{overflow:visible}.jwplayer.jw-flag-rightclick-open .jw-rightclick{z-index:16777215}.jw-flag-controls-disabled .jw-controls{visibility:hidden}.jw-flag-controls-disabled .jw-logo{visibility:visible}.jw-flag-controls-disabled .jw-media{cursor:auto}body .jwplayer.jw-flag-flash-blocked .jw-title{display:block}body .jwplayer.jw-flag-flash-blocked .jw-controls,body .jwplayer.jw-flag-flash-blocked .jw-overlays,body .jwplayer.jw-flag-flash-blocked .jw-preview{display:none}.jw-flag-touch .jw-controlbar,.jw-flag-touch .jw-skip,.jw-flag-touch .jw-plugin{font-size:1.5em}.jw-flag-touch .jw-captions{bottom:4.25em}.jw-flag-touch .jw-icon-tooltip.jw-open-drawer:before{display:inline}.jw-flag-touch .jw-icon-tooltip.jw-open-drawer:before{content:"\\E615"}.jw-flag-touch .jw-display-icon-container{pointer-events:none}.jw-flag-touch.jw-state-paused .jw-display-icon-container{display:table}.jw-flag-touch.jw-state-paused.jw-flag-dragging .jw-display-icon-container{display:none}.jw-flag-compact-player .jw-icon-playlist,.jw-flag-compact-player .jw-text-elapsed,.jw-flag-compact-player .jw-text-duration{display:none}.jwplayer.jw-flag-audio-player{background-color:transparent}.jwplayer.jw-flag-audio-player .jw-media{visibility:hidden}.jwplayer.jw-flag-audio-player .jw-media object{width:1px;height:1px}.jwplayer.jw-flag-audio-player .jw-preview,.jwplayer.jw-flag-audio-player .jw-display-icon-container{display:none}.jwplayer.jw-flag-audio-player .jw-controlbar{display:table;height:auto;left:0;bottom:0;margin:0;width:100%;min-width:100%;opacity:1}.jwplayer.jw-flag-audio-player .jw-controlbar .jw-icon-fullscreen,.jwplayer.jw-flag-audio-player .jw-controlbar .jw-icon-tooltip{display:none}.jwplayer.jw-flag-audio-player .jw-controlbar .jw-slider-volume.jw-slider-horizontal,.jwplayer.jw-flag-audio-player .jw-controlbar .jw-icon-inline.jw-icon-volume{display:inline-block}.jwplayer.jw-flag-audio-player .jw-controlbar .jw-icon-tooltip.jw-icon-volume{display:none}.jwplayer.jw-flag-audio-player.jw-flag-user-inactive .jw-controlbar{display:table}.jw-skin-seven .jw-background-color{background:#000}.jw-skin-seven .jw-controlbar{border-top:#333 1px solid;height:2.5em}.jw-skin-seven .jw-group{vertical-align:middle}.jw-skin-seven .jw-playlist{background-color:rgba(0,0,0,0.5)}.jw-skin-seven .jw-playlist-container{left:-43%;background-color:rgba(0,0,0,0.5)}.jw-skin-seven .jw-playlist-container .jw-option{border-bottom:1px solid #444}.jw-skin-seven .jw-playlist-container .jw-option:hover,.jw-skin-seven .jw-playlist-container .jw-option.jw-active-option{background-color:black}.jw-skin-seven .jw-playlist-container .jw-option:hover .jw-label{color:#FF0046}.jw-skin-seven .jw-playlist-container .jw-icon-playlist{margin-left:0}.jw-skin-seven .jw-playlist-container .jw-label .jw-icon-play{color:#FF0046}.jw-skin-seven .jw-playlist-container .jw-label .jw-icon-play:before{padding-left:0}.jw-skin-seven .jw-tooltip-title{background-color:#000;color:#fff}.jw-skin-seven .jw-text{color:#fff}.jw-skin-seven .jw-button-color{color:#fff}.jw-skin-seven .jw-button-color:hover{color:#FF0046}.jw-skin-seven .jw-toggle{color:#FF0046}.jw-skin-seven .jw-toggle.jw-off{color:#fff}.jw-skin-seven .jw-controlbar .jw-icon:before,.jw-skin-seven .jw-text-elapsed,.jw-skin-seven .jw-text-duration{padding:0 .7em}.jw-skin-seven .jw-controlbar .jw-icon-prev:before{padding-right:.25em}.jw-skin-seven .jw-controlbar .jw-icon-playlist:before{padding:0 .45em}.jw-skin-seven .jw-controlbar .jw-icon-next:before{padding-left:.25em}.jw-skin-seven .jw-icon-prev,.jw-skin-seven .jw-icon-next{font-size:.7em}.jw-skin-seven .jw-icon-prev:before{border-left:1px solid #666}.jw-skin-seven .jw-icon-next:before{border-right:1px solid #666}.jw-skin-seven .jw-icon-display{color:#fff}.jw-skin-seven .jw-icon-display:before{padding-left:0}.jw-skin-seven .jw-display-icon-container{border-radius:50%;border:1px solid #333}.jw-skin-seven .jw-rail{background-color:#384154;box-shadow:none}.jw-skin-seven .jw-buffer{background-color:#666F82}.jw-skin-seven .jw-progress{background:#FF0046}.jw-skin-seven .jw-knob{width:.6em;height:.6em;background-color:#fff;box-shadow:0 0 0 1px #000;border-radius:1em}.jw-skin-seven .jw-slider-horizontal .jw-slider-container{height:.95em}.jw-skin-seven .jw-slider-horizontal .jw-rail,.jw-skin-seven .jw-slider-horizontal .jw-buffer,.jw-skin-seven .jw-slider-horizontal .jw-progress{height:.2em;border-radius:0}.jw-skin-seven .jw-slider-horizontal .jw-knob{top:-0.2em}.jw-skin-seven .jw-slider-horizontal .jw-cue{top:-0.05em;width:.3em;height:.3em;background-color:#fff;border-radius:50%}.jw-skin-seven .jw-slider-vertical .jw-rail,.jw-skin-seven .jw-slider-vertical .jw-buffer,.jw-skin-seven .jw-slider-vertical .jw-progress{width:.2em}.jw-skin-seven .jw-slider-vertical .jw-knob{margin-bottom:-0.3em}.jw-skin-seven .jw-volume-tip{width:100%;left:-45%;padding-bottom:.7em}.jw-skin-seven .jw-text-duration{color:#666F82}.jw-skin-seven .jw-controlbar-right-group .jw-icon-tooltip:before,.jw-skin-seven .jw-controlbar-right-group .jw-icon-inline:before{border-left:1px solid #666}.jw-skin-seven .jw-controlbar-right-group .jw-icon-inline:first-child:before{border:none}.jw-skin-seven .jw-dock .jw-dock-button{border-radius:50%;border:1px solid #333}.jw-skin-seven .jw-dock .jw-overlay{border-radius:2.5em}.jw-skin-seven .jw-icon-tooltip .jw-active-option{background-color:#FF0046;color:#fff}.jw-skin-seven .jw-icon-volume{min-width:2.6em}.jw-skin-seven .jw-time-tip,.jw-skin-seven .jw-menu,.jw-skin-seven .jw-volume-tip,.jw-skin-seven .jw-skip{border:1px solid #333}.jw-skin-seven .jw-time-tip{padding:.2em;bottom:1.3em}.jw-skin-seven .jw-menu,.jw-skin-seven .jw-volume-tip{bottom:.24em}.jw-skin-seven .jw-skip{padding:.4em;border-radius:1.75em}.jw-skin-seven .jw-skip .jw-text,.jw-skin-seven .jw-skip .jw-icon-inline{color:#fff;line-height:1.75em}.jw-skin-seven .jw-skip.jw-skippable:hover .jw-text,.jw-skin-seven .jw-skip.jw-skippable:hover .jw-icon-inline{color:#FF0046}.jw-skin-seven.jw-flag-touch .jw-controlbar .jw-icon:before,.jw-skin-seven.jw-flag-touch .jw-text-elapsed,.jw-skin-seven.jw-flag-touch .jw-text-duration{padding:0 .35em}.jw-skin-seven.jw-flag-touch .jw-controlbar .jw-icon-prev:before{padding:0 .125em 0 .7em}.jw-skin-seven.jw-flag-touch .jw-controlbar .jw-icon-next:before{padding:0 .7em 0 .125em}.jw-skin-seven.jw-flag-touch .jw-controlbar .jw-icon-playlist:before{padding:0 .225em}',""]);
},function(a,b){a.exports=function(){var a=[];return a.toString=function(){for(var a=[],b=0;b<this.length;b++){var c=this[b];c[2]?a.push("@media "+c[2]+"{"+c[1]+"}"):a.push(c[1])}return a.join("")},a.i=function(b,c){"string"==typeof b&&(b=[[null,b,""]]);for(var d={},e=0;e<this.length;e++){var f=this[e][0];"number"==typeof f&&(d[f]=!0)}for(e=0;e<b.length;e++){var g=b[e];"number"==typeof g[0]&&d[g[0]]||(c&&!g[2]?g[2]=c:c&&(g[2]="("+g[2]+") and ("+c+")"),a.push(g))}},a}},function(a,b){a.exports="data:application/font-woff;base64,d09GRgABAAAAABQ4AAsAAAAAE+wAAQABAAAAAAAAAAAAAAAAAAAAAAAAAABPUy8yAAABCAAAAGAAAABgDxID2WNtYXAAAAFoAAAAVAAAAFQaVsydZ2FzcAAAAbwAAAAIAAAACAAAABBnbHlmAAABxAAAD3AAAA9wKJaoQ2hlYWQAABE0AAAANgAAADYIhqKNaGhlYQAAEWwAAAAkAAAAJAmCBdxobXR4AAARkAAAAGwAAABscmAHPWxvY2EAABH8AAAAOAAAADg2EDnwbWF4cAAAEjQAAAAgAAAAIAAiANFuYW1lAAASVAAAAcIAAAHCwZOZtHBvc3QAABQYAAAAIAAAACAAAwAAAAMEmQGQAAUAAAKZAswAAACPApkCzAAAAesAMwEJAAAAAAAAAAAAAAAAAAAAARAAAAAAAAAAAAAAAAAAAAAAQAAA5hYDwP/AAEADwABAAAAAAQAAAAAAAAAAAAAAIAAAAAAAAwAAAAMAAAAcAAEAAwAAABwAAwABAAAAHAAEADgAAAAKAAgAAgACAAEAIOYW//3//wAAAAAAIOYA//3//wAB/+MaBAADAAEAAAAAAAAAAAAAAAEAAf//AA8AAQAAAAAAAAAAAAIAADc5AQAAAAABAAAAAAAAAAAAAgAANzkBAAAAAAEAAAAAAAAAAAACAAA3OQEAAAAABABgAAAFoAOAADoAPwBEAEkAACUVIi4CNTQ2Ny4BNTQ+AjMyHgIVFAYHHgEVFA4CIxEyFhc+ATU0LgIjIg4CFRQWFz4BMxExARUhNSEXFSE1IRcVITUhAUAuUj0jCgoKCkZ6o11do3pGCgoKCiM9Ui4qSh4BAjpmiE1NiGY6AQIeSioCVQIL/fWWAXX+i0oBK/7VHh4jPVIuGS4VH0MiXaN6RkZ6o10iQx8VLhkuUj0jAcAdGQ0bDk2IZjo6ZohNDhsNGR3+XgNilZXglZXglZUAAAABAEAAAAPAA4AAIQAAExQeAjMyPgI1MxQOAiMiLgI1ND4CMxUiDgIVMYs6ZohNTYhmOktGeqNdXaN6RkZ6o11NiGY6AcBNiGY6OmaITV2jekZGeqNdXaN6Rks6ZohNAAAEAEAAAATAA4AADgAcACoAMQAAJS4BJyERIREuAScRIREhByMuAyc1HgMXMSsBLgMnNR4DFzErATUeARcxAn8DBQQCDPxGCysLBDz9v1NaCERrjE9irINTCLVbByc6Sio9a1I1CLaBL0YMQgsoCgLB/ukDCgIBSPzCQk6HaEIIWAhQgKdgKUg5JgdYBzRRZzx9C0QuAAAAAAUAQAAABMADgAAOABkAJwA1ADwAACUuASchESERLgEnESERIQE1IREhLgMnMQEjLgMnNR4DFzErAS4DJzUeAxcxKwE1HgEXMQKAAgYFAg38QAwqCgRA/cD+gANA/iAYRVlsPgEtWghFa4xPYq2DUgmzWgcnO0oqPGpSNgm6gDBEDEAMKAwCwP7tAggDAUb8wAHQ8P3APWdUQRf98E2IaEIHWghQgKhgKUg4JgdaCDVRZzt9DEMuAAAEAEAAAAXAA4AABAAJAGcAxQAANxEhESEBIREhEQU+ATc+ATMyFhceARceARceARcjLgEnLgEnLgEnLgEjIgYHDgEHDgEHDgEVFBYXHgEXHgEXHgEzMjY3PgE3Mw4BBw4BBw4BBw4BIyImJy4BJy4BJy4BNTQ2Nz4BNzEhPgE3PgEzMhYXHgEXHgEXHgEXIy4BJy4BJy4BJy4BIyIGBw4BBw4BBw4BFRQWFx4BFx4BFx4BMzI2Nz4BNzMOAQcOAQcOAQcOASMiJicuAScuAScuATU0Njc+ATcxQAWA+oAFNvsUBOz8Iw4hExQsGBIhEA8cDQwUCAgLAlsBBQUECgYHDggIEAkQGgsLEgcHCgMDAwMDAwoHBxILCxoQFiEMDA8DWgIJBwgTDQwcERAkFBgsFBMhDg0VBwcHBwcHFQ0Bug0hFBMsGREhEBAcDAwVCAgKAloCBQQECwYGDggIEQgQGwsLEgcHCgMDAwMDAwoHBxILCxsQFSIMDA4DWwIJCAcUDAwdEBEkExksExQhDQ4UBwcICAcHFA4AA4D8gAM1/RYC6tcQGAgJCQUFBQ8KChgPDiETCQ4HBwwFBQgDAwIGBgYRCgoYDQ0cDg0aDQ0XCgoRBgYGDQ0OIhYUJBEQHAsLEgYGBgkICRcPDyQUFCwXGC0VFCQPEBgICQkFBQUPCgoYDw4hEwkOBwcMBQUIAwMCBgYGEQoKGA0NHA4NGg0NFwoKEQYGBg0NDiIWFCQREBwLCxIGBgYJCAkXDw8kFBQsFxgtFRQkDwAAAAADAEAAAAXAA4AAEABvAM4AACUhIiY1ETQ2MyEyFhURFAYjAT4BNz4BNz4BMzIWFx4BFx4BFx4BFzMuAScuAScuAScuASMiBgcOAQcOAQcOARUUFhceARceARceATMyNjc+ATc+ATc+ATcjDgEHDgEjIiYnLgEnLgEnLgE1NDY3OQEhPgE3PgE3PgEzMhYXHgEXHgEXHgEXMy4BJy4BJy4BJy4BIyIGBw4BBw4BBw4BFRQWFx4BFx4BFx4BMzI2Nz4BNz4BNz4BNyMOAQcOASMiJicuAScuAScuATU0Njc5AQUs+6g9V1c9BFg9V1c9/JoDCgcGEgsLGxAJEAgIDgYHCgQEBgFaAgoICBQNDBwQDyESGCwUEyEODRUHBwcHBwcVDQ4hExQrGRQkEBAdDAwUCAcJAloDDwwMIhUQGwsLEgYHCgMEAwMEAbkDCgcHEgsLGxAIEQgHDwYGCwQEBQFbAgoICBUMDBwQECERGSwTFCENDhQHBwgIBwcUDg0hFBMsGRMkERAdDAwUBwgJAlsDDgwNIRUQGwsLEgcHCgMDAwMDAFc+AlY+V1c+/ao+VwH0DRgKCxAGBgYCAwMIBQUMBwcOCRMhDg8YCgoOBgUFCQkIGBAPJBQVLRgXLBQUJA8PFwkICQYGBhILCxwQESQUFiIODQ0GBgYRCgoXDQ0aDg4bDQ0YCgsQBgYGAgMDCAUFDAcHDgkTIQ4PGAoKDgYFBQkJCBgQDyQUFS0YFywUFCQPDxcJCAkGBgYSCwscEBEkFBYiDg0NBgYGEQoKFw0NGg4OGw0AAAABAOAAoAMgAuAAFAAAARQOAiMiLgI1ND4CMzIeAhUDIC1OaTw8aU4tLU5pPDxpTi0BwDxpTi0tTmk8PGlOLS1OaTwAAAMAQAAQBEADkAADABAAHwAANwkBISUyNjU0JiMiBhUUFjMTNCYjIgYVERQWMzI2NRFAAgACAPwAAgAOFRUODhUVDiMVDg4VFQ4OFRADgPyAcBYQDxgWERAWAeYPGBYR/tcPGBYRASkAAgBAAAADwAOAAAcADwAANxEXNxcHFyEBIREnByc3J0CAsI2wgP5zAfMBjYCwjbCAAAGNgLCNsIADgP5zgLCNsIAAAAAFAEAAAAXAA4AABAAJABYAMwBPAAA3ESERIQEhESERATM1MxEjNSMVIxEzFSUeARceARceARUUBgcOAQcOAQcOASsBETMeARcxBxEzMjY3PgE3PgE3PgE1NCYnLgEnLgEnLgErAUAFgPqABTb7FATs/FS2YGC2ZGQCXBQeDg8UBwcJBgcHEwwMIRMTLBuwsBYqE6BHCRcJChIIBw0FBQUEAwINBwcTDAwgETcAA4D8gAM2/RcC6f7Arf5AwMABwK2dBxQODyIWFTAbGC4TFiIPDhgKCQcBwAIHB0P+5gQDAg0HBxcMDCETER0PDhgKCQ8EBQUABAA9AAAFwAOAABAAHQA7AFkAACUhIiY1ETQ2MyEyFhURFAYjASMVIzUjETM1MxUzEQUuAScuAScuASsBETMyNjc+ATc+ATc+ATUuASc5AQcOAQcOASsBETMyFhceARceARceARUUBgcOAQc5AQUq+6k+WFg+BFc+WFg+/bNgs2Rks2ABsAcXDA4fExMnFrCwGywTEx4PDBMHBwYCCAl3CBIKCRQMRzcTHgwMEwcHCwQDBAUFBQ0HAFg+AlQ+WFg+/aw+WAKdra3+QMDAAcB9FiIODxQHBwb+QAkHCRgPDiUTFiwYHTAW4ggNAgMEAR8EBQUPCgoYDw4fERMfDwwXBwAAAAABAEMABgOgA3oAjwAAExQiNScwJic0JicuAQcOARUcARUeARceATc+ATc+ATE2MhUwFAcUFhceARceATMyNjc+ATc+ATc+AzE2MhUwDgIVFBYXHgEXFjY3PgE3PgE3PgE3PgM3PAE1NCYnJgYHDgMxBiI1MDwCNTQmJyYGBw4BBw4DMQYiNTAmJy4BJyYGBw4BMRWQBgQIBAgCBQ4KBwkDFgcHIQ8QDwcHNgUEAwMHBQsJChcMBQ0FBwsHDBMICR8cFQUFAwQDCAUHFRERJBEMEwgJEgUOGQwGMjgvBAkHDBYEAz1IPAQFLyQRIhEQFgoGIiUcBQUEAgMYKCcmCgcsAboFBQwYDwUKBwUEAgMNBwcLBxRrDhENBwggDxOTCgqdMBM1EQwTCAcFBAIFCgcPIw4UQ0IxCgpTc3glEyMREBgIBwEKBxUKESUQJ00mE6/JrA8FBgIHDQMECAkGla2PCQk1VGYxNTsHAgUKChwQC2BqVQoKehYfTwUDRx8TkAMAAAAAAgBGAAAENgOAAAQACAAAJREzESMJAhEDxnBw/IADgPyAAAOA/IADgP5A/kADgAAAAgCAAAADgAOAAAQACQAAJREhESEBIREhEQKAAQD/AP4AAQD/AAADgPyAA4D8gAOAAAAAAAEAgAAABAADgAADAAAJAREBBAD8gAOAAcD+QAOA/kAAAgBKAAAEOgOAAAQACAAANxEjETMJAhG6cHADgPyAA4AAA4D8gAOA/kD+QAOAAAAAAQBDACADQwOgACkAAAEeARUUDgIjIi4CNTQ+AjM1DQE1Ig4CFRQeAjMyPgI1NCYnNwMNGhw8aYxPT4xoPT1ojE8BQP7APGlOLS1OaTw8aU4tFhNTAmMrYzVPjGg9PWiMT0+MaD2ArbOALU5pPDxpTi0tTmk8KUsfMAAAAAEAQABmAiADEwAGAAATETMlESUjQM0BE/7tzQEzARPN/VPNAAQAQAAABJADgAAXACsAOgBBAAAlJz4DNTQuAic3HgMVFA4CBzEvAT4BNTQmJzceAxUOAwcxJz4BNTQmJzceARUUBgcnBREzJRElIwPaKiY+KxcXKz4mKipDMBkZMEMqpCk5REQ5KSE0JBQBFCQzIcMiKCgiKiYwMCYq/c3NARP+7c0AIyheaXI8PHFpXikjK2ZyfEFBfHJmK4MjNZFUVJE1Ix5IUFgvL1lRRx2zFkgpK0YVIxxcNDVZHykDARPN/VPNAAACAEAAAAPDA4AABwAPAAABFyERFzcXBwEHJzcnIREnAypw/qlwl3mZ/iaWepZwAVdtAnNwAVdwlnqT/iOWepZw/qpsAAMAQAETBcACYAAMABkAJgAAARQGIyImNTQ2MzIWFSEUBiMiJjU0NjMyFhUhFAYjIiY1NDYzMhYVAY1iRUVhYUVFYgIWYUVFYmJFRWECHWFFRWJiRUVhAbpFYmJFRWFhRUViYkVFYWFFRWJiRUVhYUUAAAAAAQBmACYDmgNaACAAAAEXFhQHBiIvAQcGIicmND8BJyY0NzYyHwE3NjIXFhQPAQKj9yQkJGMd9vYkYx0kJPf3JCQkYx329iRjHSQk9wHA9iRjHSQk9/ckJCRjHfb2JGMdJCT39yQkJGMd9gAABgBEAAQDvAN8AAQACQAOABMAGAAdAAABIRUhNREhFSE1ESEVITUBMxUjNREzFSM1ETMVIzUBpwIV/esCFf3rAhX96/6dsrKysrKyA3xZWf6dWVn+nVlZAsaysv6dsrL+nbKyAAEAAAABGZqh06s/Xw889QALBAAAAAAA0dQiKwAAAADR1CIrAAAAAAXAA6AAAAAIAAIAAAAAAAAAAQAAA8D/wAAABgAAAAAABcAAAQAAAAAAAAAAAAAAAAAAABsEAAAAAAAAAAAAAAACAAAABgAAYAQAAEAFAABABQAAQAYAAEAGAABABAAA4ASAAEAEAABABgAAQAYAAD0D4ABDBIAARgQAAIAEAACABIAASgOAAEMEwABABMAAQAQAAEAGAABABAAAZgQAAEQAAAAAAAoAFAAeAIgAuAEEAWAChgOyA9QECAQqBKQFJgXoBgAGGgYqBkIGgAaSBvQHFgdQB4YHuAABAAAAGwDPAAYAAAAAAAIAAAAAAAAAAAAAAAAAAAAAAAAADgCuAAEAAAAAAAEADAAAAAEAAAAAAAIABwCNAAEAAAAAAAMADABFAAEAAAAAAAQADACiAAEAAAAAAAUACwAkAAEAAAAAAAYADABpAAEAAAAAAAoAGgDGAAMAAQQJAAEAGAAMAAMAAQQJAAIADgCUAAMAAQQJAAMAGABRAAMAAQQJAAQAGACuAAMAAQQJAAUAFgAvAAMAAQQJAAYAGAB1AAMAAQQJAAoANADganctc2l4LWljb25zAGoAdwAtAHMAaQB4AC0AaQBjAG8AbgBzVmVyc2lvbiAxLjEAVgBlAHIAcwBpAG8AbgAgADEALgAxanctc2l4LWljb25zAGoAdwAtAHMAaQB4AC0AaQBjAG8AbgBzanctc2l4LWljb25zAGoAdwAtAHMAaQB4AC0AaQBjAG8AbgBzUmVndWxhcgBSAGUAZwB1AGwAYQByanctc2l4LWljb25zAGoAdwAtAHMAaQB4AC0AaQBjAG8AbgBzRm9udCBnZW5lcmF0ZWQgYnkgSWNvTW9vbi4ARgBvAG4AdAAgAGcAZQBuAGUAcgBhAHQAZQBkACAAYgB5ACAASQBjAG8ATQBvAG8AbgAuAAAAAwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA=="},function(a,b){a.exports="data:application/octet-stream;base64,AAEAAAALAIAAAwAwT1MvMg8SA9kAAAC8AAAAYGNtYXAaVsydAAABHAAAAFRnYXNwAAAAEAAAAXAAAAAIZ2x5ZiiWqEMAAAF4AAAPcGhlYWQIhqKNAAAQ6AAAADZoaGVhCYIF3AAAESAAAAAkaG10eHJgBz0AABFEAAAAbGxvY2E2EDnwAAARsAAAADhtYXhwACIA0QAAEegAAAAgbmFtZcGTmbQAABIIAAABwnBvc3QAAwAAAAATzAAAACAAAwSZAZAABQAAApkCzAAAAI8CmQLMAAAB6wAzAQkAAAAAAAAAAAAAAAAAAAABEAAAAAAAAAAAAAAAAAAAAABAAADmFgPA/8AAQAPAAEAAAAABAAAAAAAAAAAAAAAgAAAAAAADAAAAAwAAABwAAQADAAAAHAADAAEAAAAcAAQAOAAAAAoACAACAAIAAQAg5hb//f//AAAAAAAg5gD//f//AAH/4xoEAAMAAQAAAAAAAAAAAAAAAQAB//8ADwABAAAAAAAAAAAAAgAANzkBAAAAAAEAAAAAAAAAAAACAAA3OQEAAAAAAQAAAAAAAAAAAAIAADc5AQAAAAAEAGAAAAWgA4AAOgA/AEQASQAAJRUiLgI1NDY3LgE1ND4CMzIeAhUUBgceARUUDgIjETIWFz4BNTQuAiMiDgIVFBYXPgEzETEBFSE1IRcVITUhFxUhNSEBQC5SPSMKCgoKRnqjXV2jekYKCgoKIz1SLipKHgECOmaITU2IZjoBAh5KKgJVAgv99ZYBdf6LSgEr/tUeHiM9Ui4ZLhUfQyJdo3pGRnqjXSJDHxUuGS5SPSMBwB0ZDRsOTYhmOjpmiE0OGw0ZHf5eA2KVleCVleCVlQAAAAEAQAAAA8ADgAAhAAATFB4CMzI+AjUzFA4CIyIuAjU0PgIzFSIOAhUxizpmiE1NiGY6S0Z6o11do3pGRnqjXU2IZjoBwE2IZjo6ZohNXaN6RkZ6o11do3pGSzpmiE0AAAQAQAAABMADgAAOABwAKgAxAAAlLgEnIREhES4BJxEhESEHIy4DJzUeAxcxKwEuAyc1HgMXMSsBNR4BFzECfwMFBAIM/EYLKwsEPP2/U1oIRGuMT2Ksg1MItVsHJzpKKj1rUjUItoEvRgxCCygKAsH+6QMKAgFI/MJCTodoQghYCFCAp2ApSDkmB1gHNFFnPH0LRC4AAAAABQBAAAAEwAOAAA4AGQAnADUAPAAAJS4BJyERIREuAScRIREhATUhESEuAycxASMuAyc1HgMXMSsBLgMnNR4DFzErATUeARcxAoACBgUCDfxADCoKBED9wP6AA0D+IBhFWWw+AS1aCEVrjE9irYNSCbNaByc7Sio8alI2CbqAMEQMQAwoDALA/u0CCAMBRvzAAdDw/cA9Z1RBF/3wTYhoQgdaCFCAqGApSDgmB1oINVFnO30MQy4AAAQAQAAABcADgAAEAAkAZwDFAAA3ESERIQEhESERBT4BNz4BMzIWFx4BFx4BFx4BFyMuAScuAScuAScuASMiBgcOAQcOAQcOARUUFhceARceARceATMyNjc+ATczDgEHDgEHDgEHDgEjIiYnLgEnLgEnLgE1NDY3PgE3MSE+ATc+ATMyFhceARceARceARcjLgEnLgEnLgEnLgEjIgYHDgEHDgEHDgEVFBYXHgEXHgEXHgEzMjY3PgE3Mw4BBw4BBw4BBw4BIyImJy4BJy4BJy4BNTQ2Nz4BNzFABYD6gAU2+xQE7PwjDiETFCwYEiEQDxwNDBQICAsCWwEFBQQKBgcOCAgQCRAaCwsSBwcKAwMDAwMDCgcHEgsLGhAWIQwMDwNaAgkHCBMNDBwRECQUGCwUEyEODRUHBwcHBwcVDQG6DSEUEywZESEQEBwMDBUICAoCWgIFBAQLBgYOCAgRCBAbCwsSBwcKAwMDAwMDCgcHEgsLGxAVIgwMDgNbAgkIBxQMDB0QESQTGSwTFCENDhQHBwgIBwcUDgADgPyAAzX9FgLq1xAYCAkJBQUFDwoKGA8OIRMJDgcHDAUFCAMDAgYGBhEKChgNDRwODRoNDRcKChEGBgYNDQ4iFhQkERAcCwsSBgYGCQgJFw8PJBQULBcYLRUUJA8QGAgJCQUFBQ8KChgPDiETCQ4HBwwFBQgDAwIGBgYRCgoYDQ0cDg0aDQ0XCgoRBgYGDQ0OIhYUJBEQHAsLEgYGBgkICRcPDyQUFCwXGC0VFCQPAAAAAAMAQAAABcADgAAQAG8AzgAAJSEiJjURNDYzITIWFREUBiMBPgE3PgE3PgEzMhYXHgEXHgEXHgEXMy4BJy4BJy4BJy4BIyIGBw4BBw4BBw4BFRQWFx4BFx4BFx4BMzI2Nz4BNz4BNz4BNyMOAQcOASMiJicuAScuAScuATU0Njc5ASE+ATc+ATc+ATMyFhceARceARceARczLgEnLgEnLgEnLgEjIgYHDgEHDgEHDgEVFBYXHgEXHgEXHgEzMjY3PgE3PgE3PgE3Iw4BBw4BIyImJy4BJy4BJy4BNTQ2NzkBBSz7qD1XVz0EWD1XVz38mgMKBwYSCwsbEAkQCAgOBgcKBAQGAVoCCggIFA0MHBAPIRIYLBQTIQ4NFQcHBwcHBxUNDiETFCsZFCQQEB0MDBQIBwkCWgMPDAwiFRAbCwsSBgcKAwQDAwQBuQMKBwcSCwsbEAgRCAcPBgYLBAQFAVsCCggIFQwMHBAQIREZLBMUIQ0OFAcHCAgHBxQODSEUEywZEyQREB0MDBQHCAkCWwMODA0hFRAbCwsSBwcKAwMDAwMAVz4CVj5XVz79qj5XAfQNGAoLEAYGBgIDAwgFBQwHBw4JEyEODxgKCg4GBQUJCQgYEA8kFBUtGBcsFBQkDw8XCQgJBgYGEgsLHBARJBQWIg4NDQYGBhEKChcNDRoODhsNDRgKCxAGBgYCAwMIBQUMBwcOCRMhDg8YCgoOBgUFCQkIGBAPJBQVLRgXLBQUJA8PFwkICQYGBhILCxwQESQUFiIODQ0GBgYRCgoXDQ0aDg4bDQAAAAEA4ACgAyAC4AAUAAABFA4CIyIuAjU0PgIzMh4CFQMgLU5pPDxpTi0tTmk8PGlOLQHAPGlOLS1OaTw8aU4tLU5pPAAAAwBAABAEQAOQAAMAEAAfAAA3CQEhJTI2NTQmIyIGFRQWMxM0JiMiBhURFBYzMjY1EUACAAIA/AACAA4VFQ4OFRUOIxUODhUVDg4VEAOA/IBwFhAPGBYREBYB5g8YFhH+1w8YFhEBKQACAEAAAAPAA4AABwAPAAA3ERc3FwcXIQEhEScHJzcnQICwjbCA/nMB8wGNgLCNsIAAAY2AsI2wgAOA/nOAsI2wgAAAAAUAQAAABcADgAAEAAkAFgAzAE8AADcRIREhASERIREBMzUzESM1IxUjETMVJR4BFx4BFx4BFRQGBw4BBw4BBw4BKwERMx4BFzEHETMyNjc+ATc+ATc+ATU0JicuAScuAScuASsBQAWA+oAFNvsUBOz8VLZgYLZkZAJcFB4ODxQHBwkGBwcTDAwhExMsG7CwFioToEcJFwkKEggHDQUFBQQDAg0HBxMMDCARNwADgPyAAzb9FwLp/sCt/kDAwAHArZ0HFA4PIhYVMBsYLhMWIg8OGAoJBwHAAgcHQ/7mBAMCDQcHFwwMIRMRHQ8OGAoJDwQFBQAEAD0AAAXAA4AAEAAdADsAWQAAJSEiJjURNDYzITIWFREUBiMBIxUjNSMRMzUzFTMRBS4BJy4BJy4BKwERMzI2Nz4BNz4BNz4BNS4BJzkBBw4BBw4BKwERMzIWFx4BFx4BFx4BFRQGBw4BBzkBBSr7qT5YWD4EVz5YWD79s2CzZGSzYAGwBxcMDh8TEycWsLAbLBMTHg8MEwcHBgIICXcIEgoJFAxHNxMeDAwTBwcLBAMEBQUFDQcAWD4CVD5YWD79rD5YAp2trf5AwMABwH0WIg4PFAcHBv5ACQcJGA8OJRMWLBgdMBbiCA0CAwQBHwQFBQ8KChgPDh8REx8PDBcHAAAAAAEAQwAGA6ADegCPAAATFCI1JzAmJzQmJy4BBw4BFRwBFR4BFx4BNz4BNz4BMTYyFTAUBxQWFx4BFx4BMzI2Nz4BNz4BNz4DMTYyFTAOAhUUFhceARcWNjc+ATc+ATc+ATc+Azc8ATU0JicmBgcOAzEGIjUwPAI1NCYnJgYHDgEHDgMxBiI1MCYnLgEnJgYHDgExFZAGBAgECAIFDgoHCQMWBwchDxAPBwc2BQQDAwcFCwkKFwwFDQUHCwcMEwgJHxwVBQUDBAMIBQcVEREkEQwTCAkSBQ4ZDAYyOC8ECQcMFgQDPUg8BAUvJBEiERAWCgYiJRwFBQQCAxgoJyYKBywBugUFDBgPBQoHBQQCAw0HBwsHFGsOEQ0HCCAPE5MKCp0wEzURDBMIBwUEAgUKBw8jDhRDQjEKClNzeCUTIxEQGAgHAQoHFQoRJRAnTSYTr8msDwUGAgcNAwQICQaVrY8JCTVUZjE1OwcCBQoKHBALYGpVCgp6Fh9PBQNHHxOQAwAAAAACAEYAAAQ2A4AABAAIAAAlETMRIwkCEQPGcHD8gAOA/IAAA4D8gAOA/kD+QAOAAAACAIAAAAOAA4AABAAJAAAlESERIQEhESERAoABAP8A/gABAP8AAAOA/IADgPyAA4AAAAAAAQCAAAAEAAOAAAMAAAkBEQEEAPyAA4ABwP5AA4D+QAACAEoAAAQ6A4AABAAIAAA3ESMRMwkCEbpwcAOA/IADgAADgPyAA4D+QP5AA4AAAAABAEMAIANDA6AAKQAAAR4BFRQOAiMiLgI1ND4CMzUNATUiDgIVFB4CMzI+AjU0Jic3Aw0aHDxpjE9PjGg9PWiMTwFA/sA8aU4tLU5pPDxpTi0WE1MCYytjNU+MaD09aIxPT4xoPYCts4AtTmk8PGlOLS1OaTwpSx8wAAAAAQBAAGYCIAMTAAYAABMRMyURJSNAzQET/u3NATMBE839U80ABABAAAAEkAOAABcAKwA6AEEAACUnPgM1NC4CJzceAxUUDgIHMS8BPgE1NCYnNx4DFQ4DBzEnPgE1NCYnNx4BFRQGBycFETMlESUjA9oqJj4rFxcrPiYqKkMwGRkwQyqkKTlERDkpITQkFAEUJDMhwyIoKCIqJjAwJir9zc0BE/7tzQAjKF5pcjw8cWleKSMrZnJ8QUF8cmYrgyM1kVRUkTUjHkhQWC8vWVFHHbMWSCkrRhUjHFw0NVkfKQMBE839U80AAAIAQAAAA8MDgAAHAA8AAAEXIREXNxcHAQcnNychEScDKnD+qXCXeZn+JpZ6lnABV20Cc3ABV3CWepP+I5Z6lnD+qmwAAwBAARMFwAJgAAwAGQAmAAABFAYjIiY1NDYzMhYVIRQGIyImNTQ2MzIWFSEUBiMiJjU0NjMyFhUBjWJFRWFhRUViAhZhRUViYkVFYQIdYUVFYmJFRWEBukViYkVFYWFFRWJiRUVhYUVFYmJFRWFhRQAAAAABAGYAJgOaA1oAIAAAARcWFAcGIi8BBwYiJyY0PwEnJjQ3NjIfATc2MhcWFA8BAqP3JCQkYx329iRjHSQk9/ckJCRjHfb2JGMdJCT3AcD2JGMdJCT39yQkJGMd9vYkYx0kJPf3JCQkYx32AAAGAEQABAO8A3wABAAJAA4AEwAYAB0AAAEhFSE1ESEVITURIRUhNQEzFSM1ETMVIzURMxUjNQGnAhX96wIV/esCFf3r/p2ysrKysrIDfFlZ/p1ZWf6dWVkCxrKy/p2ysv6dsrIAAQAAAAEZmqHTqz9fDzz1AAsEAAAAAADR1CIrAAAAANHUIisAAAAABcADoAAAAAgAAgAAAAAAAAABAAADwP/AAAAGAAAAAAAFwAABAAAAAAAAAAAAAAAAAAAAGwQAAAAAAAAAAAAAAAIAAAAGAABgBAAAQAUAAEAFAABABgAAQAYAAEAEAADgBIAAQAQAAEAGAABABgAAPQPgAEMEgABGBAAAgAQAAIAEgABKA4AAQwTAAEAEwABABAAAQAYAAEAEAABmBAAARAAAAAAACgAUAB4AiAC4AQQBYAKGA7ID1AQIBCoEpAUmBegGAAYaBioGQgaABpIG9AcWB1AHhge4AAEAAAAbAM8ABgAAAAAAAgAAAAAAAAAAAAAAAAAAAAAAAAAOAK4AAQAAAAAAAQAMAAAAAQAAAAAAAgAHAI0AAQAAAAAAAwAMAEUAAQAAAAAABAAMAKIAAQAAAAAABQALACQAAQAAAAAABgAMAGkAAQAAAAAACgAaAMYAAwABBAkAAQAYAAwAAwABBAkAAgAOAJQAAwABBAkAAwAYAFEAAwABBAkABAAYAK4AAwABBAkABQAWAC8AAwABBAkABgAYAHUAAwABBAkACgA0AOBqdy1zaXgtaWNvbnMAagB3AC0AcwBpAHgALQBpAGMAbwBuAHNWZXJzaW9uIDEuMQBWAGUAcgBzAGkAbwBuACAAMQAuADFqdy1zaXgtaWNvbnMAagB3AC0AcwBpAHgALQBpAGMAbwBuAHNqdy1zaXgtaWNvbnMAagB3AC0AcwBpAHgALQBpAGMAbwBuAHNSZWd1bGFyAFIAZQBnAHUAbABhAHJqdy1zaXgtaWNvbnMAagB3AC0AcwBpAHgALQBpAGMAbwBuAHNGb250IGdlbmVyYXRlZCBieSBJY29Nb29uLgBGAG8AbgB0ACAAZwBlAG4AZQByAGEAdABlAGQAIABiAHkAIABJAGMAbwBNAG8AbwBuAC4AAAADAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA"},function(a,b,c){function d(a,b){for(var c=0;c<a.length;c++){var d=a[c],e=l[d.id];if(e){e.refs++;for(var f=0;f<e.parts.length;f++)e.parts[f](d.parts[f]);for(;f<d.parts.length;f++)e.parts.push(h(d.parts[f],b))}else{for(var g=[],f=0;f<d.parts.length;f++)g.push(h(d.parts[f],b));l[d.id]={id:d.id,refs:1,parts:g}}}}function e(a){for(var b=[],c={},d=0;d<a.length;d++){var e=a[d],f=e[0],g=e[1],h=e[2],i=e[3],j={css:g,media:h,sourceMap:i};c[f]?c[f].parts.push(j):b.push(c[f]={id:f,parts:[j]})}return b}function f(){var a=document.createElement("style"),b=o();return a.type="text/css",b.appendChild(a),a}function g(){var a=document.createElement("link"),b=o();return a.rel="stylesheet",b.appendChild(a),a}function h(a,b){var c,d,e;if(b.singleton){var h=q++;c=p||(p=f()),d=i.bind(null,c,h,!1),e=i.bind(null,c,h,!0)}else a.sourceMap&&"function"==typeof URL&&"function"==typeof URL.createObjectURL&&"function"==typeof URL.revokeObjectURL&&"function"==typeof Blob&&"function"==typeof btoa?(c=g(),d=k.bind(null,c),e=function(){c.parentNode.removeChild(c),c.href&&URL.revokeObjectURL(c.href)}):(c=f(),d=j.bind(null,c),e=function(){c.parentNode.removeChild(c)});return d(a),function(b){if(b){if(b.css===a.css&&b.media===a.media&&b.sourceMap===a.sourceMap)return;d(a=b)}else e()}}function i(a,b,c,d){var e=c?"":d.css;if(a.styleSheet)a.styleSheet.cssText=r(b,e);else{var f=document.createTextNode(e),g=a.childNodes;g[b]&&a.removeChild(g[b]),g.length?a.insertBefore(f,g[b]):a.appendChild(f)}}function j(a,b){var c=b.css,d=b.media;b.sourceMap;if(d&&a.setAttribute("media",d),a.styleSheet)a.styleSheet.cssText=c;else{for(;a.firstChild;)a.removeChild(a.firstChild);a.appendChild(document.createTextNode(c))}}function k(a,b){var c=b.css,d=(b.media,b.sourceMap);d&&(c+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(d))))+" */");var e=new Blob([c],{type:"text/css"}),f=a.href;a.href=URL.createObjectURL(e),f&&URL.revokeObjectURL(f)}var l={},m=function(a){var b;return function(){return"undefined"==typeof b&&(b=a.apply(this,arguments)),b}},n=m(function(){return/msie [6-9]\b/.test(window.navigator.userAgent.toLowerCase())}),o=m(function(){return document.head||document.getElementsByTagName("head")[0]}),p=null,q=0;a.exports=function(a,b){b=b||{},"undefined"==typeof b.singleton&&(b.singleton=n());var c=e(a);return d(c,b),function(a){for(var f=[],g=0;g<c.length;g++){var h=c[g],i=l[h.id];i.refs--,f.push(i)}if(a){var j=e(a);d(j,b)}for(var g=0;g<f.length;g++){var i=f[g];if(0===i.refs){for(var k=0;k<i.parts.length;k++)i.parts[k]();delete l[i.id]}}}};var r=function(){var a=[];return function(b,c){return a[b]=c,a.filter(Boolean).join("\n")}}()},function(a,b,c){var d,e;d=[c(42),c(45),c(59),c(48),c(89),c(51),c(127),c(95),c(101),c(96),c(83),c(46),c(62),c(114),c(70),c(162),c(67),c(98)],e=function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r){var s={};return s.api=a,s._=b,s.version=c,s.utils=b.extend(d,f,{canCast:p.available,key:h,extend:b.extend,scriptloader:i,rssparser:q,tea:j,UI:g}),s.utils.css.style=s.utils.style,s.vid=k,s.events=b.extend({},l,{state:m}),s.playlist=b.extend({},n,{item:o}),s.plugins=r,s.cast=p,s}.apply(b,d),!(void 0!==e&&(a.exports=e))}])});webpackJsonpjwplayer([2],{105:function(a,b,c){var d,e;d=[],e=function(){function a(a){this.message=a}var b="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";a.prototype=new Error,a.prototype.name="InvalidCharacterError",window.btoa||(window.btoa=function(c){for(var d,e,f=String(c),g=0,h=b,i="";f.charAt(0|g)||(h="=",g%1);i+=h.charAt(63&d>>8-g%1*8)){if(e=f.charCodeAt(g+=.75),e>255)throw new a("'btoa' failed: The string to be encoded contains characters outside of the Latin1 range.");d=d<<8|e}return i}),window.atob||(window.atob=function(c){var d=String(c).replace(/=+$/,"");if(d.length%4==1)throw new a("'atob' failed: The string to be decoded is not correctly encoded.");for(var e,f,g=0,h=0,i="";f=d.charAt(h++);~f&&(e=g%4?64*e+f:f,g++%4)?i+=String.fromCharCode(255&e>>(-2*g&6)):0)f=b.indexOf(f);return i})}.apply(b,d),!(void 0!==e&&(a.exports=e))}});webpackJsonpjwplayer([1],{104:function(a,b,c){var d,e;d=[c(45)],e=function(a){function b(a,b){return function(){a.apply(b,arguments)}}function c(a){if("object"!=typeof this)throw new TypeError("Promises must be constructed via new");if("function"!=typeof a)throw new TypeError("not a function");this._state=null,this._value=null,this._deferreds=[],i(a,b(e,this),b(f,this))}function d(a){var b=this;return null===this._state?void this._deferreds.push(a):void j(function(){var c=b._state?a.onFulfilled:a.onRejected;if(null===c)return void(b._state?a.resolve:a.reject)(b._value);var d;try{d=c(b._value)}catch(e){return void a.reject(e)}a.resolve(d)})}function e(a){try{if(a===this)throw new TypeError("A promise cannot be resolved with itself.");if(a&&("object"==typeof a||"function"==typeof a)){var c=a.then;if("function"==typeof c)return void i(b(c,a),b(e,this),b(f,this))}this._state=!0,this._value=a,g.call(this)}catch(d){f.call(this,d)}}function f(a){this._state=!1,this._value=a,g.call(this)}function g(){for(var a=0,b=this._deferreds.length;b>a;a++)d.call(this,this._deferreds[a]);this._deferreds=null}function h(a,b,c,d){this.onFulfilled="function"==typeof a?a:null,this.onRejected="function"==typeof b?b:null,this.resolve=c,this.reject=d}function i(a,b,c){var d=!1;try{a(function(a){d||(d=!0,b(a))},function(a){d||(d=!0,c(a))})}catch(e){if(d)return;d=!0,c(e)}}var j=a.defer,k=Array.isArray||function(a){return"[object Array]"===Object.prototype.toString.call(a)};c.prototype["catch"]=function(a){return this.then(null,a)},c.prototype.then=function(a,b){var e=this;return new c(function(c,f){d.call(e,new h(a,b,c,f))})},c.all=function(){var a=Array.prototype.slice.call(1===arguments.length&&k(arguments[0])?arguments[0]:arguments);return new c(function(b,c){function d(f,g){try{if(g&&("object"==typeof g||"function"==typeof g)){var h=g.then;if("function"==typeof h)return void h.call(g,function(a){d(f,a)},c)}a[f]=g,0===--e&&b(a)}catch(i){c(i)}}if(0===a.length)return b([]);for(var e=a.length,f=0;f<a.length;f++)d(f,a[f])})},c.resolve=function(a){return a&&"object"==typeof a&&a.constructor===c?a:new c(function(b){b(a)})},c.reject=function(a){return new c(function(b,c){c(a)})},c.race=function(a){return new c(function(b,c){for(var d=0,e=a.length;e>d;d++)a[d].then(b,c)})},c._setImmediateFn=function(a){j=a},window.Promise||(window.Promise=c)}.apply(b,d),!(void 0!==e&&(a.exports=e))}});webpackJsonpjwplayer([6],{159:function(a,b,c){var d,e;d=[c(116),c(77),c(73),c(161),c(163),c(160),c(162),c(48),c(62),c(45)],e=function(a,b,c,d,e,f,g,h,i,j){var k=h.noop,l={},m=function(m,n){function o(){return!j.isUndefined(m._instreamAdapter)}function p(a,b){g.log("send command",a,b);var c={command:a};void 0!==b&&(c.args=b),A.sendMessage(g.NS,c,k,function(a){g.log("error message",a),"Invalid namespace"===a.description&&G.stopCasting()})}function q(a){var b=g.available(a.availability);s(b)}function r(a,b){var c=JSON.parse(b);if(!c)throw"Message not proper JSON";if(c.reconcile){E.removeMessageListener(g.NS,this.listenForHandshakeHandler);var d=c.diff,e=E;d.id&&c.appid&&c.pageUrl||(d.id=window.jwplayer().id,c.appid=z.appid,c.pageUrl=C,E=A=null),d.id===n.get("id")&&c.appid===z.appid&&c.pageUrl===C&&(A||(o()&&m.instreamDestroy(),this.sessionStarted(e),this.castModel.set("state",i.IDLE)),this.handleMessage(c)),E=null}}function s(a){var b=!!a;B.available!==b&&(B.available=b,n.set("castAvailable",b))}function t(){return A&&A.receiver?A.receiver.friendlyName:""}function u(a){g.log("Cast Session Error:",a,A);var b=window.chrome;a.code!==b.cast.ErrorCode.CANCEL&&(g.log("Cast Session Error:",a,A),a.code===b.cast.ErrorCode.SESSION_ERROR&&this.stopCasting())}function v(a){var b=window.chrome;a.code!==b.cast.ErrorCode.CANCEL&&(g.log("Cast Session Error:",a,A),a.code===b.cast.ErrorCode.SESSION_ERROR&&this.stopCasting())}function w(a){a/=100,a=Math.max(0,Math.min(a,1)),A.setReceiverVolumeLevel(a,G.mirrorVolume.bind(G),function(a){g.error("set volume error",a)})}function x(a){A.setReceiverMuted(a,G.mirrorVolume.bind(G),function(a){g.error("set muted error",a)})}function y(a,b){function c(a){return function(){b.sendCommand(a)}}return{getContainer:function(){return document.createElement("div")},on:k,onAdPlay:k,onAdSkipped:k,onAdComplete:k,onAdError:k,onCaptionsList:k,onCaptionsChange:k,onPlaylistItem:k,onPlaylistComplete:k,onError:k,onResize:k,onReady:k,onFullscreen:k,getState:k,castToggle:k,setFullscreen:k,setVolume:w,setMute:function(){x(!a.get("mute"))},play:b.play.bind(b),pause:b.pause.bind(b),seek:b.seek.bind(b),playlistNext:c("next"),playlistPrev:c("prev"),load:b.load.bind(b)}}var z,A=null,B={available:!1,active:!1,deviceName:""},C=h.getAbsolutePath(window.location.href),D=null,E=null,F=null;z=j.extend({},l,n.get("cast"));var G=this;this.onExistingSession=function(a){g.log("existing session",a),A||E||(E=a.session,E.addMessageListener(g.NS,this.listenForHandshakeHandler))},this.setActive=function(a){B.active=!!a,B.deviceName=t(),this.castModel.set("castActive",!!a),this.castModel.set("deviceName",t()),this.castModel.set("castState",B)},this.startCasting=function(){if(!A&&!o()){var a=window.chrome;a.cast.requestSession(this.sessionStarted.bind(this),u)}},this.openExtension=function(){if(!o()){var a=window.chrome;a.cast.requestSession(this.sessionStarted.bind(this),v)}},this.stopCasting=function(){return A?(this.removeSessionListeners(),void A.stop(this.sessionStopped.bind(this),this.sessionStopError.bind(this))):void this.sessionStopped()},this.resumePlayback=function(){m.showView(m._view.element()),m.getProvider().name.indexOf("flash")>=0&&n.resetProvider(),m.load(this.castModel.get("item")),m.play()},this.sessionStopError=function(a){g.error("Cast Session Stop error:",a,A),this.sessionStopped()},this.sessionStarted=function(a){if(g.log("Session started:",a),A)this.stopCasting(),F=a;else if(A=a,A.addMessageListener(g.NS,this.onMessageHandler),A.addUpdateListener(this.sessionStatusHandler),this.setupControllerForCasting(),a!==E){var b=f.setupCastConfig(this.castModel,z);D.setup(b),d.sendDummyMedia(a)}},this.sessionStatus=function(a){g.log("Cast Session status",a),a?this.mirrorVolume():(this.castModel.set("state",i.BUFFERING),this.sessionStopped())},this.sessionStopped=function(){g.log("_sessionStopped"),A&&(this.removeSessionListeners(),A=null),D&&(D.destroy(),D=null),this.setActive(!1),null!==F&&(this.sessionStarted(F),F=null),this.resumePlayback()},this.removeSessionListeners=function(){A.removeUpdateListener(this.sessionStatusHandler),A.removeMessageListener(g.NS,this.onMessageHandler)},this.onMessage=function(a,b){var c=JSON.parse(b);if(!c)throw"Message not proper JSON";this.handleMessage(c)},this.handleMessage=function(a){switch(a.type){case"state":this.handleMessageState(a);break;case"ad":this.handleMessageAd(a);break;case"connection":this.handleMessageConnection(a);break;default:g.error("received unhandled message",a.type,a)}},this.handleMessageState=function(a){this.castModel.get("castAdPlaying")&&(a.diff.newstate||a.diff.position)&&this.castModel.set("castAdPlaying",!1),D.updateState(a.diff)},this.handleMessageAd=function(a){this.castModel.set("castAdPlaying",!0),D.updateState(a.diff)},this.handleMessageConnection=function(a){a.closed===!0&&this.stopCasting()},this.mirrorVolume=function(){if(A&&A.receiver){var a=A.receiver.volume;if(a){var b=100*a.level|0,c=!!a.muted;this.castModel.set("mute",c),this.castModel.set("volume",b)}}},this.castToggle=function(){B.active?this.openExtension():this.startCasting()},this.setupControllerForCasting=function(){m.pause(),m.setFullscreen(!1);var d=j.extend(j.pick(n.getConfiguration(),["id","key","edition","playlist","playlistItem","containerWidth","containerHeight","width","height","aspectratio","stretching","compactUI","skin"]),{castAvailable:!0,item:0,state:"playing"}),f=new c(d);f.playlist=j.filter(j.map(f.playlist,function(a){return h=j.extend({},a),h.sources=j.filter(a.allSources,function(a){return"dash"!==a.type}),h}),function(a){return 0!==a.sources.length});var g=new b;this.castModel=g,g.setup(f);var h=g.get("playlist")[0];g.set("playlistItem",h),g.trigger("itemReady",h),g.changeVideoProvider(e),D=g.getVideo(),D.init(p,this.castModel);var i=y(g,D);i.castToggle=function(){this.openExtension()}.bind(this);var k=new a(i,g);k.setup(),m.showView(k.element()),this.mirrorVolume(),this.setActive(!0)},this.onExistingSessionHandler=this.onExistingSession.bind(this),this.sessionStatusHandler=this.sessionStatus.bind(this),this.onMessageHandler=this.onMessage.bind(this),this.listenForHandshakeHandler=r.bind(this),!z.appid||window.cast&&window.cast.receiver||(d.on("availability",q),d.on("session",this.onExistingSessionHandler),d.initialize(z.appid))};return m}.apply(b,d),!(void 0!==e&&(a.exports=e))},160:function(a,b,c){var d,e;d=[c(48),c(45),c(59)],e=function(a,b,c){function d(d,f){var g=b.pick(d.getConfiguration(),["displaytitle","id","item","key","mute","playlist","position","repeat","volume"]);return g.cast=b.extend({pageUrl:h},f),e(g),g.edition=d.get("edition"),g.playerVersion=c,"LIVE"===a.adaptiveType(d.get("duration"))&&"shaka"===d.getVideo().getName().name&&(g.position=0),g}function e(a){var b=a.plugins;delete a.plugins;for(var c in b)if(b.hasOwnProperty(c)){var d=b[c];d.client&&(/[\.\/]/.test(d.client)&&g(d,"client"),d.client.indexOf("vast")>-1&&(a.advertising=f(d)))}}function f(a){var c=b.extend({},a);if(c.client="vast",delete c.companiondiv,c.schedule)for(var d in c.schedule)if(c.schedule.hasOwnProperty(d)){var e=c.schedule[d].ad||c.schedule[d];g(e,"tag")}return g(c,"tag"),c}function g(b,c){b[c]&&(b[c]=a.getAbsolutePath(b[c]))}var h=window.location.href;return{setupCastConfig:d}}.apply(b,d),!(void 0!==e&&(a.exports=e))},161:function(a,b,c){var d,e;d=[c(162),c(46),c(101),c(47),c(45)],e=function(a,b,c,d,e){function f(d){t=d,null!==a.availability?u.trigger("availability",{availability:a.availability}):p&&p.cast?h():n||(n=new c(q),n.addEventListener(b.ERROR,i),n.addEventListener(b.COMPLETE,h),n.load())}function g(a){var b=new p.cast.media.MediaInfo("");b.contentType="video/mp4";var c=new p.cast.media.LoadRequest(b);c.autoplay=!1,a.loadMedia(c)}function h(){p&&p.cast&&p.cast.isAvailable&&!o?(o=new p.cast.ApiConfig(new p.cast.SessionRequest(t),l,m,p.cast.AutoJoinPolicy.ORIGIN_SCOPED),p.cast.initialize(o,k,j)):s++<15&&(r=setTimeout(h,1e3))}function i(){n&&(n.resetEventListeners(),n=null)}function j(){o=null}function k(){}function l(b){u.trigger("session",{session:b}),b.sendMessage(a.NS,{whoami:1}),0===b.media.length&&g(b)}function m(b){a.availability=b,u.trigger("availability",{availability:b})}var n,o,p=window.chrome,q="https://www.gstatic.com/cv/js/sender/v1/cast_sender.js",r=-1,s=0,t=null,u=e.extend({initialize:f,sendDummyMedia:g},d);return u}.apply(b,d),!(void 0!==e&&(a.exports=e))},163:function(a,b,c){var d,e;d=[c(48),c(164),c(46),c(47),c(62),c(45),c(162)],e=function(a,b,c,d,e,f,g){function h(c){var d,e=c.get("castLoading"),f=c.get("playlistItem"),g=f?f.title:"";d=e?g?"Loading "+g+" on ":"Loading on ":g?"Casting "+g+" to ":"Casting to";var h={message:d,deviceName:c.get("deviceName")||"Google Cast"};return a.createElement(b(h))}var i=function(){var b,i=-1,j=a.noop;f.extend(this,d,{lastPosition:0,lastDuration:null}),this.setState=function(a){this.trigger(c.JWPLAYER_PLAYER_STATE,{newstate:a}),this.model.set("state",a)},this.destroy=function(){clearTimeout(i)},this.updateState=function(a){if(a.item){this.setState(e.BUFFERING);var b=this.model.get("playlist"),d=b[a.item];this.model.set("item",a.item),this.model.set("playlistItem",d),this.model.trigger("itemReady",d)}if(void 0!==a.position&&(this.lastPosition=a.position),void 0!==a.duration&&(this.lastDuration=a.duration),a.newstate){var g=a.newstate.toLowerCase();g===e.IDLE&&this.lastPosition&&this.lastPosition===this.lastDuration&&(g=e.COMPLETE),this.setState(g)}if(void 0===a.position&&void 0===a.duration||(this.model.get("state")===e.BUFFERING&&this.setState(e.PLAYING),null!==this.lastDuration&&this.trigger(c.JWPLAYER_MEDIA_TIME,{position:this.lastPosition,duration:this.lastDuration})),void 0!==a.buffer&&this.trigger(c.JWPLAYER_MEDIA_BUFFER,{bufferPercent:a.buffer}),a.tag){this.model.set("adMode",a.complete);var h=["clickthrough","companions","message","podMessage","podCount","sequence","skipMessage","skipText","skipOffset","tag"];f.each(h,function(b){f.isUndefined(a[b])||this.model.set(b,a[b])},this)}},this.supportsFullscreen=function(){return!1},this.init=function(a,b){j=a,this.model=b,this.model.on("itemReady",this.updateScreen,this),this.model.on("change:deviceName",this.updateScreen,this),this._castingScreen=h(this.model)},this.setup=function(a){this.setState(e.BUFFERING),this.sendCommand("setup",a)},this.playlistItem=function(a){this.setState(e.BUFFERING),this.sendCommand("item",a)},this.load=function(a){this.setState(e.BUFFERING),this.sendCommand("load",a)},this.stop=function(){clearTimeout(i),i=setTimeout(function(){this.setState(e.IDLE),this.sendCommand("stop")}.bind(this),0)},this.play=function(){this.sendCommand("play")},this.pause=function(){this.setState(e.PAUSED),this.sendCommand("pause")},this.seek=function(a){this.setState(e.BUFFERING),this.trigger(c.JWPLAYER_MEDIA_SEEK,{position:this.model.get("position"),offset:a}),this.sendCommand("seek",a)},this.skipAd=function(a){this.sendCommand("skipAd",{tag:a.tag})},this.clickAd=function(a){this.sendCommand("clickAd",{tag:a.tag})},this.audioMode=function(){return this.model.get("audioMode")},this.sendCommand=function(a,b){j(a,b)},this.detachMedia=function(){return g.error("detachMedia called while casting"),document.createElement("video")},this.attachMedia=function(){g.error("attachMedia called while casting")},this.updateScreen=function(){b.innerHTML=h(this.model).innerHTML},this.setContainer=function(a){b=a,a.appendChild(this._castingScreen)},this.getContainer=function(){return b},this.remove=function(){b===this._castingScreen.parentNode&&b.removeChild(this._castingScreen)},this.volume=this.mute=this.setControls=this.setCurrentQuality=this.resize=this.seekDrag=this.addCaptions=this.resetCaptions=this.setVisibility=this.fsCaptions=a.noop,this.setFullScreen=this.getFullScreen=this.checkComplete=f.constant(!1),this.getWidth=this.getHeight=this.getCurrentQuality=f.constant(0),this.getQualityLevels=f.constant(["Auto"])};return i.prototype={getName:function(){return{name:"chromecast"}}},i}.apply(b,d),!(void 0!==e&&(a.exports=e))},164:function(a,b,c){var d=c(120);a.exports=(d["default"]||d).template({compiler:[6,">= 2.0.0-beta.1"],main:function(a,b,c,d){var e=this.lambda,f=this.escapeExpression;return'<div class="jw-cast jw-reset" style="display: block;">\n    <div class="jw-cast-label jw-reset">\n        <span class="jw-reset">'+f(e(null!=a?a.message:a,a))+'</span>\n        <span class="jw-cast-name jw-reset">'+f(e(null!=a?a.deviceName:a,a))+"</span>\n    </div>\n</div>"},useData:!0})}});webpackJsonpjwplayer([5],{109:function(a,b,c){var d,e;d=[c(81),c(45),c(55),c(48),c(62),c(46),c(47),c(110)],e=function(a,b,c,d,e,f,g,h){function i(a){function i(){W&&this.state===e.LOADING&&this.setState(e.PLAYING)}function j(a,b){var c,e,f;switch(a){case"urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed":case"edef8ba9-79d6-4ace-a3c8-27dcd51d21ed":return d.isIE()?null:(T="widevine",c="com.widevine.alpha",e=S.widevine,f=e?e.url:"",f||(console.log("No licensing server specified for widevine. Defaulting to proxy."),f="http://widevine-proxy.appspot.com/proxy"),[{keySystem:c,licenseServerUrl:f,licensePreProcessor:function(a){e&&e.customData&&(a.headers.customData=e.customData)}}]);case"urn:mpeg:dash:mp4protection:2011":c="org.w3.clearkey",e=S.clearkey;var g=h.util.Uint8ArrayUtils,i=e?e.key:null,j=b.getAttribute("cenc:default_KID");if(j=j?j.replace(/-/g,""):null,!i||!j)break;j=g.fromHex(j),i=g.fromHex(i);var k={kty:"oct",kid:g.toBase64(j,!1),k:g.toBase64(i,!1)},l={keys:[k]},m=JSON.stringify(l),n={initData:j,initDataType:"webm"};return f="data:application/json;base64,"+window.btoa(m),[{keySystem:c,licenseServerUrl:f,initData:n}];case"urn:uuid:9a04f079-9840-4286-ab92-e65be0885f95":case"9a04f079-9840-4286-ab92-e65be0885f95":return d.isIE()?(T="playready",c="com.microsoft.playready",e=S.playready,f=e?e.url:"",f||(console.log("No licensing server specified for microsoft. Defaulting to proxy."),f="http://microsoft-proxy.appspot.com/proxy"),[{keySystem:c,licenseServerUrl:f,licensePreProcessor:function(a){e&&e.customData&&(a.headers.customData=e.customData)}}]):null;default:return console.log("Unrecognized scheme: "+a,b),null}}function k(a){console.error(a);var b="Unknown playback error";V.trigger(f.JWPLAYER_MEDIA_ERROR,{message:"Error playing file:"+b})}function l(a){switch(a.contentType){case"video":var b={level:{index:V.currentQuality,label:V.currentQuality?a.size.height+"p":"Auto",bitrate:a.bandwidth,width:a.size.width,height:a.size.height},type:"visualQuality"};Y?(b.reason="initial choice",b.mode="auto",Y=!1):a.currentTarget.c.enableAdaptation?b.reason=b.mode="auto":(b.reason="api",b.mode="manual"),V.trigger("visualQuality",b)}}function m(){return this.levels}function n(){return this.currentQuality}function o(a){var b=new h.player.Player(a);return b.addEventListener("error",k),b.addEventListener("adaptation",l),b}function p(a){W&&(d.isAndroid()||a.preload&&"none"!==a.preload)&&r(a)}function q(a){W&&(this.setState(e.LOADING),R!==a?(T=null,Y=!0,r(a)):(Q.currentTime=0,Q.play()))}function r(a){R=a;var b=a.sources[0].file,c=a.starttime;S=a.sources[0].drm||{};var d=new h.util.EWMABandwidthEstimator,e=new h.player.DashVideoSource(b,j,d),f=U.load(e);f.then(s.bind(V)),c&&f.then(function(){this.seek(c)}.bind(V))}function s(){if(W){var a=U.getVideoTracks(),b=U.getAudioTracks();a.length>0?t(a,"video"):t(b,"audio"),V.trigger(f.JWPLAYER_MEDIA_BUFFER_FULL)}}function t(a,c){V.currentQuality=0,V.levels=b.map(a,function(a){var b={contentType:c,label:null,level_id:a.id};return a.height?b.label=a.height+"p":b.label=Math.round(a.bandwidth/1e3)+"kbps",b}),a.length>1&&V.levels.unshift({label:"Auto",level_id:"auto"}),V.trigger(f.JWPLAYER_MEDIA_LEVELS,{levels:V.levels,currentQuality:V.currentQuality})}function u(){return U.isLive()?1/0:Q.duration}function v(){W&&V.trigger(f.JWPLAYER_MEDIA_META,{duration:u(),height:Q.videoHeight,width:Q.videoWidth,drm:T})}function w(){V.setState(e.COMPLETE),X=!1,V.trigger(f.JWPLAYER_MEDIA_COMPLETE)}function x(a,b){return W?g.trigger.call(this,a,b):void 0}function y(){var a=Q;W=!1,U.destroy(),Q=a}function z(){W=!0,U=o(Q),X&&w()}function A(){return X}function B(a){Q.muted=a}function C(){this.setState(e.PAUSED),Q.pause()}function D(){this.setState(e.BUFFERING),Q.play(),this.setVisibility(!0)}function E(a){Q.currentTime=a,this.trigger(f.JWPLAYER_MEDIA_SEEK,{position:Q.currentTime,offset:a})}function F(a){a=!!a,a?c.style(O,{visibility:"visible",opacity:1}):c.style(O,{visibility:"",opacity:0})}function G(){U.unload(),O===Q.parentNode&&O.removeChild(Q)}function H(){Q.pause(),this.setState(e.IDLE)}function I(a){O=a,O.appendChild(Q)}function J(){return O}function K(a){if(a=parseInt(a,10),!(this.currentQuality===a||0>a||a>=this.levels.length)){if(this.currentQuality=a,this.trigger(f.JWPLAYER_MEDIA_LEVEL_CHANGED,{currentQuality:this.currentQuality,levels:this.levels}),0===a)U.configure({enableAdaptation:!0});else{var b=this.levels[a].level_id;U.configure({enableAdaptation:!1});var c;"audio"===this.levels[a].contentType?(c=L(U.getAudioTracks()),c&&c.id===b||(this.setState(e.LOADING),U.selectAudioTrack(b))):(c=L(U.getVideoTracks()),c&&c.id===b||(this.setState(e.LOADING),U.selectVideoTrack(b)))}Q.play()}}function L(a){return b.find(a,function(a){return a.active})}function M(){if(W){var a=Q.currentTime;if(Math.abs(a-this.position)<1&&V.state===e.BUFFERING&&V.setState(e.PLAYING),this.position=a,V.trigger(f.JWPLAYER_MEDIA_TIME,{position:a,duration:u(),quality:1}),a>Q.duration-.1&&Q.duration>1){if(X=!0,V.trigger(f.JWPLAYER_MEDIA_BEFORECOMPLETE),!W)return;w()}}}function N(a){Q.volume=a/100}var O,P=document.getElementById(a),Q=P?P.querySelector("video"):void 0;Q=Q||document.createElement("video");var R,S,T,U=o(Q),V=this,W=!0,X=!1,Y=!0;this.position=0,this.levels=[],this.currentQuality=-1,b.extend(this,g,{init:p,load:q,mute:B,pause:C,getQualityLevels:m.bind(this),getCurrentQuality:n.bind(this),play:D,seek:E,remove:G,setContainer:I,getContainer:J,setCurrentQuality:K.bind(this),setVisibility:F,stop:H,volume:N,trigger:x,attachMedia:z,detachMedia:y,checkComplete:A,supportsFullscreen:b.constant(!0),getName:b.constant({name:"shaka"})}),Q.addEventListener("loadedmetadata",v.bind(this)),Q.addEventListener("timeupdate",M.bind(this)),Q.addEventListener("playing",i.bind(this))}return h.polyfill.installAll(),i.getName=b.constant({name:"shaka"}),{register:function(a){a.api.registerProvider(i)}}}.apply(b,d),!(void 0!==e&&(a.exports=e))},110:function(a,b,c){var d;!function(){var e={};(function(a){function b(a,b){var c=a.split("."),d=Te;c[0]in d||!d.execScript||d.execScript("var "+c[0]);for(var e;c.length&&(e=c.shift());)c.length||void 0===b?d=d[e]?d[e]:d[e]={}:d[e]=b}function c(a,b){function c(){}c.prototype=b.prototype,a.cc=b.prototype,a.prototype=new c,a.prototype.constructor=a,a.bc=function(a,c,d){return b.prototype[c].apply(a,Array.prototype.slice.call(arguments,2))}}function d(){}function e(a){var b=console[a];b?b.bind||(console[a]=function(){b.apply(console,arguments)}):console[a]=function(){}}function f(a){Ve[a]={na:Ue(),end:NaN}}function g(a){(a=Ve[a])&&(a.end=Ue())}function h(a){return(a=Ve[a])&&a.end?a.end-a.na:NaN}function i(a,b,c){this.id=a,this.bandwidth=b||0,this.lang=c||"unknown",this.active=!1}function j(){this.minBandwidth=this.maxBandwidth=this.maxWidth=this.minHeight=this.maxHeight=null}function k(){this.fontSize="100%",this.fontColor=We,this.fontOpacity=Ye,this.backgroundColor=Xe,this.backgroundOpacity=Ye,this.fontEdge=Ze}function l(a){var b=[];b.push("font-size: "+a.fontSize),b.push("color: "+m(a.fontColor,a.fontOpacity)),b.push("background-color: "+m(a.backgroundColor,a.backgroundOpacity));for(var c=[],d=0;d<a.fontEdge.length;++d){var e=a.fontEdge[d].slice(3,6);c.push(m(a.fontEdge[d].slice(0,3),a.fontOpacity)+" "+e.join("px ")+"px")}return b.push("text-shadow: "+c.join(",")),b.join("; ")}function m(a,b){return"rgba("+a.concat(b).join(",")+")"}function n(a,b){this.id=a,this.lang=b||"unknown",this.enabled=this.active=!1}function o(a,b,c,d){this.id=a,this.bandwidth=b||0,this.width=c||0,this.height=d||0,this.active=!1}function p(a,b){var c=a.width*a.height,d=b.width*b.height;return d>c?-1:c>d?1:a.bandwidth<b.bandwidth?-1:a.bandwidth>b.bandwidth?1:0}function q(){var b="CustomEvent"in a;if(b)try{new CustomEvent("")}catch(c){b=!1}b||(a.CustomEvent=r)}function r(a,b){var c=document.createEvent("CustomEvent"),d=b||{bubbles:!1,cancelable:!1,detail:null};return c.initCustomEvent(a,!!d.bubbles,!!d.cancelable,d.detail),c}function s(){var a=Element.prototype;a.requestFullscreen=a.requestFullscreen||a.mozRequestFullScreen||a.msRequestFullscreen||a.webkitRequestFullscreen,a=Document.prototype,a.exitFullscreen=a.exitFullscreen||a.mozCancelFullScreen||a.msExitFullscreen||a.webkitExitFullscreen,"fullscreenElement"in document||Object.defineProperty(document,"fullscreenElement",{get:function(){return document.mozFullScreenElement||document.msFullscreenElement||document.webkitFullscreenElement}}),document.addEventListener("webkitfullscreenchange",t),document.addEventListener("webkitfullscreenerror",t),document.addEventListener("mozfullscreenchange",t),document.addEventListener("mozfullscreenerror",t),document.addEventListener("MSFullscreenChange",t),document.addEventListener("MSFullscreenError",t)}function t(a){var b=a.type.replace(/^(webkit|moz|MS)/,"").toLowerCase(),b=new Event(b,a);a.target.dispatchEvent(b)}function u(){return Promise.reject(Error("The key system specified is not supported."))}function v(a){return null==a?Promise.resolve():Promise.reject(Error("MediaKeys not supported."))}function w(){throw new TypeError("Illegal constructor.")}function x(){throw new TypeError("Illegal constructor.")}function y(a){if(this.c=[],this.b=[],this.ba=$e,a)try{a(this.W.bind(this),this.a.bind(this))}catch(b){this.a(b)}}function z(){a.Promise||(a.Promise=y,a.Promise.resolve=A,a.Promise.reject=B,a.Promise.all=C,a.Promise.race=D,F=a.setImmediate?function(b){a.setImmediate(b)}:function(b){a.setTimeout(b,0)})}function A(a){var b=new y;return b.W(a),b}function B(a){var b=new y;return b.a(a),b}function C(a){function b(a,b,c){a.ba==$e&&(e[b]=c,d++,d==e.length&&a.W(e))}var c=new y;if(!a.length)return c.W([]),c;for(var d=0,e=Array(a.length),f=c.a.bind(c),g=0;g<a.length;++g)a[g].then?a[g].then(b.bind(null,c,g),f):b(c,g,a[g]);return c}function D(a){for(var b=new y,c=b.W.bind(b),d=b.a.bind(b),e=0;e<a.length;++e)a[e].then?a[e].then(c,d):c(a[e]);return b}function E(a,b,c){F(function(){if(c&&"function"==typeof c){try{var a=c(this.wa)}catch(d){return void b.a(d)}a instanceof y?a==b?b.a(new TypeError("Chaining cycle detected")):a.then(b.W.bind(b),b.a.bind(b)):b.W(a)}else 1==this.ba?b.W(this.wa):b.a(this.wa)}.bind(a))}function F(){}function G(){var a=HTMLVideoElement.prototype;!a.getVideoPlaybackQuality&&"webkitDroppedFrameCount"in a&&(a.getVideoPlaybackQuality=H)}function H(){return{droppedVideoFrames:this.webkitDroppedFrameCount,totalVideoFrames:this.webkitDecodedFrameCount,corruptedVideoFrames:0,creationTime:NaN,totalFrameDelay:0}}function I(a,b){for(var c=[],d=0;d<a.length;++d){for(var e=!1,f=0;f<c.length&&!(e=b?b(a[d],c[f]):a[d]===c[f]);++f);e||c.push(a[d])}return c}function J(){return Date.now()+af}function K(a){this.b=a,this.c=0==bf,this.a=0}function L(a){return a.a<a.b.byteLength}function M(a){var b=a.b.getUint8(a.a);return a.a+=1,b}function N(a){var b=a.b.getUint32(a.a,a.c);return a.a+=4,b}function O(a){var b,c;if(a.c?(b=a.b.getUint32(a.a,!0),c=a.b.getUint32(a.a+4,!0)):(c=a.b.getUint32(a.a,!1),b=a.b.getUint32(a.a+4,!1)),c>2097151)throw new RangeError("DataViewReader: Overflow reading 64-bit value.");return a.a+=8,c*Math.pow(2,32)+b}function P(a){if(a.a+16>a.b.byteLength)throw new RangeError("DataViewReader: Read past end of DataView.");var b=new Uint8Array(a.b.buffer,a.a,16);return a.a+=16,b}function Q(a,b){if(a.a+b>a.b.byteLength)throw new RangeError("DataViewReader: Skip past end of DataView.");a.a+=b}function R(a){this.b=a,this.a=new K(a),_e||(_e=[new Uint8Array([255]),new Uint8Array([127,255]),new Uint8Array([63,255,255]),new Uint8Array([31,255,255,255]),new Uint8Array([15,255,255,255,255]),new Uint8Array([7,255,255,255,255,255]),new Uint8Array([3,255,255,255,255,255,255]),new Uint8Array([1,255,255,255,255,255,255,255])])}function S(a){var b;if(b=T(a),7<b.length)throw new RangeError("EbmlParser: EBML ID must be at most 7 bytes.");for(var c=0,d=0;d<b.length;d++)c=256*c+b[d];b=c,c=T(a);a:{for(d=0;d<_e.length;d++)if(Za(c,_e[d])){d=!0;break a}d=!1}if(d)c=a.b.byteLength-a.a.a;else{if(8==c.length&&224&c[1])throw new RangeError("EbmlParser: Variable sized integer value must be at most 53 bits.");for(var d=c[0]&(1<<8-c.length)-1,e=1;e<c.length;e++)d=256*d+c[e];c=d}return c=a.a.a+c<=a.b.byteLength?c:a.b.byteLength-a.a.a,d=new DataView(a.b.buffer,a.b.byteOffset+a.a.a,c),Q(a.a,c),new U(b,d)}function T(a){var b,c=M(a.a);for(b=1;8>=b&&!(c&1<<8-b);b++);if(b>8)throw new RangeError("EbmlParser: Variable sized integer must fit within 8 bytes.");var d=new Uint8Array(b);for(d[0]=c,c=1;b>c;c++)d[c]=M(a.a);return d}function U(a,b){this.id=a,this.a=b}function V(a){if(8<a.a.byteLength)throw new RangeError("EbmlElement: Unsigned integer has too many bytes.");if(8==a.a.byteLength&&224&a.a.getUint8(0))throw new RangeError("EbmlParser: Unsigned integer must be at most 53 bits.");for(var b=0,c=0;c<a.a.byteLength;c++)var d=a.a.getUint8(c),b=256*b+d;return b}function W(a){this.c=Math.exp(Math.log(.5)/a),this.a=this.b=0}function X(a){return a.b/(1-Math.pow(a.c,a.a))}function Y(a){var b,c=new CustomEvent(a.type,{detail:a.detail,bubbles:!!a.bubbles});for(b in a)b in c||(c[b]=a[b]);return c}function Z(a){return new CustomEvent("error",{detail:a,bubbles:!0})}function $(a,b,c){return _(b),_(c),c==b||a>=df&&c==b.split("-")[0]||a>=ef&&c.split("-")[0]==b.split("-")[0]}function _(a){a=a.toLowerCase().split("-");var b=ff[a[0]];return b&&(a[0]=b),a.join("-")}function aa(a){return Object.keys(a).map(function(b){return a[b]})}function ba(a,b){return ea(a,b,"boolean")}function ca(a,b){var c=ea(a,b,"number");if(null==c)return null;if(isNaN(c)||c==Number.NEGATIVE_INFINITY||c==Number.POSITIVE_INFINITY)throw new RangeError("'"+b+"' must be finite.");if(0>c)throw new RangeError("'"+b+"' must be >= 0");return c}function da(a,b){return ea(a,b,"string")}function ea(a,b,c){if(a=a[b],null==a)return null;if(typeof a!=c)throw new TypeError("'"+b+"' must be a "+c+".");return a}function fa(a,b,c){if(a=a[b],null==a)return null;if(!(a instanceof c))throw new TypeError("'"+b+"' must be an instance of "+c.name+".");return a}function ga(){this.a={}}function ha(a){var b,c=[];for(b in a.a)c.push.apply(c,a.a[b]);return c}function ia(a,b,c){if(a=a.a[b])for(b=0;b<a.length;++b)a[b]==c&&(a.splice(b,1),--b)}function ja(a){var b,c=[];for(b in a.a)c.push(b);return c}function ka(){this.a=new ga}function la(a,b,c,d){b=new na(b,c,d),a.a.push(c,b)}function ma(a){for(var b=ha(a.a),c=0;c<b.length;++c)b[c].sa();a.a.a={}}function na(a,b,c){this.target=a,this.type=b,this.a=c,this.target.addEventListener(b,c,!1)}function oa(a){this.ya=new ga,this.v=a}function pa(a,b){b.currentTarget=a;for(var c=a.ya.get(b.type)||[],d=0;d<c.length;++d){var e=c[d];try{e.handleEvent?e.handleEvent(b):e.call(a,b)}catch(f){}}return a.v&&b.bubbles&&pa(a.v,b),b.defaultPrevented}function qa(){oa.call(this,null),this.a=new W(3),this.c=new W(10),this.b=0}function ra(){var a,b,c=new Promise(function(c,d){a=c,b=d});return c.resolve=a,c.reject=b,c.destroy=ra.prototype.destroy,c}function sa(a){return a.split("").reduce(function(a,b,c){return a+(c&&0==c%4?" "+b:b)})}function ta(){this.g=new ra,this.f=!1,this.a=null,this.b=[],this.c=null}function ua(a,b){if(a.f)throw Error("Cannot append to a running task!");a.b.push(b)}function va(a,b){var c,d=a.b[0](b);d?(c=d[0],a.c=d[1]):(c=Promise.resolve(),a.c=null),c.then(xa(a,function(a){this.a?(this.b=[],this.c=null,wa(this)):(this.b.shift(),this.b.length?va(this,a):(this.g.resolve(a),this.c=null))}))["catch"](xa(a,function(a){this.b=[],this.c=null,this.a?wa(this):this.g.reject(a)}))}function wa(b){var c=Error("Task aborted.");c.type="aborted",b.g.reject(c),a.setTimeout(function(){this.a.resolve(),this.a=null}.bind(b),5)}function xa(a,b){return b.bind(a)}function ya(a,b){oa.call(this,b),this.a=null,this.h=a}function za(b){if(!a.indexedDB)return b=Error("Persistant storage requires IndexedDB support."),b.type="storage",Promise.reject(b);if(b.a)return b=Error("A database connection is already open."),b.type="storage",Promise.reject(b);var c=new ra,d=a.indexedDB.open("content_database",1);return d.onupgradeneeded=xa(b,function(a){this.a=a.target.result,Ba(this,"group_store",{keyPath:"group_id"}),Ba(this,"stream_index_store",{keyPath:"stream_id"}),a=Ba(this,"content_store",{autoIncrement:"true"}),a.createIndex("segment",["stream_id","segment_id"],{unique:!0}),a.createIndex("stream","stream_id",{unique:!1})}),d.onsuccess=xa(b,function(a){this.a=a.target.result,c.resolve()}),d.onerror=function(){c.reject(d.error)},c}function Aa(a){a.a&&(a.a.close(),a.a=null)}function Ba(a,b,c){return a.a.objectStoreNames.contains(b)&&a.a.deleteObjectStore(b),a.a.createObjectStore(b,c)}function Ca(a){return Fa(a,"content_store")}function Da(a){return Fa(a,"stream_index_store")}function Ea(a){return Fa(a,"group_store")}function Fa(a,b){return a.a.transaction([b],a.h).objectStore(b)}function Ga(a,b){var c=new ra,d=a.get(b);return d.onerror=function(){c.reject(d.error)},d.onsuccess=function(){if(d.result)c.resolve(d.result);else{var a=Error("Item not found.");a.type="storage",c.reject(a)}},c}function Ha(){ya.call(this,"readonly",null)}function Ia(a){var b=new ra,c=[],d=Ea(a).openCursor();return d.onerror=function(){b.reject(d.error)},d.onsuccess=function(a){(a=a.target.result)?(c.push(a.key),a["continue"]()):b.resolve(c)},b}function Ja(a,b){return Ga(Ea(a),b).then(xa(a,function(a){return a.session_ids=I(a.session_ids),a.hasOwnProperty("duration")||a.hasOwnProperty("key_system")?Promise.resolve(a):Ka(this,a.stream_ids[0]).then(function(b){return a.duration=b.duration,a.key_system=b.key_system,a.license_server=b.license_server,a.with_credentials=b.with_credentials,a.distinctive_identifier=b.distinctive_identifier,a.audio_robustness=b.audio_robustness,a.video_robustness=b.video_robustness,Promise.resolve(a)})}))}function Ka(a,b){return Ga(Da(a),b)}function La(a,b,c){return Ga(Ca(a).index("segment"),[b,c]).then(function(a){return Promise.resolve(a.content)})}function Ma(a,b,c){MediaSource.isTypeSupported(b),b=a.addSourceBuffer(b),this.v=a,this.c=b,this.l=c,this.i=new ka,this.g=null,this.b=[],this.w=0,this.f=this.a=null,this.u=0,la(this.i,this.c,"updateend",this.B.bind(this))}function Na(a,b){for(var c=a.c.buffered,d=0;d<c.length;++d){var e=c.start(d)-gf,f=c.end(d)+gf;if(b>=e&&f>=b)return c.end(d)-b}return 0}function Oa(a,b,c,d){if(a.a)return a=Error("Cannot fetch ("+a.j+"): previous operation not complete."),a.type="stream",Promise.reject(a);a.a=new ta,c!=a.c.timestampOffset&&(a.c.timestampOffset=c),"idb"!=b.url.b[0].P||a.g||(a.g=new Ha,ua(a.a,function(){return[za(this.g)]}.bind(a))),d&&ua(a.a,function(){return[Ta(this,d),this.h.bind(this)]}.bind(a)),ua(a.a,function(){var a=b.a?b.a-b.b:1,c=new tc;return c.a=3,c.h=1e3*a,c.c=1e3*this.u,c.i=this.g,[Bc(b.url,c,this.l),zc.prototype.g.bind(b.url)]}.bind(a)),ua(a.a,xa(a,function(a){return this.l.getBandwidth(),[Ta(this,a),this.h.bind(this)]}));var e=0==a.c.buffered.length&&0==a.b.length,f=null;return ua(a.a,function(){if(0==this.c.buffered.length){var a=Error("Failed to buffer segment ("+this.j+").");return a.type="stream",[Promise.reject(a)]}e&&(a=b.b,f=this.c.buffered.start(0)-a),a=Mc(this.b,b.b),a>=0?this.b.splice(a+1,0,b):this.b.push(b)}.bind(a)),Sa(a).then(function(){return Promise.resolve(f)}.bind(a))}function Pa(a){return a.a?(a=Error("Cannot clear ("+a.j+"): previous operation not complete."),a.type="stream",Promise.reject(a)):(a.a=new ta,ua(a.a,function(){var a;a:if(0==this.c.buffered.length)a=Promise.resolve();else{try{this.c.remove(0,Number.POSITIVE_INFINITY)}catch(b){a=Promise.reject(b);break a}this.b=[],a=this.f=new ra}return[a,this.h.bind(this)]}.bind(a)),Sa(a))}function Qa(a,b){if(a.a){var c=Error("Cannot clearAfter ("+a.j+"): previous operation not complete.");return c.type="stream",Promise.reject(c)}return a.a=new ta,ua(a.a,function(){return[Ua(this,b),this.h.bind(this)]}.bind(a)),Sa(a)}function Ra(a){return a.a?(a=a.a,a.a?a=a.a:a.f?(a.c&&a.c(),a.a=new ra,a=a.a):(a.f=!0,a=Promise.resolve())):a=Promise.resolve(),a}function Sa(a){return a.a.start(),a.a.g.then(xa(a,function(){this.a=null}))["catch"](xa(a,function(a){return this.a=null,Promise.reject(a)}))}function Ta(a,b){try{a.c.appendBuffer(b)}catch(c){return Promise.reject(c)}return a.f=new ra,a.f}function Ua(a,b){if(0==a.c.buffered.length)return Promise.resolve();var c=Mc(a.b,b);if(-1==c||c==a.b.length-1)return Promise.resolve();try{a.c.remove(a.b[c+1].b,Number.POSITIVE_INFINITY)}catch(d){return Promise.reject(d)}return a.b=a.b.slice(0,c+1),a.f=new ra,a.f}function Va(a){return String.fromCharCode.apply(null,a)}function Wa(a){for(var b=new Uint8Array(a.length),c=0;c<a.length;++c)b[c]=a.charCodeAt(c);return b}function Xa(b){return Wa(a.atob(b.replace(/-/g,"+").replace(/_/g,"/")))}function Ya(a){for(var b="",c=0;c<a.length;++c){var d=a[c].toString(16);1==d.length&&(d="0"+d),b+=d}return b}function Za(a,b){if(!a&&!b)return!0;if(!a||!b||a.length!=b.length)return!1;for(var c=0;c<a.length;++c)if(a[c]!=b[c])return!1;return!0}function $a(){this.h=this.a="",this.i=!1,this.u=this.l=null,this.v=this.g=!1,this.j=this.f="",this.c=null,this.b=[]}function _a(a){var b=new $a;if(!a)return b;var c=da(a,"keySystem");if(null==c)throw Error("'keySystem' cannot be null.");b.a=c;var d=da(a,"licenseServerUrl");if(null!=d)b.h=d;else if(c)throw Error("For encrypted streaming content, 'licenseServerUrl' cannot be null or empty.");if(c=ba(a,"withCredentials"),null!=c&&(b.i=c),c=fa(a,"licensePostProcessor",Function),null!=c&&(b.l=c),c=fa(a,"licensePreProcessor",Function),null!=c&&(b.u=c),c=ba(a,"distinctiveIdentifierRequired"),null!=c&&(b.g=c),c=ba(a,"persistentStateRequired"),null!=c&&(b.v=c),c=da(a,"audioRobustness"),null!=c&&(b.f=c),c=da(a,"videoRobustness"),null!=c&&(b.j=c),c=fa(a,"serverCertificate",Uint8Array),null!=c&&(b.c=c),c=fa(a,"initData",Object)){if(a=fa(c,"initData",Uint8Array),null==a)throw Error("'initData.initData' cannot be null.");if(c=da(c,"initDataType"),null==c)throw Error("'initData.initDataType' cannot be null.");b.b.push({initData:new Uint8Array(a.buffer),initDataType:c})}return b}function ab(a,b){var c=a.b.concat(b.map(function(a){return{initData:new Uint8Array(a.initData.buffer),initDataType:a.initDataType}}));a.b=I(c,bb)}function bb(a,b){return a.initDataType==b.initDataType&&Za(a.initData,b.initData)}function cb(a,b){try{var c=new eb(a,b);return Promise.resolve(c)}catch(d){return Promise.reject(d)}}function db(a){var b=this.mediaKeys;return b&&b!=a&&gb(b,null),delete this.mediaKeys,(this.mediaKeys=a)&&gb(a,this),Promise.resolve()}function eb(a,b){this.a=this.keySystem=a;var c=!0;"org.w3.clearkey"==a&&(this.a="webkit-org.w3.clearkey",c=!1);var d,e=!1;d=document.getElementsByTagName("video"),d=d.length?d[0]:document.createElement("video");for(var f=0;f<b.length;++f){var g=b[f],h={audioCapabilities:[],videoCapabilities:[],persistentState:"optional",distinctiveIdentifier:"optional",initDataTypes:g.initDataTypes,sessionTypes:["temporary"]},i=!1;if(g.audioCapabilities)for(var j=0;j<g.audioCapabilities.length;++j){var k=g.audioCapabilities[j];k.contentType&&(i=!0,d.canPlayType(k.contentType.split(";")[0],this.a)&&(h.audioCapabilities.push(k),e=!0))}if(g.videoCapabilities)for(j=0;j<g.videoCapabilities.length;++j)k=g.videoCapabilities[j],k.contentType&&(i=!0,d.canPlayType(k.contentType,this.a)&&(h.videoCapabilities.push(k),e=!0));if(i||(e=d.canPlayType("video/mp4",this.a)||d.canPlayType("video/webm",this.a)),"required"==g.persistentState&&(c?(h.persistentState="required",h.sessionTypes=["persistent-license"]):e=!1),e)return void(this.b=h)}throw c="Unsupported keySystem","org.w3.clearkey"!=a&&"com.widevine.alpha"!=a||(c="None of the requested configurations were supported."),c=Error(c),c.name="NotSupportedError",c.code=DOMException.NOT_SUPPORTED_ERR,c}function fb(a){this.g=a,this.b=null,this.a=new ka,this.c=[],this.f={}}function gb(a,b){a.b=b,ma(a.a),b&&(la(a.a,b,"webkitneedkey",a.Rb.bind(a)),la(a.a,b,"webkitkeymessage",a.Qb.bind(a)),la(a.a,b,"webkitkeyadded",a.Ob.bind(a)),la(a.a,b,"webkitkeyerror",a.Pb.bind(a)))}function hb(a,b){var c=a.f[b];return c?c:(c=a.c.shift())?(c.sessionId=b,a.f[b]=c):null}function ib(a,b,c){oa.call(this,null),this.f=a,this.h=!1,this.a=this.b=null,this.c=b,this.g=c,this.sessionId="",this.expiration=NaN,this.closed=new ra,this.keyStatuses=new mb}function jb(a,b,c){if(a.h)return Promise.reject(Error("The session is already initialized."));a.h=!0;var d;try{if("persistent-license"==a.g)if(c)d=Wa("LOAD_SESSION|"+c);else{var e=new Uint8Array(b);d=Wa("PERSISTENT|"+Va(e))}else d=new Uint8Array(b)}catch(f){return Promise.reject(f)}a.b=new ra;try{a.f.webkitGenerateKeyRequest(a.c,d)}catch(g){if("InvalidStateError"!=g.name)return a.b=null,Promise.reject(g);setTimeout(function(){try{this.f.webkitGenerateKeyRequest(this.c,d)}catch(a){this.b.reject(a),this.b=null}}.bind(a),10)}return a.b}function kb(a,b){a.keyStatuses.Ma(b);var c=Y({type:"keystatuseschange"});a.dispatchEvent(c)}function lb(a){this.b=a,this.a=0}function mb(){this.size=0,this.a=void 0}function nb(a){this.systemIds=[],this.cencKeyIds=[],this.a=[],a=new K(new DataView(a.buffer));try{for(;L(a);){var b=a.a,c=N(a),d=N(a);if(1==c?c=O(a):0==c&&(c=a.b.byteLength-b),1886614376!=d)Q(a,c-(a.a-b));else{var e=M(a);if(e>1)Q(a,c-(a.a-b));else{Q(a,3);var f=Ya(P(a)),g=[];if(e>0)for(var h=N(a),i=0;h>i;++i){var j=Ya(P(a));g.push(j)}var k=N(a);Q(a,k),this.cencKeyIds.push.apply(this.cencKeyIds,g),this.systemIds.push(f),this.a.push({start:b,end:a.a-1}),a.a!=b+c&&Q(a,c-(a.a-b))}}}}catch(l){}}function ob(a,b){try{var c=new pb(a,b);return Promise.resolve(c)}catch(d){return Promise.reject(d)}}function pb(a,b){this.keySystem=a;for(var c=!1,d=0;d<b.length;++d){var e=b[d],f={audioCapabilities:[],videoCapabilities:[],persistentState:"optional",distinctiveIdentifier:"optional",initDataTypes:e.initDataTypes,sessionTypes:["temporary"]},g=!1;if(e.audioCapabilities)for(var h=0;h<e.audioCapabilities.length;++h){var i=e.audioCapabilities[h];if(i.contentType){var g=!0,j=i.contentType.split(";")[0];MSMediaKeys.isTypeSupported(this.keySystem,j)&&(f.audioCapabilities.push(i),c=!0)}}if(e.videoCapabilities)for(h=0;h<e.videoCapabilities.length;++h)i=e.videoCapabilities[h],i.contentType&&(g=!0,j=i.contentType.split(";")[0],MSMediaKeys.isTypeSupported(this.keySystem,j)&&(f.videoCapabilities.push(i),c=!0));if(g||(c=MSMediaKeys.isTypeSupported(this.keySystem,"video/mp4")),"required"==e.persistentState&&(f.persistentState="required",f.sessionTypes=["persistent-license"]),c)return void(this.a=f)}throw c=Error("Unsupported keySystem"),c.name="NotSupportedError",c.code=DOMException.NOT_SUPPORTED_ERR,c}function qb(a){var b=this.mediaKeys;return b&&b!=a&&sb(b,null),delete this.mediaKeys,(this.mediaKeys=a)?sb(a,this):Promise.resolve()}function rb(a){this.a=new MSMediaKeys(a),this.b=new ka}function sb(a,b){function c(){b.msSetMediaKeys(d.a),b.removeEventListener("loadedmetadata",c)}if(ma(a.b),!b)return Promise.resolve();la(a.b,b,"msneedkey",ub);var d=a;try{return 1<=b.readyState?b.msSetMediaKeys(a.a):b.addEventListener("loadedmetadata",c),Promise.resolve()}catch(e){return Promise.reject(e)}}function tb(a){oa.call(this,null),this.c=null,this.g=a,this.b=this.a=null,this.f=new ka,this.sessionId="",this.expiration=NaN,this.closed=new ra,this.keyStatuses=new yb}function ub(a){var b=a.initData;if(b){var c=new nb(b);if(1>=c.a.length)a=b;else{var d=[];for(a=0;a<c.a.length;a++)d.push(b.subarray(c.a[a].start,c.a[a].end+1));for(b=I(d,vb),a=c=0;a<b.length;a++)c+=b[a].length;for(c=new Uint8Array(c),a=d=0;a<b.length;a++)c.set(b[a],d),d+=b[a].length;a=c}}else a=b;a=Y({type:"encrypted",initDataType:"cenc",initData:a}),this.dispatchEvent(a)}function vb(a,b){return Za(a,b)}function wb(a,b){a.keyStatuses.Ma(b);var c=Y({type:"keystatuseschange"});a.dispatchEvent(c)}function xb(a){this.b=a,this.a=0}function yb(){this.size=0,this.a=void 0}function zb(){Navigator.prototype.requestMediaKeySystemAccess&&MediaKeySystemAccess.prototype.getConfiguration||(HTMLMediaElement.prototype.webkitGenerateKeyRequest?(hf=new Uint8Array([0]),Navigator.prototype.requestMediaKeySystemAccess=cb,delete HTMLMediaElement.prototype.mediaKeys,HTMLMediaElement.prototype.mediaKeys=null,HTMLMediaElement.prototype.setMediaKeys=db,a.MediaKeys=fb,a.MediaKeySystemAccess=eb):a.MSMediaKeys?(jf=new Uint8Array([0]),delete HTMLMediaElement.prototype.mediaKeys,HTMLMediaElement.prototype.mediaKeys=null,HTMLMediaElement.prototype.setMediaKeys=qb,a.MediaKeys=rb,a.MediaKeySystemAccess=pb,Navigator.prototype.requestMediaKeySystemAccess=ob):(Navigator.prototype.requestMediaKeySystemAccess=u,delete HTMLMediaElement.prototype.mediaKeys,HTMLMediaElement.prototype.mediaKeys=null,HTMLMediaElement.prototype.setMediaKeys=v,a.MediaKeys=w,a.MediaKeySystemAccess=x))}function Ab(a){var b;a instanceof Ab?(Bb(this,a.P),this.ca=a.ca,this.S=a.S,Cb(this,a.ia),this.O=a.O,Db(this,a.a.clone()),this.aa=a.aa):a&&(b=String(a).match(kf))?(Bb(this,b[1]||"",!0),this.ca=Eb(b[2]||""),this.S=Eb(b[3]||"",!0),Cb(this,b[4]),this.O=Eb(b[5]||"",!0),Db(this,b[6]||"",!0),this.aa=Eb(b[7]||"")):this.a=new Hb(null)}function Bb(a,b,c){a.P=c?Eb(b,!0):b,a.P&&(a.P=a.P.replace(/:$/,""))}function Cb(a,b){if(b){if(b=Number(b),isNaN(b)||0>b)throw Error("Bad port number "+b);a.ia=b}else a.ia=null}function Db(a,b,c){b instanceof Hb?a.a=b:(c||(b=Fb(b,of)),a.a=new Hb(b))}function Eb(a,b){return a?b?decodeURI(a):decodeURIComponent(a):""}function Fb(a,b,c){return"string"==typeof a?(a=encodeURI(a).replace(b,Gb),c&&(a=a.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),a):null}function Gb(a){return a=a.charCodeAt(0),"%"+(a>>4&15).toString(16)+(15&a).toString(16)}function Hb(a){this.b=a||null}function Ib(a,b,c){if(!a.a&&(a.a={},a.c=0,a.b))for(var d=a.b.split("&"),e=0;e<d.length;e++){var f=d[e].indexOf("="),g=null,h=null;f>=0?(g=d[e].substring(0,f),h=d[e].substring(f+1)):g=d[e],g=decodeURIComponent(g.replace(/\+/g," ")),h=h||"",Ib(a,g,decodeURIComponent(h.replace(/\+/g," ")))}a.b=null,(d=a.a.hasOwnProperty(b)&&a.a[b])||(a.a[b]=d=[]),d.push(c),a.c++}function Jb(){this.id=this.url=null,this.type="static",this.b=this.j=this.s=null,this.h=5,this.f=this.c=this.g=null,this.i=1,this.a=[]}function Kb(){this.g=this.f=this.c=this.s=this.a=this.start=this.id=null,this.b=[]}function Lb(){this.i=this.b=this.height=this.width=this.contentType=this.lang=this.group=this.id=null,this.c=!1,this.h=this.g=this.f=this.s=null,this.j=[],this.a=[]}function Mb(){this.value=null}function Nb(){this.contentType=this.lang=this.id=null}function Ob(){this.a=this.b=this.g=this.s=this.h=this.f=this.height=this.width=this.bandwidth=this.lang=this.id=null,this.c=[]}function Pb(){this.b=this.a=this.c=this.f=null}function Qb(){this.parsedPssh=this.psshBox=null}function Rb(){this.url=null}function Sb(){this.url=null}function Tb(){this.s=null,this.g=1,this.c=this.b=this.a=this.f=null}function Ub(){this.a=this.url=null}function Vb(){this.a=this.url=null}function Wb(){this.s=null,this.f=1,this.b=this.g=null,this.i=1,this.h=null,this.a=[],this.c=null}function Xb(){this.a=this.b=null}function Yb(){this.a=1,this.b=this.i=null,this.j=1,this.c=this.g=this.f=this.h=null}function Zb(){this.a=[]}function $b(){this.c=this.a=this.b=null}function _b(a,b){this.na=a,this.end=b}function ac(a){for(var b=[],c=0;c<a.b.length;++c){var d=a.b[c];null!=d.group&&(b[d.group]=!0)}for(c=0;c<a.b.length;++c)if(d=a.b[c],null==d.group){for(var e=1;1==b[e];)++e;b[e]=!0,d.group=e}}function bc(a,b){if(!b||0===b.length)return a;for(var c=[],d=0;d<b.length;d++){var e=b[d].url;null==a||0===a.length?c.push(new Ab(e)):(e=cc(a.slice(0,1),e),c.push(e[0]))}return c}function cc(a,b){if(!b)return a;var c=new Ab(b);return a?a.map(function(a){return a.resolve(c)}):[c]}function dc(a,b,c){var d=jc(c);return(b=fc(b,c.constructor.TAG_NAME))&&d.parse(a,b),d}function ec(a,b,c){var d=null;return(b=fc(b,c.TAG_NAME))&&(d=new c,d.parse(a,b)),d}function fc(a,b){for(var c=null,d=0;d<a.childNodes.length;d++)if(a.childNodes[d].tagName==b){if(c)return null;c=a.childNodes[d]}return c}function gc(a,b,c){for(var d=[],e=0;e<b.childNodes.length;e++)if(b.childNodes[e].tagName==c.TAG_NAME){var f=new c;f.parse.call(f,a,b.childNodes[e]),d.push(f)}return d;
}function hc(a){return a=a.firstChild,a.nodeType!=Node.TEXT_NODE?null:a.nodeValue}function ic(a){return a?a.map(function(a){return a.clone()}):null}function jc(a){return a?a.clone():null}function kc(a,b,c,d){return a=c(a.getAttribute(b)),null!=a?a:void 0!==d?d:null}function lc(a){return a?(a=Date.parse(a),isNaN(a)?null:Math.floor(a/1e3)):null}function mc(b){if(!b)return null;var c=/^P(?:([0-9]*)Y)?(?:([0-9]*)M)?(?:([0-9]*)D)?(?:T(?:([0-9]*)H)?(?:([0-9]*)M)?(?:([0-9.]*)S)?)?$/.exec(b);if(!c)return null;b=0;var d=qc(c[1]);return d&&(b+=31536e3*d),(d=qc(c[2]))&&(b+=2592e3*d),(d=qc(c[3]))&&(b+=86400*d),(d=qc(c[4]))&&(b+=3600*d),(d=qc(c[5]))&&(b+=60*d),c=a.parseFloat(c[6]),(c=isNaN(c)?null:c)&&(b+=c),b}function nc(a){var b=/([0-9]+)-([0-9]+)/.exec(a);return b?(a=qc(b[1]),null==a?null:(b=qc(b[2]),null==b?null:new _b(a,b))):null}function oc(b){return b=a.parseInt(b,10),isNaN(b)?null:b}function pc(b){return b=a.parseInt(b,10),b>0?b:null}function qc(b){return b=a.parseInt(b,10),b>=0?b:null}function rc(a){return a}function sc(a,b){this.url=a,this.b=b||new tc,this.g=this.i=this.h=0,this.a=null,this.c=new ra,this.f=null}function tc(){this.body=null,this.a=1,this.h=1e3,this.c=0,this.method="GET",this.f="arraybuffer",this.b={},this.g=this.j=!1,this.i=null}function uc(a){vc(a),a.b.body=null,a.c.destroy(),a.c=null,a.f=null}function vc(a){a.a&&(a.a.onload=null,a.a.onreadystatechange=null,a.a.onerror=null,a.a.ontimeout=null),a.a=null}function wc(a){var b=a.url.split("/");return La(a.b.i,parseInt(b[2],10),parseInt(b[3],10)).then(xa(a,function(a){var b=JSON.parse(JSON.stringify(new XMLHttpRequest));return b.response=a,a=this.c,a.resolve(b),uc(this),a}))["catch"](xa(a,function(a){return uc(this),Promise.reject(a)}))}function xc(a,b,c){return b=Error(b),b.type=c,b.status=a.a.status,b.url=a.url,b.method=a.b.method,b.body=a.b.body,b.ac=a.a,b}function yc(b){vc(b),a.setTimeout(b.rb.bind(b),b.g*(1+.5*(2*Math.random()-1))),b.g*=2}function zc(a,b,c,d){this.b=b,this.f=c||0,this.h=null!=d?d:null,this.c=this.a=null,this.i=a}function Ac(a,b){return a&&0!==a.length?a.map(function(a){return a.resolve(b)}):[b]}function Bc(a,b,c){return a.a?a.a:(b=b||new tc,(a.f||a.h)&&(b.b.Range="bytes="+(a.f+"-"+(null!=a.h?a.h:""))),a.a=Cc(a,0,b,c),a.a)}function Cc(a,b,c,d){var e=a.b[b].toString();return a.i&&(e=a.i(e,c.b)||e),a.c=new sc(e,c),d&&(a.c.f=d),e=a.c.rb().then(xa(a,function(a){return this.c=this.a=null,Promise.resolve(a.response)})),e=e["catch"](xa(a,function(a){return this.a&&b+1<this.b.length?this.a=Cc(this,b+1,c,d):(this.a=this.c=null,Promise.reject(a))}))}function Dc(a,b){this.a=new tc,this.a.f="text",this.a.a=3,this.a.c=1e3*(null!=b?b:0),this.a.g=!0,this.b=a}function Ec(a){var b=a.b;return Bc(b,a.a).then(function(a){var c;return c=b.b,(c=(a=(new DOMParser).parseFromString(a,"text/xml"))?ec({s:c},a,Jb):null)?Promise.resolve(c):(c=Error("MPD parse failure."),c.type="dash",Promise.reject(c))})}function Fc(a,b,c,d){for(var e=b.a,f=[],g=0;d>g;++g){var h=g+c,i=(h-1)*e.b,j=i/e.a,k=(i+e.b)/e.a,h=Gc(a,b,e.j+h-1,i);if(!h)return null;f.push(new Kc(j,k,h))}return f}function Gc(a,b,c,d){if(!b.a)return null;var e=b.a.h;return e?(c=Hc(e,b.id,c,b.bandwidth,d))?(b=Ac(b.s,c),new zc(a,b,0,null)):null:b.s?new zc(a,b.s,0,null):null}function Hc(b,c,d,e,f){var g={RepresentationID:c,Number:d,Bandwidth:e,Time:f};b=b.replace(/\$(RepresentationID|Number|Bandwidth|Time)?(?:%0([0-9]+)d)?\$/g,function(b,c,d){if("$$"==b)return"$";var e=g[c];return null==e?b:("RepresentationID"==c&&d&&(d=void 0),b=e.toString(),d=a.parseInt(d,10)||1,d=Math.max(0,d-b.length),Array(d+1).join("0")+b)});try{return new Ab(b)}catch(h){if(h instanceof URIError)return null;throw h}}function Ic(a,b,c){var d=0;b*=c,a=a.a,c=[];for(var e=0;e<a.length&&a[e].a;++e){var f=a[e].b,f=null!=f?f:d,g=a[e].c||0;0>g&&(g=a[e].a,g=e+1===a.length?Math.ceil((a[0].b+b-f)/g)-1:Math.ceil((a[e+1].b-f)/g)-1),0<c.length&&f!=d&&(c[c.length-1].end=f);for(var h=0;g>=h;++h)d=f+a[e].a,c.push({start:f,end:d}),f=d}return c}function Jc(a,b){this.a=a,this.b=b||null}function Kc(a,b,c){this.b=a,this.a=b,this.url=c}function Lc(a,b,c){return new Kc(b,c,a.url)}function Mc(a,b){for(var c=a.length-1;c>=0;--c){var d=a[c];if(b>=d.b&&(null==d.a||b<d.a))return c}return-1}function Nc(a,b){return a.map(function(a){return Lc(a,a.b+b,null!=a.a?a.a+b:null)})}function Oc(){}function Pc(a){this.o=a,this.i=0}function Qc(a){if(0==a.o.length)throw new RangeError("SegmentIndex: There is no first SegmentReference.");return a.o[0]}function Rc(a,b){if(a.i!=b.i&&(b=new Pc(Nc(b.o,a.i-b.i))),0==a.length())a.o=b.o.slice(0);else if(0!=b.length()&&null!=a.A().a&&!(null!=b.A().a&&b.A().a<a.A().a)){if(a.A().a<=Qc(b).b)var c=Lc(a.A(),a.A().b,Qc(b).b),c=a.o.slice(0,-1).concat([c]);else{var d;for(d=0;d<a.o.length&&!(a.o[d].a>=Qc(b).b);++d);a.o[d].b<Qc(b).b?(c=Lc(a.o[d],a.o[d].b,Qc(b).b),c=a.o.slice(0,d).concat([c])):(Qc(a).b>Qc(b).b||Qc(b),c=a.o.slice(0,d))}a.o=c.concat(b.o)}}function Sc(a,b,c,d){Pc.call(this,a),this.g=b,this.w=c,this.f=d,this.h=this.g.b||this.g.a.reduce(function(a,b){return null==b.a?NaN:a+b.a},0)||0,this.a=this.l=this.c=null,Tc(this)}function Tc(a){if(Wc(a),0!=a.length()){a.length();var b=null!=a.A().a?a.A().a:a.A().b;if(a.g.c>a.f)a.c=b;else{var c=a.f-(a.g.c+a.w.start);0>c?a.c=b:c<Math.max(a.A().b,a.A().a||0)?(a.A(),a.c=b):a.c=c}a.l=a.A().b,a.a=Qc(a).b}}function Uc(a,b){if(Vc(a,b),null==a.c||null==a.l||null==a.a)return{start:0,end:0};var c=Number.POSITIVE_INFINITY;a.h&&(c=a.h);var d=b-a.f,e=a.c+d;return null!=a.g.f&&(e=e-a.a-a.g.f,e>0&&(a.a+=e)),a.a=Math.min(a.a,c),d=a.l+d,d<a.a?{start:a.a,end:a.a}:(d=0<a.length()?null!=a.A().a?Math.min(d,a.A().a):d:a.a,d=Math.max(d,a.a),d=Math.min(d,c),{start:a.a,end:d})}function Vc(a,b){if(Wc(a),null!=a.g.f)if(null==a.c)a.length();else{for(var c=a.c+(b-a.f),d=0,e=0;e<a.o.length;++e){var f=null;if(e<a.o.length-1?f=a.o[e+1].a:(f=a.o[e],f=null!=f.a?f.a+(f.a-f.b):null),!(null!=f&&f<c-a.g.f))break;++d}d>0&&a.o.splice(0,d)}}function Wc(a){if(a.h){for(var b=0,c=a.o.length-1;c>=0&&a.o[c].b>a.h;--c)++b;b>0&&a.o.splice(-b)}}function Xc(a,b,c,d,e){var f,g=1,h=0;if(a.c>d)f=null;else{var i=a.i||0,j=a.f||0;f=c.a,f=f.b/f.a;var k=d-(a.c+b.start);0>k?f=null:(j=k-2*f-j,0>j&&(j=0),j=Math.ceil(j/f)*f,k-=f,0>k?f=null:(i=Math.floor(k/f)*f-i,0>i&&(i=0),i=Math.floor(i/f)*f,f={Za:j/f+1,current:(i>=j?i:j)/f+1}))}if(f&&(g=f.Za,h=f.current-f.Za+1),g=Fc(e,c,g,h),null==g)throw a=Error("Failed to generate SegmentReferences."),a.type="stream",a;Sc.call(this,g,a,b,d),this.u=c,this.v=this.b=0<this.length()?a.c+b.start+this.A().a:null,this.j=f?f.current+1:null,this.B=e}function Yc(a,b){if(null!=a.b&&null!=a.v&&null!=a.j){var c=a.u.a,c=c.b/c.a,d=Math.floor((a.v+(b-a.f)-a.b)/c);if(0!=d){var e=Fc(a.B,a.u,a.j,d);Array.prototype.push.apply(a.o,Nc(e,a.i)),a.b+=d*c,a.j+=d}}}function Zc(a,b,c,d,e){this.f=a,this.b=b,this.c=c,this.h=d,this.a=null,this.g=e}function $c(a,b,c,d,e){this.c=a,this.b=b,this.g=c,this.a=null,this.h=d,this.f=e}function _c(a,b,c,d,e){this.b=a,this.c=b,this.f=c,this.h=d,this.a=null,this.g=e}function ad(a){this.b=a,this.a=null}function bd(){this.C=rf++,this.id=this.D=this.H=null,this.c=0,this.height=this.width=this.bandwidth=null,this.b=this.a="",this.f=[],this.N=!1,this.J=!0}function cd(a){var b=a.a||"";return a.b&&(b+='; codecs="'+a.b+'"'),b}function dd(){this.C=sf++,this.id=null,this.contentType=this.lang="",this.b=!1,this.m=[],this.a=[]}function ed(a){for(var b=[],c=0;c<a.a.length;++c){var d=new hd;d.id=a.C,d.a=a.a[c],d.contentType=a.contentType,d.b=a.m.length?cd(a.m[0]):"",b.push(d)}return b}function fd(){this.id=null,this.start=0,this.b=null,this.a=[]}function gd(){this.b=!1,this.h=this.g=this.f=null,this.c=0,this.a=[]}function hd(){this.id=0,this.a=null,this.b=this.contentType=""}function id(a,b,c,d,e){oa.call(this,a),this.c=b,this.a=new Ma(c,d,e),this.w=this.I=this.b=null,this.K=!1,this.g=null,this.l=!1,this.i=null,this.u=!1,this.h=new ra,this.j=this.f=!1,this.B=0,this.L=15,this.F=!1}function jd(a,b,c){a.b&&!a.l&&(a.l=!0,pd(a),Ra(a.a).then(xa(a,function(){var a=this.c.currentTime;return!b&&0<Na(this.a,a)&&0<=Mc(this.a.b,a)?Promise.resolve():c?Qa(this.a,this.c.currentTime+c):(this.F=!0,Pa(this.a))})).then(xa(a,function(){this.l=!1,od(this,0)}))["catch"](xa(a,function(a){this.l=!1,this.f?(a=Z(a),this.dispatchEvent(a)):this.h.reject(a)})))}function kd(a,b,c){a=a.a;var d=a.b.length;return a=d>0?a.b[d-1]:null,null!=a?null!=a.a?c.la(a.a):null:c.la(b)||(c.length()?c.A():null)}function ld(a){if(!a.u&&null!=a.i){a.u=!0;var b=a.a,c=a.i,d=c-b.w;0!=d&&(b.b=Nc(b.b,d),b.w=c),a.h.resolve(a.i)}}function md(a,b){var c;c=b.a.split("/")[0],c=Y({type:"adaptation",bubbles:!0,contentType:c,size:"video"!=c?null:{width:b.width,height:b.height},bandwidth:b.bandwidth}),a.dispatchEvent(c)}function nd(a){var b=Y({type:"ended"});a.dispatchEvent(b)}function od(b,c){b.g=a.setTimeout(b.Nb.bind(b),c)}function pd(b){null!=b.g&&(a.clearTimeout(b.g),b.g=null)}function qd(a){this.b=a,this.a=null}function rd(a,b){oa.call(this,a),this.b=b,this.g=!0,this.h=this.f=null,this.c=new ra,this.a=null}function sd(){}function td(a,b,c,d,e,f,g){this.g=a,this.i=b,this.f=c,this.a=d,this.c=e,this.j=f,this.b=null,this.h=g}function ud(a){this.a=a}function vd(a,b,c){for(var d=J()/1e3,e=0;e<b.a.length;++e)for(var f=b.a[e],g=0;g<f.b.length;++g){var h=f.b[g];if("text"!=h.contentType)for(var i=0;i<h.a.length;++i){var j=h.a[i],k=0,k=k+(j.g?1:0),k=k+(j.b?1:0),k=k+(j.a?1:0);0==k?(h.a.splice(i,1),--i):1!=k&&(j.g?(j.b=null,j.a=null):j.b&&(j.a=null))}}for(wd(b),e=0;e<b.a.length;++e)for(f=b.a[e],g=0;g<f.b.length;++g){for(i=h=f.b[g],j=null,k=0;k<i.a.length;++k){var l=i.a[k].f||"";j?l!=j&&(i.a.splice(k,1),--k):j=l}0==h.a.length&&(f.b.splice(g,1),--g)}for("dynamic"==b.type&&null==b.c&&(b.c=d),e=new gd,"dynamic"==b.type&&(e.b=!0,e.f=b.g,e.g=new zc(c,b.j||b.url),e.h=b.c),e.c=b.h||5,f=0;f<b.a.length&&(g=b.a[f],null!=g.start);++f)g=xd(a,b,g,d,c),e.a.push(g);return e}function wd(a){if(a.a.length){null==a.a[0].start&&(a.a[0].start=0);var b=function(a){return 0==a||!!a};"dynamic"==a.type&&(a.b=null),b(a.b)&&1==a.a.length&&!b(a.a[0].a)&&(a.a[0].a=a.b);for(var c=0,d=!0,e=0;e<a.a.length;++e){var f=a.a[e-1],g=a.a[e],h=a.a[e+1]||{start:a.b};!b(g.start)&&f&&b(f.start)&&b(f.a)&&(g.start=f.start+f.a),!b(g.a)&&b(h.start)&&(g.a=h.start-g.start),null!=g.start&&null!=g.a?c+=g.a:d=!1}b(a.b)||(e=a.a[a.a.length-1],d?a.b=c:b(e.start)&&b(e.a)?a.b=e.start+e.a:"dynamic"!=a.type&&(a.b=c))}}function xd(a,b,c,d,e){var f=new fd;f.id=c.id,f.start=c.start,f.b=c.a;var g=new ga;c.b.forEach(function(a){g.push(a.contentType||"",a)});for(var h=ja(g),i=0;i<h.length;++i){var j=new ga;g.get(h[i]).forEach(function(a){j.push(a.group,a)});for(var k=ja(j),l=0;l<k.length;++l){var m=new ga;j.get(k[l]).forEach(function(a){m.push(a.lang,a)});for(var n=ja(m),o=0;o<n.length;++o){var p=m.get(n[o]),p=yd(a,b,c,p,d,e);f.a.push(p)}}}return f}function yd(a,b,c,e,f,g){d(e.every(function(a){return a.group==e[0].group&&(a.lang||"")==(e[0].lang||"")&&(a.contentType||"")==(e[0].contentType||"")}));var h=new dd,i=e.filter(function(a){return null!=a.id});i.length==e.length&&(h.id=i.map(function(a){return a.id}).sort().reduce(function(a,b){return a+","+b})),h.lang=e[0].lang||"",h.contentType=e[0].contentType||"",h.b=e.some(function(a){return a.c});for(var i={},j=0;j<e.length;++j)for(var k=e[j],l=0;l<k.a.length;++l){var m=k.a[l],n=Bd(a,m),o=h.a.slice(0);Ad(n,o),0==o.length&&0<h.a.length||!(m=Dd(b,c,m,f,g))||(h.m.push(m),h.a=o,i[m.C]=k)}if(h.a.some(function(a){return""==a.a}))return h.m.forEach(function(a){a.N=!0}),h;for(a=zd(e),j=0;j<h.m.length;++j)m=h.m[j],k=i[m.C],k==a&&(m.N=!0);return h}function zd(a){for(var b=null,c=null,d=0;d<a.length;++d)for(var e=a[d],f=0;f<e.a.length;++f){var g=e.a[f],g=(g.width||1)*(g.height||1)*(g.bandwidth||1);(null==b||b>g)&&(b=g,c=e)}return c}function Ad(a,b){if(0==b.length)Array.prototype.push.apply(b,a);else for(var c=0;c<b.length;++c){for(var d=!1,e=0;e<a.length;++e){var f=b[c],g=a[e];if(f.a==g.a&&f.h==g.h&&f.i==g.i&&f.g==g.g&&f.v==g.v&&f.f==g.f&&f.j==g.j&&Za(f.c,g.c)){d=!0,ab(b[c],a[e].b);break}}d||(b.splice(c,1),--c)}}function Bd(a,b){var c=[];if(0==b.c.length)c.push(new $a);else if(a.a)for(var d=0;d<b.c.length;++d)c.push.apply(c,Cd(a,b.c[d]));return c}function Cd(a,b){var c=[];if(2!=a.a.length)return[];var d=a.a(b.c||"",b.f);if(!(d&&d instanceof Array))return[];for(var e=0;e<d.length;++e){var f=_a(d[e]);0==f.b.length&&b.a&&b.a.psshBox&&ab(f,[{initData:b.a.psshBox,initDataType:"cenc"}]),c.push(f)}return c}function Dd(a,b,c,d,e){if(!c.s||0===c.s.length)return null;var f=null,g=1,h=0;if(c.g)f=c.f.split("/")[1],"mp4"!=f&&"webm"!=f?f=null:(g=c.g,("webm"!=f||g.c)&&(g.a||g.b&&g.b.a)?(h=g.b,h||(h=new Ub,h.url=c.s,h.a=g.a?g.a.clone():null),h=Fd(h,e),g=g.c?Fd(g.c,e):null,a=new td(a,b,f,h,g,d,e),b=new Jc(g),d=new bd,d.H=a,d.D=b,f=d):f=null),g=c.g.g,h=c.g.f;else if(c.b)f=c.b,!f.b&&!f.c&&1<f.a.length?f=null:f.b||b.a||f.c||1!=f.a.length?f.c&&0===f.c.a.length?f=null:(f=f.h?Fd(f.h,e):null,a=new $c(a,b,c,d,e),b=new Jc(f),d=new bd,d.H=a,d.D=b,f=d):f=null,g=c.b.f,h=c.b.g;else if(c.a){a:if(f=c.a,g=0+(f.f?1:0),g+=f.c?1:0,g+=f.b?1:0,0==g?g=!1:(1!=g&&(f.f?(f.c=null,f.b=null):f.c&&(f.b=null)),g=!0),g){if(g=null,f.g&&(g=(f=c.a.g)?Ed(c,f,Vb):null,!g)){f=null;break a}f=g?Fd(g,e):null,g=c.a,g.f?(g=c.f.split("/")[1],"mp4"!=g&&"webm"!=g?a=null:("webm"!=g||f)&&Gc(e,c,1,0)&&(h=(h=c.a.f)?Ed(c,h,Ub):null)?(h=Fd(h,e),a=new td(a,b,g,h,f,d,e)):a=null):a=g.h?g.c?new _c(a,b,c,d,e):g.b?"dynamic"!=a.type&&null==b.a?null:new Zc(a,b,c,d,e):null:null,a?(b=new Jc(f),d=new bd,d.H=a,d.D=b,f=d):f=null}else f=null;g=c.a.a,h=c.a.i}else"text"==c.f.split("/")[0]&&(f=new bd,f.H=new qd(new zc(e,c.s)));if(!f)return null;for(f.id=c.id,h&&(f.c=-1*h/g),f.bandwidth=c.bandwidth,f.width=c.width,f.height=c.height,f.a=c.f||"",f.b=c.h||"",a=0;a<c.c.length;++a)b=c.c[a],b.b&&f.f.push(b.b);return f}function Ed(a,b,c){return(b=Hc(b,a.id,null,a.bandwidth,null))?(c=new c,c.url=Ac(a.s,b),c):null}function Fd(a,b){var c=a.url,d=0,e=null;return a.a&&(d=a.a.na,e=a.a.end),new zc(b,c,d,e)}function Gd(){this.streamStats=null,this.droppedFrames=this.decodedFrames=NaN,this.bufferingTime=this.playTime=this.estimatedBandwidth=0,this.playbackLatency=NaN,this.bufferingHistory=[],this.bandwidthHistory=[],this.streamHistory=[]}function Hd(a,b){var c=new Id(b);a.streamHistory.push(new Jd(c)),!c.videoHeight&&a.streamStats||(a.streamStats=c)}function Id(a){this.videoWidth=a.width,this.videoHeight=a.height,this.videoMimeType=a.a,this.videoBandwidth=a.bandwidth}function Jd(a){this.timestamp=J()/1e3,this.value=a}function Kd(a,b){ya.call(this,"readwrite",b),this.j=a,this.b=0}function Ld(a,b,c,d,e){for(var f=[],g=[],h=0,i=0,j=[],k=b.map(function(a){return a.H.create()}),k=Promise.all(k),l=b.map(function(a){return a.D.create()}),l=Promise.all(l),k=Promise.all([k,l]).then(function(a){f=a[0],g=a[1],h=f.reduce(function(a,b){return a+b.length()},0)}),l=0;l<b.length;++l)k=k.then(function(a){return Nd(this,b[a],f[a],g[a],h,i)}.bind(a,l)),k=k.then(function(a,b){i+=f[a].length(),j.push(b)}.bind(a,l));return k.then(xa(a,function(){return Od(Ea(this))})).then(xa(a,function(a){var b=new ra;c=I(c);var f={group_id:a,stream_ids:j,session_ids:c,duration:d,key_system:e.a,license_server:e.h,with_credentials:e.i,distinctive_identifier:e.g,audio_robustness:e.f,video_robustness:e.j},g=Ea(this).put(f);return g.onsuccess=function(){b.resolve(a)},g.onerror=function(){b.reject(g.error)},b}))}function Md(a,b){return Ga(Ea(a),b).then(xa(a,function(a){var c,d=[];for(c in a.stream_ids)d.push(Qd(this,a.stream_ids[c]));return a=Ea(this),d.push(a["delete"](b)),Promise.all(d)}))}function Nd(a,b,c,d,e,f){var g=[Od(Da(a)),Od(Ca(a).index("stream"))],g=Promise.all(g).then(xa(a,function(a){return{qa:Math.max(a[0],a[1]),ja:new ArrayBuffer(0),Ja:0,o:[],Ca:null,Zb:e,jb:f}})),g=g.then(a.f.bind(a,c));return g=g.then(a.g.bind(a,b,d))}function Od(a){var b=new ra,c=a.openCursor(null,"prev");return c.onsuccess=function(a){a.target.result?b.resolve(a.target.result.key+1):b.resolve(0)},c.onerror=function(){b.reject(c.error)},b}function Pd(a,b){var c=new Uint8Array(a.byteLength+b.byteLength);return c.set(new Uint8Array(a),0),c.set(new Uint8Array(b),a.byteLength),c.buffer}function Qd(a,b){var c=new ra,d=Da(a)["delete"](b);d.onerror=function(){c.reject(d.error)};var e=Ca(a);return e.index("stream").openKeyCursor(IDBKeyRange.only(b)).onsuccess=function(a){(a=a.target.result)&&(e["delete"](a.primaryKey),a["continue"]())},e.transaction.oncomplete=function(){c.resolve()},c}function Rd(a,b,c,d,e,f){this.b=new zc(null,[new Ab(a)]),this.a=new tc,this.a.body=b,this.a.method=c,this.a.a=3,this.a.j=d,this.a.c=1e3*(null!=f?f:0),a=e||{};for(var g in a)this.a.b[g]=a[g]}function Sd(a){return Bc(a.b,a.a).then(function(a){return Promise.resolve(new Uint8Array(a))})}function Td(a,b,c){oa.call(this,a),this.h=b,this.b=c,this.a=this.i=null,this.l=new ka,this.c=[],this.f=[],this.u=0,this.g=new ra,this.j=null,this.w=0}function Ud(b,c){return null==b.j&&(b.j=a.setTimeout(function(){var a=Error("Timeout waiting for sessions.");a.type="storage",this.g.reject(a)}.bind(b),c)),b.g}function Vd(a){return Promise.all(a.f.map(function(a){return a.remove()}))}function Wd(a,b,c){for(var d in b)c=c["catch"](function(a,b){return navigator.requestMediaKeySystemAccess(a,[b])}.bind(null,d,b[d]));return a.b.ha()&&(c=c["catch"](function(){throw Error("Either none of the requested key systems are supported or none of the requested key systems support persistent state.")})),c}function Xd(){var a=Error("EmeManager destroyed");return a.type="destroy",Promise.reject(a)}function Yd(a){for(var b=a.b.ua(),c=0;c<b.length;++c){var d=Zd(a),e=d.load(b[c]);a.f.push(d),e.then(xa(a,function(){this.u++,this.u>=this.f.length&&this.g.resolve()}))["catch"](xa(a,function(a){a=Z(a),this.dispatchEvent(a)}))}}function Zd(a){var b=null;if(a.b.ha())try{b=a.i.createSession("persistent-license")}catch(c){throw Error("Persistent licenses are not supported by this key system or platform.")}else b=a.i.createSession();return la(a.l,b,"message",a.Jb.bind(a)),la(a.l,b,"keystatuseschange",a.yb.bind(a)),b}function $d(a,b,c,d){d=_d(c,d),Sd(new Rd(d.url,d.body,d.method,c.i,d.headers,a.w)).then(xa(a,function(a){return c.l&&(a=c.l(a)),b.update(a)})).then(xa(a,function(){var a=Y({type:"sessionReady",detail:b});this.dispatchEvent(a),this.u++,this.u>=this.f.length&&this.g.resolve()}))["catch"](xa(a,function(a){a.La=b,a=Z(a),this.dispatchEvent(a)}))}function _d(b,c){var d={url:b.h,body:c.slice(0),method:"POST",headers:{}};if("com.microsoft.playready"===b.a){for(var e=String.fromCharCode.apply(null,new Uint16Array(d.body)),e=(new DOMParser).parseFromString(e,"application/xml"),f=e.getElementsByTagName("name"),g=e.getElementsByTagName("value"),h=0;h<f.length;h++)d.headers[f[h].childNodes[0].nodeValue]=g[h].childNodes[0].nodeValue;d.body=a.atob(e.getElementsByTagName("Challenge")[0].childNodes[0].nodeValue)}if(!b.u)return d;if(b.u(d),d.url=da(d,"url"),null==d.url)throw Error("'url' cannot be null.");if(!(d.body instanceof ArrayBuffer||"string"==typeof d.body||null==d.body))throw new TypeError("'body' must be an ArrayBuffer, a string, or null.");if(d.method=da(d,"method"),"GET"!=d.method&&"POST"!=d.method)throw Error("'method' must be either 'GET' or 'POST'.");if(d.headers=fa(d,"headers",Object),null==d.headers)throw Error("'headers' cannot be null.");return d}function ae(a){oa.call(this,null),this.a=a,this.b=null,this.f=new ka,this.i=this.j=null,this.F=0,this.w=null,this.h=!1,this.g=new Gd,this.c={enableAdaptation:!0,streamBufferSize:15,liveStreamEndTimeout:15,licenseRequestTimeout:0,mpdRequestTimeout:0,segmentRequestTimeout:0,preferredLanguage:"en",restrictions:new j},this.l=1,this.G=null}function be(b){return"text/vtt"==b?!!a.VTTCue:MediaSource.isTypeSupported(b)}function ce(){var a=Error("Player destroyed");return a.type="destroy",Promise.reject(a)}function de(b){b.i&&(a.clearTimeout(b.i),b.i=null)}function ee(b){fe(b),b.w=a.setTimeout(b.L.bind(b),100)}function fe(b){b.w&&(a.clearTimeout(b.w),b.w=null)}function ge(a){g("buffering");var b=a.g;b.bufferingTime+=h("buffering")/1e3,a.h=!1,a.dispatchEvent(Y({type:"bufferingEnd"}))}function he(a){for(var b=0;b<a.length;++b)for(var c=a[b],d=0;d<c.a.length;++d){for(var e=c.a[d],f=e,g=0;g<f.m.length;++g)be(cd(f.m[g]))||(f.m.splice(g,1),--g);0==e.m.length&&(c.a.splice(d,1),--d)}}function ie(a){for(var b=0;b<a.length;++b)for(var c=a[b],d=0;d<c.a.length;++d)c.a[d].m.sort(je)}function je(a,b){var c=a.bandwidth||Number.MAX_VALUE,d=b.bandwidth||Number.MAX_VALUE;return d>c?-1:c>d?1:0}function ke(a){this.a=a}function le(a){function b(a,b){return a.concat(b)}var c=a.a.map(function(a){return a.a}).reduce(b,[]).map(function(a){return a.m}).reduce(b,[]);return a=c.map(function(a){return a.H.create()}),Promise.all(a).then(function(a){for(var b={},d=0;d<c.length;++d)b[c[d].C]=a[d];return Promise.resolve(b)})}function me(a,b,c,d,e){var f=new ga;a.a.forEach(function(a,b){f.push(a.id||""+b,a)});var g=new ga;for(b.a.forEach(function(a,b){g.push(a.id||""+b,a)}),a=ja(f),b=0;b<a.length;++b){var h=a[b],i=f.get(h);1<i.length||(h=g.get(h))&&0!=h.length&&1==h.length&&(ne(i[0],h[0],c,d,e),i[0].b=h[0].b)}}function ne(a,b,c,d,e){var f=new ga;a.a.forEach(function(a,b){f.push(a.id||""+b,a)});var g=new ga;for(b.a.forEach(function(a,b){g.push(a.id||""+b,a)}),a=ja(f),b=0;b<a.length;++b){var h=a[b],i=f.get(h);1<i.length||(h=g.get(h))&&0!=h.length&&1==h.length&&oe(i[0],h[0],c,d,e)}}function oe(a,b,c,d,e){var f=new ga;a.m.forEach(function(a,b){f.push(a.id||""+b,a)});var g=new ga;b.m.forEach(function(a,b){g.push(a.id||""+b,a)}),b={};for(var h=ja(f),i=0;i<h.length;++i){var j=h[i];b[j]=j;var k=f.get(j);1<k.length||((j=g.get(j))&&0!=j.length?1==j.length&&(pe(k[0],j[0],c,d),k[0].D=j[0].D,j[0].D=null,k[0].c=j[0].c):(e.push(k[0]),a.m.splice(a.m.indexOf(k[0]),1)))}for(h=ja(g),i=0;i<h.length;++i)j=h[i],b[j]||(b[j]=j,j=g.get(j),a.m.push(j[0]))}function pe(a,b,c,d){a=c[a.C],b=d[b.C],a.length(),a.Ha(b)&&a.length()}function qe(){this.a=this.b=null,this.f=new ka,this.c=Number.POSITIVE_INFINITY,this.i=!0,this.g=!1}function re(a){var b=a.a.ma();if(0==b.length)return null;b.sort(p);var c;a:{c=a.a.pa();for(var d=0;d<c.length;++d)if(c[d].active){c=c[d];break a}c=null}c=c?c.bandwidth:0,a=a.b.getBandwidth();for(var d=b[0],e=0;e<b.length;++e){var f=b[e],g=e+1<b.length?b[e+1]:{bandwidth:Number.POSITIVE_INFINITY};if(f.bandwidth&&(g=(g.bandwidth+c)/.85,a>=(f.bandwidth+c)/.95&&g>=a&&(d=f,d.active)))break}return d}function se(a,b,c){oa.call(this,null),this.f=a,this.c=b,this.b=_a(c),this.a=null}function te(a,b,c){oa.call(this,null),this.a=a,this.Z=b,this.i=new ka,this.g=new MediaSource,this.f=null,this.da=0,this.b=new ga,this.I=c,this.I.initialize(b,this),this.L=!1,this.K="en",this.fa=!1,this.U=null,this.B=new ra,this.h=new j,this.F=null,this.Va=1,this.c={},this.ea=new ra,this.Ta=0,this.Ua=15,this.w=null,this.Ra=this.Sa=!1,this.u={},this.$=this.Y=this.V=null,this.G={}}function ue(b,c){if(null!=b.a.f){var d=Math.max(b.a.f,3),d=Math.max(d-c,0);b.V=a.setTimeout(b.ib.bind(b,!1),1e3*d)}}function ve(a,b){var c=b.a.split("/")[0],d=a.c[c];if(d&&d.oa()==b){var e=a.b.get(b.a.split("/")[0]).map(function(a){return a.m}).reduce(function(a,b){return a.concat(b)},[]).filter(function(a){return a.N&&a.J});if(0==e.length)return c=Error("All usable streams have been removed from the manifest."),c.type="app",c=Z(c),void a.dispatchEvent(c);a.u[c].Pa==b&&delete a.u[c],d.ra(e[0],!0),b.destroy()}b.destroy()}function we(a){if(a.h){for(var b=!1,c=0;c<a.a.a.length;++c)for(var d=a.a.a[c],e=0;e<d.a.length;++e){var f=d.a[e];if("video"==f.contentType)for(var g=0;g<f.m.length;++g){var h=f.m[g],i=h.J;h.J=!0,a.h.maxWidth&&h.width>a.h.maxWidth&&(h.J=!1),a.h.maxHeight&&h.height>a.h.maxHeight&&(h.J=!1),a.h.minHeight&&h.height<a.h.minHeight&&(h.J=!1),a.h.maxBandwidth&&h.bandwidth>a.h.maxBandwidth&&(h.J=!1),a.h.minBandwidth&&h.bandwidth<a.h.minBandwidth&&(h.J=!1),i!=h.J&&(b=!0)}}0!=ha(a.b).length&&b&&(xe(a),0<a.ma().length||(b=Error("The application has restricted all video tracks!"),b.type="app",b=Z(b),a.dispatchEvent(b)))}}function xe(a){var b=Y({type:"trackschanged",bubbles:!0});a.dispatchEvent(b)}function ye(a,b,c,d,e){if(!a.b.a.hasOwnProperty(b)||!a.c[b])return!1;for(var f=a.b.get(b),g=0;g<f.length;++g)for(var h=f[g],i=0;i<h.m.length;++i){var j=h.m[i];if(j.C==c)return j.N&&j.J?"text"==b||a.Ra?(Hd(a.U,j),a.c[b].ra(j,d,e),!0):(c=a.u[b],a.u[b]={Pa:j,Xa:null!=c&&c.Xa||d,Ya:null!=c&&c.Ya||e},!0):!1}return!1}function ze(a,b){for(var c=0;2>=c;++c)for(var d=0;d<b.length;++d){var e=b[d];if($(c,a.K,e.lang))return b.splice(d,1),void b.splice(0,0,e)}for(d=0;d<b.length;++d)if(e=b[d],e.b){b.splice(d,1),b.splice(0,0,e);break}}function Ae(b){for(var c=[],d=["audio","video","text"],e=0;e<d.length;++e){var f=d[e];b.b.a.hasOwnProperty(f)&&c.push(b.b.get(f)[0])}for(var g=Be(b,c),e=0;e<d.length;++e)if(f=d[e],b.b.a.hasOwnProperty(f)&&!g[f])return b=Error("Unable to select an initial "+f+" stream: all "+f+" streams have been restricted (by the application or by the key system)."),b.type="stream",Promise.reject(b);return c=aa(g).map(function(a){return a.H.create()}),Promise.all(c).then(xa(b,function(a){return a.every(function(a){return a.length()})&&(a=Ke(this,a))?Ce(this,g)?(this.I.start(),Ee(this,g,a),Promise.resolve()):(a=Error("Failed to create Stream objects."),a.type="stream",Promise.reject(a)):(a=Error("Some streams are not available."),a.type="stream",Promise.reject(a))}))["catch"](xa(b,function(b){return"aborted"!=b.type?(Object.keys(this.c),this.a.b?(J()<this.a.h?(b=Math.max(this.a.h-Date.now()/1e3,3),this.V=a.setTimeout(this.ib.bind(this,!0),1e3*b)):ue(this,0),Promise.resolve()):Promise.reject(b)):void 0}))}function Be(a,b){for(var c={},d=0;d<b.length;++d){var e=b[d],f=null;if("video"==e.contentType){var g=a.I.getInitialVideoTrackId();if(null==g)continue;if(f=e.m.filter(function(a){return a.C==g}),0==f.length)continue;f=f[0]}else if("audio"==e.contentType){if(f=e.m.filter(function(a){return a.N&&a.J}),0==f.length)continue;f=e.m[Math.floor(f.length/2)]}else 0<e.m.length&&(f=e.m[0]);c[e.contentType]=f}return c}function Ce(a,b){var c,d={};for(c in b){var e=b[c],e="text"==c?new rd(a,a.f):De(a,e);if(!e)return aa(d).forEach(function(a){a.destroy()}),!1;d[c]=e}return a.c=d,!0}function De(a,b){var c=new id(a,a.f,a.g,cd(b),a.Z);return c.G(a.G),c}function Ee(a,b,c){a.Va=a.f.playbackRate,a.f.playbackRate=0,Ge(a,c);var d;a.$&&a.$<=c.end&&a.$>=c.start?d=a.$:a.a.b?(d=c.end,a.Sa=!0):d=c.start,la(a.i,a.f,"seeking",a.Ib.bind(a)),a.f.currentTime!=d&&(a.f.currentTime=d,a.F=d),He(a,c.start,c.end),c=[];for(var e in a.c){d=a.c[e],c.push(d.sb(a.ea)),la(a.i,d,"ended",a.Kb.bind(a));var f=b[e];Hd(a.U,f),d.ra(f,!1)}Promise.all(c).then(a.ub.bind(a))["catch"](xa(a,function(a){"destroy"!=a.type&&(a=Z(a),this.dispatchEvent(a))})),a.Na(a.fa)}function Fe(a,b,c){(b=Ke(a,b))&&(Ge(a,b),He(a,b.start,b.end)),0!=c&&(c=a.f.currentTime+c,a.f.currentTime=c,a.F=c),a.Sa&&b&&(a.f.currentTime=b.end),a.f.playbackRate=a.Va,a.a.b&&null!=a.a.f&&ue(a,0),Le(a),a.ea.resolve()}function Ge(a,b){if(a.a.b)isNaN(a.g.duration)&&(a.g.duration=b.end+2592e3);else if(isNaN(a.g.duration)||b.end>a.g.duration){a.g.duration=b.end;for(var c=0;c<a.g.sourceBuffers.length;++c)a.g.sourceBuffers[c].appendWindowEnd=b.end}}function He(a,b,c){b=Y({type:"seekrangechanged",bubbles:!0,start:b,end:c}),a.dispatchEvent(b)}function Ie(a,b,c,d){if(b>=c-.01)return!1;if(b=0,a.a.b){b=.5;for(var e in a.c)if(!a.c[e].lb(c+b)){b=a.a.c;break}}return a.f.currentTime=Math.min(c+b,d),!0}function Je(a){return aa(a.c).map(function(a){return a.cb()}).filter(function(a){return null!=a})}function Ke(a,b){for(var c=0,d=Number.POSITIVE_INFINITY,e=Number.POSITIVE_INFINITY,f=0;f<b.length;++f){var g=b[f].Ea(),c=Math.max(c,g.start);null!=g.end&&(d=Math.min(d,g.end)),b[f].length()&&(e=Math.min(e,b[f].A().a))}if(d==Number.POSITIVE_INFINITY){if(d=a.a.a[0],!d.b)return null;d=(d.start||0)+d.b}return a.a.b&&(d=Math.max(d-a.a.c,c)),c>d?null:{start:c,end:d,A:e}}function Le(b){b.a.b&&(b.Y=a.setTimeout(b.Mb.bind(b),1e3))}function Me(a){for(var b in a.c)a.c[b].G(a.G)}function Ne(a,b,c,d){c||(c=new qa),d||(d=new qe),te.call(this,null,c,d),this.za=a,this.l=null,this.M=b,this.R=[],this.ga=[],this.ta=[],this.j=null}function Oe(a,b,c){b||(b=new qa),c||(c=new qe),te.call(this,null,b,c),this.R=a,this.M=[],this.timeoutMs=3e4,this.l={},this.j=this.ga=null}function Pe(a,b,c,d){var e=new Kd(a.Z,a);return null!=a.l.segmentRequestTimeout&&(e.b=Number(a.l.segmentRequestTimeout)),za(e).then(xa(a,function(){return Ld(e,b,this.M,d,c)})).then(function(a){return Aa(e),Promise.resolve(a)})["catch"](function(a){return Aa(e),Promise.reject(a)})}function Qe(a){var b=new Kd(null,null);return za(b).then(xa(a,function(){return Md(b,this.R)})).then(function(){return Aa(b),Promise.resolve()})["catch"](function(a){return Aa(b),Promise.reject(a)})}function Re(b){var c=document.createElement("video");c.src=a.URL.createObjectURL(b.g);var d=new Td(null,c,b);return null!=b.l.licenseRequestTimeout&&(d.w=Number(b.l.licenseRequestTimeout)),b.X().then(function(){return d.initialize()}).then(xa(b,function(){return Ud(d,this.timeoutMs)})).then(function(){return Vd(d)}).then(xa(b,function(){return d.destroy(),this.destroy(),Promise.resolve()}))["catch"](xa(b,function(a){return d.destroy(),this.destroy(),Promise.reject(a)}))}var Se,Te=this;e("error"),e("warn"),e("info"),e("log"),e("debug");var Ue=a.performance&&a.performance.now?a.performance.now.bind(a.performance):Date.now,Ve={};b("shaka.player.AudioTrack.compare",function(a,b){return a.lang<b.lang?-1:a.lang>b.lang?1:a.bandwidth<b.bandwidth?-1:a.bandwidth>b.bandwidth?1:0}),j.prototype.clone=function(){var a=new j;return a.maxHeight=this.maxHeight,a.minHeight=this.minHeight,a.maxWidth=this.maxWidth,a.maxBandwidth=this.maxBandwidth,a.minBandwidth=this.minBandwidth,a},b("shaka.player.TextStyle",k),k.prototype.a=function(){var b=a.localStorage.getItem("ShakaPlayerTextStyle");if(b){var c;try{c=JSON.parse(b)}catch(d){return}if(c&&"object"==typeof c){var e,b=c;for(e in b)e in this&&(this[e]=b[e])}}},k.prototype.load=k.prototype.a,k.prototype.b=function(){a.localStorage.setItem("ShakaPlayerTextStyle",JSON.stringify(this))},k.prototype.store=k.prototype.b;var We=[255,255,255],Xe=[0,0,0];k.StandardColors={WHITE:We,BLACK:Xe,RED:[255,0,0],GREEN:[0,255,0],BLUE:[0,0,255],YELLOW:[255,255,0],MAGENTA:[255,0,255],CYAN:[0,255,255]};var Ye=1;k.StandardOpacities={OPAQUE:Ye,SEMI_HIGH:.75,SEMI_LOW:.25,TRANSPARENT:0};var Ze=[];k.EdgeStyles={NONE:Ze,RAISED:[[34,34,34,1,1,0],[34,34,34,2,2,0],[34,34,34,3,3,0]],DEPRESSED:[[204,204,204,1,1,0],[204,204,204,0,1,0],[34,34,34,-1,-1,0],[34,34,34,0,-1,0]],UNIFORM:[[34,34,34,0,0,4],[34,34,34,0,0,4],[34,34,34,0,0,4],[34,34,34,0,0,4]],DROP:[[34,34,34,2,2,3],[34,34,34,2,2,4],[34,34,34,2,2,5]]},b("shaka.player.TextTrack.compare",function(a,b){return a.lang<b.lang?-1:a.lang>b.lang?1:0}),b("shaka.player.VideoTrack.compare",p),b("shaka.polyfill.CustomEvent.install",q),b("shaka.polyfill.Fullscreen.install",s),w.prototype.createSession=function(){},w.prototype.setServerCertificate=function(){},x.prototype.getConfiguration=function(){},x.prototype.createMediaKeys=function(){};var $e=0;b("shaka.polyfill.Promise.install",z),y.prototype.then=function(a,b){var c=new y;switch(this.ba){case 1:E(this,c,a);break;case 2:E(this,c,b);break;case $e:this.c.push({Ia:c,Ba:a}),this.b.push({Ia:c,Ba:b})}return c},y.prototype.then=y.prototype.then,y.prototype["catch"]=function(a){return this.then(void 0,a)},y.prototype["catch"]=y.prototype["catch"],y.prototype.W=function(a){if(this.ba==$e){for(this.wa=a,this.ba=1,a=0;a<this.c.length;++a)E(this,this.c[a].Ia,this.c[a].Ba);this.c=[],this.b=[]}},y.prototype.a=function(a){if(this.ba==$e){for(this.wa=a,this.ba=2,a=0;a<this.b.length;++a)E(this,this.b[a].Ia,this.b[a].Ba);this.c=[],this.b=[]}},b("shaka.polyfill.VideoPlaybackQuality.install",G);var _e,af=0,bf=1,cf={"output-restricted":"The required output protection is not available.","output-not-allowed":"The required output protection is not available.",expired:"The decryption key has expired.","internal-error":"The key system has encountered an unspecified error."
};W.prototype.sample=function(a,b){var c=Math.pow(this.c,a);this.b=b*(1-c)+c*this.b,this.a+=a};var df=1,ef=2,ff={aar:"aa",abk:"ab",afr:"af",aka:"ak",alb:"sq",amh:"am",ara:"ar",arg:"an",arm:"hy",asm:"as",ava:"av",ave:"ae",aym:"ay",aze:"az",bak:"ba",bam:"bm",baq:"eu",bel:"be",ben:"bn",bih:"bh",bis:"bi",bod:"bo",bos:"bs",bre:"br",bul:"bg",bur:"my",cat:"ca",ces:"cs",cha:"ch",che:"ce",chi:"zh",chu:"cu",chv:"cv",cor:"kw",cos:"co",cre:"cr",cym:"cy",cze:"cs",dan:"da",deu:"de",div:"dv",dut:"nl",dzo:"dz",ell:"el",eng:"en",epo:"eo",est:"et",eus:"eu",ewe:"ee",fao:"fo",fas:"fa",fij:"fj",fin:"fi",fra:"fr",fre:"fr",fry:"fy",ful:"ff",geo:"ka",ger:"de",gla:"gd",gle:"ga",glg:"gl",glv:"gv",gre:"el",grn:"gn",guj:"gu",hat:"ht",hau:"ha",heb:"he",her:"hz",hin:"hi",hmo:"ho",hrv:"hr",hun:"hu",hye:"hy",ibo:"ig",ice:"is",ido:"io",iii:"ii",iku:"iu",ile:"ie",ina:"ia",ind:"id",ipk:"ik",isl:"is",ita:"it",jav:"jv",jpn:"ja",kal:"kl",kan:"kn",kas:"ks",kat:"ka",kau:"kr",kaz:"kk",khm:"km",kik:"ki",kin:"rw",kir:"ky",kom:"kv",kon:"kg",kor:"ko",kua:"kj",kur:"ku",lao:"lo",lat:"la",lav:"lv",lim:"li",lin:"ln",lit:"lt",ltz:"lb",lub:"lu",lug:"lg",mac:"mk",mah:"mh",mal:"ml",mao:"mi",mar:"mr",may:"ms",mkd:"mk",mlg:"mg",mlt:"mt",mon:"mn",mri:"mi",msa:"ms",mya:"my",nau:"na",nav:"nv",nbl:"nr",nde:"nd",ndo:"ng",nep:"ne",nld:"nl",nno:"nn",nob:"nb",nor:"no",nya:"ny",oci:"oc",oji:"oj",ori:"or",orm:"om",oss:"os",pan:"pa",per:"fa",pli:"pi",pol:"pl",por:"pt",pus:"ps",que:"qu",roh:"rm",ron:"ro",rum:"ro",run:"rn",rus:"ru",sag:"sg",san:"sa",sin:"si",slk:"sk",slo:"sk",slv:"sl",sme:"se",smo:"sm",sna:"sn",snd:"sd",som:"so",sot:"st",spa:"es",sqi:"sq",srd:"sc",srp:"sr",ssw:"ss",sun:"su",swa:"sw",swe:"sv",tah:"ty",tam:"ta",tat:"tt",tel:"te",tgk:"tg",tgl:"tl",tha:"th",tib:"bo",tir:"ti",ton:"to",tsn:"tn",tso:"ts",tuk:"tk",tur:"tr",twi:"tw",uig:"ug",ukr:"uk",urd:"ur",uzb:"uz",ven:"ve",vie:"vi",vol:"vo",wel:"cy",wln:"wa",wol:"wo",xho:"xh",yid:"yi",yor:"yo",zha:"za",zho:"zh",zul:"zu"};ga.prototype.push=function(a,b){this.a.hasOwnProperty(a)?this.a[a].push(b):this.a[a]=[b]},ga.prototype.set=function(a,b){this.a[a]=b},ga.prototype.get=function(a){return(a=this.a[a])?a.slice():null},ka.prototype.destroy=function(){ma(this),this.a=null},ka.prototype.sa=function(a,b){for(var c=this.a.get(b)||[],d=0;d<c.length;++d){var e=c[d];e.target==a&&(e.sa(),ia(this.a,b,e))}},na.prototype.sa=function(){this.target&&(this.target.removeEventListener(this.type,this.a,!1),this.a=this.target=null)},b("shaka.util.FakeEventTarget",oa),oa.prototype.addEventListener=function(a,b,c){c||this.ya.push(a,b)},oa.prototype.removeEventListener=function(a,b,c){c||ia(this.ya,a,b)},oa.prototype.dispatchEvent=function(a){if(a.hasOwnProperty("srcElement")||(delete a.srcElement,Object.defineProperty(a,"srcElement",{get:function(){return null}})),a.hasOwnProperty("target"))a.target=this;else{delete a.target;var b=this;Object.defineProperty(a,"target",{get:function(){return b},set:function(a){b=a}})}if(a.hasOwnProperty("currentTarget"))a.currentTarget=null;else{delete a.currentTarget;var c=null;Object.defineProperty(a,"currentTarget",{get:function(){return c},set:function(a){c=a}})}return pa(this,a)},c(qa,oa),b("shaka.util.EWMABandwidthEstimator",qa),qa.prototype.sample=function(a,b){if(!(65536>b)){a=Math.max(a,50);var c=8e3*b/a,d=a/1e3;this.a.sample(d,c),this.c.sample(d,c),this.dispatchEvent(Y({type:"bandwidth"})),this.b=Date.now()}},qa.prototype.getBandwidth=function(){return.5>this.a.a?5e5:Math.min(X(this.a),X(this.c))},qa.prototype.getDataAge=function(){return(Date.now()-this.b)/1e3},qa.prototype.supportsCaching=function(){return!1},ra.prototype.destroy=function(){this["catch"](function(){});var a=Error("Destroyed!");a.type="destroy",this.reject(a)},ta.prototype.start=function(){if(this.f)throw Error("Task already started!");this.f=!0,this.b.unshift(function(){}),va(this,void 0)},ta.prototype.end=function(){this.b.splice(1)},c(ya,oa),c(Ha,ya);var gf=1/60;Ma.prototype.destroy=function(){Ra(this)["catch"](function(){}),this.f&&this.f.destroy(),this.a=this.f=null,this.g&&(Aa(this.g),this.g=null),this.b=null,this.i.destroy(),this.v=this.c=this.i=null},Ma.prototype.h=function(){"open"==this.v.readyState&&this.c.abort()},Ma.prototype.B=function(){this.f.resolve(),this.f=null},b("shaka.util.Uint8ArrayUtils.toString",Va),b("shaka.util.Uint8ArrayUtils.fromString",Wa),b("shaka.util.Uint8ArrayUtils.toBase64",function(b,c){var d=void 0==c?!0:c,e=a.btoa(Va(b)).replace(/\+/g,"-").replace(/\//g,"_");return d?e:e.replace(/=*$/,"")}),b("shaka.util.Uint8ArrayUtils.fromBase64",Xa),b("shaka.util.Uint8ArrayUtils.fromHex",function(b){for(var c=new Uint8Array(b.length/2),d=0;d<b.length;d+=2)c[d/2]=a.parseInt(b.substr(d,2),16);return c}),b("shaka.util.Uint8ArrayUtils.toHex",Ya),eb.prototype.createMediaKeys=function(){var a=new fb(this.a);return Promise.resolve(a)},eb.prototype.getConfiguration=function(){return this.b},Se=fb.prototype,Se.createSession=function(a){var b=a||"temporary";if("temporary"!=b&&"persistent-license"!=b)throw new TypeError("Session type "+a+" is unsupported on this platform.");return a=this.b||document.createElement("video"),a.src||(a.src="about:blank"),b=new ib(a,this.g,b),this.c.push(b),b},Se.setServerCertificate=function(){return Promise.reject(Error("setServerCertificate not supported on this platform."))},Se.Rb=function(a){a=Y({type:"encrypted",initDataType:"webm",initData:a.initData}),this.b.dispatchEvent(a)},Se.Qb=function(a){var b=hb(this,a.sessionId);b&&(a=Y({type:"message",messageType:void 0==b.keyStatuses.Fa()?"licenserequest":"licenserenewal",message:a.message}),b.b&&(b.b.resolve(),b.b=null),b.dispatchEvent(a))},Se.Ob=function(a){(a=hb(this,a.sessionId))&&(kb(a,"usable"),a.a&&a.a.resolve(),a.a=null)},Se.Pb=function(a){var b=hb(this,a.sessionId);if(b){var c=Error("EME v0.1b key error");c.errorCode=a.errorCode,c.errorCode.systemCode=a.systemCode,!a.sessionId&&b.b?(c.method="generateRequest",45==a.systemCode&&(c.message="Unsupported session type."),b.b.reject(c),b.b=null):a.sessionId&&b.a?(c.method="update",b.a.reject(c),b.a=null):(c=a.systemCode,a.errorCode.code==MediaKeyError.MEDIA_KEYERR_OUTPUT?kb(b,"output-restricted"):1==c?kb(b,"expired"):kb(b,"internal-error"))}},c(ib,oa),Se=ib.prototype,Se.Qa=function(a,b){if(this.a)this.a.then(this.Qa.bind(this,a,b))["catch"](this.Qa.bind(this,a,b));else{this.a=a;var c,d;"webkit-org.w3.clearkey"==this.c?(c=Va(new Uint8Array(b)),d=JSON.parse(c),"oct"!=d.keys[0].kty&&(this.a.reject(Error("Response is not a valid JSON Web Key Set.")),this.a=null),c=Xa(d.keys[0].k),d=Xa(d.keys[0].kid)):(c=new Uint8Array(b),d=null);try{this.f.webkitAddKey(this.c,c,d,this.sessionId)}catch(e){this.a.reject(e),this.a=null}}},Se.generateRequest=function(a,b){return jb(this,b,null)},Se.load=function(a){return"persistent-license"==this.g?jb(this,null,a):Promise.reject(Error("Not a persistent session."))},Se.update=function(a){var b=new ra;return this.Qa(b,a),b},Se.close=function(){if("persistent-license"!=this.g){if(!this.sessionId)return this.closed.reject(Error("The session is not callable.")),this.closed;this.f.webkitCancelKeyRequest(this.c,this.sessionId)}return this.closed.resolve(),this.closed},Se.remove=function(){return"persistent-license"!=this.g?Promise.reject(Error("Not a persistent session.")):this.close()},lb.prototype.next=function(){return this.a>=this.b.length?{value:void 0,done:!0}:{value:this.b[this.a++],done:!1}};var hf;Se=mb.prototype,Se.Ma=function(a){this.size=void 0==a?0:1,this.a=a},Se.Fa=function(){return this.a},Se.entries=function(){var a=hf,b=[];return this.a&&b.push([a,this.a]),new lb(b)},Se.forEach=function(a){this.a&&a(this.a,hf)},Se.get=function(a){return this.has(a)?this.a:void 0},Se.has=function(a){var b=hf;return!(!this.a||!Za(new Uint8Array(a),b))},Se.keys=function(){var a=hf,b=[];return this.a&&b.push(a),new lb(b)},Se.values=function(){var a=[];return this.a&&a.push(this.a),new lb(a)},pb.prototype.createMediaKeys=function(){var a=new rb(this.keySystem);return Promise.resolve(a)},pb.prototype.getConfiguration=function(){return this.a},rb.prototype.createSession=function(a){if("temporary"!=(a||"temporary"))throw new TypeError("Session type "+a+" is unsupported on this platform.");return new tb(this.a)},rb.prototype.setServerCertificate=function(){return Promise.reject(Error("setServerCertificate not supported on this platform."))},c(tb,oa),Se=tb.prototype,Se.generateRequest=function(a,b){this.a=new ra;try{this.c=this.g.createSession("video/mp4",b),la(this.f,this.c,"mskeymessage",this.Db.bind(this)),la(this.f,this.c,"mskeyadded",this.Bb.bind(this)),la(this.f,this.c,"mskeyerror",this.Cb.bind(this)),wb(this,"status-pending")}catch(c){this.a.reject(c)}return this.a},Se.load=function(){return Promise.reject(Error("MediaKeySession.load not yet supported"))},Se.update=function(a){this.b=new ra;try{this.c.update(a)}catch(b){this.b.reject(b)}return this.b},Se.close=function(){try{this.c.close(),this.closed.resolve(),ma(this.f)}catch(a){this.closed.reject(a)}return this.closed},Se.remove=function(){return Promise.reject(Error("MediaKeySession.remove is only applicable for persistent licenses, which are not supported on this platform"))},Se.Db=function(a){this.a&&(this.a.resolve(),this.a=null),a=Y({type:"message",messageType:void 0==this.keyStatuses.Fa()?"licenserequest":"licenserenewal",message:a.message.buffer}),this.dispatchEvent(a)},Se.Bb=function(){this.a?(this.a.resolve(),this.a=null):this.b&&(wb(this,"usable"),this.b.resolve(),this.b=null)},Se.Cb=function(){var a=Error("EME v20140218 key error");if(a.errorCode=this.c.error,null!=this.a)this.a.reject(a),this.a=null;else if(null!=this.b)this.b.reject(a),this.b=null;else switch(this.c.error.code){case MSMediaKeyError.MS_MEDIA_KEYERR_OUTPUT:case MSMediaKeyError.MS_MEDIA_KEYERR_HARDWARECHANGE:wb(this,"output-not-allowed");default:wb(this,"internal-error")}},xb.prototype.next=function(){return this.a>=this.b.length?{value:void 0,done:!0}:{value:this.b[this.a++],done:!1}};var jf;Se=yb.prototype,Se.Ma=function(a){this.size=void 0==a?0:1,this.a=a},Se.Fa=function(){return this.a},Se.entries=function(){var a=jf,b=[];return this.a&&b.push([a,this.a]),new xb(b)},Se.forEach=function(a){this.a&&a(this.a,jf)},Se.get=function(a){return this.has(a)?this.a:void 0},Se.has=function(a){var b=jf;return!(!this.a||!Za(new Uint8Array(a),b))},Se.keys=function(){var a=jf,b=[];return this.a&&b.push(a),new xb(b)},Se.values=function(){var a=[];return this.a&&a.push(this.a),new xb(a)},b("shaka.polyfill.MediaKeys.install",zb),b("shaka.polyfill.installAll",function(){q(),s(),G(),z(),zb()});var kf=/^(?:([^:\/?#.]+):)?(?:\/\/(?:([^\/?#]*)@)?([^\/#?]*?)(?::([0-9]+))?(?=[\/#?]|$))?([^?#]+)?(?:\?([^#]*))?(?:#(.*))?$/;Se=Ab.prototype,Se.P="",Se.ca="",Se.S="",Se.ia=null,Se.O="",Se.aa="",Se.toString=function(){var a=[],b=this.P;if(b&&a.push(Fb(b,lf,!0),":"),b=this.S){a.push("//");var c=this.ca;c&&a.push(Fb(c,lf,!0),"@"),a.push(encodeURIComponent(b).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),b=this.ia,null!=b&&a.push(":",String(b))}return(b=this.O)&&(this.S&&"/"!=b.charAt(0)&&a.push("/"),a.push(Fb(b,"/"==b.charAt(0)?nf:mf,!0))),(b=this.a.toString())&&a.push("?",b),(b=this.aa)&&a.push("#",Fb(b,pf)),a.join("")},Se.resolve=function(a){var b=this.clone();"data"===b.P&&(b=new Ab);var c=!!a.P;c?Bb(b,a.P):c=!!a.ca,c?b.ca=a.ca:c=!!a.S,c?b.S=a.S:c=null!=a.ia;var d=a.O;if(c)Cb(b,a.ia);else if(c=!!a.O){if("/"!=d.charAt(0))if(this.S&&!this.O)d="/"+d;else{var e=b.O.lastIndexOf("/");-1!=e&&(d=b.O.substr(0,e+1)+d)}if(".."==d||"."==d)d="";else if(-1!=d.indexOf("./")||-1!=d.indexOf("/.")){for(var e=0==d.lastIndexOf("/",0),d=d.split("/"),f=[],g=0;g<d.length;){var h=d[g++];"."==h?e&&g==d.length&&f.push(""):".."==h?((1<f.length||1==f.length&&""!=f[0])&&f.pop(),e&&g==d.length&&f.push("")):(f.push(h),e=!0)}d=f.join("/")}}return c?b.O=d:c=""!==a.a.toString(),c?Db(b,a.a.clone()):c=!!a.aa,c&&(b.aa=a.aa),b},Se.clone=function(){return new Ab(this)};var lf=/[#\/\?@]/g,mf=/[\#\?:]/g,nf=/[\#\?]/g,of=/[\#\?@]/g,pf=/#/g;Hb.prototype.a=null,Hb.prototype.c=null,Hb.prototype.toString=function(){if(this.b)return this.b;if(!this.a)return"";var a,b=[];for(a in this.a)for(var c=encodeURIComponent(a),d=this.a[a],e=0;e<d.length;e++){var f=c;""!==d[e]&&(f+="="+encodeURIComponent(d[e])),b.push(f)}return this.b=b.join("&")},Hb.prototype.clone=function(){var a=new Hb;if(a.b=this.b,this.a){var b,c={};for(b in this.a)c[b]=this.a[b].concat();a.a=c,a.c=this.c}return a},Tb.prototype.clone=function(){var a=new Tb;return a.s=ic(this.s),a.g=this.g,a.f=this.f,a.a=jc(this.a),a.b=jc(this.b),a.c=jc(this.c),a},Ub.prototype.clone=function(){var a=new Ub;return a.url=ic(this.url),a.a=jc(this.a),a},Vb.prototype.clone=function(){var a=new Vb;return a.url=ic(this.url),a.a=jc(this.a),a},Wb.prototype.clone=function(){var a=new Wb;return a.s=ic(this.s),a.f=this.f,a.g=this.g,a.b=this.b,a.i=this.i,a.h=jc(this.h),a.a=ic(this.a)||[],a.c=jc(this.c),a},Xb.prototype.clone=function(){var a=new Xb;return a.b=ic(this.b),a.a=jc(this.a),a},Yb.prototype.clone=function(){var a=new Yb;return a.a=this.a,a.i=this.i,a.b=this.b,a.j=this.j,a.h=this.h,a.f=this.f,a.g=this.g,a.c=jc(this.c),a},Zb.prototype.clone=function(){var a=new Zb;return a.a=ic(this.a)||[],a},$b.prototype.clone=function(){var a=new $b;return a.b=this.b,a.a=this.a,a.c=this.c,a},_b.prototype.clone=function(){return new _b(this.na,this.end)},Jb.TAG_NAME="MPD",Kb.TAG_NAME="Period",Lb.TAG_NAME="AdaptationSet",Mb.TAG_NAME="Role",Nb.TAG_NAME="ContentComponent",Ob.TAG_NAME="Representation",Pb.TAG_NAME="ContentProtection",Qb.TAG_NAME="cenc:pssh",Rb.TAG_NAME="BaseURL",Sb.TAG_NAME="Location",Tb.TAG_NAME="SegmentBase",Ub.TAG_NAME="RepresentationIndex",Vb.TAG_NAME="Initialization",Wb.TAG_NAME="SegmentList",Xb.TAG_NAME="SegmentURL",Yb.TAG_NAME="SegmentTemplate",Zb.TAG_NAME="SegmentTimeline",$b.TAG_NAME="S",Jb.prototype.parse=function(a,b){this.url=a.s,this.id=kc(b,"id",rc),this.type=kc(b,"type",rc)||"static",this.b=kc(b,"mediaPresentationDuration",mc),this.h=kc(b,"minBufferTime",mc,this.h),this.g=kc(b,"minimumUpdatePeriod",mc,this.g),this.c=kc(b,"availabilityStartTime",lc,this.c),this.f=kc(b,"timeShiftBufferDepth",mc,this.f),this.i=kc(b,"suggestedPresentationDelay",mc,this.i);var c=a.s,d=gc(this,b,Rb);this.s=bc(c,d),(d=ec(this,b,Sb))&&(this.j=cc(c,d.url)),this.a=gc(this,b,Kb)},Kb.prototype.parse=function(a,b){this.id=kc(b,"id",rc),this.start=kc(b,"start",mc),this.a=kc(b,"duration",mc);var c=gc(this,b,Rb);this.s=bc(a.s,c),this.c=ec(this,b,Tb),this.f=ec(this,b,Wb),this.g=ec(this,b,Yb),this.b=gc(this,b,Lb),ac(this)},Lb.prototype.parse=function(a,b){var c=ec(this,b,Nb)||{},d=ec(this,b,Mb);this.id=kc(b,"id",rc),this.group=kc(b,"group",qc),this.lang=kc(b,"lang",rc,c.lang),this.contentType=kc(b,"contentType",rc,c.contentType),this.width=kc(b,"width",pc),this.height=kc(b,"height",pc),this.b=kc(b,"mimeType",rc),this.i=kc(b,"codecs",rc),this.c=d&&"main"==d.value,this.lang&&(this.lang=_(this.lang)),c=gc(this,b,Rb),this.s=bc(a.s,c),this.j=gc(this,b,Pb),!this.contentType&&this.b&&(this.contentType=this.b.split("/")[0]),this.f=a.c?dc(this,b,a.c):ec(this,b,Tb),this.g=a.f?dc(this,b,a.f):ec(this,b,Wb),this.h=a.g?dc(this,b,a.g):ec(this,b,Yb),this.a=gc(this,b,Ob),!this.b&&this.a.length&&(this.b=this.a[0].f,!this.contentType&&this.b&&(this.contentType=this.b.split("/")[0]))},Mb.prototype.parse=function(a,b){this.value=kc(b,"value",rc)},Nb.prototype.parse=function(a,b){this.id=kc(b,"id",rc),this.lang=kc(b,"lang",rc),this.contentType=kc(b,"contentType",rc),this.lang&&(this.lang=_(this.lang))},Ob.prototype.parse=function(a,b){this.id=kc(b,"id",rc),this.bandwidth=kc(b,"bandwidth",pc),this.width=kc(b,"width",pc,a.width),this.height=kc(b,"height",pc,a.height),this.f=kc(b,"mimeType",rc,a.b),this.h=kc(b,"codecs",rc,a.i),this.lang=a.lang;var c=gc(this,b,Rb);this.s=bc(a.s,c),this.c=gc(this,b,Pb),this.g=a.f?dc(this,b,a.f):ec(this,b,Tb),this.b=a.g?dc(this,b,a.g):ec(this,b,Wb),this.a=a.h?dc(this,b,a.h):ec(this,b,Yb),this.c=this.c.concat(a.j)},Pb.prototype.parse=function(a,b){this.f=b,this.c=kc(b,"schemeIdUri",rc);var c=kc(b,"cenc:default_KID",rc);c&&(this.b=c.replace(/[-]/g,"")),this.a=ec(this,b,Qb)},Qb.prototype.parse=function(a,b){var c=hc(b);if(c){this.psshBox=Xa(c);try{this.parsedPssh=new nb(this.psshBox)}catch(d){if(!(d instanceof RangeError))throw d}}},Rb.prototype.parse=function(a,b){this.url=hc(b)},Sb.prototype.parse=function(a,b){this.url=hc(b)},Tb.prototype.parse=function(a,b){this.s=a.s||this.s,this.g=kc(b,"timescale",pc,this.g),this.f=kc(b,"presentationTimeOffset",qc,this.f),this.a=kc(b,"indexRange",nc,this.a),this.b=ec(this,b,Ub)||this.b,this.c=ec(this,b,Vb)||this.c},Ub.prototype.parse=function(a,b){var c=kc(b,"sourceURL",rc);this.url=cc(a.s,c),this.a=kc(b,"range",nc,jc(a.a))},Vb.prototype.parse=function(a,b){var c=kc(b,"sourceURL",rc);this.url=cc(a.s,c),this.a=kc(b,"range",nc)},Wb.prototype.parse=function(a,b){this.s=a.s||this.s,this.f=kc(b,"timescale",pc,this.f),this.g=kc(b,"presentationTimeOffset",qc,this.g),this.b=kc(b,"duration",pc,this.b);var c=kc(b,"startNumber",pc);null!=c&&(this.i=c),this.h=ec(this,b,Vb)||this.h,this.a=(c=gc(this,b,Xb))&&0<c.length?c:this.a,this.c=ec(this,b,Zb)||this.c},Xb.prototype.parse=function(a,b){var c=kc(b,"media",rc);this.b=cc(a.s,c),this.a=kc(b,"mediaRange",nc)},Yb.prototype.parse=function(a,b){this.a=kc(b,"timescale",pc,this.a),this.i=kc(b,"presentationTimeOffset",qc,this.i),this.b=kc(b,"duration",pc,this.b);var c=kc(b,"startNumber",qc);null!=c&&(this.j=c),this.h=kc(b,"media",rc,this.h),this.f=kc(b,"index",rc,this.f),this.g=kc(b,"initialization",rc,this.g),this.c=ec(this,b,Zb)||this.c},Zb.prototype.parse=function(a,b){this.a=gc(this,b,$b)},$b.prototype.parse=function(a,b){this.b=kc(b,"t",qc),this.a=kc(b,"d",qc),this.c=kc(b,"r",oc)};var qf=!0;Se=sc.prototype,Se.rb=function(){if(this.a)return this.c;if(0==this.url.lastIndexOf("data:",0)){var b=this.url.split(":")[1].split(";").pop().split(","),c=b.pop(),c="base64"==b.pop()?a.atob(c.replace(/-/g,"+").replace(/_/g,"/")):a.decodeURIComponent(c);return"arraybuffer"==this.b.f&&(c=Wa(c).buffer),b=JSON.parse(JSON.stringify(new XMLHttpRequest)),b.response=c,b.responseText=c.toString(),c=this.c,c.resolve(b),uc(this),c}if(0==this.url.lastIndexOf("idb:",0))return wc(this);this.h++,this.i=Date.now(),this.g||(this.g=this.b.h),this.a=new XMLHttpRequest,b=this.url,qf&&(this.f&&!this.f.supportsCaching()||this.b.g)&&(b=new Ab(b),Ib(b.a,"_",Date.now()),b=b.toString()),this.a.open(this.b.method,b,!0),this.a.responseType=this.b.f,this.a.timeout=this.b.c,this.a.withCredentials=this.b.j,this.a.onload=this.zb.bind(this),this.b.g&&(this.a.onreadystatechange=this.Gb.bind(this)),this.a.onerror=this.Xb.bind(this),this.a.ontimeout=this.Lb.bind(this);for(c in this.b.b)this.a.setRequestHeader(c,this.b.b[c]);return this.a.send(this.b.body),this.c},Se.zb=function(a){this.f&&this.f.sample(Date.now()-this.i,a.loaded),200<=this.a.status&&299>=this.a.status?(this.c.resolve(this.a),uc(this)):this.h<this.b.a?yc(this):(a=xc(this,"HTTP error.","net"),this.c.reject(a),uc(this))},Se.Gb=function(){if(this.a.readyState==XMLHttpRequest.HEADERS_RECEIVED){var a=Date.parse(this.a.getResponseHeader("Date"));a&&(af=a-Date.now())}},Se.Xb=function(){var a=xc(this,"Network failure.","net");this.c.reject(a),uc(this)},Se.Lb=function(){if(this.h<this.b.a)yc(this);else{var a=xc(this,"Request timed out.","net");this.c.reject(a),uc(this)}},zc.prototype.g=function(){if(this.c){this.a=null;var a=this.c;if(a.a&&a.a.readyState!=XMLHttpRequest.DONE){a.a.abort();var b=xc(a,"Request aborted.","aborted");a.c.reject(b),uc(a)}this.c=null}},zc.prototype.clone=function(){return new zc(this.i,this.b.map(function(a){return a.clone()}),this.f,this.h)},zc.prototype.toString=function(){return this.b[0].toString()},Jc.prototype.destroy=function(){this.a&&(this.a.g(),this.a=null),this.b=null},Jc.prototype.create=function(){return this.a?Bc(this.a):Promise.resolve(this.b)},Oc.prototype.parse=function(a,b,c,d){var e=null;try{a:{var f=[],g=new K(a),h=N(g);if(1936286840!=N(g))e=null;else{1==h&&(h=O(g));var i=M(g);Q(g,3),Q(g,4);var j=N(g);if(0==j)e=null;else{var k,l;0==i?(k=N(g),l=N(g)):(k=O(g),l=O(g)),Q(g,2);var m=g.b.getUint16(g.a,g.c);for(g.a+=2,a=k,b=b+h+l,h=0;m>h;h++){var n=N(g);l=(2147483648&n)>>>31;var i=2147483647&n,o=N(g);if(N(g),1==l){e=null;break a}var p=new zc(d,c,b,b+i-1);f.push(new Kc(a/j,(a+o)/j,p)),a+=o,b+=i}e=f}}}}catch(q){if(!(q instanceof RangeError))throw q}return e},Pc.prototype.destroy=function(){this.o=null},Se=Pc.prototype,Se.length=function(){return this.o.length},Se.A=function(){if(0==this.o.length)throw new RangeError("SegmentIndex: There is no last SegmentReference.");return this.o[this.o.length-1]},Se.get=function(a){if(0>a||a>=this.o.length)throw new RangeError("SegmentIndex: The specified index is out of range.");return this.o[a]},Se.la=function(a){return a=Mc(this.o,a),a>=0?this.o[a]:null},Se.Ha=function(a){return Rc(this,a),!0},Se.ka=function(a){var b=a-this.i;return 0==b?0:(this.o=Nc(this.o,b),this.i=a,b)},Se.Ea=function(){return 0<this.length()?{start:Qc(this).b,end:this.A().a}:{start:0,end:0}},c(Sc,Pc),Sc.prototype.destroy=function(){this.w=this.g=null,Pc.prototype.destroy.call(this)},Sc.prototype.la=function(a){return Vc(this,J()/1e3),Pc.prototype.la.call(this,a)},Sc.prototype.Ha=function(a){return a instanceof Sc?(Rc(this,a),this.h=Math.max(this.h,a.h),null==this.c?(this.f=a.f,Tc(this)):Wc(this),!0):!1},Sc.prototype.ka=function(a){return a=Pc.prototype.ka.call(this,a),Math.min.apply(null,this.o.filter(function(a){return null!=a.a}).map(function(a){return a.a-a.b})),null!=this.c&&(this.l+=a,this.a+=a,this.c+=a),a},Sc.prototype.Ea=function(){return Uc(this,J()/1e3)},c(Xc,Sc),Xc.prototype.destroy=function(){this.B=this.u=null,Sc.prototype.destroy.call(this)},Xc.prototype.la=function(a){var b=J()/1e3;return Yc(this,b),Vc(this,b),Pc.prototype.la.call(this,a)},Xc.prototype.Ha=function(a){return null==this.b&&a instanceof Xc&&null!=a.b?(this.b=a.b,this.v=a.v,this.j=a.j,this.f=a.f,this.h=a.h,Rc(this,a),Yc(this,J()/1e3),Tc(this),!0):!1},Xc.prototype.ka=function(a){return a=Sc.prototype.ka.call(this,a),null!=this.b&&(this.b+=a,this.v+=a),a},Xc.prototype.Ea=function(){var a=J()/1e3;return Yc(this,a),Uc(this,a)},Zc.prototype.destroy=function(){this.g=this.c=this.b=this.f=null,this.a&&(this.a.destroy(),this.a=null)},Zc.prototype.create=function(){if(this.a)return Promise.resolve(this.a);if("dynamic"==this.f.type)try{this.a=new Xc(this.f,this.b,this.c,this.h,this.g)}catch(a){return Promise.reject(a)}else{var b;if(b=this.c.a,b=Fc(this.g,this.c,1,Math.ceil(this.b.a/(b.b/b.a)))){if(0<b.length){var c=b[b.length-1];b[b.length-1]=Lc(c,c.b,this.b.a)}b=new Pc(b)}else b=null;if(this.a=b,!this.a)return b=Error("Failed to generate SegmentReferences"),b.type="stream",Promise.reject(b)}return Promise.resolve(this.a)},$c.prototype.destroy=function(){this.f=this.g=this.b=this.c=null,this.a&&(this.a.destroy(),this.a=null)},$c.prototype.create=function(){if(this.a)return Promise.resolve(this.a);var a=this.g.b,b=[];a.c&&(b=Ic(a.c,a.f||1,this.b.a||0));var c=0;a.b&&a.i?c=(a.i-1)*a.b:0<b.length&&(c=b[0].start-(a.g||0));var d=a.a.length;0<b.length&&b.length!=a.a.length&&(d=Math.min(b.length,a.a.length));for(var e=[],f=0;d>f;++f){var g=a.a[f],h=c/a.f,i=null,j=null;a.b?(i=c+a.b,j=i/a.f):0<b.length?(i=b[f].end-(a.g||0),j=i/a.f):(j=h+this.b.a,i=j*a.f);var c=i,i=0,k=null;g.a&&(i=g.a.na,k=g.a.end),e.push(new Kc(h,j,new zc(this.f,g.b,i,k)))}return"dynamic"==this.c.type?this.a=new Sc(e,this.c,this.b,this.h):this.a=new Pc(e),Promise.resolve(this.a)},_c.prototype.destroy=function(){this.g=this.f=this.c=this.b=null,this.a&&(this.a.destroy(),this.a=null)},_c.prototype.create=function(){if(this.a)return Promise.resolve(this.a);for(var a=this.f.a,b=Ic(a.c,a.a||1,this.c.a||0),c=[],d=0;d<b.length;++d){var e=b[d].start,f=e/a.a,g=b[d].end/a.a,e=Gc(this.g,this.f,d+a.j,e);if(!e)return a=Error("Failed to generate media URL."),a.type="dash",Promise.reject(a);var h=(a.i||0)/a.a;c.push(new Kc(f-h,g-h,e))}return"dynamic"==this.b.type?this.a=new Sc(c,this.b,this.c,this.h):this.a=new Pc(c),Promise.resolve(this.a)},ad.prototype.destroy=function(){this.b=null,this.a&&(this.a.destroy(),this.a=null)},ad.prototype.create=function(){if(this.a)return Promise.resolve(this.a);for(var a=[],b=0;b<this.b.length;++b){var c=this.b[b];a.push(new Kc(c.start_time,c.end_time,new zc(null,[new Ab(c.url)],c.start_byte,null)))}return this.b=null,this.a=new Pc(a),Promise.resolve(this.a)};var rf=0;bd.prototype.destroy=function(){this.H&&(this.H.destroy(),this.H=null),this.D&&(this.D.destroy(),this.D=null)};var sf=0;dd.prototype.destroy=function(){for(var a=0;a<this.m.length;++a)this.m[a].destroy();this.a=this.m=null},fd.prototype.destroy=function(){for(var a=0;a<this.a.length;++a)this.a[a].destroy();this.a=null},gd.prototype.destroy=function(){for(var a=0;a<this.a.length;++a)this.a[a].destroy();this.a=null},c(id,oa),id.prototype.G=function(a){null!=a.initialStreamBufferSize&&(this.B=Number(a.initialStreamBufferSize)),null!=a.streamBufferSize&&(this.L=Number(a.streamBufferSize)),null!=a.segmentRequestTimeout&&(this.a.u=Number(a.segmentRequestTimeout))},id.prototype.destroy=function(){pd(this),this.h.destroy(),this.b=this.h=null,this.a.destroy(),this.v=this.c=this.a=null},Se=id.prototype,Se.oa=function(){return this.b},Se.cb=function(){return this.I},Se.sb=function(a){return this.f||a.then(function(){this.f=!0,this.g||od(this,0)}.bind(this))["catch"](function(){}),this.h},Se.Ga=function(){return this.j},Se.ra=function(a,b,c){if(a!=this.b){var d=[a.H.create(),a.D.create()];Promise.all(d).then(xa(this,function(d){if(this.c){var e=this.b;this.b=a,this.I=d[0],this.w=d[1],this.K=!0,this.l||(e?b&&jd(this,!0,c):od(this,0))}}))["catch"](xa(this,function(a){"aborted"!=a.type&&(this.f?(a=Z(a),this.dispatchEvent(a)):this.h.reject(a))}))}},Se.kb=function(){return jd(this,!1)},Se.lb=function(a){return 0<Na(this.a,a)&&0<=Mc(this.a.b,a)},Se.va=function(){},Se.Da=function(){return!0},Se.Nb=function(){if(this.u&&!this.f)this.g=null;else{var a;if((a=this.f&&!this.j)&&(a=1<this.a.c.buffered.length),a)jd(this,!0);else{this.g=null,a=this.b;var b=this.I,c=this.c.currentTime;Na(this.a,this.u?c:c+(this.i||0))>=(this.u?Math.max(this.B,this.L):this.B)?(ld(this),od(this,1e3/(Math.abs(this.c.playbackRate)||1))):(b=kd(this,c,b))?(b=Oa(this.a,b,a.c,this.w),this.w=null,this.K&&(this.K=!1,md(this,a)),this.j=!1,b.then(xa(this,function(a){null==this.i&&(this.i=a),this.F&&0<Na(this.a,c)&&(this.F=!1,this.c.currentTime+=.001),od(this,0)}))["catch"](xa(this,function(a){if("aborted"!=a.type){var b=[0,404,410];"net"==a.type&&-1!=b.indexOf(a.ac.status)&&this.b&&od(this,5e3),a=Z(a),this.dispatchEvent(a)}}))):(ld(this),this.f&&!this.j&&(this.j=!0,nd(this)),od(this,1e3))}}},qd.prototype.destroy=function(){this.a&&(this.a.destroy(),this.a=null)},qd.prototype.create=function(){if(this.a)return Promise.resolve(this.a);var a=new Kc(0,null,this.b);return this.a=new Pc([a]),Promise.resolve(this.a)},c(rd,oa),rd.prototype.G=function(){},rd.prototype.destroy=function(){this.a&&this.b.removeChild(this.a),this.c.destroy(),this.v=this.b=this.f=this.h=this.a=this.c=null},Se=rd.prototype,Se.oa=function(){return this.f},Se.cb=function(){return this.h},Se.sb=function(){return this.c},Se.Ga=function(){return!0},Se.ra=function(a){a.H.create().then(xa(this,function(b){if(this.b){if(0==b.length())return Promise.reject(Error("No subtitles URL available."));var c=this.f;this.f=a,this.h=b,b=Qc(b).url.b[0].toString();var d=this.Da();this.a&&(this.va(!1),this.b.removeChild(this.a)),this.a=document.createElement("track"),this.b.appendChild(this.a),this.a.src=b,this.va(d),b=Y({type:"adaptation",bubbles:!0,contentType:"text",size:null,bandwidth:a.bandwidth}),this.dispatchEvent(b),c||this.c.resolve(0)}}))},Se.kb=function(){},Se.lb=function(){return!0},Se.va=function(a){this.g=a,this.a&&(this.a.track.mode=a?"showing":"disabled")},Se.Da=function(){return this.a&&(this.g="showing"==this.a.track.mode),this.g},sd.prototype.parse=function(a,b,c,d){var e=null;try{var f,g=new R(b);if(440786851!=S(g).id)f=null;else{var h=S(g);if(408125543!=h.id)f=null;else{var i,j=h.a.byteOffset,k=new R(h.a);for(b=null;L(k.a);){var l=S(k);if(357149030==l.id){b=l;break}}if(b){for(var m=new R(b.a),k=1e6;L(m.a);){var n=S(m);if(2807729==n.id){k=V(n);break}}i=k/1e9}else i=null;f=i?{Tb:j,Yb:i}:null}}if(f){var o=S(new R(a));if(475249515!=o.id)e=null;else{var p=f.Tb,q=f.Yb;a=[];var r=new R(o.a);for(f=o=-1;L(r.a);){var s=S(r);if(187==s.id){var t,u=new R(s.a),v=S(u);if(179!=v.id)t=null;else{var w=V(v),x=S(u);if(183!=x.id)t=null;else{for(var y=new R(x.a),j=0;L(y.a);){var z=S(y);if(241==z.id){j=V(z);break}}t={$b:w,Sb:j}}}if(t){var A=q*t.$b,B=p+t.Sb;if(o>=0){var C=new zc(d,c,f,B-1);a.push(new Kc(o,A,C))}o=A,f=B}}}o>=0&&(C=new zc(d,c,f,null),a.push(new Kc(o,null,C))),e=a}}else e=null}catch(D){if(!(D instanceof RangeError))throw D}return e},td.prototype.destroy=function(){this.h=this.i=this.g=null,this.a.g(),this.a=null,this.c&&(this.c.g(),this.c=null),this.b=null},td.prototype.create=function(){if(this.b)return this.b;var a=[Bc(this.a)];return"webm"==this.f&&a.push(Bc(this.c)),this.b=Promise.all(a).then(xa(this,function(a){var b=a[0];a=a[1]||null;var c=null;if("mp4"==this.f?(c=new Oc,c=c.parse(new DataView(b),this.a.f,this.a.b,this.h)):"webm"==this.f&&(c=new sd,c=c.parse(new DataView(b),new DataView(a),this.a.b,this.h)),!c)return b=Error("Failed to parse SegmentReferences from "+this.a.toString()+" (or one of its fallbacks)."),b.type="stream",Promise.reject(b);var d;return d="dynamic"==this.g.type?new Sc(c,this.g,this.i,this.j):new Pc(c),Promise.resolve(d)}))},c(Kd,ya),Kd.prototype.g=function(a,b,c){var d=new ra;a={stream_id:c.qa,mime_type:a.a,codecs:a.b,init_segment:b,references:c.o};var e=Da(this).put(a);return e.onsuccess=function(){d.resolve(c.qa)},e.onerror=function(){d.reject(e.error)},d},Kd.prototype.f=function(a,b){for(var c=Promise.resolve(),d=0;d<a.length();++d)var e=a.get(d),f=d==a.length()-1,f=this.c.bind(this,e,b,f),c=c.then(this.i.bind(this,e)),c=c.then(f);return c.then(function(){return Promise.resolve(b)})["catch"](xa(this,function(a){return Qd(this,b.qa),Promise.reject(a)}))},Kd.prototype.c=function(a,b,c,d){var e=new ra;0==b.ja.byteLength&&(b.Ca=a),b.ja=Pd(b.ja,d),b.jb++;var f=Y({type:"progress",detail:b.jb/b.Zb*100,bubbles:!0});if(1048576<=b.ja.byteLength||c){c={stream_id:b.qa,segment_id:b.Ja,content:b.ja};var g=Ca(this).put(c);b.o.push({start_time:b.Ca.b,start_byte:b.Ca.url.f,end_time:a.a,url:"idb://"+b.qa+"/"+b.Ja}),b.Ja++,b.ja=new ArrayBuffer(0),g.onerror=function(){e.reject(g.error)},g.onsuccess=xa(this,function(){this.dispatchEvent(f),e.resolve()})}else this.dispatchEvent(f),e.resolve();return e},Kd.prototype.i=function(a){var b=new tc;return b.c=1e3*this.b,Bc(a.url,b,this.j)},c(Td,oa),Td.prototype.destroy=function(){this.v=null;for(var b=0;b<this.f.length;++b)this.f[b].close()["catch"](function(){});this.f=[],this.c=this.a=this.i=null,this.g.destroy(),this.g=null,this.l.destroy(),this.l=null,this.j&&(a.clearTimeout(this.j),this.j=null),this.h=this.b=null},Td.prototype.initialize=function(){for(var a=new ga,b=this.b.bb(),c=0;c<b.length;++c){var d=b[c];d.a.a||d.b&&!be(d.b)||a.push(d.contentType,d)}for(var c={},d=!1,e=0;e<b.length;++e){var f=b[e];if(f.a.a&&!a.a.hasOwnProperty(f.contentType)){var g=f.a.a,h=c[g];if(h||(h=f.a,h={audioCapabilities:void 0,videoCapabilities:void 0,initDataTypes:void 0,distinctiveIdentifier:h.g?"required":"optional",persistentState:h.v||this.b.ha()?"required":"optional",sessionTypes:[this.b.ha()?"persistent-license":"temporary"]},c[g]=h),f.b&&(g=f.contentType+"Capabilities",g in h)){d=!0,h[g]||(h[g]=[]);var i;"audio"==f.contentType?i=f.a.f:"video"==f.contentType&&(i=f.a.j),h[g].push({contentType:f.b,robustness:i})}}}if(!d){if(!b.length)throw a=Error("No DrmInfo exists!"),a.type="drm",a;this.a=b[0].a}return 0==Object.keys(c).length?(this.b.Ka(a),this.g.resolve(),Promise.resolve()):(i=new ra,c=Wd(this,c,i),c=c.then(this.tb.bind(this,b,a)),c=c.then(this.Ub.bind(this)),i.reject(null),c)},Se=Td.prototype,
Se.tb=function(a,b,c){if(!this.h)return Xd();for(var d=c.keySystem,e=c.getConfiguration(),f=["audio","video"],g=0;g<f.length;++g){var h=f[g];if(!b.a.hasOwnProperty(h)){var i=e[h+"Capabilities"];if(i&&i.length){for(var i=i[0],j=[],k={},l=0;l<a.length;++l){var m=a[l];if(m.a.a==d&&m.b==i.contentType&&!(m.id in k)){j.push(m),k[m.id]=!0;var n;if(this.a){n=this.a;var m=m.a,o=new $a;o.a=n.a,o.h=n.h,o.i=n.i,o.l=n.l,o.u=n.u,o.g=n.g,o.v=n.v,o.f=n.f,o.j=n.j,o.c=n.c?new Uint8Array(n.c.buffer):null,ab(o,n.b),ab(o,m.b),n=o}else n=m.a;this.a=n}}b.set(h,j)}}}return this.b.Ka(b),c.createMediaKeys()},Se.Ub=function(a){return this.h?(this.i=a,this.h.setMediaKeys(this.i).then(xa(this,function(){return this.h?this.a.c?this.i.setServerCertificate(this.a.c):Promise.resolve():Xd()})).then(xa(this,function(){if(!this.h)return Xd();if(0<this.b.ua().length)Yd(this);else{for(var a=0;a<this.a.b.length;++a){var b=this.a.b[a];this.eb({type:"encrypted",initDataType:b.initDataType,initData:b.initData})}0==this.a.b.length&&la(this.l,this.h,"encrypted",this.eb.bind(this))}}))):Xd()},Se.eb=function(a){for(var b=new Uint8Array(a.initData),c=0;c<this.c.length;++c)if(Za(b,this.c[c].data))return;try{var d=Zd(this)}catch(e){return b=Z(e),this.dispatchEvent(b),void this.g.reject(e)}a=d.generateRequest(a.initDataType,a.initData),this.c.push({data:b,La:d}),a["catch"](xa(this,function(a){if(this.h){for(var b=0;b<this.c.length;++b)if(this.c[b].La==d){this.c.splice(b,1);break}b=Z(a),this.dispatchEvent(b),this.g.reject(a)}})),this.f.push(d)},Se.Jb=function(a){$d(this,a.target,this.a,a.message)},Se.yb=function(a){a=a.target;for(var b=a.keyStatuses,c={},d=b.keys(),e=d.next();!e.done;e=d.next()){var f=Ya(new Uint8Array(e.value)),e=b.get(e.value);c[f]=e}if(a.expiration<Date.now()){for(b=0;b<this.c.length;++b)if(this.c[b].La==a){this.c.splice(b,1);break}a.close(),this.f.splice(this.f.indexOf(a),1)}this.b.fb(c)},c(ae,oa),b("shaka.player.Player",ae),ae.version="v1.6.2",ae.isBrowserSupported=function(){return!!(a.MediaSource&&a.MediaKeys&&a.navigator&&a.navigator.requestMediaKeySystemAccess&&a.MediaKeySystemAccess&&a.MediaKeySystemAccess.prototype.getConfiguration&&a.Promise&&Element.prototype.requestFullscreen&&document.exitFullscreen&&"fullscreenElement"in document&&a.Uint8Array)},ae.isTypeSupported=be,ae.setTextStyle=function(a){var b=document.getElementById("ShakaPlayerTextStyle");for(b||(b=document.createElement("style"),b.id="ShakaPlayerTextStyle",document.head.appendChild(b)),b=b.sheet;b.cssRules.length;)b.deleteRule(0);b.insertRule("::cue { "+l(a)+" }",0)},ae.prototype.destroy=function(){return this.u().then(xa(this,function(){this.f.destroy(),this.a=this.f=null}))["catch"](function(){})},ae.prototype.destroy=ae.prototype.destroy,ae.prototype.u=function(){if(!this.b)return Promise.resolve();this.h&&ge(this),this.a.pause(),ma(this.f),fe(this),de(this),this.j&&(this.j.destroy(),this.j=null),this.a.src="";var a=this.a.setMediaKeys(null);return this.b&&(this.b.destroy(),this.b=null),this.h=!1,this.g=new Gd,a},ae.prototype.unload=ae.prototype.u,ae.prototype.ea=function(a){var b=this.u();return this.a.autoplay&&(f("load"),la(this.f,this.a,"timeupdate",this.xb.bind(this))),a.T(this.c),a.pb(this.G),this.G=null,b=b.then(xa(this,function(){return a.X()})),b["catch"](xa(this,function(b){return a.destroy(),Promise.reject(b)})),b.then(xa(this,function(){return this.a?(this.b=a,la(this.f,this.b,"seekrangechanged",this.Hb.bind(this)),this.j=new Td(this,this.a,this.b),this.j.initialize()):ce()})).then(xa(this,function(){return this.a?(la(this.f,this.a,"error",this.Vb.bind(this)),la(this.f,this.a,"playing",this.Fb.bind(this)),la(this.f,this.a,"pause",this.Eb.bind(this)),this.b.Wa(this,this.a)):ce()})).then(xa(this,function(){return this.a?void ee(this):ce()}))["catch"](xa(this,function(a){if(!this.a)return ce();if("destroy"!=a.type){var b=Z(a);this.dispatchEvent(b)}return this.u().then(function(){return Promise.reject(a)})}))},ae.prototype.load=ae.prototype.ea,Se=ae.prototype,Se.xb=function(){g("load"),this.g.playbackLatency=h("load")/1e3,this.f.sa(this.a,"timeupdate")},Se.Vb=function(){if(this.a.error){var a=this.a.error.code;a!=MediaError.MEDIA_ERR_ABORTED&&(a=Error(tf[a]||"Unknown playback error."),a.type="playback",a=Z(a),this.dispatchEvent(a))}},Se.Fb=function(){f("playing"),!this.i&&0>this.l&&(this.a.playbackRate=0,this.B(this.a.currentTime,Date.now(),this.l)),this.h&&ge(this)},Se.Eb=function(){g("playing");var a=h("playing");if(!isNaN(a)){var b=this.g;b.playTime+=a/1e3}de(this)},Se.Hb=function(a){this.F=a.start},Se.qb=function(){if(!this.a.paused){g("playing");var a=h("playing");if(!isNaN(a)){var b=this.g;b.playTime+=a/1e3,f("playing")}}return a=this.g,b=this.a,b.getVideoPlaybackQuality&&(b=b.getVideoPlaybackQuality(),a.decodedFrames=b.totalVideoFrames,a.droppedFrames=b.droppedVideoFrames),this.g},ae.prototype.getStats=ae.prototype.qb,ae.prototype.da=function(){return this.b?this.b.ma():[]},ae.prototype.getVideoTracks=ae.prototype.da,ae.prototype.Y=function(){return this.b?this.b.pa():[]},ae.prototype.getAudioTracks=ae.prototype.Y,ae.prototype.$=function(){return this.b?this.b.Oa():[]},ae.prototype.getTextTracks=ae.prototype.$,ae.prototype.selectVideoTrack=function(a,b){return this.b?this.b.selectVideoTrack(a,void 0==b?!0:b):!1},ae.prototype.selectVideoTrack=ae.prototype.selectVideoTrack,ae.prototype.M=function(a,b){return this.b?this.b.nb(a,void 0==b?!0:b):!1},ae.prototype.selectAudioTrack=ae.prototype.M,ae.prototype.fa=function(a){return this.b?this.b.ob(a,!1):!1},ae.prototype.selectTextTrack=ae.prototype.fa,ae.prototype.V=function(a){this.b&&this.b.Na(a)},ae.prototype.enableTextTrack=ae.prototype.V,ae.prototype.T=function(a){de(this),a>=0?this.a.playbackRate=a:this.a.paused||(this.a.playbackRate=0,this.B(this.a.currentTime,Date.now(),a)),this.l=a},ae.prototype.setPlaybackRate=ae.prototype.T,ae.prototype.K=function(){return this.l},ae.prototype.getPlaybackRate=ae.prototype.K,ae.prototype.R=function(a){this.G=a},ae.prototype.setPlaybackStartTime=ae.prototype.R,ae.prototype.I=function(){return this.b?this.b.mb():!1},ae.prototype.isLive=ae.prototype.I,ae.prototype.U=function(a){if(a){var b=ba(a,"enableAdaptation");null!=b&&(this.c.enableAdaptation=b),b=ca(a,"streamBufferSize"),null!=b&&(this.c.streamBufferSize=b),b=ca(a,"liveStreamEndTimeout"),null!=b&&(this.c.liveStreamEndTimeout=b),b=ca(a,"licenseRequestTimeout"),null!=b&&(this.c.licenseRequestTimeout=b),b=ca(a,"mpdRequestTimeout"),null!=b&&(this.c.mpdRequestTimeout=b),b=ca(a,"segmentRequestTimeout"),null!=b&&(this.c.segmentRequestTimeout=b),b=da(a,"preferredLanguage"),null!=b&&(this.c.preferredLanguage=b),b=fa(a,"restrictions",j),null!=b&&(this.c.restrictions=b.clone()),a=ba(a,"disableCacheBustingEvenThoughItMayAffectBandwidthEstimation"),null!=a&&(qf=!a),this.b&&this.b.T(this.c)}},ae.prototype.configure=ae.prototype.U,ae.prototype.Z=function(){return this.c},ae.prototype.getConfiguration=ae.prototype.Z,ae.prototype.B=function(b,c,d){this.i=null;var e=(Date.now()-c)/1e3*d;this.a.currentTime<this.F+(this.I()?1:.05)?this.a.pause():(e=Math.max(this.F,b+e),this.a.currentTime=e,this.i=a.setTimeout(this.B.bind(this,b,c,d),250))},ae.prototype.L=function(){if(ee(this),!this.a.ended&&!this.a.seeking){var a=this.a.buffered,b=a.length?a.end(a.length-1):0,a=Math.max(b-this.a.currentTime,0),c=this.a.duration,c=isNaN(c)?0:Math.max(c-.05,0),b=b>=c||this.a.currentTime>=c;this.h?(c=this.b.ab(),(b||a>c)&&(ge(this),this.a.play())):!this.a.paused&&!b&&.5>a&&(this.h=!0,this.a.pause(),this.g.bufferingHistory.push(J()/1e3),f("buffering"),this.dispatchEvent(Y({type:"bufferingStart"})))}};var tf={2:"A network failure occured while loading media content.",3:"The browser failed to decode the media content.",4:"The browser does not support the media content."};ke.prototype.destroy=function(){this.a.destroy(),this.a=null},ke.prototype.update=function(a){var b=le(a),c=le(this.a);return Promise.all([b,c]).then(xa(this,function(b){var c=b[0];b=b[1];var d=this.a.a;return he(d),ie(d),a.f=this.a.f,a.g=this.a.g?this.a.g.clone():null,a.c=this.a.c,d=[],me(a,this.a,c,b,d),c=a.a,he(c),ie(c),Promise.resolve(d)}))},b("shaka.media.SimpleAbrManager",qe),qe.prototype.destroy=function(){this.f.destroy(),this.a=this.b=this.f=null},qe.prototype.initialize=function(a,b){this.b||this.a||(this.b=a,this.a=b)},qe.prototype.start=function(){this.b&&this.a&&!this.g&&(this.c=Date.now()+4e3,la(this.f,this.b,"bandwidth",this.v.bind(this)),la(this.f,this.a,"adaptation",this.j.bind(this)),la(this.f,this.a,"trackschanged",this.h.bind(this)),this.g=!0)},qe.prototype.enable=function(a){this.i=a},qe.prototype.getInitialVideoTrackId=function(){if(!this.b||!this.a)return null;var a=re(this);return a?a.id:null},qe.prototype.selectVideoTrack=function(a,b,c){this.g&&this.a.selectVideoTrack(a.id,b,c)},qe.prototype.v=function(){Date.now()<this.c||this.h()},qe.prototype.h=function(){if(this.i){var a=re(this);if(a){if(a.active)return void(this.c=Date.now()+3e3);this.selectVideoTrack(a,!1)}this.c=Number.POSITIVE_INFINITY}},qe.prototype.j=function(){this.c==Number.POSITIVE_INFINITY&&(this.c=Date.now()+3e4)},c(se,oa),b("shaka.player.HttpVideoSource",se),se.prototype.T=function(){},se.prototype.destroy=function(){this.a&&(this.a.parentElement.removeChild(this.a),this.a=null),this.v=this.b=null},Se=se.prototype,Se.Wa=function(a,b){this.v=a;var c=b.mediaKeys;return b.src=this.f,c=b.setMediaKeys(c),this.c&&(this.a=document.createElement("track"),this.a.src=this.c,b.appendChild(this.a),this.a.track.mode="showing"),c},Se.X=function(){return Promise.resolve()},Se.ma=function(){return[]},Se.pa=function(){return[]},Se.Oa=function(){return[]},Se.ab=function(){return 5},Se.bb=function(){var a=new hd;return a.a=this.b,[a]},Se.Ka=function(){},se.prototype.selectVideoTrack=function(){return!1},Se=se.prototype,Se.nb=function(){return!1},Se.ob=function(){return!1},Se.Na=function(a){this.a&&(this.a.track.mode=a?"showing":"disabled")},Se.pb=function(){},Se.ua=function(){return[]},Se.ha=function(){return!1},Se.mb=function(){return!1},Se.fb=function(a){for(var b in a){var c=a[b],d=cf[c]||null;if(d){var e=sa(b),d=Error("Key "+e+" is not usable. "+d);d.type="drm",d.code=c,c=Z(d),this.dispatchEvent(c)}}},c(te,oa),b("shaka.player.StreamVideoSource",te),te.prototype.T=function(a){null!=a.streamBufferSize&&(this.G.streamBufferSize=a.streamBufferSize),null!=a.segmentRequestTimeout&&(this.G.segmentRequestTimeout=a.segmentRequestTimeout),Me(this),null!=a.enableAdaptation&&this.I.enable(Boolean(a.enableAdaptation)),null!=a.mpdRequestTimeout&&(this.da=Number(a.mpdRequestTimeout)),null!=a.liveStreamEndTimeout&&(this.Ua=Number(a.liveStreamEndTimeout)),null!=a.preferredLanguage&&(this.K=_(String(a.preferredLanguage))),null!=a.restrictions&&(this.h=a.restrictions,this.L&&we(this))},te.prototype.destroy=function(){this.B.destroy(),this.ea.destroy(),this.ea=this.B=null,this.Y&&(a.clearTimeout(this.Y),this.Y=null),this.V&&(a.clearTimeout(this.V),this.V=null),this.u=null,this.i.destroy(),this.i=null,aa(this.c).forEach(function(a){a.destroy()}),this.b=this.c=null,this.a&&(this.a.destroy(),this.a=null),this.I.destroy(),this.v=this.h=this.U=this.f=this.g=this.Z=this.I=null},Se=te.prototype,Se.Wa=function(b,c){if(!this.L){var d=Error("Cannot call attach() right now.");return d.type="app",Promise.reject(d)}return this.v=b,this.f=c,this.U=b.qb(),la(this.i,this.g,"sourceopen",this.Ab.bind(this)),la(this.i,this.Z,"bandwidth",this.Wb.bind(this)),this.a.b&&(la(this.i,b,"bufferingStart",this.wb.bind(this)),la(this.i,b,"bufferingEnd",this.vb.bind(this))),d=this.f.mediaKeys,this.f.src=a.URL.createObjectURL(this.g),d=this.f.setMediaKeys(d),Promise.all([this.B,d])},Se.X=function(){if(this.L){var a=Error("Cannot call load() right now.");return a.type="app",Promise.reject(a)}return this.a&&0!=this.a.a.length?(a=this.a.a,he(a),ie(a),0==this.a.a.length||0==this.a.a[0].a.length?(a=Error("The manifest specifies content that cannot be displayed on this browser/platform."),a.type="stream",Promise.reject(a)):(this.L=!0,this.G.initialStreamBufferSize=this.a.c,Me(this),we(this),Promise.resolve())):(a=Error("The manifest does not specify any content."),a.type="stream",Promise.reject(a))},Se.ib=function(a){var b=Date.now(),c=this.V=null,d=this.a.g;(a?this.gb():this.hb(d)).then(xa(this,function(a){return c=new ke(a),c.update(this.a)})).then(xa(this,function(a){c.destroy(),c=null;for(var d=0;d<a.length;++d)ve(this,a[d]);this.G.initialStreamBufferSize=this.a.c,Me(this),we(this),0==Object.keys(this.c).length?Ae(this):ue(this,(Date.now()-b)/1e3)}))["catch"](xa(this,function(a){c&&(c.destroy(),c=null),"aborted"!=a.type&&(a=Z(a),this.dispatchEvent(a),this.a&&ue(this,0))}))},Se.hb=function(){return Promise.reject("Cannot update manifest with this VideoSource implementation.")},Se.gb=function(){return Promise.reject("Cannot update manifest with this VideoSource implementation.")},Se.ma=function(){if(!this.b.a.hasOwnProperty("video"))return[];for(var a=this.c.video,a=(a=a?a.oa():null)?a.C:0,b=[],c=this.b.get("video"),d=0;d<c.length;++d)for(var e=c[d],f=0;f<e.m.length;++f){var g=e.m[f];if(g.N&&g.J){var h=g.C,g=new o(h,g.bandwidth,g.width,g.height);h==a&&(g.active=!0),b.push(g)}}return b},te.prototype.getVideoTracks=te.prototype.ma,te.prototype.pa=function(){if(!this.b.a.hasOwnProperty("audio"))return[];for(var a=this.c.audio,a=(a=a?a.oa():null)?a.C:0,b=[],c=this.b.get("audio"),d=0;d<c.length;++d)for(var e=c[d],f=e.lang,g=0;g<e.m.length;++g){var h=e.m[g];if(h.N&&h.J){var j=h.C,h=new i(j,h.bandwidth,f);j==a&&(h.active=!0),b.push(h)}}return b},te.prototype.getAudioTracks=te.prototype.pa,te.prototype.Oa=function(){if(!this.b.a.hasOwnProperty("text"))return[];for(var a=this.c.text,b=a?a.oa():null,b=b?b.C:0,c=[],d=this.b.get("text"),e=0;e<d.length;++e)for(var f=d[e],g=f.lang,h=0;h<f.m.length;++h){var i=f.m[h].C,j=new n(i,g);i==b&&(j.active=!0,j.enabled=a.Da()),c.push(j)}return c},te.prototype.getTextTracks=te.prototype.Oa,te.prototype.ab=function(){return Number(this.G.initialStreamBufferSize)},te.prototype.bb=function(){var a;if(this.L){a=this.a.a[0];for(var b=[],c=0;c<a.a.length;++c)b.push.apply(b,ed(a.a[c]));a=b}else a=[];return a},te.prototype.Ka=function(a){if(this.L){for(var b={},c=this.a.a[0],d=0;d<c.a.length;++d){var e=c.a[d];b[e.C]=e}for(this.b.a={},c=ja(a),d=0;d<c.length;++d){var e=c[d],f=a.get(e);if("video"==e){var g=f[0].id;this.b.push(e,b[g])}else if("audio"==e)for(var g=f[0].b.split(";")[0],h=0;h<f.length;++h){var i=f[h];i.b.split(";")[0]==g&&this.b.push(e,b[i.id])}else for(h=0;h<f.length;++h)g=f[h].id,this.b.push(e,b[g])}this.fa=!0,(a=this.b.get("audio"))&&(ze(this,a),this.b.set("audio",a),a=a[0].lang||this.K,$(2,this.K,a)&&(this.fa=!1)),(a=this.b.get("text"))&&(ze(this,a),this.b.set("text",a),a=a[0].lang||this.K,$(2,this.K,a)||(this.fa=!1))}},te.prototype.selectVideoTrack=function(a,b,c){return ye(this,"video",a,b,c)},Se=te.prototype,Se.nb=function(a,b){return ye(this,"audio",a,b)},Se.ob=function(a,b){return ye(this,"text",a,b)},Se.Na=function(a){var b=this.c.text;b&&b.va(a)},Se.pb=function(a){this.$=a},Se.ua=function(){return[]},Se.ha=function(){return!1},Se.mb=function(){return this.a?this.a.b:!1},Se.fb=function(a){for(var b,c=!1,d=new ga,e=ha(this.b),f=0;f<e.length;++f)for(var g=e[f],h=0;h<g.m.length;++h){var i=g.m[h];i.f.forEach(function(a){d.push(a,i)})}for(b in a)if(e=cf[a[b]]||null,g=d.get(b))for(f=0;f<g.length;++f)i=g[f],h=i.N,i.N=!e,h!=i.N&&(c=!0);else sa(b);c&&(xe(this),b=this.pa(),a=this.ma(),b=this.b.a.hasOwnProperty("audio")&&0==b.length,a=this.b.a.hasOwnProperty("video")&&0==a.length,b||a)&&(a=Error("The key system has restricted all "+(b&&a?"audio and video tracks.":b?"audio tracks.":"video tracks.")),a.type="drm",a=Z(a),this.dispatchEvent(a))},Se.Ab=function(){this.i.sa(this.g,"sourceopen"),Ae(this).then(xa(this,function(){this.B&&this.B.resolve()}))["catch"](xa(this,function(a){this.B&&this.B.reject(a)}))},Se.ub=function(a){d(a&&a.length==Object.keys(this.c).length);for(var b=Number.POSITIVE_INFINITY,c=Number.NEGATIVE_INFINITY,e=0;e<a.length;++e)var f=a[e],b=Math.min(b,f),c=Math.max(c,f);for(a=Je(this),e=0;e<a.length;++e)a[e].ka(c);Fe(this,a,c),e=ha(this.b).map(function(a){return a.m}).reduce(function(a,b){return a.concat(b)},[]).map(function(a){var b=[a.H.create()];return a.D&&b.push(a.D.create()),Promise.all(b)}),Promise.all(e).then(xa(this,function(a){for(var b=0;b<a.length;++b)a[b][0].ka(c);this.Ra=!0;for(var d in this.u)a=this.u[d],b=this.c[d],Hd(this.U,a.Pa),b.ra(a.Pa,a.Xa,a.Ya);this.u={}}))["catch"](xa(this,function(a){"aborted"!=a.type&&(a=Z(a),this.dispatchEvent(a))}))},Se.Mb=function(){this.Y=null,Le(this);var b=Ke(this,Je(this));b&&(this.a.b&&this.Ta!=b.A&&(this.Ta=b.A,null!=this.w&&(a.clearTimeout(this.w),this.w=null)),He(this,b.start,b.end),this.f.paused||Ie(this,this.f.currentTime,b.start,b.end))},Se.Ib=function(){var a=this.f.currentTime;if(null!=this.F){if(a>=this.F-.01&&a<=this.F+.01)return void(this.F=null);this.F=null}var b=Ke(this,Je(this));if(b){var c=b.end;if((b=Ie(this,a,b.start,c))||(c+.01>=a?b=!1:(this.f.currentTime=c,b=!0)),!b)for(var d in this.c)this.c[d].kb()}},Se.Kb=function(){if(!this.a.b){for(var a in this.c)if(!this.c[a].Ga())return;this.$a()}},Se.wb=function(){aa(this.c).every(function(a){return a.Ga()})&&(this.w=a.setTimeout(this.$a.bind(this),1e3*this.Ua))},Se.vb=function(){null!=this.w&&(a.clearTimeout(this.w),this.w=null)},Se.Wb=function(){var a=this.U,b=this.Z.getBandwidth();a.estimatedBandwidth=b,a.bandwidthHistory.push(new Jd(b))},Se.$a=function(){this.w=null,this.g.endOfStream()},c(Ne,te),b("shaka.player.DashVideoSource",Ne),Ne.prototype.Aa=function(a,b,c){this.R.push(a),this.ga.push(b||""),this.ta.push(c||"")},Ne.prototype.addExternalCaptions=Ne.prototype.Aa,Ne.prototype.xa=function(a){this.j=a},Ne.prototype.setNetworkCallback=Ne.prototype.xa,Ne.prototype.destroy=function(){this.l=this.j=this.M=null,te.prototype.destroy.call(this)},Ne.prototype.X=function(){var a=new zc(this.j,[new Ab(this.za)]);return Ec(new Dc(a,this.da)).then(xa(this,function(a){this.l=a;for(var b=0;b<this.R.length;b++){var c=a,d=this.R[b],e=this.ga[b],f=this.ta[b];if(0!==c.a.length){var g=new Lb;g.contentType="text",g.lang=e||"en",g.c=!0,e=new Ob,e.bandwidth=0,e.f=f||"text/vtt",e.s=[new Ab(d)],g.a.push(e),c.a[0].b.push(g),ac(c.a[0])}}return this.a=vd(new ud(this.M),a,this.j),te.prototype.X.call(this)}))},Ne.prototype.hb=function(a){return Ec(new Dc(a,this.da)).then(xa(this,function(a){return this.l=a,a=vd(new ud(this.M),a,this.j),Promise.resolve(a)}))},Ne.prototype.gb=function(){var a=vd(new ud(this.M),this.l,this.j);return Promise.resolve(a)},c(Oe,te),b("shaka.player.OfflineVideoSource",Oe),Oe.prototype.T=function(a){null!=a.licenseRequestTimeout&&(this.l.licenseRequestTimeout=a.licenseRequestTimeout),null!=a.segmentRequestTimeout&&(this.l.segmentRequestTimeout=a.segmentRequestTimeout),te.prototype.T.call(this,a)},b("shaka.player.OfflineVideoSource.retrieveGroupIds",function(){var a=new Ha,b=za(a).then(function(){return Ia(a)});return b.then(function(){Aa(a)})["catch"](function(){Aa(a)}),b}),Oe.prototype.xa=function(b,c,d,e){var f,g=null,h={},i=[];return b=new zc(this.ga,[new Ab(b)]),Ec(new Dc(b,this.da)).then(xa(this,function(a){return this.a=vd(new ud(d),a,this.ga),this.a.b?(a=Error("Unable to store live streams offline."),a.type="app",Promise.reject(a)):(this.T({preferredLanguage:c}),te.prototype.X.call(this))})).then(xa(this,function(){var b=document.createElement("video");return b.src=a.URL.createObjectURL(this.g),f=new Td(null,b,this),null!=this.l.licenseRequestTimeout&&(f.w=Number(this.l.licenseRequestTimeout)),la(this.i,f,"sessionReady",this.ta.bind(this)),la(this.i,f,"error",function(a){g=a}),f.initialize()})).then(xa(this,function(){for(var a=ha(this.b),b=0;b<a.length;++b)for(var c=a[b],d=0;d<c.m.length;++d){var f=c.m[d];h[f.C]=f}return e()})).then(xa(this,function(a){for(var b=0;b<a.length;++b){var c=a[b],d=h[c];if(!d)return Promise.reject(Error("Invalid stream ID chosen: "+c));i.push(d)}var e=["audio","video"];return i=i.filter(function(a){return!(0>e.indexOf(a.a.split("/")[0]))}),a=i.map(function(a){return a.D.create()}),Promise.all(a)})).then(xa(this,function(a){for(var b=i,c=[],d=0;d<b.length;++d)try{c[d]=this.g.addSourceBuffer(cd(b[d]))}catch(e){}if(b.length!=c.length)a=Error("Error initializing streams."),a.type="storage",a=Promise.reject(a);else{for(d=0;d<a.length;++d)(b=a[d])&&c[d].appendBuffer(b);a=Promise.resolve()}return a})).then(xa(this,function(){return Ud(f,this.timeoutMs)})).then(xa(this,function(){return g?Promise.reject(g):Pe(this,i,f.a,this.a.a[0].b)})).then(xa(this,function(a){return this.R=a,g?(Qe(this),Promise.reject(g)):Promise.resolve(a)}))},b("shaka.player.OfflineVideoSource.prototype.store",Oe.prototype.xa),Oe.prototype.Aa=function(a){this.ga=a},Oe.prototype.setNetworkCallback=Oe.prototype.Aa,Oe.prototype.ta=function(a){this.M.push(a.detail.sessionId)},Oe.prototype.X=function(){var a,b,c=new Ha;return za(c).then(xa(this,function(){return Ja(c,this.R)})).then(xa(this,function(d){var e=[];this.M=d.session_ids,a=d.duration,b={keySystem:d.key_system,distinctiveIdentifierRequired:d.distinctive_identifier,persistentStorageRequired:!0,audioRobustness:d.audio_robustness,videoRobustness:d.video_robustness,withCredentials:d.with_credentials,licenseServerUrl:d.license_server};for(var f=0;f<d.stream_ids.length;++f)e.push(Ka(c,d.stream_ids[f]));return Promise.all(e)})).then(xa(this,function(c){var d=a,e=b,f=new gd;f.c=5;for(var g=new fd,h=0;h<c.length;++h){var i=c[h],j=new bd,k=new ad(i.references),l=new Jc(null,i.init_segment);j.H=k,j.D=l,j.a=i.mime_type,j.b=i.codecs,j.N=!0,this.j&&(null!=this.j.licenseServerUrl&&(e.licenseServerUrl=this.j.licenseServerUrl),null!=this.j.withCredentials&&(e.withCredentials=this.j.withCredentials),e.licensePostProcessor=this.j.licensePostProcessor,e.licensePreProcessor=this.j.licensePreProcessor,e.serverCertificate=this.j.serverCertificate),i=_a(e),k=new dd,k.m.push(j),k.a.push(i),k.contentType=j.a.split("/")[0],g.a.push(k),g.b=d}return f.a.push(g),this.a=f,te.prototype.X.call(this)})).then(function(){return Aa(c),Promise.resolve()})["catch"](function(a){return Aa(c),Promise.reject(a)})},Oe.prototype.za=function(a,b){a&&(this.j={licenseServerUrl:a.licenseServerUrl,withCredentials:a.withCredentials,serverCertificate:a.serverCertificate,licensePreProcessor:a.licensePreProcessor,licensePostProcessor:a.licensePostProcessor});var c=null;return Re(this)["catch"](function(a){return b?(c=a,Promise.resolve()):Promise.reject(a)}).then(xa(this,function(){return Qe(this)})).then(function(){return Promise.resolve(c)})},Oe.prototype.deleteGroup=Oe.prototype.za,Oe.prototype.ua=function(){return this.M},Oe.prototype.ha=function(){return!0}}).bind(e,this)(),"undefined"!=typeof a&&a.exports?a.exports=e.shaka:(d=function(){return e.shaka}.call(b,c,b,a),!(void 0!==d&&(a.exports=d)))}()}});webpackJsonpjwplayer([3],{106:function(a,b,c){var d,e;d=[c(48),c(55),c(45),c(46),c(62),c(101),c(86),c(47)],e=function(a,b,c,d,e,f,g,h){function i(i,l){function m(){window.YT&&window.YT.loaded?(H=window.YT,p()):setTimeout(m,100)}function n(){j&&(j.off(),j=null)}function o(){var a=J&&J.parentNode;return a?a:(L||(window.jwplayer(i).onReady(p),L=!0),!1)}function p(){H&&o()&&M&&M.apply(G)}function q(){if(I&&I.getPlayerState){var a=I.getPlayerState();null!==a&&void 0!==a&&a!==P&&z({data:a});var b=H.PlayerState;a===b.PLAYING?s():a===b.BUFFERING&&t()}}function r(a){return Math.round(10*a)/10}function s(){t(),G.trigger(d.JWPLAYER_MEDIA_TIME,{position:r(I.getCurrentTime()),duration:I.getDuration()})}function t(){var a=0;I&&I.getVideoLoadedFraction&&(a=Math.round(100*I.getVideoLoadedFraction())),K!==a&&(K=a,G.trigger(d.JWPLAYER_MEDIA_BUFFER,{bufferPercent:a}))}function u(){G.state!==e.IDLE&&G.state!==e.COMPLETE&&(Q=!0,G.trigger(d.JWPLAYER_MEDIA_BEFORECOMPLETE),G.setState(e.COMPLETE),Q=!1,G.trigger(d.JWPLAYER_MEDIA_COMPLETE))}function v(){G.trigger(d.JWPLAYER_MEDIA_META,{duration:I.getDuration(),width:J.clientWidth,height:J.clientHeight})}function w(){var a=arguments,b=a.length-1;return function(){for(var c=b,d=a[b].apply(this,arguments);c--;)d=a[c].call(this,d);return d}}function x(a,b){if(!a)throw"invalid Youtube ID";var d=J.parentNode;if(d){var e={height:"100%",width:"100%",videoId:a,playerVars:c.extend({html5:1,autoplay:0,controls:0,showinfo:0,rel:0,modestbranding:0,playsinline:1,origin:location.protocol+"//"+location.hostname},b),events:{onReady:y,onStateChange:z,onPlaybackQualityChange:A,onError:B}};G.setVisibility(!0),I=new H.Player(J,e),J=I.getIframe(),M=null}}function y(){N&&(N.apply(G),N=null)}function z(b){var f=H.PlayerState;switch(P=b.data){case f.UNSTARTED:return void(a.isAndroid()&&I.playVideo());case f.ENDED:return void u();case f.PLAYING:return c.isFunction(I.unloadModule)&&I.unloadModule("captions"),R=!1,v(),G.trigger(d.JWPLAYER_MEDIA_LEVELS,{levels:G.getQualityLevels(),currentQuality:G.getCurrentQuality()}),void G.setState(e.PLAYING);case f.PAUSED:return void G.setState(e.PAUSED);case f.BUFFERING:return void(G.seeking?G.setState(e.LOADING):G.setState(e.STALLED));case f.CUED:return G.setState(e.IDLE),void(a.isAndroid()&&I.playVideo())}}function A(){P!==H.PlayerState.ENDED&&G.play(),G.trigger(d.JWPLAYER_MEDIA_LEVEL_CHANGED,{currentQuality:G.getCurrentQuality(),levels:G.getQualityLevels()})}function B(){G.trigger(d.JWPLAYER_MEDIA_ERROR,{message:"Error loading YouTube: Video could not be played"})}function C(){k&&G.setVisibility(!0)}function D(){clearInterval(O),I&&I.stopVideo&&a.tryCatch(function(){I.stopVideo(),I.clearVideo()})}function E(b){N=null;var c=b.sources[0].file,d=a.youTubeID(c);if(G.volume(l.volume),G.mute(l.mute),G.setVisibility(!0),!H||!I)return M=function(){x(d)},void m();if(!I.getPlayerState){var e=function(){G.load(b)};return void(N=N?w(e,N):e)}var f=I.getVideoData().video_id;if(f!==d){R?(D(),I.cueVideoById(d)):I.loadVideoById(d);var g=I.getPlayerState(),h=H.PlayerState;g!==h.UNSTARTED&&g!==h.CUED||C()}else I.getCurrentTime()>0&&I.seekTo(0),v()}this.state=e.IDLE,c.extend(this,h);var F,G=this,H=window.YT,I=null,J=document.createElement("div"),K=-1,L=!1,M=null,N=null,O=-1,P=-1,Q=!1,R=k;this.setState=function(a){clearInterval(O),a!==e.IDLE&&a!==e.COMPLETE&&(O=setInterval(q,250),a===e.PLAYING?this.seeking=!1:a!==e.LOADING&&a!==e.STALLED||t()),g.setState.apply(this,arguments)},!H&&j&&j.getStatus()===f.loaderstatus.NEW&&(j.on(d.COMPLETE,m),j.on(d.ERROR,n),j.load()),J.id=i+"_youtube",this.init=function(a){E(a)},this.destroy=function(){this.remove(),this.off(),F=J=H=G=null},this.load=function(a){this.setState(e.LOADING),E(a),G.play()},this.stop=function(){D(),this.setState(e.IDLE)},this.play=function(){R||(I&&I.playVideo?I.playVideo():N=N?w(this.play,N):this.play)},this.pause=function(){R||I.pauseVideo&&I.pauseVideo()},this.seek=function(a){R||I.seekTo&&(this.seeking=!0,I.seekTo(a))},this.volume=function(a){if(c.isNumber(a)){var b=Math.min(Math.max(0,a),100);I&&I.getVolume&&I.setVolume(b)}},this.mute=function(b){var c=a.exists(b)?!!b:!l.mute;I&&I.mute&&(c?I.mute():I.unMute())},this.detachMedia=function(){return null},this.attachMedia=function(){Q&&(this.setState(e.COMPLETE),this.trigger(d.JWPLAYER_MEDIA_COMPLETE),Q=!1)},this.setContainer=function(a){F=a,a.appendChild(J),this.setVisibility(!0)},this.getContainer=function(){return F},this.remove=function(){D(),J&&F&&F===J.parentNode&&F.removeChild(J),M=N=I=null},this.setVisibility=function(a){a=!!a,a?(b.style(J,{display:"block"}),b.style(F,{visibility:"visible",opacity:1})):k||b.style(F,{opacity:0})},this.resize=function(){return!1},this.checkComplete=function(){return Q},this.getCurrentQuality=function(){if(!I)return-1;if(I.getAvailableQualityLevels){var a=I.getPlaybackQuality(),b=I.getAvailableQualityLevels();return b.indexOf(a)}return-1},this.getQualityLevels=function(){if(I){if(!c.isFunction(I.getAvailableQualityLevels))return[];var a=I.getAvailableQualityLevels();if(2===a.length&&c.contains(a,"auto"))return{label:c.without(a,"auto")};var b=c.map(a,function(a){return{label:a}});return b.reverse()}},this.setCurrentQuality=function(a){if(I&&I.getAvailableQualityLevels){var b=I.getAvailableQualityLevels();if(b.length){var c=b[b.length-a-1];I.setPlaybackQuality(c)}}},this.getName=function(){return{name:"youtube"}}}var j=new f(window.location.protocol+"//www.youtube.com/iframe_api"),k=a.isMobile();return i.getName=function(){return{name:"youtube"}},{register:function(a){a.api.registerProvider(i)}}}.apply(b,d),!(void 0!==e&&(a.exports=e))}});/* JWPLayer version 7.3.6 */
var jwplayer = window.jwplayer || {};
jwplayer.key = "qXm2CbkX69Y/kA8DXtXB1EHCdMQ/2Et41VYH6uQAbzo=";
(function($){$(document).ready(function(e){$('.jwplayer-video').each(function(idx){var options=$(this).data('jwplayer');jwplayer(options.id).setup({modes:[{type:'html5'},{type:'flash',src:'/templates/jsp/_style2/_tandf/pb2/js/plugins/jwplayer/jwplayer.flash.swf'}],base:'/templates/jsp/_style2/_tandf/pb2/js/plugins/jwplayer/',flashplayer:'/templates/jsp/_style2/_tandf/pb2/js/plugins/jwplayer/jwplayer.flash.swf',file:options.file,height:options.height,width:options.width});});});})(jQuery);
(function($){$.fn.loadInview=function(threshould,delay,callback){var elements=this,$w=$(window),ive,$this,loaded,dTimeMs=delay||250,selector=this.selector,type='';this.one('inview',function(){var $this=$(this);var data=$this.data(/data-(\w+[\-\w+]*)/g.exec(selector)[1]);type=data.type;if(data.type=='image'){var source=data.src;if(source.length>0){this.setAttribute('src',source);if(typeof callback==='function')callback.call(this);}}else if(data.type=='mathjax'){var id=guidGenerator();var closest=$this.closest('.NLM_disp-formula');closest.attr('id',id);$this.remove();MathJax.Hub.Queue(["Typeset",MathJax.Hub,id]);if(typeof callback==='function')callback.call(this);}else if(data.type=='sketchfab'){var url=$(this).data("url");var image=$(this).find('a.thumbnail');$.ajax({type:"GET",url:url,dataType:"json",success:function(data){replaceImageWith3DIframe(data.html,image,$this);},error:function(res){}});function replaceImageWith3DIframe(data,image,current){if(data){if(image.length>0){$(data).insertAfter(image);$(image).hide();$($(current).find(".figureDownloadOptions")).hide();}
else{$(data).insertAfter($(current).find(".figureInfo"));}
var width=$(current).find('iframe').width();$(current).find('iframe').css('height',width*9/16);}}}});function inview(){var wt,wb,et,eb,th=threshould||0;ive=elements.filter(function(e){$this=$(this);if($this.is(':hidden'))return;wt=$w.scrollTop();wb=wt+$w.height();et=$this.offset().top;eb=et+$this.height();return eb>=wt-th&&et<=wb+th;});loaded=ive.trigger('inview');elements.not(loaded);}
function guidGenerator(){var S4=function(){return(((1+Math.random())*0x10000)|0).toString(16).substring(1);};return(S4()+S4()+"-"+S4()+"-"+S4()+"-"+S4()+"-"+S4()+S4()+S4());}
$w.on("resize.inview lookup.inview",inview);$(window).on('scroll.inview',function(){if($(this).data('scrollTimerimage')||$(this).data('scrollTimermathjax'))
clearTimeout($.data(this,'scrollTimer'+type));$.data(this,'scrollTimer'+type,setTimeout(inview,dTimeMs));});inview();return this;};})(jQuery);
(function($){$.fn.iePlaceholder=function(e){if(this.length==0)return;var ie=(function(){var undef,rv=-1;var ua=window.navigator.userAgent;var msie=ua.indexOf('MSIE ');var trident=ua.indexOf('Trident/');var edge=ua.indexOf('Edge/');if(msie>0){rv=parseInt(ua.substring(msie+5,ua.indexOf('.',msie)),10);}else if(trident>0){var rvNum=ua.indexOf('rv:');rv=parseInt(ua.substring(rvNum+3,ua.indexOf('.',rvNum)),10);}else if(edge>0){parseInt(ua.substring(edge+5,ua.indexOf('.',edge)),10);}
return((rv>-1)?rv:undef);})();if(ie<=9){return this.each(function(){var element=$(this);var type=element.attr('type');if(type=='text'||type=='search'||type=='tel'||type=='url'||type=='email'||type=='password'||type=='datetime'||type=='number'||type==''){var placeholder=$('<span></span>').on('click',function(){$(this).css('display','none');element.focus();}).html(element.attr('placeholder')).css(element.css(["width","height","paddingTop","paddingRight","paddingBottom","paddingLeft","marginTop","marginRight","marginBottom","marginLeft","textAlign","fontFamily","fontSize","fontWeight","borderBottomWidth","borderTopWidth","borderRightWidth","borderLeftWidth","color"])).css({'display':'inline-block','box-sizing':'border-box','position':'absolute','color':'#9D9D9D','background':'none','border-color':'transparent','border-style':'solid'});if(element.val()==$(this).attr('placeholder'))$(this).val('');$(this).off('focus').off('blur').on('focus',function(){placeholder.css('display','none');}).on('blur',function(){if($(this).val().length>0){placeholder.css('display','none');}else{placeholder.css('display','inline-block');}}).before(placeholder).attr('placeholder','');}});}};})(jQuery);
var MathMenu;(function(d,o,$,s){o.responsive=function(selector){s.stickMe(selector,-10);$(selector).pep({constrainTo:'.pageBody',shouldPreventDefault:true,droppable:'.NLM_disp-formula',drag:function(event,object){var activeRegions=this.activeDropRegions;if(activeRegions.length>0&&!$(this.$el[0]).hasClass('active')){$(this.$el[0]).addClass('active');}},stop:function(event,object){var activeRegions=this.activeDropRegions;if(activeRegions.length>0){var id=activeRegions[0].context.id;if(!isNullOrWhitespace(id)){var container=document.getElementById(id);var jax=MathJax.Hub.getAllJax(container)[0];MathJax.Extension.MathEvents.Event.ContextMenu({},document.getElementById(jax.inputID+'-Frame'));}}},revert:true,revertIf:function(event,object){$(this.$el[0]).removeClass('active');return this.activeDropRegions.length>0;}});function isNullOrWhitespace(input){return(typeof input==='undefined'||input==null)||input.replace(/\s/g,'').length<1;}};})(document,MathMenu=MathMenu||{},$=$||jQuery,scroll=scroll||{});;(function($,window,undefined){"use strict";var pluginName='pep';var defaults={initiate:function(){},start:function(){},drag:function(){},stop:function(){},easing:null,rest:function(){},moveTo:false,callIfNotStarted:['stop','rest'],startThreshold:[0,0],grid:[1,1],debug:false,activeClass:'pep-active',multiplier:1,velocityMultiplier:2.5,shouldPreventDefault:true,allowDragEventPropagation:true,stopEvents:'',hardwareAccelerate:true,useCSSTranslation:true,disableSelect:true,cssEaseString:"cubic-bezier(0.190, 1.000, 0.220, 1.000)",cssEaseDuration:1000,shouldEase:true,droppable:false,droppableActiveClass:'pep-dpa',overlapFunction:false,constrainTo:false,removeMargins:true,place:true,deferPlacement:false,axis:null,forceNonCSS3Movement:false,elementsWithInteraction:'input',revert:false,revertAfter:'stop',revertIf:function(){return true;},ignoreRightClick:true,startPos:{left:null,top:null},useBoundingClientRect:false};function Pep(el,options){this.name=pluginName;this.el=el;this.$el=$(el);this.options=$.extend({},defaults,options);this.$document=$(this.$el[0].ownerDocument);this.$body=this.$document.find('body');this.moveTrigger="MSPointerMove pointermove touchmove mousemove";this.startTrigger="MSPointerDown pointerdown touchstart mousedown";this.stopTrigger="MSPointerUp pointerup touchend mouseup";this.startTriggerArray=this.startTrigger.split(' ');this.moveTriggerArray=this.moveTrigger.split(' ');this.stopTriggerArray=this.stopTrigger.split(' ');this.stopEvents=[this.stopTrigger,this.options.stopEvents].join(' ');if(this.options.constrainTo==='window')
this.$container=this.$document;else if(this.options.constrainTo&&(this.options.constrainTo!=='parent'))
this.$container=$(this.options.constrainTo);else
this.$container=this.$el.parent();if(this.isPointerEventCompatible())
this.applyMSDefaults();this.CSSEaseHash=this.getCSSEaseHash();this.scale=1;this.started=false;this.disabled=false;this.activeDropRegions=[];this.resetVelocityQueue();this.init();return this;}
Pep.prototype.init=function(){if(this.options.debug)
this.buildDebugDiv();if(this.options.disableSelect)
this.disableSelect();if(this.options.place&&!this.options.deferPlacement){this.positionParent();this.placeObject();}
this.ev={};this.pos={};this.subscribe();};Pep.prototype.subscribe=function(){var self=this;this.onStartEvent=function(ev){self.handleStart(ev);};this.$el.on(this.startTrigger,this.onStartEvent);this.onStartEventOnElementsWithInteraction=function(ev){ev.ignorePropagation=true;};this.$el.on(this.startTrigger,this.options.elementsWithInteraction,this.onStartEventOnElementsWithInteraction);this.onStopEvents=function(ev){self.handleStop(ev);};this.$document.on(this.stopEvents,this.onStopEvents);this.onMoveEvents=function(ev){self.moveEvent=ev;};this.$document.on(this.moveTrigger,this.onMoveEvents);};Pep.prototype.unsubscribe=function(){this.$el.off(this.startTrigger,this.onStartEvent);this.$el.off(this.startTrigger,this.options.elementsWithInteraction,this.onStartEventOnElementsWithInteraction);this.$document.off(this.stopEvents,this.onStopEvents);this.$document.off(this.moveTrigger,this.onMoveEvents);};Pep.prototype.handleStart=function(ev){if(ev.ignorePropagation)return;var self=this;if(this.isValidMoveEvent(ev)&&!this.disabled){if(!(this.options.ignoreRightClick&&ev.which===3)){if(this.isPointerEventCompatible()&&ev.preventManipulation)
ev.preventManipulation();ev=this.normalizeEvent(ev);if(this.options.place&&this.options.deferPlacement){this.positionParent();this.placeObject();}
this.log({type:'event',event:ev.type});if(this.options.hardwareAccelerate&&!this.hardwareAccelerated){this.hardwareAccelerate();this.hardwareAccelerated=true;}
var shouldContinue=this.options.initiate.call(this,ev,this);if(shouldContinue===false)
return;clearTimeout(this.restTimeout);this.$el.addClass(this.options.activeClass);this.removeCSSEasing();this.startX=this.ev.x=ev.pep.x;this.startY=this.ev.y=ev.pep.y;this.initialPosition=this.initialPosition||this.$el.position();this.startEvent=this.moveEvent=ev;this.active=true;if(this.options.shouldPreventDefault)
ev.preventDefault();if(!this.options.allowDragEventPropagation)
ev.stopPropagation();(function watchMoveLoop(){if(!self.active)return;self.handleMove();self.requestAnimationFrame(watchMoveLoop);})();(function watchEasingLoop(){if(!self.options.easing)return;if(self.easing)self.options.easing.call(self,null,self);self.requestAnimationFrame(watchEasingLoop);})();}}};Pep.prototype.handleMove=function(){if(typeof(this.moveEvent)==='undefined')
return;var ev=this.normalizeEvent(this.moveEvent);var curX=window.parseInt(ev.pep.x/this.options.grid[0])*this.options.grid[0];var curY=window.parseInt(ev.pep.y/this.options.grid[1])*this.options.grid[1];this.addToLIFO({time:ev.timeStamp,x:curX,y:curY});var dx,dy;if($.inArray(ev.type,this.startTriggerArray)>-1){dx=0;dy=0;}else{dx=curX-this.ev.x;dy=curY-this.ev.y;}
this.dx=dx;this.dy=dy;this.ev.x=curX;this.ev.y=curY;if(dx===0&&dy===0){this.log({type:'event',event:'** stopped **'});return;}
var initialDx=Math.abs(this.startX-curX);var initialDy=Math.abs(this.startY-curY);if(!this.started&&(initialDx>this.options.startThreshold[0]||initialDy>this.options.startThreshold[1])){this.started=true;this.$el.addClass('pep-start');this.options.start.call(this,this.startEvent,this);}
this.doMoveTo(dx,dy);if(this.options.droppable){this.calculateActiveDropRegions();}
var continueDrag=this.options.drag.call(this,ev,this);if(continueDrag===false){this.resetVelocityQueue();return;}
this.log({type:'event',event:ev.type});this.log({type:'event-coords',x:this.ev.x,y:this.ev.y});this.log({type:'velocity'});};Pep.prototype.doMoveTo=function(dx,dy){var hash=this.handleConstraint(dx,dy);var xOp,yOp;if(typeof this.options.moveTo==='function'){xOp=(dx>=0)?"+="+Math.abs(dx/this.scale)*this.options.multiplier:"-="+Math.abs(dx/this.scale)*this.options.multiplier;yOp=(dy>=0)?"+="+Math.abs(dy/this.scale)*this.options.multiplier:"-="+Math.abs(dy/this.scale)*this.options.multiplier;if(this.options.constrainTo){xOp=(hash.x!==false)?hash.x:xOp;yOp=(hash.y!==false)?hash.y:yOp;}
if(this.options.axis==='x')yOp=hash.y;if(this.options.axis==='y')xOp=hash.x;this.options.moveTo.call(this,xOp,yOp);}else if(!this.shouldUseCSSTranslation()){xOp=(dx>=0)?"+="+Math.abs(dx/this.scale)*this.options.multiplier:"-="+Math.abs(dx/this.scale)*this.options.multiplier;yOp=(dy>=0)?"+="+Math.abs(dy/this.scale)*this.options.multiplier:"-="+Math.abs(dy/this.scale)*this.options.multiplier;if(this.options.constrainTo){xOp=(hash.x!==false)?hash.x:xOp;yOp=(hash.y!==false)?hash.y:yOp;}
if(this.options.axis==='x')yOp=hash.y;if(this.options.axis==='y')xOp=hash.x;this.moveTo(xOp,yOp);}
else{dx=(dx/this.scale)*this.options.multiplier;dy=(dy/this.scale)*this.options.multiplier;if(this.options.constrainTo){dx=(hash.x===false)?dx:0;dy=(hash.y===false)?dy:0;}
if(this.options.axis==='x')dy=0;if(this.options.axis==='y')dx=0;this.moveToUsingTransforms(dx,dy);}};Pep.prototype.handleStop=function(ev){if(!this.active)
return;this.log({type:'event',event:ev.type});this.active=false;this.easing=true;this.$el.removeClass('pep-start').addClass('pep-ease');if(this.options.droppable){this.calculateActiveDropRegions();}
if(this.started||(!this.started&&$.inArray('stop',this.options.callIfNotStarted)>-1)){this.options.stop.call(this,ev,this);}
if(this.options.shouldEase){this.ease(ev,this.started);}else{this.removeActiveClass();}
if(this.options.revert&&(this.options.revertAfter==='stop'||!this.options.shouldEase)&&(this.options.revertIf&&this.options.revertIf.call(this))){this.revert();}
this.started=false;this.resetVelocityQueue();};Pep.prototype.ease=function(ev,started){var pos=this.$el.position();var vel=this.velocity();var dt=this.dt;var x=(vel.x/this.scale)*this.options.multiplier;var y=(vel.y/this.scale)*this.options.multiplier;var hash=this.handleConstraint(x,y,true);if(this.cssAnimationsSupported())
this.$el.css(this.getCSSEaseHash());var xOp=(vel.x>0)?"+="+x:"-="+Math.abs(x);var yOp=(vel.y>0)?"+="+y:"-="+Math.abs(y);if(this.options.constrainTo){xOp=(hash.x!==false)?hash.x:xOp;yOp=(hash.y!==false)?hash.y:yOp;}
if(this.options.axis==='x')yOp="+=0";if(this.options.axis==='y')xOp="+=0";var jsAnimateFallback=!this.cssAnimationsSupported()||this.options.forceNonCSS3Movement;if(typeof this.options.moveTo==='function'){this.options.moveTo.call(this,xOp,yOp);}else{this.moveTo(xOp,yOp,jsAnimateFallback);}
var self=this;this.restTimeout=setTimeout(function(){if(self.options.droppable){self.calculateActiveDropRegions();}
self.easing=false;if(started||(!started&&$.inArray('rest',self.options.callIfNotStarted)>-1)){self.options.rest.call(self,ev,self);}
if(self.options.revert&&(self.options.revertAfter==='ease'&&self.options.shouldEase)&&(self.options.revertIf&&self.options.revertIf.call(self))){self.revert();}
self.removeActiveClass();},this.options.cssEaseDuration);};Pep.prototype.normalizeEvent=function(ev){ev.pep={};if(this.isTouch(ev)){ev.pep.x=ev.originalEvent.touches[0].pageX;ev.pep.y=ev.originalEvent.touches[0].pageY;ev.pep.type=ev.type;}
else if(this.isPointerEventCompatible()||!this.isTouch(ev)){if(ev.pageX){ev.pep.x=ev.pageX;ev.pep.y=ev.pageY;}else{ev.pep.x=ev.originalEvent.pageX;ev.pep.y=ev.originalEvent.pageY;}
ev.pep.type=ev.type;}
return ev;};Pep.prototype.resetVelocityQueue=function(){this.velocityQueue=new Array(5);};Pep.prototype.moveTo=function(x,y,animate){this.log({type:'delta',x:x,y:y});if(animate){this.$el.animate({top:y,left:x},0,'easeOutQuad',{queue:false});}else{this.$el.stop(true,false).css({top:y,left:x});}};Pep.prototype.moveToUsingTransforms=function(x,y){var matrixArray=this.matrixToArray(this.matrixString());if(!this.cssX)
this.cssX=this.xTranslation(matrixArray);if(!this.cssY)
this.cssY=this.yTranslation(matrixArray);this.cssX=this.cssX+x;this.cssY=this.cssY+y;this.log({type:'delta',x:x,y:y});matrixArray[4]=this.cssX;matrixArray[5]=this.cssY;this.translation=this.arrayToMatrix(matrixArray);this.transform(this.translation);};Pep.prototype.transform=function(value){this.$el.css({'-webkit-transform':value,'-moz-transform':value,'-ms-transform':value,'-o-transform':value,'transform':value});};Pep.prototype.xTranslation=function(matrixArray){matrixArray=matrixArray||this.matrixToArray(this.matrixString());return parseInt(matrixArray[4],10);};Pep.prototype.yTranslation=function(matrixArray){matrixArray=matrixArray||this.matrixToArray(this.matrixString());return parseInt(matrixArray[5],10);};Pep.prototype.matrixString=function(){var validMatrix=function(o){return!(!o||o==='none'||o.indexOf('matrix')<0);};var matrix="matrix(1, 0, 0, 1, 0, 0)";if(validMatrix(this.$el.css('-webkit-transform')))
matrix=this.$el.css('-webkit-transform');if(validMatrix(this.$el.css('-moz-transform')))
matrix=this.$el.css('-moz-transform');if(validMatrix(this.$el.css('-ms-transform')))
matrix=this.$el.css('-ms-transform');if(validMatrix(this.$el.css('-o-transform')))
matrix=this.$el.css('-o-transform');if(validMatrix(this.$el.css('transform')))
matrix=this.$el.css('transform');return matrix;};Pep.prototype.matrixToArray=function(str){return str.split('(')[1].split(')')[0].split(',');};Pep.prototype.arrayToMatrix=function(array){return"matrix("+array.join(',')+")";};Pep.prototype.addToLIFO=function(val){var arr=this.velocityQueue;arr=arr.slice(1,arr.length);arr.push(val);this.velocityQueue=arr;};Pep.prototype.velocity=function(){var sumX=0;var sumY=0;for(var i=0;i<this.velocityQueue.length-1;i++){if(this.velocityQueue[i]){sumX+=(this.velocityQueue[i+1].x-this.velocityQueue[i].x);sumY+=(this.velocityQueue[i+1].y-this.velocityQueue[i].y);this.dt=(this.velocityQueue[i+1].time-this.velocityQueue[i].time);}}
return{x:sumX*this.options.velocityMultiplier,y:sumY*this.options.velocityMultiplier};};Pep.prototype.revert=function(){if(this.shouldUseCSSTranslation()){this.moveToUsingTransforms(-this.xTranslation(),-this.yTranslation());}
if(this.options.place){this.moveTo(this.initialPosition.left,this.initialPosition.top);}};Pep.prototype.requestAnimationFrame=function(callback){return window.requestAnimationFrame&&window.requestAnimationFrame(callback)||window.webkitRequestAnimationFrame&&window.webkitRequestAnimationFrame(callback)||window.mozRequestAnimationFrame&&window.mozRequestAnimationFrame(callback)||window.oRequestAnimationFrame&&window.mozRequestAnimationFrame(callback)||window.msRequestAnimationFrame&&window.msRequestAnimationFrame(callback)||window.setTimeout(callback,1000/60);};Pep.prototype.positionParent=function(){if(!this.options.constrainTo||this.parentPositioned)
return;this.parentPositioned=true;if(this.options.constrainTo==='parent'){this.$container.css({position:'relative'});}else if(this.options.constrainTo==='window'&&this.$container.get(0).nodeName!=="#document"&&this.$container.css('position')!=='static')
{this.$container.css({position:'static'});}};Pep.prototype.placeObject=function(){if(this.objectPlaced)
return;this.objectPlaced=true;this.offset=(this.options.constrainTo==='parent'||this.hasNonBodyRelative())?this.$el.position():this.$el.offset();if(parseInt(this.$el.css('left'),10))
this.offset.left=this.$el.css('left');if(typeof this.options.startPos.left==="number")
this.offset.left=this.options.startPos.left;if(parseInt(this.$el.css('top'),10))
this.offset.top=this.$el.css('top');if(typeof this.options.startPos.top==="number")
this.offset.top=this.options.startPos.top;if(this.options.removeMargins)
this.$el.css({margin:0});this.$el.css({position:'absolute',top:this.offset.top,left:this.offset.left});};Pep.prototype.hasNonBodyRelative=function(){return this.$el.parents().filter(function(){var $this=$(this);return $this.is('body')||$this.css('position')==='relative';}).length>1;};Pep.prototype.setScale=function(val){this.scale=val;};Pep.prototype.setMultiplier=function(val){this.options.multiplier=val;};Pep.prototype.removeCSSEasing=function(){if(this.cssAnimationsSupported())
this.$el.css(this.getCSSEaseHash(true));};Pep.prototype.disableSelect=function(){this.$el.css({'-webkit-touch-callout':'none','-webkit-user-select':'none','-khtml-user-select':'none','-moz-user-select':'none','-ms-user-select':'none','user-select':'none'});};Pep.prototype.removeActiveClass=function(){this.$el.removeClass([this.options.activeClass,'pep-ease'].join(' '));};Pep.prototype.handleConstraint=function(dx,dy,accountForTranslation){var pos=this.$el.position();this.pos.x=pos.left;this.pos.y=pos.top;var hash={x:false,y:false};var upperYLimit,upperXLimit,lowerXLimit,lowerYLimit;this.log({type:"pos-coords",x:this.pos.x,y:this.pos.y});if($.isArray(this.options.constrainTo)){if(this.options.constrainTo[3]!==undefined&&this.options.constrainTo[1]!==undefined){upperXLimit=this.options.constrainTo[1]===false?Infinity:this.options.constrainTo[1];lowerXLimit=this.options.constrainTo[3]===false?-Infinity:this.options.constrainTo[3];}
if(this.options.constrainTo[0]!==false&&this.options.constrainTo[2]!==false){upperYLimit=this.options.constrainTo[2]===false?Infinity:this.options.constrainTo[2];lowerYLimit=this.options.constrainTo[0]===false?-Infinity:this.options.constrainTo[0];}
if(this.pos.x+dx<lowerXLimit)hash.x=lowerXLimit;if(this.pos.y+dy<lowerYLimit)hash.y=lowerYLimit;}else if(typeof this.options.constrainTo==='string'){lowerXLimit=0;lowerYLimit=0;upperXLimit=this.$container.width()-(this.options.useBoundingClientRect?this.$el[0].getBoundingClientRect().width:this.$el.outerWidth());upperYLimit=this.$container.height()-(this.options.useBoundingClientRect?this.$el[0].getBoundingClientRect().height:this.$el.outerHeight());if(this.pos.x+dx<0)hash.x=0;if(this.pos.y+dy<0)hash.y=0;}
if(this.pos.x+dx>upperXLimit)hash.x=upperXLimit;if(this.pos.y+dy>upperYLimit)hash.y=upperYLimit;if(this.shouldUseCSSTranslation()&&accountForTranslation){if(hash.x===lowerXLimit&&this.xTranslation())hash.x=lowerXLimit-this.xTranslation();if(hash.x===upperXLimit&&this.xTranslation())hash.x=upperXLimit-this.xTranslation();if(hash.y===lowerYLimit&&this.yTranslation())hash.y=lowerYLimit-this.yTranslation();if(hash.y===upperYLimit&&this.yTranslation())hash.y=upperYLimit-this.yTranslation();}
return hash;};Pep.prototype.getCSSEaseHash=function(reset){if(typeof(reset)==='undefined')reset=false;var cssEaseString;if(reset){cssEaseString='';}else if(this.CSSEaseHash){return this.CSSEaseHash;}else{cssEaseString=['all',this.options.cssEaseDuration+'ms',this.options.cssEaseString].join(' ');}
return{'-webkit-transition':cssEaseString,'-moz-transition':cssEaseString,'-ms-transition':cssEaseString,'-o-transition':cssEaseString,'transition':cssEaseString};};Pep.prototype.calculateActiveDropRegions=function(){var self=this;this.activeDropRegions.length=0;$.each($(this.options.droppable),function(idx,el){var $el=$(el);if(self.isOverlapping($el,self.$el)){$el.addClass(self.options.droppableActiveClass);self.activeDropRegions.push($el);}else{$el.removeClass(self.options.droppableActiveClass);}});};Pep.prototype.isOverlapping=function($a,$b){if(this.options.overlapFunction){return this.options.overlapFunction($a,$b);}
var rect1=$a[0].getBoundingClientRect();var rect2=$b[0].getBoundingClientRect();return!(rect1.right<rect2.left||rect1.left>rect2.right||rect1.bottom<rect2.top||rect1.top>rect2.bottom);};Pep.prototype.isTouch=function(ev){return ev.type.search('touch')>-1;};Pep.prototype.isPointerEventCompatible=function(){return("MSPointerEvent"in window);};Pep.prototype.applyMSDefaults=function(first_argument){this.$el.css({'-ms-touch-action':'none','touch-action':'none','-ms-scroll-chaining':'none','-ms-scroll-limit':'0 0 0 0'});};Pep.prototype.isValidMoveEvent=function(ev){return(!this.isTouch(ev)||(this.isTouch(ev)&&ev.originalEvent&&ev.originalEvent.touches&&ev.originalEvent.touches.length===1));};Pep.prototype.shouldUseCSSTranslation=function(){if(this.options.forceNonCSS3Movement)
return false;if(typeof(this.useCSSTranslation)!=="undefined")
return this.useCSSTranslation;var useCSSTranslation=false;if(!this.options.useCSSTranslation||(typeof(Modernizr)!=="undefined"&&!Modernizr.csstransforms)){useCSSTranslation=false;}
else{useCSSTranslation=true;}
this.useCSSTranslation=useCSSTranslation;return useCSSTranslation;};Pep.prototype.cssAnimationsSupported=function(){if(typeof(this.cssAnimationsSupport)!=="undefined"){return this.cssAnimationsSupport;}
if((typeof(Modernizr)!=="undefined"&&Modernizr.cssanimations)){this.cssAnimationsSupport=true;return true;}
var animation=false,elm=document.createElement('div'),animationstring='animation',keyframeprefix='',domPrefixes='Webkit Moz O ms Khtml'.split(' '),pfx='';if(elm.style.animationName){animation=true;}
if(animation===false){for(var i=0;i<domPrefixes.length;i++){if(elm.style[domPrefixes[i]+'AnimationName']!==undefined){pfx=domPrefixes[i];animationstring=pfx+'Animation';keyframeprefix='-'+pfx.toLowerCase()+'-';animation=true;break;}}}
this.cssAnimationsSupport=animation;return animation;};Pep.prototype.hardwareAccelerate=function(){this.$el.css({'-webkit-perspective':1000,'perspective':1000,'-webkit-backface-visibility':'hidden','backface-visibility':'hidden'});};Pep.prototype.getMovementValues=function(){return{ev:this.ev,pos:this.pos,velocity:this.velocity()};};Pep.prototype.buildDebugDiv=function(){var $debugDiv;if($('#pep-debug').length===0){$debugDiv=$('<div></div>');$debugDiv.attr('id','pep-debug').append("<div style='font-weight:bold; background: red; color: white;'>DEBUG MODE</div>").append("<div id='pep-debug-event'>no event</div>").append("<div id='pep-debug-ev-coords'>event coords: <span class='pep-x'>-</span>, <span class='pep-y'>-</span></div>").append("<div id='pep-debug-pos-coords'>position coords: <span class='pep-x'>-</span>, <span class='pep-y'>-</span></div>").append("<div id='pep-debug-velocity'>velocity: <span class='pep-x'>-</span>, <span class='pep-y'>-</span></div>").append("<div id='pep-debug-delta'>&Delta; movement: <span class='pep-x'>-</span>, <span class='pep-y'>-</span></div>").css({position:'fixed',bottom:5,right:5,zIndex:99999,textAlign:'right',fontFamily:'Arial, sans',fontSize:10,border:'1px solid #DDD',padding:'3px',background:'white',color:'#333'});}
var self=this;setTimeout(function(){self.debugElements={$event:$("#pep-debug-event"),$velocityX:$("#pep-debug-velocity .pep-x"),$velocityY:$("#pep-debug-velocity .pep-y"),$dX:$("#pep-debug-delta .pep-x"),$dY:$("#pep-debug-delta .pep-y"),$evCoordsX:$("#pep-debug-ev-coords .pep-x"),$evCoordsY:$("#pep-debug-ev-coords .pep-y"),$posCoordsX:$("#pep-debug-pos-coords .pep-x"),$posCoordsY:$("#pep-debug-pos-coords .pep-y")};},0);$('body').append($debugDiv);};Pep.prototype.log=function(opts){if(!this.options.debug)return;switch(opts.type){case"event":this.debugElements.$event.text(opts.event);break;case"pos-coords":this.debugElements.$posCoordsX.text(opts.x);this.debugElements.$posCoordsY.text(opts.y);break;case"event-coords":this.debugElements.$evCoordsX.text(opts.x);this.debugElements.$evCoordsY.text(opts.y);break;case"delta":this.debugElements.$dX.text(opts.x);this.debugElements.$dY.text(opts.y);break;case"velocity":var vel=this.velocity();this.debugElements.$velocityX.text(Math.round(vel.x));this.debugElements.$velocityY.text(Math.round(vel.y));break;}};Pep.prototype.toggle=function(on){if(typeof(on)==="undefined"){this.disabled=!this.disabled;}
else{this.disabled=!on;}};$.extend($.easing,{easeOutQuad:function(x,t,b,c,d){return-c*(t/=d)*(t-2)+b;},easeOutCirc:function(x,t,b,c,d){return c*Math.sqrt(1-(t=t/d-1)*t)+b;},easeOutExpo:function(x,t,b,c,d){return(t===d)?b+c:c*(-Math.pow(2,-10*t/d)+1)+b;}});$.fn[pluginName]=function(options){return this.each(function(){if(!$.data(this,'plugin_'+pluginName)){var pepObj=new Pep(this,options);$.data(this,'plugin_'+pluginName,pepObj);$.pep.peps.push(pepObj);}});};$.pep={};$.pep.peps=[];$.pep.toggleAll=function(on){$.each(this.peps,function(index,pepObj){pepObj.toggle(on);});};$.pep.unbind=function($obj){$.each($obj,function(index,pepObj){pepObj=$(pepObj);var pep=pepObj.data('plugin_'+pluginName);if(typeof pep==='undefined')
return;pep.toggle(false);pep.unsubscribe();pepObj.removeData('plugin_'+pluginName);});};}(jQuery,window));
$(document).ready(function(){var sticky_header=null,inlineContent=null,journalLinks=null;var title="";if($('.toc-sticky-header').length){sticky_header=$('.toc-sticky-header');title=sticky_header.find('.literatumPublicationHeader span.title').text();inlineContent=$('<div>').append(sticky_header.find('.layout-inline-content').clone()).html();journalLinks=$('<div>').append(sticky_header.find('.literatumJournalHeaderLinks').clone()).html();}
else if($('.nav-sticky-header').length){sticky_header=$('.nav-sticky-header');title=sticky_header.find('.literatumSeriesNavigation .issueSerialNavigation .info .title-container h1 > a').text();inlineContent=$('<div>').append(sticky_header.find('.literatumSeriesNavigation .issueSerialNavigation .info .seriesNavDropZone').clone()).html();journalLinks=$('<div>').append(sticky_header.find('.literatumSeriesNavigation .issueSerialNavigation .info .seriesNavDropZone .literatumJournalHeaderLinks').clone()).html();}
if(sticky_header!=null){var journal_sticky_header=generateStickyHeader(title,inlineContent,journalLinks);var citationSearchPopup='.journal-sticky-header #citationSearchPopup';$('body').append(journal_sticky_header);if($(citationSearchPopup).length){$(citationSearchPopup).remove();}
journal_sticky_header=$('.journal-sticky-header');$(window).scroll(function(){var window_scroll_top=$(window).scrollTop();var header_scroll_top=sticky_header.offset().top+sticky_header.height();if(window_scroll_top>header_scroll_top&&journal_sticky_header.hasClass('hidden')){showStickyHeader(journal_sticky_header);}
else if(window_scroll_top<=header_scroll_top&&!journal_sticky_header.hasClass('hidden')){hideStickyHeader(journal_sticky_header);}});}});function generateStickyHeader(title,inlineContent,journalLinks){var leftNav='<div class="left-nav">'+'<ul>'+'<li><a class="home-nav" href="/"><img src="/templates/jsp/_style2/_tandf/pb2/images/tandf-sm.png" alt="Taylor & Francis Online"/></a></li>'+'<li><a class="top-nav" onclick="backToTop()">Top</a></li>'+'</ul>'+'</div>';var content='<div class="center-content"><div class="section-title">'+title+'</div>'+'<div class="inline-content">'+inlineContent+'</div>'+'<div class="journal-links">'+journalLinks+'</div></div>';var stickyHeader='<div class="journal-sticky-header hidden"><div class="content">'+leftNav+content+'</div></div>';return stickyHeader;}
function showStickyHeader(stickyHeader){stickyHeader.fadeIn(500);stickyHeader.removeClass('hidden');}
function hideStickyHeader(stickyHeader){stickyHeader.fadeOut(500);stickyHeader.addClass('hidden');};
$(document).ready(function(e){$(".threeDImge[data-formula-source]").loadInview();$('.journalMenuWidget .title').on('click',function(){$('.journalMenuWidget .sub-nav').toggleClass('open');});$('.openAccessWidget .title').on('click',function(){$('.openAccessWidget .sub-nav').toggleClass('open');});$('.gold-access').click(function(){$(this).toggleClass('open');});$('.addressesList .address').matchHeight();if(!$('.informa-banner').length&&$('.quickSearchWidget').length>0){var srchBtn='<div class="searchButtonIcon"></div>';$('.literatumLoginWidget').length?$('.pageBody').addClass('loginPage').prepend(srchBtn):$('.pageHeader').after(srchBtn);}
if($(".society-strapline").length>0){$(".society-strapline").after($(".searchButtonIcon"));}
$('.searchButtonIcon').on('click',function(){var qSearch=$('.quickSearchWidget').find('.quickSearchFormContainer');qSearch.toggleClass('open');qSearch.closest('.responsive-layout').toggleClass('open');$('.issueSerialNavigation').toggleClass('open');});$(window).scroll(function(){var height=$(window).height();var scrollTop=$(window).scrollTop();var obj=$('.pageFooter');var pos=obj.position();if(height+scrollTop>pos.top+300){$('.sectionsNavigation').addClass('hide');}else{$('.sectionsNavigation').removeClass('hide');}
var activeLi=$('.sections-list .sub-art-titles a.active').closest('.sub-art-titles').closest('li');if(!activeLi.hasClass('active')){$(".sections-list").find('li').removeClass('active');activeLi.addClass('active');}});var nav=params['nav'];if(nav&&nav.trim().length>0&&$('#'+nav).offset()){$('html,body').animate({scrollTop:$('#'+nav).offset().top-20},'slow');}
$('.databaseMenuWidget .widget-header').on('click',function(){$('.databaseMenuWidget ul').toggleClass('open');});if($(window).width()<1024){$('.layout-inline-content.alertsWidgetBtn').before($('.general-image.toc-general-image'));$('.toc-publication-title').before($('.quickSearchToc'));}
$('.exploreArticleWidget .widget-header').on('click',function(){$('.exploreArticleWidget ul').toggleClass('open');});$('.topContentArticlesTitle .widget-header span').on('click',function(){$('.topContentArticlesTitle .info').toggleClass('hide');});$('.subnav').on('click',function(){$(this).toggleClass('open');});var refworks=$('form#refworks');if(refworks.length>0){refworks.submit();}
$(window).resize(function(){$('.profileCard').matchHeight();$('.article-card .footer').matchHeight();$('.audienceteaser .content').matchHeight();$('.featured-collections .text').matchHeight();});$('.profileCard').matchHeight();$('.audienceteaser .content').matchHeight();$('.featured-collections .text').matchHeight();if($(window).width()<1025){$(".literatumProfileMenuWidget").before($(".literatumProfileMainWidget h1"));$('.accordionHeader').find('a').on('click',function(e){e.preventDefault();});}
if($(window).width()<769){$(".literatumPublicationContentWidget .tabs .tab-nav").after($('.general-bookmark-share'));}
$("#printButton").click(function(){window.print();});$('.formbutton').off('click').on('click',function(e){$("form[name='frmCitmgr']").submit();});$(".singleSelection").click(function(){var elementId=$(this).attr("id");var elementName=$(this).attr("name");var complementID=elementName;if($(this).is(':checked')){if(elementId.indexOf("Yes")==-1){complementID=complementID+"Yes";}else{complementID=complementID+"No";}
$("#"+complementID).attr('checked',false);}});$('.teasers .teaser .content').matchHeight();$('.literatumListOfIssuesWidget .list-of-issues li').on('click',function(){$(this).toggleClass('active');});var serialAction=$('.article-chapter-view .serial-action');$('.publicationSerialHeader.article-chapter-view').on('mouseover',function(){if($(serialAction).length){$(serialAction).css('opacity','1');}}).on('mouseleave',function(){if($(serialAction).length){$(serialAction).css('opacity','0');}});$('.arrowDecoration').bind('click',function(ev){$(this).closest('li').toggleClass('active');});if(!$('.data-cite-content .data_citing_item').length){$('.data-cite-content').css('display','none');}
$('.citationSearchPopup').fancybox({fitToView:true,padding:0,autoSize:true,closeClick:false,openEffect:'none',closeEffect:'none',closeBtn:false});$(".facPopup").fancybox({fitToView:true,padding:0,autoSize:true,closeClick:false,openEffect:'none',closeEffect:'none',maxWidth:640,maxHeight:1000,closeBtn:true});$('.quickSearchForm').off("submit");$('.quickSearchWidget .quickSearchFormContainer select.custom-dropdown').chosen({disable_search_threshold:10});var currentURL=window.location.href;if(currentURL.indexOf("volume=")>0){var paramVol='volume_'+getParameterByName('volume');if($("#"+paramVol).length){$('html, body').animate({scrollTop:$("#"+paramVol).offset().top},1000);}}
$('li.metrics-tab').on('click',function(e){if($('.sectionsNavigation').length){$('.sectionsNavigation').addClass('metrics-page');}});var clientWidth=getClientWidth();var journalBanner=$('.journal-banner');var tocPageSearch=$('.journal-banner .quickSearchWidget');var tocPageSearchContainer=$('.journal-banner .quickSearchWidget .quickSearchFormContainer');if(tocPageSearch.length){if(clientWidth<1025){tocPageSearch.insertBefore(journalBanner);tocPageSearch.css('margin-top',-12);tocPageSearchContainer.css('margin-top',0);}}
var quickSearcWideget=$('.db-parent-background .db-background').find('.quickSearchWidget');var quickSearchFormContainer=$(quickSearcWideget).find('quickSearchFormContainer');if(quickSearcWideget.length){if(clientWidth<1025){quickSearcWideget.prependTo('.db-background');quickSearcWideget.css('margin-top',-85);quickSearchFormContainer.css({'margin-top':0});quickSearcWideget.css('padding','0 5px');}}
$('.quickSearchForm').submit(function(e){var selectedValue=$("option:selected",this).data('search-in');if(selectedValue=='default'){$('.quickSearchForm').find("input[type='hidden'][name='content']").remove();}else
if(selectedValue=='thisDatabase'){$(this).attr('action','/action/showDatabaseSearchResults');$(this).find("select[name='publication']").attr('name','pubCode');}});if((!$('.newSearchFacets .facetHeader').length&&!$('.newSearchFacets .filters').text().trim().length)){$('.newSearchFacets .filtersTitle').addClass('hide');}
$('#citationSearchPopup div[class = "form"] input').bind('keypress',function(e){if(e.keyCode==13){$('#citationSearchPopup input[type = "button"]').click();}});if($('.literatumContentItemPageRange .contentItemPageRange').length||$('.literatumContentItemHistory .widget-body').length){showPageRangeAndHistory();}
$('a.post-link').bind('click',function(e){e.preventDefault();submitLinkAsPOST(this);});if($(window).width()<1024){$(".refine_search_section").prepend($(".num-results"));$(".refine_search_section").prepend($(".search-keyword"));$(".refine_search_section").addClass("newSearchResults");}
$('.literatumPublicationContentWidget').find('.tab-nav').find('li').on('click',function(event){if($(this).hasClass("pdf-tab")){event.preventDefault();}else{var href=$(this).find("a").attr("href");if(typeof href!=='undefined'){window.location=href;}else if($(this).find('.db-entry-abs-tab').length){mv(e);}
event.preventDefault();}});$('body').on("click",".db-entry-abs-tab",function(e){mv(e);});function mv(e){e.preventDefault();$('body,html').animate({scrollTop:$(".publication-tabs .tab-content h2").offset().top},500);}
$("form[name='ecommConf']").submit(function(e){if($('#cardType').val()==0){chooseCardTypePopup('.chooseCardPopup');return false;}});$('.quick-search-btn').on('click',function(e){$(this).closest('form').submit();});$('[placeholder]').iePlaceholder();(function(d,c){c.log('Taylor and Francis Group','an informa business','Do not insert any unfamiliar text or code. Your personal and privileged account information could be compromised and exposed to others.')})(document,copyright);if($('.publicationSerialHeader.article-chapter-view').find('.literatumSeriesNavigation').length){applySeriesNavigationRules();}
$('.literatumAuthors .show-all-link').on('click',function(event){event.preventDefault();if(!$('.literatumAuthors .MTN').is(':visible'))
$('.literatumAuthors .MTN').css('display','inline-block');else
$('.literatumAuthors .MTN').css('display','none');if($('.literatumAuthors .show-all-link').text()==' show all'){$('.literatumAuthors .show-all-link').text(' show less');}
else{$('.literatumAuthors .show-all-link').text(' show all');}});$('.author-extra-info').on('touchend',function(e){$(this).click();});$('.author-extra-info').on('click',function(e){var config=$(this).data('authorsinfo');var id=config.id;var checkTab=true;if($(".metrics-tab").hasClass("active")||$(".permissions-tab").hasClass("active")){checkTab=false;}
if($('#'+id).length&&checkTab){var offsetVal=$('.publication-tabs .tab-nav').length||$('.accessDenialWidget .tab-nav').length?20+$(' .tab-nav').height():20;$('html,body').animate({scrollTop:$('#'+id).offset().top-offsetVal},'slow');return false;}
else{var currentURL=window.location.href;var redirect="";config.hasFull=='true'?redirect="full":redirect="abs";currentURL=currentURL.split(/[?#]/g)[0].replace(/ref|figure|suppl|abs|citedby/g,redirect).concat('?nav='+id);window.location=currentURL;return false;}});$('.literatumAuthors .entryAuthor').focusin(function(){$(this).addClass('overlayed');});$('.literatumAuthors .entryAuthor').keydown(function(e){var code=e.keyCode||e.which;if(code=='9'){if(e.shiftKey){$(this).removeClass('overlayed');}
else{if(!($(this).has('div.author-extra-info').length!=0)){$(this).removeClass('overlayed');}}}});$('.literatumAuthors .entryAuthor .author-extra-info').keydown(function(e){var code=e.keyCode||e.which;if(code=='9'){$(this).parent().parent().removeClass('overlayed');}
if(code=='13'){$(this).click();$(this).parent().parent().removeClass('overlayed');}});if($('.xlinks-container').length&&$('.googleScholar-container').length){$('.xlinks-container').each(function(){if(!($(this).is(':empty'))&&!($(this).parent().find('.googleScholar-container').is(':empty'))){$('<span>,</span>').insertAfter($(this));}});}
var checkCurrentUrl=window.location.search;if(checkCurrentUrl.indexOf("quickLinkVolume=")!=-1||checkCurrentUrl.indexOf("quickLinkYear=")!=-1){var parseQueryString=function(){var objURL={};checkCurrentUrl.replace(new RegExp("([^?=&]+)(=([^&]*))?","g"),function($0,$1,$2,$3){objURL[$1]=$3;});return objURL;};var urlParams=parseQueryString();$('li.vol_li.active').each(function(){var current_id=$(this).attr('id');var offsetVal=$('.journal-sticky-header').length?$('.journal-sticky-header').height()+20:20;if(current_id.indexOf(urlParams["quickLinkVolume"])!=-1||current_id.indexOf(urlParams["quickLinkYear"])!=-1){$('html,body').animate({scrollTop:$('#'+current_id).offset().top-offsetVal},'slow');return false;}});if($('#tocList').length){var offsetVal=$('.journal-sticky-header').length?$('.journal-sticky-header').height()+20:20;console.log(offsetVal);$('html,body').animate({scrollTop:$('#tocList').offset().top-offsetVal},'slow');}}
$('.literatumPublicationHeader .orcid-author').on('click touchstart',function(e){e.preventDefault();window.open($(this).attr('data'),'_blank');});$('.layout-tabs .tab-nav li a').on('click',function(e){e.preventDefault();var offsetVal=$('.journal-sticky-header').length?$('.journal-sticky-header').height()+20:20;$('html,body').animate({scrollTop:$('.layout-tabs').offset().top-offsetVal},'fast');});$('.nav-toc-list').on('click',function(e){e.preventDefault();var thisUrl=$(this).attr('href')+'?nav=tocList';$(this).attr('href',thisUrl);window.location=thisUrl;});var pass1=$('.liteartumUserProfileWidget #password1');var oldPass=$('.liteartumUserProfileWidget #oldpassword');pass1.on("input keypress paste",function(){if(pass1.val().length>0)
oldPass.parent().closest('div').removeClass("hidden");else
oldPass.parent().closest('div').addClass("hidden");});if(navigator.userAgent.toLowerCase().match(/version\/[\d.]+.*safari/)){$(window).bind("pageshow",function(event){if(event.originalEvent.persisted){window.location.reload();}});}});function applySeriesNavigationRules(){var windowWidth=getClientWidth();if(windowWidth>1024){var titleContainerHeight=$('.title-container').height();var infoHeight=$('.literatumSeriesNavigation').find('.info').height();var publicationSerialHeaderBeforeAfter='.publicationSerialHeader::before,.publicationSerialHeader::after{top: '+(titleContainerHeight+33)+'px;}';var publicationSerialHeader='.publicationSerialHeader{height: '+(titleContainerHeight+62)+'px;}';var hoveredfocused='.hoveredfocused{height: '+(infoHeight+62)+'px;}';var hoveredfocusedBeforeAfter='.hoveredfocused:before, .hoveredfocused:after{top: '+(infoHeight+33)+'px;}';$('head').append('<style>'+publicationSerialHeaderBeforeAfter+publicationSerialHeader+hoveredfocused+hoveredfocusedBeforeAfter+'</style>');$('.publicationSerialHeader').on('focusin mouseenter',function(){$(this).addClass('hoveredfocused');$('.seriesNavDropZone').css('opacity','1');var serialAction=$('.serial-action');if($(serialAction).length){$(serialAction).css('opacity','1');}}).on('focusout mouseleave',function(){$(this).removeClass('hoveredfocused');$('.seriesNavDropZone').css('opacity','0');var serialAction=$('.serial-action');if($(serialAction).length){$(serialAction).css('opacity','0');}});}}
function showPageRangeAndHistory(){var fullHistoryText='';var showPageRange=false;var contentItemPageRange=$('.literatumContentItemPageRange .contentItemPageRange');if(contentItemPageRange.length){fullHistoryText=contentItemPageRange.text().trim();showPageRange=true;}
if($('.literatumContentItemHistory .widget-body').length){$('.literatumContentItemHistory .widget-body > div').each(function(index,element){if(index==0&&contentItemPageRange.text().trim().length>0){fullHistoryText+=' |';}
fullHistoryText+=' '+(element.innerHTML).trim();if(index!=$('.literatumContentItemHistory .widget-body > div').length-1){fullHistoryText+=',';}});}
$('<div class="itemPageRangeHistory"></div>').insertBefore(showPageRange?$('.literatumContentItemPageRange'):$('.literatumContentItemHistory'));$('.itemPageRangeHistory').html(fullHistoryText);$('.literatumContentItemPageRange').css('display','none');$('.literatumContentItemHistory').css('display','none');}
function submitLinkAsPOST(link,e){var url=$(link).attr('href');var action=url.substring(0,url.indexOf('?'));var queryString=url.substring(url.indexOf('?')+1,url.length);var params=queryString.split('&');var form=$("<form/>",{action:action,method:'post'});for(var index=0;index<params.length;index++){var param=params[index];var nameAndVal=param.split('=');var paramName=nameAndVal[0];var paramValue=nameAndVal[1];var inputField=$("<input/>",{type:'hidden',name:paramName,value:decodeURIComponent(paramValue)})
$(form).append(inputField);}
$('body').append(form);$(form).submit();}
function submitCitationSearch(jCode){var volume=$("#quickLinkVolume").val();if(volume==$("#quickLinkVolume").attr("placeholder"))volume="";var issue=$("#quickLinkIssue").val();if(issue==$("#quickLinkIssue").attr("placeholder"))issue="";var page=$("#quickLinkPage").val();if(page==$("#quickLinkPage").attr("placeholder"))page="";window.location="/action/quickLink?quickLink=true&quickLinkJournal="+jCode+"&quickLinkVolume="+volume+"&quickLinkIssue="+issue+"&quickLinkPage="+page;}
var params={};window.location.search.replace(/[?&]+([^=&]+)=([^&]*)/gi,function(str,key,value){params[key]=value;});function getParameterByName(name){name=name.replace(/[\[]/,"\\\[").replace(/[\]]/,"\\\]");var regex=new RegExp("[\\?&]"+name+"=([^&#]*)"),results=regex.exec(location.search);return results==null?"":decodeURIComponent(results[1].replace(/\+/g," "));}
function showFull(target){$('.firstPage').toggleClass('fullImage');}
function chooseCardTypePopup(element){$(function(){$(element).dialog({resizable:false,height:210,width:300,title:"Notice",dialogClass:'paymentPopup',buttons:{"OK":function(){$(element).addClass("hide");$(this).dialog("close");}}});});}
function backToTop(){$('html,body').animate({scrollTop:0},'slow');}
function doAnimate(target,dur){$('html,body').animate({scrollTop:$('#'+target).offset().top-20},dur);}
function changedCountrySelect(element){var options=$("#stateOptions");var visibleBlock=options.children('#state'+$(element).val());var visibleId=visibleBlock&&visibleBlock.length?visibleBlock[0].id:'stateTxt';var hasLabel=visibleBlock.find('label').length?true:false;options.children().each(function(index,block){var blockId=block.id;var input;block=$(block);if(blockId==visibleId){block.show();input=block.find('.input');input.attr("name",'state');input.val("");options.prev().find('abbr').remove();if(visibleId!='stateTxt'&&!hasLabel)
options.prev().append('<abbr title="required field">*</abbr>');}else{block.hide();input=block.find('.input').eq(0);input.attr("name",'stateHidden');}});}
function showRequiredStar(){var showLabel=$("#stateOptions").siblings('span').length?true:false;if(showLabel)
$("#stateOptions").prev().append('<abbr title="required field">*</abbr>');}
function getClientWidth(){return window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth;};
function asyncWebFontLoad(){loadFontConfiguration();(function(d){var wf=d.createElement('script'),s=d.scripts[0];wf.src='https://ajax.googleapis.com/ajax/libs/webfont/1.5.10/webfont.js';s.parentNode.insertBefore(wf,s);setTimeout(function(){fallback(wf);},3000);})(document);}
function loadFontConfiguration(){var blocked=false;var fallbackFontFileID="fallback-fonts"
WebFontConfig={google:{families:['Open Sans:400,300,600,700','Droid Serif:bold,bolditalic,italic,regular']},fontinactive:function(){if(!blocked){loadFallbackFonts();blocked=true;}}};}
function fallback(wf){if($('.wf-active').length==0){loadFallbackFonts();wf.remove();}}
function loadFallbackFonts(){var fallbackFontFileID="fallback-fonts";if(!document.getElementById(fallbackFontFileID)){var head=document.getElementsByTagName('head')[0];var link=document.createElement('link');link.id=fallbackFontFileID;link.rel='stylesheet';link.type='text/css';link.href="/templates/jsp/_style2/_tandf/pb2/css/fallback-Google-fonts.css";head.appendChild(link);}}
$(document).ready(asyncWebFontLoad);
$(document).ready(function(e){$('.customLoginBar').click(function(event){loginBar(this);});$('.disable-click').click(function(event){return false;});if(!$('.literatumInstitutionBanner .institution-image img').length){$('.literatumInstitutionBanner').css({'width':'0'});}});var loginBar=function(e){var list=$(e).find('.LoginBarList');var customLoginBar=$(e).closest('.customLoginBar');if($('.fullIndividualName').length){if(list.is(':visible')){list.slideUp(250,function(){customLoginBar.removeClass('activeMenu');});}else{customLoginBar.addClass('activeMenu');list.slideDown(250);}}};
$(document).ready(function(e){var clientWidth=window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth;var issueAnchors=$('.yearContent.open .issues .container .loi-issues-scroller a span');var issuesContainerAfterStretch=$('.yearContent.open .issues');var stretchFlag=false;if(issueAnchors.length){issueAnchors.each(function(){var issueNumberRange=$(this).text();if(issueNumberRange.length>6){stretchFlag=true;}});if(stretchFlag){if(clientWidth<769){issueAnchors.css('font-size',10);}
else{issueAnchors.each(function(){$(this).parent().addClass('stretched');});issuesContainerAfterStretch.css('width',505);}}}
var issuePrevBtn='.yearContent.open .issue-prev-btn';var issueNextBtn='.yearContent.open .issue-next-btn';var issueScrollContent='.yearContent.open .loi-issues-scroller';var issueMaskWidth=$(issueScrollContent).parent().width();var volumeScrollTransition=200;var issueScrollTransition=400;$(issuePrevBtn).addClass('inactive');$(issueNextBtn).addClass('inactive');if($(issueScrollContent).width()>issueMaskWidth)
{$(issueNextBtn).removeClass('inactive');}
$(document).on('click',issueNextBtn,function(){if(!$(issueNextBtn).hasClass('inactive')){var currentMargin=parseInt($(issueScrollContent).css('margin-left'));var remainWidth=$(issueScrollContent).width()-((currentMargin*-1)+issueMaskWidth);if(currentMargin==0){if(($(issueScrollContent).width()-issueMaskWidth)>=issueMaskWidth){$(issueScrollContent).css('margin-left',(issueMaskWidth*-1));setTimeout(setNavBtnStatus,issueScrollTransition);}
else{$(issueScrollContent).css('margin-left',(($(issueScrollContent).width()-issueMaskWidth)*-1));setTimeout(setNavBtnStatus,issueScrollTransition);}}else if(currentMargin<0){if((remainWidth-issueMaskWidth)>=0){var actualMargin=(currentMargin*-1)+issueMaskWidth;$(issueScrollContent).css('margin-left',(actualMargin*-1));setTimeout(setNavBtnStatus,issueScrollTransition);}
else{var actualMargin=(currentMargin*-1)+remainWidth;$(issueScrollContent).css('margin-left',actualMargin*-1);setTimeout(setNavBtnStatus,issueScrollTransition);}}}});$(document).on('click',issuePrevBtn,function(){if(!$(issuePrevBtn).hasClass('inactive')){var currentMargin=parseInt($(issueScrollContent).css('margin-left'));if((currentMargin+issueMaskWidth)<=0){$(issueScrollContent).css('margin-left',(currentMargin+issueMaskWidth));setTimeout(setNavBtnStatus,issueScrollTransition);}
else{$(issueScrollContent).css('margin-left','0');setTimeout(setNavBtnStatus,issueScrollTransition);}}});function setNavBtnStatus(){var currentMargin=parseInt($(issueScrollContent).css('margin-left'));var remainWidth=$(issueScrollContent).width()-((currentMargin*-1)+issueMaskWidth);if(currentMargin<0){$(issuePrevBtn).removeClass('inactive');}
else{$(issuePrevBtn).addClass('inactive');}
if(remainWidth>0){$(issueNextBtn).removeClass('inactive');}
else{$(issueNextBtn).addClass('inactive');}}
$("a.allissues-ja.expander").on('click',function(e){location.href=$('a.allissues-ja.expander').attr('href');});$("a.allissues-forthcoming.expander").on('click',function(e){location.href=$('a.allissues-forthcoming.expander').attr('href');});$(".literatumListOfIssuesResponsiveWidget .yearSlider .yearSliderInner > a.expander").off('click');$(".literatumListOfIssuesResponsiveWidget .yearSlider .yearSliderInner > a.expander").click(function(e){e.preventDefault();e.stopPropagation();if($(this).hasClass("expander")){e.preventDefault();}else{return null;}
var selVolSpan=$(".literatumListOfIssuesResponsiveWidget .yearSlider a.open").find('span').get(0);var selVolLabel=$(selVolSpan).text().replace('Volume','Vol');$(selVolSpan).text(selVolLabel);var volSpan=$(this).find('span').get(0);var volLabel=$(volSpan).text().replace('Vol','Volume');$(volSpan).text(volLabel);if($(".literatumListOfIssuesResponsiveWidget .yearSlider .decade-container.open").length>0){$(".literatumListOfIssuesResponsiveWidget .yearSlider .decade-container.open").removeClass("open");$(".yearSliderInner").css("height","auto");}
$(".literatumListOfIssuesResponsiveWidget .yearSlider a").removeClass("open");$(this).addClass("open");var itemIndex=$(".literatumListOfIssuesResponsiveWidget .yearSlider .expander").index($(this));var selectedYear=$(".literatumListOfIssuesResponsiveWidget .yearContent:not(:empty):eq("+itemIndex+")");window.location=selectedYear.find('.loi-issues-scroller').find('>:first-child').attr('href');var thisLink=$(this);var thisLinkPosition=thisLink.offset().left;var nextButton=$(".loi-next-btn");var nextButtonPosition=nextButton.offset().left;var prevButton=$(".loi-prev-btn");var prevButtonPosition=prevButton.offset().left;if(thisLinkPosition>(nextButtonPosition-thisLink.outerWidth())){if(thisLink.hasClass("expander")){$(".yearSliderInner").animate({marginLeft:'-='+thisLink.outerWidth()+'px'});if($(this).get(0)==$(".yearSliderInner > *:last").get(0)){nextButton.addClass("inactive");}
if($(".yearSliderInner > *:first").offset().left<(prevButtonPosition+2*prevButton.outerWidth())){prevButton.removeClass("inactive");}}}else if(thisLinkPosition<(prevButtonPosition+prevButton.outerWidth())){if(thisLink.hasClass("expander")){$(".yearSliderInner").animate({marginLeft:'+='+thisLink.outerWidth()+'px'});if($(this).get(0)==$(".yearSliderInner > *:first").get(0)){prevButton.addClass("inactive");}
nextButton.removeClass("inactive");}}});$(".loi-next-btn").off('click');$(".loi-next-btn").click(function(){var yearSlider=$(".yearSliderInner");var screenSize=$(window).width();var shiftSize=screenSize/3;var nextButton=$(".loi-next-btn");if(!nextButton.hasClass("inactive")){var diff=firstVolume.offset().left-($('.loi-prev-btn').offset().left+$('.loi-prev-btn').outerWidth());diff=diff<0?diff*-1:diff;if(diff>12){resetSliderMargin();setTimeout(function(){$(".loi-next-btn").click();},500);}else{nextButton.addClass("inactive");var firstVisibleVolume=firstVolume!=undefined?firstVolume:($(".yearSliderInner a.open").length?$(".yearSliderInner a.open"):$(".yearSliderInner > *:first"));var nextButtonLeftOffset=nextButton.offset().left;var nextVolume=firstVisibleVolume;var lastVolume=$(".yearSliderInner > *:last");var oldFirstVolume=$(firstVolume);if($(nextVolume.next()).is(lastVolume)){firstVolume=$(lastVolume);}else{while(nextVolume.offset().left<nextButtonLeftOffset){if($(nextVolume).is(lastVolume)){break;}
nextVolume=$(nextVolume).next();}
firstVolume=$(nextVolume).prev();}
shiftSize=firstVolume.offset().left-firstVisibleVolume.offset().left;var lastVolumeRightOffset=$(lastVolume).offset().left+$(lastVolume).outerWidth();var space=lastVolumeRightOffset-$(nextButton).offset().left;if(shiftSize>space){var nextFirstVolume=$(oldFirstVolume).next();while($(nextFirstVolume).offset().left-$(oldFirstVolume).offset().left<space){nextFirstVolume=$(nextFirstVolume).next();}
shiftSize=$(nextFirstVolume).offset().left-$(oldFirstVolume).offset().left;firstVolume=$(nextFirstVolume);}
yearSlider.animate({marginLeft:'-='+shiftSize+'px'},volumeScrollTransition);setTimeout(checkVolNavButtonsStatus,issueScrollTransition*2);}}});$(".loi-prev-btn").off('click');$(".loi-prev-btn").click(function(){var yearSlider=$(".yearSliderInner");var screenSize=$(window).width();var shiftSize=screenSize/3;var prevButton=$(".loi-prev-btn");if(!prevButton.hasClass("inactive")){$(".loi-prev-btn").addClass("inactive");var firstVisibleVolume=firstVolume!=undefined?firstVolume:($(".yearSliderInner a.open").length?$(".yearSliderInner a.open"):$(".yearSliderInner > *:first"));var prevButtonLeftOffset=firstVisibleVolume.offset().left;var prevVolume=firstVisibleVolume;var theFirstVolume=$(".yearSliderInner > *:first");var sliderWidth=$(".loi-next-btn").offset().left-($(".loi-prev-btn").offset().left+$(".loi-prev-btn").outerWidth());var shiftSize=0;while((prevButtonLeftOffset-prevVolume.offset().left)<sliderWidth){firstVolume=prevVolume;shiftSize=prevButtonLeftOffset-prevVolume.offset().left;prevVolume=$(prevVolume).prev();if(prevVolume.is(theFirstVolume)){shiftSize=prevButtonLeftOffset-prevVolume.offset().left;firstVolume=prevVolume;break;}}
yearSlider.animate({marginLeft:'+='+shiftSize+'px'},volumeScrollTransition,"linear");setTimeout(checkVolNavButtonsStatus,issueScrollTransition*2);}});resetVolumesSlider();resetIssuesSlider();if($('.literatumListOfIssuesWidget').length&&$('input[data-name="volumeQueried"]').length&&$('input[data-name="volumeQueried"]').attr('data-volume')!=""){var volNumber=$('input[data-name="volumeQueried"]').attr('data-volume');var offsetVal=$('.journal-sticky-header').length?$('.journal-sticky-header').height()+20:20;$('html,body').animate({scrollTop:$('[id^="vol_'+volNumber+'_"]').offset().top-offsetVal},'slow');}
function resetVolumesSlider(){if($('.loi-next-btn').length){var selectedLink=$(".yearSliderInner a.open");firstVolume=selectedLink;if(selectedLink.length){var lastLink=$(".yearSliderInner > *:last");var lastLinkLeftOffset=$(lastLink).offset().left;var nextButton=$(".loi-next-btn");var nextButtonLeftOffset=$(nextButton).offset().left;if((lastLinkLeftOffset+lastLink.outerWidth())>=nextButtonLeftOffset){var selectedLinkLeftOffset=$(selectedLink).offset().left;if($(selectedLink).length&&selectedLinkLeftOffset+$(".yearSliderInner a.open").outerWidth()>nextButtonLeftOffset){var firstLinkLeftOffset=$(".yearSliderInner").filter(":first").offset().left;var shiftSize=selectedLinkLeftOffset-firstLinkLeftOffset;if((lastLinkLeftOffset+lastLink.outerWidth()-shiftSize)<nextButtonLeftOffset){nextButton.addClass("inactive");}
$(".yearSliderInner").css('margin-left','-'+shiftSize+'px');}}}
setTimeout(checkVolNavButtonsStatus,200);}}
function resetIssuesSlider(){if($(".issue-next-btn").length&&$(".loi-issues-scroller a.open".length)){var sliderWidth=$(".issues").width();var issuesSlider=$(".yearContent.open .loi-issues-scroller");var firstIssue=$(issuesSlider).find(" > *:first");var firstIssueLeftOffset=$(firstIssue).offset().left;var selectedLink=$(issuesSlider).find("a.open");var selectedLinkLeftOffset=$(selectedLink).offset().left;var shiftSize=selectedLinkLeftOffset-firstIssueLeftOffset;if(shiftSize+$(selectedLink).outerWidth()>sliderWidth){$(issuesSlider).css('margin-left','-'+shiftSize+'px');$(".issue-prev-btn").removeClass("inactive");var lastIssue=$(issuesSlider).find(" > *:last");if((lastIssue.offset().left+lastIssue.outerWidth())-selectedLink.offset().left<sliderWidth){$(".issue-next-btn").addClass("inactive");}}}}
function checkVolNavButtonsStatus(){if($(".yearSliderInner > *:first").offset().left>=$('.loi-prev-btn').offset().left){$(".loi-prev-btn").addClass("inactive");}else{$(".loi-prev-btn").removeClass("inactive");}
if($('.loi-next-btn').offset().left>=($(".yearSliderInner > *:last").offset().left+$(".yearSliderInner > *:last").outerWidth())){$(".loi-next-btn").addClass("inactive");}else{$(".loi-next-btn").removeClass("inactive");}}});$(window).resize(function(){if(!resizing){resizing=true;if(prevSliderWidth!=$('.yearSlider').width()){prevSliderWidth=$(window).width();setTimeout(resetSliderMargin,500);}}});function resetSliderMargin(){var prevButtonLeftOffset=$(".loi-prev-btn").offset().left+$(".loi-prev-btn").outerWidth();var firstVolLeftOffset=$(firstVolume).offset().left;var shiftSize=(prevButtonLeftOffset-firstVolLeftOffset)+10;$(".yearSliderInner").css('margin-left',parseInt($(".yearSliderInner").css('margin-left'))+shiftSize+'px');resizing=false;}
var resizing=false;var prevSliderWidth=$('.yearSlider').width();var firstVolume;
$(document).ready(function(){$('.altmetric-score .value').each(function(index){if($(this).length){var doi=$(this).attr("data");var altmetricKey=$('.altmetric-Key').attr('data');jQuery.ajax({url:'https://api.altmetric.com/v1/doi/'+doi+'?key='+altmetricKey+'&callback=?',dataType:'jsonp',context:$(this),crossDomain:true,success:function(data){if(data.score>0){var out="<span>";out+=Intl.NumberFormat().format(Math.ceil(data.score))+"</span>";$(this).prepend(out);}}});}});$(window).resize(function(){updatePopupSize();});});$(window).load(function(){var badgeLink=$('.altmetric-embed').find('a');var metricsContainer=$('.altmetric-container');metricsContainer.delegate(badgeLink,'click',(function(e){var scoreLink=badgeLink.attr('href');if(scoreLink!=null&&(typeof scoreLink!='undefined')){e.preventDefault();if($('.linkToPopup').length){initAltmetricsPopup(scoreLink);}else
if($('.linkToNewTab').length){window.open(scoreLink,'_blank');}
ga('send','event','Altmetric badge','Altmetric badge clicks','Altmetric badge - Article full text page');}}));if(badgeLink.length){metricsContainer.show();}
$('.altmetric-score').each(function(index){if($(this).find('.value span').length){$(this).show();}else{if($(this).hasClass('true')){$(this).find('.value').prepend('<span>0</span>');$(this).show();}}});});function initAltmetricsPopup(href){$(".altmetricsPopup").html("<iframe src="+href+" class='altmetrics-frame'></iframe>");$(".altmetricsPopup").dialog({resizable:false,height:getDialogheight(800),width:getDialogWidth(1080),modal:true,dialogClass:'altmetricPopupBorder',draggable:false,open:function(event,ui){$('.ui-widget-overlay').addClass('custom-overlay');$("body").css({overflow:'hidden'});},close:function(event,ui){$('.ui-widget-overlay').removeClass('custom-overlay');},beforeClose:function(event,ui){$("body").css({overflow:'visible'});}});$(".altmetricPopupBorder").prepend("<span class='altmetricsCloseButton ' tabindex='0' onclick='closeAltmetricsPopup()'></span>");updatePopupSize();}
function getDialogheight(maxHeight){var h=window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight;return h>=maxHeight?maxHeight:h-70;}
function getDialogWidth(maxWidth){var w=window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth;return w>=maxWidth?maxWidth:w-70;}
function closeAltmetricsPopup(){$(".altmetricsPopup").dialog('close');}
function updatePopupSize(){if($('.altmetricsPopup.ui-dialog-content').length){$(".altmetricsPopup").dialog("option","width",getDialogWidth(1080));$(".altmetricsPopup").dialog("option","height",getDialogheight(800));$('.altmetrics-frame').css("width",getDialogWidth(1080)-66);var w=window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth;var h=window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight;$(".altmetricsPopup").dialog('option','position',[((w-getDialogWidth(1080))/2)-20,(h-getDialogheight(800))/2]);}};
var stickMe=function($item,offset,resolution){if(!$item[0]){return false;}
var $item=$item;var reload3rdParties=function(){addthis.toolbox('.addthis_toolbox');};var buildHtml=function(){if(!$('.fixed-tabs').length){var tabs=$('.publication-tabs').find('.tabs').find('.tab-nav');if(tabs.text()==''){tabs=$('.ecommAbs').find('.tabs').find('.tab-nav');}
var navTop='<div class="nav-top-cont">'+'<a class="nav-logo hidden-xs hidden-sm" href="/">'+'<img src="/templates/jsp/_style2/_tandf/pb2/images/tandf-sm.png" alt="Taylor & Francis Online"/>'+'</a>'+'<a class="nav-top" href="#top"><span class="hidden-xs hidden-sm">Top</span></a>'+'</div>';var skipContent="";if($('.skipContent.off-screen').length)
skipContent=$('.skipContent.off-screen').clone();var tabsHtml='<div class="nav-tabs literatumPublicationContentWidget"><ul class="tab-nav custom-screen" role="tablist">'+$item.html()+'</ul></div>';var addThis='<div class="share hidden-custom"><a class="shareicon" href="#"></a><div class="nav-add-this general-bookmark-share"> '+$('.general-bookmark-share').html()+'</div></div>';var fixedTabs=$('<div class="fixed-tabs"></div>').append(skipContent).append(navTop).append(tabsHtml).append(addThis).addClass($('.db-record-page').length?'db-record-nav':'');$(fixedTabs).find('.shareicon').on('click',function(e){e.preventDefault();$(this).closest('.share').toggleClass('open');});$('body').prepend(fixedTabs);$(fixedTabs).find('.tab-nav').find('a, .db-entry-abs-tab').not(".grant-access").each(function(){$(this).html("<span class='hidden-xs_tl'>"+$(this).html()+"</span>");});$(".nav-top-cont,.nav-tabs.literatumPublicationContentWidget,.share").wrapAll('<div class="container"></div>');var width=window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth;var grantBtn=$('.fixed-tabs').find('.tab-nav').find('.grant-access');if(width<=768){if(grantBtn.length){var tabText=grantBtn.html().trim();var firstLine=tabText.substring(0,tabText.indexOf(' '));var secondLine=tabText.substring(tabText.indexOf(' '));var tabHtml=firstLine.trim()+'<br/>'+secondLine.trim();grantBtn.html(tabHtml).css('vertical-align','middle').css('font-size',10);}}
$(document).on('click','.fixed-tabs .tab-nav .grant-access',function(e){e.preventDefault();if($("#accessDenialWidget").length){$('html,body').animate({scrollTop:$("#accessDenialWidget").offset().top-50},'slow');}else{var redirectUri=$(this).find('.redirect-uri');if(redirectUri.length>0){window.location=redirectUri.text();}}});if(width>768&&width<1024){$('.fixed-tabs .nav-tabs.literatumPublicationContentWidget').css('width','90%');}
reload3rdParties();}};var removeHtml=function(){var fixedTabs=$('.fixed-tabs');if(fixedTabs.length){fixedTabs.remove();}};var doTheStick=function(){var scrollTop=$(window).scrollTop();var tabNav=$('.tabs ul.tab-nav');var bookmarkIcons=$('.tabs .general-bookmark-share');var tabNavItem=$('.publication-tabs .tab-nav li');if($(window).width()>resolution){var w=window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth;var itemTop=tabNav.offset().top;if(itemTop<=scrollTop){buildHtml();tabNav.css('visibility','hidden');if(w<769){bookmarkIcons.css('visibility','hidden');}}else{removeHtml();tabNav.css('visibility','visible');if(w<769){bookmarkIcons.css('visibility','visible');}}}};$(window).scroll(function(){doTheStick();});};var isMobile=false;$(document).ready(function(){$('body').on('click','.nav-top',function(e){e.preventDefault();$("html, body").animate({scrollTop:0},"slow");});var tabs=$('.publication-tabs').find('.tabs').find('.tab-nav');if(tabs.text()==''&&$('.database_access_denial').length<1){tabs=$('.ecommAbs').find('.tabs').find('.tab-nav');}
stickMe(tabs,0,0);var width=window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth;if(width<=768){$('.tab-nav').after($('.general-bookmark-share'));var tabsHeight=$('.tabs .tab-nav').height()+$('.tabs .general-bookmark-share').height()+20;var publicationContentHeader=$('.publicationContentHeader');var publicationContentBody=$('.publicationContentBody');publicationContentHeader.css('padding-bottom',tabsHeight);publicationContentBody.css('top',-1*tabsHeight);}
if(width>768&&width<=1440){tabs.addClass('custom-screen');var shareContainer=$('.addthis_toolbox .custom_images');shareContainer.children('a').each(function(){if(!$(this).hasClass('addthis_button_compact')){$(this).remove();}});if(width>768&&width<1024){tabs.append('<li class="share-custom-tab"></li>');$('.share-custom-tab').html($('<div>').append($('.general-bookmark-share')).html());$('.nav-tabs.literatumPublicationContentWidget').width}}
$(document).on('click','[href^="#"][data-reflink]',function(e){e.preventDefault();var overlay=$(this).closest('.ref-lnk').find('.ref-overlay').first();if(!overlay.hasClass('open')){$('.ref-overlay').removeClass('open')}
overlay.toggleClass('open');}).on('click','.ref-close',function(e){$(this).closest('.ref-overlay').toggleClass('open');});$('.show-metrics').on('click',function(){if($('#accessDenialWidget').length){$('#accessDenialWidget').css('display','none');}});$(document).on('click ','.publicationContentAuthors span.ext-link',function(e){e.stopPropagation();e.preventDefault();var target=$(this).attr('data-target');var href=$(this).attr("data-href");typeof target!=="undefined"?window.open(href,target):window.location.href=href;});$(document).on('mousemove ','.publicationContentAuthors a.entryAuthor',function(e){$(this).addClass('overlayed');});$(document).on('mouseleave ','.publicationContentAuthors a.entryAuthor',function(e){$(this).removeClass('overlayed');});$(document).on('click','.publicationContentAuthors a.entryAuthor .corr-email',function(e){e.stopPropagation();e.preventDefault();window.location.href=$(this).attr("data-mailto");});$(document).on('touchstart ','.publicationContentAuthors a.entryAuthor',function(e){isMobile=true;e.stopPropagation();e.preventDefault();$("a.entryAuthor").each(function(){$(this).removeClass('overlayed');});$(this).addClass('overlayed');});$(document).on('touchstart ',':not(a.entryAuthor)',function(e){$("a.entryAuthor").each(function(){$(this).removeClass('overlayed');});});if(width<=1024||isMobile){$('.publicationContentAuthors a.entryAuthor').on('click',function(event){event.stopPropagation();event.preventDefault();}).css('cursor','pointer').css('pointerEvents','unset');};});$(document).on('click','.fixed-tabs .show-metrics',function(){$('.fixed-tabs .tab-nav > li').each(function(){if($(this).hasClass('active')){$(this).attr('aria-selected',false);$(this).removeClass('active');}});$('.tabs.tabs-widget .show-metrics').click();$('.fixed-tabs .metrics-tab').attr('aria-selected',true);$('.fixed-tabs .metrics-tab').addClass('active');});$(window).load(function(){$('.tab-nav').find('li').on('click',function(){var link=$(this).find("a"),href=link.attr('href');if(typeof href!=='undefined'&&!$(link).hasClass('grant-access')){window.location=$(link).attr("href");}});var currentURL=window.location.href;var navParam=getParameterByName('nav');if(navParam!=""&&$('#'+navParam).length){var offsetVal=20;if($('.journal-sticky-header').length)
offsetVal=40+$('.journal-sticky-header').height();if($('.publication-tabs .tab-nav').length)
offsetVal=20+$('.publication-tabs .tab-nav').height();$('html, body').animate({scrollTop:$('#'+navParam).offset().top-offsetVal},1000);}
else if(currentURL.indexOf("needAccess=true")>0&&$('#accessDenialWidget').length){$('html, body').animate({scrollTop:$("#accessDenialWidget").offset().top-20},1000);}
else if(currentURL.indexOf("scroll=top")>0){$('html, body').animate({scrollTop:$(".tabs .tab-nav").offset().top+5},1000);}});function addFlashMovieForMedia(id,flv,width,height,allowFull){id+="Media";var flashvars={file:flv,type:'flv'};var params={allowfullscreen:allowFull};var attributes={};swfobject.embedSWF('/flvplayer.swf',id,width,height,"7.0.0",false,flashvars,params,attributes);};
function loadMathToggle(){var mathJaxLogo=$('.mathJaxLogo');var qMarkToolTip=mathJaxLogo.find('.auPopUp');mathJaxLogo.find('.qMrk').click(function(){qMarkToolTip.stop(true,true);mathJaxLogo.find('.pointyEdge').show();qMarkToolTip.css({'top':$(this).position().top+25+'px','left':$(this).position().left-143+'px','z-index':10}).fadeIn("fast");});$(document).mouseup(function(event){if(!qMarkToolTip.is(event.target)&&qMarkToolTip.has(event.target).length==0){qMarkToolTip.stop(true,true).fadeOut();}});var mathJaxToggle=$('#mathJaxToggleCheck');initMathjax(mathJaxToggle);}
function initMathjax(mathJaxToggle){if($.cookies('displayMathJaxFormula')===''){$.cookies('displayMathJaxFormula','true',{expires:365,path:'/'});}
var isChecked=isEnabled();showImagesWithNoMMLFormula();checkMathJax(isChecked,mathJaxToggle);showMathJaxOnPage(isChecked);mathJaxToggle.change(function(){var mathJaxTog=$(this);var isChecked=mathJaxTog.is(':checked');showMathJaxOnPage(isChecked);$.cookies('displayMathJaxFormula',isChecked.toString(),{expires:365,path:'/'});});showToggle(mathJaxToggle);MathMenu.responsive('.math-settings');}
function isEnabled(){return pareBoolean($.cookies('displayMathJaxFormula'));}
function checkMathJax(isChecked,mathJaxToggle){isChecked?mathJaxToggle.attr('checked','checked'):mathJaxToggle.removeAttr('checked');}
function showMathJaxOnPage(isChecked){isChecked?showMathJax():hideMathJax();}
function showImagesWithNoMMLFormula(){if($(".no-mml-formula").length>0){$(".no-mml-formula[data-formula-source*='\"type\" : \"image\"']").loadInview();}}
function pareBoolean(isChecked){if(isChecked==null){isChecked='true';}
return isChecked=='true';}
function showMathJax(){if($('.NLM_disp-formula').length>0){$('.pageBody').removeClass('hideMathJax').addClass('hideMathImages');$("[data-formula-source*='\"type\" : \"mathjax\"']").loadInview();}}
function hideMathJax(){$('.pageBody').removeClass('hideMathImages').addClass('hideMathJax');$("[data-formula-source*='\"type\" : \"image\"']").loadInview();}
function showToggle(mathJaxToggle){if(typeof mathJaxToggle=='undefined')return;mathJaxToggle.closest('#mathJaxToggle').removeClass('hideElement');}
$(document).ready(loadMathToggle);
$(document).ready(function(e){if($(window).width()>1024&&!$('.accessDenialWidget').length){var combinedWidget=$('.combinedRecommendationsWidget');var docHeight=$(document).height();var comeInHere=docHeight-($('.pageFooter').height()+combinedWidget.height());var scrollTop=$(window).scrollTop();var scrollArrow=$('.scroll-arrow');if(scrollTop>comeInHere){combinedWidget.addClass('recommended-sidebar');}
$(window).scroll(function(){var scrollTop=$(window).scrollTop();if((scrollTop>comeInHere)&&(combinedWidget.height()<comeInHere)&&$(window).width()>1024){combinedWidget.addClass('recommended-sidebar');showScrollArrow(scrollArrow);}
else{combinedWidget.removeClass('recommended-sidebar');scrollArrow.css('display','none');}});window.onscroll=function(){if($(window).width()>1024){var height=$(window).height();var scrollTop=$(window).scrollTop();var obj=$(".pageFooter");var pos=obj.position();if(height+scrollTop>pos.top+300){$('.recommended-sidebar').addClass('low-opacity');}
else{$('.recommended-sidebar').removeClass('low-opacity');}}}}
$('.scroll-arrow').click(function(e){$('.relatedArt').animate({scrollTop:$('.relatedArt').scrollTop()+200},400);});});function showScrollArrow(scrollArrow){if($('.combinedRecommendationsWidget').hasClass("recommended-sidebar")&&(scrollArrow.css('display')=='none')){if($('.relatedArt').prop('scrollHeight')>$('.relatedArt').prop('clientHeight')){scrollArrow.css('display','block');}}};
$(document).ready(function(){updateArticleCardSize();$('.toc-tabs .tab-nav li').on('click',function(){updateCardsSizeInTabs()});$(window).resize(function(){updateArticleCardSize();});});$(window).load(function(){updateArticleCardSize();});function updateArticleCardSize(){equal($('.userBasedcombinedRecommendationsWidget .article-card .header'));equal($('.userBasedcombinedRecommendationsWidget .article-card .footer'));updateCardsSizeInTabs();}
function updateCardsSizeInTabs(){equal($('.toc-tabs .tab-pane.active .article-card .footer'));equal($('.toc-tabs .tab-pane.active .article-card .header'));}
function equal(element){if($(element).length){var tallest=0;$(element).each(function(e){if($(this).height()>tallest)
tallest=$(this).height();});$(element).each(function(e){$(this).css({'min-height':tallest});});}};
$(document).ready(function(e){$('.informa-banner .title').on('click',function(){$('.informa-banner').toggleClass('show');});if($('.home-image').length){var homeImage=$('.home-image').attr('data-image-src');$('.home-image').css({'background-image':'url('+homeImage+')'});}
resizeHomeImage();$(window).resize(function(){resizeHomeImage();});$(window).scroll(function(){slowScroll();});});function resizeHomeImage(){var clientW=window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth;if(clientW<1025){var notificationWidget='.notificationMessageWidget';var notificationWidgetHeight=0;notificationWidgetHeight=$(notificationWidget).length?$(notificationWidget).height():0;var homeImageTop=$('.pageHeader').height()+(30+notificationWidgetHeight)+"px";$('.home-background').css({'top':homeImageTop});}else{$('.home-background').css({'top':0});}
slowScroll();}
function slowScroll(){if($('.home-search-label').length){var clientW=window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth;var searchLabelMargin=65,topicalIndexMargin=168;if(clientW<1025){topicalIndexMargin=79;searchLabelMargin=12;}
if(clientW<481){topicalIndexMargin=49;}else
if(clientW<769){topicalIndexMargin=31;}
var marginTopVal=searchLabelMargin+$(this).scrollTop()/4;$('.home-search-label').css({'margin-top':marginTopVal+"px"});$('.topicalIndex.home-page').css({'margin-top':topicalIndexMargin-(marginTopVal-searchLabelMargin)+"px"});}};
$(document).ready(function(e){$(".cookiePolicy .btn").on('click',function(e){e.preventDefault();$.cookies('cookiePolicy','accept',{expires:365,path:'/'});$(".cookiePolicy").remove();});if(!($.cookies('cookiePolicy')=='accept')){$('.cookiePolicy').css({'transform':'translateY(0)'});$('.cookiePolicy .banner').css({'transform':'translateY(0)'});}});
document.addEventListener('DOMContentLoaded',function(event){var SETTINGS={ENDPOINT:'https://crossmark.crossref.org/dialog',SCRIPT_VERSION:'v2.0',STYLESHEET_URL:'https://crossmark-cdn.crossref.org/widget/v2.0/style.css',};var touchStarted=false;var touchArea;var tapEvent=function(element,callback){element.addEventListener('click',function(event){if(event.ctrlKey||event.shiftKey||event.metaKey||event.which!==1){return;}
return callback(event);},false);element.addEventListener('touchstart',function(event){if(event.touches.length>1)return touchStarted=false;touchArea={x:event.touches[0].screenX,y:event.touches[0].screenY};touchStarted=element;event.stopPropagation();},false);window.addEventListener('touchstart',function(event){touchStarted=false;});element.addEventListener('touchmove',function(event){if(event.touches.length>1)return touchStarted=false;var newTouchArea={x:event.touches[0].screenX,y:event.touches[0].screenY};if(Math.pow(touchArea.x-newTouchArea.x,2)+Math.pow(touchArea.y-newTouchArea.y,2)>500){touchStarted=false;}},false);element.addEventListener('touchend',function(event){if(touchStarted){var element=touchStarted;touchStarted=false;var x=event.changedTouches[0].pageX-window.pageXOffset;var y=event.changedTouches[0].pageY-window.pageYOffset;var target=document.elementFromPoint(x,y);return callback(event);}else{event.preventDefault();}},false);};var buildQueryString=function(data){var query=[];for(var key in data){query.push(encodeURIComponent(key)+'='+encodeURIComponent(data[key]));}
return'?'+query.join('&');};var isIos=/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream;var getDoiMeta=function(){var metaTags=document.querySelectorAll("meta");for(var i in metaTags){if(metaTags.hasOwnProperty(i)){var tag=metaTags[i];if((tag.name||"").toLowerCase()=="dc.identifier"&&tag.scheme=="doi"){return tag;}}}};var doiMeta=getDoiMeta();var doi=doiMeta?doiMeta.getAttribute('content').replace(/^(info:doi\/|doi:)/,''):null;if(doi==null)doi=$("#crossMark").data('doi');var queryData={doi:doi,domain:window.location.hostname,uri_scheme:window.location.protocol,cm_version:SETTINGS.SCRIPT_VERSION};var css=document.createElement('link');css.setAttribute('href',SETTINGS.STYLESHEET_URL);css.setAttribute('type','text/css');css.setAttribute('rel','stylesheet');document.querySelector('head').appendChild(css);var widget=document.createElement('div');widget.setAttribute('id','crossmark-widget');widget.style.display='none';widget.innerHTML='<div class="crossmark-reset crossmark-overlay"></div>'+'<div class="crossmark-reset crossmark-popup">'+'<div class="crossmark-reset crossmark-popup__offset">'+'<div class="crossmark-reset crossmark-popup__inner">'+'<div class="crossmark-reset crossmark-popup__header">'+'<a target="_blank" href="http://www.crossref.org/crossmark">'+'<img class="crossmark-reset crossmark-popup__logo">'+'</a>'+'<button class="crossmark-reset crossmark-popup__btn-close"></button>'+'</div>'+'<div class="crossmark-reset crossmark-popup__content-wrapper">'+'<iframe class="crossmark-reset crossmark-popup__content"></iframe>'+'</div>'+'</div>'+'</div>'+'</div>';var overlay=widget.querySelector('.crossmark-overlay');var popup=widget.querySelector('.crossmark-popup');var popupOffset=widget.querySelector('.crossmark-popup__offset');var popupInner=widget.querySelector('.crossmark-popup__inner');var logo=widget.querySelector('.crossmark-popup__logo');var content=widget.querySelector('.crossmark-popup__content');var closeButton=widget.querySelector('.crossmark-popup__btn-close');if(isIos)popupOffset.classList.add('is-ios');document.body.appendChild(widget);[overlay,popup,closeButton].map(function(element){tapEvent(element,function(event){widget.style.display='none';event.preventDefault();event.stopPropagation();});});tapEvent(popupInner,function(event){event.stopPropagation();});var initialised=false;var links=[].slice.call(document.querySelectorAll('[data-target=crossmark]'),0);links.map(function(link){link.style.cursor='pointer';link.setAttribute('href',SETTINGS.ENDPOINT+buildQueryString(queryData));tapEvent(link,function(event){if(!initialised){content.setAttribute('src',SETTINGS.ENDPOINT+buildQueryString(queryData));initialised=true;}
widget.style.display='block';if(isIos)popupInner.style.top=window.scrollY+'px';event.preventDefault();event.stopPropagation();});});});
var scroll;(function(o,$){o.to=function(element,offset){$(element).find('a[href^="#"]').each(function(idx){$(this).off('click').bind('click',function(e){e.preventDefault();var dist=$(this.hash);if(dist.length){$('html, body').animate({'scrollTop':$(dist).offset().top-offset},'slow',function(){$('.sectionsNavigation').removeClass('open-nav').addClass('close-nav').animate({'height':'51px'},100);});}
resetAllLinks(element);$(this).addClass('active');});});};o.stickMe=function(element,offset){var $element=$(element);if($element.length){var itemTop=$element.offset().top-offset;$(window).scroll(function(){var currWidth=$element.width();var scrollTop=$(window).scrollTop();itemTop<scrollTop?$element.addClass('stick'):$element.removeClass('stick');$element.width(currWidth);});}};o.stickHeading=function(element,offset){$(window).scroll(function(){var htmlSecLst=$(element);var scrollTop=$(window).scrollTop();var sectionInfo=htmlSecLst.find('a[href^="#"]').map(function(x){var section=$(this.hash);return[[this.hash,section.length?section.offset().top-offset:-1]];});sectionInfo.push(['dummy',Number.MAX_VALUE]);var prev;$.each(sectionInfo,function(idx,v){if(v[1]>scrollTop){resetAllLinks(htmlSecLst);htmlSecLst.find("a[href='"+prev+"']").addClass('active');return false;}else{prev=v[0];}});});};function resetAllLinks(element){$(element).find('a[href^="#"]').removeClass('active');}})(scroll=scroll||{},$=$||jQuery);$(document).ready(function(e){scroll.to('.sections-nav',50);scroll.stickMe('.sectionsNavigation',0);scroll.stickHeading('.sections-nav',70);if($(window).width()>1025)
scroll.stickMe('.refine_search_section > .contents',0);var jump=$('.sectionsNavigation');var height=jump.height();jump.addClass('close-nav').find('.close').off('click').on('click',function(e){e.preventDefault();jump.hasClass('open-nav')?jump.removeClass('open-nav').addClass('close-nav').animate({'height':'51px'},600):jump.removeClass('close-nav').addClass('open-nav').animate({'height':height},600);});});
function submitLogin(){$('.submit-login').on('click',function(e){e.preventDefault();$('form[name = "frmLogin"]').submit();});$('form[name = "frmLogin"]').bind('keypress',function(e){if(e.keyCode==13){$(this).submit();}});}
function getAccess(){$('.grant-access').parent().off('click').on('click',function(e){e.preventDefault();var accessDenial=$('#accessDenialWidget');if(accessDenial.is(':visible')){$('html,body').animate({scrollTop:accessDenial.offset().top-50},'slow');}else{var redirectUri=$(this).find('.redirect-uri');if(redirectUri.length>0){window.location=redirectUri.text();}}});}
function matchHeight(){$('#accessDenialWidget > div').matchHeight();}
$(document).ready(function(){$(document).on('click','.login-link',function(){$(this).toggleClass('active');$(this).next('.accessDenialWidget .login-form').toggleClass('active');matchHeight();});submitLogin();getAccess();matchHeight();});
$(document).ready(function(e){if($('.save-search-form .disabled-in-read-only').length<=0){showSaveSearchDialog();submitSaveSearch();handleSaveSearchSubmit();handleExit();keyboardListener();}});function submitSaveSearch(){$('.save-search-btn').on('click',function(event){doSubmitSaveSearch(this,event);});$('#saveSearchName').keypress(function(event){if(event.which==13){doSubmitSaveSearch(this,event);}});}
function doSubmitSaveSearch(element,event){event.preventDefault();var form=$(element).closest('form');clearMsgs(form);if(!isEmptyOrSpacesFields(form)){form.submit();}}
function isEmptyOrSpacesFields(form){var input=form.find('#saveSearchName');var isEmpty=isEmptyOrSpaces(input.val());if(isEmpty){input.addClass('error');appendMsg(form.find('.ajax-messages'),'<span class="error-msg">Errors have been found. Please correct the fields as indicated in red.</span>');}
return isEmpty;}
function isEmptyOrSpaces(str){return str===null||str.match(/^ *$/)!==null;}
function handleSaveSearchSubmit(){$('.save-search-form').on('submit',function(event){event.stopPropagation();event.preventDefault();var message=$(this).find('.ajax-messages');appendMsg(message,'please wait...');$.ajax({type:"post",url:"/action/doSaveSearch",data:$(this).serialize(),success:function(data,status){appendMsg(message,data);},error:function(XMLHttpRequest,textStatus,errorThrown){appendMsg(message,XMLHttpRequest.responseText);}});});}
function appendMsg(element,html){$(element).html(html);}
function errorMsg(){return'<span class="error-msg"> The Alert frequency not saved please try later </span>';}
function showSaveSearchDialog(){$('.save-search-show-dialog').fancybox({fitToView:true,padding:0,autoSize:true,closeClick:false,openEffect:'none',closeEffect:'none',closeBtn:false});$('.save-search-show-dialog').on('click',function(event){event.preventDefault();var container=$(this).closest('.save-search-container');clearMsgs(container);});}
function handleExit(){$('.save-search-background').on('click',function(event){var container=$(this).closest('.save-search-container');exit(container);});}
function exit(container){container.find('.save-search-form').removeClass('active');container.find('.save-search-background').removeClass('active');container.find('.save-search-show-dialog').focus();}
function clearMsgs(form){form.find('.ajax-messages').html('');form.find('input').removeClass('error');}
function keyboardListener(){$(document).on('keyup',function(event){var container=$('.save-search-container');var form=container.find('.save-search-form');var first=form.find(':focusable:first');var last=form.find(':focusable:last');if(form.hasClass('active')){switch(event.keyCode){case 27:exit(container);break;case 9:var focused=form.find($(':focus'));if(event.shiftKey){if(focused.length==0){last.focus();event.preventDefault();}}else{if(focused.length==0){first.focus();event.preventDefault();}}
break;}}});};
$(document).bind('ready ajaxComplete',function(){dropdownSetValues();});function dropdownSetValues(){$('.size-container').each(function(event){init($(this));openList($(this));onBlur($(this));});}
function init(container){var label=container.find('.select-label');var options=container.find('.options');var selected=options.find('.selected');label.html(selected.length>0?selected.clone().text():options.find('.controlLinks:first').clone().html());}
function openList(container){container.find('.select-label').on('click',function(event){event.preventDefault();if(!container.hasClass('active')){container.addClass('active');}else{container.removeClass('active');}});$(".options .controlLinks.selected").parent().hide();}
function onBlur(container){container.find('.size-background').on('click',function(e){container.removeClass('active');});};;(function($){var _previousResizeWidth=-1,_updateTimeout=-1;var _parse=function(value){return parseFloat(value)||0;};var _rows=function(elements){var tolerance=1,$elements=$(elements),lastTop=null,rows=[];$elements.each(function(){var $that=$(this),top=$that.offset().top-_parse($that.css('margin-top')),lastRow=rows.length>0?rows[rows.length-1]:null;if(lastRow===null){rows.push($that);}else{if(Math.floor(Math.abs(lastTop-top))<=tolerance){rows[rows.length-1]=lastRow.add($that);}else{rows.push($that);}}
lastTop=top;});return rows;};var _parseOptions=function(options){var opts={byRow:true,property:'height',target:null,remove:false};if(typeof options==='object'){return $.extend(opts,options);}
if(typeof options==='boolean'){opts.byRow=options;}else if(options==='remove'){opts.remove=true;}
return opts;};var matchHeight=$.fn.matchHeight=function(options){var opts=_parseOptions(options);if(opts.remove){var that=this;this.css(opts.property,'');$.each(matchHeight._groups,function(key,group){group.elements=group.elements.not(that);});return this;}
if(this.length<=1&&!opts.target){return this;}
matchHeight._groups.push({elements:this,options:opts});matchHeight._apply(this,opts);return this;};matchHeight.version='master';matchHeight._groups=[];matchHeight._throttle=80;matchHeight._maintainScroll=false;matchHeight._beforeUpdate=null;matchHeight._afterUpdate=null;matchHeight._rows=_rows;matchHeight._parse=_parse;matchHeight._parseOptions=_parseOptions;matchHeight._apply=function(elements,options){var opts=_parseOptions(options),$elements=$(elements),rows=[$elements];var scrollTop=$(window).scrollTop(),htmlHeight=$('html').outerHeight(true);var $hiddenParents=$elements.parents().filter(':hidden');$hiddenParents.each(function(){var $that=$(this);$that.data('style-cache',$that.attr('style'));});$hiddenParents.css('display','block');if(opts.byRow&&!opts.target){$elements.each(function(){var $that=$(this),display=$that.css('display');if(display!=='inline-block'&&display!=='inline-flex'){display='block';}
$that.data('style-cache',$that.attr('style'));$that.css({'display':display,'padding-top':'0','padding-bottom':'0','margin-top':'0','margin-bottom':'0','border-top-width':'0','border-bottom-width':'0','height':'100px','overflow':'hidden'});});rows=_rows($elements);$elements.each(function(){var $that=$(this);$that.attr('style',$that.data('style-cache')||'');});}
$.each(rows,function(key,row){var $row=$(row),targetHeight=0;if(!opts.target){if(opts.byRow&&$row.length<=1){$row.css(opts.property,'');return;}
$row.each(function(){var $that=$(this),display=$that.css('display');if(display!=='inline-block'&&display!=='inline-flex'){display='block';}
var css={'display':display};css[opts.property]='';$that.css(css);if($that.outerHeight(false)>targetHeight){targetHeight=$that.outerHeight(false);}
$that.css('display','');});}else{targetHeight=opts.target.outerHeight(false);}
$row.each(function(){var $that=$(this),verticalPadding=0;if(opts.target&&$that.is(opts.target)){return;}
if($that.css('box-sizing')!=='border-box'){verticalPadding+=_parse($that.css('border-top-width'))+_parse($that.css('border-bottom-width'));verticalPadding+=_parse($that.css('padding-top'))+_parse($that.css('padding-bottom'));}
$that.css(opts.property,(targetHeight-verticalPadding)+'px');});});$hiddenParents.each(function(){var $that=$(this);$that.attr('style',$that.data('style-cache')||null);});if(matchHeight._maintainScroll){$(window).scrollTop((scrollTop/htmlHeight)*$('html').outerHeight(true));}
return this;};matchHeight._applyDataApi=function(){var groups={};$('[data-match-height], [data-mh]').each(function(){var $this=$(this),groupId=$this.attr('data-mh')||$this.attr('data-match-height');if(groupId in groups){groups[groupId]=groups[groupId].add($this);}else{groups[groupId]=$this;}});$.each(groups,function(){this.matchHeight(true);});};var _update=function(event){if(matchHeight._beforeUpdate){matchHeight._beforeUpdate(event,matchHeight._groups);}
$.each(matchHeight._groups,function(){matchHeight._apply(this.elements,this.options);});if(matchHeight._afterUpdate){matchHeight._afterUpdate(event,matchHeight._groups);}};matchHeight._update=function(throttle,event){if(event&&event.type==='resize'){var windowWidth=$(window).width();if(windowWidth===_previousResizeWidth){return;}
_previousResizeWidth=windowWidth;}
if(!throttle){_update(event);}else if(_updateTimeout===-1){_updateTimeout=setTimeout(function(){_update(event);_updateTimeout=-1;},matchHeight._throttle);}};$(matchHeight._applyDataApi);$(window).bind('load',function(event){matchHeight._update(false,event);});$(window).bind('resize orientationchange',function(event){matchHeight._update(true,event);});})(jQuery);
$(document).ready(function(e){clearSelectedTab();cardsContainer('.publicationListWidget');cardsContainer('.latestArticles');cardsContainer('.literatumMostRecentWidget');cardsContainer('.literatumMostCitedWidget');cardsContainer('.literatumMostReadWidget');cardsContainer('.literatumOpenAccessWidget');cardsContainer('.literatumEditorsChoiceWidget');cardsContainer('.combinedRecommendationsWidget');hideTabContent();selectFirstTabEle();markTabsIcon();});function fitCardsTitles(container){var cards=$(container).find('.article-card');cards.each(function(idx,element){var $element=$(element);computeFontSize($element);});cards.find('.header').matchHeight();cards.find('.articleEntryAuthor').matchHeight();cards.find('.footer').matchHeight();}
function computeFontSize(card){var title=card.find('.art_title').find('a');var count=countWords(title.find('.hlFld-Title').text());var header=card.find('.header').find('a');var count2=countWords(header.text());title.css("font-size",(count>=1)&&(count<8)?"1.5em":(count>=16?"1.05em":"1.2em"));header.css("font-size",(count2>=1)&&(count2<8)?"1.5em":(count2>=16?"1.05em":"1.2em"));}
function countWords(value){value=value.replace(/(^\s*)|(\s*$)/gi,"");value=value.replace(/[ ]{2,}/gi," ");value=value.replace(/\n /,"\n");return value.trim().split(' ').length;}
function cardsContainer(cont){var container=$(cont);if(container.length>0)
fitCardsTitles(container);}
function hideTabContent(){var element=$('.layout-tabs.toc-tabs .tab-pane');var hideTitle=true;$(element).each(function(){var tab_id=$(this).attr('id');var tab_content=$(this).children();if($(tab_content).children().length){if(!$(tab_content).children().text().trim().length){$('a[href$="'+tab_id+'"]').parent('li').addClass('hide');}else{hideTitle=false;}}else{$('a[href$="'+tab_id+'"]').parent('li').addClass('hide');}});if(hideTitle){$('.layout-tabs .widget-header').addClass('hide');}}
function selectFirstTabEle(){var hash=window.location.hash;if(!$(hash).length){var tabNavItem=$('.layout-tabs.toc-tabs .tab-nav li');$(tabNavItem).each(function(){if(!$(this).hasClass('hide')){$(this).addClass('active');var activeAnchor=$(this).find('a').attr('href');$(activeAnchor).addClass('active');return false;}});}else{selectTabByHash(hash);}}
function markTabsIcon(){var element=$('.layout-tabs.toc-tabs .tab-pane');var hideTitle=true;$(element).each(function(){var tab_id=$(this).attr('id');if($(this).has('.literatumOpenAccessWidget').length>0){$('a[href$="'+tab_id+'"]').parent('li').addClass('open-access-tab');}else
if($('a[href$="'+tab_id+'"]').attr('title')=='show Multimedia'){$('a[href$="'+tab_id+'"]').parent('li').addClass('multimedia-tab');}});}
function clearSelectedTab(){var tabNavItem=$('.layout-tabs.toc-tabs .tab-nav li');$(tabNavItem).each(function(){$(this).removeClass('active');var activeAnchor=$(this).find('a').attr('href');$(activeAnchor).removeClass('active');});}
function selectTabByHash(hash){var tabNavItem=$('.layout-tabs.toc-tabs .tab-nav li');$(tabNavItem).each(function(){var id=$(this).find('a').attr('href');if(id==hash){$(this).addClass('active');$(id).addClass('active');return false;}});};
$(document).ready(function(e){$("#password1").bind('keyup',function(e){$('.progress-container #progressbar').css({display:'block'});var passVal=$("#password1").val(),confVal=$("#password2").val(),btn=$('.btnRegisterOrReset'),passRank=rankPassword(passVal),progressbar=$("#progressbar"),progressLabel=$(".progress-label");var pval=progress_values[passRank];progressbar.progressbar({value:pval});progressbarValue=progressbar.find(".ui-progressbar-value");progressLabel.text(labels[passRank]);progressbarValue.removeClass("blueProgress redProgress greenProgress").addClass(colors[passRank]);if(passRank>=rank.STRONG){showPasswordError('pass1',false);}else{showPasswordError('pass1',true);}
enableBtnIfPassMatched(btn,passVal,confVal,passRank);}).blur(function(){var passElement=$('#password1'),passTxt=passElement.val(),passRank=rankPassword(passTxt);if(passTxt.length>0&&passRank<rank.STRONG){showPasswordError('pass1',true);}});var confirmedPassElement=$("#password2");confirmedPassElement.bind('keyup',function(e){var passElement=$('#password1'),passTxt=passElement.val(),confTxt=confirmedPassElement.val(),passRank=rankPassword(passTxt),btn=$('.btnRegisterOrReset');if(passTxt.length>0){if(passTxt===confTxt){showPasswordError('pass2',false,true);}else{showPasswordError('pass2',true,false);}}
enableBtnIfPassMatched(btn,passTxt,confTxt,passRank);});$("form[name='regForm'], form[id='resetPassword']").submit(function(e){var passElement=$('#password1'),passVal=passElement.val(),passRank=rankPassword(passVal),confirmPassElement=$('#password2'),confirmPassVal=confirmPassElement.val();if(passRank<rank.STRONG){showPasswordError('pass1',true);return false;}
if(confirmPassVal!==passVal){showPasswordError('pass2',true);return false;}
return true;});});var rank={TOO_SHORT:0,WEAK:1,MEDIUM:2,STRONG:3,VERY_STRONG:4};var labels=["Too Short","Weak","Medium","Strong","Very Strong"];var colors=["redProgress","redProgress","redProgress","blueProgress","greenProgress"];var progress_values=[12,25,50,75,100];function enableBtnIfPassMatched(btnRegOrRest,passTxt,confTxt,passRank){var origBtn=$('#originalBtn');if(passTxt===confTxt&&passRank>=rank.STRONG){btnRegOrRest.attr('style','display:inline');origBtn.addClass('hideElement');}else{btnRegOrRest.attr('style','display:none');origBtn.removeClass('hideElement');}}
function rankPassword(password){var upper=/[A-Z]/,lower=/[a-z]/,number=/[0-9]/,special=/[ !"#$%&'()*+,\-./:;<=>?@[\\\]^_`{|}~]/,minLength=8,score=0;if(password.length<minLength){return rank.TOO_SHORT;}
if(upper.test(password))score++;if(lower.test(password))score++;if(number.test(password))score++;if(special.test(password))score++;if(score<3)score--;if(password.length>minLength){score+=Math.floor((password.length-minLength)/2);}
if(score<3)return rank.WEAK;if(score<4)return rank.MEDIUM;if(score<6)return rank.STRONG;return rank.VERY_STRONG;}
function showPasswordError(field,show,match){var passElement;if(field=='pass1')
passElement=$('.tooltip-container.pass1');else
passElement=$('.tooltip-container.pass2');if(show){passElement.css({display:'inline-block'});passElement.addClass('tooltip-container-fail');$(passElement).parents('.form-group').addClass('error-field');passElement.removeClass('tooltip-container-success');}else{passElement.css({display:'none'});passElement.removeClass('tooltip-container-fail');$(passElement).parents('.form-group').removeClass('error-field');if(match)
{passElement.css({display:'inline-block'});passElement.addClass('tooltip-container-success');}
else
{passElement.css({display:'none'});passElement.removeClass('tooltip-container-success');}}};
(function($){$(document).ready(function(e){$('.members').find('li').matchHeight();$('.open-access-left-nav').find('.sub-nav').find('.label').on('click',function(e){$(this).closest('.open-access-left-nav').toggleClass('active');});var w=Math.max(document.documentElement.clientWidth,window.innerWidth||0);if(w<=1024){var header=$('.member-detail-header');if(header.is(':visible')){var h1=header.find('h1');h1.prependTo(header);var html=header.clone();var closest=$('#place-hold-on-xs-sm').html(html).closest('div').addClass('institutionFieldDescription');if(header.find('.notFoundMsg').length>0)
closest.addClass('fit margin _2rem');header.html('');}}});})(jQuery);
$(document).ready(function(e){$('.inst-chosen-select').chosen({width:"100%",search_contains:true});$('#select-institutionName').change(function(e){if($(this).val().length>0){window.location.href=$(this).val();}});$(window).load(function(){$('.filtr-container').filterizr({animationDuration:0.3,callbacks:{onFilteringEnd:function(){$('.filtr-container').css('height',0);}}}).css('height',0);$('.institutions-filters li a').on('click',function(e){e.preventDefault();$(".institutions-filters li a").removeClass("selected");$(".institutions-filters").removeClass("active");$(".filter-title").html($(this).text());$(this).addClass("selected");if($(window).width()<992){var el=this.closest('.institutions-filters');var par=el.parentNode;var next=el.nextSibling;par.removeChild(el);setTimeout(function(){par.insertBefore(el,next);},50)}});});});
$(window).resize(function(){dialogResponsiveWidth();});function deleteThisAddress(element,addressId,antiForgery){var dialogWidth=initDialogWidth(300);$(function(){$(element).dialog({resizable:false,width:dialogWidth,modal:true,buttons:{"Yes":function(){jQuery.ajax({type:'GET',url:'/action/doUpdateAddress',data:{deleteAddress:addressId,ajax:true,"anti-forgery-token":/=(.*)/g.exec(antiForgery)[1]},success:function(data,status){if(status=="success"){var url=removeParamFromUrl(location.href,'showConfirm');location.href=url;}else{alert("Failed to remove address !")}},error:function(XMLHttpRequest,textStatus,errorThrown){alert("Failed to remove address !");}});$(element).addClass("hide");$(this).dialog("close");},"No":function(){$(element).addClass("hide");$(this).dialog("close");}}});});}
function showDialogBox(element,message){var dialogWidth=initDialogWidth(300);$(element).html("<p>"+message+"</p>");$(function(){$(element).dialog({resizable:false,height:200,width:dialogWidth,modal:true,buttons:{"Ok":function(){$(element).addClass("hide");$(this).dialog("close");}}});});}
function showAllowanceOffer(element,message,url,state){if(window.innerWidth<1025){if(state){location.href=url;}}else{$(element).html("<p>"+message+"</p>");$(function(){$(element).dialog({resizable:false,height:250,width:700,title:"Approve",buttons:{"Yes":function(){location.href=url;},"No":function(){$(element).addClass("hide");$(this).dialog("close");}},create:function(e){$(this).closest('.ui-dialog').addClass('allowanceOfferDialog');}});});}}
function removeParamFromUrl(url,param){var regex=new RegExp('&?'+param+'=([^&]$|[^&]*)','i');return url.replace(regex,'');}
function initDialogWidth(w){if(w>$(window).width()){return $(window).width()-30;}else
return w;}
function dialogResponsiveWidth(){if($('.ui-dialog-content').length)
$('.ui-dialog-content').dialog("option","position","center");var dialogUI=$('.ui-dialog-content').parents('.ui-dialog');if($(dialogUI).length&&$(dialogUI).width()>$(window).width()){$(dialogUI).css('width',$(window).width())}};
function pardottracking(){piAId='112042';piCId='56102';(function(){function async_load(){var s=document.createElement('script');s.type='text/javascript';s.src=('https:'==document.location.protocol?'https://pi':'http://cdn')+'.pardot.com/pd.js';var c=document.getElementsByTagName('script')[0];c.parentNode.insertBefore(s,c);}
if(window.attachEvent){window.attachEvent('onload',async_load);}else{window.addEventListener('load',async_load,false);}})();}
$(document).ready(pardottracking);
$(document).ready(function(e){var popupLnk=$('a[href^="#"].loginPopup');popupLnk.fancybox({maxWidth:640,maxHeight:1000,fitToView:true,width:'70%',height:'90%',padding:0,autoSize:true,closeClick:false,openEffect:'fade',closeEffect:'fade',closeBtn:false});$('.login-form .noAccountBtn').on('click',function(){$.fancybox.close();});var loginWidget=$('.literatumLoginWidget.popup');if(loginWidget.has(".error").length>0){popupLnk.click();}});
(function($){$(document).ready(function(e){$('input[name="format"]').on('change',function(e){var form=$(this).closest('form');switch($(this).attr('id')){case"refworks":form.attr('target','_blank');break;default:form.attr('target','_self');}});});})(jQuery);
(function($){$(document).ready(function(e){var timeId=null;$(document).on('keyup','#pubName',function(e){var val=$(this).val();var textToSearch=encodeURIComponent(val.trim());var institutionUserId=$("#institutionUserId").val();var href=encodeURI("/action/institutionAccessEntitlements?institutionUserId="+institutionUserId+"&q=")+textToSearch;if(timeId!=null)clearTimeout(timeId);timeId=null;switch(e.keyCode){case 38:case 40:case 13:break;default:var wait=300;if(e.keyCode==32)wait=0;timeId=setTimeout(function(){$(".subscriptionPanel-container").load(href+" #subscriptionPanel",bindAccessEntitlementPaginationLink);},wait);break;}});$(document).on('change','.accessWidget .sortBy',function(e){var sortByUrl=$(this).val();window.location.href=sortByUrl;});});function bindAccessEntitlementPaginationLink(){var subscriptionPanel=$(".subscriptionPanel-container");subscriptionPanel.find(".paginationLinks a").on('click',function(event){event.preventDefault();var anchor=$(this);var href=anchor.attr('href');href=href+"&ajaxRequest=true";var wait=300;if(history.pushState){history.pushState(null,"Search Results",href.replace("&ajaxRequest=true",""));}
var timeId=setTimeout(function(){subscriptionPanel.load(href+" #subscriptionPanel",bindAccessEntitlementPaginationLink);},wait);});}})(jQuery);
var quickSearch=function(){function _citationSearchMode($dropdown){var container=$dropdown.closest("form");container.find('.simpleSearchHelp').hide();container.find('.simpleSearchBoxContainer').hide();_disableInputs(container.find('.simpleSearchBoxContainer'));_enableInputs(container.find('.citationSearchBoxContainer'));container.find(".citationSearchBoxContainer").find("input[name='quickLinkYear']").attr("disabled",true);container.find(".citationSearchBoxContainer").find("input[name='quickLinkVolume']").attr("disabled",true);container.find(".citationSearchBoxContainer").find("input[name='quickLinkPage']").attr("disabled",true);container.find(".citationSearchBoxContainer").find("input[name='quickLinkIssue']").attr("disabled",true);container.find('.citationHelp').show();container.find('.citationSearchBoxContainer').show();container.attr('action','/action/quickLink');};function _simpleSearchMode($dropdown){var container=$dropdown.closest("form");container.find('.citationHelp').hide();container.find('.citationSearchBoxContainer').hide();_disableInputs(container.find('.citationSearchBoxContainer'));_enableInputs(container.find('.simpleSearchBoxContainer'));container.find('.simpleSearchBoxContainer').show();container.find('.simpleSearchHelp').show();container.attr('action','/action/doSearch');container.find("input[type='hidden'][name='SeriesKey']").attr('disabled',true);};function _disableInputs($selector){$selector.find('input').each(function(index,input){$(input).attr('disabled','disabled')});};function _enableInputs($selector){$selector.find('input').each(function(index,input){$(input).removeAttr("disabled");});};$.widget("custom.catcomplete",$.ui.autocomplete,{_create:function(){this._super();this.widget().addClass('quickSearchAutocomplete');this.widget().menu("option","items","> :not(.qsaCategory)");},_renderItem:function(ul,item){var $aWrap=$('<a>').addClass("qsaHistoryItem");if(item.history){var itemSpan=$.parseHTML(item.highlight);var removeDiv=$('<aspan>').addClass("qsaRemove").html('[Remove]');removeDiv.bind('click',function(e){e.preventDefault();e.stopPropagation();var selectedHistoryItem=$(e.target.parentNode.parentNode).data().qsaItem;var autoCompeteSearchUri=['/action/doDeleteHistory?ajax=true&uri=',encodeURIComponent(selectedHistoryItem.value)].join('');$.ajax(autoCompeteSearchUri).done(function(result){if(result==='true'){e.target.parentNode.remove();}});});$aWrap.append(removeDiv);$aWrap.append(itemSpan);}else{$aWrap.html(item.highlight);}
return $("<li>").data("qsaItem",item).append($aWrap).addClass('qsaItem').appendTo(ul);},_resizeMenu:function(){var ul=this.menu.element;if(this.element.outerWidth()<250){ul.outerWidth(this.element.outerWidth()+40/100*this.element.outerWidth());}else{ul.outerWidth(this.element.outerWidth());}}});return{initAutoComplete:function(dropOption){var that=this;$('.quickSearchFormContainer .autocomplete').catcomplete({source:function(request,response){var results=[];var enteredTerm=request.term;var selectedOption=$('.js__searchInSelector option:selected').val();var autoCompleteSearchType='';if(selectedOption==='Title'||selectedOption=='citation'){autoCompleteSearchType='title-';}else if(selectedOption==='Contrib'){autoCompleteSearchType='contrib-';}
var $inputSearchText=$('input.searchText');var confNumOfHistoryItems=$inputSearchText.data('history-items-conf');var confNumOfPublicationTitles=$inputSearchText.data('publication-titles-conf');var confNumOfTopics=$inputSearchText.data('topics-conf');var confNumOfContributors=$inputSearchText.data('contributors-conf');if(dropOption==='citation'){var autoCompeteSearchUrl=['/action/doSuggest?target=title-auto-complete&query=',enteredTerm,'&pts=',confNumOfPublicationTitles,'&fl=PubID'].join('');}else{var autoCompeteSearchUrl=['/action/doSuggest?target=',autoCompleteSearchType,'auto-complete&query=',enteredTerm,'&hs=',confNumOfHistoryItems,'&pts=',confNumOfPublicationTitles,'&ts=',confNumOfTopics,'&cs=',confNumOfContributors,'&fl=PubID'].join('');}
$.getJSON(autoCompeteSearchUrl).done(function(resultData){var numOfTitles,numOfTopics,numOfContrib,numOfHistory;numOfTitles=numOfTopics=numOfContrib=numOfHistory=0;var getSuggestion=function(item){var suggestion={'label':item.label,'highlight':item.highlight,'history':false};var label='';switch(item.param){case'SeriesKey':label=" (Journal)";break;case'ConceptID':if(item.seriesKey=="allsubjects")
label=" (Subject)";break;case'ContribAuthorStored':label=" (Author)";}
suggestion['highlight']+=label;if(item.param==='history'){suggestion['value']=decodeURI(item.value);suggestion['history']=true;}else if(selectedOption=='citation'){suggestion['value']=item.value;}
else if(item.param=='SeriesKey'){suggestion['value']=['/action/doSearch?target=titleSearch&',item.param,'=',item.value].join('');}
else{suggestion['value']=['/action/doSearch?target=default&',item.param,'=',item.value].join('');}
return suggestion;};$.each(resultData,function(i,item){if((item.param==='history')&&(numOfHistory<confNumOfHistoryItems)){results.push(getSuggestion(item));numOfHistory=numOfHistory+1;}else if((item.param==='SeriesKey')&&(numOfTitles<confNumOfPublicationTitles)){results.push(getSuggestion(item));numOfTitles=numOfTitles+1;}else if((item.param==='ConceptID')&&(numOfTopics<confNumOfTopics)){results.push(getSuggestion(item));numOfTopics=numOfTopics+1;}else if((item.param==='ContribAuthorStored')&&(numOfContrib<confNumOfContributors)){results.push(getSuggestion(item));numOfContrib=numOfContrib+1;}});response(results);}).fail(function(){console.log('failed');});},focus:function(event,ui){return false;},select:function(event,ui){if($(event.target).attr('name')!='quickLinkJournal'){$(event.target).val(ui.item.label);window.location.href=ui.item.value;}else{$(event.target).val(ui.item.label);}
return false;}}).bind('click',function(e){$(this).catcomplete({minLength:2});})},quickSearchSelectionHandler:function(){var selectedValue=$("option:selected",this).data('search-in'),$searchInSelector=$('.js__searchInSelector');if(selectedValue=='journal'||selectedValue=='book'){_simpleSearchMode($(this));$($searchInSelector).attr('name','pubType');$('#searchText').attr('name','AllField');}
else if(selectedValue=='AllField'||selectedValue=='Contrib'){_simpleSearchMode($(this));$($searchInSelector).attr('name','field1');$('#searchText').attr('name','text1');}
else if(selectedValue=='citation'){_citationSearchMode($(this));}
else if(selectedValue=='thisIssue'){_simpleSearchMode($(this));$('.searchText').attr('name','AllField');$($searchInSelector).attr('name','Issue');$('.quickSearchForm').find("input[type='hidden'][name='SeriesKey']").removeAttr('disabled');}
else
if(selectedValue=='thisJournal'||selectedValue=="thisSeries"){_simpleSearchMode($(this));$($searchInSelector).attr('name','SeriesKey');$('.searchText').attr('name','AllField');}
else{_simpleSearchMode($(this));if(selectedValue=="default"){$($searchInSelector).attr('name','');}
else{$($searchInSelector).attr('name','publication');}
$('.searchText').attr('name','AllField');}}};}();
$(window).load(function(e){$("#revokeButton").on('click',function(){setSmallScreenStyles();setDialogFormStyles('#revokeAccessDialogForm');});$("#addExternalEmailButton").on('click',function(){setSmallScreenStyles();setDialogFormStyles('#externalEmailDialogForm');});$("#extendReinstateButton").on('click',function(){setSmallScreenStyles();setDialogFormStyles('#extendReinstateAccessDialogForm');});$("#instAdminUnpairSelected").on('click',function(){setSmallScreenStyles();setDialogFormStyles('#unpairDialogForm');});$("#instAdminUnpairAll").on('click',function(){setSmallScreenStyles();setDialogFormStyles('#unpairDialogForm');});});function setSmallScreenStyles(){if($(window).width()<=480){$('.device-pairing-dialog').css({'width':'100%','left':0});}}
function setDialogFormStyles(id){$(id).css({'height':'auto'});};
function loadDynamicFields(menuItem){$.get("/pb/widgets/literatumContactUsWidget/fields/"+menuItem).done(function(html){$("#dynamic-fields").slideUp(800,function(){$("#dynamic-fields").html("");$("#dynamic-fields").html(html);if($("#dynamic-fields").children().length!=0){$("#dynamic-fields").slideDown(800);}});});}
function loadDynamicMenu(menuItem){$.get("/pb/widgets/literatumContactUsWidget/menu/items/"+menuItem).done(function(html){$("#reason").html(html);$("#reason").prepend("<option value='' selected='selected'>- Select - </option>");$("#dynamic-fields").slideUp(800);$("#dynamic-fields").html("");})};
commerce.CartIndicatorWidget.prototype.update=function(model){var $cartSize=this.find("*[data-id='cart-size']");if(model.size==0){$cartSize.hide();}else{$cartSize.show("hidden");$cartSize.html(model.size+" items");}};commerce.PurchaseOptionsWidget.infoHandlers.error=function(message,widget,model){var key=model.attributes['itemAdded'];var notification=commerce.Notification.get(widget.find(".purchaseMessage[data-item='"+key+"']"));if(notification){notification.setMessage(message);notification.error();notification.show();maintainHeight(true);}
$(widget.find("*[data-entity='"+key+"']")).hide();$(widget.find(".purchaseMessage[data-item='"+key+"'].info")).hide();};maintainHeight=function(maintainScroll){var old=$.fn.matchHeight._maintainScroll;$.fn.matchHeight._maintainScroll=!!maintainScroll;$("#accessDenialWidget").find('> div').matchHeight();$.fn.matchHeight._maintainScroll=old;};commerce.IdentityWidget.binders.userLogin=function(e){var $loginInput=$(".frmLogin .login");var $passwordInput=$(".frmLogin .password");$loginInput.prop('required',$loginInput.val()===''?"true":"false");$passwordInput.prop('required',$passwordInput.val()===''?"true":"false");};commerce.IdentityWidget.prototype.registerListeners=function(){Object.getPrototypeOf(commerce.IdentityWidget.prototype).registerListeners.call(this);};;