try {
	  window.ampConfig = typeof window.ampConfig === "object" ? window.ampConfig : {};
	  window.ampConfig = window.ampConfig || {};
	  var projectConfig = {"key":"2272048882ce4496","version":23,"syncInterval":1800000,"extras":"","policies":[{"id":"#\u003cDEFAULT_POLICY-\u003e713529f3ff73e64b\u003e#","name":"Default","allocation":1,"decisions":null,"type":"DEFAULT"},{"id":"#\u003cRANDOM_POLICY-\u003e713529f3ff73e64b\u003e#","name":"Random","allocation":0,"decisions":null,"type":"RANDOM"},{"id":"#\u003cAMPED_DEFAULT_POLICY-\u003e713529f3ff73e64b\u003e#","name":"AmpedDefault","allocation":0,"decisions":null,"type":"AMPED"}]};
  		for (var key in projectConfig) {
     		if(Object.prototype.hasOwnProperty.call(projectConfig, key)) window.ampConfig[key] = projectConfig[key];
  		}
		} catch (e) {
  		window.ampConfig = {key: "2272048882ce4496"};};
		try{!function(e){function t(i){if(n[i])return n[i].exports;var r=n[i]={i:i,l:!1,exports:{}};return e[i].call(r.exports,r,r.exports,t),r.l=!0,r.exports}var n={};t.m=e,t.c=n,t.d=function(e,n,i){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:i})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="/",t(t.s=7)}([function(e,t,n){"use strict";function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),s={INVALID_REQUEST_HANDLER:"Invalid Request Handler Passed In!",INVALID_STORAGE_HANDLER:"Invalid Storage Handler Passed In!",MISSING_EVENT_NAME:"Event Name IS Required!",INVALID_CANDIDATE:"Invalid Candidates!",UNRECOGNIZE_FUNCTION:"Unrecognized Function Found!"},u=/\(?(?:(http|https|ftp):\/\/)?(?:((?:[^\W\s]|\.|-|[:]{1})+)@{1})?((?:www.)?(?:[^\W\s]|\.|-)+[\.][^\W\s]{2,4}|localhost(?=\/)|\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3})(?::(\d*))?([\/]?[^\s\?]*[\/]{1})*(?:\/?([^\s\n\?\[\]\{\}\#]*(?:(?=\.)){1}|[^\s\n\?\[\]\{\}\.\#]*)?([\.]{1}[^\s\?\#]*)?)?(?:\?{1}([^\s\n\#\[\]]*))?([\#][^\s\n]*)?\)?/,c=void 0,l=function(){function e(){if(r(this,e),c)return c;this.protectedMethods=["Events","error","merge","deepMerge","hashCode","combinations","result"],this.ERRORS=s,c=this}return a(e,[{key:"error",value:function(e,t){t=this.result(t,"object");var n=t.configs&&t.configs.debug;switch(this.merge(e,t),n){case!0:case"debug":throw e;case"warn":return console.warn(e),e;case!1:return e;default:return console.log(e),e}}},{key:"isFunction",value:function(e){return"function"==typeof e}},{key:"isPrimitive",value:function(e){return"number"==typeof e||"string"==typeof e||"boolean"==typeof e}},{key:"isString",value:function(e){return"string"==typeof e}},{key:"isNumber",value:function(e){return"number"==typeof e}},{key:"isBoolean",value:function(e){return"boolean"==typeof e}},{key:"isEmpty",value:function(e){return void 0===e||null===e}},{key:"isRegExp",value:function(e){return"regexp"===Object.prototype.toString.call(e).slice(8).slice(0,-1).toLowerCase()}},{key:"isArray",value:function(e){return"array"===Object.prototype.toString.call(e).slice(8).slice(0,-1).toLowerCase()}},{key:"isObject",value:function(e){return"object"===Object.prototype.toString.call(e).slice(8).slice(0,-1).toLowerCase()}},{key:"isJSONSafe",value:function(e){try{return JSON.stringify(e),!0}catch(e){return!1}}},{key:"checkAllValues",value:function(e,t,n){try{t.forEach(function(t){if(!e(t))throw n})}catch(e){throw n||e}}},{key:"merge",value:function(e,t){var n=this,i=void 0;return!0===e?(i=Array.prototype.slice.call(arguments,2),(null==t||this.isPrimitive(t))&&(t={}),i.forEach(function(e){if(n.isObject(e)||n.isArray(e))for(var i in e)e.hasOwnProperty(i)&&(n.isArray(e[i])?(t[i]=n.result(t[i],"array"),n.merge(!0,t[i],e[i])):n.isObject(e[i])&&e[i].constructor===Object?(t[i]=n.result(t[i],"object"),n.merge(!0,t[i],e[i])):t[i]=e[i])})):(!1===e?i=Array.prototype.slice.call(arguments,2):(t=e,i=Array.prototype.slice.call(arguments,1)),i.forEach(function(e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})),t}},{key:"deepMerge",value:function(){return this.merge.bind(this,!0).apply(this,arguments)}},{key:"isEqual",value:function(e,t){if((void 0===e?"undefined":o(e))!==(void 0===t?"undefined":o(t)))return!1;if(c.isPrimitive(e))return e===t;if(c.isArray(e))return e.every(function(e,n){return e===t[n]});if(c.isObject(e))try{return JSON.stringify(e)===JSON.stringify(t)}catch(e){return!1}return!1}},{key:"parse",value:function(e){if(!e||!this.isString(e))return null;if(e=e.replace(/^(\s|\u00A0)+|(\s|\u00A0)+$/g,""),/^[\],:{}\s]*$/.test(e.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,":").replace(/\w*\s*\:/g,":")))try{return new Function("return "+e)()}catch(e){console.error("Error parsing JSON string: "+e)}return null}},{key:"result",value:function(e,t,n){return this.isFunction(e)&&(e=e.call(n)),this.isString(t)||(t=""),t=t.toLowerCase(),"array"===t?this.isArray(e)?e:[]:"object"===t?this.isObject(e)?e:{}:"number"===t?parseFloat(e):e}},{key:"hashCode",value:function(e){return(e+"").split("").reduce(function(e,t){return(e=(e<<5)-e+t.charCodeAt(0))&e},0)}},{key:"randomString",value:function(e,t){e=e||16,t=t||"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";var n="",i="",r=Math.floor(.25*e),o=e-r,a=void 0;for(a=Math.abs(this.hashCode((new Date).getTime())%t.length);r--;)i+=t.charAt(Math.floor(a%t.length)),a=Math.abs(this.hashCode(a/t.length));for(;o--;)n+=t.charAt(Math.floor(Math.random()*t.length));return n+=i}},{key:"randomFloat",value:function(){return Math.random()}},{key:"urlParser",value:function(e){var t={},n=u.exec(e);return n&&(t.url=n[0],n[1]&&(t.protocol=n[1]+":"),t.userinfo=n[2],t.domain=n[3],t.port=n[4],t.path=n[5]+n[6],t.file=n[6],t.fileExt=n[7],n[8]&&(t.search="?"+n[8]),t.query=n[8],t.hash=n[9]),t}},{key:"combinations",value:function(e){var t=this;if(!this.isObject(e))return[];var n=Object.keys(e);if(!n.length)return[];var r=[];n=n.sort().reverse();for(;n.length;)!function(){var o=n.pop(),a=e[o];a&&!t.isArray(a)&&(a=[a]),a.length&&(r=0===r.length?a.map(function(e){return i({},o,e)}):r.map(function(e){return a.map(function(n){return t.merge(i({},o,n),e)})}).reduce(function(e,t){return e.concat(t)},[]))}();return r}},{key:"md5",value:function(e){for(var t=[],n=0;n<64;)t[n]=0|4294967296*Math.abs(Math.sin(++n));for(var i,r,o,a,s=[],u=unescape(encodeURI(e)),c=u.length,l=[i=1732584193,r=-271733879,~i,~r],n=0;n<=c;)s[n>>2]|=(u.charCodeAt(n)||128)<<n++%4*8;for(s[e=16*(c+8>>6)+14]=8*c,n=0;n<e;n+=16){for(c=l,a=0;a<64;)c=[o=c[3],(i=0|c[1])+((o=c[0]+[i&(r=c[2])|~i&o,o&i|~o&r,i^r^o,r^(i|~o)][c=a>>4]+(t[a]+(0|s[[a,5*a+1,3*a+5,7*a][c]%16+n])))<<(c=[7,12,17,22,5,9,14,20,4,11,16,23,6,10,15,21][4*c+a++%4])|o>>>32-c),i,r];for(a=4;a;)l[--a]=l[a]+c[a]}for(e="";a<32;)e+=(l[a>>3]>>4*(1^7&a++)&15).toString(16);return e}},{key:"hashFloat",value:function(e){return parseInt(this.md5(e),16)/Math.pow(2,128)}},{key:"shuffle",value:function(e){e=e.slice(0);for(var t=void 0,n=void 0,i=e.length;i>0;)n=Math.floor(Math.random()*i--),t=e[n],e[n]=e[i],e[i]=t;return e}},{key:"rendezvousHash",value:function(e,t){var n=this,i=Object.keys(t);if(i.length<2)return i[0];var r=0;i.forEach(function(e){return r+=t[e]});var o={};i.forEach(function(e){return o[e]=t[e]/r});var a=null,s=null;return Object.keys(o).forEach(function(t){var i=o[t];if(!(i<=0)){var r=n.md5(t+""+e),u=parseInt(r,16)/Math.pow(2,128),c=Math.log(u)/i;(null===a||c>a)&&(s=t,a=c)}}),s}},{key:"flattenObj",value:function(e){function t(e,r,o){o=o||1,Object.keys(e).forEach(function(a){var s=e[a],u=r?r+"."+a:a;if(!i.isArray(s)&&i.isObject(s)&&Object.keys(s).length)return t(s,u,o+1);n[u]=s})}var n={},i=this;return t(e),n}}],[{key:"register",value:function(t,n){var i=new e;if(!i.isString(t)||!i.isFunction(n))throw new Error("Invalid Input Format!");if(i.protectedMethods.indexOf(t)>-1)throw new Error("Method exists and protected!");i[t]=n.bind(i)}}]),e}();e.exports=l},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),a=function(){function e(){i(this,e),this._events={}}return o(e,[{key:"on",value:function(t,n,i){return e.eventsApi(this,"on",t,[n,i])&&n?((this._events[t]||(this._events[t]=[])).push({callback:n,context:i,ctx:i||this}),this):this}},{key:"once",value:function(t,n,i){if(!e.eventsApi(this,"once",t,[n,i])||!n)return this;var r=this._events[t]||(this._events[t]=[]),o=this,a=function e(){o.off(t,e,i),n.apply(this,arguments)};return r.push({callback:a,context:i,ctx:i||this}),this}},{key:"off",value:function(t,n,i){if(!this._events||!e.eventsApi(this,"off",t,[n,i]))return this;if(!t&&!n&&!i)return this._events={},this;for(var r=t?[t]:Object.keys(this._events),o=0,a=r.length;o<a;o++){var s=r[o],u=this._events[s];if(u){if(this._events[s]=[],n||i)for(var c=0,l=u.length;c<l;c++){var f=u[c];(n&&n!==f.callback||i&&i!==f.context)&&this._events[s].push(f)}this._events[s].length||delete this._events[s]}}return this}},{key:"trigger",value:function(t){if(!t||!this._events)return this;var n=Array.prototype.slice.call(arguments,1);if(!e.eventsApi(this,"trigger",t,n))return this;var i=this._events[t],r=this._events.all;return i&&e.triggerEvents(i,n),r&&e.triggerEvents(r,arguments),this}}],[{key:"eventsApi",value:function(e,t,n,i){if(!n)return!0;if("object"===(void 0===n?"undefined":r(n))){for(var o in n)e[t].apply(e,[o,n[o]].concat(i));return!1}if(/\s+/.test(n)){for(var a=n.split(/\s+/),s=0,u=a.length;s<u;s++)e[t].apply(e,[a[s]].concat(i));return!1}return!0}},{key:"triggerEvents",value:function(e,t){e.forEach(function(e){return e.callback.apply(e.ctx,t)})}}]),e}();e.exports=a},function(e,t,n){(function(e){var i,r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};!function(o,a){"use strict";var s="model",u="name",c="type",l="vendor",f="version",d="mobile",p="tablet",h={extend:function(e,t){var n={};for(var i in e)t[i]&&t[i].length%2==0?n[i]=t[i].concat(e[i]):n[i]=e[i];return n},has:function(e,t){return"string"==typeof e&&-1!==t.toLowerCase().indexOf(e.toLowerCase())},lowerize:function(e){return e.toLowerCase()},major:function(e){return"string"===(void 0===e?"undefined":r(e))?e.replace(/[^\d\.]/g,"").split(".")[0]:void 0},trim:function(e){return e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")}},m={rgx:function(e,t){for(var n,i,o,a,s,u,c=0;c<t.length&&!s;){var l=t[c],f=t[c+1];for(n=i=0;n<l.length&&!s;)if(s=l[n++].exec(e))for(o=0;o<f.length;o++)u=s[++i],a=f[o],"object"===(void 0===a?"undefined":r(a))&&a.length>0?2==a.length?"function"==r(a[1])?this[a[0]]=a[1].call(this,u):this[a[0]]=a[1]:3==a.length?"function"!==r(a[1])||a[1].exec&&a[1].test?this[a[0]]=u?u.replace(a[1],a[2]):void 0:this[a[0]]=u?a[1].call(this,u,a[2]):void 0:4==a.length&&(this[a[0]]=u?a[3].call(this,u.replace(a[1],a[2])):void 0):this[a]=u||void 0;c+=2}},str:function(e,t){for(var n in t)if("object"===r(t[n])&&t[n].length>0){for(var i=0;i<t[n].length;i++)if(h.has(t[n][i],e))return"?"===n?void 0:n}else if(h.has(t[n],e))return"?"===n?void 0:n;return e}},v={browser:{oldsafari:{version:{"1.0":"/8",1.2:"/1",1.3:"/3","2.0":"/412","2.0.2":"/416","2.0.3":"/417","2.0.4":"/419","?":"/"}}},device:{amazon:{model:{"Fire Phone":["SD","KF"]}},sprint:{model:{"Evo Shift 4G":"7373KT"},vendor:{HTC:"APA",Sprint:"Sprint"}}},os:{windows:{version:{ME:"4.90","NT 3.11":"NT3.51","NT 4.0":"NT4.0",2000:"NT 5.0",XP:["NT 5.1","NT 5.2"],Vista:"NT 6.0",7:"NT 6.1",8:"NT 6.2",8.1:"NT 6.3",10:["NT 6.4","NT 10.0"],RT:"ARM"}}}},g={browser:[[/(opera\smini)\/([\w\.-]+)/i,/(opera\s[mobiletab]+).+version\/([\w\.-]+)/i,/(opera).+version\/([\w\.]+)/i,/(opera)[\/\s]+([\w\.]+)/i],[u,f],[/(opios)[\/\s]+([\w\.]+)/i],[[u,"Opera Mini"],f],[/\s(opr)\/([\w\.]+)/i],[[u,"Opera"],f],[/(kindle)\/([\w\.]+)/i,/(lunascape|maxthon|netfront|jasmine|blazer)[\/\s]?([\w\.]+)*/i,/(avant\s|iemobile|slim|baidu)(?:browser)?[\/\s]?([\w\.]*)/i,/(?:ms|\()(ie)\s([\w\.]+)/i,/(rekonq)\/([\w\.]+)*/i,/(chromium|flock|rockmelt|midori|epiphany|silk|skyfire|ovibrowser|bolt|iron|vivaldi|iridium|phantomjs|bowser)\/([\w\.-]+)/i],[u,f],[/(trident).+rv[:\s]([\w\.]+).+like\sgecko/i],[[u,"IE"],f],[/(edge)\/((\d+)?[\w\.]+)/i],[u,f],[/(yabrowser)\/([\w\.]+)/i],[[u,"Yandex"],f],[/(puffin)\/([\w\.]+)/i],[[u,"Puffin"],f],[/((?:[\s\/])uc?\s?browser|(?:juc.+)ucweb)[\/\s]?([\w\.]+)/i],[[u,"UCBrowser"],f],[/(comodo_dragon)\/([\w\.]+)/i],[[u,/_/g," "],f],[/(micromessenger)\/([\w\.]+)/i],[[u,"WeChat"],f],[/(QQ)\/([\d\.]+)/i],[u,f],[/m?(qqbrowser)[\/\s]?([\w\.]+)/i],[u,f],[/xiaomi\/miuibrowser\/([\w\.]+)/i],[f,[u,"MIUI Browser"]],[/;fbav\/([\w\.]+);/i],[f,[u,"Facebook"]],[/headlesschrome(?:\/([\w\.]+)|\s)/i],[f,[u,"Chrome Headless"]],[/\swv\).+(chrome)\/([\w\.]+)/i],[[u,/(.+)/,"$1 WebView"],f],[/((?:oculus|samsung)browser)\/([\w\.]+)/i],[[u,/(.+(?:g|us))(.+)/,"$1 $2"],f],[/android.+version\/([\w\.]+)\s+(?:mobile\s?safari|safari)*/i],[f,[u,"Android Browser"]],[/(chrome|omniweb|arora|[tizenoka]{5}\s?browser)\/v?([\w\.]+)/i],[u,f],[/(dolfin)\/([\w\.]+)/i],[[u,"Dolphin"],f],[/((?:android.+)crmo|crios)\/([\w\.]+)/i],[[u,"Chrome"],f],[/(coast)\/([\w\.]+)/i],[[u,"Opera Coast"],f],[/fxios\/([\w\.-]+)/i],[f,[u,"Firefox"]],[/version\/([\w\.]+).+?mobile\/\w+\s(safari)/i],[f,[u,"Mobile Safari"]],[/version\/([\w\.]+).+?(mobile\s?safari|safari)/i],[f,u],[/webkit.+?(gsa)\/([\w\.]+).+?(mobile\s?safari|safari)(\/[\w\.]+)/i],[[u,"GSA"],f],[/webkit.+?(mobile\s?safari|safari)(\/[\w\.]+)/i],[u,[f,m.str,v.browser.oldsafari.version]],[/(konqueror)\/([\w\.]+)/i,/(webkit|khtml)\/([\w\.]+)/i],[u,f],[/(navigator|netscape)\/([\w\.-]+)/i],[[u,"Netscape"],f],[/(swiftfox)/i,/(icedragon|iceweasel|camino|chimera|fennec|maemo\sbrowser|minimo|conkeror)[\/\s]?([\w\.\+]+)/i,/(firefox|seamonkey|k-meleon|icecat|iceape|firebird|phoenix)\/([\w\.-]+)/i,/(mozilla)\/([\w\.]+).+rv\:.+gecko\/\d+/i,/(polaris|lynx|dillo|icab|doris|amaya|w3m|netsurf|sleipnir)[\/\s]?([\w\.]+)/i,/(links)\s\(([\w\.]+)/i,/(gobrowser)\/?([\w\.]+)*/i,/(ice\s?browser)\/v?([\w\._]+)/i,/(mosaic)[\/\s]([\w\.]+)/i],[u,f]],cpu:[[/(?:(amd|x(?:(?:86|64)[_-])?|wow|win)64)[;\)]/i],[["architecture","amd64"]],[/(ia32(?=;))/i],[["architecture",h.lowerize]],[/((?:i[346]|x)86)[;\)]/i],[["architecture","ia32"]],[/windows\s(ce|mobile);\sppc;/i],[["architecture","arm"]],[/((?:ppc|powerpc)(?:64)?)(?:\smac|;|\))/i],[["architecture",/ower/,"",h.lowerize]],[/(sun4\w)[;\)]/i],[["architecture","sparc"]],[/((?:avr32|ia64(?=;))|68k(?=\))|arm(?:64|(?=v\d+;))|(?=atmel\s)avr|(?:irix|mips|sparc)(?:64)?(?=;)|pa-risc)/i],[["architecture",h.lowerize]]],device:[[/\((ipad|playbook);[\w\s\);-]+(rim|apple)/i],[s,l,[c,p]],[/applecoremedia\/[\w\.]+ \((ipad)/],[s,[l,"Apple"],[c,p]],[/(apple\s{0,1}tv)/i],[[s,"Apple TV"],[l,"Apple"]],[/(archos)\s(gamepad2?)/i,/(hp).+(touchpad)/i,/(hp).+(tablet)/i,/(kindle)\/([\w\.]+)/i,/\s(nook)[\w\s]+build\/(\w+)/i,/(dell)\s(strea[kpr\s\d]*[\dko])/i],[l,s,[c,p]],[/(kf[A-z]+)\sbuild\/[\w\.]+.*silk\//i],[s,[l,"Amazon"],[c,p]],[/(sd|kf)[0349hijorstuw]+\sbuild\/[\w\.]+.*silk\//i],[[s,m.str,v.device.amazon.model],[l,"Amazon"],[c,d]],[/\((ip[honed|\s\w*]+);.+(apple)/i],[s,l,[c,d]],[/\((ip[honed|\s\w*]+);/i],[s,[l,"Apple"],[c,d]],[/(blackberry)[\s-]?(\w+)/i,/(blackberry|benq|palm(?=\-)|sonyericsson|acer|asus|dell|meizu|motorola|polytron)[\s_-]?([\w-]+)*/i,/(hp)\s([\w\s]+\w)/i,/(asus)-?(\w+)/i],[l,s,[c,d]],[/\(bb10;\s(\w+)/i],[s,[l,"BlackBerry"],[c,d]],[/android.+(transfo[prime\s]{4,10}\s\w+|eeepc|slider\s\w+|nexus 7|padfone)/i],[s,[l,"Asus"],[c,p]],[/(sony)\s(tablet\s[ps])\sbuild\//i,/(sony)?(?:sgp.+)\sbuild\//i],[[l,"Sony"],[s,"Xperia Tablet"],[c,p]],[/android.+\s([c-g]\d{4}|so[-l]\w+)\sbuild\//i],[s,[l,"Sony"],[c,d]],[/\s(ouya)\s/i,/(nintendo)\s([wids3u]+)/i],[l,s,[c,"console"]],[/android.+;\s(shield)\sbuild/i],[s,[l,"Nvidia"],[c,"console"]],[/(playstation\s[34portablevi]+)/i],[s,[l,"Sony"],[c,"console"]],[/(sprint\s(\w+))/i],[[l,m.str,v.device.sprint.vendor],[s,m.str,v.device.sprint.model],[c,d]],[/(lenovo)\s?(S(?:5000|6000)+(?:[-][\w+]))/i],[l,s,[c,p]],[/(htc)[;_\s-]+([\w\s]+(?=\))|\w+)*/i,/(zte)-(\w+)*/i,/(alcatel|geeksphone|lenovo|nexian|panasonic|(?=;\s)sony)[_\s-]?([\w-]+)*/i],[l,[s,/_/g," "],[c,d]],[/(nexus\s9)/i],[s,[l,"HTC"],[c,p]],[/d\/huawei([\w\s-]+)[;\)]/i,/(nexus\s6p)/i],[s,[l,"Huawei"],[c,d]],[/(microsoft);\s(lumia[\s\w]+)/i],[l,s,[c,d]],[/[\s\(;](xbox(?:\sone)?)[\s\);]/i],[s,[l,"Microsoft"],[c,"console"]],[/(kin\.[onetw]{3})/i],[[s,/\./g," "],[l,"Microsoft"],[c,d]],[/\s(milestone|droid(?:[2-4x]|\s(?:bionic|x2|pro|razr))?(:?\s4g)?)[\w\s]+build\//i,/mot[\s-]?(\w+)*/i,/(XT\d{3,4}) build\//i,/(nexus\s6)/i],[s,[l,"Motorola"],[c,d]],[/android.+\s(mz60\d|xoom[\s2]{0,2})\sbuild\//i],[s,[l,"Motorola"],[c,p]],[/hbbtv\/\d+\.\d+\.\d+\s+\([\w\s]*;\s*(\w[^;]*);([^;]*)/i],[[l,h.trim],[s,h.trim],[c,"smarttv"]],[/hbbtv.+maple;(\d+)/i],[[s,/^/,"SmartTV"],[l,"Samsung"],[c,"smarttv"]],[/\(dtv[\);].+(aquos)/i],[s,[l,"Sharp"],[c,"smarttv"]],[/android.+((sch-i[89]0\d|shw-m380s|gt-p\d{4}|gt-n\d+|sgh-t8[56]9|nexus 10))/i,/((SM-T\w+))/i],[[l,"Samsung"],s,[c,p]],[/smart-tv.+(samsung)/i],[l,[c,"smarttv"],s],[/((s[cgp]h-\w+|gt-\w+|galaxy\snexus|sm-\w[\w\d]+))/i,/(sam[sung]*)[\s-]*(\w+-?[\w-]*)*/i,/sec-((sgh\w+))/i],[[l,"Samsung"],s,[c,d]],[/sie-(\w+)*/i],[s,[l,"Siemens"],[c,d]],[/(maemo|nokia).*(n900|lumia\s\d+)/i,/(nokia)[\s_-]?([\w-]+)*/i],[[l,"Nokia"],s,[c,d]],[/android\s3\.[\s\w;-]{10}(a\d{3})/i],[s,[l,"Acer"],[c,p]],[/android.+([vl]k\-?\d{3})\s+build/i],[s,[l,"LG"],[c,p]],[/android\s3\.[\s\w;-]{10}(lg?)-([06cv9]{3,4})/i],[[l,"LG"],s,[c,p]],[/(lg) netcast\.tv/i],[l,s,[c,"smarttv"]],[/(nexus\s[45])/i,/lg[e;\s\/-]+(\w+)*/i,/android.+lg(\-?[\d\w]+)\s+build/i],[s,[l,"LG"],[c,d]],[/android.+(ideatab[a-z0-9\-\s]+)/i],[s,[l,"Lenovo"],[c,p]],[/linux;.+((jolla));/i],[l,s,[c,d]],[/((pebble))app\/[\d\.]+\s/i],[l,s,[c,"wearable"]],[/android.+;\s(oppo)\s?([\w\s]+)\sbuild/i],[l,s,[c,d]],[/crkey/i],[[s,"Chromecast"],[l,"Google"]],[/android.+;\s(glass)\s\d/i],[s,[l,"Google"],[c,"wearable"]],[/android.+;\s(pixel c)\s/i],[s,[l,"Google"],[c,p]],[/android.+;\s(pixel xl|pixel)\s/i],[s,[l,"Google"],[c,d]],[/android.+(\w+)\s+build\/hm\1/i,/android.+(hm[\s\-_]*note?[\s_]*(?:\d\w)?)\s+build/i,/android.+(mi[\s\-_]*(?:one|one[\s_]plus|note lte)?[\s_]*(?:\d\w)?)\s+build/i,/android.+(redmi[\s\-_]*(?:note)?(?:[\s_]*[\w\s]+)?)\s+build/i],[[s,/_/g," "],[l,"Xiaomi"],[c,d]],[/android.+(mi[\s\-_]*(?:pad)?(?:[\s_]*[\w\s]+)?)\s+build/i],[[s,/_/g," "],[l,"Xiaomi"],[c,p]],[/android.+;\s(m[1-5]\snote)\sbuild/i],[s,[l,"Meizu"],[c,p]],[/android.+a000(1)\s+build/i],[s,[l,"OnePlus"],[c,d]],[/android.+[;\/]\s*(RCT[\d\w]+)\s+build/i],[s,[l,"RCA"],[c,p]],[/android.+[;\/]\s*(Venue[\d\s]*)\s+build/i],[s,[l,"Dell"],[c,p]],[/android.+[;\/]\s*(Q[T|M][\d\w]+)\s+build/i],[s,[l,"Verizon"],[c,p]],[/android.+[;\/]\s+(Barnes[&\s]+Noble\s+|BN[RT])(V?.*)\s+build/i],[[l,"Barnes & Noble"],s,[c,p]],[/android.+[;\/]\s+(TM\d{3}.*\b)\s+build/i],[s,[l,"NuVision"],[c,p]],[/android.+[;\/]\s*(zte)?.+(k\d{2})\s+build/i],[[l,"ZTE"],s,[c,p]],[/android.+[;\/]\s*(gen\d{3})\s+build.*49h/i],[s,[l,"Swiss"],[c,d]],[/android.+[;\/]\s*(zur\d{3})\s+build/i],[s,[l,"Swiss"],[c,p]],[/android.+[;\/]\s*((Zeki)?TB.*\b)\s+build/i],[s,[l,"Zeki"],[c,p]],[/(android).+[;\/]\s+([YR]\d{2}x?.*)\s+build/i,/android.+[;\/]\s+(Dragon[\-\s]+Touch\s+|DT)(.+)\s+build/i],[[l,"Dragon Touch"],s,[c,p]],[/android.+[;\/]\s*(NS-?.+)\s+build/i],[s,[l,"Insignia"],[c,p]],[/android.+[;\/]\s*((NX|Next)-?.+)\s+build/i],[s,[l,"NextBook"],[c,p]],[/android.+[;\/]\s*(Xtreme\_?)?(V(1[045]|2[015]|30|40|60|7[05]|90))\s+build/i],[[l,"Voice"],s,[c,d]],[/android.+[;\/]\s*(LVTEL\-?)?(V1[12])\s+build/i],[[l,"LvTel"],s,[c,d]],[/android.+[;\/]\s*(V(100MD|700NA|7011|917G).*\b)\s+build/i],[s,[l,"Envizen"],[c,p]],[/android.+[;\/]\s*(Le[\s\-]+Pan)[\s\-]+(.*\b)\s+build/i],[l,s,[c,p]],[/android.+[;\/]\s*(Trio[\s\-]*.*)\s+build/i],[s,[l,"MachSpeed"],[c,p]],[/android.+[;\/]\s*(Trinity)[\-\s]*(T\d{3})\s+build/i],[l,s,[c,p]],[/android.+[;\/]\s*TU_(1491)\s+build/i],[s,[l,"Rotor"],[c,p]],[/android.+(KS(.+))\s+build/i],[s,[l,"Amazon"],[c,p]],[/android.+(Gigaset)[\s\-]+(Q.+)\s+build/i],[l,s,[c,p]],[/\s(tablet|tab)[;\/]/i,/\s(mobile)(?:[;\/]|\ssafari)/i],[[c,h.lowerize],l,s],[/(android.+)[;\/].+build/i],[s,[l,"Generic"]]],engine:[[/windows.+\sedge\/([\w\.]+)/i],[f,[u,"EdgeHTML"]],[/(presto)\/([\w\.]+)/i,/(webkit|trident|netfront|netsurf|amaya|lynx|w3m)\/([\w\.]+)/i,/(khtml|tasman|links)[\/\s]\(?([\w\.]+)/i,/(icab)[\/\s]([23]\.[\d\.]+)/i],[u,f],[/rv\:([\w\.]+).*(gecko)/i],[f,u]],os:[[/microsoft\s(windows)\s(vista|xp)/i],[u,f],[/(windows)\snt\s6\.2;\s(arm)/i,/(windows\sphone(?:\sos)*)[\s\/]?([\d\.\s]+\w)*/i,/(windows\smobile|windows)[\s\/]?([ntce\d\.\s]+\w)/i],[u,[f,m.str,v.os.windows.version]],[/(win(?=3|9|n)|win\s9x\s)([nt\d\.]+)/i],[[u,"Windows"],[f,m.str,v.os.windows.version]],[/\((bb)(10);/i],[[u,"BlackBerry"],f],[/(blackberry)\w*\/?([\w\.]+)*/i,/(tizen)[\/\s]([\w\.]+)/i,/(android|webos|palm\sos|qnx|bada|rim\stablet\sos|meego|contiki)[\/\s-]?([\w\.]+)*/i,/linux;.+(sailfish);/i],[u,f],[/(symbian\s?os|symbos|s60(?=;))[\/\s-]?([\w\.]+)*/i],[[u,"Symbian"],f],[/\((series40);/i],[u],[/mozilla.+\(mobile;.+gecko.+firefox/i],[[u,"Firefox OS"],f],[/(nintendo|playstation)\s([wids34portablevu]+)/i,/(mint)[\/\s\(]?(\w+)*/i,/(mageia|vectorlinux)[;\s]/i,/(joli|[kxln]?ubuntu|debian|[open]*suse|gentoo|(?=\s)arch|slackware|fedora|mandriva|centos|pclinuxos|redhat|zenwalk|linpus)[\/\s-]?(?!chrom)([\w\.-]+)*/i,/(hurd|linux)\s?([\w\.]+)*/i,/(gnu)\s?([\w\.]+)*/i],[u,f],[/(cros)\s[\w]+\s([\w\.]+\w)/i],[[u,"Chromium OS"],f],[/(sunos)\s?([\w\.]+\d)*/i],[[u,"Solaris"],f],[/\s([frentopc-]{0,4}bsd|dragonfly)\s?([\w\.]+)*/i],[u,f],[/(haiku)\s(\w+)/i],[u,f],[/cfnetwork\/.+darwin/i,/ip[honead]+(?:.*os\s([\w]+)\slike\smac|;\sopera)/i],[[f,/_/g,"."],[u,"iOS"]],[/(mac\sos\sx)\s?([\w\s\.]+\w)*/i,/(macintosh|mac(?=_powerpc)\s)/i],[[u,"Mac OS"],[f,/_/g,"."]],[/((?:open)?solaris)[\/\s-]?([\w\.]+)*/i,/(aix)\s((\d)(?=\.|\)|\s)[\w\.]*)*/i,/(plan\s9|minix|beos|os\/2|amigaos|morphos|risc\sos|openvms)/i,/(unix)\s?([\w\.]+)*/i],[u,f]]},y=function e(t,n){if("object"===(void 0===t?"undefined":r(t))&&(n=t,t=void 0),!(this instanceof e))return new e(t,n).getResult();var i=t||(o&&o.navigator&&o.navigator.userAgent?o.navigator.userAgent:""),a=n?h.extend(g,n):g;return this.getBrowser=function(){var e={name:void 0,version:void 0};return m.rgx.call(e,i,a.browser),e.major=h.major(e.version),e},this.getCPU=function(){var e={architecture:void 0};return m.rgx.call(e,i,a.cpu),e},this.getDevice=function(){var e={vendor:void 0,model:void 0,type:void 0};return m.rgx.call(e,i,a.device),e},this.getEngine=function(){var e={name:void 0,version:void 0};return m.rgx.call(e,i,a.engine),e},this.getOS=function(){var e={name:void 0,version:void 0};return m.rgx.call(e,i,a.os),e},this.getResult=function(){return{ua:this.getUA(),browser:this.getBrowser(),engine:this.getEngine(),os:this.getOS(),device:this.getDevice(),cpu:this.getCPU()}},this.getUA=function(){return i},this.setUA=function(e){return i=e,this},this};y.VERSION="0.7.17",y.BROWSER={NAME:u,MAJOR:"major",VERSION:f},y.CPU={ARCHITECTURE:"architecture"},y.DEVICE={MODEL:s,VENDOR:l,TYPE:c,CONSOLE:"console",MOBILE:d,SMARTTV:"smarttv",TABLET:p,WEARABLE:"wearable",EMBEDDED:"embedded"},y.ENGINE={NAME:u,VERSION:f},y.OS={NAME:u,VERSION:f},"undefined"!==r(t)?("undefined"!==r(e)&&e.exports&&(t=e.exports=y),t.UAParser=y):"function"===r(n(39))&&n(40)?void 0!==(i=function(){return y}.call(t,n,t,e))&&(e.exports=i):o&&(o.UAParser=y);var w=o&&(o.jQuery||o.Zepto);if("undefined"!==(void 0===w?"undefined":r(w))){var b=new y;w.ua=b.getResult(),w.ua.get=function(){return b.getUA()},w.ua.set=function(e){b.setUA(e);var t=b.getResult();for(var n in t)w.ua[n]=t[n]}}}("object"===("undefined"==typeof window?"undefined":r(window))?window:this)}).call(t,n(38)(e))},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),s=n(9),u=n(1),c=n(10),l=n(5),f=n(11),d=n(12),p=n(4),h=n(13),m=n(0),v=new m,g="si-amp-user-id",y=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};i(this,t);var n=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));n.version=h,e.Request?(n.Request=e.Request,delete e.Request):n.Request=d,e.Storage?(n.Storage=e.Storage,delete e.Storage):n.Storage=f;var o=n.getDefaultConfig();if(Object.keys(o).forEach(function(t){e.hasOwnProperty(t)&&(o[t]=e[t])}),n.config=new c(o),n.policyManager=new p(n.config.get("policies")),n.config.on("change:policies",function(){n.policyManager.refresh(n.config.get("policies"))}),!d.validate(n.Request))throw n.error(new Error(v.ERRORS.INVALID_REQUEST_HANDLER));if(!f.validate(n.Storage))throw n.error(new Error(v.ERRORS.INVALID_STORAGE_HANDLER));n.storage=new n.Storage(n.config.get("key"));var a=n;n.Session=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=a.config.getAll();if(v.isString(e))try{var n=JSON.parse(e),i=Date.now(),r=e.ttl>=0?e.ttl:t.sessionTTL,o=e.lifetime>=0?e.lifetime:t.sessionLifetime;if(i-n.updated<r&&i-n.created<o){var u=s.deserialize(v.merge({},t,n,{amp:a,resumed:!0}));return a.trigger("session:resumed",u),u}}catch(e){return console.error("Exception while deserializing session: "+e),new a.Session}e=v.result(e,"object");var c={};e.id&&(c.id=e.id),e.userId&&(c.userId=e.userId),e.properties&&(c.properties=e.properties),c.lifetime=e.lifetime>=0?e.lifetime:t.sessionLifetime,c.ttl=e.ttl>=0?e.ttl:t.sessionTTL,c.timeout=e.timeout>=0?e.timeout:t.timeout,c.amp=a,a.storage.set(g,c.userId);var l=new s(v.merge({},t,c));return a.trigger("session:created",l),l},n.Session.deserialize=function(e){try{var t=JSON.parse(e);return t.updated&&t.ttl&&(new Date).getTime()-t.updated<t.ttl?new s(v.merge(t,{amp:a,resumed:!0})):new a.Session}catch(t){return console.error("Unable to parse invalid JSON: "+e),new a.Session}},n.logRequest=new n.Request({method:"POST",url:""+n.config.get("domain")+n.config.get("apiPath")+"/"+n.config.get("key")+"/log"});var u=setInterval(function(){n.sync()},o.syncInterval);return n.config.on("change:syncInterval",function(e){clearInterval(u),u=setInterval(function(){n.sync()},e)}),n._definedEvents=t._definedEvents,n.utils=v,n}return o(t,e),a(t,[{key:"getDefaultConfig",value:function(){return{domain:"https://amp.ai",apiPath:"/api/core/v1",key:"",userId:"",samplingRate:1,sessionTTL:18e5,sessionLifetime:864e5,debug:"warn",policies:null,timeout:3e4,builtinEvents:[],syncInterval:18e5,version:""}}},{key:"sync",value:function(){var e=this,t=this.config.getAll(),n=this.storage.get("amp-last-sync-time");if(!(n&&(new Date).getTime()-n<t.syncInterval)){var i=t.domain+"/config/"+t.key+".json",r=new this.Request({method:"GET",url:i});this.trigger("config:sync:start",t),r.send({},{},function(t,n){try{if(t)throw t;if(v.isString(n))try{n=JSON.parse(n)}catch(e){console.error("Unable to parse invalid JSON: "+n),n={}}n=v.result(n,"object"),e.config.load(n),e.trigger("config:sync:success",e.config.getAll()),e.storage.set("amp-last-sync-time",(new Date).getTime())}catch(t){t=e.error(t),e.log(v.merge({type:"error"},t)),e.trigger("config:sync:fail",t)}})}}},{key:"error",value:function(e,t){return t=v.merge({version:this.version,configs:this.config.getAll()},t),this.trigger("error",e,this),v.error(e,t)}},{key:"log",value:function(e,t){var n=this;clearTimeout(this._logTimer),this._logEntries=this._logEntries||[],e&&this._logEntries.push(e);var i=function(){n._logEntries.length&&(n.logRequest.send({entries:n._logEntries},{}),n.trigger("log",n._logEntries),n._logEntries=[])};t?i():this._logTimer=setTimeout(i,5e3)}},{key:"timing",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=n.start||(new Date).getTime();return{end:function(){t.log(v.merge({type:"metric",name:e,value:(new Date).getTime()-i},n))}}}}],[{key:"addEvent",value:function(e,n){t._definedEvents=t._definedEvents||{},v.isString(e)&&v.isFunction(n)&&(t._definedEvents[e]=n)}}]),t}(u);y.Utils=m,y.Session=s,y.Base=u,y.Storage=f,y.Request=d,y.Expression=l,e.exports=y},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),o=n(5),a=n(0),s=new a,u="default",c="amped",l=[u,"random",c],f=function(){function e(t){var n=t.id,r=t.name,o=t.type,a=t.allocation,f=t.decisions;i(this,e),this.id=n,this.name=r||"",this.allocation=s.isNumber(a)?a:0,this.decisions=s.isObject(f)?f:{},o=(o+"").toLowerCase(),this.type=l.indexOf(o)>=0?o:u,this.group=this.type===u?u:c}return r(e,[{key:"rank",value:function(t){var n=t.session,i=t.name,r=t.candidates,o=t.limit,a=r.dpCandidates;if(r=r.arrCandidates,!s.isArray(r))throw"Candidates must be an array of objects";if(!s.isString(i))throw"Event name required";if(!n||!s.isArray(n.history)||!n.id)throw"Session required";var u=r.map(function(e,t){return t}),l=-1;if("random"==this.type&&(u=s.shuffle(u)),this.type==c){var f={name:i,candidates:a,limit:o},d=p.findRule({decisions:this.decisions,decision:f,session:n});if(d){var h=d.rule,m=d.index;if(null!==h){var v={};h.rankings.forEach(function(e,t){return v[t]=e.weight>0?e.weight:0});var g=s.rendezvousHash(n.id,v);u=e.getRankedIndexes({ranking:h.rankings[g].ranking,decision:{name:i,candidates:r,limit:o}}),l=m}}}return u=o>=1?u.slice(0,o):u,{indexes:u,ruleIndex:l,candidates:u.map(function(e){return r[e]})}}}],[{key:"getRankedIndexes",value:function(e){var t=e.ranking,n=e.decision,i=n.name,r=n.candidates,a=n.limit||1;if(!s.isArray(r))return[];var u=[],c=r.map(function(e,t){return{candidate:e,index:t}});c.forEach(function(e,t){return e.next=c[t+1]});var l=c[0];for((s.isArray(t)?t:[]).forEach(function(e){for(var t=new o(e),n=null,r=l;r;)if(t.evaluate({session:[{name:i,properties:r.candidate}]})){if(u.push(r.index),a>=1&&u.length>=a)return u;n?(n.next=r.next,r=r.next):(l=r.next,r=l)}else n=r,r=r.next});l;)-1===u.indexOf(l.index)&&u.push(l.index),l=l.next;return u}}]),e}(),d=function(){function e(t){i(this,e),this.policies={},this.sessionId=null,this.firstDefaultAllocation=null,this.lastDefaultAllocation=null,this.refresh(t)}return r(e,[{key:"refresh",value:function(e){var t=s.isArray(e)?e:[],n={};t.forEach(function(e){e&&e.id&&(e.decisions||(e.decisions={}),n[e.id]=new f(e))}),this.policies=n,this.lastDefaultAllocation=Object.keys(n).length>0?this.getDefaultPolicy().allocation:0}},{key:"getAmpedPolicy",value:function(e,t){var n=this;if(!t||!t.sessionId||!s.isString(t.sessionId))return null;if(!t||!t.ts)return null;var i={},r=Object.keys(this.policies);if(r.forEach(function(t){var r=n.policies[t];(r.decisions&&-1!==Object.keys(r.decisions).indexOf(e)||"random"===r.type)&&r.allocation>0&&(i[r.id]=r.allocation)}),0===Object.keys(i).length)return this.policies[r.filter(function(e){return-1!==e.indexOf("AMPED_DEFAULT_POLICY")})];var o=s.rendezvousHash(t.sessionId+"#"+t.ts,i);return o&&o in this.policies?this.policies[o]:null}},{key:"getDefaultPolicy",value:function(){var e=this,t=Object.keys(this.policies),n=null;return t.forEach(function(t){var i=e.policies[t];i.type===u&&(n=i)}),n}},{key:"pax",value:function(e,t){var n=this,i=Array.apply(null,Array(t.arrCandidates.length)).map(function(e){return 0}),r=1;return 1-this.lastDefaultAllocation==0?(i[0]=1,i):(r=(1-this.firstDefaultAllocation)/(1-this.lastDefaultAllocation),Object.keys(this.policies).some(function(o){var a=n.policies[o],s=a.allocation,u=!1;switch(t&&t.dpId&&(u=a.decisions&&-1!==Object.keys(a.decisions).indexOf(t.dpId)),a.type){case c:if(u){var l={name:t.name,candidates:t.dpCandidates,limit:t.limit},d=p.findRule({decisions:a.decisions,decision:l,session:e});d?d.rule.rankings.forEach(function(e){var n=f.getRankedIndexes({ranking:e.ranking,decision:{name:t.name,candidates:t.arrCandidates,limit:t.limit}})[0];i[n]+=r*(e.weight>0?e.weight:0)*s}):i[0]+=r*s}break;case"random":var h=r*(s/i.length);i.forEach(function(e,t){i[t]+=h});break;default:i[0]+=n.firstDefaultAllocation}}),i)}},{key:"policyGroupForSession",value:function(e){var t=this,n=Object.keys(this.policies),i={};return n.forEach(function(e){var n=t.policies[e];n.type==u&&(i.DEFAULT=n.allocation,t.firstDefaultAllocation=n.allocation,t.lastDefaultAllocation=n.allocation)}),i.AMPED=1-parseFloat(i.DEFAULT),s.rendezvousHash(e,i)}}]),e}(),p=function(){function e(){i(this,e)}return r(e,null,[{key:"findRule",value:function(t){var n=t.decisions,i=t.decision,r=t.session,a=e.getDecisionPointId({name:i.name,candidates:i.candidates,limit:i.limit}),s=n[a];if(s&&s.rules&&s.rules.length)for(var u=0;u<s.rules.length;u++){var c=s.rules[u];if(c.condition&&o.evaluate(c.condition,{session:r.history})&&c.rankings&&c.rankings.length)return{rule:c,index:u}}return null}},{key:"getDecisionPointId",value:function(e){var t=e.name,n=e.candidates,i=e.limit,r={};s.isObject(n)&&(n=[n]),n.forEach(function(e){return Object.keys(e).forEach(function(e){return r[e]=!0})}),n=JSON.stringify(n,Object.keys(r).sort());var o={Name:t,Candidates:n,Limit:i},a=JSON.stringify(o);return s.md5(a)}},{key:"policyGroupIsSame",value:function(e,t){if(!e)return!0;var n=0===e.indexOf("#<DEFAULT_POLICY"),i=0===t.indexOf("#<DEFAULT_POLICY");return!n&&!i||n&&i}}]),e}();e.exports=d,e.exports.Policy=f,e.exports.PolicyUtil=p},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),o=n(0),a=new o,s=new RegExp(/^(\$\{)(.*)(\})$/),u={undefined:function(){},property:function(e,t,n){for(var i=this.args.session,r=[],o=0;o<i.length;o++){var s=i[o];if(s.decision&&s.decision.candidates){var u=s.decision.dpId;if(n&&u&&u==n)break}s.name!==e&&"*"!==e||s.properties&&t in s.properties&&(a.isArray(s.properties[t])?r=s.properties[t]:r.push(s.properties[t]))}return 0===r.length?null:r},last_property:function(){return u.property.apply(this,arguments)?u.property.apply(this,arguments).pop():null},first_property:function(){return u.property.apply(this,arguments)?u.property.apply(this,arguments)[0]:null},event_count:function(e,t){for(var n=this.args.session,i=0,r=0;r<n.length;r++){var o=n[r];if(o.decision&&o.decision.candidates){var a=o.decision.dpId;if(t&&a&&a==t)break}o.name!==e&&"*"!==e||i++}return i},event_exists:function(){return!!u.event_count.apply(this,arguments)},eq:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return!t.every(function(e){return null===e})&&(!t.some(function(e){return null===e})&&t[0]==t[1])},"==":"eq",ne:function(e,t){return e!=t},"!=":"ne",gt:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];var i=t[0],r=t[1];return null===i||null===r?null:i>r},">":"gt",gte:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];var i=t[0],r=t[1];return null===i||null===r?null:i>=r},">=":"gte",lt:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];var i=t[0],r=t[1];return null===i||null===r?null:i<r},"<":"lt",lte:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];var i=t[0],r=t[1];return null===i||null===r?null:i<=r},"<=":"lte",and:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];try{return t.every(function(e){return null===e})?null:t.every(function(e){return!0===e})}catch(e){return!1}},"&&":"and",or:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];try{return t.every(function(e){return null===e})?null:t.some(function(e){return!0===e})}catch(e){return!1}},"||":"or",not:function(e){return null===e?null:!e},"!":"not",true:function(){return!0},false:function(){return!1},add:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];if(t.length<2)throw"two numbers expected";var i=t[0],r=t[1];return a.checkAllValues(a.isNumber,[i,r],"Numbers expected"),i+r},"+":"add",sub:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];if(t.length<2)throw"two numbers expected";var i=t[0],r=t[1];return a.checkAllValues(a.isNumber,[i,r],"Numbers expected"),i-r},"-":"sub",mul:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];if(t.length<2)throw"two numbers expected";var i=t[0],r=t[1];return a.checkAllValues(a.isNumber,[i,r],"Numbers expected"),i*r},"*":"mul",div:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];if(t.length<2)throw"two numbers expected";var i=t[0],r=t[1];return a.checkAllValues(a.isNumber,[i,r],"Numbers expected"),i/r},"/":"div",min:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];if(t.length<1)throw"At least one number expected";return a.checkAllValues(a.isNumber,t,"Numbers expected"),Math.min.apply(null,t)},max:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];if(t.length<1)throw"At least one number expected";return a.checkAllValues(a.isNumber,t,"Numbers expected"),Math.max.apply(null,t)},sum:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];if(t.length<1)throw"At least one number expected";return a.checkAllValues(a.isNumber,t,"Numbers expected"),t.reduce(function(e,t){return e+t},0)},avg:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];if(t.length<1)throw"At least one number expected";return a.checkAllValues(a.isNumber,t,"Numbers expected"),t.reduce(function(e,t){return e+t},0)/t.length},contains:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];if(t.length<2)throw"Two arguments expected.";var i=t[0],r=t[1];return a.checkAllValues(a.isString,[i,r],"String expected"),i.indexOf(r)>-1},contains_regex:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];if(t.length<2)throw"Two arguments expected.";var i=t[0],r=t[1];if(!a.isString(i)||!a.isRegExp(r))throw"String and Regex Expected";return r.test(i)},starts_with:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];if(t.length<2)throw"Two arguments expected.";var i=t[0],r=t[1];return a.checkAllValues(a.isString,[i,r],"String expected"),0===i.indexOf(r)},ends_with:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];if(t.length<2)throw"Two arguments expected.";var i=t[0],r=t[1];return a.checkAllValues(a.isString,[i,r],"String expected"),i.slice(i.length-r.length)===r},length:function(e){return a.checkAllValues(a.isArray,[e],"Array expected"),e.length},filter:function(e,t){return a.checkAllValues(a.isArray,[e],"Array expected"),e.filter(function(e){return e===t})},some:function(e,t){return a.checkAllValues(a.isArray,[e],"Array expected"),e.some(function(e){return e===t})},every:function(e,t){return a.checkAllValues(a.isArray,[e],"Array expected"),e.every(function(e){return e===t})},filter_regex:function(e,t){return a.checkAllValues(a.isArray,[e],"Array expected"),a.checkAllValues(a.isRegExp,[t],"RegExp expected"),e.filter(function(e){return t.test(e)})},some_regex:function(e,t){return a.checkAllValues(a.isArray,[e],"array expected"),a.checkAllValues(a.isRegExp,[t],"regexp expected"),e.some(function(e){return t.test(e)})},every_regex:function(e,t){return a.checkAllValues(a.isArray,[e],"array expected"),a.checkAllValues(a.isRegExp,[t],"regexp expected"),e.every(function(e){return t.test(e)})},float:function(e){return null===e?null:(a.checkAllValues(a.isNumber,[e],"float expected"),e)},string:function(e){return null===e?null:(a.checkAllValues(a.isString,[e],"string expected"),e)},bool:function(e){return null===e?null:(a.checkAllValues(a.isBoolean,[e],"boolean expected"),e)},url_host:function(e){return a.urlParser(e).domain},url_path:function(e){return a.urlParser(e).path}},c=function(){function e(t){i(this,e),this.spec=t}return r(e,[{key:"evaluate",value:function(t,n){var i=this;t=a.merge({},t||{});var r=n||this.spec;if(a.isString(r))try{r=JSON.parse(r)}catch(e){return console.error("Invalid expression spec."),!1}if(!a.isArray(r))return console.error("Invalid specification. Array Expected."),!1;if(r.length<1||!a.isString(r[0]))return console.error("Invalid specification. Function name required."),!1;var o="",u=[];return r.forEach(function(e,n){if(0===n)o=e.toLowerCase();else{if(a.isArray(e))try{e=i.evaluate(t,e)}catch(t){if(!t.message||0!==t.message.indexOf(a.ERRORS.UNRECOGNIZE_FUNCTION))return!1;e=e}else if(a.isString(e)){var r=s.exec(e);r&&r[2]&&(e=t[r[2]])}u.push(e)}}),e.runFunction(o,u,{spec:r,args:t})}}],[{key:"runFunction",value:function(e,t,n){if(!((e=(e+"").toLowerCase())in u))throw new Error(a.ERRORS.UNRECOGNIZE_FUNCTION+e);if(a.isEmpty(t)&&(t=[]),!a.isArray(t))throw"Expected an array of arguments";for(var i=u[e];a.isString(i);)e=i,i=u[e];try{return i.apply(n||{},t)}catch(t){throw e+": "+t}}},{key:"evaluate",value:function(t,n){return new e(t).evaluate(n)}},{key:"register",value:function(e,t){a.isFunction(t)&&a.isString(e)&&(u[e]=t)}}]),e}();e.exports=c},function(e,t){function n(e){var t=i.call(e);return"[object Function]"===t||"function"==typeof e&&"[object RegExp]"!==t||"undefined"!=typeof window&&(e===window.setTimeout||e===window.alert||e===window.confirm||e===window.prompt)}e.exports=n;var i=Object.prototype.toString},function(e,t,n){e.exports=n(8)},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=n(3),s=(n.n(a),n(14)),u=n(22),c=n(23),l=n.n(c),f=n(24),d=n(36),p=n(44),h=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),m=function e(t,n,i){null===t&&(t=Function.prototype);var r=Object.getOwnPropertyDescriptor(t,n);if(void 0===r){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,i)}if("value"in r)return r.value;var a=r.get;if(void 0!==a)return a.call(i)};for(var v in f.a){var g=f.a[v];a.Utils.register(g.name,g.fn)}for(var y in d.a){var w=d.a[y];a.Expression.register(d.a.name,w.fn)}var b=new a.Utils,k="si-amp-user-id",E="si-amp-last-global-session",O=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};i(this,t),e.Request=e.Request||s.a,e.Storage=e.Storage||u.a;var n=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));n.browserVersion=l.a;var o=n;return n.Session=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=o.config.getAll(),n=o.storage.get(E);if(b.isString(e)||n)try{var i=JSON.parse(b.isString(e)?e:n),r=Date.now(),s=e.ttl>=0?e.ttl:t.sessionTTL,u=e.lifetime>=0?e.lifetime:t.sessionLifetime;if(r-i.updated<s&&r-i.created<u){var c=a.Session.deserialize(b.merge({},t,i,{amp:o,resumed:!0}));return c.on("history:changed",function(){o.storage.set(E,c.serialize())}),o.trigger("session:resumed",c),c}o.storage.remove(E),o._removeDecisionCache()}catch(e){o.error(e)}e=b.result(e,"object");var l={};e.id&&(l.id=e.id),e.properties&&(l.properties=e.properties),l.lifetime=e.lifetime>=0?e.lifetime:t.sessionLifetime,l.ttl=e.ttl>=0?e.ttl:t.sessionTTL,l.timeout=e.timeout>=0?e.timeout:t.timeout,l.amp=o;var f=o.storage.get(k),d=e.userId||t.userId||"";d.length?(l.userId=d,o.storage.set(k,l.userId)):f?l.userId=f:(l.userId=b.randomString(5),o.storage.set(k,l.userId)),o._removeDecisionCache();var p=new a.Session(b.merge({},t,l));return p.options.ttl>0?p.on("history:changed",function(){o.storage.set(E,p.serialize())}):o.storage.remove(E),o.trigger("session:created",p),p},n.sync(),n}return o(t,e),h(t,[{key:"_removeDecisionCache",value:function(){var e=this;Object.keys(this.storage.getAll()).forEach(function(t){-1!==t.indexOf(e.config.get("key")+"-si-amp-cached-decision")&&e.storage.remove(t.substring(t.indexOf("-")).substring(1))})}},{key:"getDefaultConfig",value:function(){var e=m(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"getDefaultConfig",this).call(this);return b.merge(e,{timeout:3e4,builtinEvents:["AmpSession"],location:!1,geoLocation:{},hooks:[],connectionEventWaitTime:1e3,syncInterval:18e5,sessionTTL:18e5,sessionLifetime:864e5})}}]),t}(a);for(var x in p.a){var S=p.a[x];O.addEvent(S.name,S.fn)}window.Amp=O;var A=b.merge({builtinEvents:["AmpLocation","AmpConnectionLatency1","AmpConnectionLatency2","AmpPageEnd","AmpSession","AmpClick","AmpScroll","AmpFocus","AmpHooks"],hooks:[]},{key:window.ampConfigKey},window.ampConfig||{}),T=b.getCurrentScript();if(T&&T instanceof HTMLScriptElement){var _={};if(T.attributes&&T.attributes.length>1){var N=T.attributes;for(var j in N){var I=N[j].name,R=N[j].value;R&&(isNaN(R)||(R=parseFloat(R)),_[I]=R)}}b.merge(A,_)}if(!1!==A.amp){var C="amp";window.ampConfig.instanceName&&(C=window.ampConfig.instanceName);var P=b.query(location.href);P.preview&&(A.builtinEvents=[]);var D=new O(A);if(D.session=new D.Session,D.observe=function(){if(!P.preview){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return D.session.observe.apply(D.session,t)}},D.decide=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];if(P.preview){var i=t[1],r={};return i&&Object.keys(i).forEach(function(e){P[e]?r[e]=P[e]:r[e]=i[e][0]}),r}return D.session.decide.apply(D.session,t)},"undefined"!=typeof window&&window.amp&&window.amp.replay)try{var L=window.amp.replay;D.config.set("replayTime",(new Date).getTime()-window.amp.ts),window[C]=D,L.forEach(function(e){e[2]&&D.timing("requestReplay",{method:name,event:e[0],start:e[2]}).end(),D[e[0]].apply(D,e[1])}),D.config.set("replayTime",0)}catch(y){D.warn(D.error({name:"UNAVAILABLE",message:"Error replaying amp snippet"}))}else window[C]=D}},function(e,t,n){"use strict";function i(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),u=n(1),c=n(0),l=new c,f=n(4),d=f.PolicyUtil,p=function(e){function t(e){r(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return n.options=e,n.amp=e.amp,delete e.amp,n.amp||n.error(new Error("Invalid Constructor!")),n.observeRequest=new n.amp.Request({method:"POST",url:""+n.options.domain+n.options.apiPath+"/"+n.options.key+"/observe",timeout:n.options.timeout}),n.decideRequest=new n.amp.Request({method:"POST",url:""+n.options.domain+n.options.apiPath+"/"+n.options.key+"/decide",timeout:n.options.timeout}),n.history=e.history||[],n.id=e.id||l.randomString(),n.index=e.index||0,n.created=e.created||Date.now(),n.updated=e.updated||Date.now(),n.userId=e.userId||l.randomString(5),n.resumed=e.resumed,n.policy={},n.policyGroup=n.amp.policyManager.policyGroupForSession(n.id),n.ttl=e.ttl>=0?e.ttl:n.amp.config.get("sessionTTL"),n.lifetime=e.lifetime>=0?e.lifetime:n.amp.config.get("sessionLifetime"),n.configVersion=n.amp.config.get("version"),n.amp.config.on("change:version",function(){n.configVersion=n.amp.config.get("version")}),n.runEvents(n.options.builtinEvents),n}return a(t,e),s(t,[{key:"runEvents",value:function(e){if(l.isObject(this.amp._definedEvents)&&l.isArray(e))for(var t in e){var n=e[t];this.amp._definedEvents[n]&&this.amp._definedEvents[n].call(this,this)}}},{key:"observe",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};this._validateSession();var i={};if(l.isString(e)?(i.name=e,i.properties=t):l.isObject(e)&&(i=e),l.isFunction(arguments[arguments.length-1])&&(i.cb=arguments[arguments.length-1]),i.cb=i.callback||i.cb,n.timeout=n.timeout||this.observeRequest.timeout,!i.name){var r=new Error(l.ERRORS.MISSING_EVENT_NAME);return i.cb&&i.cb(r,i,this),this.error(r)}void 0!==i.properties&&null!==i.properties||(i.properties={});var o={name:i.name,properties:l.flattenObj(i.properties)};return this.request("observe",o,n,i.cb),this}},{key:"decide",value:function(e,n){var i=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=arguments[3];this._validateSession(),this.ts=Date.now();r.timeout=r.timeout>=0?r.timeout:this.decideRequest.timeout;var a=t._formatCandidates(n),s=!1,u={name:e,decision:{},policyId:"UNASSIGNED",ts:this.ts},c=function(e){i.request("decide",u,r,e)},f=t._decisionId(this.userId,e,a.requestSafeCandidates),d=this.amp.storage.get(f),p=r.ttl>=0?r.ttl:-1;if(d)try{var h=JSON.parse(d);if((new Date).getTime()-h.ts<p||-1===p)return o&&o(null,h.rankedCandidates[0],{from:"cache"}),s=!0,h.ts=this.ts,h.ttl=p,h.decision.crc=this.history.length,this.amp.storage.set(f,JSON.stringify(h)),u.decision=h.decision,u.policyId=h.policyId,u.decision.decisionTTL=p,c(o),h.rankedCandidates[0];s=!1,this.amp.storage.remove(f)}catch(e){this.amp.log(l.merge({type:"error"},this.amp.error(e)))}if(a.arrCandidates.length>50)return o&&o(new Error("Candidate length must be less than or equal to 50."),a.arrCandidates[0]),a.arrCandidates[0];var m=this._rankAll.apply(this,arguments),v=this.amp.policyManager.pax(this,m);if(u.name=m.name,u.decision={dpId:m.dpId,candidates:m.requestSafeCandidates,indexes:m.indexes.slice(0,1),limit:1,ruleIndex:m.ruleIndex,pax:v,crc:this.history.length,decisionTTL:p,irregular:!1,kind:"contextual"},u.policyId=this.policy?this.policy.id:"UNASSIGNED",p&&0!==p&&!s){var g=l.merge({},u.decision);g.irregular=!0,g.kind="uncontextual",g.pax=Array.apply(null,Array(m.arrCandidates.length)).map(function(e){return 0}),g.pax[g.indexes[0]]=1,this.amp.storage.set(f,JSON.stringify({name:m.name,decision:g,rankedCandidates:m.rankedCandidates,policyId:u.policyId,ttl:p,ts:this.ts}))}return c(m.cb),m.rankedCandidates[0]}},{key:"_rankAll",value:function(e,n,i,r){var o={};l.isString(e)?(o.name=e,o.candidates=n,o.limit=i&&i.limit?i.limit:1,o.cb=r):l.isObject(e)&&(o=e),l.isFunction(arguments[arguments.length-1])&&(o.cb=arguments[arguments.length-1]),o.cb=o.callback||o.cb;var a=t._formatCandidates(o.candidates);if(o.arrCandidates=a.arrCandidates,o.requestSafeCandidates=a.requestSafeCandidates,o.dpCandidates=a.dpCandidates,!o.name){var s=new Error(l.ERRORS.MISSING_EVENT_NAME);return o.cb&&o.cb(s,o,this),this.error(s)}if(!o.arrCandidates.length){var u=new Error(l.ERRORS.INVALID_CANDIDATE);return o.cb&&o.cb(u,o,this),this.error(u)}var c=d.getDecisionPointId({name:o.name,candidates:o.candidates,limit:1});if(o.dpId=c,this.configVersion=this.amp.config.get("version"),"DEFAULT"===this.policyGroup?this.policy=this.amp.policyManager.getDefaultPolicy():this.policy=this.amp.policyManager.getAmpedPolicy(c,{sessionId:this.id,ts:this.ts}),this.policy){var f=this.policy.rank({session:this,name:o.name,candidates:a,limit:o.limit});o.indexes=f.indexes,o.ruleIndex=f.ruleIndex}else o.indexes=o.arrCandidates.map(function(e,t){return t}),o.ruleIndex=-1;return o.rankedCandidates=o.indexes.map(function(e){return o.arrCandidates[e]}),o.indexes=l.result(o.indexes,"array"),o.rankedCandidates=l.result(o.rankedCandidates,"array"),o}},{key:"_validateSession",value:function(){var e=this,t=Date.now();(t-this.updated>this.ttl||t-this.created>this.lifetime)&&(this.amp.storage.remove("si-amp-last-global-session"),Object.keys(this.amp.storage.getAll()).forEach(function(t){-1!==t.indexOf(e.amp.config.get("key")+"-si-amp-cached-decision-")&&e.amp.storage.remove(t.substring(t.indexOf("-")).substring(1))}),this.history=[],this.id=l.randomString(),this.index=0,this.created=Date.now(),this.updated=Date.now(),this.policy={},this.policyGroup=this.amp.policyManager.policyGroupForSession(this.id))}},{key:"request",value:function(e,t,n,r){var o=this,a=this.amp.timing("request",{method:e,event:t.name});this.index++,n.timeout=n.timeout-(this.amp.config.get("replayTime")||0),t.key=this.options.key,t.index=this.index,t.sessionId=this.id,t.userId=this.userId,t.policyType=t.policyType||this.policyGroup,t.ts=Date.now(),t.configVersion=parseInt(this.configVersion,10);var s=[].concat(i(this.amp.version.split("."))),u=1e3*s[0],c=100*s[1],f=1*s[2];t.clientInfo={name:"Browser",version:this.amp.version,versionNumber:parseInt(u+c+f,10)},t.sessionTTL=this.ttl,t.sessionLifetime=this.lifetime,t.decision&&(t.ts=this.ts);var d=!1;n.debug||setTimeout(function(){d||(d=!0,o._complete.call(o,new Error("EARLY_TERMINATION"),{},t,e,n,r))},n.timeout);var p=this.amp.config.get("samplingRate");if("number"!=typeof p||p<=0||!this.userId||Math.abs(l.hashCode(this.userId))%1e3>1e3*p){if(this.amp.trigger("request:unallocated",{type:e,body:t,options:n}),d)return;d=!0,this._complete(null,null,t,e,n,r)}else this[e+"Request"].send(t,n,function(i,s){a.end(),d||(d=!0,o._complete.call(o,i,s,t,e,n,r))}),this.trigger("request:sent",t,n,this),this.amp.trigger("request:sent",t,n,this);var h={name:t.name,index:t.index,sessionId:t.sessionId,userId:t.userId,properties:t.properties,ts:t.ts,configVersion:parseInt(this.configVersion,10)};return t.decision&&(h.decision=t.decision,h.decision.dpId=t.decision.dpId),t.policyId&&(h.policyId=t.policyId),t.policyType&&(h.policyType=t.policyType),this.history.push(h),this.updated=Date.now(),this.trigger("history:changed",this.history,this),this}},{key:"_complete",value:function(e,t,n,i,r,o){var a=o&&l.isFunction(o);if(e&&this.amp.log(l.merge({type:"error"},this.amp.error(e))),"decide"===i)try{var s=n.decision.candidates;1===n.decision.candidates.length&&(s=l.combinations(n.decision.candidates[0]));var u=[],c=[],f=[];(t&&t.indexes||n&&n.decision.indexes||[]).forEach(function(e){u.push(s[e]),f.push(e),c[e]=!0}),s.forEach(function(e,t){c[t]||(u.push(e),f.push(t))}),u=u[0],a&&o(e,u,t)}catch(e){a&&o(e,[],t)}else a&&o(e,t)}},{key:"serialize",value:function(){return JSON.stringify({id:this.id,key:this.amp.key,ttl:this.options.ttl,properties:this.options.properties,index:this.index,history:this.history,userId:this.userId,updated:this.updated,created:this.created})}},{key:"error",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return t=l.merge({session:this},t),this.amp.error(e,t)}}],[{key:"_formatCandidates",value:function(e){var t={arrCandidates:[],requestSafeCandidates:[]};return e?(l.isArray(e)?(t.arrCandidates=e,t.dpCandidates=e,t.requestSafeCandidates=e.map(function(e){return l.isObject(e)?e:{value:e}})):l.isObject(e)&&(t.arrCandidates=l.combinations(e),t.dpCandidates=[e],t.requestSafeCandidates=[e]),t):t}},{key:"_decisionId",value:function(e,t,n){return"si-amp-cached-decision-"+l.hashCode(e+t+JSON.stringify(l.result(n,"array")))}},{key:"deserialize",value:function(e){if(l.isString(e))try{e=JSON.parse(e)}catch(t){return console.error("Unable to parse invalid JSON: ",t,e),new self.Session}return e=l.result(e,"object"),new t(e)}}]),t}(u);e.exports=p},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),s=n(1),u=n(0),c=new u,l=function(e){function t(e){i(this,t);var n=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return n.configs={},e=c.result(e,"object"),c.deepMerge(n.configs,e),n}return o(t,e),a(t,[{key:"getAll",value:function(){return this.toJSON()}},{key:"get",value:function(e){return this.configs[e]}},{key:"set",value:function(e,t){var n=this.configs[e];this.configs[e]=t,c.isEqual(n,t)||this.trigger("change:"+e,t)}},{key:"unset",value:function(e){this.configs.hasOwnProperty(e)&&(delete this.configs[e],this.trigger("change:"+e,void 0))}},{key:"toJSON",value:function(){var e=this.configs;if(c.isJSONSafe(e))return JSON.parse(JSON.stringify(e));var t={};return Object.keys(e).forEach(function(n){c.isJSONSafe(e[n])&&(t[n]=JSON.parse(JSON.stringify(e[n])))}),t}},{key:"load",value:function(e){e=c.result(e,"object");for(var t in e)e.hasOwnProperty(t)&&this.set(t,e[t])}}]),t}(s);e.exports=l},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),s=n(1),u=new(n(0)),c=function(e){function t(){i(this,t);var e=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.STORE={},e}return o(t,e),a(t,[{key:"getAll",value:function(e){return e&&e(null,this.STORE),this.STORE}},{key:"set",value:function(e,t,n){this.STORE[e]=t,this.trigger("change:"+e,t),n&&n(null,this)}},{key:"get",value:function(e,t){return t&&t(null,this.STORE[e]),this.STORE[e]}},{key:"remove",value:function(e,t){delete this.STORE[e],this.trigger("delete:"+e),t&&t(null,this)}},{key:"empty",value:function(e){this.STORE={},e&&e(null,this)}}],[{key:"validate",value:function(e){var t=u.randomString(),n=u.randomString();try{var i=new e;return i.get.length>=2&&i.set.length>=3&&i.remove.length>=2||(i.set(t,n),i.get(t)===n&&(i.remove(t),!i.get(t)))}catch(e){return!1}}}]),t}(s);e.exports=c},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),s=n(1),u=new(n(0)),c=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};i(this,t);var n=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return n.method=e.method||"GET",n.url=e.url||e.uri,n.timeout=e.timeout||1e3,n}return o(t,e),a(t,[{key:"send",value:function(e,t){if(!this.url)throw new Error("Url need to be specified for this request instance!");u.isFunction(e)&&(t=e,e={}),t=e.cb||t;var n=[];return e.decision&&(n=e.decision.candidates),t&&u.isFunction(t)&&t(null,e.decision?n:e.properties),this}}],[{key:"validate",value:function(e){try{var t=new e({method:"GET",url:""});return!!u.isFunction(t.send)}catch(e){return!1}}}]),t}(s);e.exports=c},function(e,t,n){"use strict";e.exports="1.2.35"},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var r=n(15),o=n.n(r),a=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),s=function(){function e(t){i(this,e),this.timeout=t.timeout||3e4,this.method=t.method||"POST",this.url=t.url}return a(e,[{key:"send",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments[2];o()({uri:this.url,timeout:t.timeout||this.timeout,method:this.method,body:e,headers:{"Content-Type":"text/plain"},json:!0},function(e,t,i){n&&"function"==typeof n&&n(e,i)})}}]),e}();t.a=s},function(e,t,n){"use strict";function i(e){for(var t in e)if(e.hasOwnProperty(t))return!1;return!0}function r(e,t,n){var i=e;return l(t)?(n=t,"string"==typeof e&&(i={uri:e})):i=d(t,{uri:e}),i.callback=n,i}function o(e,t,n){return t=r(e,t,n),a(t)}function a(e){function t(){4===l.readyState&&setTimeout(a,0)}function n(){var e=void 0;if(e=l.response?l.response:l.responseText||s(l),b)try{e=JSON.parse(e)}catch(e){}return e}function r(e){return clearTimeout(h),e instanceof Error||(e=new Error(""+(e||"Unknown XMLHttpRequest Error"))),e.statusCode=0,c(e,k)}function a(){if(!p){var t;clearTimeout(h),t=e.useXDR&&void 0===l.status?200:1223===l.status?204:l.status;var i=k,r=null;return 0!==t?(i={body:n(),statusCode:t,method:v,headers:{},url:m,rawRequest:l},l.getAllResponseHeaders&&(i.headers=f(l.getAllResponseHeaders()))):r=new Error("Internal XMLHttpRequest Error"),c(r,i,i.body)}}if(void 0===e.callback)throw new Error("callback argument missing");var u=!1,c=function(t,n,i){u||(u=!0,e.callback(t,n,i))},l=e.xhr||null;l||(l=e.cors||e.useXDR?new o.XDomainRequest:new o.XMLHttpRequest);var d,p,h,m=l.url=e.uri||e.url,v=l.method=e.method||"GET",g=e.body||e.data,y=l.headers=e.headers||{},w=!!e.sync,b=!1,k={body:void 0,headers:{},statusCode:0,method:v,url:m,rawRequest:l};if("json"in e&&!1!==e.json&&(b=!0,y.accept||y.Accept||(y.Accept="application/json"),"GET"!==v&&"HEAD"!==v&&(y["content-type"]||y["Content-Type"]||(y["Content-Type"]="application/json"),g=JSON.stringify(!0===e.json?g:e.json))),l.onreadystatechange=t,l.onload=a,l.onerror=r,l.onprogress=function(){},l.onabort=function(){p=!0},l.ontimeout=r,l.open(v,m,!w,e.username,e.password),w||(l.withCredentials=!!e.withCredentials),!w&&e.timeout>0&&(h=setTimeout(function(){if(!p){p=!0,l.abort("timeout");var e=new Error("XMLHttpRequest timeout");e.code="ETIMEDOUT",r(e)}},e.timeout)),l.setRequestHeader)for(d in y)y.hasOwnProperty(d)&&l.setRequestHeader(d,y[d]);else if(e.headers&&!i(e.headers))throw new Error("Headers cannot be set on an XDomainRequest object");return"responseType"in e&&(l.responseType=e.responseType),"beforeSend"in e&&"function"==typeof e.beforeSend&&e.beforeSend(l),l.send(g||null),l}function s(e){try{if("document"===e.responseType)return e.responseXML;var t=e.responseXML&&"parsererror"===e.responseXML.documentElement.nodeName;if(""===e.responseType&&!t)return e.responseXML}catch(e){}return null}function u(){}var c=n(16),l=n(6),f=n(18),d=n(21);e.exports=o,o.XMLHttpRequest=c.XMLHttpRequest||u,o.XDomainRequest="withCredentials"in new o.XMLHttpRequest?o.XMLHttpRequest:c.XDomainRequest,function(e,t){for(var n=0;n<e.length;n++)t(e[n])}(["get","put","post","patch","head","delete"],function(e){o["delete"===e?"del":e]=function(t,n,i){return n=r(t,n,i),n.method=e.toUpperCase(),a(n)}})},function(e,t,n){(function(t){var n;n="undefined"!=typeof window?window:void 0!==t?t:"undefined"!=typeof self?self:{},e.exports=n}).call(t,n(17))},function(e,t){var n,i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};n=function(){return this}();try{n=n||Function("return this")()||(0,eval)("this")}catch(e){"object"===("undefined"==typeof window?"undefined":i(window))&&(n=window)}e.exports=n},function(e,t,n){var i=n(19),r=n(20),o=function(e){return"[object Array]"===Object.prototype.toString.call(e)};e.exports=function(e){if(!e)return{};var t={};return r(i(e).split("\n"),function(e){var n=e.indexOf(":"),r=i(e.slice(0,n)).toLowerCase(),a=i(e.slice(n+1));void 0===t[r]?t[r]=a:o(t[r])?t[r].push(a):t[r]=[t[r],a]}),t}},function(e,t){function n(e){return e.replace(/^\s*|\s*$/g,"")}t=e.exports=n,t.left=function(e){return e.replace(/^\s*/,"")},t.right=function(e){return e.replace(/\s*$/,"")}},function(e,t,n){function i(e,t,n){if(!s(t))throw new TypeError("iterator must be a function");arguments.length<3&&(n=this),"[object Array]"===u.call(e)?r(e,t,n):"string"==typeof e?o(e,t,n):a(e,t,n)}function r(e,t,n){for(var i=0,r=e.length;i<r;i++)c.call(e,i)&&t.call(n,e[i],i,e)}function o(e,t,n){for(var i=0,r=e.length;i<r;i++)t.call(n,e.charAt(i),i,e)}function a(e,t,n){for(var i in e)c.call(e,i)&&t.call(n,e[i],i,e)}var s=n(6);e.exports=i;var u=Object.prototype.toString,c=Object.prototype.hasOwnProperty},function(e,t){function n(){for(var e={},t=0;t<arguments.length;t++){var n=arguments[t];for(var r in n)i.call(n,r)&&(e[r]=n[r])}return e}e.exports=n;var i=Object.prototype.hasOwnProperty},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=n(3),s=(n.n(a),function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}()),u=new a.Utils,c=function(e){function t(e){i(this,t);var n=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return n.id=e||u.randomString(5),n}return o(t,e),s(t,[{key:"getAll",value:function(e){var t=this,n={};return Object.keys(localStorage).filter(function(e){0===e.indexOf(t.id)&&(n[e]=localStorage.getItem(""+e))}),e&&e(null,this),n}},{key:"set",value:function(e,t,n){localStorage.setItem(this.id+"-"+e,t),this.trigger("change:"+e,t),n&&n(null,this)}},{key:"get",value:function(e,t){return t&&t(null,localStorage.getItem(this.id+"-"+e)),localStorage.getItem(this.id+"-"+e)}},{key:"remove",value:function(e,t){localStorage.removeItem(this.id+"-"+e),this.trigger("delete:"+e),t&&t(null,this)}},{key:"empty",value:function(e){var t=this;Object.keys(localStorage).forEach(function(e){t.remove(""+e)}),e&&e(null,this)}}]),t}(a.Storage);t.a=c},function(e,t){"use strict;";e.exports="1.1.28"},function(e,t,n){"use strict";var i=n(25),r=n(26),o=n(27),a=n(28),s=n(29),u=n(30),c=n(31),l=n(32),f=n(33),d=n(34),p=n(35),h=[{name:"getCurrentScript",fn:s.a},{name:"debounce",fn:a.a},{name:"domReady",fn:o.a},{name:"addEvent",fn:r.a},{name:"parseProperties",fn:i.a},{name:"poll",fn:u.a},{name:"hasTiming",fn:c.a},{name:"query",fn:l.a},{name:"hijack",fn:f.a},{name:"urlParser",fn:d.a},{name:"dateFormat",fn:p.a}];t.a=h},function(e,t,n){"use strict";function i(e){var t=this,n={};return Object.keys(e).forEach(function(i){var r=void 0;try{r=e[i].cache&&a[i]?a[i]:t.isFunction(e[i])?e[i]():e[i].value()}catch(t){r=e[i].default}o(n,i,r)}),n}t.a=i;var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o=function e(t,n,i){var o="string"==typeof n?n.split(".").filter(function(e){return!!e}):n;1===o.length?t[o[0]]=i:o.length>1&&("object"!==r(t[o[0]])&&(t[o[0]]={}),e(t[o[0]],o.slice(1),i))},a={}},function(e,t,n){"use strict";function i(e,t,n){e.addEventListener?e.addEventListener(t,n):e.attachEvent("on"+t,function(){n.call(e)})}t.a=i},function(e,t,n){"use strict";function i(e){"loading"!=document.readyState?e():document.addEventListener?document.addEventListener("DOMContentLoaded",e):document.attachEvent("onreadystatechange",function(){"loading"!=document.readyState&&e()})}t.a=i},function(e,t,n){"use strict";function i(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=void 0,r=void 0;return function(){for(var o=arguments.length,a=Array(o),s=0;s<o;s++)a[s]=arguments[s];var u=this,c=function(){i=null,r=null,e.apply(u,a)};r||(r=(new Date).getTime());var l=n.max&&(new Date).getTime()-r>n.max||n.test&&n.test();clearTimeout(i),i=setTimeout(c,t),l&&(r=null,e.apply(u,a))}}t.a=i},function(e,t,n){"use strict";function i(){if(document.currentScript)return document.currentScript;var e=document.getElementsByTagName("script");if(!(e&&e.length<1))return e[e.length-1]}t.a=i},function(e,t,n){"use strict";var i=!1,r={polls:[],running:!1,add:function(e){var t=e.isValid;return e.isValid&&r.polls.push(e),r.run(),t},remove:function(e){var t=r.polls.indexOf(e);return t>=0&&r.polls.splice(t,1),-1!==t},run:function(){r.polls.length&&!r.running&&(r.running=!0,r.polls.forEach(function(e){try{e.run()}catch(e){}}),setTimeout(function(){r.running=!1,r.run()},500))}},o=function(e,t,n,i){i.isNumber(n)&&(n={interval:n}),n=i.result(n,"object"),this.name=e,this.fn=t,this.interval=n.interval||1e3,this.maxCount=n.maxCount||1/0,this.count=0,this.lastRun=0,this.stopped=!1,this.added=r.add(this),this.utils=i};o.prototype={status:function(){return this.stopped?"active":"stopped"},start:function(){this.stopped=!1},stop:function(){this.stopped=!0},getLength:function(){return r.polls.length},remove:function(){r.remove(this)},destroy:function(){r.remove(this)},isValid:function(){return this.utils.isFunction(this.fn)&&this.utils.isNumber(this.interval)&&!isNaN(this.interval)},run:function(){if(!(this.stopped||this.lastRun>Date.now()-this.interval)){this.lastRun=(new Date).getTime();var e=this.fn();this.count++,(this.count>=this.maxCount||!1===e)&&this.destroy()}}};var a=function(e,t,n){return this.isFunction(e)&&(t=e,n=t,e=t.name||"UNKNOWN @ "+(new Date).getTime()),i||(i=!0,this.addEvent(window,"beforeunload",function(){r.running=!1,r.run()})),new o(e,t,n,this)};a.add=a,a.queue=r,a.POLLING_TIME=500,a.stopAll=function(){a.queue.polls.forEach(function(e){return e.stopped=!0})},a.removeAll=function(){a.queue.polls.length=0},a.startAll=function(){a.queue.polls.forEach(function(e){return e.stopped=!1}),a.queue.run()},t.a=a},function(e,t,n){"use strict";function i(){return window.performance&&window.performance.timing&&window.performance.timing.fetchStart&&this.isFunction(window.performance.getEntries)}t.a=i},function(e,t,n){"use strict";t.a=function(e){var t={};try{e||(e=window.location.href);var n=e.indexOf("?");if(n<0)return{};e=e.substr(n+1),e.split("&").forEach(function(e){if(e){var n=e.split("+").join(" ").split(/=(.+)/);if(n[0]){var i=n[1]?decodeURIComponent(n[1]):"";"true"===i?i=!0:"false"===i?i=!1:isNaN(i)||(i=parseFloat(i)),t[n[0]]=i}}})}catch(e){}return t}},function(e,t,n){"use strict";function i(e,t,n,i){if(!e||!this.isFunction(e[t])||!n&&!i)return!1;var r=e[t];e[t]=Object.create(r),Object.keys(r).forEach(function(n){e[t][n]=r[n]});var o=this;return e[t]=function(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];o.isFunction(n)&&n.apply(this,t),r.apply(this,t),o.isFunction(i)&&i.apply(this,t)},e[t]}t.a=i},function(e,t,n){"use strict";function i(e){var t={},n=r.exec(e);return n&&(t.url=n[0],n[1]&&(t.protocol=n[1]),t.userinfo=n[2],t.domain=n[3],t.port=n[4],t.path=n[5]+n[6],t.file=n[6],t.fileExt=n[7],n[8]&&(t.search="?"+n[8]),t.query=n[8],t.hash=n[9]),t}t.a=i;var r=/\(?(?:(http|https|ftp):\/\/)?(?:((?:[^\W\s]|\.|-|[:]{1})+)@{1})?((?:www.)?(?:[^\W\s]|\.|-)+[\.][^\W\s]{2,4}|localhost(?=\/)|\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3})(?::(\d*))?([\/]?[^\s\?]*[\/]{1})*(?:\/?([^\s\n\?\[\]\{\}\#]*(?:(?=\.)){1}|[^\s\n\?\[\]\{\}\.\#]*)?([\.]{1}[^\s\?\#]*)?)?(?:\?{1}([^\s\n\#\[\]]*))?([\#][^\s\n]*)?\)?/},function(e,t,n){"use strict";function i(e){var t=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"];return{dayOfMonth:function(){return e.getDate()}(),dayOfWeek:function(){return t[e.getDay()]}(),hourOfDay:function(){return e.getHours()}(),partOfWeek:function(){var t="";switch(e.getDay()){case 0:case 6:t="weekend";break;default:t="weekday"}return t}(),partOfDay:function(){var t=e.getHours(),n="";switch(!0){case t<7:n="night";break;case t>5&&t<12:n="morning";break;case t>11&&t<18:n="afternoon";break;case t>17&&t<21:n="evening";break;case t>20:n="night";break;default:return""}return n}()}}t.a=i},function(e,t,n){"use strict";var i=n(37),r=n(41),o=n(42),a=n(43),s=[{name:"BROWSER_NAME",fn:i.a},{name:"BROWSER_MAJORED",fn:r.a},{name:"OS_NAME",fn:o.a},{name:"OS_VERSIONED",fn:a.a}];t.a=s},function(e,t,n){"use strict";function i(){return new o.a(window.navigator.userAgent).getResult().browser.name}t.a=i;var r=n(2),o=n.n(r)},function(e,t){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),e.webpackPolyfill=1),e}},function(e,t){e.exports=function(){throw new Error("define cannot be used indirect")}},function(e,t){(function(t){e.exports=t}).call(t,{})},function(e,t,n){"use strict";function i(){var e=new o.a(window.navigator.userAgent).getResult();return e.browser.name+" "+e.browser.verion}t.a=i;var r=n(2),o=n.n(r)},function(e,t,n){"use strict";function i(){return new o.a(window.navigator.userAgent).getResult().os.name}t.a=i;var r=n(2),o=n.n(r)},function(e,t,n){"use strict";function i(){var e=new o.a(window.navigator.userAgent).getResult();return e.os.name+" "+e.os.verion}t.a=i;var r=n(2),o=n.n(r)},function(e,t,n){"use strict";var i=n(45),r=n(46),o=n(47),a=n(48),s=n(49),u=n(50),c=n(51),l=n(56),f=[{name:"AmpConnectionLatency1",fn:l.a},{name:"AmpConnectionLatency2",fn:l.b},{name:"AmpSession",fn:r.a},{name:"AmpLocation",fn:o.a},{name:"AmpClick",fn:a.a},{name:"AmpScroll",fn:s.a},{name:"AmpFocus",fn:u.a},{name:"AmpPageEnd",fn:i.a},{name:"AmpHooks",fn:c.a}];t.a=f},function(e,t,n){"use strict";function i(){var e=this;this.amp.utils.addEvent(window,"beforeunload",function(){e.amp.log(null,!0),e.observe("AmpPageEnd",{"page.url":location.host+location.pathname})})}t.a=i},function(e,t,n){"use strict";function i(){var e=this,t=this,n=new o.a(window.navigator.userAgent).getResult(),i=this.amp.utils,r=new Date,a=new Date(r.getTime()+60*r.getTimezoneOffset()*1e3),s={"device.width":{default:0,value:function(){return window.screen.width}},"device.height":{default:0,value:function(){return window.screen.height}},"device.family":{cache:!0,default:"",value:function(){return n.device.model}},"device.time.dayOfMonth":{default:"",value:function(){return i.dateFormat(r).dayOfMonth}},"device.time.dayOfWeek":{default:"",value:function(){return i.dateFormat(r).dayOfWeek}},"device.time.hourOfDay":{default:0,value:function(){return i.dateFormat(r).hourOfDay}},"device.time.partOfWeek":{default:"",value:function(){return i.dateFormat(r).partOfWeek}},"device.time.partOfDay":{default:"",value:function(){return i.dateFormat(r).partOfDay}},"device.utcTime":{default:0,value:function(){return a.getTime()}},"device.timezone":{default:0,value:function(){return r.getTimezoneOffset()}},"device.touch":{default:!1,value:function(){return"ontouchstart"in window||!!navigator.maxTouchPoints||!!navigator.msMaxTouchPoints}},"device.touchPoints":{default:0,value:function(){return navigator.maxTouchPoints||navigator.msMaxTouchPoints}},"user.language":{default:"",cache:!0,value:function(){var e=window.navigator.language?window.navigator.language:window.navigator.userLanguage;return e?e.toLowerCase():""}},"user.languages":{default:"",cache:!0,value:function(){var e=window.navigator.languages?window.navigator.languages.join(","):window.navigator.language||window.navigator.userLanguage;return e?e.toLowerCase():""}},"browser.width":{default:0,value:function(){return Math.max(document.documentElement.clientWidth,document.documentElement.offsetWidth,document.documentElement.scrollWidth)}},"browser.height":{default:0,value:function(){return Math.max(document.documentElement.clientHeight,document.documentElement.offsetHeight,document.documentElement.scrollHeight)}},"browser.width.range":{default:0,value:function(){var e=Math.max(document.documentElement.clientWidth,document.documentElement.offsetWidth,document.documentElement.scrollWidth),t=500*Math.floor(parseInt(e,10)/500);return t+"-"+(t+499)}},"browser.height.range":{default:0,value:function(){var e=Math.max(document.documentElement.clientHeight,document.documentElement.offsetHeight,document.documentElement.scrollHeight),t=1e3*Math.floor(parseInt(e,10)/1e3);return t+"-"+(t+999)}},"browser.family":{cache:!0,default:"",value:function(){return n.browser.name}},"browser.userAgent":{default:"",cache:!0,value:function(){return window.navigator.userAgent}},"os.family":{cache:!0,default:"",value:function(){return n.os.name}},"page.title":{default:"",value:function(){return document.title}},"page.url.scheme":{default:"",value:function(){return window.location.protocol}},"page.url.host":{default:"",value:function(){return window.location.host}},"page.url.path":{default:"",value:function(){return window.location.pathname}},"page.referrer":{default:"",value:function(){return document.referrer}},"page.referrer.host":{default:"",value:function(){return""!=document.referrer?i.urlParser(document.referrer).domain:""}},"page.referrer.path":{default:"",value:function(){return""!=document.referrer?i.urlParser(document.referrer).path:""}},"page.referrer.scheme":{default:"",value:function(){return""!=document.referrer?i.urlParser(document.referrer).protocol:""}},"page.doNotTrack":{default:!1,value:function(){return!!(window.doNotTrack||"yes"===navigator.doNotTrack||navigator.msDoNotTrack||navigator.doNotTrack)}},"screen.resolution":{default:"",value:function(){return window.screen.width+"x"+window.screen.height}},version:{default:"",value:function(){return t.amp.version}}},u=i.parseProperties(s),c=(new Date).getTime();this.observe("AmpSession",u,function(){e.trigger("session:response:complete",{start:c,end:(new Date).getTime()})})}t.a=i;var r=n(2),o=n.n(r)},function(e,t,n){"use strict";function i(){if(this.amp.config.get("location")){var e=this.amp.config.get("geoLocation");if(Object.keys(e).length>0){var t={country:e.country_name,region:e.region_name,city:e.city,zip:e.zip};this.observe("AmpLocation",t)}}}t.a=i},function(e,t,n){"use strict";function i(){var e=this,t=this.amp.utils,n=function(n){var i=n.target,a={"node.id":{value:function(){if(i.id)return i.id}},"node.class":{value:function(){var e=(i.className+"").trim();if(e)return e}},"node.attributes":function(){var e={},t=0,n=["id","class","data-amp-tags"];if(Array.prototype.slice.call(i.attributes).forEach(function(i){if(!(n.indexOf(i.name)>=0)){var r=(i.value+"").trim();r&&(e[i.name]=r,t++)}}),t)return e},"node.path":function(){if(i===document.body||i===document.body.parentNode||i===document)return o(i);for(var e=[];i&&i!==document.body;){try{e.unshift(o(i))}catch(e){this.amp.log({message:e,level:"verbose"})}i=i.parentNode}return e.length?e.join(">"):void 0},"coordinate.x":{value:function(){return n.pageX}},"coordinate.y":{value:function(){return n.pageY}},_tags:function(){if(i.getAttribute("data-amp-tags")){var e=t.parse(i.getAttribute("data-amp-tags"));if("object"===(void 0===e?"undefined":r(e)))return e}}},s=t.parseProperties(a);e.observe("AmpClick",s)};t.addEvent(document,"click",n)}t.a=i;var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o=function(e){var t=e.className?(e.className+"").trim():"";return e.nodeName.toLowerCase()+(e.id?"#"+e.id:"")+(t?"."+t.replace(/ /g,"."):"")}},function(e,t,n){"use strict";function i(){var e=this,t=this.amp.utils;t.domReady(function(){var n=window.pageYOffset||document.body.scrollTop||document.documentElement.scrollTop;t.addEvent(window,"scroll",t.debounce(function(){var i={"offset.top":{default:0,value:function(){return window.pageYOffset||document.body.scrollTop||document.documentElement.scrollTop}},"offset.left":{default:0,value:function(){return window.pageXOffset||document.body.scrollLeft||document.documentElement.scrollLeft}},"page.width":{default:0,value:function(){return Math.max(document.body.clientWidth,document.body.offsetWidth,document.body.scrollWidth)}},"page.height":{default:0,value:function(){return Math.max(document.body.clientHeight,document.body.offsetHeight,document.body.scrollHeight)}}},r=t.parseProperties(i);r.offset.top-n>100&&(n=r.offset.top,e.observe("AmpScroll",r))},1e3))})}t.a=i},function(e,t,n){"use strict";function i(){var e=this,t=this.amp.utils;t.addEvent(window,"blur",function(){var n=document.activeElement;if(n&&n.nodeName&&n.nodeName.toLowerCase&&"iframe"==n.nodeName.toLowerCase()){var i={"node.id":{value:function(){if(n.id)return n.id}},"node.class":{value:function(){var e=(n.className||"").trim();if(e)return e}},"node.path":function(){if(n===document.body||n===document.body.parentNode||n===document)return o(n);for(var e=[];n&&n!==document.body;){try{e.unshift(o(n))}catch(e){this.amp.log({type:"error",message:e})}n=n.parentNode}return e.length?e.join(">"):void 0},_tags:function(){if(n.getAttribute("data-amp-tags")){var e=t.parse(n.getAttribute("data-amp-tags"));if("object"===(void 0===e?"undefined":r(e)))return e}}},a=t.parseProperties(i);e.observe("AmpFocus",a)}})}t.a=i;var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o=function(e){var t=e.className?(e.className+"").trim():"";return e.nodeName.toLowerCase()+(e.id?"#"+e.id:"")+(t?"."+t.replace(/ /g,"."):"")}},function(e,t,n){"use strict";function i(){var e=this,t=this.amp.config.get("hooks");t&&this.amp.utils.isArray(t)&&t.forEach(function(t){r.a[t].fn.apply(e,t.params)})}t.a=i;var r=n(52)},function(e,t,n){"use strict";var i=n(53),r=n(54),o=n(55),a=n.n(o),s={ga:{fn:i.a,params:[1e3]},optimizely:{fn:r.a,params:[1e3]},segment:{fn:a.a,params:[1e3]}};t.a=s},function(e,t,n){"use strict";var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r=function(e){if("object"!==(void 0===e?"undefined":i(e)))return!1;var t={t:"eventName",dl:"link",ul:"lang",de:"encode",dt:"title",sr:"screenSize",vp:"windowSize",fl:"flash"},n={};return Object.keys(e).forEach(function(i){t[i]&&(n[t[i]]=e[i])}),n},o=function(e){if("img"==e.initiatorType&&/google-analytics.com(.*)collect/.test(e.name)){var t=r(this.amp.utils.query(e.name));if(t){var n=t.eventName;delete t.eventName,t.source="ga",n&&this.observe(n,t)}}},a=function e(t){return t=t||1e3,this.amp.utils.poll(e.polling.bind(this),t)},s=0;a.polling=function(){if(!this.amp.utils.hasTiming())return!1;for(var e=performance.getEntries(),t=e.length;s<t;)o.call(this,e[s++]);return!0},t.a=a},function(e,t,n){"use strict";var i=void 0,r=function e(t){return t=void 0===t?1e3:t,this.amp.utils.poll(e.polling.bind(this),t)},o=function(e){if("xmlhttprequest"==e.initiatorType&&/optimizely.com\/event\?/.test(e.name)){var t=this.amp.utils.query(e.name);if(!t||!t.n)return;var n=t.n,i={};i.source="optimizely",n&&0!==n.indexOf("http")&&this.observe(n,i)}},a={};r.checkDecide=function(){var e=this,t=this.amp.utils;try{if(window.optimizely&&window.optimizely.variationIdsMap){var n=window.optimizely;if(i||(i=n.data&&n.data.visitor?n.data.visitor:void 0,t.isObject(i)&&this.amp.observe("optimizelyContext",i)),Object.keys(n.variationIdsMap)===Object.keys(a))return;Object.keys(n.variationIdsMap).forEach(function(t){var i=n.variationIdsMap[t];if(i&&i.length&&n.allExperiments&&n.allExperiments[t]){var r=n.allExperiments[t];if(r.name&&r.variation_ids&&r.variation_ids.length){var o=(r.name+"").replace(/[^a-zA-Z0-9_-]*/g,"")||r.id+"";if(!a[o]){var s=i.map(function(e){var t=n.allVariations&&n.allVariations[e]?n.allVariations[e]:null;if(t&&t.name)return{variant:t.name}});r.variation_ids.forEach(function(e){var t=n.allVariations&&n.allVariations[e]?n.allVariations[e]:null;i.indexOf(e)>=0||!t||!t.name||s.push({variant:t.name})});for(var u=[],c=0;c<i.length;c++)u[c]=c;e.amp.decide("Optimizely-"+o,s,{limit:u.length,indexes:u}),a[o]=!0}}}})}}catch(e){}};var s=0;r.polling=function(){var e=this.amp.utils;if(r.checkDecide.call(this),!e.hasTiming())return!1;for(var t=performance.getEntries(),n=t.length;s<n;)o.call(this,t[s++]);return!0},t.a=r},function(e,t,n){"use strict";var i=function e(t){return t=void 0===t?1e3:t,this.amp.utils.poll(e.polling.bind(this),t)},r=null,o=0;i.polling=function(){if("undefined"==typeof window)return!1;if(o>=2)return!1;if(window.analytics&&window.analytics.track&&null==r){var e=this;r=this.amp.utils.hijack.call(this.amp,window.analytics,"track",null,function(){o++;var t=arguments[0],n=arguments[1]||{};e.amp.utils.isObject(n)||(n={}),n.source="segment",e.amp.session.observe(t,n)})}},e.exports=i},function(e,t,n){"use strict";function i(){var e=this;this.once("session:response:complete",function(t){if(!o){o=!0;var n=t.end-t.start,i=n>380,r=e;setTimeout(function(){var e=(new Date).getTime();r.observe("AmpConnectionLatency1",{eventName:"AmpSession",latency:n,slowConnection:i,timeout:r.options.timeout},function(){r.trigger("connection:latency1:complete",{start:e,end:(new Date).getTime()})})},e.amp.config.get("connectionEventWaitTime"))}})}function r(){var e=this,t=function t(n){if(a)return void e.off("connection:latency1:complete",t);a=!0;var i=n.end-n.start,r=i>380;e.observe("AmpConnectionLatency2",{eventName:"AmpConnectionLatency1",latency:i,slowConnection:r,timeout:e.options.timeout}),e.off("connection:latency1:complete",t)};this.on("connection:latency1:complete",t)}t.a=i,t.b=r;var o=!1,a=!1}]);}catch(e) {console.log(e); !function(){function e(e,t){try{var n=Object.prototype.toString.call(e).slice(8).slice(0,-1).toLowerCase();return 2===arguments.length?"string"==typeof t&&(t=t.toLowerCase(),n==t):n}catch(e){return!1}}function t(t){try{if(!e(t,"Object"))return null;var n=Object.keys(t);if(!n.length)return[];for(var r=[];n.length;){var o=n.pop(),i=t[o];e(i,"Array")&&i.length&&(r=0===r.length?i.map(function(e){var t={};return t[o]=e,t}):r.map(function(e){return i.map(function(t){var n={};return n[o]=t,Object.keys(e).forEach(function(t){n[o]=e[t]}),n})}).reduce(function(e,t){return e.concat(t)},[]))}return r}catch(e){return[]}}function n(t,r){e(r,"array")?r.forEach(function(e){"string"==typeof e?t[e]=function(){}:n(t,e)}):e(r,"object")&&Object.keys(r).forEach(function(o){e(r[o],"object")||e(r[o],"array")?(t[o]={},n(t[o],r[o])):e(r[o],"function")?t[o]=r[o]():t[o]=r[o]})}var r=function(){},o=["__run","on","off","once","trigger","config","error","log","warn","mark","event","request","ready","init","inject","hooks",{builtInEvents:["add"],injections:["Tag","Trigger","Condition","add","list",{version:!1}],timing:[{storage:function(){return[]},timingEnabled:!1},"addByPerformanceEntryName","mark","add","getAll","getSummary","markStart","addPerformanceEntry","checkLibs"],ts:{script:(new Date).getTime()},version:"fallback",utils:["addEvent","createObject","debounce","deepMerge","domReady","elementReady","Events","expressions","getCurrentScript","hasDom","hashCode","hasLocalStorage","hasTiming","hijack","isBot","merge","normalize","parse","policy","poll","query","randomString","resolvePath","result","shuffle","throttle",{typeof:function(){return e},combinations:function(){return t}}]}];n(r,o),r.observe=function(t,n,r,o){var i=arguments[arguments.length-1];e(i,"function")&&i(new Error("Fallback"))},r.decide=function(n,o,i,a){arguments[arguments.length-1];return e(o,"object")&&(o=t(o)),(o=e(o,"array")?o.slice(0,1):[]).length>50?(a&&"function"==typeof a&&a(new Error("Candidate length must be less than or equal to 50."),o[0]),o[0]):(r.replay.push(["decide",arguments,(new Date).getTime()]),o[0])},r.Session=function(){this.id="",this.context=[],this.created=0,this.options={},this.properties={}},r.Session.prototype={observe:function(){return r.observe.apply(this,arguments)},decide:function(e,t,n){return r.decide.apply(this,arguments)},sendEvent:function(){},serialize:function(){return""},deserialize:function(){return!1},on:function(){},off:function(){},trigger:function(){}},window.amp=r}();}