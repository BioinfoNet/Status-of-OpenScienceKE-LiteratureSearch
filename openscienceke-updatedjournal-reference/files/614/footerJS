function updateViewportDimensions(){var n=window,t=document,i=t.documentElement,r=t.getElementsByTagName("body")[0],u=n.innerWidth||i.clientWidth||r.clientWidth,f=n.innerHeight||i.clientHeight||r.clientHeight;return{width:u,height:f}}function getQueryStringValue(n,t){var r,u=t+"=",i=n.indexOf(u),f;return i===-1?null:(i=i+u.length,n.indexOf("&",i)>=0?(f=n.indexOf("&",i),r=n.substring(i,f)):r=n.substring(i),r)}function isDefined(n){return typeof n!="undefined"&&n!==undefined&&n!=null&&n!==""}function jsonToQueryString(n){return Object.keys(n).filter(function(n){return isDefined(n)}).map(function(t){return encodeURIComponent(t)+"="+encodeURIComponent(n[t])}).join("&")}var SCM=SCM||{},debounce,viewport;(function(n,t){var i,r;t.bbq={};t.bbq.getState=i=function(n){var i=window.location.hash,t=i.indexOf(n),r;if(!(t<0))return t=t+n.length+1,r=i.indexOf("&",t),r<0?decodeURI(i.substring(t)):decodeURI(i.substring(t,r))};t.bbq.removeState=r=function(n){var t=i(n);t&&location.replace(window.location.hash.replace(n+"="+encodeURI(t),""))};t.deparam={};t.deparam.querystring=function(){for(var u,n,f=window.location.search.substring(1),i=f.split("&"),r={},t=0;t<i.length;t++)u=i[t],n=u.split("="),n.length===2&&(r[n[0]]=decodeURIComponent(n[1]));return r}})(SCM,jQuery);SCM=SCM||{},function(n,t){function v(n,i){function e(n){var o=f.scrollTop()+r,h=0,i=n.length-1,u=t(n[0]),s=u.offset().top,c,e;if(!(o<s)){while(h<=i){if(e=Math.floor((h+i)/2),u=t(n[e]),s=u.offset().top,c=s+u.height(),h===i||o>=s&&o<=c)return{elem:u[0],idx:e};if(s>o)i=e-1;else if(c<o)h=e+1;else return{elem:u[0],idx:e}}return{elem:n[Math.min(i,n.length-1)],idx:Math.min(i,n.length-1)}}}var r=60,f=t(window);this.getCurrentElement=function(t){var s=t===o.StandardView?n:i,f=e(s),r,h;if(f&&(r=f.elem,h=f.idx,r)&&!u(r,"backreferences-title")&&!u(r,"ref-list")){while(u(r,"fig-section")||u(r,"table-wrap"))r=s[Math.max(--h,0)];if(!u(r,"backreferences-title")&&!u(r,"ref-list"))return r}}}function y(){var n={};this.getWidget=function(t){if(n[t])return n[t];var i=document.getElementsByClassName(t)[0];return i?(n[t]=i,i):undefined}}function p(){function r(n){for(var t,r=n.getElementsByTagName("*"),i=0;i<r.length;i++)t=r[i],t.id&&(t.id=t.id+"-sv")}function i(u,f){var v=n[u],c=v.dependencies,s=[],h,e,o,l,a;if(c)for(h=0;h<c.length;h++)e=c[h],n[e]?(o=i(e,f),s.push(o)):(o=t.getWidget("widget-instance-"+e)||t.getWidget("widget-"+e),o?(l=o.cloneNode(!0),r(l),s.push(l)):s.push(document.createDocumentFragment()));return a=v.render.apply(f,s),f[u]=a,a}var t=new y,n={};this.create=function(n){var t=document.createDocumentFragment();return t.appendChild(i(n,{})),t};this.register=function(t){n[t.name]=t}}function i(n,t,i){var u=document.createElement(n),r,e,f;if(Array.isArray(t))i=t;else if(t)for(r in t)r.startsWith("on")?u.addEventListener(r.substring(2),t[r]):u.setAttribute(r,t[r]);if(i)for(e=0;e<i.length;e++)f=i[e],f&&(f.nodeType?u.appendChild(f):u.appendChild(document.createTextNode(f.toString())));return u}function r(n,t){var i=n.getElementsByClassName(t);if(i.length>0)return i[0]}function f(n,t){var i=n.getElementsByClassName(t);return i.length>0?Array.prototype.slice.call(i,0):[]}function e(n,t){var i,r;if(!t)return[];for(i=[],r=0;r<t.length;r++)i=i.concat(f(n,t[r]));return i}function s(n){for(var t=0;t<n.length;t++)n[t].parentNode.removeChild(n[t])}function w(n,t){s(f(n,t))}function b(n,t){s(e(n,t))}function u(n,t){return(" "+n.className+" ").indexOf(" "+t+" ")>-1}function l(n,t){u(n,t)&&(n.className=(" "+n.className+" ").replace(" "+t+" "," ").trim())}function h(n,t){u(n,t)||(n.className=n.className+" "+t)}function a(n,t){if(n===t)return 0;if(n===undefined)return-1;if(t===undefined)return 1;var i=n.compareDocumentPosition(t);return i&Node.DOCUMENT_POSITION_FOLLOWING||i&Node.DOCUMENT_POSITION_CONTAINED_BY?-1:i&Node.DOCUMENT_POSITION_PRECEDING||i&Node.DOCUMENT_POSITION_CONTAINS?1:0}var o=new function(){this.StandardView=0;this.SplitView=1},c=new p;n.WidgetStore=c;SCM.SplitScreen.init=function(){var h=function(){for(var t=f(document,"article-content-filter"),i,n=0;n<t.length;n++)t[n].dataset.contentFilter==="article-content"&&(i=t[n]);return function(){i&&i.click()}}(),u;if(function(){function h(){return t(".MathJax_Preview").length>0||t(".display-math").length>0}function f(){SCM.SplitScreen.toggleSplitView()}var n=!1,u,e,l=i("div",{"class":"math-jax-modal"},[i("p",{"class":"bold"},["Mathematical content on this page is still rendering"]),i("div",{"class":"spinner"}),i("p",{},["Once the process is complete you will be taken to Split View"]),i("button",{onclick:function(){t("#math-jax-modal").foundation("reveal","close")},"class":"btn"},["Cancel"])]),s=i("div",{"data-reveal":"math-jax-load",id:"math-jax-modal","class":"reveal-modal"});s.style.display="none";document.body.appendChild(s);SCM.SplitScreen.toggleSplitView=function(i){var y,k,d,a;if(i===!1){if(!u)return;n=!0}else i===!0&&(n=!1);if(h()&&!SCM.SplitScreen.IsMathJaxLoaded){y=t("#math-jax-modal");t(document).on("closed.fndtn.reveal","[data-reveal]",function(){window.removeEventListener("MathJax.complete",f)});y.empty().prepend(l);y.foundation("reveal","open");window.addEventListener("MathJax.complete",f);return}if(t("#math-jax-modal").foundation("reveal","close"),!SCM.SiteJS.isFinishedAdjustRelatedTagsDisplay()){window.addEventListener("adjustRelatedTagsDisplay.complete",f);return}if(!u){var p="p,section.abstract,blockquote,div.block-child-p",w="h2,h3,h4,div.table-wrap,div.fig-section,div.ref-list",b=t(".widget-ArticleFulltext .widget-items");b.children(p).each(function(n,t){t.id=t.id||"scroll-to-"+n});k=b.children(p+","+w);document.body.appendChild(c.create("SplitView"));d=t("#sv_main .widget-ArticleFulltext .widget-items").children(p+","+w);e=new v(k,d);u=document.body.lastChild;window.addthis&&window.addthis.toolbox(".addthis_toolbox");SCM.SiteJS.articleUserComments(!0);SCM.Utilities.Brightcove.init()}var g=r(document,"master-container"),nt=r(document,"widget-SitePageFooter"),tt=r(document,"oup-footer"),s=e.getCurrentElement(n?o.SplitView:o.StandardView);console.log(s);n?(document.body.className=document.body.className.replace(" pg_articlesplitview",""),g.style.display="",nt.style.display="",tt.style.display="",u.style.display="none",s?(a=0,s.nodeName==="P"?a=95:(s.nodeName==="H2"||s.nodeName==="H3"||s.nodeName==="H4")&&(a=15),t(window).scrollTop(t("#"+s.id.slice(0,-3)).offset().top-a)):t(window).scrollTop(0)):(g.style.display="none",nt.style.display="none",tt.style.display="none",document.body.className.indexOf("pg_articlesplitview")<0&&(document.body.className+=" pg_articlesplitview"),u.style.display="",s?t("#split-view-scroll-pane").scrollTop(document.getElementById(s.id+"-sv").offsetTop):t("#split-view-scroll-pane").scrollTop(0));n=!n};SCM.SplitScreen.isSplitView=function(){return n}}(),u=r(document,"split-view"),u){var e=function(t){t.matches?(SCM.SplitScreen.toggleSplitView(!1),n&&(n.style.display="")):n&&(n.style.display="none",h())},n=r(document,"item-views"),s=window.matchMedia("(max-width: 930px)");s.addListener(e);e(s);u.addEventListener("click",function(){SCM.SplitScreen.toggleSplitView()})}MathJax.Hub.Register.StartupHook("End",function(){SCM.SplitScreen.IsMathJaxLoaded=!0;window.dispatchEvent(new CustomEvent("MathJax.complete"))})};SCM.SplitScreen.WidgetStore.register({name:"ContentsTab",dependencies:["ArticleJumpLinks","ArticleFulltext"],render:function(n,t){function c(n){var t=n.target,r,e,i,f;if(u(t,"js-jumplink")){if(r=t.attributes.href.textContent.substring(1),e=t.textContent,t.dataset.sectionType==="backreferences-title"){o.ReferencesTab.switchTo();return}i=document.getElementById(r+"-sv");i&&(f=o.Content,f.scrollTop=i.offsetTop)}}var o=this,f,e,r;for(w(n,"contents-title"),f=document.createDocumentFragment(),f.appendChild(t),e=n.getElementsByClassName("js-jumplink"),r=0;r<e.length;r++){var s=e[r],l=s.attributes.href.textContent.substring(1),h=f.querySelector("[id='"+l+"-sv']");h&&(s.dataset.sectionType=h.className)}return i("div",{"class":"dynamic-widget-inner-wrap",style:"display: block;",onclick:c},[n])}});SCM.SplitScreen.WidgetStore.register({name:"FiguresAndTablesTab",dependencies:["ArticleFulltext"],render:function(n){var c=r(n,"graphicalAbstract"),e=f(n,"fig-section"),l,w,o,v,t,y,s,p,u;if(c&&(l=r(c,"fig-section"),l))for(w=l.dataset.id,t=0;t<e.length;t++)if(e[t].dataset.id===w){e[t]=c;break}for(o=f(n,"table-wrap"),v=[],t=0;t<o.length;t++)y=o[t].firstChild.id,v.indexOf(y)<0?v.push(y):(o.splice(t,1),t--);return(s=e.concat(o).sort(a),s.length>0)?(p=s,e.length>0&&(u=document.getElementById("BodyContent_PageContent_lnkDownloadAllImages"),u&&(u=u.cloneNode(!0),u.id="BodyContent_PageContent_lnkDownloadAllImages-sv",u.textContent="Download all slides",h(u,"btn")),p=[i("div",{"class":"download-all-ppt"},[u])].concat(s)),i("div",{"class":"dynamic-widget-inner-wrap"},p)):i("div",{"class":"dynamic-widget-inner-wrap"})}});SCM.SplitScreen.WidgetStore.register({name:"ReferencesTab",dependencies:["ArticleFulltext"],render:function(n){return i("div",{"class":"dynamic-widget-inner-wrap"},n.getElementsByClassName("ref-list"))}});SCM.SplitScreen.WidgetStore.register({name:"NotesTab",dependencies:["ArticleFulltext"],render:function(){return i("div",{"class":"dynamic-widget-inner-wrap"})}});SCM.SplitScreen.WidgetStore.register({name:"CommentsTab",dependencies:["UserCommentBody"],render:function(n){return i("div",{"class":"dynamic-widget-inner-wrap"},[n])}});SCM.SplitScreen.WidgetStore.register({name:"Tabs",dependencies:["ContentsTab","FiguresAndTablesTab","ReferencesTab","NotesTab","CommentsTab"],render:function(n,t,r,u,f){function a(n,t){for(var r,i=0;i<c.length;i++)l(c[i],"active");for(h(n,"active"),r=0;r<e.length;r++)e[r].style.display="none";t.style.display="block"}function v(n){var t=n.target.parentNode;a(t,e[t.dataset.tab])}function s(n,t,r){return i("a",{"class":"tab-nav-trigger tab-nav-"+t+"Css"+(r?" active":""),"data-tab":y++},[i("i",{"class":"icon-"+t+"Css"},[i("span",{"class":"sr-t"})]),i("div",{"class":"tab-nav-tab-name",onclick:v},[n])])}for(var y=0,c=[s("Contents","Content",!0),s("Figures & Tables","FiguresTables"),s("References","References"),s("Notes","Notes"),s("Comments","Comments")],e=[n,t,r,u,f],o=0;o<e.length;o++)e[o].textContent.trim()===""?(c[o].style.display="none",e[o].switchTo=function(){}):e[o].switchTo=function(){a(this.tab,this.panel)}.bind({panel:e[o],tab:c[o]});return i("div",{"class":"resources-panel"},[i("div",{"class":"location-right-pane"},[i("div",{"class":"dynamic-widget-module"},[i("div",{"class":"tab-nav",style:"visibility: visible;"},c),i("div",{"class":"resource-tabs"},e)])])])}});SCM.SplitScreen.WidgetStore.register({name:"Content",dependencies:["ArticleFulltext","ArticleTopInfo","ArticleLinks","Toolbar","ArticleDataSupplements"],render:function(n,u,o,c,v){function ct(){for(var n=0;n<nt.length;n++)nt[n].style.display=""}var y=this,ht=t(".content-panel").width()/2,ft=r(n,"graphicalAbstract"),et,k,g,nt,tt,d,it,rt,p,w,ot,ut,st;ft!=null&&s([ft]);b(n,["backreferences-title","fig-section","table-wrap","ref-list"]);et=function(n){if(n){n.startsWith('"')||(n='"'+n);n.endsWith('"')||(n=n+'"');var t='search-results?page=1&qb={"Keywords1":'+encodeURIComponent(n)+"}&SearchSourceType=1",i=document.getElementById("hfSiteURL");if(i)t="//"+i.value+"/"+t;else return;window.location.href=t}};k=t(n);k.on("click",".xref-fig",function(n){var t;n.stopPropagation();var r=this.dataset.open,i=e(y.FiguresAndTablesTab,["fig-section","table-wrap-title"]),u=y.FiguresAndTablesTab;for(t=0;t<i.length;t++)if(i[t].dataset.id===r){y.FiguresAndTablesTab.switchTo();u.scrollTop=i[t].offsetTop;return}});k.on("click",".xref-sec",function(t){var u,r,i;for(t.stopPropagation(),u=this.attributes.href.textContent.substring(1),r=n.getElementsByClassName("disp-formula"),i=0;i<r.length;i++)if(r[i].attributes["content-id"].textContent===u){y.Content.scrollTop=r[i].parentNode.offsetTop;return}});k.on("click",".xref-bibr",function(n){var u,i,t;if(n.stopPropagation(),this.dataset.open)for(u=this.dataset.open.split(" ")[0],i=(r(y.ReferencesTab,"ref-list")||{children:[]}).children,t=0;t<i.length;t++)if(i[t].attributes["content-id"].textContent===u){y.ReferencesTab.switchTo();y.ReferencesTab.scrollTop=i[t].offsetTop;return}});k.on("click",".kwd-part",function(n){n.stopPropagation();et(n.target.dataset.keyword)});for(g=e(u,["ww-citation-history-wrap","ww-history-close"]),p=0;p<g.length;p++)g[p].addEventListener("click",function(){var n=t(".ww-history").last();n.slideToggle()});for(nt=u.getElementsByClassName("al-author-info-wrap"),tt=e(u,["linked-name","js-linked-footnotes"]),d=0;d<tt.length;d++)tt[d].addEventListener("click",function(n){var i,r,u;n.stopPropagation?n.stopPropagation():window.event.cancelBubble=!0;ct();i=n.target.previousElementSibling;i.style.display="block";r=t(this).parent(".al-author-name");u=r.position();u.left>ht+320&&i.classList.add("shift-card")});for(it=r(u,"meta-authors--etal"),it&&it.addEventListener("click",function(n){n.target.attributes["aria-hidden"]="true";n.target.style.display="none";var t=r(u,"meta-authors--remaining");t&&(t.attributes["aria-hidden"]="false",t.style.display="inline")}),rt=n.getElementsByClassName("video-js"),p=0;p<rt.length;p++)w=rt[p],ot=i("video",{"data-account":w.dataset.account,"data-player":w.dataset.player,"data-embed":w.dataset.embed,"class":"brightcove-player video-js",controls:"","data-video-id":w.dataset.videoId}),w.parentNode.replaceChild(ot,w);return ut=[u,o,n],v&&ut.push(v),st=function(){var t,n;return function(){var o=y.Content.scrollTop,r,i,u,e;n=n||function(){for(var i,u,r={},t=f(y.ContentsTab,"js-jumplink"),n=0;n<t.length;n++)(i=t[n].href,i.indexOf("#")<0)||(u=i.split("#").slice(-1)+"-sv",r[u]=t[n]);return r}();t=t||function(){for(var i=Array.prototype.concat(Array.prototype.slice.call(y.Content.getElementsByTagName("h2"),0),Array.prototype.slice.call(y.Content.getElementsByTagName("h3"),0)).sort(a),t=0;t<i.length;t++)n[i[t].id]||(i.splice(t,1),t--);return i}();for(r in n)l(n[r],"active");for(i=t.length-1;i>=0;i--)if(u=t[i].offsetTop,u<=o){e=n[t[i].id];h(e||n[t[0]],"active");return}}}(),i("div",{"class":"content-panel",onscroll:debounce(st,16),id:"split-view-scroll-pane"},[i("div",{"class":"location-left-panel"},[i("div",{"class":"content-inner-wrap"},[i("div",{"class":"article-body"},[i("div",{"class":"content active"},ut)])])])])}});SCM.SplitScreen.WidgetStore.register({name:"SwitchView",render:function(){return i("li",{"class":"toolbar-item item-link"},[i("a",{onclick:SCM.SplitScreen.toggleSplitView},[i("i",{"class":"icon-menu_standard"}),"Standard view"])])}});SCM.SplitScreen.WidgetStore.register({name:"PdfLink",render:function(){var n=r(document,"item-pdf");if(n)return n.cloneNode(!0)}});SCM.SplitScreen.WidgetStore.register({name:"ShareThis",render:function(){var n=r(document,"item-share"),i;if(n)return n=n.cloneNode(!0),i=r(n,"drop-trigger"),i&&i.addEventListener("click",function(n){n.preventDefault();var i=t(this);i.siblings("ul").slideToggle()}),n}});SCM.SplitScreen.WidgetStore.register({name:"ToolbarCitation",dependencies:["ToolboxGetCitation"],render:function(n){return i("li",{"class":"toolbar-item"},[n])}});SCM.SplitScreen.WidgetStore.register({name:"ToolbarPermissions",dependencies:["ToolboxPermissions"],render:function(n){return i("li",{"class":"toolbar-item"},[i("i",{"class":"icon-menu_permissions"}),n])}});SCM.SplitScreen.WidgetStore.register({name:"Toolbar",dependencies:["ToolbarCitation","ToolbarPermissions","PdfLink","ShareThis","SwitchView"],render:function(n,t,r,u,f){return i("div",{"class":"toolbar-wrap"},[i("div",{"class":"toolbar-inner-wrap"},[i("ul",{id:"Toolbar",role:"navigation"},[f,r,n,t,u])])])}});SCM.SplitScreen.WidgetStore.register({name:"SplitView",dependencies:["Content","Tabs","Toolbar"],render:function(n,t,r){return i("div",{"class":"master-container"},[i("main",{id:"sv_main"},[i("section",{"class":"master-main row"},[i("div",{"class":"center-inner-row no-overflow"},[i("div",{"class":"widget widget-SplitView widget-instance-SplitView_Article"},[i("div",{"class":"pseudo-splitview-header"},[i("div",{"class":"pseudo-inner-wrap"},[r])]),i("div",{"class":"index-inner-wrap"},[t,n])])])])])])}})}(SCM.SplitScreen=SCM.SplitScreen||{},jQuery);debounce=function(n,t,i){var r;return function(){var u=this,f=arguments,e=function(){r=null;i||n.apply(u,f)},o=i&&!r;clearTimeout(r);r=setTimeout(e,t);o&&n.apply(u,f)}};viewport=updateViewportDimensions();SCM=SCM||{};SCM.JSUtility=function(n){return{equalHeights:function(t,i){function r(){if(n(t).length&&n(window).width()>i){var r=0,u=n(t);u.attr("style","");u.each(function(){var t=n(this).outerHeight();r<t&&(r=t)});n(t).css("height",r)}else n(t).attr("style","")}r();n(window).resize(function(){r()})},addStateToggle:function(t,i,r){function c(){f.removeClass(o);u.removeClass(s);r&&e.removeClass(h)}var u=n(t),f=n(i),o="active-state",s="target-active",e=n("body"),h=i.replace(/.|#/,"")+"-active",l=f.find(".close");r=r||!1;u.click(function(n){n.preventDefault();f.toggleClass(o);u.toggleClass(s);r&&e.toggleClass(h)});e.click(function(t){n(t.target).closest(u.add(f)).length||c()});l.click(function(){c()})},toggleVisibility:function(t,i,r){var u=n(t),o="target-active",s="active",f,e;i=i||!1;r=r||640;f=function(){var t=n(this),i=n("."+t.attr("data-toggle-target"));t.toggleClass(o);i.slideToggle().toggleClass(s)};e=debounce(function(){if(i)if(viewport=updateViewportDimensions(),viewport.width>r)u.off("click.toggle-visibility"),u.removeClass(o),u.each(function(){var t=n("."+n(this).attr("data-toggle-target"));t.removeAttr("style").removeClass(s)});else{u.off("click.toggle-visibility");u.on("click.toggle-visibility",f)}else u.on("click.toggle-visibility",f)},150,!0);e();i&&n(window).resize(function(){e()})}}}(jQuery),function(){function n(n,t){t=t||{bubbles:!1,cancelable:!1,detail:undefined};var i=document.createEvent("CustomEvent");return i.initCustomEvent(n,t.bubbles,t.cancelable,t.detail),i}if(typeof window.CustomEvent=="function")return!1;n.prototype=window.Event.prototype;window.CustomEvent=n}(),function(n,t,i,r){"use strict";function l(n){return(typeof n=="string"||n instanceof String)&&(n=n.replace(/^['\\/"]+|(;\s?})+|['\\/"]+$/g,"")),n}function u(n){this.selector=n;this.query=""}var e=function(t){var i=n("head");i.prepend(n.map(t,function(n){if(i.has("."+n).length===0)return'<meta class="'+n+'" />'}))};e(["foundation-mq-small","foundation-mq-small-only","foundation-mq-medium","foundation-mq-medium-only","foundation-mq-large","foundation-mq-large-only","foundation-mq-xlarge","foundation-mq-xlarge-only","foundation-mq-xxlarge","foundation-data-attribute-namespace"]);n(function(){typeof FastClick!="undefined"&&typeof i.body!="undefined"&&FastClick.attach(i.body)});var f=function(t,r){if(typeof t=="string"){if(r){var u;if(r.jquery){if(u=r[0],!u)return r}else u=r;return n(u.querySelectorAll(t))}return n(i.querySelectorAll(t))}return n(t,r)},o=function(n){var t=[];return n||t.push("data"),this.namespace.length>0&&t.push(this.namespace),t.push(this.name),t.join("-")},s=function(n){for(var i=n.split("-"),t=i.length,r=[];t--;)t!==0?r.push(i[t]):this.namespace.length>0?r.push(this.namespace,i[t]):r.push(i[t]);return r.reverse().join("-")},h=function(t,i){var r=this,u=function(){var u=f(this),e=!u.data(r.attr_name(!0)+"-init");u.data(r.attr_name(!0)+"-init",n.extend({},r.settings,i||t,r.data_options(u)));e&&r.events(this)};return f(this.scope).is("["+this.attr_name()+"]")?u.call(this.scope):f("["+this.attr_name()+"]",this.scope).each(u),typeof t=="string"?this[t].call(this,i):void 0},c=function(n,t){function i(){t(n[0])}function r(){this.one("load",i);if(/MSIE (\d+\.\d+);/.test(navigator.userAgent)){var n=this.attr("src"),t=n.match(/\?/)?"&":"?";t+="random="+(new Date).getTime();this.attr("src",n+t)}}if(!n.attr("src")){i();return}n[0].complete||n[0].readyState===4?i():r.call(n)};
/*! matchMedia() polyfill - Test a CSS media type/query in JS. Authors & copyright (c) 2012: Scott Jehl, Paul Irish, Nicholas Zakas, David Knight. Dual MIT/BSD license */
t.matchMedia||(t.matchMedia=function(){var r=t.styleMedia||t.media;if(!r){var n=i.createElement("style"),u=i.getElementsByTagName("script")[0],f=null;n.type="text/css";n.id="matchmediajs-test";u.parentNode.insertBefore(n,u);f="getComputedStyle"in t&&t.getComputedStyle(n,null)||n.currentStyle;r={matchMedium:function(t){var i="@media "+t+"{ #matchmediajs-test { width: 1px; } }";return n.styleSheet?n.styleSheet.cssText=i:n.textContent=i,f.width==="1px"}}}return function(n){return{matches:r.matchMedium(n||"all"),media:n||"all"}}}()),function(n){function s(){u&&(r(s),o&&n.fx.tick())}for(var u,i=0,f=["webkit","moz"],r=t.requestAnimationFrame,e=t.cancelAnimationFrame,o="undefined"!=typeof n.fx;i<f.length&&!r;i++)r=t[f[i]+"RequestAnimationFrame"],e=e||t[f[i]+"CancelAnimationFrame"]||t[f[i]+"CancelRequestAnimationFrame"];r?(t.requestAnimationFrame=r,t.cancelAnimationFrame=e,o&&(n.fx.timer=function(t){t()&&n.timers.push(t)&&!u&&(u=!0,s())},n.fx.stop=function(){u=!1})):(t.requestAnimationFrame=function(n){var r=(new Date).getTime(),u=Math.max(0,16-(r-i)),f=t.setTimeout(function(){n(r+u)},u);return i=r+u,f},t.cancelAnimationFrame=function(n){clearTimeout(n)})}(n);u.prototype.toString=function(){return this.query||(this.query=f(this.selector).css("font-family").replace(/^[\/\\'"]+|(;\s?})+|[\/\\'"]+$/g,""))};t.Foundation={name:"Foundation",version:"5.5.3",media_queries:{small:new u(".foundation-mq-small"),"small-only":new u(".foundation-mq-small-only"),medium:new u(".foundation-mq-medium"),"medium-only":new u(".foundation-mq-medium-only"),large:new u(".foundation-mq-large"),"large-only":new u(".foundation-mq-large-only"),xlarge:new u(".foundation-mq-xlarge"),"xlarge-only":new u(".foundation-mq-xlarge-only"),xxlarge:new u(".foundation-mq-xxlarge")},stylesheet:n("<style><\/style>").appendTo("head")[0].sheet,global:{namespace:r},init:function(n,i,r,u,e){var h=[n,r,u,e],o=[],s;if(this.rtl=/rtl/i.test(f("html").attr("dir")),this.scope=n||this.scope,this.set_namespace(),i&&typeof i=="string"&&!/reflow/i.test(i))this.libs.hasOwnProperty(i)&&o.push(this.init_lib(i,h));else for(s in this.libs)o.push(this.init_lib(s,i));return f(t).load(function(){f(t).trigger("resize.fndtn.clearing").trigger("resize.fndtn.dropdown").trigger("resize.fndtn.equalizer").trigger("resize.fndtn.interchange").trigger("resize.fndtn.joyride").trigger("resize.fndtn.magellan").trigger("resize.fndtn.topbar").trigger("resize.fndtn.slider")}),n},init_lib:function(t,i){return this.libs.hasOwnProperty(t)?(this.patch(this.libs[t]),i&&i.hasOwnProperty(t))?(typeof this.libs[t].settings!="undefined"?n.extend(!0,this.libs[t].settings,i[t]):typeof this.libs[t].defaults!="undefined"&&n.extend(!0,this.libs[t].defaults,i[t]),this.libs[t].init.apply(this.libs[t],[this.scope,i[t]])):(i=i instanceof Array?i:new Array(i),this.libs[t].init.apply(this.libs[t],i)):function(){}},patch:function(n){n.scope=this.scope;n.namespace=this.global.namespace;n.rtl=this.rtl;n.data_options=this.utils.data_options;n.attr_name=o;n.add_namespace=s;n.bindings=h;n.S=this.utils.S},inherit:function(n,t){for(var i=t.split(" "),r=i.length;r--;)this.utils.hasOwnProperty(i[r])&&(n[i[r]]=this.utils[i[r]])},set_namespace:function(){var t=this.global.namespace===r?n(".foundation-data-attribute-namespace").css("font-family"):this.global.namespace;this.global.namespace=t===r||/false/i.test(t)?"":t},libs:{},utils:{S:f,throttle:function(n,t){var i=null;return function(){var r=this,u=arguments;i==null&&(i=setTimeout(function(){n.apply(r,u);i=null},t))}},debounce:function(n,t,i){var r,u;return function(){var f=this,e=arguments,o=function(){r=null;i||(u=n.apply(f,e))},s=i&&!r;return clearTimeout(r),r=setTimeout(o,t),s&&(u=n.apply(f,e)),u}},data_options:function(t,i){function c(n){return!isNaN(+n)&&n!==null&&n!==""&&n!==!1&&n!==!0}function s(t){return typeof t=="string"?n.trim(t):t}i=i||"options";var o={},u,r,f,h=function(n){var t=Foundation.global.namespace;return t.length>0?n.data(t+"-"+i):n.data(i)},e=h(t);if(typeof e=="object")return e;for(f=(e||":").split(";"),u=f.length;u--;)r=f[u].split(":"),r=[r[0],r.slice(1).join(":")],/true/i.test(r[1])&&(r[1]=!0),/false/i.test(r[1])&&(r[1]=!1),c(r[1])&&(r[1]=r[1].indexOf(".")===-1?parseInt(r[1],10):parseFloat(r[1])),r.length===2&&r[0].length>0&&(o[s(r[0])]=s(r[1]));return o},register_media:function(t,i){Foundation.media_queries[t]===r&&(n("head").append('<meta class="'+i+'"/>'),Foundation.media_queries[t]=l(n("."+i).css("font-family")))},add_custom_rule:function(n,t){if(t===r&&Foundation.stylesheet)Foundation.stylesheet.insertRule(n,Foundation.stylesheet.cssRules.length);else{var i=Foundation.media_queries[t];i!==r&&Foundation.stylesheet.insertRule("@media "+Foundation.media_queries[t]+"{ "+n+" }",Foundation.stylesheet.cssRules.length)}},image_loaded:function(n,t){function f(n){for(var i=n.length,t=i-1;t>=0;t--)if(n.attr("height")===r)return!1;return!0}var u=this,i=n.length;(i===0||f(n))&&t(n);n.each(function(){c(u.S(this),function(){i-=1;i===0&&t(n)})})},random_str:function(){return this.fidx||(this.fidx=0),this.prefix=this.prefix||[this.name||"F",(+new Date).toString(36)].join("-"),this.prefix+(this.fidx++).toString(36)},match:function(n){return t.matchMedia(n).matches},is_small_up:function(){return this.match(Foundation.media_queries.small)},is_medium_up:function(){return this.match(Foundation.media_queries.medium)},is_large_up:function(){return this.match(Foundation.media_queries.large)},is_xlarge_up:function(){return this.match(Foundation.media_queries.xlarge)},is_xxlarge_up:function(){return this.match(Foundation.media_queries.xxlarge)},is_small_only:function(){return!this.is_medium_up()&&!this.is_large_up()&&!this.is_xlarge_up()&&!this.is_xxlarge_up()},is_medium_only:function(){return this.is_medium_up()&&!this.is_large_up()&&!this.is_xlarge_up()&&!this.is_xxlarge_up()},is_large_only:function(){return this.is_medium_up()&&this.is_large_up()&&!this.is_xlarge_up()&&!this.is_xxlarge_up()},is_xlarge_only:function(){return this.is_medium_up()&&this.is_large_up()&&this.is_xlarge_up()&&!this.is_xxlarge_up()},is_xxlarge_only:function(){return this.is_medium_up()&&this.is_large_up()&&this.is_xlarge_up()&&this.is_xxlarge_up()}}};n.fn.foundation=function(){var n=Array.prototype.slice.call(arguments,0);return this.each(function(){return Foundation.init.apply(Foundation,[this].concat(n)),this})}}(jQuery,window,window.document),function(n,t,i,r){"use strict";function f(n){var t=/fade/i.test(n),i=/pop/i.test(n);return{animate:t||i,pop:i,fade:t}}var u=[];Foundation.libs.reveal={name:"reveal",version:"5.5.3",locked:!1,settings:{animation:"fadeAndPop",animation_speed:250,close_on_background_click:!0,close_on_esc:!0,dismiss_modal_class:"close-reveal-modal",multiple_opened:!1,bg_class:"reveal-modal-bg",root_element:"body",open:function(){},opened:function(){},close:function(){},closed:function(){},on_ajax_error:n.noop,bg:n(".reveal-modal-bg"),css:{open:{opacity:0,visibility:"visible",display:"block"},close:{opacity:1,visibility:"hidden",display:"none"}}},init:function(t,i,r){n.extend(!0,this.settings,i,r);this.bindings(i,r)},events:function(){var n=this,t=n.S;t(this.scope).off(".reveal").on("click.fndtn.reveal","["+this.add_namespace("data-reveal-id")+"]:not([disabled])",function(i){var f;if(i.preventDefault(),!n.locked){var r=t(this),u=r.data(n.data_attr("reveal-ajax")),e=r.data(n.data_attr("reveal-replace-content"));n.locked=!0;typeof u=="undefined"?n.open.call(n,r):(f=u===!0?r.attr("href"):u,n.open.call(n,r,{url:f},{replaceContentSel:e}))}});t(i).on("click.fndtn.reveal",this.close_targets(),function(i){if(i.preventDefault(),!n.locked){var r=t("["+n.attr_name()+"].open").data(n.attr_name(!0)+"-init")||n.settings,u=t(i.target)[0]===t("."+r.bg_class)[0];if(u)if(r.close_on_background_click)i.stopPropagation();else return;n.locked=!0;n.close.call(n,u?t("["+n.attr_name()+"].open:not(.toback)"):t(this).closest("["+n.attr_name()+"]"))}});if(t("["+n.attr_name()+"]",this.scope).length>0)t(this.scope).on("open.fndtn.reveal",this.settings.open).on("opened.fndtn.reveal",this.settings.opened).on("opened.fndtn.reveal",this.open_video).on("close.fndtn.reveal",this.settings.close).on("closed.fndtn.reveal",this.settings.closed).on("closed.fndtn.reveal",this.close_video);else t(this.scope).on("open.fndtn.reveal","["+n.attr_name()+"]",this.settings.open).on("opened.fndtn.reveal","["+n.attr_name()+"]",this.settings.opened).on("opened.fndtn.reveal","["+n.attr_name()+"]",this.open_video).on("close.fndtn.reveal","["+n.attr_name()+"]",this.settings.close).on("closed.fndtn.reveal","["+n.attr_name()+"]",this.settings.closed).on("closed.fndtn.reveal","["+n.attr_name()+"]",this.close_video);return!0},key_up_on:function(){var n=this;n.S("body").off("keyup.fndtn.reveal").on("keyup.fndtn.reveal",function(t){var i=n.S("["+n.attr_name()+"].open"),r=i.data(n.attr_name(!0)+"-init")||n.settings;r&&t.which===27&&r.close_on_esc&&!n.locked&&n.close.call(n,i)});return!0},key_up_off:function(){return this.S("body").off("keyup.fndtn.reveal"),!0},open:function(i,f){var o=this,e,s,h,c,l;if(i?typeof i.selector!="undefined"?e=o.S("#"+i.data(o.data_attr("reveal-id"))).first():(e=o.S(this.scope),f=i):e=o.S(this.scope),s=e.data(o.attr_name(!0)+"-init"),s=s||this.settings,e.hasClass("open")&&i!==r&&i.attr("data-reveal-id")==e.attr("id"))return o.close(e);if(!e.hasClass("open")){h=o.S("["+o.attr_name()+"].open");typeof e.data("css-top")=="undefined"&&e.data("css-top",parseInt(e.css("top"),10)).data("offset",this.cache_offset(e));e.attr("tabindex","0").attr("aria-hidden","false");this.key_up_on(e);e.on("open.fndtn.reveal",function(n){n.namespace!=="fndtn.reveal"});e.on("open.fndtn.reveal").trigger("open.fndtn.reveal");h.length<1&&this.toggle_bg(e,!0);typeof f=="string"&&(f={url:f});c=function(){h.length>0&&(s.multiple_opened?o.to_back(h):o.hide(h,s.css.close));s.multiple_opened&&u.push(e);o.show(e,s.css.open)};typeof f!="undefined"&&f.url?(l=typeof f.success!="undefined"?f.success:null,n.extend(f,{success:function(t,i,r){if(n.isFunction(l)){var u=l(t,i,r);typeof u=="string"&&(t=u)}typeof options!="undefined"&&typeof options.replaceContentSel!="undefined"?e.find(options.replaceContentSel).html(t):e.html(t);o.S(e).foundation("section","reflow");o.S(e).children().foundation();c()}}),s.on_ajax_error!==n.noop&&n.extend(f,{error:s.on_ajax_error}),n.ajax(f)):c()}o.S(t).trigger("resize")},close:function(t){var t=t&&t.length?t:this.S(this.scope),f=this.S("["+this.attr_name()+"].open"),i=t.data(this.attr_name(!0)+"-init")||this.settings,r=this,e;f.length>0&&(t.removeAttr("tabindex","0").attr("aria-hidden","true"),this.locked=!0,this.key_up_off(t),t.trigger("close.fndtn.reveal"),(i.multiple_opened&&f.length===1||!i.multiple_opened||t.length>1)&&(r.toggle_bg(t,!1),r.to_front(t)),i.multiple_opened?(e=t.is(":not(.toback)"),r.hide(t,i.css.close,i),e?u.pop():u=n.grep(u,function(n){var i=n[0]===t[0];return i&&r.to_front(t),!i}),u.length>0&&r.to_front(u[u.length-1])):r.hide(f,i.css.close,i))},close_targets:function(){var n="."+this.settings.dismiss_modal_class;return this.settings.close_on_background_click?n+", ."+this.settings.bg_class:n},toggle_bg:function(t,i){this.S("."+this.settings.bg_class).length===0&&(this.settings.bg=n("<div />",{"class":this.settings.bg_class}).appendTo("body").hide());var u=this.settings.bg.filter(":visible").length>0;i!=u&&((i==r?u:!i)?this.hide(this.settings.bg):this.show(this.settings.bg))},show:function(i,r){var c,e,o,u;if(r){var u=i.data(this.attr_name(!0)+"-init")||this.settings,s=u.root_element,h=this;if(i.parent(s).length===0){c=i.wrap('<div style="display: none;" />').parent();i.on("closed.fndtn.reveal.wrapped",function(){i.detach().appendTo(c);i.unwrap().unbind("closed.fndtn.reveal.wrapped")});i.detach().appendTo(s)}return(e=f(u.animation),e.animate||(this.locked=!1),e.pop)?(r.top=n(t).scrollTop()-i.data("offset")+"px",o={top:n(t).scrollTop()+i.data("css-top")+"px",opacity:1},setTimeout(function(){return i.css(r).animate(o,u.animation_speed,"linear",function(){h.locked=!1;i.trigger("opened.fndtn.reveal")}).addClass("open")},u.animation_speed/2)):(r.top=n(t).scrollTop()+i.data("css-top")+"px",e.fade)?(o={opacity:1},setTimeout(function(){return i.css(r).animate(o,u.animation_speed,"linear",function(){h.locked=!1;i.trigger("opened.fndtn.reveal")}).addClass("open")},u.animation_speed/2)):i.css(r).show().css({opacity:1}).addClass("open").trigger("opened.fndtn.reveal")}return(u=this.settings,f(u.animation).fade)?i.fadeIn(u.animation_speed/2):(this.locked=!1,i.show())},to_back:function(n){n.addClass("toback")},to_front:function(n){n.removeClass("toback")},hide:function(i,r){var s,e,o,u;return r?(u=i.data(this.attr_name(!0)+"-init"),s=this,u=u||this.settings,e=f(u.animation),e.animate||(this.locked=!1),e.pop)?(o={top:-n(t).scrollTop()-i.data("offset")+"px",opacity:0},setTimeout(function(){return i.animate(o,u.animation_speed,"linear",function(){s.locked=!1;i.css(r).trigger("closed.fndtn.reveal")}).removeClass("open")},u.animation_speed/2)):e.fade?(o={opacity:0},setTimeout(function(){return i.animate(o,u.animation_speed,"linear",function(){s.locked=!1;i.css(r).trigger("closed.fndtn.reveal")}).removeClass("open")},u.animation_speed/2)):i.hide().css(r).removeClass("open").trigger("closed.fndtn.reveal"):(u=this.settings,f(u.animation).fade)?i.fadeOut(u.animation_speed/2):i.hide()},close_video:function(t){var r=n(".flex-video",t.target),i=n("iframe",r);i.length>0&&(i.attr("data-src",i[0].src),i.attr("src",i.attr("src")),r.hide())},open_video:function(t){var u=n(".flex-video",t.target),i=u.find("iframe"),f,e;i.length>0&&(f=i.attr("data-src"),typeof f=="string"?i[0].src=i.attr("data-src"):(e=i[0].src,i[0].src=r,i[0].src=e),u.show())},data_attr:function(n){return this.namespace.length>0?this.namespace+"-"+n:n},cache_offset:function(n){var t=n.show().height()+parseInt(n.css("top"),10)+n.scrollY;return n.hide(),t},off:function(){n(this.scope).off(".fndtn.reveal")},reflow:function(){}}}(jQuery,window,window.document),function(){for(var i=0,t=["ms","moz","webkit","o"],n=0;n<t.length&&!window.requestAnimationFrame;++n)window.requestAnimationFrame=window[t[n]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[t[n]+"CancelAnimationFrame"]||window[t[n]+"CancelRequestAnimationFrame"];window.requestAnimationFrame||(window.requestAnimationFrame=function(n){var t=(new Date).getTime(),r=Math.max(0,16-(t-i)),u=window.setTimeout(function(){n(t+r)},r);return i=t+r,u});window.cancelAnimationFrame||(window.cancelAnimationFrame=function(n){clearTimeout(n)})}(),function(n){function i(n,t){for(var i=window,r=(n||"").split(".");i&&r.length;)i=i[r.shift()];return typeof i=="function"?i:(t.push(n),Function.constructor.apply(null,t))}function u(n){return n==="GET"||n==="POST"}function o(n,t){u(t)||n.setRequestHeader("X-HTTP-Method-Override",t)}function s(t,i,r){var u;r.indexOf("application/x-javascript")===-1&&(u=(t.getAttribute("data-ajax-mode")||"").toUpperCase(),n(t.getAttribute("data-ajax-update")).each(function(t,r){switch(u){case"BEFORE":n(r).prepend(i);break;case"AFTER":n(r).append(i);break;case"REPLACE-WITH":n(r).replaceWith(i);break;default:n(r).html(i)}}))}function f(t,r){var e,h,f,c;(e=t.getAttribute("data-ajax-confirm"),!e||window.confirm(e))&&(h=n(t.getAttribute("data-ajax-loading")),c=parseInt(t.getAttribute("data-ajax-loading-duration"),10)||0,n.extend(r,{type:t.getAttribute("data-ajax-method")||undefined,url:t.getAttribute("data-ajax-url")||undefined,cache:(t.getAttribute("data-ajax-cache")||"").toLowerCase()==="true",beforeSend:function(n){var r;return o(n,f),r=i(t.getAttribute("data-ajax-begin"),["xhr"]).apply(t,arguments),r!==!1&&h.show(c),r},complete:function(){h.hide(c);i(t.getAttribute("data-ajax-complete"),["xhr","status"]).apply(t,arguments)},success:function(n,r,u){s(t,n,u.getResponseHeader("Content-Type")||"text/html");i(t.getAttribute("data-ajax-success"),["data","status","xhr"]).apply(t,arguments)},error:function(){i(t.getAttribute("data-ajax-failure"),["xhr","status","error"]).apply(t,arguments)}}),r.data.push({name:"X-Requested-With",value:"XMLHttpRequest"}),f=r.type.toUpperCase(),u(f)||(r.type="POST",r.data.push({name:"X-HTTP-Method-Override",value:f})),n.ajax(r))}function h(t){var i=n(t).data(e);return!i||!i.validate||i.validate()}var t="unobtrusiveAjaxClick",r="unobtrusiveAjaxClickTarget",e="unobtrusiveValidation";n(document).on("click","a[data-ajax=true]",function(n){n.preventDefault();f(this,{url:this.href,type:"GET",data:[]})});n(document).on("click","form[data-ajax=true] input[type=image]",function(i){var r=i.target.name,u=n(i.target),f=n(u.parents("form")[0]),e=u.offset();f.data(t,[{name:r+".x",value:Math.round(i.pageX-e.left)},{name:r+".y",value:Math.round(i.pageY-e.top)}]);setTimeout(function(){f.removeData(t)},0)});n(document).on("click","form[data-ajax=true] :submit",function(i){var f=i.currentTarget.name,e=n(i.target),u=n(e.parents("form")[0]);u.data(t,f?[{name:f,value:i.currentTarget.value}]:[]);u.data(r,e);setTimeout(function(){u.removeData(t);u.removeData(r)},0)});n(document).on("submit","form[data-ajax=true]",function(i){var e=n(this).data(t)||[],u=n(this).data(r),o=u&&(u.hasClass("cancel")||u.attr("formnovalidate")!==undefined);(i.preventDefault(),o||h(this))&&f(this,{url:this.action,type:this.method||"GET",data:e.concat(n(this).serializeArray())})})}(jQuery);
/*!
 * jQuery Validation Plugin v1.17.0
 *
 * https://jqueryvalidation.org/
 *
 * Copyright (c) 2017 Jörn Zaefferer
 * Released under the MIT license
 */
(function(n){typeof define=="function"&&define.amd?define(["jquery"],n):typeof module=="object"&&module.exports?module.exports=n(require("jquery")):n(jQuery)})(function(n){n.extend(n.fn,{validate:function(t){if(!this.length){t&&t.debug&&window.console&&console.warn("Nothing selected, can't validate, returning nothing.");return}var i=n.data(this[0],"validator");if(i)return i;if(this.attr("novalidate","novalidate"),i=new n.validator(t,this[0]),n.data(this[0],"validator",i),i.settings.onsubmit){this.on("click.validate",":submit",function(t){i.submitButton=t.currentTarget;n(this).hasClass("cancel")&&(i.cancelSubmit=!0);n(this).attr("formnovalidate")!==undefined&&(i.cancelSubmit=!0)});this.on("submit.validate",function(t){function r(){var r,u;return(i.submitButton&&(i.settings.submitHandler||i.formSubmitted)&&(r=n("<input type='hidden'/>").attr("name",i.submitButton.name).val(n(i.submitButton).val()).appendTo(i.currentForm)),i.settings.submitHandler)?(u=i.settings.submitHandler.call(i,i.currentForm,t),r&&r.remove(),u!==undefined)?u:!1:!0}return(i.settings.debug&&t.preventDefault(),i.cancelSubmit)?(i.cancelSubmit=!1,r()):i.form()?i.pendingRequest?(i.formSubmitted=!0,!1):r():(i.focusInvalid(),!1)})}return i},valid:function(){var t,i,r;return n(this[0]).is("form")?t=this.validate().form():(r=[],t=!0,i=n(this[0].form).validate(),this.each(function(){t=i.element(this)&&t;t||(r=r.concat(i.errorList))}),i.errorList=r),t},rules:function(t,i){var r=this[0],e,s,f,u,o,h;if(r!=null&&(!r.form&&r.hasAttribute("contenteditable")&&(r.form=this.closest("form")[0],r.name=this.attr("name")),r.form!=null)){if(t){e=n.data(r.form,"validator").settings;s=e.rules;f=n.validator.staticRules(r);switch(t){case"add":n.extend(f,n.validator.normalizeRule(i));delete f.messages;s[r.name]=f;i.messages&&(e.messages[r.name]=n.extend(e.messages[r.name],i.messages));break;case"remove":return i?(h={},n.each(i.split(/\s/),function(n,t){h[t]=f[t];delete f[t]}),h):(delete s[r.name],f)}}return u=n.validator.normalizeRules(n.extend({},n.validator.classRules(r),n.validator.attributeRules(r),n.validator.dataRules(r),n.validator.staticRules(r)),r),u.required&&(o=u.required,delete u.required,u=n.extend({required:o},u)),u.remote&&(o=u.remote,delete u.remote,u=n.extend(u,{remote:o})),u}}});n.extend(n.expr.pseudos||n.expr[":"],{blank:function(t){return!n.trim(""+n(t).val())},filled:function(t){var i=n(t).val();return i!==null&&!!n.trim(""+i)},unchecked:function(t){return!n(t).prop("checked")}});n.validator=function(t,i){this.settings=n.extend(!0,{},n.validator.defaults,t);this.currentForm=i;this.init()};n.validator.format=function(t,i){return arguments.length===1?function(){var i=n.makeArray(arguments);return i.unshift(t),n.validator.format.apply(this,i)}:i===undefined?t:(arguments.length>2&&i.constructor!==Array&&(i=n.makeArray(arguments).slice(1)),i.constructor!==Array&&(i=[i]),n.each(i,function(n,i){t=t.replace(new RegExp("\\{"+n+"\\}","g"),function(){return i})}),t)};n.extend(n.validator,{defaults:{messages:{},groups:{},rules:{},errorClass:"error",pendingClass:"pending",validClass:"valid",errorElement:"label",focusCleanup:!1,focusInvalid:!0,errorContainer:n([]),errorLabelContainer:n([]),onsubmit:!0,ignore:":hidden",ignoreTitle:!1,onfocusin:function(n){this.lastActive=n;this.settings.focusCleanup&&(this.settings.unhighlight&&this.settings.unhighlight.call(this,n,this.settings.errorClass,this.settings.validClass),this.hideThese(this.errorsFor(n)))},onfocusout:function(n){!this.checkable(n)&&(n.name in this.submitted||!this.optional(n))&&this.element(n)},onkeyup:function(t,i){(i.which!==9||this.elementValue(t)!=="")&&n.inArray(i.keyCode,[16,17,18,20,35,36,37,38,39,40,45,144,225])===-1&&(t.name in this.submitted||t.name in this.invalid)&&this.element(t)},onclick:function(n){n.name in this.submitted?this.element(n):n.parentNode.name in this.submitted&&this.element(n.parentNode)},highlight:function(t,i,r){t.type==="radio"?this.findByName(t.name).addClass(i).removeClass(r):n(t).addClass(i).removeClass(r)},unhighlight:function(t,i,r){t.type==="radio"?this.findByName(t.name).removeClass(i).addClass(r):n(t).removeClass(i).addClass(r)}},setDefaults:function(t){n.extend(n.validator.defaults,t)},messages:{required:"This field is required.",remote:"Please fix this field.",email:"Please enter a valid email address.",url:"Please enter a valid URL.",date:"Please enter a valid date.",dateISO:"Please enter a valid date (ISO).",number:"Please enter a valid number.",digits:"Please enter only digits.",equalTo:"Please enter the same value again.",maxlength:n.validator.format("Please enter no more than {0} characters."),minlength:n.validator.format("Please enter at least {0} characters."),rangelength:n.validator.format("Please enter a value between {0} and {1} characters long."),range:n.validator.format("Please enter a value between {0} and {1}."),max:n.validator.format("Please enter a value less than or equal to {0}."),min:n.validator.format("Please enter a value greater than or equal to {0}."),step:n.validator.format("Please enter a multiple of {0}.")},autoCreateRanges:!1,prototype:{init:function(){function i(t){!this.form&&this.hasAttribute("contenteditable")&&(this.form=n(this).closest("form")[0],this.name=n(this).attr("name"));var r=n.data(this.form,"validator"),u="on"+t.type.replace(/^validate/,""),i=r.settings;i[u]&&!n(this).is(i.ignore)&&i[u].call(r,this,t)}this.labelContainer=n(this.settings.errorLabelContainer);this.errorContext=this.labelContainer.length&&this.labelContainer||n(this.currentForm);this.containers=n(this.settings.errorContainer).add(this.settings.errorLabelContainer);this.submitted={};this.valueCache={};this.pendingRequest=0;this.pending={};this.invalid={};this.reset();var r=this.groups={},t;n.each(this.settings.groups,function(t,i){typeof i=="string"&&(i=i.split(/\s/));n.each(i,function(n,i){r[i]=t})});t=this.settings.rules;n.each(t,function(i,r){t[i]=n.validator.normalizeRule(r)});n(this.currentForm).on("focusin.validate focusout.validate keyup.validate",":text, [type='password'], [type='file'], select, textarea, [type='number'], [type='search'], [type='tel'], [type='url'], [type='email'], [type='datetime'], [type='date'], [type='month'], [type='week'], [type='time'], [type='datetime-local'], [type='range'], [type='color'], [type='radio'], [type='checkbox'], [contenteditable], [type='button']",i).on("click.validate","select, option, [type='radio'], [type='checkbox']",i);if(this.settings.invalidHandler)n(this.currentForm).on("invalid-form.validate",this.settings.invalidHandler)},form:function(){return this.checkForm(),n.extend(this.submitted,this.errorMap),this.invalid=n.extend({},this.errorMap),this.valid()||n(this.currentForm).triggerHandler("invalid-form",[this]),this.showErrors(),this.valid()},checkForm:function(){this.prepareForm();for(var n=0,t=this.currentElements=this.elements();t[n];n++)this.check(t[n]);return this.valid()},element:function(t){var i=this.clean(t),r=this.validationTargetFor(i),u=this,f=!0,e,o;return r===undefined?delete this.invalid[i.name]:(this.prepareElement(r),this.currentElements=n(r),o=this.groups[r.name],o&&n.each(this.groups,function(n,t){t===o&&n!==r.name&&(i=u.validationTargetFor(u.clean(u.findByName(n))),i&&i.name in u.invalid&&(u.currentElements.push(i),f=u.check(i)&&f))}),e=this.check(r)!==!1,f=f&&e,this.invalid[r.name]=e?!1:!0,this.numberOfInvalids()||(this.toHide=this.toHide.add(this.containers)),this.showErrors(),n(t).attr("aria-invalid",!e)),f},showErrors:function(t){if(t){var i=this;n.extend(this.errorMap,t);this.errorList=n.map(this.errorMap,function(n,t){return{message:n,element:i.findByName(t)[0]}});this.successList=n.grep(this.successList,function(n){return!(n.name in t)})}this.settings.showErrors?this.settings.showErrors.call(this,this.errorMap,this.errorList):this.defaultShowErrors()},resetForm:function(){n.fn.resetForm&&n(this.currentForm).resetForm();this.invalid={};this.submitted={};this.prepareForm();this.hideErrors();var t=this.elements().removeData("previousValue").removeAttr("aria-invalid");this.resetElements(t)},resetElements:function(n){var t;if(this.settings.unhighlight)for(t=0;n[t];t++)this.settings.unhighlight.call(this,n[t],this.settings.errorClass,""),this.findByName(n[t].name).removeClass(this.settings.validClass);else n.removeClass(this.settings.errorClass).removeClass(this.settings.validClass)},numberOfInvalids:function(){return this.objectLength(this.invalid)},objectLength:function(n){var i=0;for(var t in n)n[t]!==undefined&&n[t]!==null&&n[t]!==!1&&i++;return i},hideErrors:function(){this.hideThese(this.toHide)},hideThese:function(n){n.not(this.containers).text("");this.addWrapper(n).hide()},valid:function(){return this.size()===0},size:function(){return this.errorList.length},focusInvalid:function(){if(this.settings.focusInvalid)try{n(this.findLastActive()||this.errorList.length&&this.errorList[0].element||[]).filter(":visible").focus().trigger("focusin")}catch(t){}},findLastActive:function(){var t=this.lastActive;return t&&n.grep(this.errorList,function(n){return n.element.name===t.name}).length===1&&t},elements:function(){var t=this,i={};return n(this.currentForm).find("input, select, textarea, [contenteditable]").not(":submit, :reset, :image, :disabled").not(this.settings.ignore).filter(function(){var r=this.name||n(this).attr("name");return(!r&&t.settings.debug&&window.console&&console.error("%o has no name assigned",this),this.hasAttribute("contenteditable")&&(this.form=n(this).closest("form")[0],this.name=r),r in i||!t.objectLength(n(this).rules()))?!1:(i[r]=!0,!0)})},clean:function(t){return n(t)[0]},errors:function(){var t=this.settings.errorClass.split(" ").join(".");return n(this.settings.errorElement+"."+t,this.errorContext)},resetInternals:function(){this.successList=[];this.errorList=[];this.errorMap={};this.toShow=n([]);this.toHide=n([])},reset:function(){this.resetInternals();this.currentElements=n([])},prepareForm:function(){this.reset();this.toHide=this.errors().add(this.containers)},prepareElement:function(n){this.reset();this.toHide=this.errorsFor(n)},elementValue:function(t){var f=n(t),u=t.type,i,r;return u==="radio"||u==="checkbox"?this.findByName(t.name).filter(":checked").val():u==="number"&&typeof t.validity!="undefined"?t.validity.badInput?"NaN":f.val():(i=t.hasAttribute("contenteditable")?f.text():f.val(),u==="file")?i.substr(0,12)==="C:\\fakepath\\"?i.substr(12):(r=i.lastIndexOf("/"),r>=0)?i.substr(r+1):(r=i.lastIndexOf("\\"),r>=0)?i.substr(r+1):i:typeof i=="string"?i.replace(/\r/g,""):i},check:function(t){t=this.validationTargetFor(this.clean(t));var i=n(t).rules(),c=n.map(i,function(n,t){return t}).length,h=!1,u=this.elementValue(t),f,e,r,o;if(typeof i.normalizer=="function"?o=i.normalizer:typeof this.settings.normalizer=="function"&&(o=this.settings.normalizer),o){if(u=o.call(t,u),typeof u!="string")throw new TypeError("The normalizer should return a string value.");delete i.normalizer}for(e in i){r={method:e,parameters:i[e]};try{if(f=n.validator.methods[e].call(this,u,t,r.parameters),f==="dependency-mismatch"&&c===1){h=!0;continue}if(h=!1,f==="pending"){this.toHide=this.toHide.not(this.errorsFor(t));return}if(!f)return this.formatAndAdd(t,r),!1}catch(s){this.settings.debug&&window.console&&console.log("Exception occurred when checking element "+t.id+", check the '"+r.method+"' method.",s);s instanceof TypeError&&(s.message+=".  Exception occurred when checking element "+t.id+", check the '"+r.method+"' method.");throw s;}}if(!h)return this.objectLength(i)&&this.successList.push(t),!0},customDataMessage:function(t,i){return n(t).data("msg"+i.charAt(0).toUpperCase()+i.substring(1).toLowerCase())||n(t).data("msg")},customMessage:function(n,t){var i=this.settings.messages[n];return i&&(i.constructor===String?i:i[t])},findDefined:function(){for(var n=0;n<arguments.length;n++)if(arguments[n]!==undefined)return arguments[n];return undefined},defaultMessage:function(t,i){typeof i=="string"&&(i={method:i});var r=this.findDefined(this.customMessage(t.name,i.method),this.customDataMessage(t,i.method),!this.settings.ignoreTitle&&t.title||undefined,n.validator.messages[i.method],"<strong>Warning: No message defined for "+t.name+"<\/strong>"),u=/\$?\{(\d+)\}/g;return typeof r=="function"?r=r.call(this,i.parameters,t):u.test(r)&&(r=n.validator.format(r.replace(u,"{$1}"),i.parameters)),r},formatAndAdd:function(n,t){var i=this.defaultMessage(n,t);this.errorList.push({message:i,element:n,method:t.method});this.errorMap[n.name]=i;this.submitted[n.name]=i},addWrapper:function(n){return this.settings.wrapper&&(n=n.add(n.parent(this.settings.wrapper))),n},defaultShowErrors:function(){for(var i,t,n=0;this.errorList[n];n++)t=this.errorList[n],this.settings.highlight&&this.settings.highlight.call(this,t.element,this.settings.errorClass,this.settings.validClass),this.showLabel(t.element,t.message);if(this.errorList.length&&(this.toShow=this.toShow.add(this.containers)),this.settings.success)for(n=0;this.successList[n];n++)this.showLabel(this.successList[n]);if(this.settings.unhighlight)for(n=0,i=this.validElements();i[n];n++)this.settings.unhighlight.call(this,i[n],this.settings.errorClass,this.settings.validClass);this.toHide=this.toHide.not(this.toShow);this.hideErrors();this.addWrapper(this.toShow).show()},validElements:function(){return this.currentElements.not(this.invalidElements())},invalidElements:function(){return n(this.errorList).map(function(){return this.element})},showLabel:function(t,i){var u,s,e,o,r=this.errorsFor(t),h=this.idOrName(t),f=n(t).attr("aria-describedby");r.length?(r.removeClass(this.settings.validClass).addClass(this.settings.errorClass),r.html(i)):(r=n("<"+this.settings.errorElement+">").attr("id",h+"-error").addClass(this.settings.errorClass).html(i||""),u=r,this.settings.wrapper&&(u=r.hide().show().wrap("<"+this.settings.wrapper+"/>").parent()),this.labelContainer.length?this.labelContainer.append(u):this.settings.errorPlacement?this.settings.errorPlacement.call(this,u,n(t)):u.insertAfter(t),r.is("label")?r.attr("for",h):r.parents("label[for='"+this.escapeCssMeta(h)+"']").length===0&&(e=r.attr("id"),f?f.match(new RegExp("\\b"+this.escapeCssMeta(e)+"\\b"))||(f+=" "+e):f=e,n(t).attr("aria-describedby",f),s=this.groups[t.name],s&&(o=this,n.each(o.groups,function(t,i){i===s&&n("[name='"+o.escapeCssMeta(t)+"']",o.currentForm).attr("aria-describedby",r.attr("id"))}))));!i&&this.settings.success&&(r.text(""),typeof this.settings.success=="string"?r.addClass(this.settings.success):this.settings.success(r,t));this.toShow=this.toShow.add(r)},errorsFor:function(t){var r=this.escapeCssMeta(this.idOrName(t)),u=n(t).attr("aria-describedby"),i="label[for='"+r+"'], label[for='"+r+"'] *";return u&&(i=i+", #"+this.escapeCssMeta(u).replace(/\s+/g,", #")),this.errors().filter(i)},escapeCssMeta:function(n){return n.replace(/([\\!"#$%&'()*+,./:;<=>?@\[\]^`{|}~])/g,"\\$1")},idOrName:function(n){return this.groups[n.name]||(this.checkable(n)?n.name:n.id||n.name)},validationTargetFor:function(t){return this.checkable(t)&&(t=this.findByName(t.name)),n(t).not(this.settings.ignore)[0]},checkable:function(n){return/radio|checkbox/i.test(n.type)},findByName:function(t){return n(this.currentForm).find("[name='"+this.escapeCssMeta(t)+"']")},getLength:function(t,i){switch(i.nodeName.toLowerCase()){case"select":return n("option:selected",i).length;case"input":if(this.checkable(i))return this.findByName(i.name).filter(":checked").length}return t.length},depend:function(n,t){return this.dependTypes[typeof n]?this.dependTypes[typeof n](n,t):!0},dependTypes:{boolean:function(n){return n},string:function(t,i){return!!n(t,i.form).length},"function":function(n,t){return n(t)}},optional:function(t){var i=this.elementValue(t);return!n.validator.methods.required.call(this,i,t)&&"dependency-mismatch"},startRequest:function(t){this.pending[t.name]||(this.pendingRequest++,n(t).addClass(this.settings.pendingClass),this.pending[t.name]=!0)},stopRequest:function(t,i){this.pendingRequest--;this.pendingRequest<0&&(this.pendingRequest=0);delete this.pending[t.name];n(t).removeClass(this.settings.pendingClass);i&&this.pendingRequest===0&&this.formSubmitted&&this.form()?(n(this.currentForm).submit(),this.submitButton&&n("input:hidden[name='"+this.submitButton.name+"']",this.currentForm).remove(),this.formSubmitted=!1):!i&&this.pendingRequest===0&&this.formSubmitted&&(n(this.currentForm).triggerHandler("invalid-form",[this]),this.formSubmitted=!1)},previousValue:function(t,i){return i=typeof i=="string"&&i||"remote",n.data(t,"previousValue")||n.data(t,"previousValue",{old:null,valid:!0,message:this.defaultMessage(t,{method:i})})},destroy:function(){this.resetForm();n(this.currentForm).off(".validate").removeData("validator").find(".validate-equalTo-blur").off(".validate-equalTo").removeClass("validate-equalTo-blur")}},classRuleSettings:{required:{required:!0},email:{email:!0},url:{url:!0},date:{date:!0},dateISO:{dateISO:!0},number:{number:!0},digits:{digits:!0},creditcard:{creditcard:!0}},addClassRules:function(t,i){t.constructor===String?this.classRuleSettings[t]=i:n.extend(this.classRuleSettings,t)},classRules:function(t){var i={},r=n(t).attr("class");return r&&n.each(r.split(" "),function(){this in n.validator.classRuleSettings&&n.extend(i,n.validator.classRuleSettings[this])}),i},normalizeAttributeRule:function(n,t,i,r){/min|max|step/.test(i)&&(t===null||/number|range|text/.test(t))&&(r=Number(r),isNaN(r)&&(r=undefined));r||r===0?n[i]=r:t===i&&t!=="range"&&(n[i]=!0)},attributeRules:function(t){var r={},f=n(t),e=t.getAttribute("type"),u,i;for(u in n.validator.methods)u==="required"?(i=t.getAttribute(u),i===""&&(i=!0),i=!!i):i=f.attr(u),this.normalizeAttributeRule(r,e,u,i);return r.maxlength&&/-1|2147483647|524288/.test(r.maxlength)&&delete r.maxlength,r},dataRules:function(t){var r={},f=n(t),e=t.getAttribute("type"),i,u;for(i in n.validator.methods)u=f.data("rule"+i.charAt(0).toUpperCase()+i.substring(1).toLowerCase()),this.normalizeAttributeRule(r,e,i,u);return r},staticRules:function(t){var i={},r=n.data(t.form,"validator");return r.settings.rules&&(i=n.validator.normalizeRule(r.settings.rules[t.name])||{}),i},normalizeRules:function(t,i){return n.each(t,function(r,u){if(u===!1){delete t[r];return}if(u.param||u.depends){var f=!0;switch(typeof u.depends){case"string":f=!!n(u.depends,i.form).length;break;case"function":f=u.depends.call(i,i)}f?t[r]=u.param!==undefined?u.param:!0:(n.data(i.form,"validator").resetElements(n(i)),delete t[r])}}),n.each(t,function(r,u){t[r]=n.isFunction(u)&&r!=="normalizer"?u(i):u}),n.each(["minlength","maxlength"],function(){t[this]&&(t[this]=Number(t[this]))}),n.each(["rangelength","range"],function(){var i;t[this]&&(n.isArray(t[this])?t[this]=[Number(t[this][0]),Number(t[this][1])]:typeof t[this]=="string"&&(i=t[this].replace(/[\[\]]/g,"").split(/[\s,]+/),t[this]=[Number(i[0]),Number(i[1])]))}),n.validator.autoCreateRanges&&(t.min!=null&&t.max!=null&&(t.range=[t.min,t.max],delete t.min,delete t.max),t.minlength!=null&&t.maxlength!=null&&(t.rangelength=[t.minlength,t.maxlength],delete t.minlength,delete t.maxlength)),t},normalizeRule:function(t){if(typeof t=="string"){var i={};n.each(t.split(/\s/),function(){i[this]=!0});t=i}return t},addMethod:function(t,i,r){n.validator.methods[t]=i;n.validator.messages[t]=r!==undefined?r:n.validator.messages[t];i.length<3&&n.validator.addClassRules(t,n.validator.normalizeRule(t))},methods:{required:function(t,i,r){if(!this.depend(r,i))return"dependency-mismatch";if(i.nodeName.toLowerCase()==="select"){var u=n(i).val();return u&&u.length>0}return this.checkable(i)?this.getLength(t,i)>0:t.length>0},email:function(n,t){return this.optional(t)||/^[a-zA-Z0-9.!#$%&'*+\/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/.test(n)},url:function(n,t){return this.optional(t)||/^(?:(?:(?:https?|ftp):)?\/\/)(?:\S+(?::\S*)?@)?(?:(?!(?:10|127)(?:\.\d{1,3}){3})(?!(?:169\.254|192\.168)(?:\.\d{1,3}){2})(?!172\.(?:1[6-9]|2\d|3[0-1])(?:\.\d{1,3}){2})(?:[1-9]\d?|1\d\d|2[01]\d|22[0-3])(?:\.(?:1?\d{1,2}|2[0-4]\d|25[0-5])){2}(?:\.(?:[1-9]\d?|1\d\d|2[0-4]\d|25[0-4]))|(?:(?:[a-z\u00a1-\uffff0-9]-*)*[a-z\u00a1-\uffff0-9]+)(?:\.(?:[a-z\u00a1-\uffff0-9]-*)*[a-z\u00a1-\uffff0-9]+)*(?:\.(?:[a-z\u00a1-\uffff]{2,})).?)(?::\d{2,5})?(?:[/?#]\S*)?$/i.test(n)},date:function(n,t){return this.optional(t)||!/Invalid|NaN/.test(new Date(n).toString())},dateISO:function(n,t){return this.optional(t)||/^\d{4}[\/\-](0?[1-9]|1[012])[\/\-](0?[1-9]|[12][0-9]|3[01])$/.test(n)},number:function(n,t){return this.optional(t)||/^(?:-?\d+|-?\d{1,3}(?:,\d{3})+)?(?:\.\d+)?$/.test(n)},digits:function(n,t){return this.optional(t)||/^\d+$/.test(n)},minlength:function(t,i,r){var u=n.isArray(t)?t.length:this.getLength(t,i);return this.optional(i)||u>=r},maxlength:function(t,i,r){var u=n.isArray(t)?t.length:this.getLength(t,i);return this.optional(i)||u<=r},rangelength:function(t,i,r){var u=n.isArray(t)?t.length:this.getLength(t,i);return this.optional(i)||u>=r[0]&&u<=r[1]},min:function(n,t,i){return this.optional(t)||n>=i},max:function(n,t,i){return this.optional(t)||n<=i},range:function(n,t,i){return this.optional(t)||n>=i[0]&&n<=i[1]},step:function(t,i,r){var u=n(i).attr("type"),h="Step attribute on input type "+u+" is not supported.",c=new RegExp("\\b"+u+"\\b"),l=u&&!c.test("text,number,range"),e=function(n){var t=(""+n).match(/(?:\.(\d+))?$/);return t?t[1]?t[1].length:0:0},o=function(n){return Math.round(n*Math.pow(10,f))},s=!0,f;if(l)throw new Error(h);return f=e(r),(e(t)>f||o(t)%o(r)!=0)&&(s=!1),this.optional(i)||s},equalTo:function(t,i,r){var u=n(r);if(this.settings.onfocusout&&u.not(".validate-equalTo-blur").length)u.addClass("validate-equalTo-blur").on("blur.validate-equalTo",function(){n(i).valid()});return t===u.val()},remote:function(t,i,r,u){if(this.optional(i))return"dependency-mismatch";u=typeof u=="string"&&u||"remote";var e=this.previousValue(i,u),f,o,s;return(this.settings.messages[i.name]||(this.settings.messages[i.name]={}),e.originalMessage=e.originalMessage||this.settings.messages[i.name][u],this.settings.messages[i.name][u]=e.message,r=typeof r=="string"&&{url:r}||r,s=n.param(n.extend({data:t},r.data)),e.old===s)?e.valid:(e.old=s,f=this,this.startRequest(i),o={},o[i.name]=t,n.ajax(n.extend(!0,{mode:"abort",port:"validate"+i.name,dataType:"json",data:o,context:f.currentForm,success:function(n){var r=n===!0||n==="true",o,s,h;f.settings.messages[i.name][u]=e.originalMessage;r?(h=f.formSubmitted,f.resetInternals(),f.toHide=f.errorsFor(i),f.formSubmitted=h,f.successList.push(i),f.invalid[i.name]=!1,f.showErrors()):(o={},s=n||f.defaultMessage(i,{method:u,parameters:t}),o[i.name]=e.message=s,f.invalid[i.name]=!0,f.showErrors(o));e.valid=r;f.stopRequest(i,r)}},r)),"pending")}}});var t={},i;return n.ajaxPrefilter?n.ajaxPrefilter(function(n,i,r){var u=n.port;n.mode==="abort"&&(t[u]&&t[u].abort(),t[u]=r)}):(i=n.ajax,n.ajax=function(r){var f=("mode"in r?r:n.ajaxSettings).mode,u=("port"in r?r:n.ajaxSettings).port;return f==="abort"?(t[u]&&t[u].abort(),t[u]=i.apply(this,arguments),t[u]):i.apply(this,arguments)}),n}),function(n){typeof define=="function"&&define.amd?define("jquery.validate.unobtrusive",["jquery-validation"],n):typeof module=="object"&&module.exports?module.exports=n(require("jquery-validation")):jQuery.validator.unobtrusive=n(jQuery)}(function(n){function i(n,t,i){n.rules[t]=i;n.message&&(n.messages[t]=n.message)}function h(n){return n.replace(/^\s+|\s+$/g,"").split(/\s*,\s*/g)}function f(n){return n.replace(/([!"#$%&'()*+,./:;<=>?@\[\\\]^`{|}~])/g,"\\$1")}function e(n){return n.substr(0,n.lastIndexOf(".")+1)}function o(n,t){return n.indexOf("*.")===0&&(n=n.replace("*.",t)),n}function c(t,i){var r=n(this).find("[data-valmsg-for='"+f(i[0].name)+"']"),u=r.attr("data-valmsg-replace"),e=u?n.parseJSON(u)!==!1:null;r.removeClass("field-validation-valid").addClass("field-validation-error");t.data("unobtrusiveContainer",r);e?(r.empty(),t.removeClass("input-validation-error").appendTo(r)):t.hide()}function l(t,i){var u=n(this).find("[data-valmsg-summary=true]"),r=u.find("ul");r&&r.length&&i.errorList.length&&(r.empty(),u.addClass("validation-summary-errors").removeClass("validation-summary-valid"),n.each(i.errorList,function(){n("<li />").html(this.message).appendTo(r)}))}function a(t){var i=t.data("unobtrusiveContainer"),r,u;i&&(r=i.attr("data-valmsg-replace"),u=r?n.parseJSON(r):null,i.addClass("field-validation-valid").removeClass("field-validation-error"),t.removeData("unobtrusiveContainer"),u&&i.empty())}function v(){var t=n(this),i="__jquery_unobtrusive_validation_form_reset";if(!t.data(i)){t.data(i,!0);try{t.data("validator").resetForm()}finally{t.removeData(i)}t.find(".validation-summary-errors").addClass("validation-summary-valid").removeClass("validation-summary-errors");t.find(".field-validation-error").addClass("field-validation-valid").removeClass("field-validation-error").removeData("unobtrusiveContainer").find(">*").removeData("unobtrusiveContainer")}}function s(t){var i=n(t),f=i.data(u),s=n.proxy(v,t),e=r.unobtrusive.options||{},o=function(i,r){var u=e[i];u&&n.isFunction(u)&&u.apply(t,r)};return f||(f={options:{errorClass:e.errorClass||"input-validation-error",errorElement:e.errorElement||"span",errorPlacement:function(){c.apply(t,arguments);o("errorPlacement",arguments)},invalidHandler:function(){l.apply(t,arguments);o("invalidHandler",arguments)},messages:{},rules:{},success:function(){a.apply(t,arguments);o("success",arguments)}},attachValidation:function(){i.off("reset."+u,s).on("reset."+u,s).validate(this.options)},validate:function(){return i.validate(),i.valid()}},i.data(u,f)),f}var r=n.validator,t,u="unobtrusiveValidation";return r.unobtrusive={adapters:[],parseElement:function(t,i){var u=n(t),f=u.parents("form")[0],r,e,o;f&&(r=s(f),r.options.rules[t.name]=e={},r.options.messages[t.name]=o={},n.each(this.adapters,function(){var i="data-val-"+this.name,r=u.attr(i),s={};r!==undefined&&(i+="-",n.each(this.params,function(){s[this]=u.attr(i+this)}),this.adapt({element:t,form:f,message:r,params:s,rules:e,messages:o}))}),n.extend(e,{__dummy__:!0}),i||r.attachValidation())},parse:function(t){var i=n(t),u=i.parents().addBack().filter("form").add(i.find("form")).has("[data-val=true]");i.find("[data-val=true]").each(function(){r.unobtrusive.parseElement(this,!0)});u.each(function(){var n=s(this);n&&n.attachValidation()})}},t=r.unobtrusive.adapters,t.add=function(n,t,i){return i||(i=t,t=[]),this.push({name:n,params:t,adapt:i}),this},t.addBool=function(n,t){return this.add(n,function(r){i(r,t||n,!0)})},t.addMinMax=function(n,t,r,u,f,e){return this.add(n,[f||"min",e||"max"],function(n){var f=n.params.min,e=n.params.max;f&&e?i(n,u,[f,e]):f?i(n,t,f):e&&i(n,r,e)})},t.addSingleVal=function(n,t,r){return this.add(n,[t||"val"],function(u){i(u,r||n,u.params[t])})},r.addMethod("__dummy__",function(){return!0}),r.addMethod("regex",function(n,t,i){var r;return this.optional(t)?!0:(r=new RegExp(i).exec(n),r&&r.index===0&&r[0].length===n.length)}),r.addMethod("nonalphamin",function(n,t,i){var r;return i&&(r=n.match(/\W/g),r=r&&r.length>=i),r}),r.methods.extension?(t.addSingleVal("accept","mimtype"),t.addSingleVal("extension","extension")):t.addSingleVal("extension","extension","accept"),t.addSingleVal("regex","pattern"),t.addBool("creditcard").addBool("date").addBool("digits").addBool("email").addBool("number").addBool("url"),t.addMinMax("length","minlength","maxlength","rangelength").addMinMax("range","min","max","range"),t.addMinMax("minlength","minlength").addMinMax("maxlength","minlength","maxlength"),t.add("equalto",["other"],function(t){var r=e(t.element.name),u=t.params.other,s=o(u,r),h=n(t.form).find(":input").filter("[name='"+f(s)+"']")[0];i(t,"equalTo",h)}),t.add("required",function(n){(n.element.tagName.toUpperCase()!=="INPUT"||n.element.type.toUpperCase()!=="CHECKBOX")&&i(n,"required",!0)}),t.add("remote",["url","type","additionalfields"],function(t){var r={url:t.params.url,type:t.params.type||"GET",data:{}},u=e(t.element.name);n.each(h(t.params.additionalfields||t.element.name),function(i,e){var s=o(e,u);r.data[s]=function(){var i=n(t.form).find(":input").filter("[name='"+f(s)+"']");return i.is(":checkbox")?i.filter(":checked").val()||i.filter(":hidden").val()||"":i.is(":radio")?i.filter(":checked").val()||"":i.val()}});i(t,"remote",r)}),t.add("password",["min","nonalphamin","regex"],function(n){n.params.min&&i(n,"minlength",n.params.min);n.params.nonalphamin&&i(n,"nonalphamin",n.params.nonalphamin);n.params.regex&&i(n,"regex",n.params.regex)}),t.add("fileextensions",["extensions"],function(n){i(n,"extension",n.params.extensions)}),n(function(){r.unobtrusive.parse(document)}),r.unobtrusive}),function(n,t){function i(t,i,u){var f=[];return(t.reduction||t).filter(n.validity.settings.elementSupport).each(function(){i(this)?f.push(this):s(this,r(u,{field:h(this)}))}),t.reduction=n(f),t}function e(){n.validity.isValidating()&&(n.validity.report.errors++,n.validity.report.valid=!1)}function s(t,i){e();n.validity.out.raise(n(t),i)}function u(t,i){e();n.validity.out.raiseAggregate(t,i)}function f(n){var t=0;return n.each(function(){var n=parseFloat(this.value);t+=isNaN(n)?0:n}),t}function r(n,t){for(var i in t)t.hasOwnProperty(i)&&(n=n.replace(RegExp("#\\{"+i+"\\}","g"),t[i]));return o(n)}function h(t){var t=n(t),i=t.prop("id"),r=n.validity.settings.defaultFieldName;if(t.prop("title").length)r=t.prop("title");else if(/^([A-Z0-9][a-z]*)+$/.test(i))r=i.replace(/([A-Z0-9])[a-z]*/g," $&");else if(/^[a-z0-9]+(_[a-z0-9]+)*$/.test(i)){for(t=i.split("_"),i=0;i<t.length;++i)t[i]=o(t[i]);r=t.join(" ")}return n.trim(r)}function o(n){return n.substring?n.substring(0,1).toUpperCase()+n.substring(1,n.length):n}var c;n.validity={settings:n.extend({outputMode:"tooltip",scrollTo:!1,modalErrorsClickable:!0,defaultFieldName:"This field",elementSupport:":text, :password, textarea, select, :radio, :checkbox, input[type='hidden'], input[type='tel'], input[type='email']",argToString:function(n){return n.getDate?[n.getMonth()+1,n.getDate(),n.getFullYear()].join("/"):n+""},debugPrivates:!1},{}),patterns:{integer:/^\d+$/,date:/^((0?\d)|(1[012]))[\/-]([012]?\d|30|31)[\/-]\d{1,4}$/,email:/^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?$/i,usd:/^\$?((\d{1,3}(,\d{3})*)|\d+)(\.(\d{2})?)?$/,url:/^(https?|ftp):\/\/(((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:)*@)?(((\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5]))|((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?)(:\d*)?)(\/((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)+(\/(([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)*)*)?)?(\?((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|[\uE000-\uF8FF]|\/|\?)*)?(\#((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|\/|\?)*)?$/i,number:/^[+-]?(\d+(\.\d*)?|\.\d+)([Ee]-?\d+)?$/,zip:/^\d{5}(-\d{4})?$/,phone:/^[2-9]\d{2}-\d{3}-\d{4}$/,guid:/^(\{?([0-9a-fA-F]){8}-(([0-9a-fA-F]){4}-){3}([0-9a-fA-F]){12}\}?)$/,time12:/^((0?\d)|(1[012])):[0-5]\d?\s?[aApP]\.?[mM]\.?$/,time24:/^(20|21|22|23|[01]\d|\d)(([:][0-5]\d){1,2})$/,nonHtml:/^[^<>]*$/},messages:{require:"#{field} is required.",match:"#{field} is in an invalid format.",integer:"#{field} must be a positive, whole number.",date:"#{field} must be formatted as a date. (mm/dd/yyyy)",email:"#{field} must be formatted as an email.",usd:"#{field} must be formatted as a US Dollar amount.",url:"#{field} must be formatted as a URL.",number:"#{field} must be formatted as a number.",zip:"#{field} must be formatted as a zipcode ##### or #####-####.",phone:"#{field} must be formatted as a phone number ###-###-####.",guid:"#{field} must be formatted as a guid like {3F2504E0-4F89-11D3-9A0C-0305E82C3301}.",time24:"#{field} must be formatted as a 24 hour time: 23:00.",time12:"#{field} must be formatted as a 12 hour time: 12:00 AM/PM",lessThan:"#{field} must be less than #{max}.",lessThanOrEqualTo:"#{field} must be less than or equal to #{max}.",greaterThan:"#{field} must be greater than #{min}.",greaterThanOrEqualTo:"#{field} must be greater than or equal to #{min}.",range:"#{field} must be between #{min} and #{max}.",tooLong:"#{field} cannot be longer than #{max} characters.",tooShort:"#{field} cannot be shorter than #{min} characters.",nonHtml:"#{field} cannot contain HTML characters.",alphabet:"#{field} contains disallowed characters.",minCharClass:"#{field} cannot have more than #{min} #{charClass} characters.",maxCharClass:"#{field} cannot have less than #{min} #{charClass} characters.",equal:"Values don't match.",distinct:"A value was repeated.",sum:"Values don't add to #{sum}.",sumMax:"The sum of the values must be less than #{max}.",sumMin:"The sum of the values must be greater than #{min}.",radioChecked:"The selected value is not valid.",generic:"Invalid."},out:{start:function(){this.defer("start")},end:function(n){this.defer("end",n)},raise:function(n,t){this.defer("raise",n,t)},raiseAggregate:function(n,t){this.defer("raiseAggregate",n,t)},defer:function(t){var i=n.validity,i=i.outputs[i.settings.outputMode];i[t].apply(i,Array.prototype.slice.call(arguments,1))}},charClasses:{alphabetical:/\w/g,numeric:/\d/g,alphanumeric:/[A-Za-z0-9]/g,symbol:/[^A-Za-z0-9]/g},outputs:{},__private:t,setup:function(i){this.settings=n.extend(this.settings,i);this.__private=this.settings.debugPrivates?c:t},report:null,isValidating:function(){return!!this.report},start:function(){this.out.start();this.report={errors:0,valid:!0}},end:function(){var n=this.report||{errors:0,valid:!0};return this.report=null,this.out.end(n),n},clear:function(){this.start();this.end()}};n.fn.extend({validity:function(t){return this.each(function(){var r=this,i;this.tagName.toLowerCase()=="form"&&(i=null,typeof t=="string"?i=function(){n(t).require()}:n.isFunction(t)&&(i=t),t&&n(this).bind("submit",function(){return n.validity.start(),i.apply(r),n.validity.end().valid}))})},require:function(t){return i(this,function(t){return n(t).val()?n(t).val()!=null&&!!n(t).val().length:!1},t||n.validity.messages.require)},match:function(t,r){return r||(r=n.validity.messages.match,typeof t=="string"&&n.validity.messages[t]&&(r=n.validity.messages[t])),typeof t=="string"&&(t=n.validity.patterns[t]),i(this,n.isFunction(t)?function(n){return!n.value.length||t(n.value)}:function(n){return t.global&&(t.lastIndex=0),!n.value.length||t.test(n.value)},r)},range:function(t,u,f){return i(this,t.getTime&&u.getTime?function(n){return n=new Date(n.value),n>=new Date(t)&&n<=new Date(u)}:t.substring&&u.substring&&Big?function(n){return n=new Big(n.value),n.greaterThanOrEqualTo(new Big(t))&&n.lessThanOrEqualTo(new Big(u))}:function(n){return n=parseFloat(n.value),n>=t&&n<=u},f||r(n.validity.messages.range,{min:n.validity.settings.argToString(t),max:n.validity.settings.argToString(u)}))},greaterThan:function(t,u){return i(this,t.getTime?function(n){return new Date(n.value)>t}:t.substring&&Big?function(n){return new Big(n.value).greaterThan(new Big(t))}:function(n){return parseFloat(n.value)>t},u||r(n.validity.messages.greaterThan,{min:n.validity.settings.argToString(t)}))},greaterThanOrEqualTo:function(t,u){return i(this,t.getTime?function(n){return new Date(n.value)>=t}:t.substring&&Big?function(n){return new Big(n.value).greaterThanOrEqualTo(new Big(t))}:function(n){return parseFloat(n.value)>=t},u||r(n.validity.messages.greaterThanOrEqualTo,{min:n.validity.settings.argToString(t)}))},lessThan:function(t,u){return i(this,t.getTime?function(n){return new Date(n.value)<t}:t.substring&&Big?function(n){return new Big(n.value).lessThan(new Big(t))}:function(n){return parseFloat(n.value)<t},u||r(n.validity.messages.lessThan,{max:n.validity.settings.argToString(t)}))},lessThanOrEqualTo:function(t,u){return i(this,t.getTime?function(n){return new Date(n.value)<=t}:t.substring&&Big?function(n){return new Big(n.value).lessThanOrEqualTo(new Big(t))}:function(n){return parseFloat(n.value)<=t},u||r(n.validity.messages.lessThanOrEqualTo,{max:n.validity.settings.argToString(t)}))},maxLength:function(t,u){return i(this,function(n){return n.value.length<=t},u||r(n.validity.messages.tooLong,{max:t}))},minLength:function(t,u){return i(this,function(n){return n.value.length>=t},u||r(n.validity.messages.tooShort,{min:t}))},alphabet:function(t,u){var f=[];return i(this,function(n){for(var i=0;i<n.value.length;++i)if(t.indexOf(n.value.charAt(i))==-1)return f.push(n.value.charAt(i)),!1;return!0},u||r(n.validity.messages.alphabet,{chars:f.join(", ")}))},minCharClass:function(t,u,f){return typeof t=="string"&&(t=t.toLowerCase(),n.validity.charClasses[t]&&(t=n.validity.charClasses[t])),i(this,function(n){return(n.value.match(t)||[]).length>=u},f||r(n.validity.messages.minCharClass,{min:u,charClass:t}))},maxCharClass:function(t,u,f){return typeof t=="string"&&(t=t.toLowerCase(),n.validity.charClasses[t]&&(t=n.validity.charClasses[t])),i(this,function(n){return(n.value.match(t)||[]).length<=u},f||r(n.validity.messages.maxCharClass,{max:u,charClass:t}))},nonHtml:function(t){return i(this,function(t){return n.validity.patterns.nonHtml.test(t.value)},t||n.validity.messages.nonHtml)},equal:function(t,i){var r=(this.reduction||this).filter(n.validity.settings.elementSupport),o=function(n){return n},f=n.validity.messages.equal;if(r.length){n.isFunction(t)?(o=t,typeof i=="string"&&(f=i)):typeof t=="string"&&(f=t);var e=n.map(r,function(n){return o(n.value)}),h=e[0],s=!0;for(var c in e)e[c]!=h&&(s=!1);s||(u(r,f),this.reduction=n([]))}return this},distinct:function(t,i){var c=(this.reduction||this).filter(n.validity.settings.elementSupport),a=function(n){return n},l=n.validity.messages.distinct,r=[],o=[],s=!0,e,f,h;if(c.length){for(n.isFunction(t)?(a=t,typeof i=="string"&&(l=i)):typeof t=="string"&&(l=t),e=n.map(c,function(n){return a(n.value)}),f=0;f<e.length;++f)if(e[f].length){for(h=0;h<r.length;++h)r[h]==e[f]&&(s=!1,o.push(e[f]));r.push(e[f])}if(!s){for(o=n.unique(o),r=0,s=o.length;r<s;++r)u(c.filter("[value='"+o[r]+"']"),l);this.reduction=n([])}}return this},sum:function(t,i){var e=(this.reduction||this).filter(n.validity.settings.elementSupport);return e.length&&t!=f(e)&&(u(e,i||r(n.validity.messages.sum,{sum:t})),this.reduction=n([])),this},sumMax:function(t,i){var e=(this.reduction||this).filter(n.validity.settings.elementSupport);return e.length&&t<f(e)&&(u(e,i||r(n.validity.messages.sumMax,{max:t})),this.reduction=n([])),this},sumMin:function(t,i){var e=(this.reduction||this).filter(n.validity.settings.elementSupport);return e.length&&t>f(e)&&(u(e,i||r(n.validity.messages.sumMin,{min:t})),this.reduction=n([])),this},radioChecked:function(t,i){var r=(this.reduction||this).filter(n.validity.settings.elementSupport);r.is(":radio")&&r.find(":checked").val()!=t&&u(r,i||n.validity.messages.radioChecked)},radioNotChecked:function(t,i){var r=(this.reduction||this).filter(n.validity.settings.elementSupport);r.is(":radio")&&r.filter(":checked").val()==t&&u(r,i||n.validity.messages.radioChecked)},checkboxChecked:function(t){return i(this,function(t){return!n(t).is(":checkbox")||n(t).is(":checked")},t||n.validity.messages.nonHtml)},assert:function(t,r){var f=this.reduction||this;if(f.length){if(n.isFunction(t))return i(this,t,r||n.validity.messages.generic);t||(u(f,r||n.validity.messages.generic),this.reduction=n([]))}return this},fail:function(n){return this.assert(!1,n)}});c={validate:i,addToReport:e,raiseError:s,raiseAggregateError:u,numericSum:f,format:r,infer:h,capitalize:o}}(jQuery),function(n){n.validity.outputs.tooltip={tooltipClass:"validity-tooltip",start:function(){n("."+n.validity.outputs.tooltip.tooltipClass).remove()},end:function(t){!t.valid&&n.validity.settings.scrollTo&&n(document).scrollTop(n("."+n.validity.outputs.tooltip.tooltipClass).offset().top)},raise:function(t,i){var r=t.offset(),u;if(r.left+=t.width()+18,r.top+=8,u=n('<div class="validity-tooltip">'+i+'<div class="validity-tooltip-outer"><div class="validity-tooltip-inner"><\/div><\/div><\/div>').click(function(){t.focus();n(this).fadeOut()}).css(r).hide().appendTo("body").fadeIn(),n.validity.settings.fadeOutTooltipsOnFocus)t.on("focus",function(){u.fadeOut()})},raiseAggregate:function(n,t){n.length&&this.raise(n.filter(":last"),t)}}}(jQuery),function(n){function t(n){return n.attr("id").length?n.attr("id"):n.attr("name")}n.validity.outputs.label={cssClass:"error",start:function(){n("."+n.validity.outputs.label.cssClass).remove()},end:function(t){!t.valid&&n.validity.settings.scrollTo&&(location.hash=n("."+n.validity.outputs.label.cssClass+":eq(0)").attr("for"))},raise:function(i,r){var u="."+n.validity.outputs.label.cssClass+"[for='"+t(i)+"']";n(u).length?n(u).text(r):n("<label/>").attr("for",t(i)).addClass(n.validity.outputs.label.cssClass).text(r).click(function(){i.length&&i[0].select()}).insertAfter(i)},raiseAggregate:function(t,i){t.length&&this.raise(n(t.get(t.length-1)),i)}}}(jQuery),function(n){n.validity.outputs.modal={start:function(){n(".validity-modal-msg").remove()},end:function(t){!t.valid&&n.validity.settings.scrollTo&&(location.hash=n(".validity-modal-msg:eq(0)").attr("id"))},raise:function(t,i){if(t.length){var r=t.offset();t.get(0);r={left:parseInt(r.left+t.width()+4,10)+"px",top:parseInt(r.top-10,10)+"px"};n("<div/>").addClass("validity-modal-msg").css(r).text(i).click(n.validity.settings.modalErrorsClickable?function(){n(this).remove()}:null).appendTo("body")}},raiseAggregate:function(t,i){t.length&&this.raise(n(t.get(t.length-1)),i)}}}(jQuery),function(n){var t=[];n.validity.outputs.summary={start:function(){n(".validity-erroneous").removeClass("validity-erroneous");t=[]},end:function(){if(n(".validity-summary-container").stop().hide().find("ul").html(""),t.length){for(var i=0;i<t.length;++i)n("<li/>").text(t[i]).appendTo(".validity-summary-container ul");n(".validity-summary-container").show();n.validity.settings.scrollTo&&(location.hash=n(".validity-erroneous:eq(0)").attr("id"))}},raise:function(n,i){t.push(i);n.addClass("validity-erroneous")},raiseAggregate:function(n,t){this.raise(n,t)},container:function(){document.write('<div class="validity-summary-container">The form didn\'t submit for the following reason(s):<ul><\/ul><\/div>')}}}(jQuery),function(n,t,i,r){var u=n(t);n.fn.lazyload=function(f){function s(){var t=0;o.each(function(){var i=n(this);if((!e.skip_invisible||i.is(":visible"))&&!n.abovethetop(this,e)&&!n.leftofbegin(this,e))if(n.belowthefold(this,e)||n.rightoffold(this,e)){if(++t>e.failure_limit)return!1}else i.trigger("appear"),t=0})}var o=this,h,e={threshold:0,failure_limit:0,event:"scroll",effect:"show",container:t,data_attribute:"original",skip_invisible:!0,appear:null,load:null};return f&&(r!==f.failurelimit&&(f.failure_limit=f.failurelimit,delete f.failurelimit),r!==f.effectspeed&&(f.effect_speed=f.effectspeed,delete f.effectspeed),n.extend(e,f)),h=e.container===r||e.container===t?u:n(e.container),0===e.event.indexOf("scroll")&&h.bind(e.event,function(){return s()}),this.each(function(){var t=this,i=n(t);t.loaded=!1;i.one("appear",function(){if(!this.loaded){if(e.appear){var r=o.length;e.appear.call(t,r,e)}n("<img />").bind("load",function(){var r,u;i.hide().attr("src",i.data(e.data_attribute))[e.effect](e.effect_speed);t.loaded=!0;r=n.grep(o,function(n){return!n.loaded});o=n(r);e.load&&(u=o.length,e.load.call(t,u,e))}).attr("src",i.data(e.data_attribute))}});0!==e.event.indexOf("scroll")&&i.bind(e.event,function(){t.loaded||i.trigger("appear")})}),u.bind("resize",function(){s()}),/iphone|ipod|ipad.*os 5/gi.test(navigator.appVersion)&&u.bind("pageshow",function(t){t.originalEvent&&t.originalEvent.persisted&&o.each(function(){n(this).trigger("appear")})}),n(i).ready(function(){s()}),this};n.belowthefold=function(i,f){var e;return e=f.container===r||f.container===t?u.height()+u.scrollTop():n(f.container).offset().top+n(f.container).height(),e<=n(i).offset().top-f.threshold};n.rightoffold=function(i,f){var e;return e=f.container===r||f.container===t?u.width()+u.scrollLeft():n(f.container).offset().left+n(f.container).width(),e<=n(i).offset().left-f.threshold};n.abovethetop=function(i,f){var e;return e=f.container===r||f.container===t?u.scrollTop():n(f.container).offset().top,e>=n(i).offset().top+f.threshold+n(i).height()};n.leftofbegin=function(i,f){var e;return e=f.container===r||f.container===t?u.scrollLeft():n(f.container).offset().left,e>=n(i).offset().left+f.threshold+n(i).width()};n.inviewport=function(t,i){return!n.rightoffold(t,i)&&!n.leftofbegin(t,i)&&!n.belowthefold(t,i)&&!n.abovethetop(t,i)};n.extend(n.expr[":"],{"below-the-fold":function(t){return n.belowthefold(t,{threshold:0})},"above-the-top":function(t){return!n.belowthefold(t,{threshold:0})},"right-of-screen":function(t){return n.rightoffold(t,{threshold:0})},"left-of-screen":function(t){return!n.rightoffold(t,{threshold:0})},"in-viewport":function(t){return n.inviewport(t,{threshold:0})},"above-the-fold":function(t){return!n.belowthefold(t,{threshold:0})},"right-of-fold":function(t){return n.rightoffold(t,{threshold:0})},"left-of-fold":function(t){return!n.rightoffold(t,{threshold:0})}})}(jQuery,window,document);
/*!
* TableSorter 2.17.8 min - Client-side table sorting with ease!
* Copyright (c) 2007 Christian Bach
*/
!function(n){n.extend({tablesorter:new function(){function i(){var n=arguments[0],t=1<arguments.length?Array.prototype.slice.call(arguments):n;"undefined"!=typeof console&&"undefined"!=typeof console.log?console[/error/i.test(n)?"error":/warn/i.test(n)?"warn":"log"](t):alert(t)}function r(n,t){i(n+" ("+((new Date).getTime()-t.getTime())+"ms)")}function f(n){for(var t in n)return!1;return!0}function u(i,r,u){if(!r)return"";var e,o=i.config,f=o.textExtraction||"",s="",s="basic"===f?n(r).attr(o.textAttribute)||r.textContent||r.innerText||n(r).text()||"":"function"==typeof f?f(r,i,u):"function"==typeof(e=t.getColumnData(i,f,u))?e(r,i,u):r.textContent||r.innerText||n(r).text()||"";return n.trim(s)}function o(n){var w,v,f=n.config,nt=f.$tbodies=f.$table.children("tbody:not(."+f.cssInfoBlock+")"),b,tt,e,s,h,c,o,a,it,y=0,k="",d=nt.length;if(0===d)return f.debug?i("Warning: *Empty table!* Not building a parser cache"):"";for(f.debug&&(it=new Date,i("Detecting parsers for each column")),w=[],v=[];y<d;){if(b=nt[y].rows,b[y])for(tt=f.columns,e=0;e<tt;e++){if(s=f.$headers.filter('[data-column="'+e+'"]:last'),h=t.getColumnData(n,f.headers,e),a=t.getParserById(t.getData(s,h,"extractor")),o=t.getParserById(t.getData(s,h,"sorter")),c="false"===t.getData(s,h,"parser"),f.empties[e]=(t.getData(s,h,"empty")||f.emptyTo||(f.emptyToBottom?"bottom":"top")).toLowerCase(),f.strings[e]=(t.getData(s,h,"string")||f.stringTo||"max").toLowerCase(),c&&(o=t.getParserById("no-parser")),a||(a=!1),!o)n:{s=n;h=b;c=-1;o=e;for(var l=void 0,rt=t.parsers.length,g=!1,p="",l=!0;""===p&&l;)c++,h[c]?(g=h[c].cells[o],p=u(s,g,o),s.config.debug&&i("Checking if value was empty on row "+c+", column: "+o+': "'+p+'"')):l=!1;for(;0<=--rt;)if((l=t.parsers[rt])&&"text"!==l.id&&l.is&&l.is(p,s,g)){o=l;break n}o=t.getParserById("text")}f.debug&&(k+="column:"+e+"; extractor:"+a.id+"; parser:"+o.id+"; string:"+f.strings[e]+"; empty: "+f.empties[e]+"\n");v[e]=o;w[e]=a}y+=v.length?d:1}f.debug&&(i(k?k:"No parsers detected"),r("Completed detecting parsers",it));f.parsers=v;f.extractors=w}function e(f){var l,s,a,o,c,h,w,d,k,v,b,e=f.config,y=e.$table.children("tbody"),g=e.extractors,p=e.parsers;if(e.cache={},e.totalRows=0,!p)return e.debug?i("Warning: *Empty table!* Not building a cache"):"";for(e.debug&&(d=new Date),e.showProcessing&&t.isProcessing(f,!0),c=0;c<y.length;c++)if(b=[],l=e.cache[c]={normalized:[]},!y.eq(c).hasClass(e.cssInfoBlock)){for(k=y[c]&&y[c].rows.length||0,a=0;a<k;++a)if(v={child:[]},h=n(y[c].rows[a]),w=[],h.hasClass(e.cssChildRow)&&0!==a)s=l.normalized.length-1,l.normalized[s][e.columns].$row=l.normalized[s][e.columns].$row.add(h),h.prev().hasClass(e.cssChildRow)||h.prev().addClass(t.css.cssHasChild),v.child[s]=n.trim(h[0].textContent||h[0].innerText||h.text()||"");else{for(v.$row=h,v.order=a,o=0;o<e.columns;++o)"undefined"==typeof p[o]?e.debug&&i("No parser found for cell:",h[0].cells[o],"does it have a header?"):(s=u(f,h[0].cells[o],o),s="undefined"==typeof g[o].id?s:g[o].format(s,f,h[0].cells[o],o),s="no-parser"===p[o].id?"":p[o].format(s,f,h[0].cells[o],o),w.push(e.ignoreCase&&"string"==typeof s?s.toLowerCase():s),"numeric"===(p[o].type||"").toLowerCase()&&(b[o]=Math.max(Math.abs(s)||0,b[o]||0)));w[e.columns]=v;l.normalized.push(w)}l.colMax=b;e.totalRows+=l.normalized.length}e.showProcessing&&t.isProcessing(f);e.debug&&r("Building cache for "+k+" rows",d)}function s(i,u){var e=i.config,w=e.widgetOptions,a=i.tBodies,c=[],v=e.cache,o,y,l,s,h,p;if(f(v))return e.appender?e.appender(i,c):i.isUpdating?e.$table.trigger("updateComplete",i):"";for(e.debug&&(p=new Date),h=0;h<a.length;h++)if(o=n(a[h]),o.length&&!o.hasClass(e.cssInfoBlock)){for(l=t.processTbody(i,o,!0),o=v[h].normalized,y=o.length,s=0;s<y;s++)c.push(o[s][e.columns].$row),e.appender&&(!e.pager||e.pager.removeRows&&w.pager_removeRows||e.pager.ajax)||l.append(o[s][e.columns].$row);t.processTbody(i,l,!1)}e.appender&&e.appender(i,c);e.debug&&r("Rebuilt table",p);u||e.appender||t.applyWidget(i);i.isUpdating&&e.$table.trigger("updateComplete",i)}function y(n){return/^d/i.test(n)||1===n}function p(u){var h,e,c,a,o,s,v,f=u.config;f.headerList=[];f.headerContent=[];f.debug&&(v=new Date);f.columns=t.computeColumnIndex(f.$table.children("thead, tfoot").children("tr"));a=f.cssIcon?'<i class="'+(f.cssIcon===t.css.icon?t.css.icon:f.cssIcon+" "+t.css.icon)+'"><\/i>':"";f.$headers=n(u).find(f.selectorHeaders).each(function(i){e=n(this);h=t.getColumnData(u,f.headers,i,!0);f.headerContent[i]=n(this).html();""!==f.headerTemplate&&(o=f.headerTemplate.replace(/\{content\}/g,n(this).html()).replace(/\{icon\}/g,a),f.onRenderTemplate&&(c=f.onRenderTemplate.apply(e,[i,o]))&&"string"==typeof c&&(o=c),n(this).html('<div class="'+t.css.headerIn+'">'+o+"<\/div>"));f.onRenderHeader&&f.onRenderHeader.apply(e,[i]);this.column=parseInt(n(this).attr("data-column"),10);this.order=y(t.getData(e,h,"sortInitialOrder")||f.sortInitialOrder)?[1,0,2]:[0,1,2];this.count=-1;this.lockedOrder=!1;s=t.getData(e,h,"lockedOrder")||!1;"undefined"!=typeof s&&!1!==s&&(this.order=this.lockedOrder=y(s)?[1,1,1]:[0,0,0]);e.addClass(t.css.header+" "+f.cssHeader);f.headerList[i]=this;e.parent().addClass(t.css.headerRow+" "+f.cssHeaderRow).attr("role","row");f.tabIndex&&e.attr("tabindex",0)}).attr({scope:"col",role:"columnheader"});l(u);f.debug&&(r("Built headers:",v),i(f.$headers))}function c(n,t,i){var r=n.config;r.$table.find(r.selectorRemove).remove();o(n);e(n);v(r.$table,t,i)}function l(i){var r,u,f,e=i.config;e.$headers.each(function(o,s){u=n(s);f=t.getColumnData(i,e.headers,o,!0);r="false"===t.getData(s,f,"sorter")||"false"===t.getData(s,f,"parser");s.sortDisabled=r;u[r?"addClass":"removeClass"]("sorter-false").attr("aria-disabled",""+r);i.id&&(r?u.removeAttr("aria-controls"):u.attr("aria-controls",i.id))})}function h(i){var r,e,u=i.config,f=u.sortList,h=f.length,s=t.css.sortNone+" "+u.cssNone,o=[t.css.sortAsc+" "+u.cssAsc,t.css.sortDesc+" "+u.cssDesc],l=["ascending","descending"],c=n(i).find("tfoot tr").children().add(u.$extraHeaders).removeClass(o.join(" "));for(u.$headers.removeClass(o.join(" ")).addClass(s).attr("aria-sort","none"),r=0;r<h;r++)if(2!==f[r][1]&&(i=u.$headers.not(".sorter-false").filter('[data-column="'+f[r][0]+'"]'+(1===h?":last":"")),i.length)){for(e=0;e<i.length;e++)i[e].sortDisabled||i.eq(e).removeClass(s).addClass(o[f[r][1]]).attr("aria-sort",l[f[r][1]]);c.length&&c.filter('[data-column="'+f[r][0]+'"]').removeClass(s).addClass(o[f[r][1]])}u.$headers.not(".sorter-false").each(function(){var i=n(this),r=this.order[(this.count+1)%(u.sortReset?3:2)],r=i.text()+": "+t.language[i.hasClass(t.css.sortAsc)?"sortAsc":i.hasClass(t.css.sortDesc)?"sortDesc":"sortNone"]+t.language[0===r?"nextAsc":1===r?"nextDesc":"nextNone"];i.attr("aria-label",r)})}function d(t){var r,u,i=t.config;i.widthFixed&&0===i.$table.find("colgroup").length&&(r=n("<colgroup>"),u=n(t).width(),n(t.tBodies).not("."+i.cssInfoBlock).find("tr:first").children(":visible").each(function(){r.append(n("<col>").css("width",parseInt(n(this).width()/u*1e3,10)/10+"%"))}),i.$table.prepend(r))}function g(t,i){var u,r,f,s,o,e=t.config,h=i||e.sortList;e.sortList=[];n.each(h,function(t,i){if(s=parseInt(i[0],10),f=e.$headers.filter('[data-column="'+s+'"]:last')[0]){r=(r=(""+i[1]).match(/^(1|d|s|o|n)/))?r[0]:"";switch(r){case"1":case"d":r=1;break;case"s":r=o||0;break;case"o":u=f.order[(o||0)%(e.sortReset?3:2)];r=0===u?1:1===u?0:2;break;case"n":f.count+=1;r=f.order[f.count%(e.sortReset?3:2)];break;default:r=0}o=0===t?r:o;u=[s,parseInt(r,10)||0];e.sortList.push(u);r=n.inArray(u[1],f.order);f.count=0<=r?r:u[1]%(e.sortReset?3:2)}})}function nt(n,t){return n&&n[t]?n[t].type||"":""}function w(i,r,u){if(i.isUpdating)return setTimeout(function(){w(i,r,u)},50);var o,c,e,l,f=i.config,y=!u[f.sortMultiSortKey],v=f.$table;if(v.trigger("sortStart",i),r.count=u[f.sortResetKey]?2:(r.count+1)%(f.sortReset?3:2),f.sortRestart&&(c=r,f.$headers.each(function(){this===c||!y&&n(this).is("."+t.css.sortDesc+",."+t.css.sortAsc)||(this.count=-1)})),c=r.column,y){if(f.sortList=[],null!==f.sortForce)for(o=f.sortForce,e=0;e<o.length;e++)o[e][0]!==c&&f.sortList.push(o[e]);if(o=r.order[r.count],2>o&&(f.sortList.push([c,o]),1<r.colSpan))for(e=1;e<r.colSpan;e++)f.sortList.push([c+e,o])}else{if(f.sortAppend&&1<f.sortList.length)for(e=0;e<f.sortAppend.length;e++)l=t.isValueInArray(f.sortAppend[e][0],f.sortList),0<=l&&f.sortList.splice(l,1);if(0<=t.isValueInArray(c,f.sortList))for(e=0;e<f.sortList.length;e++)l=f.sortList[e],o=f.$headers.filter('[data-column="'+l[0]+'"]:last')[0],l[0]===c&&(l[1]=o.order[r.count],2===l[1]&&(f.sortList.splice(e,1),o.count=-1));else if(o=r.order[r.count],2>o&&(f.sortList.push([c,o]),1<r.colSpan))for(e=1;e<r.colSpan;e++)f.sortList.push([c+e,o])}if(null!==f.sortAppend)for(o=f.sortAppend,e=0;e<o.length;e++)o[e][0]!==c&&f.sortList.push(o[e]);v.trigger("sortBegin",i);setTimeout(function(){h(i);a(i);s(i);v.trigger("sortEnd",i)},1)}function a(n){var o,s,a,i,b,v,k,y,c,p,w,e=0,u=n.config,h=u.textSorter||"",l=u.sortList,d=l.length,g=n.tBodies.length;if(!u.serverSideSorting&&!f(u.cache)){for(u.debug&&(b=new Date),s=0;s<g;s++)v=u.cache[s].colMax,k=u.cache[s].normalized,k.sort(function(r,f){for(o=0;o<d;o++){if(i=l[o][0],y=l[o][1],e=0===y,u.sortStable&&r[i]===f[i]&&1===d)break;if((a=/n/i.test(nt(u.parsers,i)))&&u.strings[i]?(a="boolean"==typeof u.string[u.strings[i]]?(e?1:-1)*(u.string[u.strings[i]]?-1:1):u.strings[i]?u.string[u.strings[i]]||0:0,c=u.numberSorter?u.numberSorter(r[i],f[i],e,v[i],n):t["sortNumeric"+(e?"Asc":"Desc")](r[i],f[i],a,v[i],i,n)):(p=e?r:f,w=e?f:r,c="function"==typeof h?h(p[i],w[i],e,i,n):"object"==typeof h&&h.hasOwnProperty(i)?h[i](p[i],w[i],e,i,n):t["sortNatural"+(e?"Asc":"Desc")](r[i],f[i],i,n,u)),c)return c}return r[u.columns].order-f[u.columns].order});u.debug&&r("Sorting on "+l.toString()+" and dir "+y+" time",b)}}function b(t,i){var r=t[0];r.isUpdating&&t.trigger("updateComplete",r);n.isFunction(i)&&i(t[0])}function v(n,i,r){var u=n[0].config.sortList;!1!==i&&!n[0].isProcessing&&u.length?n.trigger("sorton",[u,function(){b(n,r)},!0]):(b(n,r),t.applyWidget(n[0],!1))}function k(i){var r=i.config,y=r.$table;y.unbind("sortReset update updateRows updateCell updateAll addRows updateComplete sorton appendCache updateCache applyWidgetId applyWidgets refreshWidgets destroy mouseup mouseleave ".split(" ").join(r.namespace+" ")).bind("sortReset"+r.namespace,function(t,u){t.stopPropagation();r.sortList=[];h(i);a(i);s(i);n.isFunction(u)&&u(i)}).bind("updateAll"+r.namespace,function(n,u,f){n.stopPropagation();i.isUpdating=!0;t.refreshWidgets(i,!0,!0);t.restoreHeaders(i);p(i);t.bindEvents(i,r.$headers,!0);k(i);c(i,u,f)}).bind("update"+r.namespace+" updateRows"+r.namespace,function(n,t,r){n.stopPropagation();i.isUpdating=!0;l(i);c(i,t,r)}).bind("updateCell"+r.namespace,function(t,f,e,o){t.stopPropagation();i.isUpdating=!0;y.find(r.selectorRemove).remove();var c,h,s;h=y.find("tbody");s=n(f);t=h.index(n.fn.closest?s.closest("tbody"):s.parents("tbody").filter(":first"));c=n.fn.closest?s.closest("tr"):s.parents("tr").filter(":first");f=s[0];h.length&&0<=t&&(h=h.eq(t).find("tr").index(c),s=s.index(),r.cache[t].normalized[h][r.columns].$row=c,c="undefined"==typeof r.extractors[s].id?u(i,f,s):r.extractors[s].format(u(i,f,s),i,f,s),f="no-parser"===r.parsers[s].id?"":r.parsers[s].format(c,i,f,s),r.cache[t].normalized[h][s]=r.ignoreCase&&"string"==typeof f?f.toLowerCase():f,"numeric"===(r.parsers[s].type||"").toLowerCase()&&(r.cache[t].colMax[s]=Math.max(Math.abs(f)||0,r.cache[t].colMax[s]||0)),v(y,e,o))}).bind("addRows"+r.namespace,function(t,e,s,h){if(t.stopPropagation(),i.isUpdating=!0,f(r.cache))l(i),c(i,s,h);else{e=n(e).attr("role","row");var a,k,p,d,w,g=e.filter("tr").length,b=y.find("tbody").index(e.parents("tbody").filter(":first"));for(r.parsers&&r.parsers.length||o(i),t=0;t<g;t++){for(k=e[t].cells.length,w=[],d={child:[],$row:e.eq(t),order:r.cache[b].normalized.length},a=0;a<k;a++)p="undefined"==typeof r.extractors[a].id?u(i,e[t].cells[a],a):r.extractors[a].format(u(i,e[t].cells[a],a),i,e[t].cells[a],a),p="no-parser"===r.parsers[a].id?"":r.parsers[a].format(p,i,e[t].cells[a],a),w[a]=r.ignoreCase&&"string"==typeof p?p.toLowerCase():p,"numeric"===(r.parsers[a].type||"").toLowerCase()&&(r.cache[b].colMax[a]=Math.max(Math.abs(w[a])||0,r.cache[b].colMax[a]||0));w.push(d);r.cache[b].normalized.push(w)}v(y,s,h)}}).bind("updateComplete"+r.namespace,function(){i.isUpdating=!1}).bind("sorton"+r.namespace,function(r,u,o,c){var l=i.config;r.stopPropagation();y.trigger("sortStart",this);g(i,u);h(i);l.delayInit&&f(l.cache)&&e(i);y.trigger("sortBegin",this);a(i);s(i,c);y.trigger("sortEnd",this);t.applyWidget(i);n.isFunction(o)&&o(i)}).bind("appendCache"+r.namespace,function(t,r,u){t.stopPropagation();s(i,u);n.isFunction(r)&&r(i)}).bind("updateCache"+r.namespace,function(t,u){r.parsers&&r.parsers.length||o(i);e(i);n.isFunction(u)&&u(i)}).bind("applyWidgetId"+r.namespace,function(n,u){n.stopPropagation();t.getWidgetById(u).format(i,r,r.widgetOptions)}).bind("applyWidgets"+r.namespace,function(n,r){n.stopPropagation();t.applyWidget(i,r)}).bind("refreshWidgets"+r.namespace,function(n,r,u){n.stopPropagation();t.refreshWidgets(i,r,u)}).bind("destroy"+r.namespace,function(n,r,u){n.stopPropagation();t.destroy(i,r,u)}).bind("resetToLoadState"+r.namespace,function(){t.refreshWidgets(i,!0,!0);r=n.extend(!0,t.defaults,r.originalSettings);i.hasInitialized=!1;t.setup(i,r)})}var t=this;t.version="2.17.8";t.parsers=[];t.widgets=[];t.defaults={theme:"default",widthFixed:!1,showProcessing:!1,headerTemplate:"{content}",onRenderTemplate:null,onRenderHeader:null,cancelSelection:!0,tabIndex:!0,dateFormat:"mmddyyyy",sortMultiSortKey:"shiftKey",sortResetKey:"ctrlKey",usNumberFormat:!0,delayInit:!1,serverSideSorting:!1,headers:{},ignoreCase:!0,sortForce:null,sortList:[],sortAppend:null,sortStable:!1,sortInitialOrder:"asc",sortLocaleCompare:!1,sortReset:!1,sortRestart:!1,emptyTo:"bottom",stringTo:"max",textExtraction:"basic",textAttribute:"data-text",textSorter:null,numberSorter:null,widgets:[],widgetOptions:{zebra:["even","odd"]},initWidgets:!0,initialized:null,tableClass:"",cssAsc:"",cssDesc:"",cssNone:"",cssHeader:"",cssHeaderRow:"",cssProcessing:"",cssChildRow:"tablesorter-childRow",cssIcon:"tablesorter-icon",cssInfoBlock:"tablesorter-infoOnly",selectorHeaders:"> thead th, > thead td",selectorSort:"th, td",selectorRemove:".remove-me",debug:!1,headerList:[],empties:{},strings:{},parsers:[]};t.css={table:"tablesorter",cssHasChild:"tablesorter-hasChildRow",childRow:"tablesorter-childRow",header:"tablesorter-header",headerRow:"tablesorter-headerRow",headerIn:"tablesorter-header-inner",icon:"tablesorter-icon",info:"tablesorter-infoOnly",processing:"tablesorter-processing",sortAsc:"tablesorter-headerAsc",sortDesc:"tablesorter-headerDesc",sortNone:"tablesorter-headerUnSorted"};t.language={sortAsc:"Ascending sort applied, ",sortDesc:"Descending sort applied, ",sortNone:"No sort applied, ",nextAsc:"activate to apply an ascending sort",nextDesc:"activate to apply a descending sort",nextNone:"activate to remove the sort"};t.log=i;t.benchmark=r;t.construct=function(i){return this.each(function(){var r=n.extend(!0,{},t.defaults,i);r.originalSettings=i;!this.hasInitialized&&t.buildTable&&"TABLE"!==this.tagName?t.buildTable(this,r):t.setup(this,r)})};t.setup=function(r,u){if(!r||!r.tHead||0===r.tBodies.length||!0===r.hasInitialized)return u.debug?i("ERROR: stopping initialization! No table, thead, tbody or tablesorter has already been initialized"):"";var s="",f=n(r),c=n.metadata;r.hasInitialized=!1;r.isProcessing=!0;r.config=u;n.data(r,"tablesorter",u);u.debug&&n.data(r,"startoveralltimer",new Date);u.supportsDataObject=function(n){return n[0]=parseInt(n[0],10),1<n[0]||1===n[0]&&4<=parseInt(n[1],10)}(n.fn.jquery.split("."));u.string={max:1,min:-1,emptymin:1,emptymax:-1,zero:0,none:0,"null":0,top:!0,bottom:!1};u.emptyTo=u.emptyTo.toLowerCase();u.stringTo=u.stringTo.toLowerCase();/tablesorter\-/.test(f.attr("class"))||(s=""!==u.theme?" tablesorter-"+u.theme:"");u.table=r;u.$table=f.addClass(t.css.table+" "+u.tableClass+s).attr("role","grid");u.$headers=f.find(u.selectorHeaders);u.namespace=u.namespace?"."+u.namespace.replace(/\W/g,""):".tablesorter"+Math.random().toString(16).slice(2);u.$table.children().children("tr").attr("role","row");u.$tbodies=f.children("tbody:not(."+u.cssInfoBlock+")").attr({"aria-live":"polite","aria-relevant":"all"});u.$table.find("caption").length&&u.$table.attr("aria-labelledby","theCaption");u.widgetInit={};u.textExtraction=u.$table.attr("data-text-extraction")||u.textExtraction||"basic";p(r);d(r);o(r);u.totalRows=0;u.delayInit||e(r);t.bindEvents(r,u.$headers,!0);k(r);u.supportsDataObject&&"undefined"!=typeof f.data().sortlist?u.sortList=f.data().sortlist:c&&f.metadata()&&f.metadata().sortlist&&(u.sortList=f.metadata().sortlist);t.applyWidget(r,!0);0<u.sortList.length?f.trigger("sorton",[u.sortList,{},!u.initWidgets,!0]):(h(r),u.initWidgets&&t.applyWidget(r,!1));u.showProcessing&&f.unbind("sortBegin"+u.namespace+" sortEnd"+u.namespace).bind("sortBegin"+u.namespace+" sortEnd"+u.namespace,function(n){clearTimeout(u.processTimer);t.isProcessing(r);"sortBegin"===n.type&&(u.processTimer=setTimeout(function(){t.isProcessing(r,!0)},500))});r.hasInitialized=!0;r.isProcessing=!1;u.debug&&t.benchmark("Overall initialization time",n.data(r,"startoveralltimer"));f.trigger("tablesorter-initialized",r);"function"==typeof u.initialized&&u.initialized(r)};t.getColumnData=function(t,i,r,u){if("undefined"!=typeof i&&null!==i){t=n(t)[0];var f,e=t.config;if(i[r])return u?i[r]:i[e.$headers.index(e.$headers.filter('[data-column="'+r+'"]:last'))];for(f in i)if("string"==typeof f&&(t=u?e.$headers.eq(r).filter(f):e.$headers.filter('[data-column="'+r+'"]:last').filter(f),t.length))return i[f]}};t.computeColumnIndex=function(t){for(var r=[],h=0,s,i,u,c,f,l,a,e,v,o=0;o<t.length;o++)for(c=t[o].cells,s=0;s<c.length;s++){for(i=c[s],u=n(i),f=i.parentNode.rowIndex,u.index(),l=i.rowSpan||1,a=i.colSpan||1,"undefined"==typeof r[f]&&(r[f]=[]),i=0;i<r[f].length+1;i++)if("undefined"==typeof r[f][i]){e=i;break}for(h=Math.max(e,h),u.attr({"data-column":e}),i=f;i<f+l;i++)for("undefined"==typeof r[i]&&(r[i]=[]),v=r[i],u=e;u<e+a;u++)v[u]="x"}return h+1};t.isProcessing=function(i,r,u){i=n(i);var f=i[0].config,e=u||i.find("."+t.css.header);r?("undefined"!=typeof u&&0<f.sortList.length&&(e=e.filter(function(){return this.sortDisabled?!1:0<=t.isValueInArray(parseFloat(n(this).attr("data-column")),f.sortList)})),i.add(e).addClass(t.css.processing+" "+f.cssProcessing)):i.add(e).removeClass(t.css.processing+" "+f.cssProcessing)};t.processTbody=function(t,i,r){if(t=n(t)[0],r)return t.isProcessing=!0,i.before('<span class="tablesorter-savemyplace"/>'),r=n.fn.detach?i.detach():i.remove();r=n(t).find("span.tablesorter-savemyplace");i.insertAfter(r);r.remove();t.isProcessing=!1};t.clearTableBody=function(t){n(t)[0].config.$tbodies.children().detach()};t.bindEvents=function(t,i,r){t=n(t)[0];var o,u=t.config;!0!==r&&(u.$extraHeaders=u.$extraHeaders?u.$extraHeaders.add(i):i);i.find(u.selectorSort).add(i.filter(u.selectorSort)).unbind(["mousedown","mouseup","sort","keyup",""].join(u.namespace+" ")).bind(["mousedown","mouseup","sort","keyup",""].join(u.namespace+" "),function(r,s){var h;if(h=r.type,!(1!==(r.which||r.button)&&!/sort|keyup/.test(h)||"keyup"===h&&13!==r.which||"mouseup"===h&&!0!==s&&250<(new Date).getTime()-o)){if("mousedown"===h)return o=(new Date).getTime(),/(input|select|button|textarea)/i.test(r.target.tagName)?"":!u.cancelSelection;u.delayInit&&f(u.cache)&&e(t);h=n.fn.closest?n(this).closest("th, td")[0]:/TH|TD/.test(this.tagName)?this:n(this).parents("th, td")[0];h=u.$headers[i.index(h)];h.sortDisabled||w(t,h,r)}});u.cancelSelection&&i.attr("unselectable","on").bind("selectstart",!1).css({"user-select":"none",MozUserSelect:"none"})};t.restoreHeaders=function(i){var r=n(i)[0].config;r.$table.find(r.selectorHeaders).each(function(i){n(this).find("."+t.css.headerIn).length&&n(this).html(r.headerContent[i])})};t.destroy=function(i,r,u){if(i=n(i)[0],i.hasInitialized){t.refreshWidgets(i,!0,!0);var e=n(i),f=i.config,o=e.find("thead:first"),s=o.find("tr."+t.css.headerRow).removeClass(t.css.headerRow+" "+f.cssHeaderRow),h=e.find("tfoot:first > tr").children("th, td");!1===r&&0<=n.inArray("uitheme",f.widgets)&&(e.trigger("applyWidgetId",["uitheme"]),e.trigger("applyWidgetId",["zebra"]));o.find("tr").not(s).remove();e.removeData("tablesorter").unbind("sortReset update updateAll updateRows updateCell addRows updateComplete sorton appendCache updateCache applyWidgetId applyWidgets refreshWidgets destroy mouseup mouseleave keypress sortBegin sortEnd resetToLoadState ".split(" ").join(f.namespace+" "));f.$headers.add(h).removeClass([t.css.header,f.cssHeader,f.cssAsc,f.cssDesc,t.css.sortAsc,t.css.sortDesc,t.css.sortNone].join(" ")).removeAttr("data-column").removeAttr("aria-label").attr("aria-disabled","true");s.find(f.selectorSort).unbind(["mousedown","mouseup","keypress",""].join(f.namespace+" "));t.restoreHeaders(i);e.toggleClass(t.css.table+" "+f.tableClass+" tablesorter-"+f.theme,!1===r);i.hasInitialized=!1;delete i.config.cache;"function"==typeof u&&u(i)}};t.regex={chunk:/(^([+\-]?(?:0|[1-9]\d*)(?:\.\d*)?(?:[eE][+\-]?\d+)?)?$|^0x[0-9a-f]+$|\d+)/gi,chunks:/(^\\0|\\0$)/,hex:/^0x[0-9a-f]+$/i};t.sortNatural=function(n,i){if(n===i)return 0;var e,r,u,o,f,s;if(r=t.regex,r.hex.test(i)){if(e=parseInt(n.match(r.hex),16),u=parseInt(i.match(r.hex),16),e<u)return-1;if(e>u)return 1}for(e=n.replace(r.chunk,"\\0$1\\0").replace(r.chunks,"").split("\\0"),r=i.replace(r.chunk,"\\0$1\\0").replace(r.chunks,"").split("\\0"),s=Math.max(e.length,r.length),f=0;f<s;f++){if(u=isNaN(e[f])?e[f]||0:parseFloat(e[f])||0,o=isNaN(r[f])?r[f]||0:parseFloat(r[f])||0,isNaN(u)!==isNaN(o))return isNaN(u)?1:-1;if(typeof u!=typeof o&&(u+="",o+=""),u<o)return-1;if(u>o)return 1}return 0};t.sortNaturalAsc=function(n,i,r,u,f){return n===i?0:(r=f.string[f.empties[r]||f.emptyTo],""===n&&0!==r?"boolean"==typeof r?r?-1:1:-r||-1:""===i&&0!==r?"boolean"==typeof r?r?1:-1:r||1:t.sortNatural(n,i))};t.sortNaturalDesc=function(n,i,r,u,f){return n===i?0:(r=f.string[f.empties[r]||f.emptyTo],""===n&&0!==r?"boolean"==typeof r?r?-1:1:r||1:""===i&&0!==r?"boolean"==typeof r?r?1:-1:-r||-1:t.sortNatural(i,n))};t.sortText=function(n,t){return n>t?1:n<t?-1:0};t.getTextValue=function(n,t,i){if(i){var u=n?n.length:0,r=i+t;for(i=0;i<u;i++)r+=n.charCodeAt(i);return t*r}return 0};t.sortNumericAsc=function(n,i,r,u,f,e){return n===i?0:(e=e.config,f=e.string[e.empties[f]||e.emptyTo],""===n&&0!==f)?"boolean"==typeof f?f?-1:1:-f||-1:""===i&&0!==f?"boolean"==typeof f?f?1:-1:f||1:(isNaN(n)&&(n=t.getTextValue(n,r,u)),isNaN(i)&&(i=t.getTextValue(i,r,u)),n-i)};t.sortNumericDesc=function(n,i,r,u,f,e){return n===i?0:(e=e.config,f=e.string[e.empties[f]||e.emptyTo],""===n&&0!==f)?"boolean"==typeof f?f?-1:1:f||1:""===i&&0!==f?"boolean"==typeof f?f?1:-1:-f||-1:(isNaN(n)&&(n=t.getTextValue(n,r,u)),isNaN(i)&&(i=t.getTextValue(i,r,u)),i-n)};t.sortNumeric=function(n,t){return n-t};t.characterEquivalents={a:"áàâãäąå",A:"ÁÀÂÃÄĄÅ",c:"çćč",C:"ÇĆČ",e:"éèêëěę",E:"ÉÈÊËĚĘ",i:"íìİîïı",I:"ÍÌİÎÏ",o:"óòôõö",O:"ÓÒÔÕÖ",ss:"ß",SS:"ẞ",u:"úùûüů",U:"ÚÙÛÜŮ"};t.replaceAccents=function(n){var i,u="[",r=t.characterEquivalents;if(!t.characterRegex){t.characterRegexArray={};for(i in r)"string"==typeof i&&(u+=r[i],t.characterRegexArray[i]=new RegExp("["+r[i]+"]","g"));t.characterRegex=new RegExp(u+"]")}if(t.characterRegex.test(n))for(i in r)"string"==typeof i&&(n=n.replace(t.characterRegexArray[i],i));return n};t.isValueInArray=function(n,t){for(var r=t.length,i=0;i<r;i++)if(t[i][0]===n)return i;return-1};t.addParser=function(n){for(var u=t.parsers.length,r=!0,i=0;i<u;i++)t.parsers[i].id.toLowerCase()===n.id.toLowerCase()&&(r=!1);r&&t.parsers.push(n)};t.getParserById=function(n){if("false"==n)return!1;for(var r=t.parsers.length,i=0;i<r;i++)if(t.parsers[i].id.toLowerCase()===n.toString().toLowerCase())return t.parsers[i];return!1};t.addWidget=function(n){t.widgets.push(n)};t.hasWidget=function(t,i){return t=n(t),t.length&&t[0].config&&t[0].config.widgetInit[i]||!1};t.getWidgetById=function(n){for(var r,u=t.widgets.length,i=0;i<u;i++)if((r=t.widgets[i])&&r.hasOwnProperty("id")&&r.id.toLowerCase()===n.toLowerCase())return r};t.applyWidget=function(i,u){i=n(i)[0];var f=i.config,o=f.widgetOptions,s=[],c,h,e;!1!==u&&i.hasInitialized&&(i.isApplyingWidgets||i.isUpdating)||(f.debug&&(c=new Date),f.widgets.length&&(i.isApplyingWidgets=!0,f.widgets=n.grep(f.widgets,function(t,i){return n.inArray(t,f.widgets)===i}),n.each(f.widgets||[],function(n,i){(e=t.getWidgetById(i))&&e.id&&(e.priority||(e.priority=10),s[n]=e)}),s.sort(function(n,t){return n.priority<t.priority?-1:n.priority===t.priority?0:1}),n.each(s,function(t,r){r&&((u||!f.widgetInit[r.id])&&(f.widgetInit[r.id]=!0,r.hasOwnProperty("options")&&(o=i.config.widgetOptions=n.extend(!0,{},r.options,o)),r.hasOwnProperty("init")&&r.init(i,r,f,o)),!u&&r.hasOwnProperty("format")&&r.format(i,f,o,!1))})),setTimeout(function(){i.isApplyingWidgets=!1},0),f.debug&&(h=f.widgets.length,r("Completed "+(!0===u?"initializing ":"applying ")+h+" widget"+(1!==h?"s":""),c)))};t.refreshWidgets=function(r,u,f){r=n(r)[0];for(var s=r.config,h=s.widgets,o=t.widgets,c=o.length,e=0;e<c;e++)o[e]&&o[e].id&&(u||0>n.inArray(o[e].id,h))&&(s.debug&&i('Refeshing widgets: Removing "'+o[e].id+'"'),o[e].hasOwnProperty("remove")&&s.widgetInit[o[e].id]&&(o[e].remove(r,s,s.widgetOptions),s.widgetInit[o[e].id]=!1));!0!==f&&t.applyWidget(r,u)};t.getData=function(t,i,r){var u="",f,e;return(t=n(t),!t.length)?"":(f=n.metadata?t.metadata():!1,e=" "+(t.attr("class")||""),"undefined"!=typeof t.data(r)||"undefined"!=typeof t.data(r.toLowerCase())?u+=t.data(r)||t.data(r.toLowerCase()):f&&"undefined"!=typeof f[r]?u+=f[r]:i&&"undefined"!=typeof i[r]?u+=i[r]:" "!==e&&e.match(" "+r+"-")&&(u=e.match(new RegExp("\\s"+r+"-([\\w-]+)"))[1]||""),n.trim(u))};t.formatFloat=function(t,i){if("string"!=typeof t||""===t)return t;var r;return t=(i&&i.config?!1!==i.config.usNumberFormat:"undefined"!=typeof i?i:1)?t.replace(/,/g,""):t.replace(/[\s|\.]/g,"").replace(/,/g,"."),/^\s*\([.\d]+\)/.test(t)&&(t=t.replace(/^\s*\(([.\d]+)\)/,"-$1")),r=parseFloat(t),isNaN(r)?n.trim(t):r};t.isDigit=function(n){return isNaN(n)?/^[\-+(]?\d+[)]?$/.test(n.toString().replace(/[,.'"\s]/g,"")):!0}}});var t=n.tablesorter;n.fn.extend({tablesorter:t.construct});t.addParser({id:"no-parser",is:function(){return!1},format:function(){return""},type:"text"});t.addParser({id:"text",is:function(){return!0},format:function(i,r){var u=r.config;return i&&(i=n.trim(u.ignoreCase?i.toLocaleLowerCase():i),i=u.sortLocaleCompare?t.replaceAccents(i):i),i},type:"text"});t.addParser({id:"digit",is:function(n){return t.isDigit(n)},format:function(i,r){var u=t.formatFloat((i||"").replace(/[^\w,. \-()]/g,""),r);return i&&"number"==typeof u?u:i?n.trim(i&&r.config.ignoreCase?i.toLocaleLowerCase():i):i},type:"numeric"});t.addParser({id:"currency",is:function(n){return/^\(?\d+[\u00a3$\u20ac\u00a4\u00a5\u00a2?.]|[\u00a3$\u20ac\u00a4\u00a5\u00a2?.]\d+\)?$/.test((n||"").replace(/[+\-,. ]/g,""))},format:function(i,r){var u=t.formatFloat((i||"").replace(/[^\w,. \-()]/g,""),r);return i&&"number"==typeof u?u:i?n.trim(i&&r.config.ignoreCase?i.toLocaleLowerCase():i):i},type:"numeric"});t.addParser({id:"ipAddress",is:function(n){return/^\d{1,3}[\.]\d{1,3}[\.]\d{1,3}[\.]\d{1,3}$/.test(n)},format:function(n,i){for(var u=n?n.split("."):"",f="",e=u.length,r=0;r<e;r++)f+=("00"+u[r]).slice(-3);return n?t.formatFloat(f,i):n},type:"numeric"});t.addParser({id:"url",is:function(n){return/^(https?|ftp|file):\/\//.test(n)},format:function(t){return t?n.trim(t.replace(/(https?|ftp|file):\/\//,"")):t},parsed:!0,type:"text"});t.addParser({id:"isoDate",is:function(n){return/^\d{4}[\/\-]\d{1,2}[\/\-]\d{1,2}/.test(n)},format:function(n,i){return n?t.formatFloat(""!==n?new Date(n.replace(/-/g,"/")).getTime()||n:"",i):n},type:"numeric"});t.addParser({id:"percent",is:function(n){return/(\d\s*?%|%\s*?\d)/.test(n)&&15>n.length},format:function(n,i){return n?t.formatFloat(n.replace(/%/g,""),i):n},type:"numeric"});t.addParser({id:"usLongDate",is:function(n){return/^[A-Z]{3,10}\.?\s+\d{1,2},?\s+(\d{4})(\s+\d{1,2}:\d{2}(:\d{2})?(\s+[AP]M)?)?$/i.test(n)||/^\d{1,2}\s+[A-Z]{3,10}\s+\d{4}/i.test(n)},format:function(n,i){return n?t.formatFloat(new Date(n.replace(/(\S)([AP]M)$/i,"$1 $2")).getTime()||n,i):n},type:"numeric"});t.addParser({id:"shortDate",is:function(n){return/(^\d{1,2}[\/\s]\d{1,2}[\/\s]\d{4})|(^\d{4}[\/\s]\d{1,2}[\/\s]\d{1,2})/.test((n||"").replace(/\s+/g," ").replace(/[\-.,]/g,"/"))},format:function(n,i,r,u){if(n){r=i.config;var f=r.$headers.filter("[data-column="+u+"]:last");u=f.length&&f[0].dateFormat||t.getData(f,t.getColumnData(i,r.headers,u),"dateFormat")||r.dateFormat;n=n.replace(/\s+/g," ").replace(/[\-.,]/g,"/");"mmddyyyy"===u?n=n.replace(/(\d{1,2})[\/\s](\d{1,2})[\/\s](\d{4})/,"$3/$1/$2"):"ddmmyyyy"===u?n=n.replace(/(\d{1,2})[\/\s](\d{1,2})[\/\s](\d{4})/,"$3/$2/$1"):"yyyymmdd"===u&&(n=n.replace(/(\d{4})[\/\s](\d{1,2})[\/\s](\d{1,2})/,"$1/$2/$3"))}return n?t.formatFloat(new Date(n).getTime()||n,i):n},type:"numeric"});t.addParser({id:"time",is:function(n){return/^(([0-2]?\d:[0-5]\d)|([0-1]?\d:[0-5]\d\s?([AP]M)))$/i.test(n)},format:function(n,i){return n?t.formatFloat(new Date("2000/01/01 "+n.replace(/(\S)([AP]M)$/i,"$1 $2")).getTime()||n,i):n},type:"numeric"});t.addParser({id:"metadata",is:function(){return!1},format:function(t,i,r){return t=i.config,t=t.parserMetadataName?t.parserMetadataName:"sortValue",n(r).metadata()[t]},type:"numeric"});t.addWidget({id:"zebra",priority:90,format:function(i,r,u){var f,s,e,o,h,l=new RegExp(r.cssChildRow,"i"),c=r.$tbodies;for(r.debug&&(h=new Date),i=0;i<c.length;i++)e=0,f=c.eq(i),f=f.children("tr:visible").not(r.selectorRemove),f.each(function(){s=n(this);l.test(this.className)||e++;o=0==e%2;s.removeClass(u.zebra[o?1:0]).addClass(u.zebra[o?0:1])});r.debug&&t.benchmark("Applying Zebra widget",h)},remove:function(t,i,r){var u,f;for(i=i.$tbodies,f=(r.zebra||["even","odd"]).join(" "),r=0;r<i.length;r++)u=n.tablesorter.processTbody(t,i.eq(r),!0),u.children().removeClass(f),n.tablesorter.processTbody(t,u,!1)}})}(jQuery);SCM=SCM||{};SCM.Common=function(){function n(n,t){var r,u=t+"=",i=n.indexOf(u),f;return i===-1?null:(i=i+u.length,n.indexOf("&",i)>=0?(f=n.indexOf("&",i),r=n.substring(i,f)):r=n.substring(i),r)}function t(n){return typeof n!="undefined"&&n!==undefined&&n!=null}return{getQueryStringValue:n,isDefined:t}}();SCM=SCM||{};SCM.QueryBuilder={};SCM.QueryBuilder.defaults={runSearch:function(n){window.location.hash="#"+n},beforeSearch:function(){}};SCM.QueryBuilder.configure=function(){function h(n,t){$(".sort-order-list").addClass("hide");t.stopPropagation();var i=n.find(u);u.not(i).addClass("hide");i.hasClass("hide")?i.removeClass("hide"):i.addClass("hide")}function c(t){var f=t.closest(".querybuilder-filter-dropdown"),i,r,u;$thisLabel=t.closest(n).find(".querybuilder-filter-label");f.children(t).removeClass("selected");t.addClass("selected");$thisLabel.text(t.text());s(t);i=t.parents(".querybuilder-instance").attr("id");$("#search-errors li").each(function(){var n=$(this);n.attr("from")===i&&n.remove()});r=t.hasClass("filter-citation");r?(u=t.closest(".querybuilder-instance").attr("id"),e(u,!1)):y()}function v(){var n=null;return t.each(function(){if(!$(this).hasClass("hide")){var t=!$(this).find(f).hasClass("hide");if(t)return n=$(this).attr("id"),!1}}),n}function e(n,i){t.each(function(){var u=t.attr("id"),r=$(this).find("li[data-fieldname='Citation']");(u!==n||n===null)&&(i?r.show():r.hide())})}function y(){var n=v();n!==null?e(n,!1):e(n,!0)}var r=$(".querybuilder-filter"),n=$(".querybuilder-filter-current-wrap"),u=$(".querybuilder-filter-dropdown"),o=$(".querybuilder-input-standard"),f=$(".querybuilder-input-citation"),t=$(".querybuilder-instance"),i=$(".querybuilder-add"),s=function(n){var i=n,t=i.closest(".querybuilder-instance");i.hasClass("filter-citation")?(t.find(o).addClass("hide"),t.find(f).removeClass("hide")):(t.find(f).addClass("hide"),t.find(o).removeClass("hide"))},l=function(n){var t=n,i;if(t.hasClass("citation-input")){var r=t.val().replace(/\'/g,"").trim().length,u=t.val().replace(/\'/g,"").trim().length,f=t.val().replace(/\'/g,"").trim().length,e=t.val().replace(/\'/g,"").trim().length;if(r>0||u>0||f>0||e>0)return!0;if(r===0&&u===0&&f===0&&e===0)return!1}else{if(i=t.val().replace(/\'/g,"").trim().length,i===0)return!1;if(i>0)return!0}},a=function(n){l(n)?i.addClass("valid").removeAttr("disabled"):i.removeClass("valid").attr("disabled")};(function(t){var i=0;t(".querybuilder-instance").each(function(){t(this).hasClass("hide")||i++});r.each(function(){var i=t(this);i.hasClass("selected")&&(i.closest(n).find(".querybuilder-filter-label").text(i.text()),s(i))})})(jQuery);n.off("click").on("click",function(n){h($(this),n)});n.off("keydown").keydown(function(n){var t=n.which;t==13&&h($(this),n)});$(document).on("click",function(){u.addClass("hide")});r.on("click",function(){c($(this))});r.keydown(function(n){var t=n.which;t==13&&c($(this))});$(".querybuilder-input, .citation-input").on("keyup",function(){$("#queryBuilderSubmit").addClass("btn-green").removeAttr("style");a($(this))});i.on("click",function(){var r,n,u;$(this).attr("disabled")?alert("A value must be entered before adding another filter."):(r=0,n=1,t.each(function(){$(this).hasClass("hide")||(r++,n++)}),u=$("#qbInstance"+n),u.removeClass("hide"),i.removeClass("valid").attr("disabled",""))});$(".querybuilder-submit").on("click",function(){$(this).removeClass("btn-green").attr("style","opacity: 0.3;")});$(".querybuilder-wrap").on("keyup","input.citation-input.citation-year",function(n){var t=$(n.target),i=4;t.val().length>i&&t.val(t.val().substr(0,i))});$("main").off("click").on("click",".querybuilder-submit",function(){function c(n,t){var r="",u="",i;return t.indexOf("q=")>=0?(i=SCM.Common.getQueryStringValue(t,"q"),i.startsWith("(")||(r="("),r=i.endsWith(")")?r+i.slice(0,-1)+" AND "+n+")":r+i+" AND "+n+")",u=t.replace(i,r)):u="q="+n+"&"+t,u}function a(n){return n===null||n===""||n===undefined}function v(){h.empty()}function y(n){function i(n){var t=$("<li>");return t.text(n.message),t.attr("from",n.origin),t}var t=$("<ul>");h.append(t);$.each(n,function(n,r){t.append(i(r))})}var u="",l=$("#hfCurrentSearchTerm").val(),n=$(".querybuilder-submit").attr("data-current-url"),i={},t=1,r=!1,h=$("#search-errors"),f=[],e,o,s;if(v(),$(".querybuilder-wrap .querybuilder-instance").each(function(){var e=$(this),nt=!e.hasClass("hide"),o,s,y,h,u,w,b,g;if(nt){var tt=e.find(".querybuilder-filter-dropdown li.selected").text(),v=e.find(".querybuilder-filter-dropdown li.selected").attr("data-fieldname"),p=!1;if(t===1)if(o=e.find("#instance_QueryBuilderSearchTerm").val().trim(),typeof v!="undefined"&&v!==null&&$.trim(v)!==""&&o!=="")s=SCM.Common.getQueryStringValue(n,"q"),s!==null&&s!==""?(s="q="+s+"&",n=n.replace(s,"")):i={},p=!0;else return(l!==o&&(y=n.indexOf("q="),y>=0&&n.indexOf("&",y)>=0?(h=SCM.Common.getQueryStringValue(n,"q"),h!==null&&h!==""?(h="q="+h+"&",n=n.replace(h,"q="+o+"&")):n="q="+o+"&"+n):n="q="+o),i.q=o,r=!0,o==="")?(n=n.replace("q=&",""),!0):(t++,!0);u="";switch(tt){case"":w="q"+t;u=e.find("#instance_QueryBuilderSearchTerm").val().trim();u!==""&&(u=u.replace(/^"(.*)"$/,"$1"),n=c(u,n),i[w]=u,r=!0);break;case"All":u=e.find("#instance_QueryBuilderSearchTerm").val().trim();u!==""&&(n=c(u,n),b="All"+t,(t===1&&p||t!==1)&&(i[b]=u,r=!0));break;case"Citation":var k={},d="Citation"+t;$.each([{id:"#instance_CitationYear",field:"Year",pattern:/^(?!0(0?){3})\d(\d?){3}$/,message:"The 'Year' field only accepts numbers."},{id:"#instance_CitationVolume",field:"Volume"},{id:"#instance_CitationIssueNo",field:"IssueNo"},{id:"#instance_CitationPage",field:"StartPage"}],function(n,u){var s=e.find(u.id),o=s.val().trim();a(o)||(i[d]||(i[d]=k,r=!0),u.pattern&&!u.pattern.test(o)?(s.val(""),$.inArray(u.message,f)===-1&&f.push({message:u.message,origin:"qbInstance"+t})):k[u.field]=o)});break;default:g=v+t;u=e.find("#instance_QueryBuilderSearchTerm").val().trim();u!==""&&(u=u.replace(/^"(.*)"$/,"$1"),i[g]=encodeURIComponent(u),r=!0)}}t++}),f.length>0){y(f);$("#queryBuilderSubmit").addClass("btn-green").removeAttr("style");return}e=SCM.Common.getQueryStringValue(n,"page");n=="page=1"&&(n="&page=1");e!==null&&e!==""&&(n=n.replace("page="+e+"&","page=1&"));u=n;r&&(o=JSON.stringify(i),s=SCM.Common.getQueryStringValue(n,"qb"),u=s?u.replace(s,o):u+"&qb="+o);SCM.QueryBuilder.defaults.beforeSearch();SCM.QueryBuilder.defaults.runSearch(encodeURI(u))});$(".querybuilder-input").keyup(function(n){var t=n.which,i;return t==13&&n.preventDefault(),i=$.trim($(this).val()),t===13&&i!==""?($(".querybuilder-submit").click(),!1):void 0})};String.prototype.startsWith||(String.prototype.startsWith=function(n,t){return t=t||0,this.indexOf(n,t)===t});String.prototype.endsWith||(String.prototype.endsWith=function(n,t){var i=this.toString(),r;return(typeof t!="number"||!isFinite(t)||Math.floor(t)!==t||t>i.length)&&(t=i.length),t-=n.length,r=i.lastIndexOf(n,t),r!==-1&&r===t});SCM=SCM||{};SCM.JournalCitationFilter=function(n){function at(){vt();yt();pt();wt()===!0&&lt()}function vt(){b=getQueryStringValue(location.search,a);s=getQueryStringValue(location.search,v);h=getQueryStringValue(location.search,y);c=getQueryStringValue(location.search,p);l=getQueryStringValue(location.search,w)}function yt(){t=document.getElementById("SelectedJournal");i=document.getElementById("Citation_IssuePublicationDate");r=document.getElementById("Citation_Volume");u=document.getElementById("Citation_IssueNo");f=document.getElementById("Citation_StartPage");k=isDefined(i)?i.getAttribute("pattern"):null;d=isDefined(r)?r.getAttribute("pattern"):null;g=isDefined(u)?u.getAttribute("pattern"):null;nt=isDefined(f)?f.getAttribute("pattern"):null;e=document.getElementsByClassName("js-journal-citation-filter-toggle")[0];o=document.getElementsByClassName("journal-citation-filter-input-wrap")[0]}function pt(){tt=document.getElementById("Config_PlaceholderTextJournal").value||"";it=document.getElementById("Config_PlaceholderTextYear").value||"";rt=document.getElementById("Config_PlaceholderTextVolume").value||"";ut=document.getElementById("Config_PlaceholderTextIssueNo").value||"";ft=document.getElementById("Config_PlaceholderTextStartPage").value||"";et=document.getElementById("Config_ValidationMessageJournal").value||"";ot=document.getElementById("Config_ValidationMessageYear").value||"";st=document.getElementById("Config_ValidationMessageVolume").value||"";ht=document.getElementById("Config_ValidationMessageIssueNo").value||"";ct=document.getElementById("Config_ValidationMessageStartPage").value||""}function wt(){return isDefined(b)&&isDefined(t)||isDefined(s)&&isDefined(i)||isDefined(h)&&isDefined(r)||isDefined(c)&&isDefined(u)||isDefined(l)&&isDefined(f)?(i.value=bt(s),r.value=h,u.value=c,f.value=l,!0):!1}function bt(n){if(!isDefined(n))return"";var t=decodeURIComponent(n).split("TO").map(function(n){return n.replace("+","")}),n=t.length>0?t[0]:n,i=new Date(n);return i.getUTCFullYear()}function kt(){var b=isDefined(t)&&t.options.length>0&&isDefined(t.options[t.selectedIndex])?t.options[t.selectedIndex].textContent:"",o=isDefined(i)?i.value:"",h=isDefined(r)?r.value:"",c=isDefined(u)?u.value:"",l=isDefined(f)?f.value:"",s={},e="",lt,at,vt,yt,pt,wt;return(b===tt&&b!==""?e=et+"\n":s[a]=n.trim(b),o!==it&&o!==""&&(lt=new RegExp(k),isNaN(o)||!lt.test(o)?e+=ot+"\n":(at="01/01/"+o+" TO 12/31/"+o,s[v]=at)),h!==rt&&h!==""&&(vt=new RegExp(d),vt.test(h)?s[y]=h:e+=st+"\n"),c!==ut&&c!==""&&(yt=new RegExp(g),yt.test(c)?s[p]=c:e+=ht+"\n"),l!==ft&&l!==""&&(pt=new RegExp(nt),pt.test(l)?s[w]=l:e+=ct+"\n"),e.length>0)?(alert(e),!1):(wt={queryString:jsonToQueryString(s)},SCM.SearchResults.doSolrSearch(wt),!1)}function dt(){o.className.indexOf("collapsed")!==-1?lt():gt()}function lt(){o.classList.remove("collapsed");e.className.indexOf("icon-general-arrow-filled-right")!==-1&&(e.classList.remove("icon-general-arrow-filled-right"),e.classList.add("icon-general-arrow-filled-down"))}function gt(){o.classList.add("collapsed");e.className.indexOf("icon-general-arrow-filled-down")!==-1&&(e.classList.remove("icon-general-arrow-filled-down"),e.classList.add("icon-general-arrow-filled-right"))}var a="f_JournalDisplayName",v="rg_IssuePublicationDate",y="f_Volume",p="f_IssueNo",w="f_StartPage",b=null,s=null,h=null,c=null,l=null,t=null,i=null,r=null,u=null,f=null,k=null,d=null,g=null,nt=null,e=null,o=null,tt=null,it=null,rt=null,ut=null,ft=null,et=null,ot=null,st=null,ht=null,ct=null;return{init:at,applyFilter:kt,toggleWidget:dt}}(jQuery);$(document).ready(function(){function n(){$(document).ajaxStart(function(){$(".info-inner-cover").removeClass("uncovered");$(".info-inner-cover").addClass("covered")});$(document).ajaxComplete(function(){$(".info-inner-cover").removeClass("covered");$(".info-inner-cover").addClass("uncovered")})}if($("#hfJournalCitationFilterLoaded").val()==="true"){SCM.JournalCitationFilter.init();$(document).on("click",".js-journal-citation-filter-update",function(){$(this).addClass("fade");n();SCM.JournalCitationFilter.applyFilter()});$(document).on("keyup",".js-advanced-citation-filter-field",function(t){t.keyCode==13&&(t.preventDefault(),$(".js-journal-citation-filter-update").addClass("fade"),n(),SCM.JournalCitationFilter.applyFilter())});$(document).on("click",".js-journal-citation-filter-toggle",function(){SCM.JournalCitationFilter.toggleWidget()});$(document).on("keyup change",".js-advanced-citation-filter-field",function(){$(".js-journal-citation-filter-update").removeClass("fade")})}});SCM=SCM||{};SCM.UploadImage_Complete=function(n){var i=$.extend({targetSelector:"#UploadTarget",jsonResultSelector:"#jsonResult",replacementContainerSelector:"#id"},n),u=$(i.targetSelector).contents().find(i.jsonResultSelector),t,r;u.length===1&&(t=$.parseJSON(u.html()),$("[data-valmsg-for]").attr("class","field-validation-valid").html(""),t.Success?i.success&&i.success():t.Messages.length>0?(r="Error \n",t.Messages.forEach(function(n){r+=n+"\n"}),alert(r)):t.Html?$(i.replacementContainerSelector).replaceWith(t.Html.replace(/{{/g,"&quot;")):t.ValidationErrors.forEach(function(n){var t=$("[data-valmsg-for="+n.Key+"]");t.addClass("field-validation-error").removeClass("field-validation-valid");n.Errors.forEach(function(n){t.html(t.html()+n+"<br />")})}))};SCM.AjaxHelperSuccessCallback=function(n,t,i){n.RedirectUrl&&n.RedirectUrl.length>0?window.location=n.RedirectUrl:n.Html&&n.Html.length>0?t.replaceWith(n.Html):n.Success?i():t.replaceWith(n)};SCM.AjaxHelperErrorCallback=function(n,t,i){n.RedirectUrl&&n.RedirectUrl.length>0?window.location=n.RedirectUrl:n.Html&&n.Html.length>0?t.replaceWith(n.Html):n.Success?i():t.replaceWith(n)};SCM.showModal=function(){var n=[];typeof tinyMCE!="undefined"&&tinyMCE.editors.forEach(function(t){$("#divDefaultUpdateTarget").find("#"+t.editorContainer).each(function(){n.push(t.id)})});$.fancybox({autosize:!0,autoScale:!1,title:"",href:"#divDefaultUpdateTarget"});typeof tinyMCE!="undefined"&&n.forEach(function(n){$("#"+n).scmTinyMCE()})};SCM.hideModal=function(){$.fancybox.close()};SCM.refreshModal=function(){$.fancybox.update()},function(){function i(n,t){var i=new Date(t),r=new Date(n);return i.getFullYear()==r.getFullYear()&&i.getMonth()==r.getMonth()&&i.getDate()==r.getDate()?!1:i>r?!0:!1}function r(n){return n.substr(0,n.lastIndexOf(".")+1)}function t(n,t){return n.indexOf("*.")===0&&(n=n.replace("*.",t)),n}var n=$("body");$(document).ajaxError(function(t,i){var r,u;if(n.removeClass("wait"),i.responseText)try{r=$.parseJSON(i.responseText);r.Success==null||r.Success||(u="There was an error processing the request \n",r.Messages.forEach(function(n){u+=n+"\n"}),alert(u))}catch(f){console.log("Ajax error occured, responseText is not json: "+f.message)}});$.validator.addMethod("isDateGreaterThan",function(n,t,r){return i($(t).val(),r)==!0?!1:!0},"");$(document).ajaxStart(function(){n.addClass("wait")}).ajaxStop(function(){n.removeClass("wait")});n.on("keypress","[data-default-button]",function(n){if(n.which==13)return $("#"+$(this).data("defaultButton")).click(),!1});$.validator.unobtrusive.adapters.add("dynamicrange",["minvalueproperty","maxvalueproperty"],function(n){n.rules.dynamicrange=n.params;n.message!=null&&($.validator.messages.dynamicrange=n.message)});$.validator.addMethod("dynamicrange",function(n,i,u){var s=r(i.name),f=parseInt($('input[name="'+t(u.minvalueproperty,s)+'"]').val(),10),e=parseInt($('input[name="'+t(u.maxvalueproperty,s)+'"]').val(),10),o=parseInt(n,10);return isNaN(f)||isNaN(e)||isNaN(o)||f>o||o>e?($.validator.messages.dynamicrange=$.format($(i).attr("data-val-dynamicrange"),f,e),!1):!0},"")}(),function(n){n.fn.radiobuttonEnable=function(){return this.each(function(){var t=n(this);t.find("*[data-rb-enable-name]").each(function(){var r=n(this),u=t.find('input:radio[name="'+r.data("rbEnableName")+'"]:checked'),i;u.length>0&&(i=r.data("rbEnableValue"),i!=null&&u.val().toString().toLowerCase()!=i.toString().toLowerCase()&&r.attr("disabled","disabled"),i=r.data("rbMakeVisibleValue"),i!=null&&u.val().toString().toLowerCase()!=i.toString().toLowerCase()&&r.hide())});t.find("input:radio").on("change",function(){var t=n(this),i='[data-rb-enable-name="'+t.attr("name")+'"]',r=n(i);r.each(function(){var i=n(this),u=tinymce.editors[i[0].id],r=i.data("rbEnableValue");r!=null&&(r.toString().toLowerCase()==t.val().toLowerCase()?(i.removeAttr("disabled"),u&&u.getBody().setAttribute("contenteditable",!0)):(i.attr("disabled","disabled"),u&&u.getBody().setAttribute("contenteditable",!1)));r=i.data("rbMakeVisibleValue");r!=null&&(r.toString().toLowerCase()==t.val().toLowerCase()&&!i.is(":visible")||r.toString().toLowerCase()!=t.val().toLowerCase()&&i.is(":visible"))&&i.fadeToggle()})})})};n.fn.configureSCMForm=function(t){var i=n.extend({cancelButtonSelector:".cancel",submitButtonSelector:".submit",nextQuestionButtonSelector:".nextQuestion",skipButtonSelector:".skip",validatorIgnores:":disabled, input[type='hidden']",nextQuestion:null,cancel:null,skip:null,validateOnSubmit:null,validateOnKeyUp:!1},t);return this.each(function(){var t=n(this),r;jQuery.validator.unobtrusive.parse("#"+this.id);t.validate();r=n.data(t[0],"validator").settings;r.ignore=i.validatorIgnores;i.validateOnKeyUp===!0&&(i.validateOnKeyUp=null);r.onkeyup=i.validateOnKeyUp;r.onsubmit=i.validateOnSubmit;t.find(i.submitButtonSelector).off("click.configureSCMForm").on("click.configureSCMForm",function(n){n.preventDefault();t.valid()&&t.trigger("submit")});t.find(i.nextQuestionButtonSelector).off("click.configureSCMForm").on("click.configureSCMForm",function(n){n.preventDefault();i.nextQuestion()});t.find(i.skipButtonSelector).off("click.configureSCMForm").on("click.configureSCMForm",function(n){n.preventDefault();i.skip()});t.find(i.cancelButtonSelector).off("click.configureSCMForm").on("click.configureSCMForm",function(n){n.preventDefault();i.cancel?i.cancel():(t.hide(),SCM.hideModal())})})};n.fn.viewMore=function(t){var i=n.extend({hiddenSelector:".read-more",readMoreButtonSelector:"#readMore",readMoreText:"Read More",readLessText:"Read Less"},t);return this.each(function(){var t=n(i.hiddenSelector);t.hide();n(i.readMoreButtonSelector).on("click",function(n){n.preventDefault();t.fadeToggle()})})};n.fn.scmTinyMCE=function(){return n(".mceOpen.mce_forecolor").show(),n(".mce_forecolor .mceLast .mceIconOnly").show(),n(".mceOpen.mce_backcolor").show(),n(".mceOpen.mce_backcolor .mceIconOnly").show(),this.each(function(){n(this).tinymce({gecko_spellcheck:!0,theme:"advanced",theme_advanced_buttons1:"bold,italic,underline,|,bullist,numlist,|,sub,sup,|,charmap,|,forecolor,backcolor,|,link",theme_advanced_buttons2:"",theme_advanced_buttons3:"",plugins:"inlinepopups",theme_advanced_statusbar_location:null,oninit:function(t){var i=n("#"+t.editorId+"[data-rb-enable-name]"),u=n('input:radio[name="'+i.data("rbEnableName")+'"]'),r;u.length>0&&u.val().toString().toLowerCase()!=i.data("rbEnableValue").toString().toLowerCase()&&(i.attr("disabled","disabled"),r=tinymce.editors[i[0].id],r&&r.getBody().setAttribute("contenteditable",!1))}})})};n.fn.scmTimer=function(t){return this.each(function(){var r=n(this),i=n.extend({h:0,m:0,s:0,hs:0,stop:!1,milliseconds:150,intervalCheck:null},t);if(i.stop){clearInterval(r.data("scmTimerToken"));return}var u=function(n){return n<10&&(n="0"+n),n},f=(new Date).getTime(),e=function(){r.text(u(i.h)+":"+u(i.m)+":"+u(i.s)+":"+u(i.hs))};e();r.data("scmTimerToken",setInterval(function(){if(!r.is(":visible")){clearInterval(r.data("scmTimerToken"));return}var n=(new Date).getTime(),t=n-f;if(i.hs+=Math.floor(t/10),f=n,i.hs>=100&&(i.s+=Math.floor(i.hs/100),i.hs=i.hs%100,i.s>=60&&(i.m+=Math.floor(i.s/60),i.s=i.s%60),i.m>=60&&(i.h+=Math.floor(i.m/60),i.m=i.m%60)),e(),i.intervalCheck&&!i.intervalCheck(i)){clearInterval(r.data("scmTimerToken"));return}},i.milliseconds))})};n.fn.wkTimer=function(t){return this.each(function(){var r=n(this),i=n.extend({h:0,m:0,s:0,hs:0,stop:!1,milliseconds:150,intervalCheck:null},t);if(i.stop){clearInterval(r.data("wkTimerToken"));return}var u=function(n){return n<10&&(n="0"+n),n},f=(new Date).getTime(),e=function(){r.text(u(i.m)+":"+u(i.s))};e();r.data("wkTimerToken",setInterval(function(){if(!r.is(":visible")){clearInterval(r.data("wkTimerToken"));return}var n=(new Date).getTime(),t=n-f;if(i.hs+=Math.floor(t/10),f=n,i.hs>=100&&(i.s+=Math.floor(i.hs/100),i.hs=i.hs%100,i.s>=60&&(i.m+=Math.floor(i.s/60),i.s=i.s%60),i.m>=60&&(i.h+=Math.floor(i.m/60),i.m=i.m%60)),e(),i.intervalCheck&&!i.intervalCheck(i)){clearInterval(r.data("wkTimerToken"));return}},i.milliseconds))})}}(jQuery);SCM=SCM||{};SCM.__namespace=!0;SCM.eventManager=function(n){var o=function(t,i){var r=n.extend({refreshWhenInvisible:!1,messageContainerSelector:"#divMessage"},i),f="",e=function(t){if(!r.refreshIf||r.refreshIf(t)){var i=n(r.containerSelector);(r.refreshWhenInvisible||i.is(":visible"))&&n.ajax({type:"POST",url:r.url,data:r.data,dataType:"html",success:function(u){n.pubsub("unsubscribe",f);i.replaceWith(u).show();r.refreshSuccess&&r.refreshSuccess(t)}})}};f=u(t,e)},t=function(t,i){return n.pubsub("subscribe",t,i)},i=function(t,i){n.pubsub("publish",t,i)},r="actionCompleted",s=function(t,u){var f=n.extend({actionEnum:t},u);i(r,f)},u=function(n,i){return t(r,function(t,r){n===r.actionEnum&&i(r)})},f="actionCompleteactionRequest",h=function(n,t){return i(f,{actionEnum:n,data:t})},e=function(n,i){return t(f,function(t,r){n===r.actionEnum&&i(r.data)})},c=function(t,i){return e(t,function(t){var r=n.extend({type:"POST"},t);n.ajax({type:r.type,url:r.url,data:r.data,dataType:"html",success:function(t){n(i).html(t).show()},error:function(n){alert(n)}});SCM.hideModal()})};return{subscribeWidgetRefresh:o,subscribe:t,publish:i,publishActionCompleted:s,subscribeActionCompleted:u,publishActionRequest:h,subscribeActionRequest:e,subscribeActionRequestDisplayResult:c}}(jQuery);SCM.eventManager.subscriptionMessages={playVideo:"SCM.PlayVideo"};SCM=SCM||{},function(n,t,i){var r={},u=r.hasOwnProperty;n.subscribe=function(n,t){u.call(r,n)||(r[n]=[]);var i=r[n].push(t)-1;return{remove:function(){delete r[n][i]}}};n.publish=function(n,f){u.call(r,n)&&t.each(r[n],function(n,t){t(f!==i?f:{})})}}(SCM.EventEmitter=SCM.EventEmitter||{},jQuery);SCM=SCM||{},function(n,t){function u(n,t){var i=n,r;return n.toLowerCase().indexOf("resourceid=")>=0&&(r=/resourceID=\{0\}|resourceID=\d+/i,i=n.replace(r,"resourceid="+t)),i}function i(n,t){if(window.console){var i=eval("("+n.responseText+")");console.log("error: "+i);console.log("status: "+t)}}function r(n){window.location.href=n}function f(t,i){t.attr({"data-reveal-id":"noAccessReveal","data-reveal":""}).removeAttr("data-ajax-url");var r="/article.aspx?articleid="+i+"#purchaseSubscriptionBox";n.$noAccessModal.find("#articleLinkToPurchase").attr("href",r);n.$noAccessModal.foundation("reveal","open")}function e(t,i,r){if(t.attr({"data-reveal-id":"noAccessReveal","data-reveal":""}).removeAttr("data-ajax-url"),r=="DO_NOT_USE")n.$noAccessModal.find("#articleLinkToPurchase").remove();else{var u=r;n.$noAccessModal.find("#articleLinkToPurchase").attr("href",u)}n.$noAccessModal.foundation("reveal","open")}function o(t,i){var r=u(t,i);n.$noAccessModal.find(".aIssuePurchaseLink").attr("href",r);n.$noAccessModal.foundation("reveal","open")}n.$noAccessModal=t("#noAccessReveal");n.checkArticlePDFAccess=function(n){var o=n.attr("data-article-id"),l=n.attr("data-article-url"),s=n.attr("data-ajax-url"),u=t("#hfSiteURL"),h="";n.attr("data-article-seo-url")!=null&&(h=n.attr("data-article-seo-url"));typeof u!="undefined"&&typeof u.val()!="undefined"&&u!=""&&(s="//"+u.val()+s);var a=o,c={};c["aId"]=a;t.ajax({type:"POST",url:s,data:c,traditional:!0,success:function(t){t.Success?r(l):h.length>0?e(n,o,h):f(n,o)},error:function(n,t,r){i(n,t,r)}})};n.checkIssuePDFAccess=function(u){var e=u.attr("data-issue-id"),f=u.attr("data-issue-url"),s=u.attr("data-ajax-issue-url"),h=n.$noAccessModal.find(".aIssuePurchaseLink").attr("href");if(f.toLowerCase().indexOf("/toc.pdf")>-1){window.location.href=f;return}t.ajax({type:"POST",url:s,data:{issueId:e},traditional:!0,success:function(n){n.Success?r(f):o(h,e)},error:function(n,t,r){i(n,t,r)}})};n.bindUiEvents=function(){t(document).on("click",".al-link.pdfaccess",function(){t(document).foundation();n.$noAccessModal.foundation("reveal","close");n.$noAccessModal.find("#articleLinkToPurchase").show();n.$noAccessModal.find(".issue-purchase-modal").hide();t(this).attr("data-reveal-id")||n.checkArticlePDFAccess(t(this))});t(document).on("click",".close-reveal-modal",function(){t(this).parents(".reveal-modal").foundation("reveal","close")});t(document).on("click",".al-link.issue-pdfLink",function(){n.$noAccessModal.foundation("reveal","close");n.$noAccessModal.find("#articleLinkToPurchase").hide();n.$noAccessModal.find(".issue-purchase-modal").show();n.checkIssuePDFAccess(t(this))})};n.init=function(){n.bindUiEvents()}}(SCM.PDFAccess=SCM.PDFAccess||{},jQuery);$(document).ready(function(){$("div[data-article-abstract-2b-fetched-wrapper] > div[data-article-abstract-get] a").on("click",function(){var i=$(this).closest("div[data-article-abstract-2b-fetched-wrapper]"),r=$(i).data("articleid-4-abstract"),u=$(i).children("div[data-tried-to-fetch-abstract]").first(),e=$(u).data("tried-to-fetch-abstract")==="true",f=$("#abstract-"+r),n=$("#hfSiteURL"),t=$(this).parent().data("link-article-abstract-type")=="extract"?"/Article/ArticleAbstractOrExtractAjax":"/Article/ArticleAbstractAjax";typeof n!="undefined"&&typeof n.val()!="undefined"&&n!=""&&(t="//"+n.val()+t);e||($.ajax({url:t,type:"GET",data:{articleId:r},success:function(n){f.html(n.Html)},error:function(n,t){if(window.console){var i=eval("("+n.responseText+")");console.log("error: "+i);console.log("status: "+t)}}}),$(u).data("tried-to-fetch-abstract","true"));f.toggle()})});
/*! jQuery UI - v1.12.1 - 2017-01-30
* http://jqueryui.com
* Includes: keycode.js, widgets/datepicker.js
* Copyright jQuery Foundation and other contributors; Licensed MIT */
(function(n){typeof define=="function"&&define.amd?define(["jquery"],n):n(jQuery)})(function(n){function s(n){for(var t,i;n.length&&n[0]!==document;){if(t=n.css("position"),(t==="absolute"||t==="relative"||t==="fixed")&&(i=parseInt(n.css("zIndex"),10),!isNaN(i)&&i!==0))return i;n=n.parent()}return 0}function r(){this._curInst=null;this._keyEvent=!1;this._disabledInputs=[];this._datepickerShowing=!1;this._inDialog=!1;this._mainDivId="ui-datepicker-div";this._inlineClass="ui-datepicker-inline";this._appendClass="ui-datepicker-append";this._triggerClass="ui-datepicker-trigger";this._dialogClass="ui-datepicker-dialog";this._disableClass="ui-datepicker-disabled";this._unselectableClass="ui-datepicker-unselectable";this._currentClass="ui-datepicker-current-day";this._dayOverClass="ui-datepicker-days-cell-over";this.regional=[];this.regional[""]={closeText:"Done",prevText:"Prev",nextText:"Next",currentText:"Today",monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],weekHeader:"Wk",dateFormat:"mm/dd/yy",firstDay:0,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""};this._defaults={showOn:"focus",showAnim:"fadeIn",showOptions:{},defaultDate:null,appendText:"",buttonText:"...",buttonImage:"",buttonImageOnly:!1,hideIfNoPrevNext:!1,navigationAsDateFormat:!1,gotoCurrent:!1,changeMonth:!1,changeYear:!1,yearRange:"c-10:c+10",showOtherMonths:!1,selectOtherMonths:!1,showWeek:!1,calculateWeek:this.iso8601Week,shortYearCutoff:"+10",minDate:null,maxDate:null,duration:"fast",beforeShowDay:null,beforeShow:null,onSelect:null,onChangeMonthYear:null,onClose:null,numberOfMonths:1,showCurrentAtPos:0,stepMonths:1,stepBigMonths:12,altField:"",altFormat:"",constrainInput:!0,showButtonPanel:!1,autoSize:!1,disabled:!1};n.extend(this._defaults,this.regional[""]);this.regional.en=n.extend(!0,{},this.regional[""]);this.regional["en-US"]=n.extend(!0,{},this.regional.en);this.dpDiv=u(n("<div id='"+this._mainDivId+"' class='ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all'><\/div>"))}function u(t){var i="button, .ui-datepicker-prev, .ui-datepicker-next, .ui-datepicker-calendar td a";return t.on("mouseout",i,function(){n(this).removeClass("ui-state-hover");this.className.indexOf("ui-datepicker-prev")!==-1&&n(this).removeClass("ui-datepicker-prev-hover");this.className.indexOf("ui-datepicker-next")!==-1&&n(this).removeClass("ui-datepicker-next-hover")}).on("mouseover",i,f)}function f(){n.datepicker._isDisabledDatepicker(t.inline?t.dpDiv.parent()[0]:t.input[0])||(n(this).parents(".ui-datepicker-calendar").find("a").removeClass("ui-state-hover"),n(this).addClass("ui-state-hover"),this.className.indexOf("ui-datepicker-prev")!==-1&&n(this).addClass("ui-datepicker-prev-hover"),this.className.indexOf("ui-datepicker-next")!==-1&&n(this).addClass("ui-datepicker-next-hover"))}function i(t,i){n.extend(t,i);for(var r in i)i[r]==null&&(t[r]=i[r]);return t}var e,o,t,h;n.ui=n.ui||{};e=n.ui.version="1.12.1";
/*!
 * jQuery UI Keycode 1.12.1
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */
o=n.ui.keyCode={BACKSPACE:8,COMMA:188,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,LEFT:37,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SPACE:32,TAB:9,UP:38};
/*!
 * jQuery UI Datepicker 1.12.1
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */
n.extend(n.ui,{datepicker:{version:"1.12.1"}});n.extend(r.prototype,{markerClassName:"hasDatepicker",maxRows:4,_widgetDatepicker:function(){return this.dpDiv},setDefaults:function(n){return i(this._defaults,n||{}),this},_attachDatepicker:function(t,i){var r,f,u;r=t.nodeName.toLowerCase();f=r==="div"||r==="span";t.id||(this.uuid+=1,t.id="dp"+this.uuid);u=this._newInst(n(t),f);u.settings=n.extend({},i||{});r==="input"?this._connectDatepicker(t,u):f&&this._inlineDatepicker(t,u)},_newInst:function(t,i){var r=t[0].id.replace(/([^A-Za-z0-9_\-])/g,"\\\\$1");return{id:r,input:t,selectedDay:0,selectedMonth:0,selectedYear:0,drawMonth:0,drawYear:0,inline:i,dpDiv:i?u(n("<div class='"+this._inlineClass+" ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all'><\/div>")):this.dpDiv}},_connectDatepicker:function(t,i){var r=n(t);if(i.append=n([]),i.trigger=n([]),!r.hasClass(this.markerClassName)){this._attachments(r,i);r.addClass(this.markerClassName).on("keydown",this._doKeyDown).on("keypress",this._doKeyPress).on("keyup",this._doKeyUp);this._autoSize(i);n.data(t,"datepicker",i);i.settings.disabled&&this._disableDatepicker(t)}},_attachments:function(t,i){var u,r,f,e=this._get(i,"appendText"),o=this._get(i,"isRTL");if(i.append&&i.append.remove(),e&&(i.append=n("<span class='"+this._appendClass+"'>"+e+"<\/span>"),t[o?"before":"after"](i.append)),t.off("focus",this._showDatepicker),i.trigger&&i.trigger.remove(),u=this._get(i,"showOn"),u==="focus"||u==="both")t.on("focus",this._showDatepicker);if(u==="button"||u==="both"){r=this._get(i,"buttonText");f=this._get(i,"buttonImage");i.trigger=n(this._get(i,"buttonImageOnly")?n("<img/>").addClass(this._triggerClass).attr({src:f,alt:r,title:r}):n("<button type='button'><\/button>").addClass(this._triggerClass).html(f?n("<img/>").attr({src:f,alt:r,title:r}):r));t[o?"before":"after"](i.trigger);i.trigger.on("click",function(){return n.datepicker._datepickerShowing&&n.datepicker._lastInput===t[0]?n.datepicker._hideDatepicker():n.datepicker._datepickerShowing&&n.datepicker._lastInput!==t[0]?(n.datepicker._hideDatepicker(),n.datepicker._showDatepicker(t[0])):n.datepicker._showDatepicker(t[0]),!1})}},_autoSize:function(n){if(this._get(n,"autoSize")&&!n.inline){var r,u,f,t,i=new Date(2009,11,20),e=this._get(n,"dateFormat");e.match(/[DM]/)&&(r=function(n){for(u=0,f=0,t=0;t<n.length;t++)n[t].length>u&&(u=n[t].length,f=t);return f},i.setMonth(r(this._get(n,e.match(/MM/)?"monthNames":"monthNamesShort"))),i.setDate(r(this._get(n,e.match(/DD/)?"dayNames":"dayNamesShort"))+20-i.getDay()));n.input.attr("size",this._formatDate(n,i).length)}},_inlineDatepicker:function(t,i){var r=n(t);r.hasClass(this.markerClassName)||(r.addClass(this.markerClassName).append(i.dpDiv),n.data(t,"datepicker",i),this._setDate(i,this._getDefaultDate(i),!0),this._updateDatepicker(i),this._updateAlternate(i),i.settings.disabled&&this._disableDatepicker(t),i.dpDiv.css("display","block"))},_dialogDatepicker:function(t,r,u,f,e){var s,h,c,l,a,o=this._dialogInst;if(!o){this.uuid+=1;s="dp"+this.uuid;this._dialogInput=n("<input type='text' id='"+s+"' style='position: absolute; top: -100px; width: 0px;'/>");this._dialogInput.on("keydown",this._doKeyDown);n("body").append(this._dialogInput);o=this._dialogInst=this._newInst(this._dialogInput,!1);o.settings={};n.data(this._dialogInput[0],"datepicker",o)}return i(o.settings,f||{}),r=r&&r.constructor===Date?this._formatDate(o,r):r,this._dialogInput.val(r),this._pos=e?e.length?e:[e.pageX,e.pageY]:null,this._pos||(h=document.documentElement.clientWidth,c=document.documentElement.clientHeight,l=document.documentElement.scrollLeft||document.body.scrollLeft,a=document.documentElement.scrollTop||document.body.scrollTop,this._pos=[h/2-100+l,c/2-150+a]),this._dialogInput.css("left",this._pos[0]+20+"px").css("top",this._pos[1]+"px"),o.settings.onSelect=u,this._inDialog=!0,this.dpDiv.addClass(this._dialogClass),this._showDatepicker(this._dialogInput[0]),n.blockUI&&n.blockUI(this.dpDiv),n.data(this._dialogInput[0],"datepicker",o),this},_destroyDatepicker:function(i){var r,u=n(i),f=n.data(i,"datepicker");u.hasClass(this.markerClassName)&&(r=i.nodeName.toLowerCase(),n.removeData(i,"datepicker"),r==="input"?(f.append.remove(),f.trigger.remove(),u.removeClass(this.markerClassName).off("focus",this._showDatepicker).off("keydown",this._doKeyDown).off("keypress",this._doKeyPress).off("keyup",this._doKeyUp)):(r==="div"||r==="span")&&u.removeClass(this.markerClassName).empty(),t===f&&(t=null))},_enableDatepicker:function(t){var i,r,u=n(t),f=n.data(t,"datepicker");u.hasClass(this.markerClassName)&&(i=t.nodeName.toLowerCase(),i==="input"?(t.disabled=!1,f.trigger.filter("button").each(function(){this.disabled=!1}).end().filter("img").css({opacity:"1.0",cursor:""})):(i==="div"||i==="span")&&(r=u.children("."+this._inlineClass),r.children().removeClass("ui-state-disabled"),r.find("select.ui-datepicker-month, select.ui-datepicker-year").prop("disabled",!1)),this._disabledInputs=n.map(this._disabledInputs,function(n){return n===t?null:n}))},_disableDatepicker:function(t){var i,r,u=n(t),f=n.data(t,"datepicker");u.hasClass(this.markerClassName)&&(i=t.nodeName.toLowerCase(),i==="input"?(t.disabled=!0,f.trigger.filter("button").each(function(){this.disabled=!0}).end().filter("img").css({opacity:"0.5",cursor:"default"})):(i==="div"||i==="span")&&(r=u.children("."+this._inlineClass),r.children().addClass("ui-state-disabled"),r.find("select.ui-datepicker-month, select.ui-datepicker-year").prop("disabled",!0)),this._disabledInputs=n.map(this._disabledInputs,function(n){return n===t?null:n}),this._disabledInputs[this._disabledInputs.length]=t)},_isDisabledDatepicker:function(n){if(!n)return!1;for(var t=0;t<this._disabledInputs.length;t++)if(this._disabledInputs[t]===n)return!0;return!1},_getInst:function(t){try{return n.data(t,"datepicker")}catch(i){throw"Missing instance data for this datepicker";}},_optionDatepicker:function(t,r,u){var e,h,o,s,f=this._getInst(t);if(arguments.length===2&&typeof r=="string")return r==="defaults"?n.extend({},n.datepicker._defaults):f?r==="all"?n.extend({},f.settings):this._get(f,r):null;e=r||{};typeof r=="string"&&(e={},e[r]=u);f&&(this._curInst===f&&this._hideDatepicker(),h=this._getDateDatepicker(t,!0),o=this._getMinMaxDate(f,"min"),s=this._getMinMaxDate(f,"max"),i(f.settings,e),o!==null&&e.dateFormat!==undefined&&e.minDate===undefined&&(f.settings.minDate=this._formatDate(f,o)),s!==null&&e.dateFormat!==undefined&&e.maxDate===undefined&&(f.settings.maxDate=this._formatDate(f,s)),"disabled"in e&&(e.disabled?this._disableDatepicker(t):this._enableDatepicker(t)),this._attachments(n(t),f),this._autoSize(f),this._setDate(f,h),this._updateAlternate(f),this._updateDatepicker(f))},_changeDatepicker:function(n,t,i){this._optionDatepicker(n,t,i)},_refreshDatepicker:function(n){var t=this._getInst(n);t&&this._updateDatepicker(t)},_setDateDatepicker:function(n,t){var i=this._getInst(n);i&&(this._setDate(i,t),this._updateDatepicker(i),this._updateAlternate(i))},_getDateDatepicker:function(n,t){var i=this._getInst(n);return i&&!i.inline&&this._setDateFromField(i,t),i?this._getDate(i):null},_doKeyDown:function(t){var u,e,f,i=n.datepicker._getInst(t.target),r=!0,o=i.dpDiv.is(".ui-datepicker-rtl");if(i._keyEvent=!0,n.datepicker._datepickerShowing)switch(t.keyCode){case 9:n.datepicker._hideDatepicker();r=!1;break;case 13:return f=n("td."+n.datepicker._dayOverClass+":not(."+n.datepicker._currentClass+")",i.dpDiv),f[0]&&n.datepicker._selectDay(t.target,i.selectedMonth,i.selectedYear,f[0]),u=n.datepicker._get(i,"onSelect"),u?(e=n.datepicker._formatDate(i),u.apply(i.input?i.input[0]:null,[e,i])):n.datepicker._hideDatepicker(),!1;case 27:n.datepicker._hideDatepicker();break;case 33:n.datepicker._adjustDate(t.target,t.ctrlKey?-n.datepicker._get(i,"stepBigMonths"):-n.datepicker._get(i,"stepMonths"),"M");break;case 34:n.datepicker._adjustDate(t.target,t.ctrlKey?+n.datepicker._get(i,"stepBigMonths"):+n.datepicker._get(i,"stepMonths"),"M");break;case 35:(t.ctrlKey||t.metaKey)&&n.datepicker._clearDate(t.target);r=t.ctrlKey||t.metaKey;break;case 36:(t.ctrlKey||t.metaKey)&&n.datepicker._gotoToday(t.target);r=t.ctrlKey||t.metaKey;break;case 37:(t.ctrlKey||t.metaKey)&&n.datepicker._adjustDate(t.target,o?1:-1,"D");r=t.ctrlKey||t.metaKey;t.originalEvent.altKey&&n.datepicker._adjustDate(t.target,t.ctrlKey?-n.datepicker._get(i,"stepBigMonths"):-n.datepicker._get(i,"stepMonths"),"M");break;case 38:(t.ctrlKey||t.metaKey)&&n.datepicker._adjustDate(t.target,-7,"D");r=t.ctrlKey||t.metaKey;break;case 39:(t.ctrlKey||t.metaKey)&&n.datepicker._adjustDate(t.target,o?-1:1,"D");r=t.ctrlKey||t.metaKey;t.originalEvent.altKey&&n.datepicker._adjustDate(t.target,t.ctrlKey?+n.datepicker._get(i,"stepBigMonths"):+n.datepicker._get(i,"stepMonths"),"M");break;case 40:(t.ctrlKey||t.metaKey)&&n.datepicker._adjustDate(t.target,7,"D");r=t.ctrlKey||t.metaKey;break;default:r=!1}else t.keyCode===36&&t.ctrlKey?n.datepicker._showDatepicker(this):r=!1;r&&(t.preventDefault(),t.stopPropagation())},_doKeyPress:function(t){var i,r,u=n.datepicker._getInst(t.target);if(n.datepicker._get(u,"constrainInput"))return i=n.datepicker._possibleChars(n.datepicker._get(u,"dateFormat")),r=String.fromCharCode(t.charCode==null?t.keyCode:t.charCode),t.ctrlKey||t.metaKey||r<" "||!i||i.indexOf(r)>-1},_doKeyUp:function(t){var r,i=n.datepicker._getInst(t.target);if(i.input.val()!==i.lastVal)try{r=n.datepicker.parseDate(n.datepicker._get(i,"dateFormat"),i.input?i.input.val():null,n.datepicker._getFormatConfig(i));r&&(n.datepicker._setDateFromField(i),n.datepicker._updateAlternate(i),n.datepicker._updateDatepicker(i))}catch(u){}return!0},_showDatepicker:function(t){if(t=t.target||t,t.nodeName.toLowerCase()!=="input"&&(t=n("input",t.parentNode)[0]),!n.datepicker._isDisabledDatepicker(t)&&n.datepicker._lastInput!==t){var r,o,h,u,f,e,c;(r=n.datepicker._getInst(t),n.datepicker._curInst&&n.datepicker._curInst!==r&&(n.datepicker._curInst.dpDiv.stop(!0,!0),r&&n.datepicker._datepickerShowing&&n.datepicker._hideDatepicker(n.datepicker._curInst.input[0])),o=n.datepicker._get(r,"beforeShow"),h=o?o.apply(t,[t,r]):{},h!==!1)&&(i(r.settings,h),r.lastVal=null,n.datepicker._lastInput=t,n.datepicker._setDateFromField(r),n.datepicker._inDialog&&(t.value=""),n.datepicker._pos||(n.datepicker._pos=n.datepicker._findPos(t),n.datepicker._pos[1]+=t.offsetHeight),u=!1,n(t).parents().each(function(){return u|=n(this).css("position")==="fixed",!u}),f={left:n.datepicker._pos[0],top:n.datepicker._pos[1]},n.datepicker._pos=null,r.dpDiv.empty(),r.dpDiv.css({position:"absolute",display:"block",top:"-1000px"}),n.datepicker._updateDatepicker(r),f=n.datepicker._checkOffset(r,f,u),r.dpDiv.css({position:n.datepicker._inDialog&&n.blockUI?"static":u?"fixed":"absolute",display:"none",left:f.left+"px",top:f.top+"px"}),r.inline||(e=n.datepicker._get(r,"showAnim"),c=n.datepicker._get(r,"duration"),r.dpDiv.css("z-index",s(n(t))+1),n.datepicker._datepickerShowing=!0,n.effects&&n.effects.effect[e]?r.dpDiv.show(e,n.datepicker._get(r,"showOptions"),c):r.dpDiv[e||"show"](e?c:null),n.datepicker._shouldFocusInput(r)&&r.input.trigger("focus"),n.datepicker._curInst=r))}},_updateDatepicker:function(i){this.maxRows=4;t=i;i.dpDiv.empty().append(this._generateHTML(i));this._attachHandlers(i);var r,u=this._getNumberOfMonths(i),e=u[1],o=i.dpDiv.find("."+this._dayOverClass+" a");o.length>0&&f.apply(o.get(0));i.dpDiv.removeClass("ui-datepicker-multi-2 ui-datepicker-multi-3 ui-datepicker-multi-4").width("");e>1&&i.dpDiv.addClass("ui-datepicker-multi-"+e).css("width",17*e+"em");i.dpDiv[(u[0]!==1||u[1]!==1?"add":"remove")+"Class"]("ui-datepicker-multi");i.dpDiv[(this._get(i,"isRTL")?"add":"remove")+"Class"]("ui-datepicker-rtl");i===n.datepicker._curInst&&n.datepicker._datepickerShowing&&n.datepicker._shouldFocusInput(i)&&i.input.trigger("focus");i.yearshtml&&(r=i.yearshtml,setTimeout(function(){r===i.yearshtml&&i.yearshtml&&i.dpDiv.find("select.ui-datepicker-year:first").replaceWith(i.yearshtml);r=i.yearshtml=null},0))},_shouldFocusInput:function(n){return n.input&&n.input.is(":visible")&&!n.input.is(":disabled")&&!n.input.is(":focus")},_checkOffset:function(t,i,r){var u=t.dpDiv.outerWidth(),f=t.dpDiv.outerHeight(),h=t.input?t.input.outerWidth():0,o=t.input?t.input.outerHeight():0,e=document.documentElement.clientWidth+(r?0:n(document).scrollLeft()),s=document.documentElement.clientHeight+(r?0:n(document).scrollTop());return i.left-=this._get(t,"isRTL")?u-h:0,i.left-=r&&i.left===t.input.offset().left?n(document).scrollLeft():0,i.top-=r&&i.top===t.input.offset().top+o?n(document).scrollTop():0,i.left-=Math.min(i.left,i.left+u>e&&e>u?Math.abs(i.left+u-e):0),i.top-=Math.min(i.top,i.top+f>s&&s>f?Math.abs(f+o):0),i},_findPos:function(t){for(var i,r=this._getInst(t),u=this._get(r,"isRTL");t&&(t.type==="hidden"||t.nodeType!==1||n.expr.filters.hidden(t));)t=t[u?"previousSibling":"nextSibling"];return i=n(t).offset(),[i.left,i.top]},_hideDatepicker:function(t){var r,f,u,e,i=this._curInst;i&&(!t||i===n.data(t,"datepicker"))&&this._datepickerShowing&&(r=this._get(i,"showAnim"),f=this._get(i,"duration"),u=function(){n.datepicker._tidyDialog(i)},n.effects&&(n.effects.effect[r]||n.effects[r])?i.dpDiv.hide(r,n.datepicker._get(i,"showOptions"),f,u):i.dpDiv[r==="slideDown"?"slideUp":r==="fadeIn"?"fadeOut":"hide"](r?f:null,u),r||u(),this._datepickerShowing=!1,e=this._get(i,"onClose"),e&&e.apply(i.input?i.input[0]:null,[i.input?i.input.val():"",i]),this._lastInput=null,this._inDialog&&(this._dialogInput.css({position:"absolute",left:"0",top:"-100px"}),n.blockUI&&(n.unblockUI(),n("body").append(this.dpDiv))),this._inDialog=!1)},_tidyDialog:function(n){n.dpDiv.removeClass(this._dialogClass).off(".ui-datepicker-calendar")},_checkExternalClick:function(t){if(n.datepicker._curInst){var i=n(t.target),r=n.datepicker._getInst(i[0]);(i[0].id===n.datepicker._mainDivId||i.parents("#"+n.datepicker._mainDivId).length!==0||i.hasClass(n.datepicker.markerClassName)||i.closest("."+n.datepicker._triggerClass).length||!n.datepicker._datepickerShowing||n.datepicker._inDialog&&n.blockUI)&&(!i.hasClass(n.datepicker.markerClassName)||n.datepicker._curInst===r)||n.datepicker._hideDatepicker()}},_adjustDate:function(t,i,r){var f=n(t),u=this._getInst(f[0]);this._isDisabledDatepicker(f[0])||(this._adjustInstDate(u,i+(r==="M"?this._get(u,"showCurrentAtPos"):0),r),this._updateDatepicker(u))},_gotoToday:function(t){var r,u=n(t),i=this._getInst(u[0]);this._get(i,"gotoCurrent")&&i.currentDay?(i.selectedDay=i.currentDay,i.drawMonth=i.selectedMonth=i.currentMonth,i.drawYear=i.selectedYear=i.currentYear):(r=new Date,i.selectedDay=r.getDate(),i.drawMonth=i.selectedMonth=r.getMonth(),i.drawYear=i.selectedYear=r.getFullYear());this._notifyChange(i);this._adjustDate(u)},_selectMonthYear:function(t,i,r){var f=n(t),u=this._getInst(f[0]);u["selected"+(r==="M"?"Month":"Year")]=u["draw"+(r==="M"?"Month":"Year")]=parseInt(i.options[i.selectedIndex].value,10);this._notifyChange(u);this._adjustDate(f)},_selectDay:function(t,i,r,u){var f,e=n(t);n(u).hasClass(this._unselectableClass)||this._isDisabledDatepicker(e[0])||(f=this._getInst(e[0]),f.selectedDay=f.currentDay=n("a",u).html(),f.selectedMonth=f.currentMonth=i,f.selectedYear=f.currentYear=r,this._selectDate(t,this._formatDate(f,f.currentDay,f.currentMonth,f.currentYear)))},_clearDate:function(t){var i=n(t);this._selectDate(i,"")},_selectDate:function(t,i){var u,f=n(t),r=this._getInst(f[0]);i=i!=null?i:this._formatDate(r);r.input&&r.input.val(i);this._updateAlternate(r);u=this._get(r,"onSelect");u?u.apply(r.input?r.input[0]:null,[i,r]):r.input&&r.input.trigger("change");r.inline?this._updateDatepicker(r):(this._hideDatepicker(),this._lastInput=r.input[0],typeof r.input[0]!="object"&&r.input.trigger("focus"),this._lastInput=null)},_updateAlternate:function(t){var i,r,u,f=this._get(t,"altField");f&&(i=this._get(t,"altFormat")||this._get(t,"dateFormat"),r=this._getDate(t),u=this.formatDate(i,r,this._getFormatConfig(t)),n(f).val(u))},noWeekends:function(n){var t=n.getDay();return[t>0&&t<6,""]},iso8601Week:function(n){var i,t=new Date(n.getTime());return t.setDate(t.getDate()+4-(t.getDay()||7)),i=t.getTime(),t.setMonth(0),t.setDate(1),Math.floor(Math.round((i-t)/864e5)/7)+1},parseDate:function(t,i,r){if(t==null||i==null)throw"Invalid arguments";if(i=typeof i=="object"?i.toString():i+"",i==="")return null;for(var a,v,f=0,y=(r?r.shortYearCutoff:null)||this._defaults.shortYearCutoff,d=typeof y!="string"?y:(new Date).getFullYear()%100+parseInt(y,10),g=(r?r.dayNamesShort:null)||this._defaults.dayNamesShort,nt=(r?r.dayNames:null)||this._defaults.dayNames,tt=(r?r.monthNamesShort:null)||this._defaults.monthNamesShort,it=(r?r.monthNames:null)||this._defaults.monthNames,e=-1,s=-1,h=-1,p=-1,w=!1,u,l=function(n){var i=o+1<t.length&&t.charAt(o+1)===n;return i&&o++,i},c=function(n){var u=l(n),r=n==="@"?14:n==="!"?20:n==="y"&&u?4:n==="o"?3:2,e=n==="y"?r:1,o=new RegExp("^\\d{"+e+","+r+"}"),t=i.substring(f).match(o);if(!t)throw"Missing number at position "+f;return f+=t[0].length,parseInt(t[0],10)},k=function(t,r,u){var e=-1,o=n.map(l(t)?u:r,function(n,t){return[[t,n]]}).sort(function(n,t){return-(n[1].length-t[1].length)});if(n.each(o,function(n,t){var r=t[1];if(i.substr(f,r.length).toLowerCase()===r.toLowerCase())return e=t[0],f+=r.length,!1}),e!==-1)return e+1;throw"Unknown name at position "+f;},b=function(){if(i.charAt(f)!==t.charAt(o))throw"Unexpected literal at position "+f;f++},o=0;o<t.length;o++)if(w)t.charAt(o)!=="'"||l("'")?b():w=!1;else switch(t.charAt(o)){case"d":h=c("d");break;case"D":k("D",g,nt);break;case"o":p=c("o");break;case"m":s=c("m");break;case"M":s=k("M",tt,it);break;case"y":e=c("y");break;case"@":u=new Date(c("@"));e=u.getFullYear();s=u.getMonth()+1;h=u.getDate();break;case"!":u=new Date((c("!")-this._ticksTo1970)/1e4);e=u.getFullYear();s=u.getMonth()+1;h=u.getDate();break;case"'":l("'")?b():w=!0;break;default:b()}if(f<i.length&&(v=i.substr(f),!/^\s+/.test(v)))throw"Extra/unparsed characters found in date: "+v;if(e===-1?e=(new Date).getFullYear():e<100&&(e+=(new Date).getFullYear()-(new Date).getFullYear()%100+(e<=d?0:-100)),p>-1){s=1;h=p;do{if(a=this._getDaysInMonth(e,s-1),h<=a)break;s++;h-=a}while(1)}if(u=this._daylightSavingAdjust(new Date(e,s-1,h)),u.getFullYear()!==e||u.getMonth()+1!==s||u.getDate()!==h)throw"Invalid date";return u},ATOM:"yy-mm-dd",COOKIE:"D, dd M yy",ISO_8601:"yy-mm-dd",RFC_822:"D, d M y",RFC_850:"DD, dd-M-y",RFC_1036:"D, d M y",RFC_1123:"D, d M yy",RFC_2822:"D, d M yy",RSS:"D, d M y",TICKS:"!",TIMESTAMP:"@",W3C:"yy-mm-dd",_ticksTo1970:(718685+Math.floor(1970/4)-Math.floor(1970/100)+Math.floor(1970/400))*864e9,formatDate:function(n,t,i){if(!t)return"";var u,h=(i?i.dayNamesShort:null)||this._defaults.dayNamesShort,c=(i?i.dayNames:null)||this._defaults.dayNames,l=(i?i.monthNamesShort:null)||this._defaults.monthNamesShort,a=(i?i.monthNames:null)||this._defaults.monthNames,f=function(t){var i=u+1<n.length&&n.charAt(u+1)===t;return i&&u++,i},e=function(n,t,i){var r=""+t;if(f(n))while(r.length<i)r="0"+r;return r},s=function(n,t,i,r){return f(n)?r[t]:i[t]},r="",o=!1;if(t)for(u=0;u<n.length;u++)if(o)n.charAt(u)!=="'"||f("'")?r+=n.charAt(u):o=!1;else switch(n.charAt(u)){case"d":r+=e("d",t.getDate(),2);break;case"D":r+=s("D",t.getDay(),h,c);break;case"o":r+=e("o",Math.round((new Date(t.getFullYear(),t.getMonth(),t.getDate()).getTime()-new Date(t.getFullYear(),0,0).getTime())/864e5),3);break;case"m":r+=e("m",t.getMonth()+1,2);break;case"M":r+=s("M",t.getMonth(),l,a);break;case"y":r+=f("y")?t.getFullYear():(t.getFullYear()%100<10?"0":"")+t.getFullYear()%100;break;case"@":r+=t.getTime();break;case"!":r+=t.getTime()*1e4+this._ticksTo1970;break;case"'":f("'")?r+="'":o=!0;break;default:r+=n.charAt(u)}return r},_possibleChars:function(n){for(var i="",r=!1,u=function(i){var r=t+1<n.length&&n.charAt(t+1)===i;return r&&t++,r},t=0;t<n.length;t++)if(r)n.charAt(t)!=="'"||u("'")?i+=n.charAt(t):r=!1;else switch(n.charAt(t)){case"d":case"m":case"y":case"@":i+="0123456789";break;case"D":case"M":return null;case"'":u("'")?i+="'":r=!0;break;default:i+=n.charAt(t)}return i},_get:function(n,t){return n.settings[t]!==undefined?n.settings[t]:this._defaults[t]},_setDateFromField:function(n,t){if(n.input.val()!==n.lastVal){var f=this._get(n,"dateFormat"),r=n.lastVal=n.input?n.input.val():null,u=this._getDefaultDate(n),i=u,e=this._getFormatConfig(n);try{i=this.parseDate(f,r,e)||u}catch(o){r=t?"":r}n.selectedDay=i.getDate();n.drawMonth=n.selectedMonth=i.getMonth();n.drawYear=n.selectedYear=i.getFullYear();n.currentDay=r?i.getDate():0;n.currentMonth=r?i.getMonth():0;n.currentYear=r?i.getFullYear():0;this._adjustInstDate(n)}},_getDefaultDate:function(n){return this._restrictMinMax(n,this._determineDate(n,this._get(n,"defaultDate"),new Date))},_determineDate:function(t,i,r){var f=function(n){var t=new Date;return t.setDate(t.getDate()+n),t},e=function(i){try{return n.datepicker.parseDate(n.datepicker._get(t,"dateFormat"),i,n.datepicker._getFormatConfig(t))}catch(h){}for(var o=(i.toLowerCase().match(/^c/)?n.datepicker._getDate(t):null)||new Date,f=o.getFullYear(),e=o.getMonth(),r=o.getDate(),s=/([+\-]?[0-9]+)\s*(d|D|w|W|m|M|y|Y)?/g,u=s.exec(i);u;){switch(u[2]||"d"){case"d":case"D":r+=parseInt(u[1],10);break;case"w":case"W":r+=parseInt(u[1],10)*7;break;case"m":case"M":e+=parseInt(u[1],10);r=Math.min(r,n.datepicker._getDaysInMonth(f,e));break;case"y":case"Y":f+=parseInt(u[1],10);r=Math.min(r,n.datepicker._getDaysInMonth(f,e))}u=s.exec(i)}return new Date(f,e,r)},u=i==null||i===""?r:typeof i=="string"?e(i):typeof i=="number"?isNaN(i)?r:f(i):new Date(i.getTime());return u=u&&u.toString()==="Invalid Date"?r:u,u&&(u.setHours(0),u.setMinutes(0),u.setSeconds(0),u.setMilliseconds(0)),this._daylightSavingAdjust(u)},_daylightSavingAdjust:function(n){return n?(n.setHours(n.getHours()>12?n.getHours()+2:0),n):null},_setDate:function(n,t,i){var u=!t,f=n.selectedMonth,e=n.selectedYear,r=this._restrictMinMax(n,this._determineDate(n,t,new Date));n.selectedDay=n.currentDay=r.getDate();n.drawMonth=n.selectedMonth=n.currentMonth=r.getMonth();n.drawYear=n.selectedYear=n.currentYear=r.getFullYear();f===n.selectedMonth&&e===n.selectedYear||i||this._notifyChange(n);this._adjustInstDate(n);n.input&&n.input.val(u?"":this._formatDate(n))},_getDate:function(n){return!n.currentYear||n.input&&n.input.val()===""?null:this._daylightSavingAdjust(new Date(n.currentYear,n.currentMonth,n.currentDay))},_attachHandlers:function(t){var r=this._get(t,"stepMonths"),i="#"+t.id.replace(/\\\\/g,"\\");t.dpDiv.find("[data-handler]").map(function(){var t={prev:function(){n.datepicker._adjustDate(i,-r,"M")},next:function(){n.datepicker._adjustDate(i,+r,"M")},hide:function(){n.datepicker._hideDatepicker()},today:function(){n.datepicker._gotoToday(i)},selectDay:function(){return n.datepicker._selectDay(i,+this.getAttribute("data-month"),+this.getAttribute("data-year"),this),!1},selectMonth:function(){return n.datepicker._selectMonthYear(i,this,"M"),!1},selectYear:function(){return n.datepicker._selectMonthYear(i,this,"Y"),!1}};n(this).on(this.getAttribute("data-event"),t[this.getAttribute("data-handler")])})},_generateHTML:function(n){var b,s,rt,h,ut,k,ft,et,ri,c,ot,ui,fi,ei,oi,st,g,si,ht,nt,o,y,ct,p,lt,l,u,at,vt,yt,pt,tt,wt,i,bt,kt,d,a,it,dt=new Date,gt=this._daylightSavingAdjust(new Date(dt.getFullYear(),dt.getMonth(),dt.getDate())),f=this._get(n,"isRTL"),li=this._get(n,"showButtonPanel"),hi=this._get(n,"hideIfNoPrevNext"),ni=this._get(n,"navigationAsDateFormat"),e=this._getNumberOfMonths(n),ai=this._get(n,"showCurrentAtPos"),ci=this._get(n,"stepMonths"),ti=e[0]!==1||e[1]!==1,ii=this._daylightSavingAdjust(n.currentDay?new Date(n.currentYear,n.currentMonth,n.currentDay):new Date(9999,9,9)),w=this._getMinMaxDate(n,"min"),v=this._getMinMaxDate(n,"max"),t=n.drawMonth-ai,r=n.drawYear;if(t<0&&(t+=12,r--),v)for(b=this._daylightSavingAdjust(new Date(v.getFullYear(),v.getMonth()-e[0]*e[1]+1,v.getDate())),b=w&&b<w?w:b;this._daylightSavingAdjust(new Date(r,t,1))>b;)t--,t<0&&(t=11,r--);for(n.drawMonth=t,n.drawYear=r,s=this._get(n,"prevText"),s=ni?this.formatDate(s,this._daylightSavingAdjust(new Date(r,t-ci,1)),this._getFormatConfig(n)):s,rt=this._canAdjustMonth(n,-1,r,t)?"<a class='ui-datepicker-prev ui-corner-all' data-handler='prev' data-event='click' title='"+s+"'><span class='ui-icon ui-icon-circle-triangle-"+(f?"e":"w")+"'>"+s+"<\/span><\/a>":hi?"":"<a class='ui-datepicker-prev ui-corner-all ui-state-disabled' title='"+s+"'><span class='ui-icon ui-icon-circle-triangle-"+(f?"e":"w")+"'>"+s+"<\/span><\/a>",h=this._get(n,"nextText"),h=ni?this.formatDate(h,this._daylightSavingAdjust(new Date(r,t+ci,1)),this._getFormatConfig(n)):h,ut=this._canAdjustMonth(n,1,r,t)?"<a class='ui-datepicker-next ui-corner-all' data-handler='next' data-event='click' title='"+h+"'><span class='ui-icon ui-icon-circle-triangle-"+(f?"w":"e")+"'>"+h+"<\/span><\/a>":hi?"":"<a class='ui-datepicker-next ui-corner-all ui-state-disabled' title='"+h+"'><span class='ui-icon ui-icon-circle-triangle-"+(f?"w":"e")+"'>"+h+"<\/span><\/a>",k=this._get(n,"currentText"),ft=this._get(n,"gotoCurrent")&&n.currentDay?ii:gt,k=ni?this.formatDate(k,ft,this._getFormatConfig(n)):k,et=n.inline?"":"<button type='button' class='ui-datepicker-close ui-state-default ui-priority-primary ui-corner-all' data-handler='hide' data-event='click'>"+this._get(n,"closeText")+"<\/button>",ri=li?"<div class='ui-datepicker-buttonpane ui-widget-content'>"+(f?et:"")+(this._isInRange(n,ft)?"<button type='button' class='ui-datepicker-current ui-state-default ui-priority-secondary ui-corner-all' data-handler='today' data-event='click'>"+k+"<\/button>":"")+(f?"":et)+"<\/div>":"",c=parseInt(this._get(n,"firstDay"),10),c=isNaN(c)?0:c,ot=this._get(n,"showWeek"),ui=this._get(n,"dayNames"),fi=this._get(n,"dayNamesMin"),ei=this._get(n,"monthNames"),oi=this._get(n,"monthNamesShort"),st=this._get(n,"beforeShowDay"),g=this._get(n,"showOtherMonths"),si=this._get(n,"selectOtherMonths"),ht=this._getDefaultDate(n),nt="",y=0;y<e[0];y++){for(ct="",this.maxRows=4,p=0;p<e[1];p++){if(lt=this._daylightSavingAdjust(new Date(r,t,n.selectedDay)),l=" ui-corner-all",u="",ti){if(u+="<div class='ui-datepicker-group",e[1]>1)switch(p){case 0:u+=" ui-datepicker-group-first";l=" ui-corner-"+(f?"right":"left");break;case e[1]-1:u+=" ui-datepicker-group-last";l=" ui-corner-"+(f?"left":"right");break;default:u+=" ui-datepicker-group-middle";l=""}u+="'>"}for(u+="<div class='ui-datepicker-header ui-widget-header ui-helper-clearfix"+l+"'>"+(/all|left/.test(l)&&y===0?f?ut:rt:"")+(/all|right/.test(l)&&y===0?f?rt:ut:"")+this._generateMonthYearHeader(n,t,r,w,v,y>0||p>0,ei,oi)+"<\/div><table class='ui-datepicker-calendar'><thead><tr>",at=ot?"<th class='ui-datepicker-week-col'>"+this._get(n,"weekHeader")+"<\/th>":"",o=0;o<7;o++)vt=(o+c)%7,at+="<th scope='col'"+((o+c+6)%7>=5?" class='ui-datepicker-week-end'":"")+"><span title='"+ui[vt]+"'>"+fi[vt]+"<\/span><\/th>";for(u+=at+"<\/tr><\/thead><tbody>",yt=this._getDaysInMonth(r,t),r===n.selectedYear&&t===n.selectedMonth&&(n.selectedDay=Math.min(n.selectedDay,yt)),pt=(this._getFirstDayOfMonth(r,t)-c+7)%7,tt=Math.ceil((pt+yt)/7),wt=ti?this.maxRows>tt?this.maxRows:tt:tt,this.maxRows=wt,i=this._daylightSavingAdjust(new Date(r,t,1-pt)),bt=0;bt<wt;bt++){for(u+="<tr>",kt=ot?"<td class='ui-datepicker-week-col'>"+this._get(n,"calculateWeek")(i)+"<\/td>":"",o=0;o<7;o++)d=st?st.apply(n.input?n.input[0]:null,[i]):[!0,""],a=i.getMonth()!==t,it=a&&!si||!d[0]||w&&i<w||v&&i>v,kt+="<td class='"+((o+c+6)%7>=5?" ui-datepicker-week-end":"")+(a?" ui-datepicker-other-month":"")+(i.getTime()===lt.getTime()&&t===n.selectedMonth&&n._keyEvent||ht.getTime()===i.getTime()&&ht.getTime()===lt.getTime()?" "+this._dayOverClass:"")+(it?" "+this._unselectableClass+" ui-state-disabled":"")+(a&&!g?"":" "+d[1]+(i.getTime()===ii.getTime()?" "+this._currentClass:"")+(i.getTime()===gt.getTime()?" ui-datepicker-today":""))+"'"+((!a||g)&&d[2]?" title='"+d[2].replace(/'/g,"&#39;")+"'":"")+(it?"":" data-handler='selectDay' data-event='click' data-month='"+i.getMonth()+"' data-year='"+i.getFullYear()+"'")+">"+(a&&!g?"&#xa0;":it?"<span class='ui-state-default'>"+i.getDate()+"<\/span>":"<a class='ui-state-default"+(i.getTime()===gt.getTime()?" ui-state-highlight":"")+(i.getTime()===ii.getTime()?" ui-state-active":"")+(a?" ui-priority-secondary":"")+"' href='#' aria-label='"+i.getDate()+"'>"+i.getDate()+"<\/a>")+"<\/td>",i.setDate(i.getDate()+1),i=this._daylightSavingAdjust(i);u+=kt+"<\/tr>"}t++;t>11&&(t=0,r++);u+="<\/tbody><\/table>"+(ti?"<\/div>"+(e[0]>0&&p===e[1]-1?"<div class='ui-datepicker-row-break'><\/div>":""):"");ct+=u}nt+=ct}return nt+=ri,n._keyEvent=!1,nt},_generateMonthYearHeader:function(n,t,i,r,u,f,e,o){var k,d,h,v,y,p,s,a,w=this._get(n,"changeMonth"),b=this._get(n,"changeYear"),g=this._get(n,"showMonthAfterYear"),c="<div class='ui-datepicker-title'>",l="";if(f||!w)l+="<span class='ui-datepicker-month'>"+e[t]+"<\/span>";else{for(k=r&&r.getFullYear()===i,d=u&&u.getFullYear()===i,l+="<select class='ui-datepicker-month' data-handler='selectMonth' data-event='change'>",h=0;h<12;h++)(!k||h>=r.getMonth())&&(!d||h<=u.getMonth())&&(l+="<option value='"+h+"'"+(h===t?" selected='selected'":"")+">"+o[h]+"<\/option>");l+="<\/select>"}if(g||(c+=l+(f||!(w&&b)?"&#xa0;":"")),!n.yearshtml)if(n.yearshtml="",f||!b)c+="<span class='ui-datepicker-year'>"+i+"<\/span>";else{for(v=this._get(n,"yearRange").split(":"),y=(new Date).getFullYear(),p=function(n){var t=n.match(/c[+\-].*/)?i+parseInt(n.substring(1),10):n.match(/[+\-].*/)?y+parseInt(n,10):parseInt(n,10);return isNaN(t)?y:t},s=p(v[0]),a=Math.max(s,p(v[1]||"")),s=r?Math.max(s,r.getFullYear()):s,a=u?Math.min(a,u.getFullYear()):a,n.yearshtml+="<select class='ui-datepicker-year' data-handler='selectYear' data-event='change'>";s<=a;s++)n.yearshtml+="<option value='"+s+"'"+(s===i?" selected='selected'":"")+">"+s+"<\/option>";n.yearshtml+="<\/select>";c+=n.yearshtml;n.yearshtml=null}return c+=this._get(n,"yearSuffix"),g&&(c+=(f||!(w&&b)?"&#xa0;":"")+l),c+"<\/div>"},_adjustInstDate:function(n,t,i){var u=n.selectedYear+(i==="Y"?t:0),f=n.selectedMonth+(i==="M"?t:0),e=Math.min(n.selectedDay,this._getDaysInMonth(u,f))+(i==="D"?t:0),r=this._restrictMinMax(n,this._daylightSavingAdjust(new Date(u,f,e)));n.selectedDay=r.getDate();n.drawMonth=n.selectedMonth=r.getMonth();n.drawYear=n.selectedYear=r.getFullYear();(i==="M"||i==="Y")&&this._notifyChange(n)},_restrictMinMax:function(n,t){var i=this._getMinMaxDate(n,"min"),r=this._getMinMaxDate(n,"max"),u=i&&t<i?i:t;return r&&u>r?r:u},_notifyChange:function(n){var t=this._get(n,"onChangeMonthYear");t&&t.apply(n.input?n.input[0]:null,[n.selectedYear,n.selectedMonth+1,n])},_getNumberOfMonths:function(n){var t=this._get(n,"numberOfMonths");return t==null?[1,1]:typeof t=="number"?[1,t]:t},_getMinMaxDate:function(n,t){return this._determineDate(n,this._get(n,t+"Date"),null)},_getDaysInMonth:function(n,t){return 32-this._daylightSavingAdjust(new Date(n,t,32)).getDate()},_getFirstDayOfMonth:function(n,t){return new Date(n,t,1).getDay()},_canAdjustMonth:function(n,t,i,r){var f=this._getNumberOfMonths(n),u=this._daylightSavingAdjust(new Date(i,r+(t<0?t:f[0]*f[1]),1));return t<0&&u.setDate(this._getDaysInMonth(u.getFullYear(),u.getMonth())),this._isInRange(n,u)},_isInRange:function(n,t){var i,f,e=this._getMinMaxDate(n,"min"),o=this._getMinMaxDate(n,"max"),r=null,u=null,s=this._get(n,"yearRange");return s&&(i=s.split(":"),f=(new Date).getFullYear(),r=parseInt(i[0],10),u=parseInt(i[1],10),i[0].match(/[+\-].*/)&&(r+=f),i[1].match(/[+\-].*/)&&(u+=f)),(!e||t.getTime()>=e.getTime())&&(!o||t.getTime()<=o.getTime())&&(!r||t.getFullYear()>=r)&&(!u||t.getFullYear()<=u)},_getFormatConfig:function(n){var t=this._get(n,"shortYearCutoff");return t=typeof t!="string"?t:(new Date).getFullYear()%100+parseInt(t,10),{shortYearCutoff:t,dayNamesShort:this._get(n,"dayNamesShort"),dayNames:this._get(n,"dayNames"),monthNamesShort:this._get(n,"monthNamesShort"),monthNames:this._get(n,"monthNames")}},_formatDate:function(n,t,i,r){t||(n.currentDay=n.selectedDay,n.currentMonth=n.selectedMonth,n.currentYear=n.selectedYear);var u=t?typeof t=="object"?t:this._daylightSavingAdjust(new Date(r,i,t)):this._daylightSavingAdjust(new Date(n.currentYear,n.currentMonth,n.currentDay));return this.formatDate(this._get(n,"dateFormat"),u,this._getFormatConfig(n))}});n.fn.datepicker=function(t){if(!this.length)return this;if(!n.datepicker.initialized){n(document).on("mousedown",n.datepicker._checkExternalClick);n.datepicker.initialized=!0}n("#"+n.datepicker._mainDivId).length===0&&n("body").append(n.datepicker.dpDiv);var i=Array.prototype.slice.call(arguments,1);return typeof t=="string"&&(t==="isDisabled"||t==="getDate"||t==="widget")?n.datepicker["_"+t+"Datepicker"].apply(n.datepicker,[this[0]].concat(i)):t==="option"&&arguments.length===2&&typeof arguments[1]=="string"?n.datepicker["_"+t+"Datepicker"].apply(n.datepicker,[this[0]].concat(i)):this.each(function(){typeof t=="string"?n.datepicker["_"+t+"Datepicker"].apply(n.datepicker,[this].concat(i)):n.datepicker._attachDatepicker(this,t)})};n.datepicker=new r;n.datepicker.initialized=!1;n.datepicker.uuid=(new Date).getTime();n.datepicker.version="1.12.1";h=n.datepicker});SCM=SCM||{},function(n,t,i,r){function e(){c();h()}function h(){var n=t(".item-with-dropdown");n.show();n.each(function(){var i=!1,n=t(this);n.find("ul li").each(function(){var t=n.css("display")==="none";n.is(":visible")?i=!0:t||(i=!0)});i||n.hide()})}function c(){if(t(".tab-item").parent("li").show(),t(".tabs-content").length){var n="";t(".tabs-content > .content").each(function(){var i=t(this);i.hasClass("active")&&(n=i.attr("id"))});t("#ViewsDrop li").show();t("#ViewsDrop").find('[data-tab="#'+n+'"]').closest("li").hide()}}var f=t("#Toolbar"),u=t("#ViewsDrop"),o=t("#ShareDrop"),s=t("#ToolsDrop");n.closeDropDownIfChildItemClicked=function(){t("#Toolbar .f-dropdown > li").on("click",function(){t(this).closest(".toolbar-item").trigger("click")})};n.removeTabLinkIfTabIsEmpty=function(n){t(n).find(".tab-trigger").each(function(){var i=t(this),n=i.attr("data-tab");if(n!=="#ContentTab"&&t(n).find("*").length<20){var u=t(n).html(),f=u!==r?t.trim(u.replace(/(<([^>]+)>)/ig,"")):1;f.length===0&&i.parent("li").remove()}})};n.hideTabIfDropdownIsEmpty=function(){for(var t,i=[o,s],n=0;n<i.length;n++)t=i[n],t.children("li").length<1&&t.parent().hide();u.children("li").length<2&&u.parent().hide()};n.toggleTabContent=function(){t(".tab-trigger").on("click",function(n){n.preventDefault();var f=t(this),r=f.attr("data-tab"),u=t(r);u.siblings().removeClass("active");u.addClass("active");r==="#FigureTab"&&i.trigger("scroll");e()})};n.styleToolbarStates=function(){f.on("click",".toolbar-item",function(){var n=t(this);n.addClass("clicked");n.siblings().removeClass("clicked")});i.on("click",function(){t(".toolbar-item").each(function(){var n=t(this);n.find("ul").hasClass("open")||n.removeClass("clicked")})})};n.initArticleContentFilter=function(){var l=t("#ContentTab .widget-ArticleFulltext"),e,o,s,f;if(l.length){var n=t('.widget-items[data-widgetname="ArticleFulltext"]').children(),i=u.children(".article-content-filter"),v=t("#ContentTabFilteredView");i.filter('[data-content-filter="article-content"]').hide();e=n.filter(".table-wrap, .fig-section").add(n.has(".table-wrap, .fig-section"));e.length===0&&i.remove('[data-content-filter="figures-tables"]');o=n.filter(".video-section");o.length===0&&i.remove('[data-content-filter="video"]');s=n.filter(".audio-section");s.length===0&&i.remove('[data-content-filter="audio"]');f=t(".widget-ArticleDataSupplements, .supplementary-material");f.length===0&&i.remove('[data-content-filter="supplementary-data"]');var h=t("#ContentTab").find("div.downloadImagesppt"),c=t("#ContentTab").find("div.comments"),a=function(n){n.filter(".fig-section:not(:has(a[restricted]))").length?h.show():h.hide()};i.on("click",function(){t(this).hide();t(this).siblings().show();var u=t(this).attr("data-content-filter"),l=t(".article-metadata-standalone-panel"),i;u==="figures-tables"?i=e:u==="video"?i=o:u==="audio"?i=s:u==="supplementary-data"&&(i=f);i!==r&&i!==null&&i.length?(n.hide(),f.hide(),i.show(),c.hide(),a(i)):(n.show(),l.children().length>0?l.show():l.hide(),f.show(),c.show(),h.hide());SCM.SiteJS.restrictedImages()})}};n.init=function(){f.length&&(e(),n.removeTabLinkIfTabIsEmpty(u),n.styleToolbarStates(),n.toggleTabContent(),n.initArticleContentFilter(),n.hideTabIfDropdownIsEmpty())}}(SCM.Toolbar=SCM.Toolbar||{},jQuery,$(document)),function(n){"use strict";function t(n,t,i){return n.addEventListener?n.addEventListener(t,i,!1):n.attachEvent?n.attachEvent("on"+t,i):void 0}function i(n,t){for(var i=0,r=n.length;r>i;i++)if(n[i]===t)return!0;return!1}function r(n,t){var i;n.createTextRange?(i=n.createTextRange(),i.move("character",t),i.select()):n.selectionStart&&(n.focus(),n.setSelectionRange(t,t))}function u(n,t){try{return n.type=t,!0}catch(i){return!1}}n.Placeholders={Utils:{addEventListener:t,inArray:i,moveCaret:r,changeType:u}}}(this),function(n){"use strict";function nt(){}function tt(){try{return document.activeElement}catch(n){}}function v(n,t){var i,r,u=!!t&&n.value!==t,e=n.value===n.getAttribute(f);return(u||e)&&"true"===n.getAttribute(h)?(n.removeAttribute(h),n.value=n.value.replace(n.getAttribute(f),""),n.className=n.className.replace(gt,""),r=n.getAttribute(w),parseInt(r,10)>=0&&(n.setAttribute("maxLength",r),n.removeAttribute(w)),i=n.getAttribute(a),i&&(n.type=i),!0):!1}function b(n){var t,r,u=n.getAttribute(f);return""===n.value&&u?(n.setAttribute(h,"true"),n.value=u,n.className+=" "+g,r=n.getAttribute(w),r||(n.setAttribute(w,n.maxLength),n.removeAttribute("maxLength")),t=n.getAttribute(a),t?n.type="text":"password"===n.type&&i.changeType(n,"text")&&n.setAttribute(a,"password"),!0):!1}function it(n,t){var r,s,u,o,h,l,i;if(n&&n.getAttribute(f))t(n);else for(u=n?n.getElementsByTagName("input"):e,o=n?n.getElementsByTagName("textarea"):c,r=u?u.length:0,s=o?o.length:0,i=0,l=r+s;l>i;i++)h=r>i?u[i]:o[i-r],t(h)}function rt(n){it(n,v)}function at(n){it(n,b)}function vt(n){return function(){y&&n.value===n.getAttribute(f)&&"true"===n.getAttribute(h)?i.moveCaret(n,0):v(n)}}function yt(n){return function(){b(n)}}function pt(n){return function(t){return k=n.value,"true"===n.getAttribute(h)&&k===n.getAttribute(f)&&i.inArray(dt,t.keyCode)?(t.preventDefault&&t.preventDefault(),!1):void 0}}function wt(n){return function(){v(n,k);""===n.value&&(n.blur(),i.moveCaret(n,0))}}function bt(n){return function(){n===tt()&&n.value===n.getAttribute(f)&&"true"===n.getAttribute(h)&&i.moveCaret(n,0)}}function kt(n){return function(){rt(n)}}function ut(n){n.form&&(o=n.form,"string"==typeof o&&(o=document.getElementById(o)),o.getAttribute(st)||(i.addEventListener(o,"submit",kt(o)),o.setAttribute(st,"true")));i.addEventListener(n,"focus",vt(n));i.addEventListener(n,"blur",yt(n));y&&(i.addEventListener(n,"keydown",pt(n)),i.addEventListener(n,"keyup",wt(n)),i.addEventListener(n,"click",bt(n)));n.setAttribute(ht,"true");n.setAttribute(f,r);(y||n!==tt())&&b(n)}var e,c,y,ft,k,l,d,r,et,o,t,p,u,ot=["text","search","url","tel","email","password","number","textarea"],dt=[27,33,34,35,36,37,38,39,40,8,46],g="placeholdersjs",gt=RegExp("(?:^|\\s)"+g+"(?!\\S)"),f="data-placeholder-value",h="data-placeholder-active",a="data-placeholder-type",st="data-placeholder-submit",ht="data-placeholder-bound",w="data-placeholder-maxlength",ni=document.createElement("input"),ct=document.getElementsByTagName("head")[0],lt=document.documentElement,s=n.Placeholders,i=s.Utils;if(s.nativeSupport=void 0!==ni.placeholder,!s.nativeSupport){for(e=document.getElementsByTagName("input"),c=document.getElementsByTagName("textarea"),y="false"===lt.getAttribute("data-placeholder-focus"),ft="false"!==lt.getAttribute("data-placeholder-live"),l=document.createElement("style"),l.type="text/css",d=document.createTextNode("."+g+" { color:#ccc; }"),l.styleSheet?l.styleSheet.cssText=d.nodeValue:l.appendChild(d),ct.insertBefore(l,ct.firstChild),u=0,p=e.length+c.length;p>u;u++)t=e.length>u?e[u]:c[u-e.length],r=t.attributes.placeholder,r&&(r=r.nodeValue,r&&i.inArray(ot,t.type)&&ut(t));et=setInterval(function(){for(u=0,p=e.length+c.length;p>u;u++)t=e.length>u?e[u]:c[u-e.length],r=t.attributes.placeholder,r?(r=r.nodeValue,r&&i.inArray(ot,t.type)&&(t.getAttribute(ht)||ut(t),(r!==t.getAttribute(f)||"password"===t.type&&!t.getAttribute(a))&&("password"===t.type&&!t.getAttribute(a)&&i.changeType(t,"text")&&t.setAttribute(a,"password"),t.value===t.getAttribute(f)&&(t.value=r),t.setAttribute(f,r)))):t.getAttribute(h)&&(v(t),t.removeAttribute(f));ft||clearInterval(et)},100)}i.addEventListener(n,"beforeunload",function(){s.disable()});s.disable=s.nativeSupport?nt:rt;s.enable=s.nativeSupport?nt:at}(this);
/*!
 * jScrollPane - v2.0.23 - 2016-01-28
 * http://jscrollpane.kelvinluck.com/
 *
 * Copyright (c) 2014 Kelvin Luck
 * Dual licensed under the MIT or GPL licenses.
 */
!function(n){"function"==typeof define&&define.amd?define(["jquery"],n):"object"==typeof exports?module.exports=n(require("jquery")):n(jQuery)}(function(n){n.fn.jScrollPane=function(t){function i(t,i){function fi(i){var c,k,d,v,y,w,g=!1,nt=!1;if(r=i,void 0===u)y=t.scrollTop(),w=t.scrollLeft(),t.css({overflow:"hidden",padding:0}),o=t.innerWidth()+et,e=t.innerHeight(),t.width(o),u=n('<div class="jspPane" />').css("padding",ci).append(t.children()),f=n('<div class="jspContainer" />').css({width:o+"px",height:e+"px"}).append(u).appendTo(t);else{if(t.css("width",""),g=r.stickToBottom&&fr(),nt=r.stickToRight&&er(),v=t.innerWidth()+et!=o||t.outerHeight()!=e,v&&(o=t.innerWidth()+et,e=t.innerHeight(),f.css({width:o+"px",height:e+"px"})),!v&&ki==a&&u.outerHeight()==l)return void t.width(o);ki=a;u.css("width","");t.width(o);f.find(">.jspVerticalBar,>.jspHorizontalBar").remove().end()}u.css("overflow","auto");a=i.contentWidth?i.contentWidth:u[0].scrollWidth;l=u[0].scrollHeight;u.css("overflow","");si=a/o;dt=l/e;b=dt>1;p=si>1;p||b?(t.addClass("jspScrollable"),c=r.maintainPosition&&(s||h),c&&(k=it(),d=rt()),di(),gi(),nr(),c&&(ct(nt?a-o:k,!1),tt(g?l-e:d,!1)),hr(),or(),pr(),r.enableKeyboardNavigation&&lr(),r.clickOnTrack&&ir(),vr(),r.hijackInternalLinks&&yr()):(t.removeClass("jspScrollable"),u.css({top:0,left:0,width:f.width()-et}),sr(),cr(),ar(),wi());r.autoReinitialise&&!vt?vt=setInterval(function(){fi(r)},r.autoReinitialiseDelay):!r.autoReinitialise&&vt&&clearInterval(vt);y&&t.scrollTop(0)&&tt(y,!1);w&&t.scrollLeft(0)&&ct(w,!1);t.trigger("jsp-initialised",[p||b])}function di(){b&&(f.append(n('<div class="jspVerticalBar" />').append(n('<div class="jspCap jspCapTop" />'),n('<div class="jspTrack" />').append(n('<div class="jspDrag" />').append(n('<div class="jspDragTop" />'),n('<div class="jspDragBottom" />'))),n('<div class="jspCap jspCapBottom" />'))),gt=f.find(">.jspVerticalBar"),d=gt.find(">.jspTrack"),v=d.find(">.jspDrag"),r.showArrows&&(yt=n('<a class="jspArrow jspArrowUp" />').bind("mousedown.jsp",nt(0,-1)).bind("click.jsp",lt),pt=n('<a class="jspArrow jspArrowDown" />').bind("mousedown.jsp",nt(0,1)).bind("click.jsp",lt),r.arrowScrollOnHover&&(yt.bind("mouseover.jsp",nt(0,-1,yt)),pt.bind("mouseover.jsp",nt(0,1,pt))),pi(d,r.verticalArrowPositions,yt,pt)),at=e,f.find(">.jspVerticalBar>.jspCap:visible,>.jspVerticalBar>.jspArrow").each(function(){at-=n(this).outerHeight()}),v.hover(function(){v.addClass("jspHover")},function(){v.removeClass("jspHover")}).bind("mousedown.jsp",function(t){n("html").bind("dragstart.jsp selectstart.jsp",lt);v.addClass("jspActive");var i=t.pageY-v.position().top;return n("html").bind("mousemove.jsp",function(n){ot(n.pageY-i,!1)}).bind("mouseup.jsp mouseleave.jsp",bi),!1}),vi())}function vi(){d.height(at+"px");s=0;hi=r.verticalGutter+d.outerWidth();u.width(o-hi-et);try{0===gt.position().left&&u.css("margin-left",hi+"px")}catch(n){}}function gi(){p&&(f.append(n('<div class="jspHorizontalBar" />').append(n('<div class="jspCap jspCapLeft" />'),n('<div class="jspTrack" />').append(n('<div class="jspDrag" />').append(n('<div class="jspDragLeft" />'),n('<div class="jspDragRight" />'))),n('<div class="jspCap jspCapRight" />'))),ni=f.find(">.jspHorizontalBar"),g=ni.find(">.jspTrack"),y=g.find(">.jspDrag"),r.showArrows&&(wt=n('<a class="jspArrow jspArrowLeft" />').bind("mousedown.jsp",nt(-1,0)).bind("click.jsp",lt),bt=n('<a class="jspArrow jspArrowRight" />').bind("mousedown.jsp",nt(1,0)).bind("click.jsp",lt),r.arrowScrollOnHover&&(wt.bind("mouseover.jsp",nt(-1,0,wt)),bt.bind("mouseover.jsp",nt(1,0,bt))),pi(g,r.horizontalArrowPositions,wt,bt)),y.hover(function(){y.addClass("jspHover")},function(){y.removeClass("jspHover")}).bind("mousedown.jsp",function(t){n("html").bind("dragstart.jsp selectstart.jsp",lt);y.addClass("jspActive");var i=t.pageX-y.position().left;return n("html").bind("mousemove.jsp",function(n){ht(n.pageX-i,!1)}).bind("mouseup.jsp mouseleave.jsp",bi),!1}),st=f.innerWidth(),yi())}function yi(){f.find(">.jspHorizontalBar>.jspCap:visible,>.jspHorizontalBar>.jspArrow").each(function(){st-=n(this).outerWidth()});g.width(st+"px");h=0}function nr(){if(p&&b){var t=g.outerHeight(),i=d.outerWidth();at-=t;n(ni).find(">.jspCap:visible,>.jspArrow").each(function(){st+=n(this).outerWidth()});st-=i;e-=i;o-=t;g.parent().append(n('<div class="jspCorner" />').css("width",t+"px"));vi();yi()}p&&u.width(f.outerWidth()-et+"px");l=u.outerHeight();dt=l/e;p&&(ft=Math.ceil(1/si*st),ft>r.horizontalDragMaxWidth?ft=r.horizontalDragMaxWidth:ft<r.horizontalDragMinWidth&&(ft=r.horizontalDragMinWidth),y.width(ft+"px"),k=st-ft,oi(h));b&&(ut=Math.ceil(1/dt*at),ut>r.verticalDragMaxHeight?ut=r.verticalDragMaxHeight:ut<r.verticalDragMinHeight&&(ut=r.verticalDragMinHeight),v.height(ut+"px"),w=at-ut,ei(s))}function pi(n,t,i,r){var e,u="before",f="after";"os"==t&&(t=/Mac/.test(navigator.platform)?"after":"split");t==u?f=t:t==f&&(u=t,e=i,i=r,r=e);n[u](i)[f](r)}function nt(n,t,i){return function(){return tr(n,t,this,i),this.blur(),!1}}function tr(t,i,u,f){u=n(u).addClass("jspActive");var o,e,s=!0,h=function(){0!==t&&c.scrollByX(t*r.arrowButtonSpeed);0!==i&&c.scrollByY(i*r.arrowButtonSpeed);e=setTimeout(h,s?r.initialDelay:r.arrowRepeatFreq);s=!1};h();o=f?"mouseout.jsp":"mouseup.jsp";f=f||n("html");f.bind(o,function(){u.removeClass("jspActive");e&&clearTimeout(e);e=null;f.unbind(o)})}function ir(){wi();b&&d.bind("mousedown.jsp",function(t){if(void 0===t.originalTarget||t.originalTarget==t.currentTarget){var i,f=n(this),v=f.offset(),o=t.pageY-v.top-s,h=!0,a=function(){var p=f.offset(),n=t.pageY-p.top-ut/2,v=e*r.scrollPagePercent,y=w*v/(l-e);if(0>o)s-y>n?c.scrollByY(-v):ot(n);else{if(!(o>0))return void u();n>s+y?c.scrollByY(v):ot(n)}i=setTimeout(a,h?r.initialDelay:r.trackClickRepeatFreq);h=!1},u=function(){i&&clearTimeout(i);i=null;n(document).unbind("mouseup.jsp",u)};return a(),n(document).bind("mouseup.jsp",u),!1}});p&&g.bind("mousedown.jsp",function(t){if(void 0===t.originalTarget||t.originalTarget==t.currentTarget){var i,f=n(this),v=f.offset(),e=t.pageX-v.left-h,s=!0,l=function(){var p=f.offset(),n=t.pageX-p.left-ft/2,v=o*r.scrollPagePercent,y=k*v/(a-o);if(0>e)h-y>n?c.scrollByX(-v):ht(n);else{if(!(e>0))return void u();n>h+y?c.scrollByX(v):ht(n)}i=setTimeout(l,s?r.initialDelay:r.trackClickRepeatFreq);s=!1},u=function(){i&&clearTimeout(i);i=null;n(document).unbind("mouseup.jsp",u)};return l(),n(document).bind("mouseup.jsp",u),!1}})}function wi(){g&&g.unbind("mousedown.jsp");d&&d.unbind("mousedown.jsp")}function bi(){n("html").unbind("dragstart.jsp selectstart.jsp mousemove.jsp mouseup.jsp mouseleave.jsp");v&&v.removeClass("jspActive");y&&y.removeClass("jspActive")}function ot(i,u){var f;if(b&&(0>i?i=0:i>w&&(i=w),f=new n.Event("jsp-will-scroll-y"),t.trigger(f,[i]),!f.isDefaultPrevented())){var o=i||0,s=0===o,h=o==w,y=i/w,a=-y*(l-e);void 0===u&&(u=r.animateScroll);u?c.animate(v,"top",i,ei,function(){t.trigger("jsp-user-scroll-y",[-a,s,h])}):(v.css("top",i),ei(i),t.trigger("jsp-user-scroll-y",[-a,s,h]))}}function ei(n){void 0===n&&(n=v.position().top);f.scrollTop(0);s=n||0;var i=0===s,r=s==w,h=n/w,o=-h*(l-e);(ti!=i||ri!=r)&&(ti=i,ri=r,t.trigger("jsp-arrow-change",[ti,ri,ii,ui]));rr(i,r);u.css("top",o);t.trigger("jsp-scroll-y",[-o,i,r]).trigger("scroll")}function ht(i,u){var f;if(p&&(0>i?i=0:i>k&&(i=k),f=new n.Event("jsp-will-scroll-x"),t.trigger(f,[i]),!f.isDefaultPrevented())){var e=i||0,s=0===e,h=e==k,v=i/k,l=-v*(a-o);void 0===u&&(u=r.animateScroll);u?c.animate(y,"left",i,oi,function(){t.trigger("jsp-user-scroll-x",[-l,s,h])}):(y.css("left",i),oi(i),t.trigger("jsp-user-scroll-x",[-l,s,h]))}}function oi(n){void 0===n&&(n=y.position().left);f.scrollTop(0);h=n||0;var i=0===h,r=h==k,s=n/k,e=-s*(a-o);(ii!=i||ui!=r)&&(ii=i,ui=r,t.trigger("jsp-arrow-change",[ti,ri,ii,ui]));ur(i,r);u.css("left",e);t.trigger("jsp-scroll-x",[-e,i,r]).trigger("scroll")}function rr(n,t){r.showArrows&&(yt[n?"addClass":"removeClass"]("jspDisabled"),pt[t?"addClass":"removeClass"]("jspDisabled"))}function ur(n,t){r.showArrows&&(wt[n?"addClass":"removeClass"]("jspDisabled"),bt[t?"addClass":"removeClass"]("jspDisabled"))}function tt(n,t){var i=n/(l-e);ot(i*w,t)}function ct(n,t){var i=n/(a-o);ht(i*k,t)}function kt(t,i,u){var s,v,y,p,w,b,k,l,a,h=0,c=0;try{s=n(t)}catch(d){return}for(v=s.outerHeight(),y=s.outerWidth(),f.scrollTop(0),f.scrollLeft(0);!s.is(".jspPane");)if(h+=s.position().top,c+=s.position().left,s=s.offsetParent(),/^body|html$/i.test(s[0].nodeName))return;p=rt();b=p+e;p>h||i?l=h-r.horizontalGutter:h+v>b&&(l=h-e+v+r.horizontalGutter);isNaN(l)||tt(l,u);w=it();k=w+o;w>c||i?a=c-r.horizontalGutter:c+y>k&&(a=c-o+y+r.horizontalGutter);isNaN(a)||ct(a,u)}function it(){return-u.position().left}function rt(){return-u.position().top}function fr(){var n=l-e;return n>20&&n-rt()<10}function er(){var n=a-o;return n>20&&n-it()<10}function or(){f.unbind(ai).bind(ai,function(n,t,i,u){h||(h=0);s||(s=0);var e=h,o=s,f=n.deltaFactor||r.mouseWheelSpeed;return c.scrollBy(i*f,-u*f,!1),e==h&&o==s})}function sr(){f.unbind(ai)}function lt(){return!1}function hr(){u.find(":input,a").unbind("focus.jsp").bind("focus.jsp",function(n){kt(n.target,!1)})}function cr(){u.find(":input,a").unbind("focus.jsp")}function lr(){function v(){var n=h,t=s;switch(i){case 40:c.scrollByY(r.keyboardSpeed,!1);break;case 38:c.scrollByY(-r.keyboardSpeed,!1);break;case 34:case 32:c.scrollByY(e*r.scrollPagePercent,!1);break;case 33:c.scrollByY(-e*r.scrollPagePercent,!1);break;case 39:c.scrollByX(r.keyboardSpeed,!1);break;case 37:c.scrollByX(-r.keyboardSpeed,!1)}return a=n!=h||t!=s}var i,a,o=[];p&&o.push(ni[0]);b&&o.push(gt[0]);u.bind("focus.jsp",function(){t.focus()});t.attr("tabindex",0).unbind("keydown.jsp keypress.jsp").bind("keydown.jsp",function(t){if(t.target===this||o.length&&n(t.target).closest(o).length){var r=h,u=s;switch(t.keyCode){case 40:case 38:case 34:case 32:case 33:case 39:case 37:i=t.keyCode;v();break;case 35:tt(l-e);i=null;break;case 36:tt(0);i=null}return a=t.keyCode==i&&r!=h||u!=s,!a}}).bind("keypress.jsp",function(t){return t.keyCode==i&&v(),t.target===this||o.length&&n(t.target).closest(o).length?!a:void 0});r.hideFocus?(t.css("outline","none"),"hideFocus"in f[0]&&t.attr("hideFocus",!0)):(t.css("outline",""),"hideFocus"in f[0]&&t.attr("hideFocus",!1))}function ar(){t.attr("tabindex","-1").removeAttr("tabindex").unbind("keydown.jsp keypress.jsp");u.unbind(".jsp")}function vr(){if(location.hash&&location.hash.length>1){var t,r,i=escape(location.hash.substr(1));try{t=n("#"+i+', a[name="'+i+'"]')}catch(e){return}t.length&&u.find(i)&&(0===f.scrollTop()?r=setInterval(function(){f.scrollTop()>0&&(kt(t,!0),n(document).scrollTop(f.position().top),clearInterval(r))},50):(kt(t,!0),n(document).scrollTop(f.position().top)))}}function yr(){n(document.body).data("jspHijack")||(n(document.body).data("jspHijack",!0),n(document.body).delegate('a[href*="#"]',"click",function(t){var u,i,r,o,f,e,h=this.href.substr(0,this.href.indexOf("#")),s=location.href;if(-1!==location.href.indexOf("#")&&(s=location.href.substr(0,location.href.indexOf("#"))),h===s){u=escape(this.href.substr(this.href.indexOf("#")+1));try{i=n("#"+u+', a[name="'+u+'"]')}catch(c){return}i.length&&(r=i.closest(".jspScrollable"),o=r.data("jsp"),o.scrollToElement(i,!0),r[0].scrollIntoView&&(f=n(window).scrollTop(),e=i.offset().top,(f>e||e>f+n(window).height())&&r[0].scrollIntoView()),t.preventDefault())}}))}function pr(){var u,e,t,i,n,r=!1;f.unbind("touchstart.jsp touchmove.jsp touchend.jsp click.jsp-touchclick").bind("touchstart.jsp",function(f){var o=f.originalEvent.touches[0];u=it();e=rt();t=o.pageX;i=o.pageY;n=!1;r=!0}).bind("touchmove.jsp",function(f){if(r){var o=f.originalEvent.touches[0],l=h,a=s;return c.scrollTo(u+t-o.pageX,e+i-o.pageY),n=n||Math.abs(t-o.pageX)>5||Math.abs(i-o.pageY)>5,l==h&&a==s}}).bind("touchend.jsp",function(){r=!1}).bind("click.jsp-touchclick",function(){if(n)return(n=!1,!1)})}function wr(){var n=rt(),i=it();t.removeClass("jspScrollable").unbind(".jsp");u.unbind(".jsp");t.replaceWith(li.append(u.children()));li.scrollTop(n);li.scrollLeft(i);vt&&clearInterval(vt)}var r,u,o,e,f,a,l,si,dt,b,p,v,w,s,y,k,h,gt,d,hi,at,ut,yt,pt,ni,g,st,ft,wt,bt,vt,ci,et,ki,c=this,ti=!0,ii=!0,ri=!1,ui=!1,li=t.clone(!1,!1).empty(),ai=n.fn.mwheelIntent?"mwheelIntent.jsp":"mousewheel.jsp";"border-box"===t.css("box-sizing")?(ci=0,et=0):(ci=t.css("paddingTop")+" "+t.css("paddingRight")+" "+t.css("paddingBottom")+" "+t.css("paddingLeft"),et=(parseInt(t.css("paddingLeft"),10)||0)+(parseInt(t.css("paddingRight"),10)||0));n.extend(c,{reinitialise:function(t){t=n.extend({},r,t);fi(t)},scrollToElement:function(n,t,i){kt(n,t,i)},scrollTo:function(n,t,i){ct(n,i);tt(t,i)},scrollToX:function(n,t){ct(n,t)},scrollToY:function(n,t){tt(n,t)},scrollToPercentX:function(n,t){ct(n*(a-o),t)},scrollToPercentY:function(n,t){tt(n*(l-e),t)},scrollBy:function(n,t,i){c.scrollByX(n,i);c.scrollByY(t,i)},scrollByX:function(n,t){var i=it()+Math[0>n?"floor":"ceil"](n),r=i/(a-o);ht(r*k,t)},scrollByY:function(n,t){var i=rt()+Math[0>n?"floor":"ceil"](n),r=i/(l-e);ot(r*w,t)},positionDragX:function(n,t){ht(n,t)},positionDragY:function(n,t){ot(n,t)},animate:function(n,t,i,u,f){var e={};e[t]=i;n.animate(e,{duration:r.animateDuration,easing:r.animateEase,queue:!1,step:u,complete:f})},getContentPositionX:function(){return it()},getContentPositionY:function(){return rt()},getContentWidth:function(){return a},getContentHeight:function(){return l},getPercentScrolledX:function(){return it()/(a-o)},getPercentScrolledY:function(){return rt()/(l-e)},getIsScrollableH:function(){return p},getIsScrollableV:function(){return b},getContentPane:function(){return u},scrollToBottom:function(n){ot(w,n)},hijackInternalLinks:n.noop,destroy:function(){wr()}});fi(i)}return t=n.extend({},n.fn.jScrollPane.defaults,t),n.each(["arrowButtonSpeed","trackClickSpeed","keyboardSpeed"],function(){t[this]=t[this]||t.speed}),this.each(function(){var r=n(this),u=r.data("jsp");u?u.reinitialise(t):(n("script",r).filter('[type="text/javascript"],:not([type])').remove(),u=new i(r,t),r.data("jsp",u))})};n.fn.jScrollPane.defaults={showArrows:!1,maintainPosition:!0,stickToBottom:!1,stickToRight:!1,clickOnTrack:!0,autoReinitialise:!1,autoReinitialiseDelay:500,verticalDragMinHeight:0,verticalDragMaxHeight:99999,horizontalDragMinWidth:0,horizontalDragMaxWidth:99999,contentWidth:void 0,animateScroll:!1,animateDuration:300,animateEase:"linear",hijackInternalLinks:!1,verticalGutter:4,horizontalGutter:4,mouseWheelSpeed:3,arrowButtonSpeed:0,arrowRepeatFreq:50,arrowScrollOnHover:!1,trackClickSpeed:0,trackClickRepeatFreq:70,verticalArrowPositions:"split",horizontalArrowPositions:"split",enableKeyboardNavigation:!0,hideFocus:!1,keyboardSpeed:0,initialDelay:300,speed:30,scrollPagePercent:.8}});
/*!
 * jQuery Mousewheel 3.1.12
 *
 * Copyright 2014 jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */
(function(n){typeof define=="function"&&define.amd?define(["jquery"],n):typeof exports=="object"?module.exports=n:n(jQuery)})(function(n){function e(r){var f=r||window.event,w=h.call(arguments,1),l=0,o=0,e=0,a=0,b=0,k=0,v,y,p;if(r=n.event.fix(f),r.type="mousewheel","detail"in f&&(e=f.detail*-1),"wheelDelta"in f&&(e=f.wheelDelta),"wheelDeltaY"in f&&(e=f.wheelDeltaY),"wheelDeltaX"in f&&(o=f.wheelDeltaX*-1),"axis"in f&&f.axis===f.HORIZONTAL_AXIS&&(o=e*-1,e=0),l=e===0?o:e,"deltaY"in f&&(e=f.deltaY*-1,l=e),"deltaX"in f&&(o=f.deltaX,e===0&&(l=o*-1)),e!==0||o!==0)return f.deltaMode===1?(v=n.data(this,"mousewheel-line-height"),l*=v,e*=v,o*=v):f.deltaMode===2&&(y=n.data(this,"mousewheel-page-height"),l*=y,e*=y,o*=y),a=Math.max(Math.abs(e),Math.abs(o)),(!t||a<t)&&(t=a,s(f,a)&&(t/=40)),s(f,a)&&(l/=40,o/=40,e/=40),l=Math[l>=1?"floor":"ceil"](l/t),o=Math[o>=1?"floor":"ceil"](o/t),e=Math[e>=1?"floor":"ceil"](e/t),i.settings.normalizeOffset&&this.getBoundingClientRect&&(p=this.getBoundingClientRect(),b=r.clientX-p.left,k=r.clientY-p.top),r.deltaX=o,r.deltaY=e,r.deltaFactor=t,r.offsetX=b,r.offsetY=k,r.deltaMode=0,w.unshift(r,l,o,e),u&&clearTimeout(u),u=setTimeout(c,200),(n.event.dispatch||n.event.handle).apply(this,w)}function c(){t=null}function s(n,t){return i.settings.adjustOldDeltas&&n.type==="mousewheel"&&t%120==0}var o=["wheel","mousewheel","DOMMouseScroll","MozMousePixelScroll"],r="onwheel"in document||document.documentMode>=9?["wheel"]:["mousewheel","DomMouseScroll","MozMousePixelScroll"],h=Array.prototype.slice,u,t,f,i;if(n.event.fixHooks)for(f=o.length;f;)n.event.fixHooks[o[--f]]=n.event.mouseHooks;i=n.event.special.mousewheel={version:"3.1.12",setup:function(){if(this.addEventListener)for(var t=r.length;t;)this.addEventListener(r[--t],e,!1);else this.onmousewheel=e;n.data(this,"mousewheel-line-height",i.getLineHeight(this));n.data(this,"mousewheel-page-height",i.getPageHeight(this))},teardown:function(){if(this.removeEventListener)for(var t=r.length;t;)this.removeEventListener(r[--t],e,!1);else this.onmousewheel=null;n.removeData(this,"mousewheel-line-height");n.removeData(this,"mousewheel-page-height")},getLineHeight:function(t){var r=n(t),i=r["offsetParent"in n.fn?"offsetParent":"parent"]();return i.length||(i=n("body")),parseInt(i.css("fontSize"),10)||parseInt(r.css("fontSize"),10)||16},getPageHeight:function(t){return n(t).height()},settings:{adjustOldDeltas:!0,normalizeOffset:!0}};n.fn.extend({mousewheel:function(n){return n?this.bind("mousewheel",n):this.trigger("mousewheel")},unmousewheel:function(n){return this.unbind("mousewheel",n)}})});SCM=SCM||{},function(n,t){n.initDatepicker=function(){var n,u,i,r;t(".ui-datepicker-trigger").remove();n=t(".datepicker__input");u=t(".ui-datepicker");n.removeClass("hasDatepicker");n.datepicker({showOn:"both",buttonImage:"/UI/app/svg/general-calendar.svg",onClose:function(){n.removeClass("hasDatepicker");r?(r.focus(),r=null):t(this).siblings(".ui-datepicker-trigger").focus()}}).keydown(function(n){var r,u,i;if(n.preventDefault(),r=n.keyCode||n.which,r!==9||r!==13)if(r===37||r===38||r===39||r===40){u=t(this).val().split("/");i=new Date(u[2],u[0]-1,u[1]);switch(r){case 37:i.setDate(i.getDate()-1);break;case 38:i.setDate(i.getDate()-7);break;case 39:i.setDate(i.getDate()+1);break;case 40:i.setDate(i.getDate()+7)}i!==null&&t(this).datepicker("setDate",i)}else return!1});i=t(".ui-datepicker-trigger");n.attr("tabindex",-1);i.attr("tabindex",0);i.each(function(){var n=t(this),i=n.siblings("input").attr("id");n.attr("aria-label","open "+i+" datepicker, use arrows to select date")});i.keypress(function(){r=t(this)})}}(SCM.AccessibleDatepicker=SCM.AccessibleDatepicker||{},jQuery);SCM=SCM||{};SCM.ClientStatsMaster=function(n){function i(n,t,i,r,u,f){this.SourceType=n;this.ActionType=t;this.ActionDescription=i;this.ActionUrl=r;this.SearchData=u;this.IsTurnaway=f}function t(t,r,u,f,e,o){var s=new i(t,r,u,f,e,o).toJson();n.ajax({type:"POST",url:"/Services/UserActionService.svc/TrackUserAction",data:s,contentType:"application/json; charset=utf-8",dataType:"json",async:!0,processData:!0}).fail(function(n,t){window.console&&(console.log("jqXhr.responseText: "+n.responseText),console.log("status: "+t))})}return i.prototype.toJson=function(){return JSON.stringify(this)},{trackContentTabEvents:function(){var r=n("#Toolbar"),i={"#FigureTab":"FiguresClicked","#TableTab":"TablesClicked","#ContentTab":"ArticleClicked","#SupplementTab":"SupplementClicked","#MultimediaTab":"MultimediaClicked"};r.on("click",".tab-trigger",function(){var r=n(this).attr("data-tab");r in i&&t(22,"View",i[r],window.location.href,"",!1)})},trackShares:function(){var r=n("#ShareDrop"),i={addthis_button_email:"EmailClicked",addthis_button_share:"TwitterClicked",addthis_button_facebook:"FacebookClicked"};r.on("click","a",function(){var r=n(this).attr("class");r in i&&t(22,"Share",i[r],window.location.href,"",!1)})},trackSingleAction:function(n,i,r){n.on("click",function(){t(22,i,r,window.location.href,"",!1)})}}}(jQuery);$(window).on("load",function(){SCM.ClientStatsMaster.trackContentTabEvents();SCM.ClientStatsMaster.trackShares();SCM.ClientStatsMaster.trackSingleAction($('a[data-reveal-id="getCitation"]'),"Tools","GetCitationClicked");SCM.ClientStatsMaster.trackSingleAction($("div.toolboxGetAlertsWidget"),"Tools","AlertsClicked");SCM.ClientStatsMaster.trackSingleAction($("div#getAlertsConfirmation"),"Tools","AlertAdded");SCM.ClientStatsMaster.trackSingleAction($("#PermissionsLink"),"Tools","GetPermissionsClicked");SCM.ClientStatsMaster.trackSingleAction($("a.tablelink").filter(":parent"),"ViewLargeImage","ViewLargeImageClicked")});SCM=SCM||{};SCM.JumpLinks=SCM.JumpLinks||{};SCM.JumpLinks=function(n){function e(){if(t=n("html, body"),i=n(".js-jumplink, .sectionLink"),t.hasClass("pg_article")||t.hasClass("pg_issue")){i.each(function(){var t=n(this),i=o(t.attr("href"));f.push({jumplink:t,target:i})});n(window).on("scroll",s)}i.on("click",function(i){if(t.hasClass("pg_issue")){var r=n(i.target),u=n.deparam.querystring(),f=1;u.page&&(f=Number.parseInt(u.page));r.data("page")!=0&&r.data("page")!=f&&(window.location="?page="+r.data("page")+r.attr("href"))}});t.hasClass("pg_articlesplitview")&&n(".js-jumplink:contains('References')").parents(".section-jump-link").hide()}function o(t){var i=n(t),r;return i.length===0&&t.startsWith("#")&&(r=t.substring(1),i=n("[data-legacy-id='"+r+"']")),i}function s(){u=window.scrollY;h()}function h(){r||(rAF=requestAnimationFrame(c),r=!0)}function c(){var i=n(".js-jumplink"),r=n.deparam.querystring();n(window).on("scroll",function(){var e=n(this).scrollTop(),o,u,s,h,f;n(".articleClientType").each(function(){var r=n(this).offset().top,u=n(this).attr("id"),t=n('.section-jump-link__link-wrap a[href="#'+u+'"]');r-90<e&&(n(t).length&&n(".list-issue-jumplinks li").removeClass("active"),i.removeClass("active"),n(t).closest(".js-jumplink").addClass("active"))});t.hasClass("pg_issue")&&!i.hasClass("active")&&(o=n("#ArticleListPageSize").val(),u=0,r.page&&(u=Number.parseInt(r.page)-1),s=u*o,f=n(".section-jump-link__link-wrap a"),f.each(function(t,i){if(i.dataset.ordinal>s)return n(h).closest(".js-jumplink").addClass("active"),!1;f.length-1==t&&n(i).closest(".js-jumplink").addClass("active");h=i}));n(".article-body").length&&n("#ContentColumn h2").each(function(){var r=n(this).offset().top,u=n(this).attr("id"),t=n('#InfoColumn .section-jump-link__link-wrap a[href="#'+u+'"]');r-90<e&&(n(t).length&&n(".jumplink-list li").removeClass("active"),i.removeClass("active"),n(t).closest(".js-jumplink").addClass("active"))})})}var t,i,u=0,f=[],r=!1;return{init:e}}(jQuery);SCM=SCM||{};SCM.StickyElements=SCM.StickyElements||{};SCM.StickyElements=function(n){function ut(){o=n("body");f=n(".master-container");h=n(".page-column--left");b=n(".toolbar-wrap");k=n(".page-column--left, .toolbar-wrap, .sr-filters, .article-browse-mobile-nav");u=n("section.master-header").height();r=n(".js-ad-banner-header");v=n("#hdnAdDelaySeconds").val();c=n("#hdnAdConfigurationTop").val();d=n("#hdnAdConfigurationRightRail").val();tt=n("#adBlockHeader iframe").length>0;$rightRailAdContainer=n("#Sidebar>div:last-of-type");p=n("#Sidebar>div:last-of-type>div");it=n("#Sidebar>div:last-of-type iframe").length>0;rt=n("#Sidebar.page-column--right").height();e=$rightRailAdContainer.height();v>0&&c==="scrolldelay"&&(y=!0,setTimeout(function(){y=!1;r.removeClass("fixed");f.removeClass("master-container-sticky")},v));o.hasClass("pg_article")&&(t="article",w=n(".article-browse-mobile-nav"));o.hasClass("pg_articlesbygroup")&&(t="articlebygroup");o.hasClass("pg_issue")&&(t="issue",a=n(".issue-browse-mobile-nav"));o.hasClass("pg_solr/searchresults")&&(t="search",$srFilters=n(".sr-filters"));o.hasClass("pg_selfserve/sspage")&&(t="selfserve");window.addEventListener("scroll",ft,!1);g()}function ft(){i=window.scrollY||window.pageYOffset;et()}function et(){l||(nt=requestAnimationFrame(g),l=!0)}function g(){function g(){return n("#adBlockHeader iframe").length>0}function v(){return n("#Sidebar>div:last-of-type iframe").length>0}l=!1;SCM.SiteJS.getViewportWidth()>1023&&t==="article"&&(i>=u-25?(b.addClass("fixed"),n(".article-body").addClass("hold-position")):n(".article-body").removeClass("hold-position"));var o;d==="sticky"&&v()&&(v()&&SCM.SiteJS.getViewportWidth()>1200?(t==="article"&&(s=50+n("#Sidebar.page-column--right").height()+n("section.master-header").height(),e=p.height(),o=s-e-80,i>=o?(n("#Sidebar.page-column--right").css("height",n("#Sidebar.page-column--right").height()),$rightRailAdContainer.addClass("fixed")):(n("#Sidebar.page-column--right").css("height","auto"),$rightRailAdContainer.removeClass("fixed"))),(t==="issue"||t==="search")&&(s=50+n("#Sidebar.page-column--right").height()+n("section.master-header").height(),e=p.height(),o=s-e-24,i>=o?(n("#Sidebar.page-column--right").css("height",n("#Sidebar.page-column--right").height()),$rightRailAdContainer.addClass("fixed")):(n("#Sidebar.page-column--right").css("height","auto"),$rightRailAdContainer.removeClass("fixed")))):$rightRailAdContainer.removeClass("fixed"),v()&&SCM.SiteJS.getViewportWidth()>1023?(t==="articlebygroup"&&n(".pg_articlesbygroup #Sidebar .widget:last-of-type").css("margin-bottom","0"),(t==="articlebygroup"||t==="selfserve")&&(s=50+n("#Sidebar.page-column--right").height()+n("section.master-header").height(),e=$rightRailAdContainer.height(),o=s-e-24,i>=o?(n("#Sidebar.page-column--right").css("height",n("#Sidebar.page-column--right").height()),$rightRailAdContainer.addClass("fixed")):(n("#Sidebar.page-column--right").css("height","auto"),$rightRailAdContainer.removeClass("fixed")))):$rightRailAdContainer.removeClass("fixed"));i>=u-25?(t==="article"&&(h.addClass("fixed"),w.addClass("fixed")),t==="search"&&SCM.SiteJS.getViewportWidth()<=1023&&$srFilters.addClass("fixed")):(t==="article"||t==="search")&&k.removeClass("fixed");i>=u+175&&t==="issue"?h.addClass("fixed"):t==="issue"&&h.removeClass("fixed");i>=u+190&&t==="issue"?a.addClass("fixed"):t==="issue"&&a.removeClass("fixed");c==="scrolldelay"&&y===!0&&g()&&(i>=u-290?(r.addClass("fixed"),f.addClass("master-container-sticky")):(r.removeClass("fixed"),f.removeClass("master-container-sticky")));c==="guardian"&&g()&&(i>=u-290&&i<220?(r.addClass("fixed"),r.removeClass("guardian-scrolled"),f.addClass("master-container-sticky"),n(".journal-header").show()):i>=220?(r.removeClass("fixed"),r.addClass("guardian-scrolled"),f.addClass("master-container-sticky"),n(".journal-header").hide()):(r.removeClass("fixed"),r.removeClass("guardian-scrolled"),f.removeClass("master-container-sticky"),n(".journal-header").show()))}var t="",i=window.scrollY||window.pageYOffset,l=!1,nt=null,o,w,a,h,b,k,u,r,c,d,v,y,tt,f,it,p,rt,s,e;return{init:ut}}(jQuery);SCM=SCM||{},function(n,t,r){var v=t("body"),w=t(".article-browse-mobile-nav"),b=t(".article-browse-mobile-nav-inner"),o=t(".search-wrap-filters"),s=!1,f=!1,e=!1,k=t(".navbar-search"),c=t(".navbar-search-container"),y=t(".js_close-navsearch"),p=t(".js_expand-navsearch"),l=t(".navbar-menu, .navbar-search-collapsed"),a=t(".navbar-search-advanced, .navbar-search-close, .navbar-search"),d=t(".toolbar-wrap"),g=t(".toolbar-inner-wrap"),u="Basic",h;t("#hfViewOption").val();n.setBlockLink=function(){t(document).on("click",".js-widget-dynamic-entry",function(n){var i=t(n.currentTarget).data("resource-url");i&&(window.location=i)})};n.setAllLinksTarget=function(){t("a[target]").not(".openInAnotherWindow").each(function(){t(this).attr("target","")})};n.getNewSelectedFilter=function(){var n=o.children("li");n.on("click",function(){var i=t(this);n.removeClass("selected");i.addClass("selected");SCM.SiteJS.setSelectedSearchFilter()})};n.initSelfServeNavigation=function(){var n=t('.js-selfserve-navigation-menu a[href="'+window.location.pathname+'"]');n.addClass("ss-currentPage");n.parents("ul.selfserve-nav-menu-child-list").addClass("open");n.parents("ul.selfserve-nav-menu-child-list").siblings("button.selfserve-subnav-toggle").removeClass("icon-general-arrow-filled-right").addClass("icon-general-arrow-filled-down")};n.toggleSelfServeNavigation=function(){t(".selfserve-subnav-toggle, .selfserve-parent-toggle").on("click",function(n){var i=t(this),r=t(this).siblings(".selfserve-sublist");n.preventDefault();i.hasClass("icon-general-arrow-filled-right")?i.removeClass("icon-general-arrow-filled-right").addClass("icon-general-arrow-filled-down"):i.removeClass("icon-general-arrow-filled-down").addClass("icon-general-arrow-filled-right");r.hasClass("open")?r.removeClass("open"):r.addClass("open")})};n.getViewportWidth=function(){return Math.max(document.documentElement.clientWidth,window.innerWidth||0)};n.initLazyLoad=function(){t("img.contentFigures, img.inlineGraphics, img.lazy").lazyload({skip_invisible:!1})};n.initFoundation=function(){t(document).foundation()};n.loadAllImagesIfUserIsAboutToUseJumpLinks=function(){t("#LeftNavSticker").hover(function(){t(".lazy").each(function(){var n=t(this);n.attr("src",n.attr("data-original"))})})};n.showAuthorInfo=function(){t(".al-author-name .linked-name, .al-author-name-more .linked-name, .linked-name-byline, .al-author-footnotes .js-linked-footnotes").on("click",function(n){n.stopPropagation();t(".al-author-info-wrap").removeAttr("style");t(this).siblings(".al-author-info-wrap").show();SCM.ScholarlyiQ.trackOnPageEvent("article-author-"+t(this).text())});t(document).click(function(){t(".al-author-info-wrap").hide().removeAttr("style")})};n.addAuthorFootnote=function(){t(".al-author-name, .al-author-name-more").each(function(){var n=t(this).find(".info-card-note .xref-fn"),i;n.length&&n.text()==="*"&&(i=t("<sup/>").append(n.html()),i.insertAfter(t(this).find(".linked-name")),n.remove());t(this).find(".info-author-correspondence").length&&t(this).find(".linked-name").append('<i class="icon-general-mail"><\/i>')})};n.showHideDropDown=function(){t(".selectDropdown").on("click",function(n){t(".dropdown").hide().removeClass("open");n.stopPropagation();t(this).siblings(".dropdown").slideToggle("300","linear").toggleClass("open")});t(document).click(function(){t(".dropdown").hide().removeClass("open")})};n.showMoreRelatedContent=function(n,i){t(n).click(function(){var n=t(this);n.closest(".related-section-box, .widget-RelatedBookContent").find(i).toggleClass("show-item");n.toggleClass("show-less").find("i").toggleClass("icon-show").toggleClass("icon-hide");n.hasClass("show-less")?n.find("span").text("See Less"):n.find("span").text("See More")})};n.showRelatedBookWidgetIfHasContent=function(){t(".widget-RelatedBookContent").each(function(){var n=t(this);n.find("*").length>5&&n.addClass("show")})};n.showSpinner=function(){function n(){t(".preloader-wrap").removeClass("hide").addClass("active")}SCM.QueryBuilder.defaults.beforeSearch=n;t(".pagination").on("click",n)};n.setSelectedSearchFilter=function(){var n=o.children(".selected").text();t(".selected-text").text(n)};n.initFilterClickEvent=function(){t(".filter-wrap").on("click",function(n){o.hide();n.stopPropagation();o.toggle()});t(document).click(function(){o.hide()})};n.launchGetCitationModal=function(){t('[data-reveal-id="getCitation"]').click(function(){t("#getCitation").foundation("reveal-modal","open")})};n.launchAddAlertModal=function(){t('[data-reveal-id="addArticleUpdateAlert"]').click(function(){t("#AddAlert").foundation("reveal-modal","open")})};n.launchEmailUserModal=function(){t('[data-reveal-id="emailUsernameModal"]').click(function(){t("#emailUserName").foundation("reveal-modal","open")})};n.closeNavbarSearch=function(){y.on("click",function(){l.fadeToggle();a.fadeToggle();c.toggleClass("active")})};n.expandNavbarSearch=function(){p.on("click",function(){c.toggleClass("active");l.fadeToggle();a.fadeToggle()})};n.toggleSearchCover=function(){t(".sf-facet").length&&t(".sf-facet").click(function(){t(document).ajaxStart(function(){t(".info-inner-cover").removeClass("uncovered");t(".info-inner-cover").addClass("covered")});t(document).ajaxComplete(function(){t(".info-inner-cover").removeClass("covered");t(".info-inner-cover").addClass("uncovered")})})};n.calculateResetState=function(n){s=n?!0:!1;SCM.SiteJS.resetMobileSiteNav(s)};n.toggleMobileLanguageSubmenu=function(){t(".mobile-header-language").on("click",function(){t(".mobile-language-submenu").slideToggle()})};n.toggleMobileSiteMenuSubnav=function(){t("div.dropdown-menu ul.site-menu li.site-menu-item").on("click",function(){var i=t(this),n=i.children(".mobile-nav-arrow");i.children("ul.site-menu").slideToggle();n.hasClass("icon-general_arrow-right")?n.removeClass("icon-general_arrow-right").addClass("icon-general_arrow-down"):n.removeClass("icon-general_arrow-down").addClass("icon-general_arrow-right")})};n.toggleMobileSignInForm=function(){var n=t(".mobile-login"),i=t(".mobile-signin-nav-arrow");t(".mobile-menu-link-wrap").on("click",function(){n.hasClass("open")||(n.addClass("open").slideToggle(),i.hide())});t(".site-menu .mobile-login-form").on("click",".mobile-login-icon",function(){n.removeClass("open").slideToggle();i.show()})};n.resetMobileSearchFilters=function(){t(".sf-facets, .sf-facet-list").removeAttr("style");t(".sf-group-header-icon").removeClass("icon-general_arrow-down").addClass("icon-general_arrow-right")};n.resetMobileSiteNav=function(n){t(".header-bottom, .navigation, #MicrositeSearch, .arrow-nav, .arrow-search, .mobile-language-submenu").removeAttr("style");t(".mobile-search-toggle, .mobile-menu-toggle, .arrow-nav, .arrow-search").removeClass("active");t("#MicrositeSearch").removeClass("active-tablet");n&&(f=!1,e=!1)};n.toggleMobileSearch=function(){t(".mobile-search-toggle").on("click",function(){SCM.SiteJS.calculateResetState(f,e);e=e===!1?!0:!1;SCM.SiteJS.toggleResponsiveMenus(t(".mobile-search-toggle, .arrow-search"),e,t("#MicrositeSearch"))})};n.toggleResponsiveLeftColumn=function(){var i=t(".page-column--left");t(document.body).removeClass("noscroll");t("main").on("click",".toggle-left-col__search, .toggle-left-col__article",function(r){r.preventDefault();t(document.body).addClass("noscroll");i.show().addClass("js-filters-open");navigator.userAgent.toLowerCase().includes("mozilla")||t(document).bind("touchmove",function(n){n.preventDefault()});t(document).ajaxComplete(function(){t(document.body).removeClass("noscroll");i.removeClass("js-filters-open");t(document).unbind("touchmove");n.initFoundation()})});t(".toggle-left-col__issue").on("click",function(n){n.preventDefault();t(document.body).addClass("noscroll");t(".issue-dropdown-wrap").hide();t(".responsive-issue-nav").show();navigator.userAgent.toLowerCase().includes("mozilla")||t(document).bind("touchmove",function(n){n.preventDefault()})});t(".toggle-left-col__close").on("click",function(r){r.preventDefault();t(document.body).removeClass("noscroll");i.removeClass("js-filters-open");t(".page-column--left, .responsive-issue-nav, .issue-dropdown-wrap").removeAttr("style");t(document).unbind("touchmove");n.initFoundation()})};n.toggleMobileMenu=function(){t(".mobile-menu-toggle").on("click",function(){SCM.SiteJS.calculateResetState(e,f);f=f===!1?!0:!1;SCM.SiteJS.toggleResponsiveMenus(t(".mobile-menu-toggle, .arrow-nav"),f,t(".navigation"))})};n.toggleResponsiveMenus=function(n,i,r){var u=t(".header-bottom");i?(n.addClass("active"),r.show(),u.slideToggle()):(n.removeClass("active"),u.toggle(),r.delay(50).hide())};n.togglePubHistory=function(){var n=t(".ww-history");t(".ww-citation-history-wrap").on("click",function(){n.slideToggle()});t(".ww-history-close").on("click",function(){n.slideToggle()})};n.initDatePicker=function(){t(".pg_advancedsearch").length&&t("#dpStartDate").length&&t("#dpStartDate, #dpEndDate, #dpStartDateAuthor, #dpEndDateAuthor").fdatepicker()};n.showFullAuthorList=function(){var n=t(".meta-authors--etal"),i=t(".meta-authors--remaining");n.on("click",function(t){t.preventDefault();n.removeClass("is-active");n.attr("aria-hidden",!0);i.addClass("is-active");i.attr("aria-hidden",!1)})};n.showImages=function(n){n.find(".contentFigures").each(function(){var n=t(this);n.attr("src").toLowerCase().indexOf("grey.gif")>=0&&n.attr("src",n.attr("data-original"))})};n.openRevealModal=function(n){var i=t("#revealModal");i.find("#revealContent").empty().prepend(n.children().clone());i.foundation("reveal","open");SCM.SiteJS.showImages(i);SCM.SiteJS.restrictedImages()};n.revealFigsTablesInModal=function(){var i=t("#NeedSubscription");v.on("click",".xref-bibr, .xref-fn, .link-reveal, .table-graphic, .caption-title",function(){var s=t(this),o=s.attr("reveal-id")?s.attr("reveal-id"):s.attr("data-id"),r=t('[content-id="'+o+'"]').first(),f;if(r=r.length?r:t('[content-id="'+o.toLowerCase()+'"]').first(),o.length&&!r.length&&(f=o.split(" "),f.length>=3)){var e=t("<div/>"),h=f[0],c=f[f.length-1],u=t('[content-id="'+h+'"]').first();u=u.length?u:t('[content-id="'+h.toLowerCase()+'"]').first();u.length&&(e.append(u.children().clone()),e=n.getAllReferencesInRange(u,e,c));r=e.html().length>0?e:""}t(r).hasClass("video-modal")||t(r).hasClass("audio-modal")?r.foundation("reveal","open"):r.length?SCM.SiteJS.openRevealModal(r):i.foundation("reveal","open")})};n.revealFeaturedFigureInModal=function(){t(".issue-featured-image a").on("click",function(){var r=t(this).closest(".image-synopsis-wrap").html(),n=t("#revealModal"),i=t(this).data("featuredfigureurl");i&&(n.find("#revealContent").empty().prepend(r),t("#revealContent img").attr("src",i),n.foundation("reveal","open"))})};n.getAllReferencesInRange=function(t,i,r){var u=t.next(),f=u.attr("content-id"),e;return f.length&&(i.append(u.children().clone()),e=f===r||f===r.toLowerCase(),e||n.getAllReferencesInRange(u,i,r)),i};n.showUnAuthenticatedSpans=function(){t(document).ready(function(){var n=t('div[data-widgetname="ArticleFulltext"] span#UserHasAccess').attr("data-userHasAccess"),i;n&&n.length&&n.toLowerCase()==="false"&&(i=t('div[data-widgetname="ArticleFulltext"] a[data-reveal-id]'),i.each(function(){t(this).replaceWith(function(){var n=this.innerHTML;return"<span>"+n+"<\/span>"})}))})};n.oupHeaderDropdowns=function(){t(".mobile-search-toggle").on("click",function(n){n.preventDefault();var i=t(this);SCM.SiteJS.manageMobileDropdowns(i,".mobile-search-dropdown")});t(".mobile-account-toggle").on("click",function(n){n.preventDefault();var i=t(this);SCM.SiteJS.manageMobileDropdowns(i,".mobile-account-dropdown")});t(".mobile-nav-toggle").on("click",function(n){n.preventDefault();var i=t(this);SCM.SiteJS.manageMobileDropdowns(i,".mobile-nav-dropdown")})};n.manageMobileDropdowns=function(n,i){t(".dropdown-panel").hasClass("is-active")?n.hasClass("is-active")?(t(i).slideToggle().removeClass("is-active"),n.removeClass("is-active")):(t(".mobile-dropdown-toggle").removeClass("is-active"),t(".dropdown-panel-wrap").children(".is-active").slideToggle().removeClass("is-active"),n.addClass("is-active"),t(i).delay(400).slideToggle().addClass("is-active")):(n.addClass("is-active"),t(i).slideToggle().addClass("is-active"))};n.toggleMobileDropdownSubnav=function(){var n=t(".dummy-link, .mobile-nav-dropdown .site-menu-item .mobile-nav-arrow, .mobile-account-dropdown .site-menu-item .mobile-nav-arrow");n.on("click",function(n){n.preventDefault();var i=t(this),r=i;r=i.hasClass("mobile-nav-arrow")?i:i.siblings(".mobile-nav-arrow");i.siblings(".site-menu-lvl-1").slideToggle();r.hasClass("icon-general_arrow-down")?r.removeClass("icon-general_arrow-down").addClass("icon-general_arrow-up"):r.removeClass("icon-general_arrow-up").addClass("icon-general_arrow-down")})};n.toggleArticleToolbarDropdown=function(){var n=t(".drop-trigger");n.on("click",function(n){n.preventDefault();var i=t(this);i.siblings("ul").slideToggle()})};n.initSigninForm=function(){var f=!1,n=t(".mobile-account-dropdown ul li .mobile-account-signin"),r=t(".mobile-account-dropdown ul li i.mobile-nav-arrow"),o=t(".mobile-account-dropdown ul li ul.individual-menu"),s=t(".dropdown-panel-signin"),u=t(".dropdown-panel-institution"),e=function(){s.hasClass("active")?t(".dropdown-panel-signin").hide().removeClass("active"):t(".dropdown-panel-signin").show().addClass("active");f||t.ajax({url:(App.CurrentSubdomain.length?"/"+App.CurrentSubdomain:"")+"/OUP/LoginForm/LoginFormPopup",cache:!1,success:function(n){t(".dropdown-panel-signin").html(n);o.html(n);SCM.AddReturnUrlToSocietyLinks();f=!0}})},i;t(".oup-header-menu-item.desktop .dropdown-toggle.signin").on("click",function(n){n.preventDefault();e()});t(".dropdown-toggle.institution").on("click",function(n){n.preventDefault();u.hasClass("active")?u.hide().removeClass("active"):u.show().addClass("active")});i=!1;t(document).mousedown(function(n){var r=t(".dropdown-panel-signin, .dropdown-panel-institution");i=!t(r).is(n.target)&&t(r).has(n.target).length===0});t(document).mouseup(function(n){var r=t(".dropdown-panel-signin, .dropdown-panel-institution");i&&!t(r).is(n.target)&&t(r).has(n.target).length===0&&(t(r).hide(),r.removeClass("active"));i=!1});n.on("click",function(t){t.preventDefault();e();r.hasClass("icon-general_arrow-down")?r.removeClass("icon-general_arrow-down").addClass("icon-general_arrow-up"):r.removeClass("icon-general_arrow-up").addClass("icon-general_arrow-down");n.hasClass("active")?n.removeClass("active"):n.addClass("active")});t(document).on("click",".signin-form .signin-button",function(n){var i=t(this).closest(".signin-form"),r=i.find(".preloader-wrap");n.preventDefault();n.stopPropagation();SCM.SiteJS.Login(i,r);location.pathname!=="/sign-in"&&SCM.ScholarlyiQ.trackOnPageEvent("site-signin")});t(document).on("keypress",".signin-form input.username, .signin-form input.password",function(n){var i=t(this).closest(".signin-form"),r=i.find(".preloader-wrap"),u=n.keyCode||n.which;u===13&&(n.preventDefault(),SCM.SiteJS.Login(i,r))});t(document).on("click",".signout-button",function(){var n;n=location.pathname.toLowerCase().indexOf("/my-account")===0?"/":location.pathname+location.search;t.get("/LOGOUT",{dest:"/HTTPHandlers/SAMs/LogoutHandler.ashx"}).done(function(){window.top.location.assign(n)}).fail(function(){window.top.location.assign(n)});SCM.ScholarlyiQ.trackOnPageEvent("site-signout")});t(document).on("click","a.shibboleth-signin",function(){var n=window.top.location,i=n.origin+"/SHIBBOLETH?dest="+encodeURIComponent(n.pathname+n.search),r=t(this).data("target").replace("{0}",encodeURIComponent(i));window.top.location=r})};n.initLoginFormDropdown=function(){t(".signin-form").on("click",'a[data-target="register"]',function(n){n.preventDefault();var i=t.deparam.querystring().returnUrl;(i===undefined||i===null)&&(i=location.pathname+location.search);window.top.location.assign("/my-account/register?returnUrl="+encodeURIComponent(i))})};n.Login=function(n,i){var r=n.find("input.username").val(),u=n.find("input.password").val(),f=n.find("#hpcName").val();if(f.length>0){console.log("Honeypot captcha triggered. Are you a bot?");return}if(r.length===0||u.length===0){n.find(".error").show();return}i.removeClass("hide");t.post("/LOGIN",{user:r,pass:u,dest:"/HTTPHandlers/SAMs/LoginHandler.ashx"}).done(function(r){r==="1"?location.pathname.toLowerCase()==="/sign-in"&&t.deparam.querystring().handoff_url!==null?window.location.reload():SCM.SiteJS.loginReturnBack():(n.find(".error").show(),i.addClass("hide"))})};n.loginReturnBack=function(){var n=t.deparam.querystring().returnUrl,r,i;(n===undefined||n===null)&&(n=t.deparam.querystring().redirectUrl);(n===undefined||n===null||n==="")&&(n=window.top.location.pathname+window.top.location.search);r=/^\/((\w+\/)?sign-in|my-account\/forgot-password|my-account\/reset-password|my-account\/register)/i;r.test(n)&&(n="/");n!=="/"&&(i=n.match(/\/\/([^/]+\.)?([^./]+\.[^./]+)/i),i!==null&&i[2].toLowerCase()!==window.top.location.hostname.match(/(.*\.)?([^.]+\.[^.]+)/i)[2].toLowerCase()&&(n="/"));window.top.location.assign(n)};n.alertLinks=function(){t(".userAlert a").each(function(){var n=t(this);n.on("click",function(){var r=n.data("additionalurl"),u=n.data("userloggedin"),f=n.data("alerttype"),i;u!==undefined&&u.toLowerCase()==="false"?(i=t.deparam.querystring().returnUrl,n.parent().hasClass("alertType-MarketingLink")&&(i=r),(i===undefined||i===null)&&(i=location.pathname+location.search),f!==undefined&&(i=i+"#trigger-alerttype="+f),window.location="/sign-in?returnUrl="+encodeURIComponent(i)):r!==undefined&&r.length?window.location=r:SCM.SiteJS.showSignUpAlertInfo(n)})})};n.showSignUpAlertInfo=function(n){t.ajax({url:(App.CurrentSubdomain.length?"/"+App.CurrentSubdomain:"")+"/Toolbox/AlertsSignUp/AlertsSignUpPopup",cache:!1,data:{alertType:n.data("alerttype"),resourceId:n.data("alertresourceid"),resourceType:n.data("alertresourcetype"),email:n.data("alertuseremail"),resourceName:n.data("alertresourcename"),taxonomyName:n.data("alerttaxonomyname")},dataType:"html",success:function(i){var r,u,f;t(".userAlertSignUp").html(i);r=t(".userAlertSignUpModal");r.foundation("reveal","open");u=t(".userAlertSignUp").find("#selectAlertFreqeuncy");f=t(".userAlertSignUp").find("input.js-taxonomy-checkbox:checked");SCM.SiteJS.initTaxonomyArrows(t(".userAlertSignUp"));t(".addUserAlert").on("click",function(){var i=t(this).parent(),f=t(this).parent().find(".js-alert-name").val(),e=t(this).parent().find(".js-taxonomy-checkbox:checked"),r=!1,o,s;n.data("alerttype")==33&&(f?e.length<1&&(r=!0,SCM.SiteJS.showErrorMessage(i,t("#errorSelectionRequired"))):(r=!0,SCM.SiteJS.showErrorMessage(i,t("#errorAlertNameRequired"))));o=e.filter(SCM.SiteJS.taxonomyFilterFunction);s=SCM.SiteJS.processTaxonomies(o);r||SCM.SiteJS.addSignUpAlert(n,u,f,s,i)});t(".userAlertClose").on("click",function(){r.foundation("reveal","close")})}})};n.showEditAlertInfo=function(n){var i=n.parents(".email-alerts-content-row");t.ajax({url:(App.CurrentSubdomain.length?"/"+App.CurrentSubdomain:"")+"/Toolbox/AlertsSignUp/AlertsSignUpPopup",cache:!1,data:{alertType:i.data("alerttype"),resourceId:i.data("alertresourceid"),resourceType:i.data("alertresourcetype"),email:i.data("alertuseremail"),resourceName:i.data("alertresourcename"),taxonomyName:i.data("alerttaxonomyname"),existingAlert:i.data("alert")},dataType:"html",success:function(n){var r,u,f;t(".userAlertSignUp").html(n);r=t(".userAlertSignUpModal");r.foundation("reveal","open");u=t(".userAlertSignUp").find("#selectAlertFreqeuncy");f=t(".userAlertSignUp").find("input.js-taxonomy-checkbox:checked");SCM.SiteJS.initTaxonomyArrows(t(".userAlertSignUp"));t(".js-edit-user-alert").on("click",function(){var n=t(this).parent(),f=t(this).parent().find(".js-alert-name").val(),e=t(this).parent().find(".js-taxonomy-checkbox:checked"),h=t("#AlertSignUp_AlertId").val(),r=!1,o,s;i.data("alerttype")==33&&(f?e.length<1&&(r=!0,SCM.SiteJS.showErrorMessage(n,t("#errorSelectionRequired"))):(r=!0,SCM.SiteJS.showErrorMessage(n,t("#errorAlertNameRequired"))));o=e.filter(SCM.SiteJS.taxonomyFilterFunction);s=SCM.SiteJS.processTaxonomies(o);r||SCM.SiteJS.editTaxonomyAlert(h,i,u,f,s,n)});t(".userAlertClose").on("click",function(){r.foundation("reveal","close")})}})};n.taxonomyFilterFunction=function(){return t(this).parents(".taxonomy-child-list-item").parents(".taxonomy-child-list-item").children(".taxonomy-parent-label").find(".js-taxonomy-checkbox:checked").length<1};n.initTaxonomyArrows=function(n){n.find(".taxonomy-parent-arrow").on("click",function(){var n=t(this);n.parents(".taxonomy-label-wrap").siblings(".taxonomy-child-list").slideToggle();n.hasClass("icon-general-arrow-filled-right")?n.removeClass("icon-general-arrow-filled-right").addClass("icon-general-arrow-filled-down"):n.removeClass("icon-general-arrow-filled-down").addClass("icon-general-arrow-filled-right")});n.find(".js-taxonomy-checkbox").on("click",function(){var n;t(this).is(":checked")?(n=t(this).parent().parent(),n.find(".js-taxonomy-checkbox").prop("checked",!0)):(n=t(this).parent().parent(),n.find(".js-taxonomy-checkbox").prop("checked",!1),t(this).closest(".taxonomy-node").children(".taxonomy-parent-label").find(".js-taxonomy-checkbox").prop("checked",!1),t(this).parents(".taxonomy-child-list-item").children(".taxonomy-parent-label").find(".js-taxonomy-checkbox").prop("checked",!1))})};n.showErrorMessage=function(n,t){n.find(".js-message").hide();t.removeClass("hide");t.show()};n.processTaxonomies=function(n){var t=[],r,u;for(i=0;i<n.length;i++)r=n[i],u=r.attributes["data-id"].value,t.push(u);return t};n.addSignUpAlert=function(n,i,r,u,f){var e;i!=null&&(e=i.val());t.ajax({url:(App.CurrentSubdomain.length?"/"+App.CurrentSubdomain:"")+"/Toolbox/AddAlertsSignUpForTaxonomySearch/AddAlertsSignUpPopup",cache:!1,data:{alertType:n.data("alerttype"),resourceId:n.data("alertresourceid"),resourceType:n.data("alertresourcetype"),email:n.data("alertuseremail"),resourceName:n.data("alertresourcename"),scheduleId:e,alertName:r,taxonomyName:n.data("alerttaxonomyname"),taxonomies:JSON.stringify(u)},dataType:"html",success:function(n){if(n!=null)if(n.trim()==="name-exists")SCM.SiteJS.showErrorMessage(f,t("#errorAlertNameExists"));else if(n.trim()==="search-exists")SCM.SiteJS.showErrorMessage(f,t("#errorAlertSearchExists"));else{t(".userAlertSignUp").html(n);var i=t(".userAlertSignUpModal");i.foundation("reveal","open");t(".userAlertClose").on("click",function(){i.foundation("reveal","close")})}}})};n.editTaxonomyAlert=function(n,i,r,u,f,e){var o;r!=null&&(o=r.val());t.ajax({url:(App.CurrentSubdomain.length?"/"+App.CurrentSubdomain:"")+"/Toolbox/EditAlertForTaxonomySearch/AddAlertsSignUpPopup",cache:!1,type:"POST",data:{alertId:n,scheduleId:o,alertName:u,taxonomyName:i.data("alerttaxonomyname"),taxonomies:JSON.stringify(f)},dataType:"html",success:function(n){var i=JSON.parse(n),r;i!=null&&(r=i.Success?t("#messageCustom"):t("#errorCustom"),r.html(i.Message),SCM.SiteJS.showErrorMessage(e,r))}})};n.initSearchResultsSort=function(){var i=t(".sort-order-select-option"),r=t(".sort-order-select"),n=t(".preloader-wrap");r.on("change",function(){var n=t("#routename").val(),i=n===""?"/search-results?"+t(this).val():"/"+n+"/search-results?"+t(this).val();window.location=i});i.on("click",function(){var i=t(this).find("option[value]");i.length&&n.removeClass("hide");sessionStorage.detailsState=u});t(".al-pageNumber,.sr-nav-previous,.sr-nav-next").on("click",function(){if(!t(this).hasClass("currentPage")){n.removeClass("hide");var i=t(this).attr("data-url");window.location="search-results?"+i}})};n.restrictedImages=function(){t("div.graphic-wrap[restricted]").each(function(){var n=t(this).children(".copy-right-statement");t(n).toggle(!1);t(this).off("contextmenu").on("contextmenu",function(){return t(n).toggle(),!1});t(this).off("click").click(function(){return t(n).toggle(),!1});t(n).off("click").click(function(){return t(n).toggle(),!1})})};n.registerArticleListNewAndPopularCombinedMode=function(){t(".articleListNewAndPopular-mode").each(function(){var n=t(this);n.on("click",function(i){i.preventDefault();t(".articleListNewAndPopular-mode").removeClass("active");n.addClass("active");var u=n.data("mode"),r=t(".articleListNewAndPopular-ContentView-"+u);r.hasClass("hasContent")||(SCM.SiteJS.getArticleListNewAndPopularContent(u,r),r.addClass("hasContent"));t('section[class*="articleListNewAndPopular-ContentView-"]').hide();r.removeClass("hide");r.show()})})};n.getArticleListNewAndPopularContent=function(n,i){t.ajax({url:(App.CurrentSubdomain.length?"/"+App.CurrentSubdomain:"")+"/PlatformArticle/ArticleListNewAndPopularContent/",cache:!1,data:{mode:n},dataType:"html",success:function(n){i.html(n)}})};n.moveSubmitCommentLink=function(){var n=t(".submitCommentPlaceHolder"),i=t(".widget-UserComment");n.append(i)};n.addUserCommentJumpLink=function(){var n=t(".content-nav"),i;n.length&&(i=t(".comments-jumplink"),n.append(i))};n.addDataSupplementsJumpLink=function(){var n=t(".jumplink-list"),r=t(".widget-ArticleDataSupplements"),i;n.length&&r.length&&(i=t(".dataSupplements-jumplink"),n.append(i))};n.addDataRepositoriesJumpLink=function(){var n=t(".jumplink-list"),r=t(".widget-ArticleDataRepositories"),i;n.length&&r.length&&(i=t(".dataRepositories-jumplink"),n.append(i))};n.addAuthorNotesJumpLink=function(){var n=t(".jumplink-list"),i=t(".authorNotes-section-title"),r;n.length&&i.length&&(r='<li class="section-jump-link head-1"><div class="section-jump-link__link-wrap"><a class="jumplink js-jumplink scrollTo" href="#authorNotesSectionTitle">'+i.text()+"<\/a><\/div><\/li>",n.append(r))};n.toggleSearchResultsDetails=function(){var i=t("#switch-container"),r=t("#switch-post"),n=t(".sri-expandedView");u=sessionStorage.detailsState?sessionStorage.detailsState:typeof clientViewOption!="undefined"&&clientViewOption!==""?clientViewOption:t("#hfViewOption").val();u==="Expanded"?(i.removeClass("off").addClass("on"),r.removeClass("off").addClass("on"),n.removeClass("hide")):u==="Basic"&&n.addClass("hide");t(".pagination").on("click",function(){sessionStorage.detailsState=typeof Storage!="undefined"?u:u});i.unbind("click").on("click",function(t){t.stopPropagation();u=u==="Expanded"?"Basic":"Expanded";i.toggleClass("on off");r.toggleClass("on off");n.hasClass("hide")?n.removeClass("hide"):n.addClass("hide")})};h=!1;n.adjustRelatedTagsDisplay=function(){t(".article-metadata-panel:not(:last)").remove();var r=t(".article-metadata-panel").last(),f=t(".kwd-group"),e=t(".related-topic-tags"),o=t(".article-metadata-taxonomies"),s=t(".article-metadata-tocSections"),c=t(".wi-editors"),u=[f,e,o,s,c];for(r.length===0&&(r=t(".article-metadata-standalone-panel")),i=0;i<u.length;i++)u[i].length&&r.append(u[i]);r.html()&&r.show();n.removeEmpty(".article-metadata-panel");n.removeEmpty(".article-metadata-standalone-panel");n.removeEmpty(".access-state-logos");n.removeEmpty(".article-pubstate");h=!0;window.dispatchEvent(new CustomEvent("adjustRelatedTagsDisplay.complete"))};n.isFinishedAdjustRelatedTagsDisplay=function(){return h};n.removeEmpty=function(n){var i=t(n),r;i.children().length===0&&(r=i.text(),r&&r.trim()||i.remove())};n.showPdfOnlyLink=function(){t(".PdfOnlyLink").length&&t(".toolbar-item.item-pdf").length&&t(".toolbar-item.item-pdf").children().clone().appendTo(".PdfOnlyLink")};n.triggerAlertModalOnRedirect=function(){var n=t.bbq.getState("trigger-alerttype");n!==undefined&&(t('.userAlert a[data-userloggedin="True"][data-alerttype='+n+"]").click(),t.bbq.removeState("trigger-alerttype"))};n.triggerSaveSearchModelOnRedirect=function(){var n=t.bbq.getState("triggerSaveSearch");n==="1"&&(t(".lnkSaveSolrSearch").click(),t.bbq.removeState("triggerSaveSearch"))};n.configureMathjax=function(){(MathJax.Hub.Config({CommonHTML:{linebreaks:{automatic:!0}},"HTML-CSS":{linebreaks:{automatic:!0}},SVG:{linebreaks:{automatic:!0}}}),t("#hdnAdConfigurationRightRail").val()!=="sticky")&&MathJax.Hub.Register.StartupHook("End",function(){var n,i,r;if(!(screen.width<1024)){n=t(".page-column-wrap").width();t("#ContentTab").on("click",".js-mathjax-view-large",function(i){var r=t(i.currentTarget),u,l;if(!r.hasClass("js-mathjax-view-large-expanded")&&!r.prev().hasClass("js-mathjax-view-large-expanded")){u=r.clone(!1);u.css("position","absolute");u.addClass("js-mathjax-view-large-clone");u.addClass("mathjax-view-large-expanded");u.addClass("js-mathjax-view-large-expanded");r.before(u);var a=i.currentTarget.dataset.targetWidth,v=r.height(),e=t(".page-column-wrap").offset().left,y=e+n,o=i.currentTarget.dataset.widthDifference,f=Math.ceil(o/2),s=r.offset().left,p=s+r.width(),h=s-e,c=y-p;f<h&&f<c?(u.css("marginLeft",-f+"px"),u.css("marginRight",-f+"px")):f<h&&(l=o-c,u.css("marginLeft",-l+"px"));u.css("minHeight",Math.ceil(v)+"px");u.css("width",a+"px")}r.hasClass("js-mathjax-view-large-expanded")?(r.css("visibility","hidden"),r.next().css("visibility","")):(r.css("visibility","hidden"),r.prev().css("visibility",""))});t("#ContentTab .math span.MathJax").each(function(i,r){var u=r.offsetWidth+2,f=t(r).parents(".formula-wrap"),e=f.width();u>e&&(f.addClass("js-mathjax-view-large").addClass("mathjax-view-large"),u=Math.min(u,1200,n),f[0].dataset.widthDifference=u-e,f[0].dataset.targetWidth=u)});t("#ContentTab .tex-math").each(function(i,r){var u=r.offsetWidth+5,f=t(r).parents(".formula-wrap"),e=f.width();u>e&&(f.addClass("js-mathjax-view-large").addClass("mathjax-view-large"),u=Math.min(u,1200,n),f[0].dataset.widthDifference=u-e,f[0].dataset.targetWidth=u)});i=function(n){n.matches?t(".mathjax-view-large").removeClass("js-mathjax-view-large"):t(".mathjax-view-large").addClass("js-mathjax-view-large")};r=window.matchMedia("(max-width: 1023px)");r.addListener(i);i(r)}})};n.ariaToggleTable=function(n){var i=t(n+"-button"),r=i.children(".collapse-icon");i.on("click",function(u){u.preventDefault();i.attr("aria-expanded")==="true"?i.attr("aria-expanded","false"):i.attr("aria-expanded","true");r.hasClass("icon-general-arrow-filled-down")?r.removeClass("icon-general-arrow-filled-down").addClass("icon-general-arrow-filled-right"):r.removeClass("icon-general-arrow-filled-right").addClass("icon-general-arrow-filled-down");t(n).toggleClass("hide");t(n).attr("aria-hidden")==="false"?t(n).attr("aria-hidden","true"):t(n).attr("aria-hidden","false")})};n.initAriaControls=function(){var n=t("[id^=collapsible-table-]");n.each(function(n){SCM.SiteJS.ariaToggleTable("#collapsible-table-"+n)})};n.abstractMathJax=function(){t(".abstract-response-placeholder").length&&MathJax.Hub.Queue(["Typeset",MathJax.Hub,".abstract-response-placeholder"])};n.setAccessIcons=function(){var n=t("#ArticleList h5.item-title, .al-article-list-group .al-article-items");n.length&&r!==undefined&&n.each(function(){var f=t(this).data("articleidaccess"),i=SCM.SiteJS.getAccessIcon(f,r),u,n;if(i!==undefined){u=t(this).find("i.access-icon");n="Available to Purchase";u.removeClass(i.icon).addClass(i.icon);switch(i.icon){case"icon-availability_open":n="Open Access";break;case"icon-availability_free":n="Free";break;case"icon-availability_unlocked":n="Available";break;case"icon-availability_cart":n="Available to Purchase";break;default:n="Available to Purchase"}u.attr("title",n)}})};n.getAccessIcon=function(n,t){var i;return t.map(function(t){if(t.id===n)return i=t,!1}),i};n.articleUserComments=function(n){n=n===!0;var r=t(".comment-form__modal .preloader-wrap"),i=t(".content-form__response--error");t("#comment-modal-opener"+(n?"-sv":"")).click(function(n){if(n.preventDefault(),SCM.UserCommentView.isUserLoggedIn!=="True"){var i=t.deparam.querystring().returnUrl;(i===undefined||i===null)&&(i=location.pathname+location.search);window.location="/sign-in?returnUrl="+encodeURIComponent(i)}else resetCommentForm(),t.ajax({url:(App.CurrentSubdomain.length?"/"+App.CurrentSubdomain:"")+"/Content/SelfServeContent",type:"GET",data:{selfServeContentId:"CommentsTermsAndConditions",selfServeVersionId:0}}).success(function(n){showTermsAndConditions(n)})});t("#btnUserAgreeTerms").click(function(n){n.preventDefault();validateTermsCheckbox()&&(t("#TermsAndConditionsContainer, #termsAgreeRow, #termsButtonRow").hide(),t("#divUserCommentForm").show())});t("#divCommentModal .btnUserCommentSubmit").click(function(n){n.preventDefault();validateCommentForm()&&(r.removeClass("hide"),submitCommentValues())});t("#divCommentModal .btnModalCancel, #divCommentModal .btnCommentModalExit, .comment-form__close").click(function(n){n.preventDefault();t("#divCommentModal").foundation("reveal","close")});t('input[name="NoConflicts"]').change(function(){t(this).is(":checked")?t(".disclosureBox").show():t(".disclosureBox").hide()});showTermsAndConditions=function(n){t("#termsAgreeRow .lblTermsAndConditions.errors").hide();t("#TermsAndConditionsContainer").html(n);t("#TermsAndConditionsContainer, #termsAgreeRow, #termsButtonRow").show();t("#divCommentModal").foundation("reveal","open")};validateTermsCheckbox=function(){var n=t("#termsAgreeRow #termsAndConditionsCheckbox");return n.length&&!n.is(":checked")?(t("#termsAgreeRow .lblTermsAndConditions.errors").show(),!1):(t("#termsAgreeRow .lblTermsAndConditions.errors").hide(),!0)};validateCommentForm=function(){var n=!1;resetCommentFormValidation();t.validity.setup({outputMode:"label"});t.validity.start();t("#divCommentModal .required").require();var f=t.validity.end(),u=t("#divUserCommentForm").find("textarea#Comment"),i=u.val(),r=parseInt(u.attr("maxlength"));return r>0&&i.length>r&&(i=i.substring(0,r)),SCM.UserCommentView.bShowDisclosure==="true"&&t('input[name="NoConflicts"]').is(":checked")&&t('textarea[name="Disclosure"]').val()===""?(t("#divCommentModal .lbldisclosure.errors").show(),n=!1):n=f.valid,n};resetCommentForm=function(){var n,i;t("#divUserCommentForm").hide();n=t("#divCommentModal");n.find("input, textarea").val("");n.find("#displayAlert, div.captchaAlert").hide();t('input[name="NoConflicts"]').removeAttr("checked");t("#termsAndConditionsCheckbox").attr("checked",!1);t(".disclosureBox").hide();t("#divCommentModal .btnCommentModalExit").hide();t("#recaptcha_reload").trigger("click");i=n.find("#Author");i.attr("value",i.attr("dataauthorvalue"));resetCommentFormValidation()};resetCommentFormValidation=function(){var n=t("#divCommentModal");n.find(".error").not(".lbldisclosure.errors").remove();i.hide();n.find(".lbldisclosure.errors").hide();t("#termsAgreeRow .lblTermsAndConditions.errors").hide();i.text("")};submitCommentValues=function(){var n=t("#divUserCommentForm"),e=SCM.UserCommentView.articleId,u="",f="";SCM.UserCommentView.showAffiliations==="true"&&(u=n.find("input#AffInstitution").val());SCM.UserCommentView.bShowDisclosure==="true"&&(f=n.find("textarea#Disclosure").val());t.ajax({type:"POST",url:"/Content/SubmitUserComment",data:{author:n.find("input#Author").val(),affInstitutions:u,disclosure:f,title:n.find("input#Title").val(),comment:n.find("textarea#Comment").val(),articleid:e,recaptchaChallege:t("#recaptcha_challenge_field").val(),recaptchaResponse:t("#recaptcha_response_field").val(),instanceName:SCM.UserCommentView.InstanceName},success:function(i){console.log(["success",i]);r.addClass("hide");i.Success===!0?(n.hide(),t("#divCommentModal #displayAlert").show(),t("#divCommentModal .btnCommentModalExit").show(),SCM.UserCommentView.isNotModerated.toLowerCase()==="true"&&location.reload()):(r.addClass("hide"),t("div.captchaAlert").show())},error:function(n){n.status=="401"?(i.html("You must be logged in to submit a comment."),window.location="/sign-in?returnUrl="+encodeURIComponent(window.location.pathname+window.location.search)):i.html("Comments not saved. Please Try Again.");r.addClass("hide");i.show()}})}};n.init=function(){n.articleUserComments();n.closeNavbarSearch();n.expandNavbarSearch();n.initAriaControls();n.initFilterClickEvent();n.initSearchResultsSort();n.initFoundation();n.initLazyLoad();n.showAuthorInfo();n.showFullAuthorList();n.addAuthorFootnote();n.showHideDropDown();n.showRelatedBookWidgetIfHasContent();n.showMoreRelatedContent(".grw-viewmorelink",".grw-hide-me");n.showMoreRelatedContent(".mrw-viewmorelink",".mrw-hide-me");n.showSpinner();n.toggleMobileLanguageSubmenu();n.toggleMobileMenu();SCM.SiteJS.toggleMobileSignInForm();n.toggleArticleToolbarDropdown();n.toggleMobileDropdownSubnav();n.toggleMobileSiteMenuSubnav();n.toggleMobileSearch();n.toggleResponsiveLeftColumn();n.togglePubHistory();n.restrictedImages();n.moveSubmitCommentLink();n.addAuthorNotesJumpLink();n.addDataSupplementsJumpLink();n.addDataRepositoriesJumpLink();n.addUserCommentJumpLink();n.alertLinks();n.registerArticleListNewAndPopularCombinedMode();n.oupHeaderDropdowns();n.initSigninForm();n.initSelfServeNavigation();n.toggleSelfServeNavigation();n.setAllLinksTarget();n.showPdfOnlyLink();n.setBlockLink()};n.windowLoadInit=function(){n.initDatePicker();n.revealFigsTablesInModal();n.revealFeaturedFigureInModal();n.launchGetCitationModal();n.setSelectedSearchFilter();n.getNewSelectedFilter();n.loadAllImagesIfUserIsAboutToUseJumpLinks();n.showUnAuthenticatedSpans();n.toggleSearchResultsDetails();n.toggleSearchCover()};n.initArticleTopInfoAccessOptions=function(){var n=window.location.pathname.substring(0,window.location.pathname.indexOf("/",2)),i=n+"/sign-in?returnUrl="+encodeURIComponent(window.location.pathname+window.location.search),r=t(".article-top-info-user-restricted-options");r.find(".article-top-info-sign-in").attr("href",i)}}(SCM.SiteJS=SCM.SiteJS||{},jQuery,SCM.ArticleAccessIcons),function(n){var r,i=n(".page-column--left"),h=n(".datepicker__input"),f=n(".microsite-search"),e=n(".mobile-search-dropdown"),o=n(".navbar-menu, .navbar-search-collapsed"),s=n(".navbar-search-advanced, .navbar-search-close, .navbar-search"),c=n("section.master-header").height(),t=SCM.SiteJS.getViewportWidth(),u=function(){SCM.SiteJS.getViewportWidth()<=1023?i.addClass("mobile"):i.removeClass("mobile")};n(window).on("resize",function(){clearTimeout(r);r=setTimeout(function(){u();var r=SCM.SiteJS.getViewportWidth();t!=r&&(t>=1023&&n(".dropdown-panel, .site-menu").removeAttr("style"),i.hasClass("js-filters-open")||(n(document.body).removeClass("noscroll"),i.hide(),n(".responsive-issue-nav").hide(),n(".page-column--left, .responsive-issue-nav, .issue-dropdown-wrap").removeAttr("style"),t=SCM.SiteJS.getViewportWidth()),(t<=930||t>=1101)&&(o.removeAttr("style"),s.removeAttr("style")),t>=931&&(e.removeAttr("style"),f.removeAttr("style")))},10)});window.addEventListener("orientationchange",function(){var t=n(window).scrollTop();n("body").animate({scrollTop:t},0)},!1);n(window).on("load",function(){SCM.SiteJS.windowLoadInit();SCM.SiteJS.adjustRelatedTagsDisplay()});n(document).ready(function(){u();SCM.SiteJS.init();SCM.Toolbar.init();SCM.PDFAccess.init();SCM.SiteJS.setAccessIcons();SCM.StickyElements.init();SCM.AddReturnUrlToSocietyLinks();SCM.JumpLinks.init();n(".custom-scroll").jScrollPane();n(".widget-ArticleFulltext").length>0&&SCM.ArticleFulltext.init();SCM.SiteJS.triggerAlertModalOnRedirect();SCM.SiteJS.triggerSaveSearchModelOnRedirect();SCM.SiteJS.configureMathjax();SCM.AccessibleDatepicker.initDatepicker();SCM.SplitScreen.init()});n(document).ajaxStart(function(){n("body").css("cursor","wait")}).ajaxComplete(function(){SCM.SiteJS.initFoundation();SCM.SiteJS.initSearchResultsSort();SCM.SolrSearch.ajaxComplete();SCM.SiteJS.setAccessIcons();SCM.SiteJS.setAllLinksTarget();SCM.SiteJS.toggleResponsiveLeftColumn();n("body").css("cursor","default");SCM.SiteJS.abstractMathJax();SCM.SiteJS.alertLinks()})}(jQuery);SCM=SCM||{},function(n,t){n.initTestPassword=function(n,i,r){var y=/[A-ZÀ-ÖØ-ÞĀĂĄĆĈĊČĎĐĒĔĖĘĚĜĞĠĢĤĦĨĪĬĮİĲĴĶĹĻĽĿŁŃŅŇŊŌŎŐŒŔŖŘŚŜŞŠŢŤŦŨŪŬŮŰŲŴŶŸ-ŹŻŽƁ-ƂƄƆ-ƇƉ-ƋƎ-ƑƓ-ƔƖ-ƘƜ-ƝƟ-ƠƢƤƦ-ƧƩƬƮ-ƯƱ-ƳƵƷ-ƸƼǄǇǊǍǏǑǓǕǗǙǛǞǠǢǤǦǨǪǬǮǱǴǶ-ǸǺǼǾȀȂȄȆȈȊȌȎȐȒȔȖȘȚȜȞȠȢȤȦȨȪȬȮȰȲȺ-ȻȽ-ȾɁɃ-ɆɈɊɌɎͰͲͶΆΈ-ΊΌΎ-ΏΑ-ΡΣ-ΫϏϒ-ϔϘϚϜϞϠϢϤϦϨϪϬϮϴϷϹ-ϺϽ-ЯѠѢѤѦѨѪѬѮѰѲѴѶѸѺѼѾҀҊҌҎҐҒҔҖҘҚҜҞҠҢҤҦҨҪҬҮҰҲҴҶҸҺҼҾӀ-ӁӃӅӇӉӋӍӐӒӔӖӘӚӜӞӠӢӤӦӨӪӬӮӰӲӴӶӸӺӼӾԀԂԄԆԈԊԌԎԐԒԔԖԘԚԜԞԠԢԱ-ՖႠ-ჅḀḂḄḆḈḊḌḎḐḒḔḖḘḚḜḞḠḢḤḦḨḪḬḮḰḲḴḶḸḺḼḾṀṂṄṆṈṊṌṎṐṒṔṖṘṚṜṞṠṢṤṦṨṪṬṮṰṲṴṶṸṺṼṾẀẂẄẆẈẊẌẎẐẒẔẞẠẢẤẦẨẪẬẮẰẲẴẶẸẺẼẾỀỂỄỆỈỊỌỎỐỒỔỖỘỚỜỞỠỢỤỦỨỪỬỮỰỲỴỶỸỺỼỾἈ-ἏἘ-ἝἨ-ἯἸ-ἿὈ-ὍὙὛὝὟὨ-ὯᾸ-ΆῈ-ΉῘ-ΊῨ-ῬῸ-Ώℂℇℋ-ℍℐ-ℒℕℙ-ℝℤΩℨK-ℭℰ-ℳℾ-ℿⅅↃⰀ-ⰮⱠⱢ-ⱤⱧⱩⱫⱭ-ⱯⱲⱵⲀⲂⲄⲆⲈⲊⲌⲎⲐⲒⲔⲖⲘⲚⲜⲞⲠⲢⲤⲦⲨⲪⲬⲮⲰⲲⲴⲶⲸⲺⲼⲾⳀⳂⳄⳆⳈⳊⳌⳎⳐⳒⳔⳖⳘⳚⳜⳞⳠⳢꙀꙂꙄꙆꙈꙊꙌꙎꙐꙒꙔꙖꙘꙚꙜꙞꙢꙤꙦꙨꙪꙬꚀꚂꚄꚆꚈꚊꚌꚎꚐꚒꚔꚖꜢꜤꜦꜨꜪꜬꜮꜲꜴꜶꜸꜺꜼꜾꝀꝂꝄꝆꝈꝊꝌꝎꝐꝒꝔꝖꝘꝚꝜꝞꝠꝢꝤꝦꝨꝪꝬꝮꝹꝻꝽ-ꝾꞀꞂꞄꞆꞋＡ-Ｚ]|\ud801[\udc00-\udc27]|\ud835[\udc00-\udc19\udc34-\udc4d\udc68-\udc81\udc9c\udc9e-\udc9f\udca2\udca5-\udca6\udca9-\udcac\udcae-\udcb5\udcd0-\udce9\udd04-\udd05\udd07-\udd0a\udd0d-\udd14\udd16-\udd1c\udd38-\udd39\udd3b-\udd3e\udd40-\udd44\udd46\udd4a-\udd50\udd6c-\udd85\udda0-\uddb9\uddd4-\udded\ude08-\ude21\ude3c-\ude55\ude70-\ude89\udea8-\udec0\udee2-\udefa\udf1c-\udf34\udf56-\udf6e\udf90-\udfa8\udfca]/,p=/[0-9]/,v="",u=t(".password-input-check-wrap"),s=u.find(".icon-case"),b=u.find(".password-confirm-icon"),h=u.find(".password-input-icon"),c=u.find(".icon-length"),l=u.find(".icon-number"),w=10,f=u.find(".password-check-wrap"),e=t(".password-confirm-wrap"),a=e.find(".password-confirm-icon"),o=!1;u.on("keyup",n,function(){var n=t(this).val();v=n;o?f.hide():f.show();n.length>=w?SCM.MyAccount.showValidPasswordCriteria(c):SCM.MyAccount.showInvalidPasswordCriteria(c);y.test(n)?SCM.MyAccount.showValidPasswordCriteria(s):SCM.MyAccount.showInvalidPasswordCriteria(s);p.test(n)?SCM.MyAccount.showValidPasswordCriteria(l):SCM.MyAccount.showInvalidPasswordCriteria(l);c.hasClass("green")&&s.hasClass("green")&&l.hasClass("green")?(o=!0,f.fadeOut(1500),h.hide(),n===u.find(i).val()&&($iconConfirm.hide(),u.find(r).addClass("btn-green"),u.find(".register-button-overlay").hide())):(o=!1,f.show(),SCM.MyAccount.lockRegistrationButton(),h.show());(n===""||n===null)&&(f.hide(),h.hide())});e.on("keyup",i,function(){var n=t(this).val();v===n?(a.hide(),o&&(e.find(r).addClass("btn-green"),e.find(".register-button-overlay").hide())):n===""||n===null?(a.hide(),SCM.MyAccount.lockRegistrationButton()):(a.show(),SCM.MyAccount.lockRegistrationButton())});t(document).on("click",function(){f.hide()})}}(SCM.TestPassword=SCM.TestPassword||{},jQuery);SCM=SCM||{},function(n,t){n.setActiveJumplink=function(){t(".section-jump-link").on("click",function(){t(".section-jump-link").removeClass("active");t(this).closest(".section-jump-link").addClass("active")})};n.toggleNestedJumplinks=function(){var n=t(".section-jump-link .list-toggle, .section-jump-link .mobile-list-toggle");n.on("click",function(n){n.preventDefault();var i=t(this),r=i.parents(".section-jump-link__link-wrap").siblings("ul.section-jump-link__sublist"),u="icon-general-arrow-filled-right",e="icon-general-arrow-filled-down",f="icon-general_arrow-right",o="icon-general_arrow-down";i.hasClass("list-toggle")&&(i.hasClass(u)?i.removeClass(u).addClass(e):i.removeClass(e).addClass(u));i.hasClass("mobile-list-toggle")&&(i.hasClass(f)?i.removeClass(f).addClass(o):i.removeClass(o).addClass(f));i.attr("aria-expanded")==="false"?i.attr("aria-expanded","true"):i.attr("aria-expanded","false");r.slideToggle();r.attr("aria-hidden")==="false"?r.attr("aria-hidden","true"):r.attr("aria-hidden","false")})};n.filterTopicTerms=function(){t(".issue-topic__input").keyup(function(){t(".issue-topic__term").hide();var n=t(this).val(),i=n.toLowerCase();t.extend(t.expr[":"],{containsIN:function(n,t,i){return(n.textContent||n.innerText||"").toLowerCase().indexOf((i[3]||"").toLowerCase())>=0}});t(".issue-topic__term:containsIN('"+i+"')").show();(n===null||n==="")&&t(".issue-topic__term").show()})};n.updateIssueBrowseOnChange=function(){t(".issue-browse-select").on("change",function(){window.location.href=t(this).val()})}}(SCM.Issues=SCM.Issues||{},jQuery);jQuery(document).ready(function(n){SCM.Issues.filterTopicTerms();SCM.Issues.toggleNestedJumplinks();SCM.Issues.updateIssueBrowseOnChange();window.location.hash&&n('a[href="'+window.location.hash+'"]').addClass("active").parents(".section-jump-link").slice(1).children(".section-jump-link__link-wrap").children(".list-toggle").click();var t=SCM.SiteJS.getViewportWidth(),i=t<=900;i&&n("#IssuesList > option").each(function(){var t=n(this).text(),f=t.length,r=47,i,u;f>r&&(i=t.substr(0,r).lastIndexOf(" "),i>0&&(u=t.substr(0,i)+"...",n(this).text(u)))})});SCM=SCM||{},function(n,t){var i=t("#hfSiteURL");n.initMyAccount=function(){var i=t(".myaccount-tabs-inner-wrap"),u=t(".mobile-nav-icon"),r,n,f,e,o,s;t(document).on("click",".myaccount-mobile-nav",function(n){n.stopPropagation();i.toggle();u.hasClass("icon-general-arrow-filled-down")?u.removeClass("icon-general-arrow-filled-down").addClass("icon-general-arrow-filled-up"):u.removeClass("icon-general-arrow-filled-up").addClass("icon-general-arrow-filled-down")});t(document).click(function(){i.hide().removeAttr("style")});t(window).on("scroll",function(){clearTimeout(r);r=setTimeout(function(){i.removeAttr("style")},50)});t(window).on("resize",function(){clearTimeout(r);r=setTimeout(function(){i.removeAttr("style")},50)});n=location.pathname;f=n.indexOf("/",12);f>0&&(n=n.substring(0,f));e=t(".myaccount-tabs-inner-wrap").find("li").has('a[href="'+n+'"]');e.addClass("is-active");t("#myaccount-tabs").find(".myaccount-current-label").html(e.text());t(document).on("click","#myaccount-tabs-content #updatePersonalDetailsBtn",function(){var n=t("#myaccount-tabs-content"),o;n.find(".success-message").html("").hide();n.find(".error-message").html("").hide();var f=n.find("#Title").val(),r=n.find("#FirstName").val(),u=n.find("#LastName").val(),e=n.find("#Phone").val(),s=n.find("#CountryList").val(),h=t("#myaccount-tabs-content").find("#MyAccountToken").val(),i=/[<>]/;if(i.test(f)||i.test(r)||i.test(u)||i.test(e)){o=n.find("#err-message-angle-brackets").html();n.find(".error-message").html(o).show();t("html, body").animate({scrollTop:n.offset().top},10);return}t.post("/OUPMyAccount/UpdateAccount",{title:f,firstName:r,lastName:u,phone:e,country:s,token:h},function(i){i!=null&&(i.ReturnId&&t("#myaccount-tabs-content").find("#MyAccountToken").val(i.ReturnId),i.Success?(t("#header-account-info-user-fullname").html(r+" "+u),n.find(".success-message").html(i.Html).show()):(n.find(".error-message").html(i.Html).show(),t("html, body").animate({scrollTop:n.offset().top},10)))})});o=t("#change-password").find(".error-message").html();SCM.TestPassword.initTestPassword("#newPassword","#confirmNewPassword","#changePasswordBtn");t(document).on("click","#changePasswordBtn",function(){var n=t("#change-password"),s=n.find(".success-message"),i,f,e,c,l;s.hide();i=n.find(".error-message");i.html(o).hide();var r={},h=n.find("#currentPassword").val(),u=!1;if(h===""&&(r.currentPassword=t("label[for=currentPassword]").text().replace("*",""),u=!0),f=n.find("#newPassword").val(),f===""&&(r.newPassword=t("label[for=newPassword]").text().replace("*",""),u=!0),e=n.find("#confirmNewPassword").val(),e===""&&(r.confirmNewPassword=t("label[for=confirmNewPassword]").text().replace("*",""),u=!0),u){for(c in r)i.append("<p> * "+r[c]+"<\/p>").show();t("html, body").animate({scrollTop:n.offset().top},10);return}i.html("");l=t("#myaccount-tabs-content").find("#MyAccountToken").val();t.post("/OUPMyAccount/ChangePassword",{currentPassword:h,newPassword:f,confirmNewPassword:e,token:l},function(r){r!=null&&(r.ReturnId&&t("#myaccount-tabs-content").find("#MyAccountToken").val(r.ReturnId),r.Messages!=null&&r.Messages[0]=="1"?(s.show(),t.post("/LOGIN",{user:r.Messages[1],pass:f,dest:"/HTTPHandlers/SAMs/LoginHandler.ashx"}).done(function(n){n!=="1"?location.href="/sign-in":t.post("/OUPMyAccount/RefreshToken",{},function(n){n!=null&&n.ReturnId&&t("#myaccount-tabs-content").find("#MyAccountToken").val(n.ReturnId)})})):(r.Messages!=null&&r.Messages[1]!=null&&i.html(r.Messages[1]).show(),t("html, body").animate({scrollTop:n.offset().top},10)))})});s=t("#change-email-address").find(".error-message").html();t(document).on("click","#changeEmailBtn",function(){var n=t("#change-email-address"),l=n.find(".success-message"),i,f,e,h,c;l.html("");i=n.find(".error-message");i.html(s).hide();var r={},u=!1,o=n.find("#newEmailAddress").val();if(o===""&&(r.newEmailAddress=t("label[for=newEmailAddress]").text().replace("*",""),u=!0),f=n.find("#confirmNewEmailAddress").val(),f===""&&(r.confirmNewEmailAddress=t("label[for=confirmNewEmailAddress]").text().replace("*",""),u=!0),e=n.find("#currentPassword").val(),e===""&&(r.password=t("label[for=currentPassword]").text().replace("*",""),u=!0),u){for(h in r)i.append("<p> * "+r[h]+"<\/p>").show();t("html, body").animate({scrollTop:n.offset().top},10);return}i.html("");c=t("#myaccount-tabs-content").find("#MyAccountToken").val();t.post("/OUPMyAccount/RequestEmailAddressChange",{newEmailAddress:o,confirmNewEmailAddress:f,password:e,token:c},function(r){r!=null&&(r.ReturnId&&t("#myaccount-tabs-content").find("#MyAccountToken").val(r.ReturnId),r.Messages==null||r.Messages[0]==null||r.Messages[0]==""?(n.children(".change-email-address-form").hide(),n.children(".change-email-address-verification").show()):i.html(r.Messages[0]).show())})});t(document).on("click","#changeEmailVerificationBtn",function(){var n=t("#change-email-address"),u=n.find(".success-message"),i,r;u.html("").hide();i=n.find(".error-message");i.html("").hide();r=n.find("#changeEmailVerificationCode").val();r.length>0&&t.post("/OUPMyAccount/VerifyEmailAddressChange",{verificationCode:r},function(r){r[0]=="1"?(u.html(r[1]).show(),t.get("/LOGOUT",{dest:"/HTTPHandlers/SAMs/LogoutHandler.ashx"}).done(function(){}).fail(function(){})):(i.html(r[1]).show(),t("html, body").animate({scrollTop:n.offset().top},10))})})};n.initSavedSearches=function(){t(".solrSearchSaveWidget table.tablesorter").tablesorter({theme:"default",delayInit:!0,ignoreCase:!0,headers:{4:{sorter:!1}},sortList:[[0,0]]});t(".solrSearchSaveWidget .save-search-delete").click(function(){SCM.MyAccount.deleteSaveSearch(t(this))});t(".solrSearchSaveWidget .ddlSearchAlertFrequencyMyAccount").change(function(){SCM.MyAccount.changeUserAlert(t(this))});t(".solrSearchSaveWidget .save-search-rename-rename").click(function(){var n=t(this).closest("td"),i=n.find(".save-search-name-link");i.hide();n.find(".save-search-input").val(i.text()).css("display","inline-block").focus();n.find(".save-search-rename-cancel").show();n.find(".save-search-rename-save").show();t(this).hide()});t(".solrSearchSaveWidget .save-search-rename-cancel").click(function(){var n=t(this).closest("td");n.find(".save-search-name-link").show();n.find(".save-search-input").hide();n.find(".save-search-rename-rename").show();n.find(".save-search-rename-save").hide();t(this).hide()});t(".solrSearchSaveWidget .save-search-rename-save").click(function(){var r=t(this),n=r.closest("td"),u=n.find(".save-search-input"),f=r.closest("tr").data("usersearchid"),i=u.val();i.length&&(SCM.MyAccount.renameSaveSearch(i,f),u.hide(),n.find(".save-search-name-link").text(i).show(),n.find(".save-search-rename-rename").show(),n.find(".save-search-rename-cancel").hide(),t(this).hide())});t(".solrSearchSaveWidget .save-search-input").on("keypress",function(n){var i=t(this).closest("td"),r=t(this).val(),f=n.keyCode||n.which,u;f===13&&(n.preventDefault(),r.length&&(u=i.closest("tr").data("usersearchid"),SCM.MyAccount.renameSaveSearch(r,u),t(this).hide(),i.find(".save-search-name-link").text(r).show(),i.find(".save-search-rename-rename").show(),i.find(".save-search-rename-save").hide(),i.find(".save-search-rename-cancel").hide()))})};n.bindTableSorter=function(n){t(n).trigger("update");var i=t(n).get(0).config.sortList;t(n).trigger("sorton",[i])};n.deleteSaveSearch=function(n){t(".alerts-wrap-cover").removeClass("uncovered");t(".alerts-wrap-cover").addClass("covered");var u="//"+i.val()+"/Solr/DeleteSolrSearchInfoWithToken",r=n.closest("tr"),f=r.data("usersearchid"),e=r.data("useralertid"),o=t("#SolrSearchAuthToken").val();t.ajax({url:u,type:"POST",dataType:"json",cache:!1,data:{userSearchId:f,userAlertId:e,token:o},success:function(n){n!=null&&(n.ReturnId&&t("#SolrSearchAuthToken").val(n.ReturnId),t(".solrSearchSaveWidget .solrSearchSaveModel .message").html(n.Html).parent().foundation("reveal","open"),n.Success&&r.remove())},error:function(n,t){if(window.console){var i=eval("("+n.responseText+")");console.log("error: "+i);console.log("status: "+t)}}}).done(function(){SCM.MyAccount.bindTableSorter(t(".saved-searches-table.tablesorter"));t(".alerts-wrap-cover").removeClass("covered");t(".alerts-wrap-cover").addClass("uncovered")})};n.changeUserAlert=function(n){var u="//"+i.val()+"/Solr/UpdateUserAlertWithToken",r=n.closest("tr"),f=r.data("usersearchid"),e=r.data("useralertid"),o=n.val(),s=t("#SolrSearchAuthToken").val();t(".alerts-wrap-cover").removeClass("uncovered");t(".alerts-wrap-cover").addClass("covered");t.ajax({url:u,type:"POST",dataType:"json",cache:!1,data:{userSearchId:f,userAlertId:e,scheduleId:o,token:s},success:function(n){if(n!=null){var i=JSON.parse(n.ReturnId);i!=null&&i.Token!=null&&t("#SolrSearchAuthToken").val(i.Token);t(".solrSearchSaveWidget .solrSearchSaveModel .message").html(n.Html).parent().foundation("reveal","open");n.Success&&i!=null&&i.ReturnId!=null&&r.data("useralertid",i.ReturnId)}},error:function(n,t){if(window.console){var i=eval("("+n.responseText+")");console.log("error: "+i);console.log("status: "+t)}}}).done(function(){t(".alerts-wrap-cover").removeClass("covered");t(".alerts-wrap-cover").addClass("uncovered")})};n.renameSaveSearch=function(n,r){var u="//"+i.val()+"/Solr/RenameSolrSearchInfoWithToken",f=t("#SolrSearchAuthToken").val();t.ajax({url:u,type:"POST",dataType:"json",cache:!1,data:{searchName:n,userSearchId:r,token:f},success:function(n){n!=null&&(n.ReturnId&&t("#SolrSearchAuthToken").val(n.ReturnId),t(".solrSearchSaveWidget .solrSearchSaveModel .message").html(n.Html).parent().foundation("reveal","open"))},error:function(n,t){if(window.console){var i=eval("("+n.responseText+")");console.log("error: "+i);console.log("status: "+t)}}}).done(function(){SCM.MyAccount.bindTableSorter(t(".saved-searches-table.tablesorter"))})};n.initRegister=function(n){var i=t(".widget-Register");n!=null&&n.length>0&&(i.find(".error-message").html(n).show(),SCM.MyAccount.clearLastErrorMessage());i.on("click","#showPassword",function(){i.find("#Password, #ConfirmPassword").each(function(){var n=t(this).clone();n.attr("type","text");n.attr("autocomplete","off");n.attr("value",t(this).val());t(this).after(n);t(this).remove()});t(this).hide();t(this).siblings("#hidePassword").show()});i.on("click","#hidePassword",function(){i.find("#Password, #ConfirmPassword").each(function(){var n=t(this).clone();n.attr("type","password");n.removeAttr("autocomplete");n.attr("value",t(this).val());t(this).after(n);t(this).remove()});t(this).hide();t(this).siblings("#showPassword").show()});i.on("click","#registerBtn",function(){i.find(".error-message").html().hide;var u=i.find("#EmailAddress").val(),f=i.find("#Password").val(),v=i.find("#ConfirmPassword").val(),e=i.find("#Title").val(),o=i.find("#FirstName").val(),s=i.find("#LastName").val(),h=i.find("#CountryList").val(),c=i.find("#Telephone").val(),y=i.find("#hpcName").val(),k=i.find(".txtCaptchaInput").val(),d=t("#recaptcha_challenge_field").val(),g=t("#recaptcha_response_field").val(),l=i.find("#registerIssueAlert"),a=!1;l!=undefined&&(a=l.is(":checked")?!0:!1);var n=i.find("#hfAlertJournalId"),p=n!=undefined&&n.length>0?n.val():0,r=i.find("#hfAlertSiteId"),w=r!=undefined&&r.length>0?r.val():0,b=a?"?siteId="+w+"&journalId="+p:"";y.length>0?console.log("Honeypot captcha triggered. Are you a bot?"):t.post("/OUPMyAccount/Register",{email:u,password:f,confirmPassword:v,title:e===undefined?null:e,firstName:o===undefined?null:o,lastName:s===undefined?null:s,country:h===undefined?null:h,phone:c===undefined?null:c,captchaResponse:captchaEnabled?grecaptcha.getResponse():""},function(n){n==="OK"?t.post("/LOGIN",{user:u,pass:f,dest:"/HTTPHandlers/SAMs/LoginHandler.ashx"+b}).done(function(n){n==="1"?SCM.SiteJS.loginReturnBack():i.find(".error-message").html("The account has been created, but the login failed. Please try login again.").show()}):window.location.reload()})});SCM.TestPassword.initTestPassword("#Password","#ConfirmPassword","#registerBtn")};n.clearLastErrorMessage=function(){t.post("/OUPMyAccount/ClearLastErrorMessage")};n.lockRegistrationButton=function(){t(".register-form-wrap").find("#registerBtn").removeClass("btn-green");t(".register-form-wrap").find(".register-button-overlay").show()};n.showValidPasswordCriteria=function(n){n.removeClass("icon-general-close red").addClass("icon-general-check green");n.siblings(".password-check-label").addClass("fade")};n.showInvalidPasswordCriteria=function(n){n.removeClass("icon-general-check green").addClass("icon-general-close red");n.siblings(".password-check-label").removeClass("fade")};n.initForgotPassword=function(){var n=t("#forgot-password").find(".error-message").html();t("#forgotPasswordBtn").on("click",function(){var i=t("#forgot-password"),f=i.find(".success-message"),u=i.find(".error-message"),r;f.html("").hide();u.html(n).hide();r=i.find("#contactEmail").val();r.length>0?t.post("/OUPMyAccount/ForgotPassword",{email:r},function(n){if(n==null||n==""){var e=i.find(".success-message-template").html().replace("{0}",r);f.html(e).show()}else u.html(n).show(),t("html, body").animate({scrollTop:i.offset().top},10)},"html"):(u.append("<p> * "+t("label[for=contactEmail]").text().replace("*","")+"<\/p>").show(),t("html, body").animate({scrollTop:i.offset().top},10))})};n.initResetPassword=function(){t("#changePasswordBtn").on("click",function(){var n=t("#change-password"),i=n.find(".success-message"),r=n.find(".error-message"),u=t.deparam.querystring().t,f=n.find("#newPassword").val(),e=n.find("#confirmNewPassword").val();t.post("/OUPMyAccount/ResetPassword",{token:u,newPassword:f,confirmNewPassword:e},function(u){u==null||u==""?(i.show(),r.hide()):(i.hide(),r.html(u).show(),t("html, body").animate({scrollTop:n.offset().top},10))},"html")});SCM.TestPassword.initTestPassword("#newPassword","#confirmNewPassword","#changePasswordBtn")};n.countSubjectChoices=function(){t("#communication-preferences-subject-choices").find(".topics-selected-wrap").each(function(){var n=t(this).closest("li").find("input[type=checkbox]"),i=n.filter(":checked");t(this).find(".totalCount").html(n.length);t(this).find(".checkedTotal").html(i.length);t(this).show()})};n.changeUserTypeSubjects=function(n){var r=t("#communication-preferences"),i;t("#userTypeSubjectHeader").hide();i=r.find("#userTypes").val();i==="3"&&t("#userTypeSubjectHeader").show();r.find("ul#userTypeSubjects > li").each(function(){var r=t(this).find("input[type=checkbox]");t(this).attr("data-classification-id")===i?(t(this).show(),n&&r.prop("checked",r.data("checked"))):(t(this).hide(),n&&r.prop("checked",!1))})};n.initCommunicationPreferences=function(n){SCM.MyAccount.countSubjectChoices();t("#communication-preferences-subject-choices").on("click",".mainSubjects > a",function(){t(this).siblings("ul").slideToggle();t(this).children("i").hasClass("icon-general-arrow-filled-down")?t(this).children("i").removeClass("icon-general-arrow-filled-down").addClass("icon-general-arrow-filled-right"):t(this).children("i").removeClass("icon-general-arrow-filled-right").addClass("icon-general-arrow-filled-down")});t("#communication-preferences-subject-choices").on("click","input[type=checkbox]",function(){t(this).next("ul").find("input[type=checkbox]").prop("checked",!t(this).is(":checked"));SCM.MyAccount.countSubjectChoices()});n!=null&&n>0&&t("#communication-preferences #userTypes").val(n);SCM.MyAccount.changeUserTypeSubjects(!1);t("#communication-preferences #userTypes").change(function(){SCM.MyAccount.changeUserTypeSubjects(!0)});t("#communication-preferences #btnConfirmOptIn").on("click",function(){var n=t(this);t.ajax({url:"/OUPMyAccount/SendEmailForOptInCommPref",type:"GET",dataType:"json"}).done(function(i){i.Success?t("#communication-preferences").find(".success-message").html(i.Html).show():t("#communication-preferences").find(".error-message").html(i.Html).show();n.hide();t("#communication-preferences .send-verify-email").hide()})});t("#communication-preferences #updatePreferencesBtn").click(function(n){var i=t("#communication-preferences"),r=!i.find("#confirmOptOut").is(":checked"),u=[],f;i.find("input[type=checkbox][data-type=subjectId]").filter(":checked").each(function(){u.push(t(this).val())});f=i.find("#userTypes").val();t.ajax({url:"/OUPMyAccount/UpdateCommunicationPreferences",type:"POST",traditional:!0,data:{optInMarketEmail:r,subjectIds:u,classificationId:f},dataType:"html"}).done(function(n){i.find(".success-message").html(n).show();r?(i.find(".optedIn-message").show(),i.find(".optedOut-message").hide()):(i.find(".optedIn-message").hide(),i.find(".optedOut-message").show());i.find("#userTypeSubjects input[type=checkbox][data-type=subjectId]").each(function(){t(this).data("checked",t(this).is(":checked"))})});n.preventDefault()});t("#communication-preferences #communication-preferences-subject-choices input[type=checkbox][data-type=subjectId]").click(function(){var n=t("#communication-preferences");n.find(".success-message").hide()})};n.initActivateSubscription=function(){t("#activateSubscriptionBtn").on("click",function(){var i=t(".activate-subscription-wrap"),n=i.find(".error-message"),r;n.html("").hide();t("#activateSubscriptionTermsConditions").is(":checked")==!1?(n.html(t("#activateSubErrTermsConditions").html()).show(),t("html, body").animate({scrollTop:i.offset().top},10)):(r=t("#activateSubscriptionToken").val(),r.length>0&&t.post("/OUPMyAccount/ActivateSubscriptionSubmitToken",{token:r},function(r){r=="subscriptions"?location.href="/my-account/subscriptions":r=="institutional-settings"?setTimeout(function(){location.href="/my-account/institutional-settings"},1e3):(n.html(r).show(),t("html, body").animate({scrollTop:i.offset().top},10))},"html").fail(function(){n.html('We encountered a problem when trying to activate your subscription. Please try again. If the problem continues, please contact <a href="/journals/pages/contact_us/customer_services">customer services<\/a>.').show()}))});t("#activateSubscriptionToken").on("keypress",function(n){var i=n.keyCode||n.which;i===13&&(n.preventDefault(),t("#activateSubscriptionBtn").click())})};n.initInstitutionalSettings=function(){var n=t(".error-summary").html();t("#institutionalAccountInfo").on("click","#saveInstitutionalSettingsBtn",function(){var i=t(this).closest("#institutionalAccountInfo"),r=i.find(".error-summary"),u;r.html(n);u=i.find(".instUpdate-success");u.hide();r.hide();i.find(".instUpdate-error").html("").removeClass("is-active");var o=i.find("#instSet-InstitutionName").val(),s=i.find("#instSet-IpAddresses").val(),h=i.find("#instSet-OrgId").val(),c=i.find("#instSet-EntityId").val(),l=i.find("#instSet-OpenUrl").val(),f=i.find("#instSet-OpenUrlButton").val(),a=i.find("#instSet-InstUrl").val(),e=i.find("#instSet-InstLogo").val(),v=t("#myaccount-tabs-content").find("#MyAccountToken").val();t.post("/OUPMyAccount/UpdateInstitutionalAccountInfo",{institutionName:o,ipAddresses:s,orgId:h,entityId:c,openUrl:l,openUrlButton:f,instUrl:a,instLogoUrl:e,token:v},function(n){var s,o;if(n!=undefined&&n!=null)if(n.ReturnId&&t("#myaccount-tabs-content").find("#MyAccountToken").val(n.ReturnId),t.isEmptyObject(n.Errors))u.show(),t.trim(f).length?t("#instSet-OpenUrlButtonImg").attr("src",f).show():t("#instSet-OpenUrlButtonImg").hide(),t.trim(e).length?t("#instSet-InstLogoImg").attr("src",e).show():t("#instSet-InstLogoImg").hide();else{for(s in n.Errors){o=null;switch(s){case"general":o="general";break;case"institutionName":o="instSet-InstitutionName";break;case"ipAddressList":o="instSet-IpAddresses";break;case"orgId":o="instSet-OrgId";break;case"entityId":o="instSet-EntityId";break;case"openUrl":o="instSet-OpenUrl";break;case"openUrlButton":o="instSet-OpenUrlButton";break;case"instUrl":o="instSet-InstUrl";break;case"instLogoUrl":o="instSet-InstLogo"}o!=null&&(o==="general"?i.find(".instUpdate-error.general-error").html(n.Errors[s]).addClass("is-active"):(i.find("#"+o).next(".instUpdate-error").html(n.Errors[s]).addClass("is-active"),r.append("<p> * "+t("label[for="+o+"]").text().replace("*","")+"<\/p>"),r.show()))}t("html, body").animate({scrollTop:i.offset().top},10)}})});t(document).on("click","#institutionalAccountInfo .question-icon",function(n){n.preventDefault();var i=t(this).next('[data-type="help-text"]').html();t("#institutionalSettingsModalBody").html(i);t("#institutionalSettingsModal").foundation("reveal","open")})};n.initSubscriptions=function(){t(".subscriptions-wrap table.tablesorter").tablesorter({theme:"default",delayInit:!0,ignoreCase:!0,sortList:[[0,0]]});t(".subscriptions-wrap .view-expired-link").click(function(){t(this).hide();$subTypeContainer=t(this).closest(".subscription-type").find(".subscription-type-table");$subTypeContainer.show();$subTypeContainer.children("tbody").children("tr").show()});t(".subscriptions-wrap .subscription-resource-link").click(function(){var n=t(this).data("resource-id"),i=t(this).data("resource-type");t.get("/OUPMyAccount/GetResourceUrl",{resourceId:n,resourceType:i},function(n){top.location=n},"text")})}}(SCM.MyAccount=SCM.MyAccount||{},jQuery);$(document).ready(function(){var r=$("#journalAddEditDiv"),t=$("#journalAddEditDiv .add-new-alert .new-alert-row-wrap"),i,n;$(document).on("click",".myaccount-tabs-inner-wrap div",function(){$(".tabbed-content-overlay").show()});$("#myaccount-tabs-content").bind("DOMSubtreeModified",function(){$(".tabbed-content-overlay").hide()});$("#institutionalLogoURL").keyup(function(){$(".logoPreview").attr("src",$(this).val());$(".logoPreview").error(function(){$(this).attr("src","/Images/grey.gif")})});n=function(n){if(r.hasClass("open")&&!n.hasClass("js-save-alerts"))$(document).on("closed.fndtn.reveal","[data-reveal]",function(){t.html(i)})};$(document).on("opened.fndtn.reveal","[data-reveal]",function(){i=t.html();$(document).on("mouseup.myAccount",function(t){var i=$(t.target);n(i)});$(document).on("keyup.myAccount",function(t){var i=$(t.target);n(i)})});$(document).on("closed.fndtn.reveal","[data-reveal]",function(){$(document).unbind("mouseup.myAccount");$(document).unbind("keyup.myAccount")})});SCM=SCM||{};SCM.Utilities=SCM.Utilities||{},function(n,t){n.init=function(){var n;t(".brightcove-wrapper video.video-js").length!==0&&(n="//players.brightcove.net/1611106596001/BkMnETZOZ_default/index.min.js",t.getScript(n,function(){}));t(".brightcove-wrapper-audio video.video-js").length!==0&&(n="//players.brightcove.net/1611106596001/ryQZHF29_default/index.min.js",t.getScript(n,function(){}))}}(SCM.Utilities.Brightcove=SCM.Utilities.Brightcove||{},jQuery);SCM=SCM||{},function(n,t,i){function r(n,i){var r=t(n),u=r.parents(".js-abstract-response-placeholder");u.addClass("removePad");r.on("click",i,function(r){var u=t(r.target),f=u.parents(".js-abstract-response-placeholder"),e=f.find(n+"-content"),o=u.index(),s=t(i,e);f.find("li").removeClass("is-active");u.addClass("is-active");s.eq(o).addClass("is-active")})}n.initAbstractClickEvent=function(){t(".master-main").on("click","a.showAbstractLink",function(){var f=t(this).closest("div[data-article-abstract-fetched-wrapper]"),e=t(f).data("articleid-abstract"),c=t(f).children("div[data-tried-to-fetch-abstract]").first(),a=t(c).data("tried-to-fetch-abstract")==="true",n=t("#abstract-"+e),u=t("#hfSiteURL"),v=t("#abstract-"+e+"-links"),o=t(this).closest("div.abstract-link").data("link-article-abstract-type")==="extract"?"/PlatformArticle/ArticleAbstractOrExtractAjax":"/PlatformArticle/ArticleAbstractAjax";n.parent().toggleClass("tabExpand");typeof u!="undefined"&&typeof u.val()!="undefined"&&u!==""&&(o="//"+u.val()+o);t(n).closest("li").toggleClass("abstractExpanded");t(n).append('<div class="spinner"><\/div>');a||(t.ajax({url:o,type:"GET",data:{articleId:e},success:function(t){n.html(t.Html);n.append(v.html());r(".js-tabs"," > li");i.init()},error:function(i,r){if(t(n).find(".spinner").remove(),window.console){var u=eval("("+i.responseText+")");console.log("error: "+u);console.log("status: "+r)}}}),t(c).data("tried-to-fetch-abstract","true"));n.toggle();var s=f.find(".abstract-toggle-icon"),h="icon-general-arrow-filled-down",l="icon-general-arrow-filled-up";s.hasClass(h)?s.removeClass(h).addClass(l):s.removeClass(l).addClass(h)})}}(SCM.ArticleAbstract=SCM.ArticleAbstract||{},jQuery,SCM.Utilities.Brightcove);jQuery(document).ready(function(){SCM.ArticleAbstract.initAbstractClickEvent()});SCM=SCM||{};SCM.SearchResults={};SCM.SearchResults.defaults={controller:"Solr",action:"SolrSearch",instanceName:"Search",baseSiteUrl:"",updateTargetSelector:"#divSearch"};$(function(){function n(n,t){n.bind("keydown",function(i){if(i.which===13){var r=n.val();if(isYearOnly(r))return updateYearOnlyToFullDate(n,t),i.preventDefault(),i.stopImmediatePropagation(),!1}}).datepicker()}function i(){$(".collapsible-facet .sf-facet-list").each(function(){$(this).find(".sf-facet").length>12&&($(this).find(".facetShowMoreLi").remove(),$(this).find(".sf-facet:gt(11)").hide(),$(this).append('<li class="facetShowMoreLi"><a href="" class="facetShowMore">Show more<\/a><\/li>'))})}function r(){$(".taxonomy-parent-arrow").on("click",function(){var n=$(this);n.parents(".taxonomy-label-wrap").siblings(".taxonomy-child-list").slideToggle();n.hasClass("icon-general-arrow-filled-right")?n.removeClass("icon-general-arrow-filled-right").addClass("icon-general-arrow-filled-down"):n.removeClass("icon-general-arrow-filled-down").addClass("icon-general-arrow-filled-right")});$(".taxonomy-child-list .queryitem").length>0&&$(".taxonomy-child-list .queryitem").parents(".taxonomy-child-list .taxonomy-child-list-item").each(function(){var t=$(this).find(".queryitem"),n;t.length>0&&(n=$(this).find(".taxonomy-parent-arrow").first(),n!==undefined&&n.length>0&&n.hasClass("icon-general-arrow-filled-right")&&(n.parents(".taxonomy-label-wrap").siblings(".taxonomy-child-list").slideToggle(),n.removeClass("icon-general-arrow-filled-right").addClass("icon-general-arrow-filled-down")))})}(function(){$(document).on("click",".facetShowMore",function(n){$(this).closest(".sf-facet-list").find(".sf-facet:gt(11):visible").length?($(this).closest(".sf-facet-list").find(".sf-facet:gt(11):visible").animate({height:"toggle"},400),$(this).text("Show more")):($(this).closest(".sf-facet-list").find(".sf-facet").not(":visible").animate({height:"toggle"},400),$(this).text("Show less"));n.preventDefault()});$("#searchResultsPage").on("click",".journal-description-container a",function(n){n.preventDefault();$(this).closest(".journal-description-container").find(".journal-description").toggleClass("hide")})})();i();r();var t={},u=window.location.search.substring(1);window.onpopstate=function(n){n.state&&SCM.SearchResults.doSolrSearch(n.state)},function(){var i=$(SCM.SearchResults.defaults.updateTargetSelector),o,s,r,f,e;t[u]={results:i.html()};window.history.replaceState({queryString:u},null,null);o=$("#fromDate");s=$("#ToDate");$("#fromDate").datepicker();$("#ToDate").datepicker();r=!0;Date.prototype.today=function(){return(this.getMonth()+1<10?"0":"")+(this.getMonth()+1)+"/"+(this.getDate()<10?"0":"")+this.getDate()+"/"+this.getFullYear()};var h=function(n){var i=/^(\d{1,2})[-\/](\d{1,2})[-\/](\d{2,4})$/.exec(n),r;if(i==null)return!1;var u=i[2],f=i[1]-1,t=i[3];return t.length==2&&(t="20"+t),r=new Date(t,f,u),r.getDate()==u&&r.getMonth()==f&&r.getFullYear()==t},c=function(n){var t=/^(\d{4})$/.exec(n);return t&&t[1]>-1},l=function(n,t){var u=n.val(),i=null,r=null;return t?(i="01",r="01"):(i="12",r="31"),n.val(i+"/"+r+"/"+u),n.val()},a=function(n){var t=/^(\d{1,2})[-\/](\d{1,2})[-\/](\d{2,4})$/.exec(n),i=t[1],r=t[2],u=t[3],f=r,e=i,o=u;return u.length==2&&(o="20"+u),r.length==1&&(f="0"+r),i.length==1&&(e="0"+i),e+"/"+f+"/"+o};i.on("click",".chkSelect",function(){SCM.SearchResults.doSolrSearch({queryString:$(this).data("redirectUrl")})});i.on("click",".js-sf-facet__link",function(n){var t=$(this).attr("data-url");t===null||t==="#"||t===""||(n.preventDefault(),SCM.SearchResults.doSolrSearch({queryString:t}))});i.on("click","a.close",function(t){var i=$(this).attr("data-url");i==null||i=="#"||i==""||(t.preventDefault(),SCM.SearchResults.doSolrSearch({queryString:i}));n($("#fromDate"),!0);n($("#ToDate"),!1);$(".ui-datepicker-trigger")&&$(".ui-datepicker-trigger").length!==0||($(".datepicker__input").hasClass("hasDatepicker")&&$(".datepicker__input").removeClass("hasDatepicker"),SCM.AccessibleDatepicker.initDatepicker())});i.on("click",".rbShowFacet",function(n){var t,i;n.preventDefault();t=$(this).attr("previous-status");t=="False"&&(i=$(this).attr("data-url"),SCM.SearchResults.doSolrSearch({queryString:i}))});i.on("click","#solrSearchBtn",function(){var n=$("#txtSearch").val();n==null||n==""?alert("Please enter a term to perform search"):(n=encodeURIComponent(n),SCM.SearchResults.doSolrSearch({queryString:"q="+n}))});i.on("click","#btnRangeSearch",function(){var n=$("#fromDate").val(),t=$("#ToDate").val(),i,r,u;if(c(n)&&(n=l($("#fromDate"),!0)),$("#ToDate").val()===""?t=n:c(t)&&(t=l($("#ToDate"),!1)),!h(n)||!h(t)){alert("Please enter valid dates");return}if(i=a(n),r=a(t),new Date(r)<new Date(i)){alert("End Date must be greater than Start Date");return}u=$(this).attr("data-url").replace("queryText",i+" TO "+r);SCM.SearchResults.doSolrSearch({queryString:u})});f=function(n){return typeof n=="string"?n.toLowerCase()=="true":!!n};e=function(){var n={UserEmail:$("#UserEmail").val(),ResourceTitle:$("#ResourceTitle").val(),AlertType:$("#AlertType").val(),CurrentUserEmail:$("#CurrentUserEmail").val(),IsUserAlreadySubscribed:f($("#IsUserAlreadySubscribed").val()),SuccessfulUpdate:$("#SuccessfulUpdate").val(),ResourceId:$("#ResourceId").val(),ResourceType:$("#ResourceType").val(),SearchTerm:$("#SearchTerm").val(),SearchUrl:$("#SearchUrl").val(),CurrentAlertContextSiteId:$("#CurrentAlertContextSiteId").val(),ShowSaveSearchToUnauthenticatedUser:f($("#ShowSaveSearchToUnauthenticatedUser").val()),UserIsLoggedIn:f($("#UserIsLoggedIn").val())},t;n.IsUserAlreadySubscribed!=null&&n.IsUserAlreadySubscribed?(t=$("#Config_SearchAlertMyAccoutUrl").val(),window.location.href=t):n.ShowSaveSearchToUnauthenticatedUser&&!n.UserIsLoggedIn?(ShowSignInForSearchAlertSignUp(),r=!0):$.post("/Toolbox/ToolboxGetAlertsUpdateMessage",n,function(n){r=!0;alert("Alert Saved Sucessfully. Visit My Account page to manage your email alerts");$("#divSearchAlerts").html(n);$("#divSearchAlerts a").on("click",function(n){n.preventDefault();e()})})};i.on("click","#divSearchAlerts a",function(n){n.preventDefault();r&&(r=!1,e())});n(o,!0);n(s,!1)}();SCM.SearchResults=$.extend(SCM.SearchResults,function(u){function f(t,f){if(u(".ui-datepicker-trigger")&&u(".ui-datepicker-trigger").length!==0||u(".datepicker__input").hasClass("hasDatepicker")&&u(".datepicker__input").removeClass("hasDatepicker"),SCM.AccessibleDatepicker.initDatepicker(),o(f[0]),n(u("#fromDate"),!0),n(u("#ToDate"),!1),typeof clientViewOption!="undefined"&&clientViewOption!==""){var e=u(".sri-expandedView");clientViewOption==="Expanded"?e.show():e.hide()}r();i();window.history.state.queryString!=t.queryString&&window.history.pushState(t,null,window.location.pathname+"?"+t.queryString);SCM.JournalCitationFilter&&SCM.JournalCitationFilter.init()}var e=function(n){var i,s,r,e,o;if(/\/(search-results|advanced-search)$/i.test(location.pathname)){if(i=u.extend(SCM.SearchResults.defaults,n),s=/\/advanced-search$/i,s.test(location.pathname)){r="/search-results";typeof i.baseSiteUrl!="undefined"&&i.baseSiteUrl!==""&&(r="//"+i.baseSiteUrl+r);r+="?"+n.queryString;window.location=r;return}if(e=u(i.updateTargetSelector),t[n.queryString]){e.html(t[n.queryString].results).show();SCM.SolrSearch.ajaxComplete();f(n,e);return}o="/"+i.controller+"/"+i.action+"/"+i.instanceName;typeof i.baseSiteUrl!="undefined"&&i.baseSiteUrl!==""&&(o="//"+i.baseSiteUrl+o);o+="?"+n.queryString;u.ajax({url:o,success:function(r){e.html(r);t[n.queryString]={results:r,updateTargetSelector:i.updateTargetSelector};f(n,e)},error:function(n,t,i){window.console&&console.error(i)}})}},o=function(n){var t=n.getBoundingClientRect();t.top<0&&u("html, body").animate({scrollTop:n.offsetTop},1e3)};return{doSolrSearch:e}}(jQuery))});SCM=SCM||{},function(n,t,i){function tt(){r===ct?t(".js-advanced-search").attr("href",v(k)+"/"+e(a)):r===ht?t(".js-advanced-search").attr("href",v()+"/journals/"+e(a,null,null,null,!0)):r!==""?t(".js-advanced-search").attr("href",v(g)+"/"+e(a,null,l,r)):t(".js-advanced-search").attr("href",v(g)+"/"+e(a,null,l))}function v(n){return o(n)?it()+window.location.hostname:it()+n}function it(){return window.location.protocol+"//"}function y(n,r){f=encodeURIComponent(n);var a='"'+f+'"',v=""+a,s="",c="";c=u===i||u!==i&&u===""?t("#hfSiteURL"):u;r===t("#hfjournalSiteScope").val()?(s="/../journals/"+h+f+"&SearchSourceType=1",window.location.href=s):o(r)?(s=e(h,f,l,null,!0),c.length&&(s="//"+c.val()+"/"+s),window.location.href=s):r===t("#hfparentSiteScope").val()?(s=e(h,f,d),s="//"+k+"/"+s,window.location.href=s):r===lt?(s=e(h,f,d,null,!1,!0),c.length&&(s="//"+c.val()+"/"+s),window.location.href=s):(s=e(h,f,l,r),c.length&&(s="//"+c.val()+"/"+s),window.location.href=s)}function e(n,t,i,r,u,f){o(u)&&(u=!1);var e=n;return o(t)?e=e.replace("&q=",""):e+=t,o(i)||(e+="&fl_SiteID="+i),e+="&SearchSourceType=1",u===!0&&(e+="&allJournals=1"),f&&(o(nt)||(e+=nt)),o(r)||(e+="&"+vt(r)),e}function o(n){return typeof n=="undefined"||n===i||n==null||n==""}function vt(n){return"tax="+n}function ut(){t(".date-range-input-radio").on("click",function(){t(this).attr("value")==="single"?(t(".date-input-to").hide(),t(".date-label-from span").text("Search on this date").append("<br/>")):(t(".date-input-to").show(),t(".date-label-from span").text("From"))})}function ft(){var r=t(".lnkSaveSolrSearch"),n=t(".solrSearchSaveModel"),u=t(".btnSolrSearchSave"),f=t(".txtSolrSearchName");r.unbind("click").on("click",function(){var r=t(this).attr("data-userloggedin"),u,f;r!==i&&r.toLowerCase()==="false"?(u=t("#hdnSearchSaveRedirectUrl"),f=window.location.href,window.location=u.val()+"?returnUrl="+encodeURIComponent(f+"#triggerSaveSearch=1")):rt(n)});u.unbind("click").on("click",function(){w(n)});f.off("keypress").on("keypress",function(t){var i=t.keyCode||t.which;i===13&&w(n)})}function et(){t("div.sri-figure[restricted]").each(function(){t(this).unbind("contextmenu").bind("contextmenu",function(){return!1})})}function yt(){var h=t(".master-header").find(".microsite-search-icon"),n=t(".master-header").find(".microsite-search-term"),l=t(".master-header").find(".mobile-microsite-search-icon"),u=t(".master-header").find(".mobile-microsite-search-term"),a=t(".toolbar-search").find(".microsite-search-icon"),f=t(".toolbar-search").find(".microsite-search-term"),v=t("#UmbrellaSearchIcon"),y=t("#UmbrellaHomeSearchIcon"),e=t("#UmbrellaSearchTerm"),o=t("#UmbrellaHomeSearchTerm"),p=t(".kwd-part"),i="J*";v.on("click",function(){s(e.val(),i)});y.on("click",function(){s(o.val(),i)});h.on("click",function(){s(n.val(),r)});l.on("click",function(){s(u.val(),r)});a.on("click",function(){s(f.val(),r)});t(".searchLi .icon-search").on("click",function(){s(n.val(),r)});p.on("click",function(){at(t(this).attr("data-keyword"))});e.bind("keypress",function(n){c(n,i,e.val())});o.bind("keypress",function(n){c(n,i,o.val())});n.bind("keypress",function(t){c(t,r,n.val())});u.bind("keypress",function(n){c(n,r,u.val())});f.bind("keypress",function(n){c(n,r,f.val())})}var b=t("body"),ot=t("#hfSolrJournalID"),st=t("#hfParentSiteName").val(),u=t("#hfGlobalSearchSiteURL").val(),r=t("#navbar-search-filter :selected").val(),ht=t("#hfjournalSiteScope").val(),ct=t("#hfparentSiteScope").val(),l=t("#hfsiteID").val(),k=t("#hfparentSiteUrl").val(),d=t("#hfparentSiteID").val(),g=t("#hfSiteURL").val(),h=t("#hfdefaultSearchURL").val(),a=t("#hfDefaultAdvancedSearchUrl").val(),nt=t("#hfIssueSearch").val(),lt=t("#hfIssueSiteScope").val(),f="",rt,w,p;t("#navbar-search-filter, #mobile-navbar-search-filter").change(function(){r=t(this).val();tt()});var s=function(n,i){if(st!=="")y(n,i);else return t.trim(n)===""||n===null||n==="Search OUP"?(alert("Please enter a term to search: "),!1):!0&&n?(y(n,i),!0):(console.error("Search failed"),!1)},at=function(n){var r,f;n[0]!=='"'&&n[n.length-1]!=='"'&&(n='"'+n+'"');r='search-results?page=1&qb=%7B"Keywords1":'+encodeURIComponent(n)+"%7D&SearchSourceType=1";u===i||u!==i&&u===""?(f=t("#hfSiteURL"),f.length&&(r="//"+f.val()+"/"+r)):r="//"+u.val()+r;window.location.href=r},c=function(n,t,i){n.keyCode===13&&(n.preventDefault(),s(i,t))};rt=function(n){n.foundation("reveal","open")};w=function(n){var i=t(".txtSolrSearchName"),r=t("#ddlSearchAlertFrequency");if(t.trim(i.val())===""||i.val()===null)return alert("Please enter a name"),!1;var u=t("#hdnSearchSaveRedirectUrl"),f=window.location.href,e=t("#SolrSearchAuthToken").val(),o=JSON.stringify({searchName:i.val(),url:f,scheduleId:r.val(),redirectUrl:u.val(),token:e}),s="//"+SCM.SearchResults.defaults.baseSiteUrl+"/Solr/SaveSolrSearchInfoWithToken";t.ajax({url:s,type:"POST",dataType:"json",cache:!1,data:o,contentType:"application/json; charset=utf-8",success:function(i){i!=null&&(i.ReturnId&&t("#SolrSearchAuthToken").val(i.ReturnId),i.RedirectUrl&&i.RedirectUrl.length?window.location=i.RedirectUrl:(alert(i.Html),n.foundation("reveal","close")))},error:function(n,t){if(window.console){var i=eval("("+n.responseText+")");console.log("error: "+i);console.log("status: "+t)}}})};t("body").on("click",".taxonomy-label",function(){var n=t("#TaxonomyCurrentDataUrl").val(),u,i,e;if(n=decodeURIComponent(n),u=t(this).attr("data-parentid"),u!==""){var o=t(".taxonomy-node").attr("data-id"),r=t(this).parent(".taxonomy-label-wrap").attr("data-id"),f=n.indexOf("tax"),s=f===-1?!1:!0;s?(i=n.substring(f),i!==null&&i!==""&&(i.indexOf("="+o)>-1?n=n.replace(i,"tax="+r):t.inArray(r,decodeURIComponent(i.slice(4)).split(","))===-1&&(e=i+","+r,n=n.replace(i,e)))):n+="&tax="+r;SCM.SearchResults.doSolrSearch({queryString:n})}});n.init=function(){var n="";yt();ft();ut();et();tt();t("main").on("click",".collapsible-facet .sf-group-header",function(){if(t(window).outerWidth()<1024){var n=t(this),i=n.children(".sf-group-header-icon");n.siblings("fieldset").children(".sf-facets, .sf-facet-list").slideToggle();n.siblings(".taxonomy-node").slideToggle();i.hasClass("icon-general_arrow-right")?i.removeClass("icon-general_arrow-right").addClass("icon-general_arrow-down"):i.removeClass("icon-general_arrow-down").addClass("icon-general_arrow-right")}});SCM.QueryBuilder.configure();t(SCM.SearchResults.defaults.updateTargetSelector).length>0?SCM.QueryBuilder.defaults.runSearch=function(n){SCM.SearchResults.doSolrSearch({queryString:n})}:(t(".querybuilder-submit").attr("value","Search"),t(".querybuilder-title").text("Build a query"),SCM.QueryBuilder.defaults.runSearch=function(n){var i=t("#hfSiteURL").val();n.indexOf("q=")===-1&&(n="q="+n);window.location=window.location.protocol+"//"+i+"/search-results?"+n});t(".sort-dropdown-option:selected").addClass("selected");b.on("click",".sriTopiclink",function(i){f=t(this).text();var u=f.replace(",","");n=r;n===""||n===null?y(u,null):y(u,n);i.preventDefault()});t("a.categoryLink").each(function(){var i=t(this).attr("href"),n=ot.val(),r;o(n)?t(this).attr("href",u+i):(r=n.substr(1,n.length),t(this).attr("href","/"+i+"&fd_JournalID="+r))});b.on("click","#topicResultsWire",function(){var n=location.search;n=n.substring(0,n.indexOf("&fd_JournalID"));window.location.href=u.val()+"solr/topicresults.aspx"+n})};n.ajaxComplete=function(){ft();ut();et();SCM.QueryBuilder.configure()};SCM.SearchResults.defaults.instanceName="OUP_SearchResults";SCM.SearchResults.defaults.updateTargetSelector="#searchResultsPage";p=t("#hfSiteURL");typeof p!="undefined"&&p.val()!==""&&(SCM.SearchResults.defaults.baseSiteUrl=p.val());SCM.SolrSearch.init()}(SCM.SolrSearch=SCM.SolrSearch||{},jQuery);SCM=SCM||{},function(n,t){function i(n){var i=location.hostname,t=n.hostname;return t.length>0&&t!=i}n.trackOnPageEvent=function(n){var t="ev="+encodeURIComponent(n);ntptEventTag(t)};n.trackSelfServePageEvents=function(){var r=t(document);r.on("click",".widget-SelfServeContent a",function(){var r=t(this).get(0);i(r)&&n.trackOnPageEvent("self-serve-external-link-"+t(this).attr("href"))})};n.trackArticlePageEvents=function(){var r=t(document);r.on("click","a.article-pdfLink",function(){n.trackOnPageEvent("article-pdf")});r.on("click","li.article-content-filter",function(){n.trackOnPageEvent("article-view-"+t(this).attr("data-content-filter"))});r.on("click","#Toolbar .toolboxGetAlertsWidget",function(){n.trackOnPageEvent("article-alerts")});r.on("click","#Sidebar .widget-alerts .getAlertsLink",function(){n.trackOnPageEvent("article-email-alerts-"+t(this).text())});r.on("click","ul.addthis_toolbox > li > a",function(){n.trackOnPageEvent("article-share-"+t(this).attr("title"))});r.on("click","ul#ToolsDrop > li > div.widget",function(){var i=null;t(this).hasClass("widget-ToolboxGetCitation")?i="article-tools-GetCitation":t(this).hasClass("widget-ToolboxPermissions")&&(i="article-tools-GetPermission");n.trackOnPageEvent(i)});r.on("click","#getCitation.reveal-modal ul > li > a",function(){n.trackOnPageEvent("article-tools-GetCitation-"+t(this).text())});r.on("click",".info-card-author .info-card-search a",function(){n.trackOnPageEvent("article-author-search-"+t(this).text())});r.on("click",".widget-ArticleJumpLinks .section-jump-link .scrollTo",function(){n.trackOnPageEvent("article-section-link-"+t(this).text())});r.on("click",".fig-section .fig-link, .fig-section .fig-view-orig",function(){n.trackOnPageEvent("article-figure-view-"+t(this).closest(".fig-section").attr("data-id"))});r.on("click",".fig-section .download-slide",function(){n.trackOnPageEvent("article-figure-download-"+t(this).closest(".fig-section").attr("data-id"))});r.on("click",".downloadImagesppt",function(){n.trackOnPageEvent("article-figure-download-all")});r.on("click",".widget-ArticleDataSupplements .dataSuppLink",function(){n.trackOnPageEvent("article-data-supplement-"+t(this).href)});r.on("click",".widget-ArticleTopInfo .citation-doi a, .widget-ArticleFulltext a, .widget-RelatedPubMed a",function(){var r=t(this).get(0);i(r)&&(t(this).parents(".citation-links").length?n.trackOnPageEvent("article-external-link-"+t(this).text()):n.trackOnPageEvent("article-external-link-"+t(this).attr("href")))});r.on("click",".ww-citation-history-wrap",function(){n.trackOnPageEvent("article-history")});r.on("click","#Sidebar .widget-ArticleLevelMetrics .artmet-modal-trigger",function(){n.trackOnPageEvent("article-metrics")});r.on("click","#Sidebar .widget-ArticleCitedBy .article-cited-link-wrap a",function(){n.trackOnPageEvent("article-citation-"+t(this).text())})}}(SCM.ScholarlyiQ=SCM.ScholarlyiQ||{},jQuery);SCM=SCM||{};SCM.Utilities=SCM.Utilities||{};SCM.AddReturnUrlToSocietyLinks=function(){var n=encodeURIComponent(window.location.href);$(".society-links-logo, .society-links-url").each(function(){typeof placeholderReturnUrlValue!="undefined"&&placeholderReturnUrlValue.length>0&&$(this).attr("href",$(this).attr("href").replace(placeholderReturnUrlValue,n))})}