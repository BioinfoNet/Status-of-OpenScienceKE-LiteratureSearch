/*!
 * enquire.js v2.1.2 - Awesome Media Queries in JavaScript
 * Copyright (c) 2014 Nick Williams - http://wicky.nillia.ms/enquire.js
 * License: MIT (http://www.opensource.org/licenses/mit-license.php)
 */

!function(a,b,c){var d=window.matchMedia;"undefined"!=typeof module&&module.exports?module.exports=c(d):"function"==typeof define&&define.amd?define(function(){return b[a]=c(d)}):b[a]=c(d)}("enquire",this,function(a){"use strict";function b(a,b){var c,d=0,e=a.length;for(d;e>d&&(c=b(a[d],d),c!==!1);d++);}function c(a){return"[object Array]"===Object.prototype.toString.apply(a)}function d(a){return"function"==typeof a}function e(a){this.options=a,!a.deferSetup&&this.setup()}function f(b,c){this.query=b,this.isUnconditional=c,this.handlers=[],this.mql=a(b);var d=this;this.listener=function(a){d.mql=a,d.assess()},this.mql.addListener(this.listener)}function g(){if(!a)throw new Error("matchMedia not present, legacy browsers require a polyfill");this.queries={},this.browserIsIncapable=!a("only all").matches}return e.prototype={setup:function(){this.options.setup&&this.options.setup(),this.initialised=!0},on:function(){!this.initialised&&this.setup(),this.options.match&&this.options.match()},off:function(){this.options.unmatch&&this.options.unmatch()},destroy:function(){this.options.destroy?this.options.destroy():this.off()},equals:function(a){return this.options===a||this.options.match===a}},f.prototype={addHandler:function(a){var b=new e(a);this.handlers.push(b),this.matches()&&b.on()},removeHandler:function(a){var c=this.handlers;b(c,function(b,d){return b.equals(a)?(b.destroy(),!c.splice(d,1)):void 0})},matches:function(){return this.mql.matches||this.isUnconditional},clear:function(){b(this.handlers,function(a){a.destroy()}),this.mql.removeListener(this.listener),this.handlers.length=0},assess:function(){var a=this.matches()?"on":"off";b(this.handlers,function(b){b[a]()})}},g.prototype={register:function(a,e,g){var h=this.queries,i=g&&this.browserIsIncapable;return h[a]||(h[a]=new f(a,i)),d(e)&&(e={match:e}),c(e)||(e=[e]),b(e,function(b){d(b)&&(b={match:b}),h[a].addHandler(b)}),this},unregister:function(a,b){var c=this.queries[a];return c&&(b?c.removeHandler(b):(c.clear(),delete this.queries[a])),this}},new g});;/**/
(function(a){Drupal.behaviors.highwire_panels_ajax_tab={attach:function(e,n){a('a.panels-ajax-tab-tab',e,n).once('hw-panels-ajax-tabs-once',function(){if(typeof(n.highwire_panel_tabs)!='undefined'){for(var e=n.highwire_panel_tabs.length-1;e>=0;e--){var t=n.highwire_panel_tabs[e].panel_name;if(a(this).data('panel-name')==t){a(this).unbind('click').attr('target','_blank')}}}});a('a.highwire-article-nav-jumplink',e,n).once('hw-panels-ajax-tabs-once',function(){if(typeof(n.highwire_panel_tabs)!='undefined'){var e=n.highwire_panel_tabs.panel_ajax_tab;if(a(this).data('panel-ajax-tab')==e){a(this).unbind('click').attr('target','_blank')}}})}}})(jQuery);(function(e){Drupal.behaviors.highwire_openurl={attach:function(r,n){if(e('.cit-ref-sprinkles-open-url').length>0){var i='';if('apath' in Drupal.settings.highwire){i='?apath='+encodeURIComponent(Drupal.settings.highwire.apath)};e.getJSON(Drupal.settings.basePath+'highwire/openurl_branding'+i,function(r){if(r){Drupal.settings.highwireOpenurl=r;if(r.base_url===null){e('.cit-ref-sprinkles-open-url').hide()}
else{e('.cit-ref-sprinkles-open-url').each(function(){var r=e(this);r.once('insertImage',function(){var i=Drupal.settings.highwireOpenurl,e=r.attr('href'),n='',t='';if(e.indexOf('{openurl}')!=-1){n='{openurl}';e=decodeURIComponent(e);try{e=decodeURIComponent(e)}catch(l){}}
else if(e.indexOf('urn:openurl:')!=-1){n='urn:openurl:';t='?'};e=e.replace('?query=','?');e=e.replace(n,Drupal.settings.basePath+'highwire/openurl'+t);var a=e+'&redirect_url='+i.base_url;r.attr('href',a.replace(/\+/g,' '));r.text(i.link_text);if(i.image){r.prepend('<img src="'+i.image+'"/>')}})})}}})}}}})(jQuery);(function(i){Drupal.behaviors.highwire_google_scholar={attach:function(t,e){if(i('.cit-extra').length>0){i('.cit-list .ref-cit').once('google_scholar_link',function(){i(this).each(function(){var n='',s=0;i(this).find('.cit-auth').each(function(){var e=i(this).find('.cit-name-given-names')!=='undefined'?i(this).find('.cit-name-given-names').html():'',t=i(this).find('.cit-name-surname')!=='undefined'?i(this).find('.cit-name-surname').html():'';if(e||t){n+='&author['+s+']='+(e?e:'')+(t?'+'+t:'')}
else if(i(this).hasClass('cit-collab')){n+='&author['+s+']='+i(this).text()};s++});var r=i(this).find('.cit-article-title').length>0?i(this).find('.cit-article-title').text():!1,a=i(this).find('.cit-pub-date').length>0?i(this).find('.cit-pub-date').html():!1,l='';if(r!==!1&&a!==!1&&n!==''){var h={gsAuthor:n,gsTitle:r.replace(/< *img[^>]*src *= *["']?([^"']*)"\/>/gi,'').replace(/\ /g,'+'),publicationYear:a};extraFields={journal:i(this).find('.cit-jnl-abbrev').length>0?i(this).find('.cit-jnl-abbrev').html():!1,volume:i(this).find('.cit-vol').length>0?i(this).find('.cit-vol').html():!1,issn:i(this).find('.cit-issn').length>0?i(this).find('.cit-issn').html():!1,isbn:i(this).find('.cit-isbn').length>0?i(this).find('.cit-isbn').html():!1,doi:i(this).find('.cit-doi').length>0?i(this).find('.cit-doi').html():!1,pages:(i(this).find('.cit-fpage').length>0&&i(this).find('.cit-lpage').length>0)?i(this).find('.cit-fpage').html()+'-'+i(this).find('.cit-lpage').html():!1};extraFieldString='';i.each(extraFields,function(t,i){if(i!==!1){extraFieldString+='&'+t+'='+i.replace(/\ /g,'+')}});l=n+'&title='+h.gsTitle+'&publication_year='+h.publicationYear+extraFieldString}
else{var e=i(this).find('cite').clone().remove().end().text();if(e.length){e=e.replace(/< *img[^>]*src *= *["']?([^"']*)"\/>/i,'');var o=e.split(' '),c=[];i.each(o,function(t,i){if(i!==''){c.push(encodeURIComponent(i))}});e=c.join('+');l='&q_txt='+e}};var f='<a href="/lookup/google-scholar?link_type=googlescholar&gs_type=article'+l+'" target="_blank" class="cit-ref-sprinkles cit-ref-sprinkles-google-scholar cit-ref-sprinkles-google-scholar"><span>Google Scholar</span></a>';i(this,t).once('custom-js',function(){i(this).find('.cit-extra').append(f)})})})}}}})(jQuery);