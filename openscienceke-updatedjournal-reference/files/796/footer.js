var SCM=SCM||{};!function(e,t){var a;t.bbq={},t.bbq.getState=a=function(e){var t=window.location.hash,a=t.indexOf(e);if(!(a<0)){a=a+e.length+1;var i=t.indexOf("&",a);return i<0?decodeURI(t.substring(a)):decodeURI(t.substring(a,i))}},t.bbq.removeState=function(e){var t=a(e);t&&location.replace(window.location.hash.replace(e+"="+encodeURI(t),""))},t.deparam={},t.deparam.querystring=function(){for(var e=window.location.search.substring(1).split("&"),t={},a=0;a<e.length;a++){var i=e[a].split("=");2===i.length&&(t[i[0]]=decodeURIComponent(i[1]))}return t}}(0,jQuery);var SCM=SCM||{};SCM.Utilities=SCM.Utilities||{},function(e,t){e.init=function(){if(0!==t(".brightcove-wrapper video.video-js").length){var e="//players.brightcove.net/1611106596001/BkMnETZOZ_default/index.min.js";t.getScript(e,function(){})}if(0!==t(".brightcove-wrapper-audio video.video-js").length){e="//players.brightcove.net/1611106596001/ryQZHF29_default/index.min.js";t.getScript(e,function(){})}}}(SCM.Utilities.Brightcove=SCM.Utilities.Brightcove||{},jQuery);var SCM=SCM||{};!function(t,a){function i(e){var t=location.hostname,a=e.hostname;return 0<a.length&&a!=t}t.trackOnPageEvent=function(e){var t="ev="+encodeURIComponent(e);ntptEventTag(t)},t.trackSelfServePageEvents=function(){a(document).on("click",".widget-SelfServeContent a",function(){i(a(this).get(0))&&t.trackOnPageEvent("self-serve-external-link-"+a(this).attr("href"))})},t.trackArticlePageEvents=function(){var e=a(document);e.on("click","a.article-pdfLink",function(){t.trackOnPageEvent("article-pdf")}),e.on("click","a.split-view",function(){t.trackOnPageEvent("article-view-split-view")}),e.on("click","a.standard-view",function(){t.trackOnPageEvent("article-view-standard-view")}),e.on("click","li.article-content-filter",function(){t.trackOnPageEvent("article-view-"+a(this).attr("data-content-filter"))}),e.on("click","#Toolbar .toolboxGetAlertsWidget",function(){t.trackOnPageEvent("article-alerts")}),e.on("click","#Sidebar .widget-alerts .getAlertsLink",function(){t.trackOnPageEvent("article-email-alerts-"+a(this).text())}),e.on("click","ul.addthis_toolbox > li > a",function(){t.trackOnPageEvent("article-share-"+a(this).attr("title"))}),e.on("click","ul#ToolsDrop > li > div.widget",function(){var e=null;a(this).hasClass("widget-ToolboxGetCitation")?e="article-tools-GetCitation":a(this).hasClass("widget-ToolboxPermissions")&&(e="article-tools-GetPermission"),t.trackOnPageEvent(e)}),e.on("click","#getCitation.reveal-modal ul > li > a",function(){t.trackOnPageEvent("article-tools-GetCitation-"+a(this).text())}),e.on("click",".info-card-author .info-card-search a",function(){t.trackOnPageEvent("article-author-search-"+a(this).text())}),e.on("click",".widget-ArticleJumpLinks .section-jump-link .scrollTo",function(){t.trackOnPageEvent("article-section-link-"+a(this).text())}),e.on("click",".fig-section .fig-link, .fig-section .fig-view-orig",function(){t.trackOnPageEvent("article-figure-view-"+a(this).closest(".fig-section").attr("data-id"))}),e.on("click",".fig-section .download-slide",function(){t.trackOnPageEvent("article-figure-download-"+a(this).closest(".fig-section").attr("data-id"))}),e.on("click",".downloadImagesppt",function(){t.trackOnPageEvent("article-figure-download-all")}),e.on("click",".widget-ArticleDataSupplements .dataSuppLink",function(){t.trackOnPageEvent("article-data-supplement-"+a(this).href)}),e.on("click",".widget-ArticleTopInfo .citation-doi a, .widget-ArticleFulltext a, .widget-RelatedPubMed a",function(){i(a(this).get(0))&&(a(this).parents(".citation-links").length?t.trackOnPageEvent("article-external-link-"+a(this).text()):t.trackOnPageEvent("article-external-link-"+a(this).attr("href")))}),e.on("click",".ww-citation-history-wrap",function(){t.trackOnPageEvent("article-history")}),e.on("click","#Sidebar .widget-ArticleLevelMetrics .artmet-modal-trigger",function(){t.trackOnPageEvent("article-metrics")}),e.on("click","#Sidebar .widget-ArticleCitedBy .article-cited-link-wrap a",function(){t.trackOnPageEvent("article-citation-"+a(this).text())})},a(function(){a(".pg_article").length&&t.trackArticlePageEvents()})}(SCM.ScholarlyiQ=SCM.ScholarlyiQ||{},jQuery);var SCM=SCM||{};!function(e,C){var v=new function(){this.StandardView=0,this.SplitView=1};function y(r,o){var l=60,c=C(window);this.getCurrentElement=function(e){var t=e===v.StandardView?r:o,a=function(e){var t,a=c.scrollTop()+l,i=0,n=e.length-1,r=C(e[0]),o=r.offset().top;if(!(a<o)){for(;i<=n;){var s=Math.floor((i+n)/2);if(t=(o=(r=C(e[s])).offset().top)+r.height(),i===n||o<=a&&a<=t)return{elem:r[0],idx:s};if(a<o)n=s-1;else{if(!(t<a))return{elem:r[0],idx:s};i=s+1}}return{elem:e[Math.min(n,e.length-1)],idx:Math.min(n,e.length-1)}}}(t);if(a){var i=a.elem,n=a.idx;if(i&&!d(i,"backreferences-title")&&!d(i,"ref-list")){for(;d(i,"fig-section")||d(i,"table-wrap");)i=t[Math.max(--n,0)];if(!d(i,"backreferences-title")&&!d(i,"ref-list"))return i}}}}function t(){var a={};this.getWidget=function(e){if(a[e])return a[e];var t=document.getElementsByClassName(e)[0];return t?a[e]=t:void 0}}var b=new function(){var u=new t,h={};function p(e){for(var t=e.getElementsByTagName("*"),a=0;a<t.length;a++){var i=t[a];i.id&&(i.id=i.id+"-sv")}}this.create=function(e){var t=document.createDocumentFragment();return t.appendChild(function e(t,a){var i=h[t],n=i.dependencies,r=[];if(n)for(var o=0;o<n.length;o++){var s,l=n[o];if(h[l])s=e(l,a),r.push(s);else if(s=u.getWidget("widget-instance-"+l)||u.getWidget("widget-"+l)){var c=s.cloneNode(!0);p(c),r.push(c)}else r.push(document.createDocumentFragment())}var d=i.render.apply(a,r);return a[t]=d}(e,{})),t},this.register=function(e){h[e.name]=e}};function k(e,t,a){var i=document.createElement(e);if(Array.isArray(t))a=t;else if(t)for(var n in t)n.startsWith("on")?i.addEventListener(n.substring(2),t[n]):i.setAttribute(n,t[n]);if(a)for(var r=0;r<a.length;r++){var o=a[r];o&&(o.nodeType?i.appendChild(o):i.appendChild(document.createTextNode(o.toString())))}return i}function x(e,t){var a=e.getElementsByClassName(t);if(0<a.length)return a[0]}function _(e,t){var a=e.getElementsByClassName(t);return 0<a.length?Array.prototype.slice.call(a,0):[]}function M(e,t){if(!t)return[];for(var a=[],i=0;i<t.length;i++)a=a.concat(_(e,t[i]));return a}function A(e){for(var t=0;t<e.length;t++)e[t].parentNode.removeChild(e[t])}function d(e,t){return-1<(" "+e.className+" ").indexOf(" "+t+" ")}function T(e,t){d(e,t)&&(e.className=(" "+e.className+" ").replace(" "+t+" "," ").trim())}function D(e,t){d(e,t)||(e.className=e.className+" "+t)}function $(e,t){if(e===t)return 0;if(void 0===e)return-1;if(void 0===t)return 1;var a=e.compareDocumentPosition(t);return a&Node.DOCUMENT_POSITION_FOLLOWING||a&Node.DOCUMENT_POSITION_CONTAINED_BY?-1:a&Node.DOCUMENT_POSITION_PRECEDING||a&Node.DOCUMENT_POSITION_CONTAINS?1:0}e.WidgetStore=b,SCM.SplitScreen.init=function(){var t=function(){for(var e,t=_(document,"article-content-filter"),a=0;a<t.length;a++)"article-content"===t[a].dataset.contentFilter&&(e=t[a]);return function(){e&&e.click()}}();!function(){var h,p,f=!1;function g(){SCM.SplitScreen.toggleSplitView()}var m=k("div",{class:"math-jax-modal"},[k("p",{class:"bold"},["Mathematical content on this page is still rendering"]),k("div",{class:"spinner"}),k("p",{},["Once the process is complete you will be taken to Split View"]),k("button",{onclick:function(e){C("#math-jax-modal").foundation("reveal","close")},class:"btn"},["Cancel"])]),e=k("div",{"data-reveal":"math-jax-load",id:"math-jax-modal",class:"reveal-modal"});e.style.display="none",document.body.appendChild(e),SCM.SplitScreen.toggleSplitView=function(e){if(!1===e){if(!h)return;f=!0}else!0===e&&(f=!1);if((0<C(".MathJax_Preview").length||0<C(".display-math").length)&&!SCM.SplitScreen.IsMathJaxLoaded){var t=C("#math-jax-modal");return C(document).on("closed.fndtn.reveal","[data-reveal]",function(){window.removeEventListener("MathJax.complete",g)}),t.empty().prepend(m),t.foundation("reveal","open"),void window.addEventListener("MathJax.complete",g)}if(C("#math-jax-modal").foundation("reveal","close"),SCM.SiteJS.isFinishedAdjustRelatedTagsDisplay()){if(!h){var a="p,section.abstract,blockquote,div.block-child-p",i="h2,h3,h4,div.table-wrap,div.fig-section,div.ref-list",n=C(".widget-ArticleFulltext .widget-items");n.children(a).each(function(e,t){t.id=t.id||"scroll-to-"+e});var r=n.children(a+","+i);document.body.appendChild(b.create("SplitView"));var o=C("#sv_main .widget-ArticleFulltext .widget-items").children(a+","+i);p=new y(r,o),h=document.body.lastChild,window.addthis&&window.addthis.toolbox(".addthis_toolbox"),SCM.SiteJS.articleUserComments(!0),SCM.Utilities.Brightcove.init()}var s=x(document,"master-container"),l=x(document,"widget-SitePageFooter"),c=x(document,"oup-footer"),d=p.getCurrentElement(f?v.SplitView:v.StandardView);if(console.log(d),f)if(document.body.className=document.body.className.replace(" pg_articlesplitview",""),s.style.display="",l.style.display="",c.style.display="",h.style.display="none",d){var u=0;"P"===d.nodeName?u=95:"H2"!==d.nodeName&&"H3"!==d.nodeName&&"H4"!==d.nodeName||(u=15),C(window).scrollTop(C("#"+d.id.slice(0,-3)).offset().top-u)}else C(window).scrollTop(0);else s.style.display="none",l.style.display="none",c.style.display="none",document.body.className.indexOf("pg_articlesplitview")<0&&(document.body.className+=" pg_articlesplitview"),h.style.display="",d?C("#split-view-scroll-pane").scrollTop(document.getElementById(d.id+"-sv").offsetTop):C("#split-view-scroll-pane").scrollTop(0);f=!f}else window.addEventListener("adjustRelatedTagsDisplay.complete",g)},SCM.SplitScreen.isSplitView=function(){return f}}();var e=x(document,"split-view");if(e){var a=function(e){e.matches?(SCM.SplitScreen.toggleSplitView(!1),i&&(i.style.display="")):i&&(i.style.display="none",t())},i=x(document,"item-views"),n=window.matchMedia("(max-width: 930px)");n.addListener(a),a(n),e.addEventListener("click",function(){SCM.SplitScreen.toggleSplitView()})}MathJax.Hub.Register.StartupHook("End",function(){SCM.SplitScreen.IsMathJaxLoaded=!0,window.dispatchEvent(new CustomEvent("MathJax.complete"))})},SCM.SplitScreen.WidgetStore.register({name:"ContentsTab",dependencies:["ArticleJumpLinks","ArticleFulltext"],render:function(e,t){var n=this;A(_(e,"contents-title"));var a=document.createDocumentFragment();a.appendChild(t);for(var i=e.getElementsByClassName("js-jumplink"),r=0;r<i.length;r++){var o=i[r],s=o.attributes.href.textContent.substring(1),l=a.querySelector("[id='"+s+"-sv']");l&&(o.dataset.sectionType=l.className)}return k("div",{class:"dynamic-widget-inner-wrap",style:"display: block;",onclick:function(e){var t=e.target;if(d(t,"js-jumplink")){var a=t.attributes.href.textContent.substring(1);if(t.textContent,"backreferences-title"===t.dataset.sectionType)return void n.ReferencesTab.switchTo();var i=document.getElementById(a+"-sv");i&&(n.Content.scrollTop=i.offsetTop)}}},[e])}}),SCM.SplitScreen.WidgetStore.register({name:"FiguresAndTablesTab",dependencies:["ArticleFulltext"],render:function(e){var t=x(e,"graphicalAbstract"),a=_(e,"fig-section");if(t){var i=x(t,"fig-section");if(i)for(var n=i.dataset.id,r=0;r<a.length;r++)if(a[r].dataset.id===n){a[r]=t;break}}var o=_(e,"table-wrap"),s=[];for(r=0;r<o.length;r++){var l=o[r].firstChild.id;s.indexOf(l)<0?s.push(l):(o.splice(r,1),r--)}var c=a.concat(o).sort($);if(0<c.length){var d=c;if(0<a.length){var u=document.getElementById("BodyContent_PageContent_lnkDownloadAllImages");u&&((u=u.cloneNode(!0)).id="BodyContent_PageContent_lnkDownloadAllImages-sv",u.textContent="Download all slides",D(u,"btn")),d=[k("div",{class:"download-all-ppt"},[u])].concat(c)}return k("div",{class:"dynamic-widget-inner-wrap"},d)}return k("div",{class:"dynamic-widget-inner-wrap"})}}),SCM.SplitScreen.WidgetStore.register({name:"ReferencesTab",dependencies:["ArticleFulltext"],render:function(e){return k("div",{class:"dynamic-widget-inner-wrap"},e.getElementsByClassName("ref-list"))}}),SCM.SplitScreen.WidgetStore.register({name:"NotesTab",dependencies:["ArticleFulltext"],render:function(e){return k("div",{class:"dynamic-widget-inner-wrap"})}}),SCM.SplitScreen.WidgetStore.register({name:"CommentsTab",dependencies:["UserCommentBody"],render:function(e){return k("div",{class:"dynamic-widget-inner-wrap"},[e])}}),SCM.SplitScreen.WidgetStore.register({name:"Tabs",dependencies:["ContentsTab","FiguresAndTablesTab","ReferencesTab","NotesTab","CommentsTab"],render:function(e,t,a,i,n){function r(e,t){for(var a=0;a<c.length;a++)T(c[a],"active");D(e,"active");for(var i=0;i<d.length;i++)d[i].style.display="none";t.style.display="block"}function o(e){var t=e.target.parentNode;r(t,d[t.dataset.tab])}var s=0;function l(e,t,a){return k("a",{class:"tab-nav-trigger tab-nav-"+t+"Css"+(a?" active":""),"data-tab":s++},[k("i",{class:"icon-"+t+"Css"},[k("span",{class:"sr-t"})]),k("div",{class:"tab-nav-tab-name",onclick:o},[e])])}for(var c=[l("Contents","Content",!0),l("Figures & Tables","FiguresTables"),l("References","References"),l("Notes","Notes"),l("Comments","Comments")],d=[e,t,a,i,n],u=0;u<d.length;u++)""===d[u].textContent.trim()?(c[u].style.display="none",d[u].switchTo=function(){}):d[u].switchTo=function(){r(this.tab,this.panel)}.bind({panel:d[u],tab:c[u]});return k("div",{class:"resources-panel"},[k("div",{class:"location-right-pane"},[k("div",{class:"dynamic-widget-module"},[k("div",{class:"tab-nav",style:"visibility: visible;"},c),k("div",{class:"resource-tabs"},d)])])])}}),SCM.SplitScreen.WidgetStore.register({name:"Content",dependencies:["ArticleFulltext","ArticleTopInfo","ArticleLinks","Toolbar","ArticleDataSupplements"],render:function(o,a,e,t,i){var s=this,n=C(".content-panel").width()/2,r=x(o,"graphicalAbstract");null!=r&&A([r]),A(M(o,["backreferences-title","fig-section","table-wrap","ref-list"]));var l=C(o);l.on("click",".xref-fig",function(e){e.stopPropagation();for(var t=this.dataset.open,a=M(s.FiguresAndTablesTab,["fig-section","table-wrap-title"]),i=s.FiguresAndTablesTab,n=0;n<a.length;n++)if(a[n].dataset.id===t)return s.FiguresAndTablesTab.switchTo(),void(i.scrollTop=a[n].offsetTop)}),l.on("click",".xref-sec",function(e){e.stopPropagation();for(var t=this.attributes.href.textContent.substring(1),a=o.querySelectorAll(".disp-formula, .statement"),i=0;i<a.length;i++)if(a[i].attributes["content-id"].textContent===t){var n=a[i].attributes.class.textContent;if("disp-formula"===n)return void(s.Content.scrollTop=a[i].parentNode.offsetTop);if("statement"===n)return void(s.Content.scrollTop=a[i].offsetTop)}var r=o.querySelectorAll(".section-title[data-legacy-id]");for(i=0;i<r.length;i++)if(r[i].attributes["data-legacy-id"].textContent===t)return void(s.Content.scrollTop=r[i].offsetTop)}),l.on("click",".js-jumplink",function(e){e.stopPropagation();for(var t=this.attributes.href.textContent.substring(1),a=o.querySelectorAll(".appendix-title[data-legacy-id]"),i=0;i<a.length;i++)if(a[i].attributes["data-legacy-id"].textContent===t)return void(s.Content.scrollTop=a[i].offsetTop)}),l.on("click",".xref-bibr",function(e){if(e.stopPropagation(),this.dataset.open)for(var t=this.dataset.open.split(" ")[0],a=(x(s.ReferencesTab,"ref-list")||{children:[]}).children,i=0;i<a.length;i++)if(a[i].attributes["content-id"].textContent===t)return s.ReferencesTab.switchTo(),void(s.ReferencesTab.scrollTop=a[i].offsetTop)}),l.on("click",".kwd-part",function(e){e.stopPropagation(),function(e){if(e){e.startsWith('"')||(e='"'+e),e.endsWith('"')||(e+='"');var t='search-results?page=1&qb={"Keywords1":'+encodeURIComponent(e)+"}&SearchSourceType=1",a=document.getElementById("hfSiteURL");a&&(t="//"+a.value+"/"+t,window.location.href=t)}}(e.target.dataset.keyword)});for(var c=M(a,["ww-citation-history-wrap","ww-history-close"]),d=0;d<c.length;d++)c[d].addEventListener("click",function(e){C(".ww-history").last().slideToggle()});var u=a.getElementsByClassName("al-author-info-wrap");function h(){for(var e=0;e<u.length;e++)u[e].style.display=""}for(var p=M(a,["linked-name","js-linked-footnotes"]),f=0;f<p.length;f++)p[f].addEventListener("click",function(e){e.stopPropagation?e.stopPropagation():window.event.cancelBubble=!0,h();var t=e.target.previousElementSibling;t.style.display="block",C(this).parent(".al-author-name").position().left>n+320&&t.classList.add("shift-card")});var g=x(a,"meta-authors--etal");g&&g.addEventListener("click",function(e){e.target.attributes["aria-hidden"]="true",e.target.style.display="none";var t=x(a,"meta-authors--remaining");t&&(t.attributes["aria-hidden"]="false",t.style.display="inline")});var m=o.getElementsByClassName("video-js");for(d=0;d<m.length;d++){var v=m[d],y=k("video",{"data-account":v.dataset.account,"data-player":v.dataset.player,"data-embed":v.dataset.embed,class:"brightcove-player video-js",controls:"","data-video-id":v.dataset.videoId});v.parentNode.replaceChild(y,v)}var b,w,S=[a,e,o];return i&&S.push(i),k("div",{class:"content-panel",onscroll:debounce(function(e){var t=s.Content.scrollTop;for(var a in w=w||function(){for(var e={},t=_(s.ContentsTab,"js-jumplink"),a=0;a<t.length;a++){var i=t[a].href;i.indexOf("#")<0||(e[i.split("#").slice(-1)+"-sv"]=t[a])}return e}(),b=b||function(){for(var e=Array.prototype.concat(Array.prototype.slice.call(s.Content.getElementsByTagName("h2"),0),Array.prototype.slice.call(s.Content.getElementsByTagName("h3"),0)).sort($),t=0;t<e.length;t++)w[e[t].id]||(e.splice(t,1),t--);return e}(),w)T(w[a],"active");for(var i=b.length-1;0<=i;i--)if(b[i].offsetTop<=t)return void D(w[b[i].id]||w[b[0]],"active")},16),id:"split-view-scroll-pane"},[k("div",{class:"location-left-panel"},[k("div",{class:"content-inner-wrap"},[k("div",{class:"article-body"},[k("div",{class:"content active"},S)])])])])}}),SCM.SplitScreen.WidgetStore.register({name:"SwitchView",render:function(){return k("li",{class:"toolbar-item item-link"},[k("a",{class:"standard-view",onclick:SCM.SplitScreen.toggleSplitView},[k("i",{class:"icon-menu_standard"}),"Standard view"])])}}),SCM.SplitScreen.WidgetStore.register({name:"PdfLink",render:function(){var e=x(document,"item-pdf");if(e)return e.cloneNode(!0)}}),SCM.SplitScreen.WidgetStore.register({name:"ShareThis",render:function(){var e=x(document,"item-share");if(e){var t=x(e=e.cloneNode(!0),"drop-trigger");return t&&t.addEventListener("click",function(e){e.preventDefault(),C(this).siblings("ul").slideToggle()}),e}}}),SCM.SplitScreen.WidgetStore.register({name:"ToolbarCitation",dependencies:["ToolboxGetCitation"],render:function(e){return k("li",{class:"toolbar-item"},[e])}}),SCM.SplitScreen.WidgetStore.register({name:"ToolbarPermissions",dependencies:["ToolboxPermissions"],render:function(e){return k("li",{class:"toolbar-item"},[e])}}),SCM.SplitScreen.WidgetStore.register({name:"Toolbar",dependencies:["ToolbarCitation","ToolbarPermissions","PdfLink","ShareThis","SwitchView"],render:function(e,t,a,i,n){return k("div",{class:"toolbar-wrap"},[k("div",{class:"toolbar-inner-wrap"},[k("ul",{id:"Toolbar",role:"navigation"},[n,a,e,t,i])])])}}),SCM.SplitScreen.WidgetStore.register({name:"SplitView",dependencies:["Content","Tabs","Toolbar"],render:function(e,t,a){return k("div",{class:"master-container"},[k("main",{id:"sv_main"},[k("section",{class:"master-main row"},[k("div",{class:"center-inner-row no-overflow"},[k("div",{class:"widget widget-SplitView widget-instance-SplitView_Article"},[k("div",{class:"pseudo-splitview-header"},[k("div",{class:"pseudo-inner-wrap"},[a])]),k("div",{class:"index-inner-wrap"},[t,e])])])])])])}})}(SCM.SplitScreen=SCM.SplitScreen||{},jQuery);var debounce=function(i,n,r){var o;return function(){var e=this,t=arguments,a=r&&!o;clearTimeout(o),o=setTimeout(function(){o=null,r||i.apply(e,t)},n),a&&i.apply(e,t)}};function updateViewportDimensions(){var e=window,t=document,a=t.documentElement,i=t.getElementsByTagName("body")[0];return{width:e.innerWidth||a.clientWidth||i.clientWidth,height:e.innerHeight||a.clientHeight||i.clientHeight}}var viewport=updateViewportDimensions(),SCM=SCM||{};SCM.JSUtility=function(u,e){return{equalHeights:function(a,i){function e(){if(u(a).length&&u(window).width()>i){var t=0,e=u(a);e.attr("style",""),e.each(function(){var e=u(this).outerHeight();t<e&&(t=e)}),u(a).css("height",t)}else u(a).attr("style","")}e(),u(window).resize(function(){e()})},addStateToggle:function(e,t,a){var i=u(e),n=u(t),r="active-state",o="target-active",s=u("body"),l=t.replace(/.|#/,"")+"-active",c=n.find(".close");function d(){n.removeClass(r),i.removeClass(o),a&&s.removeClass(l)}a=a||!1,i.click(function(e){e.preventDefault(),n.toggleClass(r),i.toggleClass(o),a&&s.toggleClass(l)}),s.click(function(e){u(e.target).closest(i.add(n)).length||d()}),c.click(function(){d()})},toggleVisibility:function(e,t,a){var i=u(e),n="target-active";t=t||!1,a=a||640;var r=function(){var e=u(this),t=u("."+e.attr("data-toggle-target"));e.toggleClass(n),t.slideToggle().toggleClass("active")},o=debounce(function(){t?(viewport=updateViewportDimensions()).width>a?(i.off("click.toggle-visibility"),i.removeClass(n),i.each(function(){u("."+u(this).attr("data-toggle-target")).removeAttr("style").removeClass("active")})):(i.off("click.toggle-visibility"),i.on("click.toggle-visibility",r)):i.on("click.toggle-visibility",r)},150,!0);o(),t&&u(window).resize(function(){o()})}}}(jQuery),function(){if("function"==typeof window.CustomEvent)return;function e(e,t){t=t||{bubbles:!1,cancelable:!1,detail:void 0};var a=document.createEvent("CustomEvent");return a.initCustomEvent(e,t.bubbles,t.cancelable,t.detail),a}e.prototype=window.Event.prototype,window.CustomEvent=e}(),function(u,l,n,r){"use strict";var e,t;e=["foundation-mq-small","foundation-mq-small-only","foundation-mq-medium","foundation-mq-medium-only","foundation-mq-large","foundation-mq-large-only","foundation-mq-xlarge","foundation-mq-xlarge-only","foundation-mq-xxlarge","foundation-data-attribute-namespace"],(t=u("head")).prepend(u.map(e,function(e){if(0===t.has("."+e).length)return'<meta class="'+e+'" />'})),u(function(){"undefined"!=typeof FastClick&&void 0!==n.body&&FastClick.attach(n.body)});var c=function(e,t){if("string"!=typeof e)return u(e,t);if(t){var a;if(t.jquery){if(!(a=t[0]))return t}else a=t;return u(a.querySelectorAll(e))}return u(n.querySelectorAll(e))},a=function(e){var t=[];return e||t.push("data"),0<this.namespace.length&&t.push(this.namespace),t.push(this.name),t.join("-")},i=function(e){for(var t=e.split("-"),a=t.length,i=[];a--;)0!==a?i.push(t[a]):0<this.namespace.length?i.push(this.namespace,t[a]):i.push(t[a]);return i.reverse().join("-")},o=function(a,i){var n=this,e=function(){var e=c(this),t=!e.data(n.attr_name(!0)+"-init");e.data(n.attr_name(!0)+"-init",u.extend({},n.settings,i||a,n.data_options(e))),t&&n.events(this)};if(c(this.scope).is("["+this.attr_name()+"]")?e.call(this.scope):c("["+this.attr_name()+"]",this.scope).each(e),"string"==typeof a)return this[a].call(this,i)};function s(e){this.selector=e,this.query=""}l.matchMedia||(l.matchMedia=function(){var t=l.styleMedia||l.media;if(!t){var a,i=n.createElement("style"),e=n.getElementsByTagName("script")[0];i.type="text/css",i.id="matchmediajs-test",e.parentNode.insertBefore(i,e),a="getComputedStyle"in l&&l.getComputedStyle(i,null)||i.currentStyle,t={matchMedium:function(e){var t="@media "+e+"{ #matchmediajs-test { width: 1px; } }";return i.styleSheet?i.styleSheet.cssText=t:i.textContent=t,"1px"===a.width}}}return function(e){return{matches:t.matchMedium(e||"all"),media:e||"all"}}}()),function(t){for(var a,n=0,e=["webkit","moz"],i=l.requestAnimationFrame,r=l.cancelAnimationFrame,o=void 0!==t.fx;n<e.length&&!i;n++)i=l[e[n]+"RequestAnimationFrame"],r=r||l[e[n]+"CancelAnimationFrame"]||l[e[n]+"CancelRequestAnimationFrame"];function s(){a&&(i(s),o&&t.fx.tick())}i?(l.requestAnimationFrame=i,l.cancelAnimationFrame=r,o&&(t.fx.timer=function(e){e()&&t.timers.push(e)&&!a&&(a=!0,s())},t.fx.stop=function(){a=!1})):(l.requestAnimationFrame=function(e){var t=(new Date).getTime(),a=Math.max(0,16-(t-n)),i=l.setTimeout(function(){e(t+a)},a);return n=t+a,i},l.cancelAnimationFrame=function(e){clearTimeout(e)})}(u),s.prototype.toString=function(){return this.query||(this.query=c(this.selector).css("font-family").replace(/^[\/\\'"]+|(;\s?})+|[\/\\'"]+$/g,""))},l.Foundation={name:"Foundation",version:"5.5.3",media_queries:{small:new s(".foundation-mq-small"),"small-only":new s(".foundation-mq-small-only"),medium:new s(".foundation-mq-medium"),"medium-only":new s(".foundation-mq-medium-only"),large:new s(".foundation-mq-large"),"large-only":new s(".foundation-mq-large-only"),xlarge:new s(".foundation-mq-xlarge"),"xlarge-only":new s(".foundation-mq-xlarge-only"),xxlarge:new s(".foundation-mq-xxlarge")},stylesheet:u("<style></style>").appendTo("head")[0].sheet,global:{namespace:r},init:function(e,t,a,i,n){var r=[e,a,i,n],o=[];if(this.rtl=/rtl/i.test(c("html").attr("dir")),this.scope=e||this.scope,this.set_namespace(),t&&"string"==typeof t&&!/reflow/i.test(t))this.libs.hasOwnProperty(t)&&o.push(this.init_lib(t,r));else for(var s in this.libs)o.push(this.init_lib(s,t));return c(l).load(function(){c(l).trigger("resize.fndtn.clearing").trigger("resize.fndtn.dropdown").trigger("resize.fndtn.equalizer").trigger("resize.fndtn.interchange").trigger("resize.fndtn.joyride").trigger("resize.fndtn.magellan").trigger("resize.fndtn.topbar").trigger("resize.fndtn.slider")}),e},init_lib:function(e,t){return this.libs.hasOwnProperty(e)?(this.patch(this.libs[e]),t&&t.hasOwnProperty(e)?(void 0!==this.libs[e].settings?u.extend(!0,this.libs[e].settings,t[e]):void 0!==this.libs[e].defaults&&u.extend(!0,this.libs[e].defaults,t[e]),this.libs[e].init.apply(this.libs[e],[this.scope,t[e]])):(t=t instanceof Array?t:new Array(t),this.libs[e].init.apply(this.libs[e],t))):function(){}},patch:function(e){e.scope=this.scope,e.namespace=this.global.namespace,e.rtl=this.rtl,e.data_options=this.utils.data_options,e.attr_name=a,e.add_namespace=i,e.bindings=o,e.S=this.utils.S},inherit:function(e,t){for(var a=t.split(" "),i=a.length;i--;)this.utils.hasOwnProperty(a[i])&&(e[a[i]]=this.utils[a[i]])},set_namespace:function(){var e=this.global.namespace===r?u(".foundation-data-attribute-namespace").css("font-family"):this.global.namespace;this.global.namespace=e===r||/false/i.test(e)?"":e},libs:{},utils:{S:c,throttle:function(a,i){var n=null;return function(){var e=this,t=arguments;null==n&&(n=setTimeout(function(){a.apply(e,t),n=null},i))}},debounce:function(i,n,r){var o,s;return function(){var e=this,t=arguments,a=r&&!o;return clearTimeout(o),o=setTimeout(function(){o=null,r||(s=i.apply(e,t))},n),a&&(s=i.apply(e,t)),s}},data_options:function(e,t){t=t||"options";var a,i,n,r,o,s,l={},c=(r=e,0<(o=Foundation.global.namespace).length?r.data(o+"-"+t):r.data(t));if("object"==typeof c)return c;function d(e){return"string"==typeof e?u.trim(e):e}for(a=(n=(c||":").split(";")).length;a--;)i=[(i=n[a].split(":"))[0],i.slice(1).join(":")],/true/i.test(i[1])&&(i[1]=!0),/false/i.test(i[1])&&(i[1]=!1),s=i[1],isNaN(s-0)||null===s||""===s||!1===s||!0===s||(-1===i[1].indexOf(".")?i[1]=parseInt(i[1],10):i[1]=parseFloat(i[1])),2===i.length&&0<i[0].length&&(l[d(i[0])]=d(i[1]));return l},register_media:function(e,t){var a;Foundation.media_queries[e]===r&&(u("head").append('<meta class="'+t+'"/>'),Foundation.media_queries[e]=(("string"==typeof(a=u("."+t).css("font-family"))||a instanceof String)&&(a=a.replace(/^['\\/"]+|(;\s?})+|['\\/"]+$/g,"")),a))},add_custom_rule:function(e,t){t===r&&Foundation.stylesheet?Foundation.stylesheet.insertRule(e,Foundation.stylesheet.cssRules.length):Foundation.media_queries[t]!==r&&Foundation.stylesheet.insertRule("@media "+Foundation.media_queries[t]+"{ "+e+" }",Foundation.stylesheet.cssRules.length)},image_loaded:function(e,t){var a=this,i=e.length;(0===i||function(e){for(var t=e.length-1;0<=t;t--)if(e.attr("height")===r)return!1;return!0}(e))&&t(e),e.each(function(){!function(e,t){function a(){t(e[0])}e.attr("src")?e[0].complete||4===e[0].readyState?a():function(){if(this.one("load",a),/MSIE (\d+\.\d+);/.test(navigator.userAgent)){var e=this.attr("src"),t=e.match(/\?/)?"&":"?";t+="random="+(new Date).getTime(),this.attr("src",e+t)}}.call(e):a()}(a.S(this),function(){0===(i-=1)&&t(e)})})},random_str:function(){return this.fidx||(this.fidx=0),this.prefix=this.prefix||[this.name||"F",(+new Date).toString(36)].join("-"),this.prefix+(this.fidx++).toString(36)},match:function(e){return l.matchMedia(e).matches},is_small_up:function(){return this.match(Foundation.media_queries.small)},is_medium_up:function(){return this.match(Foundation.media_queries.medium)},is_large_up:function(){return this.match(Foundation.media_queries.large)},is_xlarge_up:function(){return this.match(Foundation.media_queries.xlarge)},is_xxlarge_up:function(){return this.match(Foundation.media_queries.xxlarge)},is_small_only:function(){return!(this.is_medium_up()||this.is_large_up()||this.is_xlarge_up()||this.is_xxlarge_up())},is_medium_only:function(){return this.is_medium_up()&&!this.is_large_up()&&!this.is_xlarge_up()&&!this.is_xxlarge_up()},is_large_only:function(){return this.is_medium_up()&&this.is_large_up()&&!this.is_xlarge_up()&&!this.is_xxlarge_up()},is_xlarge_only:function(){return this.is_medium_up()&&this.is_large_up()&&this.is_xlarge_up()&&!this.is_xxlarge_up()},is_xxlarge_only:function(){return this.is_medium_up()&&this.is_large_up()&&this.is_xlarge_up()&&this.is_xxlarge_up()}}},u.fn.foundation=function(){var e=Array.prototype.slice.call(arguments,0);return this.each(function(){return Foundation.init.apply(Foundation,[this].concat(e)),this})}}(jQuery,window,window.document),function(l,c,t,d){"use strict";var u=[];function h(e){var t=/fade/i.test(e),a=/pop/i.test(e);return{animate:t||a,pop:a,fade:t}}Foundation.libs.reveal={name:"reveal",version:"5.5.3",locked:!1,settings:{animation:"fadeAndPop",animation_speed:250,close_on_background_click:!0,close_on_esc:!0,dismiss_modal_class:"close-reveal-modal",multiple_opened:!1,bg_class:"reveal-modal-bg",root_element:"body",open:function(){},opened:function(){},close:function(){},closed:function(){},on_ajax_error:l.noop,bg:l(".reveal-modal-bg"),css:{open:{opacity:0,visibility:"visible",display:"block"},close:{opacity:1,visibility:"hidden",display:"none"}}},init:function(e,t,a){l.extend(!0,this.settings,t,a),this.bindings(t,a)},events:function(e){var r=this,o=r.S;return o(this.scope).off(".reveal").on("click.fndtn.reveal","["+this.add_namespace("data-reveal-id")+"]:not([disabled])",function(e){if(e.preventDefault(),!r.locked){var t=o(this),a=t.data(r.data_attr("reveal-ajax")),i=t.data(r.data_attr("reveal-replace-content"));if(r.locked=!0,void 0===a)r.open.call(r,t);else{var n=!0===a?t.attr("href"):a;r.open.call(r,t,{url:n},{replaceContentSel:i})}}}),o(t).on("click.fndtn.reveal",this.close_targets(),function(e){if(e.preventDefault(),!r.locked){var t=o("["+r.attr_name()+"].open").data(r.attr_name(!0)+"-init")||r.settings,a=o(e.target)[0]===o("."+t.bg_class)[0];if(a){if(!t.close_on_background_click)return;e.stopPropagation()}r.locked=!0,r.close.call(r,a?o("["+r.attr_name()+"].open:not(.toback)"):o(this).closest("["+r.attr_name()+"]"))}}),0<o("["+r.attr_name()+"]",this.scope).length?o(this.scope).on("open.fndtn.reveal",this.settings.open).on("opened.fndtn.reveal",this.settings.opened).on("opened.fndtn.reveal",this.open_video).on("close.fndtn.reveal",this.settings.close).on("closed.fndtn.reveal",this.settings.closed).on("closed.fndtn.reveal",this.close_video):o(this.scope).on("open.fndtn.reveal","["+r.attr_name()+"]",this.settings.open).on("opened.fndtn.reveal","["+r.attr_name()+"]",this.settings.opened).on("opened.fndtn.reveal","["+r.attr_name()+"]",this.open_video).on("close.fndtn.reveal","["+r.attr_name()+"]",this.settings.close).on("closed.fndtn.reveal","["+r.attr_name()+"]",this.settings.closed).on("closed.fndtn.reveal","["+r.attr_name()+"]",this.close_video),!0},key_up_on:function(e){var i=this;return i.S("body").off("keyup.fndtn.reveal").on("keyup.fndtn.reveal",function(e){var t=i.S("["+i.attr_name()+"].open"),a=t.data(i.attr_name(!0)+"-init")||i.settings;a&&27===e.which&&a.close_on_esc&&!i.locked&&i.close.call(i,t)}),!0},key_up_off:function(e){return this.S("body").off("keyup.fndtn.reveal"),!0},open:function(e,t){var n,r=this;e?void 0!==e.selector?n=r.S("#"+e.data(r.data_attr("reveal-id"))).first():(n=r.S(this.scope),t=e):n=r.S(this.scope);var a=n.data(r.attr_name(!0)+"-init");if(a=a||this.settings,n.hasClass("open")&&e!==d&&e.attr("data-reveal-id")==n.attr("id"))return r.close(n);if(!n.hasClass("open")){var i=r.S("["+r.attr_name()+"].open");void 0===n.data("css-top")&&n.data("css-top",parseInt(n.css("top"),10)).data("offset",this.cache_offset(n)),n.attr("tabindex","0").attr("aria-hidden","false"),this.key_up_on(n),n.on("open.fndtn.reveal",function(e){e.namespace}),n.on("open.fndtn.reveal").trigger("open.fndtn.reveal"),i.length<1&&this.toggle_bg(n,!0),"string"==typeof t&&(t={url:t});var o=function(){0<i.length&&(a.multiple_opened?r.to_back(i):r.hide(i,a.css.close)),a.multiple_opened&&u.push(n),r.show(n,a.css.open)};if(void 0!==t&&t.url){var s=void 0!==t.success?t.success:null;l.extend(t,{success:function(e,t,a){if(l.isFunction(s)){var i=s(e,t,a);"string"==typeof i&&(e=i)}"undefined"!=typeof options&&void 0!==options.replaceContentSel?n.find(options.replaceContentSel).html(e):n.html(e),r.S(n).foundation("section","reflow"),r.S(n).children().foundation(),o()}}),a.on_ajax_error!==l.noop&&l.extend(t,{error:a.on_ajax_error}),l.ajax(t)}else o()}r.S(c).trigger("resize")},close:function(a){a=a&&a.length?a:this.S(this.scope);var e=this.S("["+this.attr_name()+"].open"),t=a.data(this.attr_name(!0)+"-init")||this.settings,i=this;if(0<e.length)if(a.removeAttr("tabindex","0").attr("aria-hidden","true"),this.locked=!0,this.key_up_off(a),a.trigger("close.fndtn.reveal"),(t.multiple_opened&&1===e.length||!t.multiple_opened||1<a.length)&&(i.toggle_bg(a,!1),i.to_front(a)),t.multiple_opened){var n=a.is(":not(.toback)");i.hide(a,t.css.close,t),n?u.pop():u=l.grep(u,function(e){var t=e[0]===a[0];return t&&i.to_front(a),!t}),0<u.length&&i.to_front(u[u.length-1])}else i.hide(e,t.css.close,t)},close_targets:function(){var e="."+this.settings.dismiss_modal_class;return this.settings.close_on_background_click?e+", ."+this.settings.bg_class:e},toggle_bg:function(e,t){0===this.S("."+this.settings.bg_class).length&&(this.settings.bg=l("<div />",{class:this.settings.bg_class}).appendTo("body").hide());var a=0<this.settings.bg.filter(":visible").length;t!=a&&((t==d?a:!t)?this.hide(this.settings.bg):this.show(this.settings.bg))},show:function(e,t){if(t){var a=(s=e.data(this.attr_name(!0)+"-init")||this.settings).root_element,i=this;if(0===e.parent(a).length){var n=e.wrap('<div style="display: none;" />').parent();e.on("closed.fndtn.reveal.wrapped",function(){e.detach().appendTo(n),e.unwrap().unbind("closed.fndtn.reveal.wrapped")}),e.detach().appendTo(a)}var r=h(s.animation);if(r.animate||(this.locked=!1),r.pop){t.top=l(c).scrollTop()-e.data("offset")+"px";var o={top:l(c).scrollTop()+e.data("css-top")+"px",opacity:1};return setTimeout(function(){return e.css(t).animate(o,s.animation_speed,"linear",function(){i.locked=!1,e.trigger("opened.fndtn.reveal")}).addClass("open")},s.animation_speed/2)}if(t.top=l(c).scrollTop()+e.data("css-top")+"px",r.fade){o={opacity:1};return setTimeout(function(){return e.css(t).animate(o,s.animation_speed,"linear",function(){i.locked=!1,e.trigger("opened.fndtn.reveal")}).addClass("open")},s.animation_speed/2)}return e.css(t).show().css({opacity:1}).addClass("open").trigger("opened.fndtn.reveal")}var s;return h((s=this.settings).animation).fade?e.fadeIn(s.animation_speed/2):(this.locked=!1,e.show())},to_back:function(e){e.addClass("toback")},to_front:function(e){e.removeClass("toback")},hide:function(e,t){if(t){var a=e.data(this.attr_name(!0)+"-init"),i=this,n=h((a=a||this.settings).animation);if(n.animate||(this.locked=!1),n.pop){var r={top:-l(c).scrollTop()-e.data("offset")+"px",opacity:0};return setTimeout(function(){return e.animate(r,a.animation_speed,"linear",function(){i.locked=!1,e.css(t).trigger("closed.fndtn.reveal")}).removeClass("open")},a.animation_speed/2)}if(n.fade){r={opacity:0};return setTimeout(function(){return e.animate(r,a.animation_speed,"linear",function(){i.locked=!1,e.css(t).trigger("closed.fndtn.reveal")}).removeClass("open")},a.animation_speed/2)}return e.hide().css(t).removeClass("open").trigger("closed.fndtn.reveal")}return h((a=this.settings).animation).fade?e.fadeOut(a.animation_speed/2):e.hide()},close_video:function(e){var t=l(".flex-video",e.target),a=l("iframe",t);0<a.length&&(a.attr("data-src",a[0].src),a.attr("src",a.attr("src")),t.hide())},open_video:function(e){var t=l(".flex-video",e.target),a=t.find("iframe");if(0<a.length){if("string"==typeof a.attr("data-src"))a[0].src=a.attr("data-src");else{var i=a[0].src;a[0].src=d,a[0].src=i}t.show()}},data_attr:function(e){return 0<this.namespace.length?this.namespace+"-"+e:e},cache_offset:function(e){var t=e.show().height()+parseInt(e.css("top"),10)+e.scrollY;return e.hide(),t},off:function(){l(this.scope).off(".fndtn.reveal")},reflow:function(){}}}(jQuery,window,window.document),function(){for(var r=0,e=["ms","moz","webkit","o"],t=0;t<e.length&&!window.requestAnimationFrame;++t)window.requestAnimationFrame=window[e[t]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[e[t]+"CancelAnimationFrame"]||window[e[t]+"CancelRequestAnimationFrame"];window.requestAnimationFrame||(window.requestAnimationFrame=function(e,t){var a=(new Date).getTime(),i=Math.max(0,16-(a-r)),n=window.setTimeout(function(){e(a+i)},i);return r=a+i,n}),window.cancelAnimationFrame||(window.cancelAnimationFrame=function(e){clearTimeout(e)})}(),function(l){var r="unobtrusiveAjaxClick",o="unobtrusiveAjaxClickTarget";function c(e,t){for(var a=window,i=(e||"").split(".");a&&i.length;)a=a[i.shift()];return"function"==typeof a?a:(t.push(e),Function.constructor.apply(null,t))}function d(e){return"GET"===e||"POST"===e}function s(o,e){var t,n,r,s;(t=o.getAttribute("data-ajax-confirm"))&&!window.confirm(t)||(n=l(o.getAttribute("data-ajax-loading")),s=parseInt(o.getAttribute("data-ajax-loading-duration"),10)||0,l.extend(e,{type:o.getAttribute("data-ajax-method")||void 0,url:o.getAttribute("data-ajax-url")||void 0,cache:"true"===(o.getAttribute("data-ajax-cache")||"").toLowerCase(),beforeSend:function(e){var t,a,i;return a=e,d(i=r)||a.setRequestHeader("X-HTTP-Method-Override",i),!1!==(t=c(o.getAttribute("data-ajax-begin"),["xhr"]).apply(o,arguments))&&n.show(s),t},complete:function(){n.hide(s),c(o.getAttribute("data-ajax-complete"),["xhr","status"]).apply(o,arguments)},success:function(e,t,a){var i,n,r;i=o,n=e,-1===(a.getResponseHeader("Content-Type")||"text/html").indexOf("application/x-javascript")&&(r=(i.getAttribute("data-ajax-mode")||"").toUpperCase(),l(i.getAttribute("data-ajax-update")).each(function(e,t){switch(r){case"BEFORE":l(t).prepend(n);break;case"AFTER":l(t).append(n);break;case"REPLACE-WITH":l(t).replaceWith(n);break;default:l(t).html(n)}})),c(o.getAttribute("data-ajax-success"),["data","status","xhr"]).apply(o,arguments)},error:function(){c(o.getAttribute("data-ajax-failure"),["xhr","status","error"]).apply(o,arguments)}}),e.data.push({name:"X-Requested-With",value:"XMLHttpRequest"}),d(r=e.type.toUpperCase())||(e.type="POST",e.data.push({name:"X-HTTP-Method-Override",value:r})),l.ajax(e))}l(document).on("click","a[data-ajax=true]",function(e){e.preventDefault(),s(this,{url:this.href,type:"GET",data:[]})}),l(document).on("click","form[data-ajax=true] input[type=image]",function(e){var t=e.target.name,a=l(e.target),i=l(a.parents("form")[0]),n=a.offset();i.data(r,[{name:t+".x",value:Math.round(e.pageX-n.left)},{name:t+".y",value:Math.round(e.pageY-n.top)}]),setTimeout(function(){i.removeData(r)},0)}),l(document).on("click","form[data-ajax=true] :submit",function(e){var t=e.currentTarget.name,a=l(e.target),i=l(a.parents("form")[0]);i.data(r,t?[{name:t,value:e.currentTarget.value}]:[]),i.data(o,a),setTimeout(function(){i.removeData(r),i.removeData(o)},0)}),l(document).on("submit","form[data-ajax=true]",function(e){var t,a=l(this).data(r)||[],i=l(this).data(o),n=i&&(i.hasClass("cancel")||void 0!==i.attr("formnovalidate"));(e.preventDefault(),n||(!(t=l(this).data("unobtrusiveValidation"))||!t.validate||t.validate()))&&s(this,{url:this.action,type:this.method||"GET",data:a.concat(l(this).serializeArray())})})}(jQuery),function(e){"function"==typeof define&&define.amd?define(["jquery"],e):"object"==typeof module&&module.exports?module.exports=e(require("jquery")):e(jQuery)}(function(d){d.extend(d.fn,{validate:function(e){if(this.length){var i=d.data(this[0],"validator");return i||(this.attr("novalidate","novalidate"),i=new d.validator(e,this[0]),d.data(this[0],"validator",i),i.settings.onsubmit&&(this.on("click.validate",":submit",function(e){i.submitButton=e.currentTarget,d(this).hasClass("cancel")&&(i.cancelSubmit=!0),void 0!==d(this).attr("formnovalidate")&&(i.cancelSubmit=!0)}),this.on("submit.validate",function(a){function e(){var e,t;return i.submitButton&&(i.settings.submitHandler||i.formSubmitted)&&(e=d("<input type='hidden'/>").attr("name",i.submitButton.name).val(d(i.submitButton).val()).appendTo(i.currentForm)),!i.settings.submitHandler||(t=i.settings.submitHandler.call(i,i.currentForm,a),e&&e.remove(),void 0!==t&&t)}return i.settings.debug&&a.preventDefault(),i.cancelSubmit?(i.cancelSubmit=!1,e()):i.form()?i.pendingRequest?!(i.formSubmitted=!0):e():(i.focusInvalid(),!1)})),i)}e&&e.debug&&window.console&&console.warn("Nothing selected, can't validate, returning nothing.")},valid:function(){var e,t,a;return d(this[0]).is("form")?e=this.validate().form():(a=[],e=!0,t=d(this[0].form).validate(),this.each(function(){(e=t.element(this)&&e)||(a=a.concat(t.errorList))}),t.errorList=a),e},rules:function(e,t){var a,i,n,r,o,s,l=this[0];if(null!=l&&(!l.form&&l.hasAttribute("contenteditable")&&(l.form=this.closest("form")[0],l.name=this.attr("name")),null!=l.form)){if(e)switch(i=(a=d.data(l.form,"validator").settings).rules,n=d.validator.staticRules(l),e){case"add":d.extend(n,d.validator.normalizeRule(t)),delete n.messages,i[l.name]=n,t.messages&&(a.messages[l.name]=d.extend(a.messages[l.name],t.messages));break;case"remove":return t?(s={},d.each(t.split(/\s/),function(e,t){s[t]=n[t],delete n[t]}),s):(delete i[l.name],n)}return(r=d.validator.normalizeRules(d.extend({},d.validator.classRules(l),d.validator.attributeRules(l),d.validator.dataRules(l),d.validator.staticRules(l)),l)).required&&(o=r.required,delete r.required,r=d.extend({required:o},r)),r.remote&&(o=r.remote,delete r.remote,r=d.extend(r,{remote:o})),r}}}),d.extend(d.expr.pseudos||d.expr[":"],{blank:function(e){return!d.trim(""+d(e).val())},filled:function(e){var t=d(e).val();return null!==t&&!!d.trim(""+t)},unchecked:function(e){return!d(e).prop("checked")}}),d.validator=function(e,t){this.settings=d.extend(!0,{},d.validator.defaults,e),this.currentForm=t,this.init()},d.validator.format=function(a,e){return 1===arguments.length?function(){var e=d.makeArray(arguments);return e.unshift(a),d.validator.format.apply(this,e)}:(void 0===e||(2<arguments.length&&e.constructor!==Array&&(e=d.makeArray(arguments).slice(1)),e.constructor!==Array&&(e=[e]),d.each(e,function(e,t){a=a.replace(new RegExp("\\{"+e+"\\}","g"),function(){return t})})),a)},d.extend(d.validator,{defaults:{messages:{},groups:{},rules:{},errorClass:"error",pendingClass:"pending",validClass:"valid",errorElement:"label",focusCleanup:!1,focusInvalid:!0,errorContainer:d([]),errorLabelContainer:d([]),onsubmit:!0,ignore:":hidden",ignoreTitle:!1,onfocusin:function(e){this.lastActive=e,this.settings.focusCleanup&&(this.settings.unhighlight&&this.settings.unhighlight.call(this,e,this.settings.errorClass,this.settings.validClass),this.hideThese(this.errorsFor(e)))},onfocusout:function(e){this.checkable(e)||!(e.name in this.submitted)&&this.optional(e)||this.element(e)},onkeyup:function(e,t){9===t.which&&""===this.elementValue(e)||-1!==d.inArray(t.keyCode,[16,17,18,20,35,36,37,38,39,40,45,144,225])||(e.name in this.submitted||e.name in this.invalid)&&this.element(e)},onclick:function(e){e.name in this.submitted?this.element(e):e.parentNode.name in this.submitted&&this.element(e.parentNode)},highlight:function(e,t,a){"radio"===e.type?this.findByName(e.name).addClass(t).removeClass(a):d(e).addClass(t).removeClass(a)},unhighlight:function(e,t,a){"radio"===e.type?this.findByName(e.name).removeClass(t).addClass(a):d(e).removeClass(t).addClass(a)}},setDefaults:function(e){d.extend(d.validator.defaults,e)},messages:{required:"This field is required.",remote:"Please fix this field.",email:"Please enter a valid email address.",url:"Please enter a valid URL.",date:"Please enter a valid date.",dateISO:"Please enter a valid date (ISO).",number:"Please enter a valid number.",digits:"Please enter only digits.",equalTo:"Please enter the same value again.",maxlength:d.validator.format("Please enter no more than {0} characters."),minlength:d.validator.format("Please enter at least {0} characters."),rangelength:d.validator.format("Please enter a value between {0} and {1} characters long."),range:d.validator.format("Please enter a value between {0} and {1}."),max:d.validator.format("Please enter a value less than or equal to {0}."),min:d.validator.format("Please enter a value greater than or equal to {0}."),step:d.validator.format("Please enter a multiple of {0}.")},autoCreateRanges:!1,prototype:{init:function(){this.labelContainer=d(this.settings.errorLabelContainer),this.errorContext=this.labelContainer.length&&this.labelContainer||d(this.currentForm),this.containers=d(this.settings.errorContainer).add(this.settings.errorLabelContainer),this.submitted={},this.valueCache={},this.pendingRequest=0,this.pending={},this.invalid={},this.reset();var a,i=this.groups={};function e(e){!this.form&&this.hasAttribute("contenteditable")&&(this.form=d(this).closest("form")[0],this.name=d(this).attr("name"));var t=d.data(this.form,"validator"),a="on"+e.type.replace(/^validate/,""),i=t.settings;i[a]&&!d(this).is(i.ignore)&&i[a].call(t,this,e)}d.each(this.settings.groups,function(a,e){"string"==typeof e&&(e=e.split(/\s/)),d.each(e,function(e,t){i[t]=a})}),a=this.settings.rules,d.each(a,function(e,t){a[e]=d.validator.normalizeRule(t)}),d(this.currentForm).on("focusin.validate focusout.validate keyup.validate",":text, [type='password'], [type='file'], select, textarea, [type='number'], [type='search'], [type='tel'], [type='url'], [type='email'], [type='datetime'], [type='date'], [type='month'], [type='week'], [type='time'], [type='datetime-local'], [type='range'], [type='color'], [type='radio'], [type='checkbox'], [contenteditable], [type='button']",e).on("click.validate","select, option, [type='radio'], [type='checkbox']",e),this.settings.invalidHandler&&d(this.currentForm).on("invalid-form.validate",this.settings.invalidHandler)},form:function(){return this.checkForm(),d.extend(this.submitted,this.errorMap),this.invalid=d.extend({},this.errorMap),this.valid()||d(this.currentForm).triggerHandler("invalid-form",[this]),this.showErrors(),this.valid()},checkForm:function(){this.prepareForm();for(var e=0,t=this.currentElements=this.elements();t[e];e++)this.check(t[e]);return this.valid()},element:function(e){var t,a,i=this.clean(e),n=this.validationTargetFor(i),r=this,o=!0;return void 0===n?delete this.invalid[i.name]:(this.prepareElement(n),this.currentElements=d(n),(a=this.groups[n.name])&&d.each(this.groups,function(e,t){t===a&&e!==n.name&&(i=r.validationTargetFor(r.clean(r.findByName(e))))&&i.name in r.invalid&&(r.currentElements.push(i),o=r.check(i)&&o)}),t=!1!==this.check(n),o=o&&t,this.invalid[n.name]=!t,this.numberOfInvalids()||(this.toHide=this.toHide.add(this.containers)),this.showErrors(),d(e).attr("aria-invalid",!t)),o},showErrors:function(t){if(t){var a=this;d.extend(this.errorMap,t),this.errorList=d.map(this.errorMap,function(e,t){return{message:e,element:a.findByName(t)[0]}}),this.successList=d.grep(this.successList,function(e){return!(e.name in t)})}this.settings.showErrors?this.settings.showErrors.call(this,this.errorMap,this.errorList):this.defaultShowErrors()},resetForm:function(){d.fn.resetForm&&d(this.currentForm).resetForm(),this.invalid={},this.submitted={},this.prepareForm(),this.hideErrors();var e=this.elements().removeData("previousValue").removeAttr("aria-invalid");this.resetElements(e)},resetElements:function(e){var t;if(this.settings.unhighlight)for(t=0;e[t];t++)this.settings.unhighlight.call(this,e[t],this.settings.errorClass,""),this.findByName(e[t].name).removeClass(this.settings.validClass);else e.removeClass(this.settings.errorClass).removeClass(this.settings.validClass)},numberOfInvalids:function(){return this.objectLength(this.invalid)},objectLength:function(e){var t,a=0;for(t in e)void 0!==e[t]&&null!==e[t]&&!1!==e[t]&&a++;return a},hideErrors:function(){this.hideThese(this.toHide)},hideThese:function(e){e.not(this.containers).text(""),this.addWrapper(e).hide()},valid:function(){return 0===this.size()},size:function(){return this.errorList.length},focusInvalid:function(){if(this.settings.focusInvalid)try{d(this.findLastActive()||this.errorList.length&&this.errorList[0].element||[]).filter(":visible").focus().trigger("focusin")}catch(e){}},findLastActive:function(){var t=this.lastActive;return t&&1===d.grep(this.errorList,function(e){return e.element.name===t.name}).length&&t},elements:function(){var t=this,a={};return d(this.currentForm).find("input, select, textarea, [contenteditable]").not(":submit, :reset, :image, :disabled").not(this.settings.ignore).filter(function(){var e=this.name||d(this).attr("name");return!e&&t.settings.debug&&window.console&&console.error("%o has no name assigned",this),this.hasAttribute("contenteditable")&&(this.form=d(this).closest("form")[0],this.name=e),!(e in a||!t.objectLength(d(this).rules()))&&(a[e]=!0)})},clean:function(e){return d(e)[0]},errors:function(){var e=this.settings.errorClass.split(" ").join(".");return d(this.settings.errorElement+"."+e,this.errorContext)},resetInternals:function(){this.successList=[],this.errorList=[],this.errorMap={},this.toShow=d([]),this.toHide=d([])},reset:function(){this.resetInternals(),this.currentElements=d([])},prepareForm:function(){this.reset(),this.toHide=this.errors().add(this.containers)},prepareElement:function(e){this.reset(),this.toHide=this.errorsFor(e)},elementValue:function(e){var t,a,i=d(e),n=e.type;return"radio"===n||"checkbox"===n?this.findByName(e.name).filter(":checked").val():"number"===n&&void 0!==e.validity?e.validity.badInput?"NaN":i.val():(t=e.hasAttribute("contenteditable")?i.text():i.val(),"file"===n?"C:\\fakepath\\"===t.substr(0,12)?t.substr(12):0<=(a=t.lastIndexOf("/"))?t.substr(a+1):0<=(a=t.lastIndexOf("\\"))?t.substr(a+1):t:"string"==typeof t?t.replace(/\r/g,""):t)},check:function(t){t=this.validationTargetFor(this.clean(t));var e,a,i,n,r=d(t).rules(),o=d.map(r,function(e,t){return t}).length,s=!1,l=this.elementValue(t);if("function"==typeof r.normalizer?n=r.normalizer:"function"==typeof this.settings.normalizer&&(n=this.settings.normalizer),n){if("string"!=typeof(l=n.call(t,l)))throw new TypeError("The normalizer should return a string value.");delete r.normalizer}for(a in r){i={method:a,parameters:r[a]};try{if("dependency-mismatch"===(e=d.validator.methods[a].call(this,l,t,i.parameters))&&1===o){s=!0;continue}if(s=!1,"pending"===e)return void(this.toHide=this.toHide.not(this.errorsFor(t)));if(!e)return this.formatAndAdd(t,i),!1}catch(e){throw this.settings.debug&&window.console&&console.log("Exception occurred when checking element "+t.id+", check the '"+i.method+"' method.",e),e instanceof TypeError&&(e.message+=".  Exception occurred when checking element "+t.id+", check the '"+i.method+"' method."),e}}if(!s)return this.objectLength(r)&&this.successList.push(t),!0},customDataMessage:function(e,t){return d(e).data("msg"+t.charAt(0).toUpperCase()+t.substring(1).toLowerCase())||d(e).data("msg")},customMessage:function(e,t){var a=this.settings.messages[e];return a&&(a.constructor===String?a:a[t])},findDefined:function(){for(var e=0;e<arguments.length;e++)if(void 0!==arguments[e])return arguments[e]},defaultMessage:function(e,t){"string"==typeof t&&(t={method:t});var a=this.findDefined(this.customMessage(e.name,t.method),this.customDataMessage(e,t.method),!this.settings.ignoreTitle&&e.title||void 0,d.validator.messages[t.method],"<strong>Warning: No message defined for "+e.name+"</strong>"),i=/\$?\{(\d+)\}/g;return"function"==typeof a?a=a.call(this,t.parameters,e):i.test(a)&&(a=d.validator.format(a.replace(i,"{$1}"),t.parameters)),a},formatAndAdd:function(e,t){var a=this.defaultMessage(e,t);this.errorList.push({message:a,element:e,method:t.method}),this.errorMap[e.name]=a,this.submitted[e.name]=a},addWrapper:function(e){return this.settings.wrapper&&(e=e.add(e.parent(this.settings.wrapper))),e},defaultShowErrors:function(){var e,t,a;for(e=0;this.errorList[e];e++)a=this.errorList[e],this.settings.highlight&&this.settings.highlight.call(this,a.element,this.settings.errorClass,this.settings.validClass),this.showLabel(a.element,a.message);if(this.errorList.length&&(this.toShow=this.toShow.add(this.containers)),this.settings.success)for(e=0;this.successList[e];e++)this.showLabel(this.successList[e]);if(this.settings.unhighlight)for(e=0,t=this.validElements();t[e];e++)this.settings.unhighlight.call(this,t[e],this.settings.errorClass,this.settings.validClass);this.toHide=this.toHide.not(this.toShow),this.hideErrors(),this.addWrapper(this.toShow).show()},validElements:function(){return this.currentElements.not(this.invalidElements())},invalidElements:function(){return d(this.errorList).map(function(){return this.element})},showLabel:function(e,t){var a,i,n,r,o=this.errorsFor(e),s=this.idOrName(e),l=d(e).attr("aria-describedby");o.length?(o.removeClass(this.settings.validClass).addClass(this.settings.errorClass),o.html(t)):(a=o=d("<"+this.settings.errorElement+">").attr("id",s+"-error").addClass(this.settings.errorClass).html(t||""),this.settings.wrapper&&(a=o.hide().show().wrap("<"+this.settings.wrapper+"/>").parent()),this.labelContainer.length?this.labelContainer.append(a):this.settings.errorPlacement?this.settings.errorPlacement.call(this,a,d(e)):a.insertAfter(e),o.is("label")?o.attr("for",s):0===o.parents("label[for='"+this.escapeCssMeta(s)+"']").length&&(n=o.attr("id"),l?l.match(new RegExp("\\b"+this.escapeCssMeta(n)+"\\b"))||(l+=" "+n):l=n,d(e).attr("aria-describedby",l),(i=this.groups[e.name])&&(r=this,d.each(r.groups,function(e,t){t===i&&d("[name='"+r.escapeCssMeta(e)+"']",r.currentForm).attr("aria-describedby",o.attr("id"))})))),!t&&this.settings.success&&(o.text(""),"string"==typeof this.settings.success?o.addClass(this.settings.success):this.settings.success(o,e)),this.toShow=this.toShow.add(o)},errorsFor:function(e){var t=this.escapeCssMeta(this.idOrName(e)),a=d(e).attr("aria-describedby"),i="label[for='"+t+"'], label[for='"+t+"'] *";return a&&(i=i+", #"+this.escapeCssMeta(a).replace(/\s+/g,", #")),this.errors().filter(i)},escapeCssMeta:function(e){return e.replace(/([\\!"#$%&'()*+,./:;<=>?@\[\]^`{|}~])/g,"\\$1")},idOrName:function(e){return this.groups[e.name]||(this.checkable(e)?e.name:e.id||e.name)},validationTargetFor:function(e){return this.checkable(e)&&(e=this.findByName(e.name)),d(e).not(this.settings.ignore)[0]},checkable:function(e){return/radio|checkbox/i.test(e.type)},findByName:function(e){return d(this.currentForm).find("[name='"+this.escapeCssMeta(e)+"']")},getLength:function(e,t){switch(t.nodeName.toLowerCase()){case"select":return d("option:selected",t).length;case"input":if(this.checkable(t))return this.findByName(t.name).filter(":checked").length}return e.length},depend:function(e,t){return!this.dependTypes[typeof e]||this.dependTypes[typeof e](e,t)},dependTypes:{boolean:function(e){return e},string:function(e,t){return!!d(e,t.form).length},function:function(e,t){return e(t)}},optional:function(e){var t=this.elementValue(e);return!d.validator.methods.required.call(this,t,e)&&"dependency-mismatch"},startRequest:function(e){this.pending[e.name]||(this.pendingRequest++,d(e).addClass(this.settings.pendingClass),this.pending[e.name]=!0)},stopRequest:function(e,t){this.pendingRequest--,this.pendingRequest<0&&(this.pendingRequest=0),delete this.pending[e.name],d(e).removeClass(this.settings.pendingClass),t&&0===this.pendingRequest&&this.formSubmitted&&this.form()?(d(this.currentForm).submit(),this.submitButton&&d("input:hidden[name='"+this.submitButton.name+"']",this.currentForm).remove(),this.formSubmitted=!1):!t&&0===this.pendingRequest&&this.formSubmitted&&(d(this.currentForm).triggerHandler("invalid-form",[this]),this.formSubmitted=!1)},previousValue:function(e,t){return t="string"==typeof t&&t||"remote",d.data(e,"previousValue")||d.data(e,"previousValue",{old:null,valid:!0,message:this.defaultMessage(e,{method:t})})},destroy:function(){this.resetForm(),d(this.currentForm).off(".validate").removeData("validator").find(".validate-equalTo-blur").off(".validate-equalTo").removeClass("validate-equalTo-blur")}},classRuleSettings:{required:{required:!0},email:{email:!0},url:{url:!0},date:{date:!0},dateISO:{dateISO:!0},number:{number:!0},digits:{digits:!0},creditcard:{creditcard:!0}},addClassRules:function(e,t){e.constructor===String?this.classRuleSettings[e]=t:d.extend(this.classRuleSettings,e)},classRules:function(e){var t={},a=d(e).attr("class");return a&&d.each(a.split(" "),function(){this in d.validator.classRuleSettings&&d.extend(t,d.validator.classRuleSettings[this])}),t},normalizeAttributeRule:function(e,t,a,i){/min|max|step/.test(a)&&(null===t||/number|range|text/.test(t))&&(i=Number(i),isNaN(i)&&(i=void 0)),i||0===i?e[a]=i:t===a&&"range"!==t&&(e[a]=!0)},attributeRules:function(e){var t,a,i={},n=d(e),r=e.getAttribute("type");for(t in d.validator.methods)a="required"===t?(""===(a=e.getAttribute(t))&&(a=!0),!!a):n.attr(t),this.normalizeAttributeRule(i,r,t,a);return i.maxlength&&/-1|2147483647|524288/.test(i.maxlength)&&delete i.maxlength,i},dataRules:function(e){var t,a,i={},n=d(e),r=e.getAttribute("type");for(t in d.validator.methods)a=n.data("rule"+t.charAt(0).toUpperCase()+t.substring(1).toLowerCase()),this.normalizeAttributeRule(i,r,t,a);return i},staticRules:function(e){var t={},a=d.data(e.form,"validator");return a.settings.rules&&(t=d.validator.normalizeRule(a.settings.rules[e.name])||{}),t},normalizeRules:function(i,n){return d.each(i,function(e,t){if(!1!==t){if(t.param||t.depends){var a=!0;switch(typeof t.depends){case"string":a=!!d(t.depends,n.form).length;break;case"function":a=t.depends.call(n,n)}a?i[e]=void 0===t.param||t.param:(d.data(n.form,"validator").resetElements(d(n)),delete i[e])}}else delete i[e]}),d.each(i,function(e,t){i[e]=d.isFunction(t)&&"normalizer"!==e?t(n):t}),d.each(["minlength","maxlength"],function(){i[this]&&(i[this]=Number(i[this]))}),d.each(["rangelength","range"],function(){var e;i[this]&&(d.isArray(i[this])?i[this]=[Number(i[this][0]),Number(i[this][1])]:"string"==typeof i[this]&&(e=i[this].replace(/[\[\]]/g,"").split(/[\s,]+/),i[this]=[Number(e[0]),Number(e[1])]))}),d.validator.autoCreateRanges&&(null!=i.min&&null!=i.max&&(i.range=[i.min,i.max],delete i.min,delete i.max),null!=i.minlength&&null!=i.maxlength&&(i.rangelength=[i.minlength,i.maxlength],delete i.minlength,delete i.maxlength)),i},normalizeRule:function(e){if("string"==typeof e){var t={};d.each(e.split(/\s/),function(){t[this]=!0}),e=t}return e},addMethod:function(e,t,a){d.validator.methods[e]=t,d.validator.messages[e]=void 0!==a?a:d.validator.messages[e],t.length<3&&d.validator.addClassRules(e,d.validator.normalizeRule(e))},methods:{required:function(e,t,a){if(!this.depend(a,t))return"dependency-mismatch";if("select"!==t.nodeName.toLowerCase())return this.checkable(t)?0<this.getLength(e,t):0<e.length;var i=d(t).val();return i&&0<i.length},email:function(e,t){return this.optional(t)||/^[a-zA-Z0-9.!#$%&'*+\/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/.test(e)},url:function(e,t){return this.optional(t)||/^(?:(?:(?:https?|ftp):)?\/\/)(?:\S+(?::\S*)?@)?(?:(?!(?:10|127)(?:\.\d{1,3}){3})(?!(?:169\.254|192\.168)(?:\.\d{1,3}){2})(?!172\.(?:1[6-9]|2\d|3[0-1])(?:\.\d{1,3}){2})(?:[1-9]\d?|1\d\d|2[01]\d|22[0-3])(?:\.(?:1?\d{1,2}|2[0-4]\d|25[0-5])){2}(?:\.(?:[1-9]\d?|1\d\d|2[0-4]\d|25[0-4]))|(?:(?:[a-z\u00a1-\uffff0-9]-*)*[a-z\u00a1-\uffff0-9]+)(?:\.(?:[a-z\u00a1-\uffff0-9]-*)*[a-z\u00a1-\uffff0-9]+)*(?:\.(?:[a-z\u00a1-\uffff]{2,})).?)(?::\d{2,5})?(?:[/?#]\S*)?$/i.test(e)},date:function(e,t){return this.optional(t)||!/Invalid|NaN/.test(new Date(e).toString())},dateISO:function(e,t){return this.optional(t)||/^\d{4}[\/\-](0?[1-9]|1[012])[\/\-](0?[1-9]|[12][0-9]|3[01])$/.test(e)},number:function(e,t){return this.optional(t)||/^(?:-?\d+|-?\d{1,3}(?:,\d{3})+)?(?:\.\d+)?$/.test(e)},digits:function(e,t){return this.optional(t)||/^\d+$/.test(e)},minlength:function(e,t,a){var i=d.isArray(e)?e.length:this.getLength(e,t);return this.optional(t)||a<=i},maxlength:function(e,t,a){var i=d.isArray(e)?e.length:this.getLength(e,t);return this.optional(t)||i<=a},rangelength:function(e,t,a){var i=d.isArray(e)?e.length:this.getLength(e,t);return this.optional(t)||i>=a[0]&&i<=a[1]},min:function(e,t,a){return this.optional(t)||a<=e},max:function(e,t,a){return this.optional(t)||e<=a},range:function(e,t,a){return this.optional(t)||e>=a[0]&&e<=a[1]},step:function(e,t,a){var i,n=d(t).attr("type"),r="Step attribute on input type "+n+" is not supported.",o=new RegExp("\\b"+n+"\\b"),s=function(e){var t=(""+e).match(/(?:\.(\d+))?$/);return t&&t[1]?t[1].length:0},l=function(e){return Math.round(e*Math.pow(10,i))},c=!0;if(n&&!o.test(["text","number","range"].join()))throw new Error(r);return i=s(a),(s(e)>i||l(e)%l(a)!=0)&&(c=!1),this.optional(t)||c},equalTo:function(e,t,a){var i=d(a);return this.settings.onfocusout&&i.not(".validate-equalTo-blur").length&&i.addClass("validate-equalTo-blur").on("blur.validate-equalTo",function(){d(t).valid()}),e===i.val()},remote:function(r,o,e,s){if(this.optional(o))return"dependency-mismatch";s="string"==typeof s&&s||"remote";var l,t,a,c=this.previousValue(o,s);return this.settings.messages[o.name]||(this.settings.messages[o.name]={}),c.originalMessage=c.originalMessage||this.settings.messages[o.name][s],this.settings.messages[o.name][s]=c.message,e="string"==typeof e&&{url:e}||e,a=d.param(d.extend({data:r},e.data)),c.old===a?c.valid:(c.old=a,(l=this).startRequest(o),(t={})[o.name]=r,d.ajax(d.extend(!0,{mode:"abort",port:"validate"+o.name,dataType:"json",data:t,context:l.currentForm,success:function(e){var t,a,i,n=!0===e||"true"===e;l.settings.messages[o.name][s]=c.originalMessage,n?(i=l.formSubmitted,l.resetInternals(),l.toHide=l.errorsFor(o),l.formSubmitted=i,l.successList.push(o),l.invalid[o.name]=!1,l.showErrors()):(t={},a=e||l.defaultMessage(o,{method:s,parameters:r}),t[o.name]=c.message=a,l.invalid[o.name]=!0,l.showErrors(t)),c.valid=n,l.stopRequest(o,n)}},e)),"pending")}}});var i,n={};return d.ajaxPrefilter?d.ajaxPrefilter(function(e,t,a){var i=e.port;"abort"===e.mode&&(n[i]&&n[i].abort(),n[i]=a)}):(i=d.ajax,d.ajax=function(e){var t=("mode"in e?e:d.ajaxSettings).mode,a=("port"in e?e:d.ajaxSettings).port;return"abort"===t?(n[a]&&n[a].abort(),n[a]=i.apply(this,arguments),n[a]):i.apply(this,arguments)}),d}),function(e){"function"==typeof define&&define.amd?define("jquery.validate.unobtrusive",["jquery-validation"],e):"object"==typeof module&&module.exports?module.exports=e(require("jquery-validation")):jQuery.validator.unobtrusive=e(jQuery)}(function(l){var e,o=l.validator,s="unobtrusiveValidation";function c(e,t,a){e.rules[t]=a,e.message&&(e.messages[t]=e.message)}function d(e){return e.replace(/([!"#$%&'()*+,./:;<=>?@\[\\\]^`{|}~])/g,"\\$1")}function u(e){return e.substr(0,e.lastIndexOf(".")+1)}function h(e,t){return 0===e.indexOf("*.")&&(e=e.replace("*.",t)),e}function p(e){var t=l(this),a="__jquery_unobtrusive_validation_form_reset";if(!t.data(a)){t.data(a,!0);try{t.data("validator").resetForm()}finally{t.removeData(a)}t.find(".validation-summary-errors").addClass("validation-summary-valid").removeClass("validation-summary-errors"),t.find(".field-validation-error").addClass("field-validation-valid").removeClass("field-validation-error").removeData("unobtrusiveContainer").find(">*").removeData("unobtrusiveContainer")}}function f(i){var e=l(i),t=e.data(s),a=l.proxy(p,i),n=o.unobtrusive.options||{},r=function(e,t){var a=n[e];a&&l.isFunction(a)&&a.apply(i,t)};return t||(t={options:{errorClass:n.errorClass||"input-validation-error",errorElement:n.errorElement||"span",errorPlacement:function(){(function(e,t){var a=l(this).find("[data-valmsg-for='"+d(t[0].name)+"']"),i=a.attr("data-valmsg-replace"),n=i?!1!==l.parseJSON(i):null;a.removeClass("field-validation-valid").addClass("field-validation-error"),e.data("unobtrusiveContainer",a),n?(a.empty(),e.removeClass("input-validation-error").appendTo(a)):e.hide()}).apply(i,arguments),r("errorPlacement",arguments)},invalidHandler:function(){(function(e,t){var a=l(this).find("[data-valmsg-summary=true]"),i=a.find("ul");i&&i.length&&t.errorList.length&&(i.empty(),a.addClass("validation-summary-errors").removeClass("validation-summary-valid"),l.each(t.errorList,function(){l("<li />").html(this.message).appendTo(i)}))}).apply(i,arguments),r("invalidHandler",arguments)},messages:{},rules:{},success:function(){(function(e){var t=e.data("unobtrusiveContainer");if(t){var a=t.attr("data-valmsg-replace"),i=a?l.parseJSON(a):null;t.addClass("field-validation-valid").removeClass("field-validation-error"),e.removeData("unobtrusiveContainer"),i&&t.empty()}}).apply(i,arguments),r("success",arguments)}},attachValidation:function(){e.off("reset."+s,a).on("reset."+s,a).validate(this.options)},validate:function(){return e.validate(),e.valid()}},e.data(s,t)),t}return o.unobtrusive={adapters:[],parseElement:function(i,e){var t,n,r,o=l(i),s=o.parents("form")[0];s&&((t=f(s)).options.rules[i.name]=n={},t.options.messages[i.name]=r={},l.each(this.adapters,function(){var e="data-val-"+this.name,t=o.attr(e),a={};void 0!==t&&(e+="-",l.each(this.params,function(){a[this]=o.attr(e+this)}),this.adapt({element:i,form:s,message:t,params:a,rules:n,messages:r}))}),l.extend(n,{__dummy__:!0}),e||t.attachValidation())},parse:function(e){var t=l(e),a=t.parents().addBack().filter("form").add(t.find("form")).has("[data-val=true]");t.find("[data-val=true]").each(function(){o.unobtrusive.parseElement(this,!0)}),a.each(function(){var e=f(this);e&&e.attachValidation()})}},(e=o.unobtrusive.adapters).add=function(e,t,a){return a||(a=t,t=[]),this.push({name:e,params:t,adapt:a}),this},e.addBool=function(t,a){return this.add(t,function(e){c(e,a||t,!0)})},e.addMinMax=function(e,i,n,r,t,a){return this.add(e,[t||"min",a||"max"],function(e){var t=e.params.min,a=e.params.max;t&&a?c(e,r,[t,a]):t?c(e,i,t):a&&c(e,n,a)})},e.addSingleVal=function(t,a,i){return this.add(t,[a||"val"],function(e){c(e,i||t,e.params[a])})},o.addMethod("__dummy__",function(e,t,a){return!0}),o.addMethod("regex",function(e,t,a){var i;return!!this.optional(t)||(i=new RegExp(a).exec(e))&&0===i.index&&i[0].length===e.length}),o.addMethod("nonalphamin",function(e,t,a){var i;return a&&(i=(i=e.match(/\W/g))&&i.length>=a),i}),o.methods.extension?(e.addSingleVal("accept","mimtype"),e.addSingleVal("extension","extension")):e.addSingleVal("extension","extension","accept"),e.addSingleVal("regex","pattern"),e.addBool("creditcard").addBool("date").addBool("digits").addBool("email").addBool("number").addBool("url"),e.addMinMax("length","minlength","maxlength","rangelength").addMinMax("range","min","max","range"),e.addMinMax("minlength","minlength").addMinMax("maxlength","minlength","maxlength"),e.add("equalto",["other"],function(e){var t=u(e.element.name),a=h(e.params.other,t);c(e,"equalTo",l(e.form).find(":input").filter("[name='"+d(a)+"']")[0])}),e.add("required",function(e){"INPUT"===e.element.tagName.toUpperCase()&&"CHECKBOX"===e.element.type.toUpperCase()||c(e,"required",!0)}),e.add("remote",["url","type","additionalfields"],function(i){var n={url:i.params.url,type:i.params.type||"GET",data:{}},r=u(i.element.name);l.each((i.params.additionalfields||i.element.name).replace(/^\s+|\s+$/g,"").split(/\s*,\s*/g),function(e,t){var a=h(t,r);n.data[a]=function(){var e=l(i.form).find(":input").filter("[name='"+d(a)+"']");return e.is(":checkbox")?e.filter(":checked").val()||e.filter(":hidden").val()||"":e.is(":radio")?e.filter(":checked").val()||"":e.val()}}),c(i,"remote",n)}),e.add("password",["min","nonalphamin","regex"],function(e){e.params.min&&c(e,"minlength",e.params.min),e.params.nonalphamin&&c(e,"nonalphamin",e.params.nonalphamin),e.params.regex&&c(e,"regex",e.params.regex)}),e.add("fileextensions",["extensions"],function(e){c(e,"extension",e.params.extensions)}),l(function(){o.unobtrusive.parse(document)}),o.unobtrusive}),function(u,e){function n(e,t,a){var i=[];return(e.reduction||e).filter(u.validity.settings.elementSupport).each(function(){t(this)?i.push(this):r(this,o(a,{field:s(this)}))}),e.reduction=u(i),e}function a(){u.validity.isValidating()&&(u.validity.report.errors++,u.validity.report.valid=!1)}function r(e,t){a(),u.validity.out.raise(u(e),t)}function h(e,t){a(),u.validity.out.raiseAggregate(e,t)}function i(e){var t=0;return e.each(function(){var e=parseFloat(this.value);t+=isNaN(e)?0:e}),t}function o(e,t){for(var a in t)t.hasOwnProperty(a)&&(e=e.replace(RegExp("#\\{"+a+"\\}","g"),t[a]));return l(e)}function s(e){var t=(e=u(e)).prop("id"),a=u.validity.settings.defaultFieldName;if(e.prop("title").length)a=e.prop("title");else if(/^([A-Z0-9][a-z]*)+$/.test(t))a=t.replace(/([A-Z0-9])[a-z]*/g," $&");else if(/^[a-z0-9]+(_[a-z0-9]+)*$/.test(t)){for(e=t.split("_"),t=0;t<e.length;++t)e[t]=l(e[t]);a=e.join(" ")}return u.trim(a)}function l(e){return e.substring?e.substring(0,1).toUpperCase()+e.substring(1,e.length):e}var t;u.validity={settings:u.extend({outputMode:"tooltip",scrollTo:!1,modalErrorsClickable:!0,defaultFieldName:"This field",elementSupport:":text, :password, textarea, select, :radio, :checkbox, input[type='hidden'], input[type='tel'], input[type='email']",argToString:function(e){return e.getDate?[e.getMonth()+1,e.getDate(),e.getFullYear()].join("/"):e+""},debugPrivates:!1},{}),patterns:{integer:/^\d+$/,date:/^((0?\d)|(1[012]))[\/-]([012]?\d|30|31)[\/-]\d{1,4}$/,email:/^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?$/i,usd:/^\$?((\d{1,3}(,\d{3})*)|\d+)(\.(\d{2})?)?$/,url:/^(https?|ftp):\/\/(((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:)*@)?(((\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5]))|((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?)(:\d*)?)(\/((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)+(\/(([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)*)*)?)?(\?((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|[\uE000-\uF8FF]|\/|\?)*)?(\#((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|\/|\?)*)?$/i,number:/^[+-]?(\d+(\.\d*)?|\.\d+)([Ee]-?\d+)?$/,zip:/^\d{5}(-\d{4})?$/,phone:/^[2-9]\d{2}-\d{3}-\d{4}$/,guid:/^(\{?([0-9a-fA-F]){8}-(([0-9a-fA-F]){4}-){3}([0-9a-fA-F]){12}\}?)$/,time12:/^((0?\d)|(1[012])):[0-5]\d?\s?[aApP]\.?[mM]\.?$/,time24:/^(20|21|22|23|[01]\d|\d)(([:][0-5]\d){1,2})$/,nonHtml:/^[^<>]*$/},messages:{require:"#{field} is required.",match:"#{field} is in an invalid format.",integer:"#{field} must be a positive, whole number.",date:"#{field} must be formatted as a date. (mm/dd/yyyy)",email:"#{field} must be formatted as an email.",usd:"#{field} must be formatted as a US Dollar amount.",url:"#{field} must be formatted as a URL.",number:"#{field} must be formatted as a number.",zip:"#{field} must be formatted as a zipcode ##### or #####-####.",phone:"#{field} must be formatted as a phone number ###-###-####.",guid:"#{field} must be formatted as a guid like {3F2504E0-4F89-11D3-9A0C-0305E82C3301}.",time24:"#{field} must be formatted as a 24 hour time: 23:00.",time12:"#{field} must be formatted as a 12 hour time: 12:00 AM/PM",lessThan:"#{field} must be less than #{max}.",lessThanOrEqualTo:"#{field} must be less than or equal to #{max}.",greaterThan:"#{field} must be greater than #{min}.",greaterThanOrEqualTo:"#{field} must be greater than or equal to #{min}.",range:"#{field} must be between #{min} and #{max}.",tooLong:"#{field} cannot be longer than #{max} characters.",tooShort:"#{field} cannot be shorter than #{min} characters.",nonHtml:"#{field} cannot contain HTML characters.",alphabet:"#{field} contains disallowed characters.",minCharClass:"#{field} cannot have more than #{min} #{charClass} characters.",maxCharClass:"#{field} cannot have less than #{min} #{charClass} characters.",equal:"Values don't match.",distinct:"A value was repeated.",sum:"Values don't add to #{sum}.",sumMax:"The sum of the values must be less than #{max}.",sumMin:"The sum of the values must be greater than #{min}.",radioChecked:"The selected value is not valid.",generic:"Invalid."},out:{start:function(){this.defer("start")},end:function(e){this.defer("end",e)},raise:function(e,t){this.defer("raise",e,t)},raiseAggregate:function(e,t){this.defer("raiseAggregate",e,t)},defer:function(e){var t;(t=(t=u.validity).outputs[t.settings.outputMode])[e].apply(t,Array.prototype.slice.call(arguments,1))}},charClasses:{alphabetical:/\w/g,numeric:/\d/g,alphanumeric:/[A-Za-z0-9]/g,symbol:/[^A-Za-z0-9]/g},outputs:{},__private:void 0,setup:function(e){this.settings=u.extend(this.settings,e),this.__private=this.settings.debugPrivates?t:void 0},report:null,isValidating:function(){return!!this.report},start:function(){this.out.start(),this.report={errors:0,valid:!0}},end:function(){var e=this.report||{errors:0,valid:!0};return this.report=null,this.out.end(e),e},clear:function(){this.start(),this.end()}},u.fn.extend({validity:function(a){return this.each(function(){var e=this;if("form"==this.tagName.toLowerCase()){var t=null;"string"==typeof a?t=function(){u(a).require()}:u.isFunction(a)&&(t=a),a&&u(this).bind("submit",function(){return u.validity.start(),t.apply(e),u.validity.end().valid})}})},require:function(e){return n(this,function(e){return!!u(e).val()&&(null!=u(e).val()&&!!u(e).val().length)},e||u.validity.messages.require)},match:function(t,e){return e||(e=u.validity.messages.match,"string"==typeof t&&u.validity.messages[t]&&(e=u.validity.messages[t])),"string"==typeof t&&(t=u.validity.patterns[t]),n(this,u.isFunction(t)?function(e){return!e.value.length||t(e.value)}:function(e){return t.global&&(t.lastIndex=0),!e.value.length||t.test(e.value)},e)},range:function(t,a,e){return n(this,t.getTime&&a.getTime?function(e){return(e=new Date(e.value))>=new Date(t)&&e<=new Date(a)}:t.substring&&a.substring&&Big?function(e){return(e=new Big(e.value)).greaterThanOrEqualTo(new Big(t))&&e.lessThanOrEqualTo(new Big(a))}:function(e){return e=parseFloat(e.value),t<=e&&e<=a},e||o(u.validity.messages.range,{min:u.validity.settings.argToString(t),max:u.validity.settings.argToString(a)}))},greaterThan:function(t,e){return n(this,t.getTime?function(e){return new Date(e.value)>t}:t.substring&&Big?function(e){return new Big(e.value).greaterThan(new Big(t))}:function(e){return parseFloat(e.value)>t},e||o(u.validity.messages.greaterThan,{min:u.validity.settings.argToString(t)}))},greaterThanOrEqualTo:function(t,e){return n(this,t.getTime?function(e){return new Date(e.value)>=t}:t.substring&&Big?function(e){return new Big(e.value).greaterThanOrEqualTo(new Big(t))}:function(e){return parseFloat(e.value)>=t},e||o(u.validity.messages.greaterThanOrEqualTo,{min:u.validity.settings.argToString(t)}))},lessThan:function(t,e){return n(this,t.getTime?function(e){return new Date(e.value)<t}:t.substring&&Big?function(e){return new Big(e.value).lessThan(new Big(t))}:function(e){return parseFloat(e.value)<t},e||o(u.validity.messages.lessThan,{max:u.validity.settings.argToString(t)}))},lessThanOrEqualTo:function(t,e){return n(this,t.getTime?function(e){return new Date(e.value)<=t}:t.substring&&Big?function(e){return new Big(e.value).lessThanOrEqualTo(new Big(t))}:function(e){return parseFloat(e.value)<=t},e||o(u.validity.messages.lessThanOrEqualTo,{max:u.validity.settings.argToString(t)}))},maxLength:function(t,e){return n(this,function(e){return e.value.length<=t},e||o(u.validity.messages.tooLong,{max:t}))},minLength:function(t,e){return n(this,function(e){return e.value.length>=t},e||o(u.validity.messages.tooShort,{min:t}))},alphabet:function(a,e){var i=[];return n(this,function(e){for(var t=0;t<e.value.length;++t)if(-1==a.indexOf(e.value.charAt(t)))return i.push(e.value.charAt(t)),!1;return!0},e||o(u.validity.messages.alphabet,{chars:i.join(", ")}))},minCharClass:function(t,a,e){return"string"==typeof t&&(t=t.toLowerCase(),u.validity.charClasses[t]&&(t=u.validity.charClasses[t])),n(this,function(e){return(e.value.match(t)||[]).length>=a},e||o(u.validity.messages.minCharClass,{min:a,charClass:t}))},maxCharClass:function(t,a,e){return"string"==typeof t&&(t=t.toLowerCase(),u.validity.charClasses[t]&&(t=u.validity.charClasses[t])),n(this,function(e){return(e.value.match(t)||[]).length<=a},e||o(u.validity.messages.maxCharClass,{max:a,charClass:t}))},nonHtml:function(e){return n(this,function(e){return u.validity.patterns.nonHtml.test(e.value)},e||u.validity.messages.nonHtml)},equal:function(e,t){var a=(this.reduction||this).filter(u.validity.settings.elementSupport),i=function(e){return e},n=u.validity.messages.equal;if(a.length){u.isFunction(e)?(i=e,"string"==typeof t&&(n=t)):"string"==typeof e&&(n=e);var r,o=u.map(a,function(e){return i(e.value)}),s=o[0],l=!0;for(r in o)o[r]!=s&&(l=!1);l||(h(a,n),this.reduction=u([]))}return this},distinct:function(e,t){var a=(this.reduction||this).filter(u.validity.settings.elementSupport),i=function(e){return e},n=u.validity.messages.distinct,r=[],o=[],s=!0;if(a.length){u.isFunction(e)?(i=e,"string"==typeof t&&(n=t)):"string"==typeof e&&(n=e);for(var l=u.map(a,function(e){return i(e.value)}),c=0;c<l.length;++c)if(l[c].length){for(var d=0;d<r.length;++d)r[d]==l[c]&&(s=!1,o.push(l[c]));r.push(l[c])}if(!s){for(r=0,s=(o=u.unique(o)).length;r<s;++r)h(a.filter("[value='"+o[r]+"']"),n);this.reduction=u([])}}return this},sum:function(e,t){var a=(this.reduction||this).filter(u.validity.settings.elementSupport);return a.length&&e!=i(a)&&(h(a,t||o(u.validity.messages.sum,{sum:e})),this.reduction=u([])),this},sumMax:function(e,t){var a=(this.reduction||this).filter(u.validity.settings.elementSupport);return a.length&&e<i(a)&&(h(a,t||o(u.validity.messages.sumMax,{max:e})),this.reduction=u([])),this},sumMin:function(e,t){var a=(this.reduction||this).filter(u.validity.settings.elementSupport);return a.length&&e>i(a)&&(h(a,t||o(u.validity.messages.sumMin,{min:e})),this.reduction=u([])),this},radioChecked:function(e,t){var a=(this.reduction||this).filter(u.validity.settings.elementSupport);a.is(":radio")&&a.find(":checked").val()!=e&&h(a,t||u.validity.messages.radioChecked)},radioNotChecked:function(e,t){var a=(this.reduction||this).filter(u.validity.settings.elementSupport);a.is(":radio")&&a.filter(":checked").val()==e&&h(a,t||u.validity.messages.radioChecked)},checkboxChecked:function(e){return n(this,function(e){return!u(e).is(":checkbox")||u(e).is(":checked")},e||u.validity.messages.nonHtml)},assert:function(e,t){var a=this.reduction||this;if(a.length){if(u.isFunction(e))return n(this,e,t||u.validity.messages.generic);e||(h(a,t||u.validity.messages.generic),this.reduction=u([]))}return this},fail:function(e){return this.assert(!1,e)}}),t={validate:n,addToReport:a,raiseError:r,raiseAggregateError:h,numericSum:i,format:o,infer:s,capitalize:l}}(jQuery),function(n){n.validity.outputs.tooltip={tooltipClass:"validity-tooltip",start:function(){n("."+n.validity.outputs.tooltip.tooltipClass).remove()},end:function(e){!e.valid&&n.validity.settings.scrollTo&&n(document).scrollTop(n("."+n.validity.outputs.tooltip.tooltipClass).offset().top)},raise:function(e,t){var a=e.offset();a.left+=e.width()+18,a.top+=8;var i=n('<div class="validity-tooltip">'+t+'<div class="validity-tooltip-outer"><div class="validity-tooltip-inner"></div></div></div>').click(function(){e.focus(),n(this).fadeOut()}).css(a).hide().appendTo("body").fadeIn();n.validity.settings.fadeOutTooltipsOnFocus&&e.on("focus",function(){i.fadeOut()})},raiseAggregate:function(e,t){e.length&&this.raise(e.filter(":last"),t)}}}(jQuery),function(i){function n(e){return e.attr("id").length?e.attr("id"):e.attr("name")}i.validity.outputs.label={cssClass:"error",start:function(){i("."+i.validity.outputs.label.cssClass).remove()},end:function(e){!e.valid&&i.validity.settings.scrollTo&&(location.hash=i("."+i.validity.outputs.label.cssClass+":eq(0)").attr("for"))},raise:function(e,t){var a="."+i.validity.outputs.label.cssClass+"[for='"+n(e)+"']";i(a).length?i(a).text(t):i("<label/>").attr("for",n(e)).addClass(i.validity.outputs.label.cssClass).text(t).click(function(){e.length&&e[0].select()}).insertAfter(e)},raiseAggregate:function(e,t){e.length&&this.raise(i(e.get(e.length-1)),t)}}}(jQuery),function(i){i.validity.outputs.modal={start:function(){i(".validity-modal-msg").remove()},end:function(e){!e.valid&&i.validity.settings.scrollTo&&(location.hash=i(".validity-modal-msg:eq(0)").attr("id"))},raise:function(e,t){if(e.length){var a=e.offset();e.get(0),a={left:parseInt(a.left+e.width()+4,10)+"px",top:parseInt(a.top-10,10)+"px"},i("<div/>").addClass("validity-modal-msg").css(a).text(t).click(i.validity.settings.modalErrorsClickable?function(){i(this).remove()}:null).appendTo("body")}},raiseAggregate:function(e,t){e.length&&this.raise(i(e.get(e.length-1)),t)}}}(jQuery),function(t){var a=[];t.validity.outputs.summary={start:function(){t(".validity-erroneous").removeClass("validity-erroneous"),a=[]},end:function(){if(t(".validity-summary-container").stop().hide().find("ul").html(""),a.length){for(var e=0;e<a.length;++e)t("<li/>").text(a[e]).appendTo(".validity-summary-container ul");t(".validity-summary-container").show(),t.validity.settings.scrollTo&&(location.hash=t(".validity-erroneous:eq(0)").attr("id"))}},raise:function(e,t){a.push(t),e.addClass("validity-erroneous")},raiseAggregate:function(e,t){this.raise(e,t)},container:function(){document.write('<div class="validity-summary-container">The form didn\'t submit for the following reason(s):<ul></ul></div>')}}}(jQuery),function(o,i,s,l){var c=o(i);o.fn.lazyload=function(e){var t,n=this,r={threshold:0,failure_limit:0,event:"scroll",effect:"show",container:i,data_attribute:"original",skip_invisible:!0,appear:null,load:null};function a(){var t=0;n.each(function(){var e=o(this);if(!r.skip_invisible||e.is(":visible"))if(o.abovethetop(this,r)||o.leftofbegin(this,r));else if(o.belowthefold(this,r)||o.rightoffold(this,r)){if(++t>r.failure_limit)return!1}else e.trigger("appear"),t=0})}return e&&(l!==e.failurelimit&&(e.failure_limit=e.failurelimit,delete e.failurelimit),l!==e.effectspeed&&(e.effect_speed=e.effectspeed,delete e.effectspeed),o.extend(r,e)),t=r.container===l||r.container===i?c:o(r.container),0===r.event.indexOf("scroll")&&t.bind(r.event,function(e){return a()}),this.each(function(){var a=this,i=o(a);a.loaded=!1,i.one("appear",function(){if(!this.loaded){if(r.appear){var e=n.length;r.appear.call(a,e,r)}o("<img />").bind("load",function(){i.hide().attr("src",i.data(r.data_attribute))[r.effect](r.effect_speed),a.loaded=!0;var e=o.grep(n,function(e){return!e.loaded});if(n=o(e),r.load){var t=n.length;r.load.call(a,t,r)}}).attr("src",i.data(r.data_attribute))}}),0!==r.event.indexOf("scroll")&&i.bind(r.event,function(e){a.loaded||i.trigger("appear")})}),c.bind("resize",function(e){a()}),/iphone|ipod|ipad.*os 5/gi.test(navigator.appVersion)&&c.bind("pageshow",function(e){e.originalEvent&&e.originalEvent.persisted&&n.each(function(){o(this).trigger("appear")})}),o(s).ready(function(){a()}),this},o.belowthefold=function(e,t){return(t.container===l||t.container===i?c.height()+c.scrollTop():o(t.container).offset().top+o(t.container).height())<=o(e).offset().top-t.threshold},o.rightoffold=function(e,t){return(t.container===l||t.container===i?c.width()+c.scrollLeft():o(t.container).offset().left+o(t.container).width())<=o(e).offset().left-t.threshold},o.abovethetop=function(e,t){return(t.container===l||t.container===i?c.scrollTop():o(t.container).offset().top)>=o(e).offset().top+t.threshold+o(e).height()},o.leftofbegin=function(e,t){return(t.container===l||t.container===i?c.scrollLeft():o(t.container).offset().left)>=o(e).offset().left+t.threshold+o(e).width()},o.inviewport=function(e,t){return!(o.rightoffold(e,t)||o.leftofbegin(e,t)||o.belowthefold(e,t)||o.abovethetop(e,t))},o.extend(o.expr[":"],{"below-the-fold":function(e){return o.belowthefold(e,{threshold:0})},"above-the-top":function(e){return!o.belowthefold(e,{threshold:0})},"right-of-screen":function(e){return o.rightoffold(e,{threshold:0})},"left-of-screen":function(e){return!o.rightoffold(e,{threshold:0})},"in-viewport":function(e){return o.inviewport(e,{threshold:0})},"above-the-fold":function(e){return!o.belowthefold(e,{threshold:0})},"right-of-fold":function(e){return o.rightoffold(e,{threshold:0})},"left-of-fold":function(e){return!o.rightoffold(e,{threshold:0})}})}(jQuery,window,document),function(T){T.extend({tablesorter:new function(){function S(){var e=arguments[0],t=1<arguments.length?Array.prototype.slice.call(arguments):e;"undefined"!=typeof console&&void 0!==console.log?console[/error/i.test(e)?"error":/warn/i.test(e)?"warn":"log"](t):alert(t)}function C(e,t){S(e+" ("+((new Date).getTime()-t.getTime())+"ms)")}function y(e){for(var t in e)return!1;return!0}function k(e,t,a){if(!t)return"";var i,n=e.config,r=n.textExtraction||"",o="basic"===r?T(t).attr(n.textAttribute)||t.textContent||t.innerText||T(t).text()||"":"function"==typeof r?r(t,e,a):"function"==typeof(i=A.getColumnData(e,r,a))?i(t,e,a):t.textContent||t.innerText||T(t).text()||"";return T.trim(o)}function h(e){var t,a,i,n,r,o,s,l,c,d,u,h=e.config,p=h.$tbodies=h.$table.children("tbody:not(."+h.cssInfoBlock+")"),f=0,g="",m=p.length;if(0===m)return h.debug?S("Warning: *Empty table!* Not building a parser cache"):"";for(h.debug&&(u=new Date,S("Detecting parsers for each column")),t=[],a=[];f<m;){if((i=p[f].rows)[f])for(n=h.columns,r=0;r<n;r++){if(o=h.$headers.filter('[data-column="'+r+'"]:last'),s=A.getColumnData(e,h.headers,r),d=A.getParserById(A.getData(o,s,"extractor")),c=A.getParserById(A.getData(o,s,"sorter")),l="false"===A.getData(o,s,"parser"),h.empties[r]=(A.getData(o,s,"empty")||h.emptyTo||(h.emptyToBottom?"bottom":"top")).toLowerCase(),h.strings[r]=(A.getData(o,s,"string")||h.stringTo||"max").toLowerCase(),l&&(c=A.getParserById("no-parser")),d||(d=!1),!c)e:{o=e,s=i,l=-1,c=r;var v=void 0,y=A.parsers.length,b=!1,w="";for(v=!0;""===w&&v;)s[++l]?(w=k(o,b=s[l].cells[c],c),o.config.debug&&S("Checking if value was empty on row "+l+", column: "+c+': "'+w+'"')):v=!1;for(;0<=--y;)if((v=A.parsers[y])&&"text"!==v.id&&v.is&&v.is(w,o,b)){c=v;break e}c=A.getParserById("text")}h.debug&&(g+="column:"+r+"; extractor:"+d.id+"; parser:"+c.id+"; string:"+h.strings[r]+"; empty: "+h.empties[r]+"\n"),a[r]=c,t[r]=d}f+=a.length?m:1}h.debug&&(S(g||"No parsers detected"),C("Completed detecting parsers",u)),h.parsers=a,h.extractors=t}function g(e){var t,a,i,n,r,o,s,l,c,d,u,h=e.config,p=h.$table.children("tbody"),f=h.extractors,g=h.parsers;if(h.cache={},h.totalRows=0,!g)return h.debug?S("Warning: *Empty table!* Not building a cache"):"";for(h.debug&&(l=new Date),h.showProcessing&&A.isProcessing(e,!0),r=0;r<p.length;r++)if(u=[],t=h.cache[r]={normalized:[]},!p.eq(r).hasClass(h.cssInfoBlock)){for(c=p[r]&&p[r].rows.length||0,i=0;i<c;++i)if(d={child:[]},s=[],(o=T(p[r].rows[i])).hasClass(h.cssChildRow)&&0!==i)a=t.normalized.length-1,t.normalized[a][h.columns].$row=t.normalized[a][h.columns].$row.add(o),o.prev().hasClass(h.cssChildRow)||o.prev().addClass(A.css.cssHasChild),d.child[a]=T.trim(o[0].textContent||o[0].innerText||o.text()||"");else{for(d.$row=o,d.order=i,n=0;n<h.columns;++n)void 0===g[n]?h.debug&&S("No parser found for cell:",o[0].cells[n],"does it have a header?"):(a=k(e,o[0].cells[n],n),a=void 0===f[n].id?a:f[n].format(a,e,o[0].cells[n],n),a="no-parser"===g[n].id?"":g[n].format(a,e,o[0].cells[n],n),s.push(h.ignoreCase&&"string"==typeof a?a.toLowerCase():a),"numeric"===(g[n].type||"").toLowerCase()&&(u[n]=Math.max(Math.abs(a)||0,u[n]||0)));s[h.columns]=d,t.normalized.push(s)}t.colMax=u,h.totalRows+=t.normalized.length}h.showProcessing&&A.isProcessing(e),h.debug&&C("Building cache for "+c+" rows",l)}function m(e,t){var a,i,n,r,o,s,l=e.config,c=l.widgetOptions,d=e.tBodies,u=[],h=l.cache;if(y(h))return l.appender?l.appender(e,u):e.isUpdating?l.$table.trigger("updateComplete",e):"";for(l.debug&&(s=new Date),o=0;o<d.length;o++)if((a=T(d[o])).length&&!a.hasClass(l.cssInfoBlock)){for(n=A.processTbody(e,a,!0),i=(a=h[o].normalized).length,r=0;r<i;r++)u.push(a[r][l.columns].$row),l.appender&&(!l.pager||l.pager.removeRows&&c.pager_removeRows||l.pager.ajax)||n.append(a[r][l.columns].$row);A.processTbody(e,n,!1)}l.appender&&l.appender(e,u),l.debug&&C("Rebuilt table",s),t||l.appender||A.applyWidget(e),e.isUpdating&&l.$table.trigger("updateComplete",e)}function c(e){return/^d/i.test(e)||1===e}function d(t){var a,i,n,r,o,s,e,l=t.config;l.headerList=[],l.headerContent=[],l.debug&&(e=new Date),l.columns=A.computeColumnIndex(l.$table.children("thead, tfoot").children("tr")),r=l.cssIcon?'<i class="'+(l.cssIcon===A.css.icon?A.css.icon:l.cssIcon+" "+A.css.icon)+'"></i>':"",l.$headers=T(t).find(l.selectorHeaders).each(function(e){i=T(this),a=A.getColumnData(t,l.headers,e,!0),l.headerContent[e]=T(this).html(),""!==l.headerTemplate&&(o=l.headerTemplate.replace(/\{content\}/g,T(this).html()).replace(/\{icon\}/g,r),l.onRenderTemplate&&(n=l.onRenderTemplate.apply(i,[e,o]))&&"string"==typeof n&&(o=n),T(this).html('<div class="'+A.css.headerIn+'">'+o+"</div>")),l.onRenderHeader&&l.onRenderHeader.apply(i,[e]),this.column=parseInt(T(this).attr("data-column"),10),this.order=c(A.getData(i,a,"sortInitialOrder")||l.sortInitialOrder)?[1,0,2]:[0,1,2],this.count=-1,this.lockedOrder=!1,void 0!==(s=A.getData(i,a,"lockedOrder")||!1)&&!1!==s&&(this.order=this.lockedOrder=c(s)?[1,1,1]:[0,0,0]),i.addClass(A.css.header+" "+l.cssHeader),l.headerList[e]=this,i.parent().addClass(A.css.headerRow+" "+l.cssHeaderRow).attr("role","row"),l.tabIndex&&i.attr("tabindex",0)}).attr({scope:"col",role:"columnheader"}),b(t),l.debug&&(C("Built headers:",e),S(l.$headers))}function v(e,t,a){var i=e.config;i.$table.find(i.selectorRemove).remove(),h(e),g(e),_(i.$table,t,a)}function b(a){var i,n,r,o=a.config;o.$headers.each(function(e,t){n=T(t),r=A.getColumnData(a,o.headers,e,!0),i="false"===A.getData(t,r,"sorter")||"false"===A.getData(t,r,"parser"),t.sortDisabled=i,n[i?"addClass":"removeClass"]("sorter-false").attr("aria-disabled",""+i),a.id&&(i?n.removeAttr("aria-controls"):n.attr("aria-controls",a.id))})}function w(e){var t,a,i=e.config,n=i.sortList,r=n.length,o=A.css.sortNone+" "+i.cssNone,s=[A.css.sortAsc+" "+i.cssAsc,A.css.sortDesc+" "+i.cssDesc],l=["ascending","descending"],c=T(e).find("tfoot tr").children().add(i.$extraHeaders).removeClass(s.join(" "));for(i.$headers.removeClass(s.join(" ")).addClass(o).attr("aria-sort","none"),t=0;t<r;t++)if(2!==n[t][1]&&(e=i.$headers.not(".sorter-false").filter('[data-column="'+n[t][0]+'"]'+(1===r?":last":""))).length){for(a=0;a<e.length;a++)e[a].sortDisabled||e.eq(a).removeClass(o).addClass(s[n[t][1]]).attr("aria-sort",l[n[t][1]]);c.length&&c.filter('[data-column="'+n[t][0]+'"]').removeClass(o).addClass(s[n[t][1]])}i.$headers.not(".sorter-false").each(function(){var e=T(this),t=this.order[(this.count+1)%(i.sortReset?3:2)];t=e.text()+": "+A.language[e.hasClass(A.css.sortAsc)?"sortAsc":e.hasClass(A.css.sortDesc)?"sortDesc":"sortNone"]+A.language[0===t?"nextAsc":1===t?"nextDesc":"nextNone"];e.attr("aria-label",t)})}function x(n){var r,e,o,s,t,l,c,d,u,h,p=0,f=n.config,g=f.textSorter||"",m=f.sortList,v=m.length,a=n.tBodies.length;if(!f.serverSideSorting&&!y(f.cache)){for(f.debug&&(t=new Date),e=0;e<a;e++)l=f.cache[e].colMax,f.cache[e].normalized.sort(function(e,t){for(r=0;r<v&&(s=m[r][0],c=m[r][1],p=0===c,!f.sortStable||e[s]!==t[s]||1!==v);r++)if(d=(o=/n/i.test((a=f.parsers,i=s,a&&a[i]&&a[i].type||"")))&&f.strings[s]?(o="boolean"==typeof f.string[f.strings[s]]?(p?1:-1)*(f.string[f.strings[s]]?-1:1):f.strings[s]&&f.string[f.strings[s]]||0,f.numberSorter?f.numberSorter(e[s],t[s],p,l[s],n):A["sortNumeric"+(p?"Asc":"Desc")](e[s],t[s],o,l[s],s,n)):(u=p?e:t,h=p?t:e,"function"==typeof g?g(u[s],h[s],p,s,n):"object"==typeof g&&g.hasOwnProperty(s)?g[s](u[s],h[s],p,s,n):A["sortNatural"+(p?"Asc":"Desc")](e[s],t[s],s,n,f)))return d;var a,i;return e[f.columns].order-t[f.columns].order});f.debug&&C("Sorting on "+m.toString()+" and dir "+c+" time",t)}}function n(e,t){var a=e[0];a.isUpdating&&e.trigger("updateComplete",a),T.isFunction(t)&&t(e[0])}function _(e,t,a){var i=e[0].config.sortList;!1!==t&&!e[0].isProcessing&&i.length?e.trigger("sorton",[i,function(){n(e,a)},!0]):(n(e,a),A.applyWidget(e[0],!1))}function M(p){var u=p.config,f=u.$table;f.unbind("sortReset update updateRows updateCell updateAll addRows updateComplete sorton appendCache updateCache applyWidgetId applyWidgets refreshWidgets destroy mouseup mouseleave ".split(" ").join(u.namespace+" ")).bind("sortReset"+u.namespace,function(e,t){e.stopPropagation(),u.sortList=[],w(p),x(p),m(p),T.isFunction(t)&&t(p)}).bind("updateAll"+u.namespace,function(e,t,a){e.stopPropagation(),p.isUpdating=!0,A.refreshWidgets(p,!0,!0),A.restoreHeaders(p),d(p),A.bindEvents(p,u.$headers,!0),M(p),v(p,t,a)}).bind("update"+u.namespace+" updateRows"+u.namespace,function(e,t,a){e.stopPropagation(),p.isUpdating=!0,b(p),v(p,t,a)}).bind("updateCell"+u.namespace,function(e,t,a,i){var n,r,o;e.stopPropagation(),p.isUpdating=!0,f.find(u.selectorRemove).remove(),r=f.find("tbody"),o=T(t),e=r.index(T.fn.closest?o.closest("tbody"):o.parents("tbody").filter(":first")),n=T.fn.closest?o.closest("tr"):o.parents("tr").filter(":first"),t=o[0],r.length&&0<=e&&(r=r.eq(e).find("tr").index(n),o=o.index(),u.cache[e].normalized[r][u.columns].$row=n,n=void 0===u.extractors[o].id?k(p,t,o):u.extractors[o].format(k(p,t,o),p,t,o),t="no-parser"===u.parsers[o].id?"":u.parsers[o].format(n,p,t,o),u.cache[e].normalized[r][o]=u.ignoreCase&&"string"==typeof t?t.toLowerCase():t,"numeric"===(u.parsers[o].type||"").toLowerCase()&&(u.cache[e].colMax[o]=Math.max(Math.abs(t)||0,u.cache[e].colMax[o]||0)),_(f,a,i))}).bind("addRows"+u.namespace,function(e,t,a,i){if(e.stopPropagation(),p.isUpdating=!0,y(u.cache))b(p),v(p,a,i);else{var n,r,o,s,l,c=(t=T(t).attr("role","row")).filter("tr").length,d=f.find("tbody").index(t.parents("tbody").filter(":first"));for(u.parsers&&u.parsers.length||h(p),e=0;e<c;e++){for(r=t[e].cells.length,l=[],s={child:[],$row:t.eq(e),order:u.cache[d].normalized.length},n=0;n<r;n++)o=void 0===u.extractors[n].id?k(p,t[e].cells[n],n):u.extractors[n].format(k(p,t[e].cells[n],n),p,t[e].cells[n],n),o="no-parser"===u.parsers[n].id?"":u.parsers[n].format(o,p,t[e].cells[n],n),l[n]=u.ignoreCase&&"string"==typeof o?o.toLowerCase():o,"numeric"===(u.parsers[n].type||"").toLowerCase()&&(u.cache[d].colMax[n]=Math.max(Math.abs(l[n])||0,u.cache[d].colMax[n]||0));l.push(s),u.cache[d].normalized.push(l)}_(f,a,i)}}).bind("updateComplete"+u.namespace,function(){p.isUpdating=!1}).bind("sorton"+u.namespace,function(e,t,a,i){var n,r,o,s,l,c,d,u,h=p.config;e.stopPropagation(),f.trigger("sortStart",this),n=t,d=p.config,u=n||d.sortList,d.sortList=[],T.each(u,function(e,t){if(l=parseInt(t[0],10),s=d.$headers.filter('[data-column="'+l+'"]:last')[0]){switch(o=(o=(""+t[1]).match(/^(1|d|s|o|n)/))?o[0]:""){case"1":case"d":o=1;break;case"s":o=c||0;break;case"o":r=s.order[(c||0)%(d.sortReset?3:2)],o=0===r?1:1===r?0:2;break;case"n":s.count+=1,o=s.order[s.count%(d.sortReset?3:2)];break;default:o=0}c=0===e?o:c,r=[l,parseInt(o,10)||0],d.sortList.push(r),o=T.inArray(r[1],s.order),s.count=0<=o?o:r[1]%(d.sortReset?3:2)}}),w(p),h.delayInit&&y(h.cache)&&g(p),f.trigger("sortBegin",this),x(p),m(p,i),f.trigger("sortEnd",this),A.applyWidget(p),T.isFunction(a)&&a(p)}).bind("appendCache"+u.namespace,function(e,t,a){e.stopPropagation(),m(p,a),T.isFunction(t)&&t(p)}).bind("updateCache"+u.namespace,function(e,t){u.parsers&&u.parsers.length||h(p),g(p),T.isFunction(t)&&t(p)}).bind("applyWidgetId"+u.namespace,function(e,t){e.stopPropagation(),A.getWidgetById(t).format(p,u,u.widgetOptions)}).bind("applyWidgets"+u.namespace,function(e,t){e.stopPropagation(),A.applyWidget(p,t)}).bind("refreshWidgets"+u.namespace,function(e,t,a){e.stopPropagation(),A.refreshWidgets(p,t,a)}).bind("destroy"+u.namespace,function(e,t,a){e.stopPropagation(),A.destroy(p,t,a)}).bind("resetToLoadState"+u.namespace,function(){A.refreshWidgets(p,!0,!0),u=T.extend(!0,A.defaults,u.originalSettings),p.hasInitialized=!1,A.setup(p,u)})}var A=this;A.version="2.17.8",A.parsers=[],A.widgets=[],A.defaults={theme:"default",widthFixed:!1,showProcessing:!1,headerTemplate:"{content}",onRenderTemplate:null,onRenderHeader:null,cancelSelection:!0,tabIndex:!0,dateFormat:"mmddyyyy",sortMultiSortKey:"shiftKey",sortResetKey:"ctrlKey",usNumberFormat:!0,delayInit:!1,serverSideSorting:!1,headers:{},ignoreCase:!0,sortForce:null,sortList:[],sortAppend:null,sortStable:!1,sortInitialOrder:"asc",sortLocaleCompare:!1,sortReset:!1,sortRestart:!1,emptyTo:"bottom",stringTo:"max",textExtraction:"basic",textAttribute:"data-text",textSorter:null,numberSorter:null,widgets:[],widgetOptions:{zebra:["even","odd"]},initWidgets:!0,initialized:null,tableClass:"",cssAsc:"",cssDesc:"",cssNone:"",cssHeader:"",cssHeaderRow:"",cssProcessing:"",cssChildRow:"tablesorter-childRow",cssIcon:"tablesorter-icon",cssInfoBlock:"tablesorter-infoOnly",selectorHeaders:"> thead th, > thead td",selectorSort:"th, td",selectorRemove:".remove-me",debug:!1,headerList:[],empties:{},strings:{},parsers:[]},A.css={table:"tablesorter",cssHasChild:"tablesorter-hasChildRow",childRow:"tablesorter-childRow",header:"tablesorter-header",headerRow:"tablesorter-headerRow",headerIn:"tablesorter-header-inner",icon:"tablesorter-icon",info:"tablesorter-infoOnly",processing:"tablesorter-processing",sortAsc:"tablesorter-headerAsc",sortDesc:"tablesorter-headerDesc",sortNone:"tablesorter-headerUnSorted"},A.language={sortAsc:"Ascending sort applied, ",sortDesc:"Descending sort applied, ",sortNone:"No sort applied, ",nextAsc:"activate to apply an ascending sort",nextDesc:"activate to apply a descending sort",nextNone:"activate to remove the sort"},A.log=S,A.benchmark=C,A.construct=function(t){return this.each(function(){var e=T.extend(!0,{},A.defaults,t);e.originalSettings=t,!this.hasInitialized&&A.buildTable&&"TABLE"!==this.tagName?A.buildTable(this,e):A.setup(this,e)})},A.setup=function(t,a){if(!t||!t.tHead||0===t.tBodies.length||!0===t.hasInitialized)return a.debug?S("ERROR: stopping initialization! No table, thead, tbody or tablesorter has already been initialized"):"";var e,i,n,r,o,s="",l=T(t),c=T.metadata;t.hasInitialized=!1,t.isProcessing=!0,t.config=a,T.data(t,"tablesorter",a),a.debug&&T.data(t,"startoveralltimer",new Date),a.supportsDataObject=((e=T.fn.jquery.split("."))[0]=parseInt(e[0],10),1<e[0]||1===e[0]&&4<=parseInt(e[1],10)),a.string={max:1,min:-1,emptymin:1,emptymax:-1,zero:0,none:0,null:0,top:!0,bottom:!1},a.emptyTo=a.emptyTo.toLowerCase(),a.stringTo=a.stringTo.toLowerCase(),/tablesorter\-/.test(l.attr("class"))||(s=""!==a.theme?" tablesorter-"+a.theme:""),a.table=t,a.$table=l.addClass(A.css.table+" "+a.tableClass+s).attr("role","grid"),a.$headers=l.find(a.selectorHeaders),a.namespace=a.namespace?"."+a.namespace.replace(/\W/g,""):".tablesorter"+Math.random().toString(16).slice(2),a.$table.children().children("tr").attr("role","row"),a.$tbodies=l.children("tbody:not(."+a.cssInfoBlock+")").attr({"aria-live":"polite","aria-relevant":"all"}),a.$table.find("caption").length&&a.$table.attr("aria-labelledby","theCaption"),a.widgetInit={},a.textExtraction=a.$table.attr("data-text-extraction")||a.textExtraction||"basic",d(t),(o=(i=t).config).widthFixed&&0===o.$table.find("colgroup").length&&(n=T("<colgroup>"),r=T(i).width(),T(i.tBodies).not("."+o.cssInfoBlock).find("tr:first").children(":visible").each(function(){n.append(T("<col>").css("width",parseInt(T(this).width()/r*1e3,10)/10+"%"))}),o.$table.prepend(n)),h(t),a.totalRows=0,a.delayInit||g(t),A.bindEvents(t,a.$headers,!0),M(t),a.supportsDataObject&&void 0!==l.data().sortlist?a.sortList=l.data().sortlist:c&&l.metadata()&&l.metadata().sortlist&&(a.sortList=l.metadata().sortlist),A.applyWidget(t,!0),0<a.sortList.length?l.trigger("sorton",[a.sortList,{},!a.initWidgets,!0]):(w(t),a.initWidgets&&A.applyWidget(t,!1)),a.showProcessing&&l.unbind("sortBegin"+a.namespace+" sortEnd"+a.namespace).bind("sortBegin"+a.namespace+" sortEnd"+a.namespace,function(e){clearTimeout(a.processTimer),A.isProcessing(t),"sortBegin"===e.type&&(a.processTimer=setTimeout(function(){A.isProcessing(t,!0)},500))}),t.hasInitialized=!0,t.isProcessing=!1,a.debug&&A.benchmark("Overall initialization time",T.data(t,"startoveralltimer")),l.trigger("tablesorter-initialized",t),"function"==typeof a.initialized&&a.initialized(t)},A.getColumnData=function(e,t,a,i){if(null!=t){var n,r=(e=T(e)[0]).config;if(t[a])return i?t[a]:t[r.$headers.index(r.$headers.filter('[data-column="'+a+'"]:last'))];for(n in t)if("string"==typeof n&&(e=i?r.$headers.eq(a).filter(n):r.$headers.filter('[data-column="'+a+'"]:last').filter(n)).length)return t[n]}},A.computeColumnIndex=function(e){var t,a,i,n,r,o,s,l,c,d,u=[],h=0;for(t=0;t<e.length;t++)for(r=e[t].cells,a=0;a<r.length;a++){for(i=r[a],n=T(i),o=i.parentNode.rowIndex,n.index(),s=i.rowSpan||1,l=i.colSpan||1,void 0===u[o]&&(u[o]=[]),i=0;i<u[o].length+1;i++)if(void 0===u[o][i]){c=i;break}for(h=Math.max(c,h),n.attr({"data-column":c}),i=o;i<o+s;i++)for(void 0===u[i]&&(u[i]=[]),d=u[i],n=c;n<c+l;n++)d[n]="x"}return h+1},A.isProcessing=function(e,t,a){var i=(e=T(e))[0].config,n=a||e.find("."+A.css.header);t?(void 0!==a&&0<i.sortList.length&&(n=n.filter(function(){return!this.sortDisabled&&0<=A.isValueInArray(parseFloat(T(this).attr("data-column")),i.sortList)})),e.add(n).addClass(A.css.processing+" "+i.cssProcessing)):e.add(n).removeClass(A.css.processing+" "+i.cssProcessing)},A.processTbody=function(e,t,a){if(e=T(e)[0],a)return e.isProcessing=!0,t.before('<span class="tablesorter-savemyplace"/>'),T.fn.detach?t.detach():t.remove();a=T(e).find("span.tablesorter-savemyplace"),t.insertAfter(a),a.remove(),e.isProcessing=!1},A.clearTableBody=function(e){T(e)[0].config.$tbodies.children().detach()},A.bindEvents=function(i,n,e){var r,o=(i=T(i)[0]).config;!0!==e&&(o.$extraHeaders=o.$extraHeaders?o.$extraHeaders.add(n):n),n.find(o.selectorSort).add(n.filter(o.selectorSort)).unbind(["mousedown","mouseup","sort","keyup",""].join(o.namespace+" ")).bind(["mousedown","mouseup","sort","keyup",""].join(o.namespace+" "),function(e,t){var a;if(a=e.type,!(1!==(e.which||e.button)&&!/sort|keyup/.test(a)||"keyup"===a&&13!==e.which||"mouseup"===a&&!0!==t&&250<(new Date).getTime()-r)){if("mousedown"===a)return r=(new Date).getTime(),/(input|select|button|textarea)/i.test(e.target.tagName)?"":!o.cancelSelection;o.delayInit&&y(o.cache)&&g(i),a=T.fn.closest?T(this).closest("th, td")[0]:/TH|TD/.test(this.tagName)?this:T(this).parents("th, td")[0],(a=o.$headers[n.index(a)]).sortDisabled||function e(t,a,i){if(t.isUpdating)return setTimeout(function(){e(t,a,i)},50);var n,r,o,s,l=t.config,c=!i[l.sortMultiSortKey],d=l.$table;if(d.trigger("sortStart",t),a.count=i[l.sortResetKey]?2:(a.count+1)%(l.sortReset?3:2),l.sortRestart&&(r=a,l.$headers.each(function(){this===r||!c&&T(this).is("."+A.css.sortDesc+",."+A.css.sortAsc)||(this.count=-1)})),r=a.column,c){if(l.sortList=[],null!==l.sortForce)for(n=l.sortForce,o=0;o<n.length;o++)n[o][0]!==r&&l.sortList.push(n[o]);if((n=a.order[a.count])<2&&(l.sortList.push([r,n]),1<a.colSpan))for(o=1;o<a.colSpan;o++)l.sortList.push([r+o,n])}else{if(l.sortAppend&&1<l.sortList.length)for(o=0;o<l.sortAppend.length;o++)0<=(s=A.isValueInArray(l.sortAppend[o][0],l.sortList))&&l.sortList.splice(s,1);if(0<=A.isValueInArray(r,l.sortList))for(o=0;o<l.sortList.length;o++)s=l.sortList[o],n=l.$headers.filter('[data-column="'+s[0]+'"]:last')[0],s[0]===r&&(s[1]=n.order[a.count],2===s[1]&&(l.sortList.splice(o,1),n.count=-1));else if((n=a.order[a.count])<2&&(l.sortList.push([r,n]),1<a.colSpan))for(o=1;o<a.colSpan;o++)l.sortList.push([r+o,n])}if(null!==l.sortAppend)for(n=l.sortAppend,o=0;o<n.length;o++)n[o][0]!==r&&l.sortList.push(n[o]);d.trigger("sortBegin",t),setTimeout(function(){w(t),x(t),m(t),d.trigger("sortEnd",t)},1)}(i,a,e)}}),o.cancelSelection&&n.attr("unselectable","on").bind("selectstart",!1).css({"user-select":"none",MozUserSelect:"none"})},A.restoreHeaders=function(e){var t=T(e)[0].config;t.$table.find(t.selectorHeaders).each(function(e){T(this).find("."+A.css.headerIn).length&&T(this).html(t.headerContent[e])})},A.destroy=function(e,t,a){if((e=T(e)[0]).hasInitialized){A.refreshWidgets(e,!0,!0);var i=T(e),n=e.config,r=i.find("thead:first"),o=r.find("tr."+A.css.headerRow).removeClass(A.css.headerRow+" "+n.cssHeaderRow),s=i.find("tfoot:first > tr").children("th, td");!1===t&&0<=T.inArray("uitheme",n.widgets)&&(i.trigger("applyWidgetId",["uitheme"]),i.trigger("applyWidgetId",["zebra"])),r.find("tr").not(o).remove(),i.removeData("tablesorter").unbind("sortReset update updateAll updateRows updateCell addRows updateComplete sorton appendCache updateCache applyWidgetId applyWidgets refreshWidgets destroy mouseup mouseleave keypress sortBegin sortEnd resetToLoadState ".split(" ").join(n.namespace+" ")),n.$headers.add(s).removeClass([A.css.header,n.cssHeader,n.cssAsc,n.cssDesc,A.css.sortAsc,A.css.sortDesc,A.css.sortNone].join(" ")).removeAttr("data-column").removeAttr("aria-label").attr("aria-disabled","true"),o.find(n.selectorSort).unbind(["mousedown","mouseup","keypress",""].join(n.namespace+" ")),A.restoreHeaders(e),i.toggleClass(A.css.table+" "+n.tableClass+" tablesorter-"+n.theme,!1===t),e.hasInitialized=!1,delete e.config.cache,"function"==typeof a&&a(e)}},A.regex={chunk:/(^([+\-]?(?:0|[1-9]\d*)(?:\.\d*)?(?:[eE][+\-]?\d+)?)?$|^0x[0-9a-f]+$|\d+)/gi,chunks:/(^\\0|\\0$)/,hex:/^0x[0-9a-f]+$/i},A.sortNatural=function(e,t){if(e===t)return 0;var a,i,n,r,o,s;if((i=A.regex).hex.test(t)){if((a=parseInt(e.match(i.hex),16))<(n=parseInt(t.match(i.hex),16)))return-1;if(n<a)return 1}for(a=e.replace(i.chunk,"\\0$1\\0").replace(i.chunks,"").split("\\0"),i=t.replace(i.chunk,"\\0$1\\0").replace(i.chunks,"").split("\\0"),s=Math.max(a.length,i.length),o=0;o<s;o++){if(n=isNaN(a[o])?a[o]||0:parseFloat(a[o])||0,r=isNaN(i[o])?i[o]||0:parseFloat(i[o])||0,isNaN(n)!==isNaN(r))return isNaN(n)?1:-1;if(typeof n!=typeof r&&(n+="",r+=""),n<r)return-1;if(r<n)return 1}return 0},A.sortNaturalAsc=function(e,t,a,i,n){return e===t?0:(a=n.string[n.empties[a]||n.emptyTo],""===e&&0!==a?"boolean"==typeof a?a?-1:1:-a||-1:""===t&&0!==a?"boolean"==typeof a?a?1:-1:a||1:A.sortNatural(e,t))},A.sortNaturalDesc=function(e,t,a,i,n){return e===t?0:(a=n.string[n.empties[a]||n.emptyTo],""===e&&0!==a?"boolean"==typeof a?a?-1:1:a||1:""===t&&0!==a?"boolean"==typeof a?a?1:-1:-a||-1:A.sortNatural(t,e))},A.sortText=function(e,t){return t<e?1:e<t?-1:0},A.getTextValue=function(e,t,a){if(a){var i=e?e.length:0,n=a+t;for(a=0;a<i;a++)n+=e.charCodeAt(a);return t*n}return 0},A.sortNumericAsc=function(e,t,a,i,n,r){return e===t?0:(n=(r=r.config).string[r.empties[n]||r.emptyTo],""===e&&0!==n?"boolean"==typeof n?n?-1:1:-n||-1:""===t&&0!==n?"boolean"==typeof n?n?1:-1:n||1:(isNaN(e)&&(e=A.getTextValue(e,a,i)),isNaN(t)&&(t=A.getTextValue(t,a,i)),e-t))},A.sortNumericDesc=function(e,t,a,i,n,r){return e===t?0:(n=(r=r.config).string[r.empties[n]||r.emptyTo],""===e&&0!==n?"boolean"==typeof n?n?-1:1:n||1:""===t&&0!==n?"boolean"==typeof n?n?1:-1:-n||-1:(isNaN(e)&&(e=A.getTextValue(e,a,i)),isNaN(t)&&(t=A.getTextValue(t,a,i)),t-e))},A.sortNumeric=function(e,t){return e-t},A.characterEquivalents={a:"",A:"",c:"",C:"",e:"",E:"",i:"",I:"",o:"",O:"",ss:"",SS:"",u:"",U:""},A.replaceAccents=function(e){var t,a="[",i=A.characterEquivalents;if(!A.characterRegex){for(t in A.characterRegexArray={},i)"string"==typeof t&&(a+=i[t],A.characterRegexArray[t]=new RegExp("["+i[t]+"]","g"));A.characterRegex=new RegExp(a+"]")}if(A.characterRegex.test(e))for(t in i)"string"==typeof t&&(e=e.replace(A.characterRegexArray[t],t));return e},A.isValueInArray=function(e,t){var a,i=t.length;for(a=0;a<i;a++)if(t[a][0]===e)return a;return-1},A.addParser=function(e){var t,a=A.parsers.length,i=!0;for(t=0;t<a;t++)A.parsers[t].id.toLowerCase()===e.id.toLowerCase()&&(i=!1);i&&A.parsers.push(e)},A.getParserById=function(e){if("false"==e)return!1;var t,a=A.parsers.length;for(t=0;t<a;t++)if(A.parsers[t].id.toLowerCase()===e.toString().toLowerCase())return A.parsers[t];return!1},A.addWidget=function(e){A.widgets.push(e)},A.hasWidget=function(e,t){return(e=T(e)).length&&e[0].config&&e[0].config.widgetInit[t]||!1},A.getWidgetById=function(e){var t,a,i=A.widgets.length;for(t=0;t<i;t++)if((a=A.widgets[t])&&a.hasOwnProperty("id")&&a.id.toLowerCase()===e.toLowerCase())return a},A.applyWidget=function(a,i){var e,t,n,r=(a=T(a)[0]).config,o=r.widgetOptions,s=[];!1!==i&&a.hasInitialized&&(a.isApplyingWidgets||a.isUpdating)||(r.debug&&(e=new Date),r.widgets.length&&(a.isApplyingWidgets=!0,r.widgets=T.grep(r.widgets,function(e,t){return T.inArray(e,r.widgets)===t}),T.each(r.widgets||[],function(e,t){(n=A.getWidgetById(t))&&n.id&&(n.priority||(n.priority=10),s[e]=n)}),s.sort(function(e,t){return e.priority<t.priority?-1:e.priority===t.priority?0:1}),T.each(s,function(e,t){t&&(!i&&r.widgetInit[t.id]||(r.widgetInit[t.id]=!0,t.hasOwnProperty("options")&&(o=a.config.widgetOptions=T.extend(!0,{},t.options,o)),t.hasOwnProperty("init")&&t.init(a,t,r,o)),!i&&t.hasOwnProperty("format")&&t.format(a,r,o,!1))})),setTimeout(function(){a.isApplyingWidgets=!1},0),r.debug&&(t=r.widgets.length,C("Completed "+(!0===i?"initializing ":"applying ")+t+" widget"+(1!==t?"s":""),e)))},A.refreshWidgets=function(e,t,a){var i,n=(e=T(e)[0]).config,r=n.widgets,o=A.widgets,s=o.length;for(i=0;i<s;i++)o[i]&&o[i].id&&(t||T.inArray(o[i].id,r)<0)&&(n.debug&&S('Refeshing widgets: Removing "'+o[i].id+'"'),o[i].hasOwnProperty("remove")&&n.widgetInit[o[i].id]&&(o[i].remove(e,n,n.widgetOptions),n.widgetInit[o[i].id]=!1));!0!==a&&A.applyWidget(e,t)},A.getData=function(e,t,a){var i,n,r="";return(e=T(e)).length?(i=!!T.metadata&&e.metadata(),n=" "+(e.attr("class")||""),void 0!==e.data(a)||void 0!==e.data(a.toLowerCase())?r+=e.data(a)||e.data(a.toLowerCase()):i&&void 0!==i[a]?r+=i[a]:t&&void 0!==t[a]?r+=t[a]:" "!==n&&n.match(" "+a+"-")&&(r=n.match(new RegExp("\\s"+a+"-([\\w-]+)"))[1]||""),T.trim(r)):""},A.formatFloat=function(e,t){return"string"!=typeof e||""===e?e:(e=(t&&t.config?!1!==t.config.usNumberFormat:void 0===t||t)?e.replace(/,/g,""):e.replace(/[\s|\.]/g,"").replace(/,/g,"."),/^\s*\([.\d]+\)/.test(e)&&(e=e.replace(/^\s*\(([.\d]+)\)/,"-$1")),a=parseFloat(e),isNaN(a)?T.trim(e):a);var a},A.isDigit=function(e){return!isNaN(e)||/^[\-+(]?\d+[)]?$/.test(e.toString().replace(/[,.'"\s]/g,""))}}});var c=T.tablesorter;T.fn.extend({tablesorter:c.construct}),c.addParser({id:"no-parser",is:function(){return!1},format:function(){return""},type:"text"}),c.addParser({id:"text",is:function(){return!0},format:function(e,t){var a=t.config;return e&&(e=T.trim(a.ignoreCase?e.toLocaleLowerCase():e),e=a.sortLocaleCompare?c.replaceAccents(e):e),e},type:"text"}),c.addParser({id:"digit",is:function(e){return c.isDigit(e)},format:function(e,t){var a=c.formatFloat((e||"").replace(/[^\w,. \-()]/g,""),t);return e&&"number"==typeof a?a:e?T.trim(e&&t.config.ignoreCase?e.toLocaleLowerCase():e):e},type:"numeric"}),c.addParser({id:"currency",is:function(e){return/^\(?\d+[\u00a3$\u20ac\u00a4\u00a5\u00a2?.]|[\u00a3$\u20ac\u00a4\u00a5\u00a2?.]\d+\)?$/.test((e||"").replace(/[+\-,. ]/g,""))},format:function(e,t){var a=c.formatFloat((e||"").replace(/[^\w,. \-()]/g,""),t);return e&&"number"==typeof a?a:e?T.trim(e&&t.config.ignoreCase?e.toLocaleLowerCase():e):e},type:"numeric"}),c.addParser({id:"ipAddress",is:function(e){return/^\d{1,3}[\.]\d{1,3}[\.]\d{1,3}[\.]\d{1,3}$/.test(e)},format:function(e,t){var a,i=e?e.split("."):"",n="",r=i.length;for(a=0;a<r;a++)n+=("00"+i[a]).slice(-3);return e?c.formatFloat(n,t):e},type:"numeric"}),c.addParser({id:"url",is:function(e){return/^(https?|ftp|file):\/\//.test(e)},format:function(e){return e?T.trim(e.replace(/(https?|ftp|file):\/\//,"")):e},parsed:!0,type:"text"}),c.addParser({id:"isoDate",is:function(e){return/^\d{4}[\/\-]\d{1,2}[\/\-]\d{1,2}/.test(e)},format:function(e,t){return e?c.formatFloat(""!==e?new Date(e.replace(/-/g,"/")).getTime()||e:"",t):e},type:"numeric"}),c.addParser({id:"percent",is:function(e){return/(\d\s*?%|%\s*?\d)/.test(e)&&e.length<15},format:function(e,t){return e?c.formatFloat(e.replace(/%/g,""),t):e},type:"numeric"}),c.addParser({id:"usLongDate",is:function(e){return/^[A-Z]{3,10}\.?\s+\d{1,2},?\s+(\d{4})(\s+\d{1,2}:\d{2}(:\d{2})?(\s+[AP]M)?)?$/i.test(e)||/^\d{1,2}\s+[A-Z]{3,10}\s+\d{4}/i.test(e)},format:function(e,t){return e?c.formatFloat(new Date(e.replace(/(\S)([AP]M)$/i,"$1 $2")).getTime()||e,t):e},type:"numeric"}),c.addParser({id:"shortDate",is:function(e){return/(^\d{1,2}[\/\s]\d{1,2}[\/\s]\d{4})|(^\d{4}[\/\s]\d{1,2}[\/\s]\d{1,2})/.test((e||"").replace(/\s+/g," ").replace(/[\-.,]/g,"/"))},format:function(e,t,a,i){if(e){var n=(a=t.config).$headers.filter("[data-column="+i+"]:last");i=n.length&&n[0].dateFormat||c.getData(n,c.getColumnData(t,a.headers,i),"dateFormat")||a.dateFormat,e=e.replace(/\s+/g," ").replace(/[\-.,]/g,"/"),"mmddyyyy"===i?e=e.replace(/(\d{1,2})[\/\s](\d{1,2})[\/\s](\d{4})/,"$3/$1/$2"):"ddmmyyyy"===i?e=e.replace(/(\d{1,2})[\/\s](\d{1,2})[\/\s](\d{4})/,"$3/$2/$1"):"yyyymmdd"===i&&(e=e.replace(/(\d{4})[\/\s](\d{1,2})[\/\s](\d{1,2})/,"$1/$2/$3"))}return e?c.formatFloat(new Date(e).getTime()||e,t):e},type:"numeric"}),c.addParser({id:"time",is:function(e){return/^(([0-2]?\d:[0-5]\d)|([0-1]?\d:[0-5]\d\s?([AP]M)))$/i.test(e)},format:function(e,t){return e?c.formatFloat(new Date("2000/01/01 "+e.replace(/(\S)([AP]M)$/i,"$1 $2")).getTime()||e,t):e},type:"numeric"}),c.addParser({id:"metadata",is:function(){return!1},format:function(e,t,a){return e=(e=t.config).parserMetadataName?e.parserMetadataName:"sortValue",T(a).metadata()[e]},type:"numeric"}),c.addWidget({id:"zebra",priority:90,format:function(e,t,a){var i,n,r,o,s=new RegExp(t.cssChildRow,"i"),l=t.$tbodies;for(t.debug&&(o=new Date),e=0;e<l.length;e++)n=0,l.eq(e).children("tr:visible").not(t.selectorRemove).each(function(){i=T(this),s.test(this.className)||n++,r=0==n%2,i.removeClass(a.zebra[r?1:0]).addClass(a.zebra[r?0:1])});t.debug&&c.benchmark("Applying Zebra widget",o)},remove:function(e,t,a){var i;t=t.$tbodies;var n=(a.zebra||["even","odd"]).join(" ");for(a=0;a<t.length;a++)(i=T.tablesorter.processTbody(e,t.eq(a),!0)).children().removeClass(n),T.tablesorter.processTbody(e,i,!1)}})}(jQuery);var SCM=SCM||{};SCM.Common={getQueryStringValue:function(e,t){var a,i=t+"=",n=e.indexOf(i);if(-1===n)return null;if(n+=i.length,0<=e.indexOf("&",n)){var r=e.indexOf("&",n);a=e.substring(n,r)}else a=e.substring(n);return a},isDefined:function(e){return void 0!==e&&void 0!==e&&null!=e}},SCM=SCM||{},SCM.QueryBuilder={},SCM.QueryBuilder.defaults={runSearch:function(e){window.location.hash="#"+e},beforeSearch:function(){}},SCM.QueryBuilder.configure=function(){var t,e=$(".querybuilder-filter"),r=$(".querybuilder-filter-current-wrap"),i=$(".querybuilder-filter-dropdown"),n=$(".querybuilder-input-standard"),o=$(".querybuilder-input-citation"),s=$(".querybuilder-instance"),a=$(".querybuilder-add"),l=function(e){var t=e,a=t.closest(".querybuilder-instance");t.hasClass("filter-citation")?(a.find(n).addClass("hide"),a.find(o).removeClass("hide")):(a.find(o).addClass("hide"),a.find(n).removeClass("hide"))};function c(e,t){$(".sort-order-list").addClass("hide"),t.stopPropagation();var a=e.find(i);i.not(a).addClass("hide"),a.hasClass("hide")?a.removeClass("hide"):a.addClass("hide")}function d(e){var t=e.closest(".querybuilder-filter-dropdown");$thisLabel=e.closest(r).find(".querybuilder-filter-label"),t.children(e).removeClass("selected"),e.addClass("selected"),$thisLabel.text(e.text()),l(e);var a,i,n=e.parents(".querybuilder-instance").attr("id");($("#search-errors li").each(function(){var e=$(this);e.attr("from")===n&&e.remove()}),e.hasClass("filter-citation"))?u(e.closest(".querybuilder-instance").attr("id"),!1):(i=null,s.each(function(){if(!$(this).hasClass("hide")&&!$(this).find(o).hasClass("hide"))return i=$(this).attr("id"),!1}),u(a=i,null===a))}function u(a,i){s.each(function(){var e=s.attr("id"),t=$(this).find("li[data-fieldname='Citation']");e===a&&null!==a||(i?t.show():t.hide())})}(t=jQuery)(".querybuilder-instance").each(function(){t(this).hasClass("hide")}),e.each(function(){var e=t(this);e.hasClass("selected")&&(e.closest(r).find(".querybuilder-filter-label").text(e.text()),l(e))}),r.off("click").on("click",function(e){c($(this),e)}),r.off("keydown").keydown(function(e){13==e.which&&c($(this),e)}),$(document).on("click",function(){i.addClass("hide")}),e.on("click",function(){d($(this))}),e.keydown(function(e){13==e.which&&d($(this))}),$(".querybuilder-input, .citation-input").on("keyup",function(){$("#queryBuilderSubmit").addClass("btn-green").removeAttr("style"),function(e){var t=e;if(t.hasClass("citation-input")){var a=t.val().replace(/\'/g,"").trim().length,i=t.val().replace(/\'/g,"").trim().length,n=t.val().replace(/\'/g,"").trim().length,r=t.val().replace(/\'/g,"").trim().length;if(0<a||0<i||0<n||0<r)return!0;if(0===a&&0===i&&0===n&&0===r)return!1}else{var o=t.val().replace(/\'/g,"").trim().length;if(0===o)return!1;if(0<o)return!0}}($(this))?a.addClass("valid").removeAttr("disabled"):a.removeClass("valid").attr("disabled")}),a.on("click",function(){if($(this).attr("disabled"))alert("A value must be entered before adding another filter.");else{var e=1;s.each(function(){$(this).hasClass("hide")||(0,e++)}),$("#qbInstance"+e).removeClass("hide"),a.removeClass("valid").attr("disabled","")}}),$(".querybuilder-submit").on("click",function(){$(this).removeClass("btn-green").attr("style","opacity: 0.3;")}),$(".querybuilder-wrap").on("keyup","input.citation-input.citation-year",function(e){var t=$(e.target);4<t.val().length&&t.val(t.val().substr(0,4))}),$(".js-main, .js-querybuilder-wrap").off("click").on("click",".querybuilder-submit",function(){var e="",f=$("#hfCurrentSearchTerm").val(),g=$(".querybuilder-submit").attr("data-current-url"),m=new Object,v=1,y=!1,t=$("#search-errors");function b(e,t){var a="",i="";if(0<=t.indexOf("q=")){var n=SCM.Common.getQueryStringValue(t,"q");n.startsWith("(")||(a="("),a=n.endsWith(")")?a+n.slice(0,-1)+" AND "+e+")":a+n+" AND "+e+")",i=t.replace(n,a)}else i="q="+e+"&"+t;return i}var a,n,w=[];if(t.empty(),$(".querybuilder-wrap .querybuilder-instance").each(function(e){var r=$(this);if(!r.hasClass("hide")){var t=r.find(".querybuilder-filter-dropdown li.selected").text(),a=r.find(".querybuilder-filter-dropdown li.selected").attr("data-fieldname"),i=!1;if(1===v){var n=r.find("#instance_QueryBuilderSearchTerm").val().trim();if(null==a||""===$.trim(a)||""===n){if(f!==n){var o=g.indexOf("q=");if(0<=o&&0<=g.indexOf("&",o)){var s=SCM.Common.getQueryStringValue(g,"q");g=null!==s&&""!==s?(s="q="+s+"&",g.replace(s,"q="+n+"&")):"q="+n+"&"+g}else g="q="+n+"&"+g}return m.q=n,y=!0,""===n?(g=g.replace("q=&",""),!0):(v++,!0)}var l=SCM.Common.getQueryStringValue(g,"q");null!==l&&""!==l?(l="q="+l+"&",g=g.replace(l,"")):m=new Object,i=!0}var c="";switch(t){case"":var d="q"+v;""!==(c=r.find("#instance_QueryBuilderSearchTerm").val().trim())&&(c=c.replace(/^"(.*)"$/,"$1"),g=b(c,g),m[d]=c,y=!0);break;case"All":if(""!==(c=r.find("#instance_QueryBuilderSearchTerm").val().trim()))g=b(c,g),(1===v&&i||1!==v)&&(m["All"+v]=c,y=!0);break;case"Citation":var u={},h="Citation"+v;$.each([{id:"#instance_CitationYear",field:"Year",pattern:/^(?!0(0?){3})\d(\d?){3}$/,message:"The 'Year' field only accepts numbers."},{id:"#instance_CitationVolume",field:"Volume"},{id:"#instance_CitationIssueNo",field:"IssueNo"},{id:"#instance_CitationPage",field:"StartPage"}],function(e,t){var a,i=r.find(t.id),n=i.val().trim();null!==(a=n)&&""!==a&&void 0!==a&&(m[h]||(m[h]=u,y=!0),t.pattern&&!t.pattern.test(n)?(i.val(""),-1===$.inArray(t.message,w)&&w.push({message:t.message,origin:"qbInstance"+v})):u[t.field]=n)});break;default:var p=a+v;""!==(c=r.find("#instance_QueryBuilderSearchTerm").val().trim())&&(c=c.replace(/^"(.*)"$/,"$1"),m[p]=c,y=!0)}}v++}),0<w.length)return a=w,n=$("<ul>"),t.append(n),$.each(a,function(e,t){var a,i;n.append((a=t,(i=$("<li>")).text(a.message),i.attr("from",a.origin),i))}),void $("#queryBuilderSubmit").addClass("btn-green").removeAttr("style");var i=SCM.Common.getQueryStringValue(g,"page");if("page=1"==g&&(g="&page=1"),null!==i&&""!==i&&(g=g.replace("page="+i+"&","page=1&")),e=g,y){var r=JSON.stringify(m),o=SCM.Common.getQueryStringValue(g,"qb");e=o?e.replace(o,r):e+"&qb="+r}SCM.QueryBuilder.defaults.beforeSearch(),SCM.QueryBuilder.defaults.runSearch(encodeURI(e))}),$(".querybuilder-input").keyup(function(e){var t=e.which;13==t&&e.preventDefault();var a=$.trim($(this).val());if(13===t&&""!==a)return $(".querybuilder-submit").click(),!1})},String.prototype.startsWith||(String.prototype.startsWith=function(e,t){return t=t||0,this.indexOf(e,t)===t}),String.prototype.endsWith||(String.prototype.endsWith=function(e,t){var a=this.toString();("number"!=typeof t||!isFinite(t)||Math.floor(t)!==t||t>a.length)&&(t=a.length),t-=e.length;var i=a.lastIndexOf(e,t);return-1!==i&&i===t});var SCM=SCM||{};function getQueryStringValue(e,t){var a,i=t+"=",n=e.indexOf(i);if(-1===n)return null;if(n+=i.length,0<=e.indexOf("&",n)){var r=e.indexOf("&",n);a=e.substring(n,r)}else a=e.substring(n);return a}function isDefined(e){return void 0!==e&&void 0!==e&&null!=e&&""!==e}function jsonToQueryString(t){return Object.keys(t).filter(function(e){return isDefined(e)}).map(function(e){return encodeURIComponent(e)+"="+encodeURIComponent(t[e])}).join("&")}SCM.JournalCitationFilter=function(d,e){var u="f_JournalDisplayName",h="rg_IssuePublicationDate",p="f_Volume",f="f_IssueNo",g="f_StartPage",t=null,a=null,i=null,n=null,r=null,m=null,v=null,y=null,b=null,w=null,S=null,C=null,k=null,x=null,o=null,s=null,_=null,M=null,A=null,T=null,D=null,$=null,I=null,F=null,j=null,E=null;function l(e){s.classList.remove("collapsed"),-1!==o.className.indexOf("icon-general-arrow-filled-right")&&(o.classList.remove("icon-general-arrow-filled-right"),o.classList.add("icon-general-arrow-filled-down"))}return{init:function(){t=getQueryStringValue(location.search,u),a=getQueryStringValue(location.search,h),i=getQueryStringValue(location.search,p),n=getQueryStringValue(location.search,f),r=getQueryStringValue(location.search,g),m=document.getElementById("SelectedJournal"),v=document.getElementById("Citation_IssuePublicationDate"),y=document.getElementById("Citation_Volume"),b=document.getElementById("Citation_IssueNo"),w=document.getElementById("Citation_StartPage"),S=isDefined(v)?v.getAttribute("pattern"):null,C=isDefined(y)?y.getAttribute("pattern"):null,k=isDefined(b)?b.getAttribute("pattern"):null,x=isDefined(w)?w.getAttribute("pattern"):null,o=document.getElementsByClassName("js-journal-citation-filter-toggle")[0],s=document.getElementsByClassName("journal-citation-filter-input-wrap")[0],_=document.getElementById("Config_PlaceholderTextJournal").value||"",M=document.getElementById("Config_PlaceholderTextYear").value||"",A=document.getElementById("Config_PlaceholderTextVolume").value||"",T=document.getElementById("Config_PlaceholderTextIssueNo").value||"",D=document.getElementById("Config_PlaceholderTextStartPage").value||"",$=document.getElementById("Config_ValidationMessageJournal").value||"",I=document.getElementById("Config_ValidationMessageYear").value||"",F=document.getElementById("Config_ValidationMessageVolume").value||"",j=document.getElementById("Config_ValidationMessageIssueNo").value||"",E=document.getElementById("Config_ValidationMessageStartPage").value||"",!0==(!!(isDefined(t)&&isDefined(m)||isDefined(a)&&isDefined(v)||isDefined(i)&&isDefined(y)||isDefined(n)&&isDefined(b)||isDefined(r)&&isDefined(w))&&(v.value=function(e){if(!isDefined(e))return"";var t=decodeURIComponent(e).split("TO").map(function(e){return e.replace("+","")}),e=0<t.length?t[0]:e;return new Date(e).getUTCFullYear()}(a),y.value=i,b.value=n,w.value=r,!0))&&l()},applyFilter:function(){var e=isDefined(m)&&0<m.options.length&&isDefined(m.options[m.selectedIndex])?m.options[m.selectedIndex].textContent:"",t=isDefined(v)?v.value:"",a=isDefined(y)?y.value:"",i=isDefined(b)?b.value:"",n=isDefined(w)?w.value:"",r={},o="";if(e===_&&""!==e?o=$+"\n":r[u]=d.trim(e),t!==M&&""!==t){var s=new RegExp(S);if(isNaN(t)||!s.test(t))o+=I+"\n";else{var l="01/01/"+t+" TO 12/31/"+t;r[h]=l}}if(a!==A&&""!==a&&(new RegExp(C).test(a)?r[p]=a:o+=F+"\n"),i!==T&&""!==i&&(new RegExp(k).test(i)?r[f]=i:o+=j+"\n"),n!==D&&""!==n&&(new RegExp(x).test(n)?r[g]=n:o+=E+"\n"),0<o.length)return alert(o),!1;var c={queryString:jsonToQueryString(r)};return SCM.SearchResults.doSolrSearch(c),!1},toggleWidget:function(){-1!==s.className.indexOf("collapsed")?l():(s.classList.add("collapsed"),-1!==o.className.indexOf("icon-general-arrow-filled-down")&&(o.classList.remove("icon-general-arrow-filled-down"),o.classList.add("icon-general-arrow-filled-right")))}}}(jQuery),$(document).ready(function(e){function t(){$(document).ajaxStart(function(){$(".info-inner-cover").removeClass("uncovered"),$(".info-inner-cover").addClass("covered")}),$(document).ajaxComplete(function(){$(".info-inner-cover").removeClass("covered"),$(".info-inner-cover").addClass("uncovered")})}"true"===$("#hfJournalCitationFilterLoaded").val()&&(SCM.JournalCitationFilter.init(),$(document).on("click",".js-journal-citation-filter-update",function(){$(this).addClass("fade"),t(),SCM.JournalCitationFilter.applyFilter()}),$(document).on("keyup",".js-advanced-citation-filter-field",function(e){13==e.keyCode&&(e.preventDefault(),$(".js-journal-citation-filter-update").addClass("fade"),t(),SCM.JournalCitationFilter.applyFilter())}),$(document).on("click",".js-journal-citation-filter-toggle",function(){SCM.JournalCitationFilter.toggleWidget()}),$(document).on("keyup change",".js-advanced-citation-filter-field",function(){$(".js-journal-citation-filter-update").removeClass("fade")}))});var SCM=SCM||{};SCM.ArticleImageDetails=function(l){var n=null;function c(){l("body").toggleClass("modalOpen")}function r(){l("."+n+", .figureModal .close").on("click",e),l(".js-item-image").first().on("click",t),l(".js-item-image").last().on("click",t),l(".js-previous-image-details, .js-next-image-details").on("click",i),l(".figureModalContainer").on("click",s)}function a(){l("."+n+", .figureModal .close").off("click",e),l(".js-item-image").first().off("click",t),l(".js-item-image").last().off("click",t),l(".js-previous-image-details, .js-next-image-details").off("click",i),l(".figureModalContainer").off("click",s)}function e(e){e.preventDefault(),e.stopPropagation();var t=l(this).data("item");l("#"+t).fadeToggle(200),c()}function t(e){e.preventDefault(),e.stopPropagation();var t=l(this).data("item");d(l("#"+t))}function i(e){e.preventDefault(),e.stopPropagation();var t=l(this),a=t.data("item"),i=l("#"+a),n=t.data("new-item"),r=l("#"+n);if("newPage"===n){var o=t.data("url"),s=t.data("modal-open");c(),SCM.SearchResults.doSolrSearch({queryString:o,openModal:s})}r.toggle(function(){i.toggle()}),d(r)}function d(e){var t=e.find(".js-previous-image-details"),a=e.find(".js-next-image-details"),i=null,n=null;"newPage"===t.data("new-item")&&(i=t.data("url"),n=t.data("modal-open")),"newPage"===a.data("new-item")&&(i=a.data("url"),n=a.data("modal-open")),i&&SCM.SearchResults.doSolrSearch({queryString:i,openModal:n,cacheSearchWithoutUpdatingDom:!0,currentItem:e,functionToDoWhileAjaxLoading:o})}function o(e){var t=e.find(".js-previous-image-details, .js-next-image-details");e.length&&(t.hasClass("disabled")?(t.removeClass("disabled"),r()):t.hasClass("disabled")||(t.addClass("disabled"),a()))}function s(e){$target=l(e.target),$target.parents(".figureModalContainer:visible").length||(l(".figureModalContainer").hide(),l("body").removeClass("modalOpen"))}return{init:function(e,t,a){var i;l(".figureModalContainer").hide(),!0===t&&(l("#"+a).fadeToggle(200),c()),n=e,(i=l(".figureModalContainer")).remove(),l("#multimediaGalleryModalWrapper").append(i),r()}}}(jQuery);var SCM=SCM||{};SCM.UploadImage_Complete=function(e){var t=$.extend({targetSelector:"#UploadTarget",jsonResultSelector:"#jsonResult",replacementContainerSelector:"#id"},e),a=$(t.targetSelector).contents().find(t.jsonResultSelector);if(1===a.length){var i=$.parseJSON(a.html());if($("[data-valmsg-for]").attr("class","field-validation-valid").html(""),i.Success)t.success&&t.success();else if(0<i.Messages.length){var n="Error \n";i.Messages.forEach(function(e){n+=e+"\n"}),alert(n)}else i.Html?$(t.replacementContainerSelector).replaceWith(i.Html.replace(/{{/g,"&quot;")):i.ValidationErrors.forEach(function(e){var t=$("[data-valmsg-for="+e.Key+"]");t.addClass("field-validation-error").removeClass("field-validation-valid"),e.Errors.forEach(function(e){t.html(t.html()+e+"<br />")})})}},SCM.AjaxHelperSuccessCallback=function(e,t,a){e.RedirectUrl&&0<e.RedirectUrl.length?window.location=e.RedirectUrl:e.Html&&0<e.Html.length?t.replaceWith(e.Html):e.Success?a():t.replaceWith(e)},SCM.AjaxHelperErrorCallback=function(e,t,a){e.RedirectUrl&&0<e.RedirectUrl.length?window.location=e.RedirectUrl:e.Html&&0<e.Html.length?t.replaceWith(e.Html):e.Success?a():t.replaceWith(e)},SCM.showModal=function(){var t=[];"undefined"!=typeof tinyMCE&&tinyMCE.editors.forEach(function(e){$("#divDefaultUpdateTarget").find("#"+e.editorContainer).each(function(){t.push(e.id)})}),$.fancybox({autosize:!0,autoScale:!1,title:"",href:"#divDefaultUpdateTarget"}),"undefined"!=typeof tinyMCE&&t.forEach(function(e){$("#"+e).scmTinyMCE()})},SCM.hideModal=function(){$.fancybox.close()},SCM.refreshModal=function(){$.fancybox.update()},function(){var r=$("body");function l(e,t){return 0===e.indexOf("*.")&&(e=e.replace("*.",t)),e}$(document).ajaxError(function(e,t,a){if(r.removeClass("wait"),t.responseText)try{var i=$.parseJSON(t.responseText);if(null!=i.Success&&!i.Success){var n="There was an error processing the request \n";i.Messages.forEach(function(e){n+=e+"\n"}),alert(n)}}catch(e){console.log("Ajax error occured, responseText is not json: "+e.message)}}),$.validator.addMethod("isDateGreaterThan",function(e,t,a){return 1!=function(e,t){var a=new Date(t),i=new Date(e);{if(a.getFullYear()==i.getFullYear()&&a.getMonth()==i.getMonth()&&a.getDate()==i.getDate())return!1;if(i<a)return!0}return!1}($(t).val(),a)},""),$(document).ajaxStart(function(){r.addClass("wait")}).ajaxStop(function(){r.removeClass("wait")}),r.on("keypress","[data-default-button]",function(e){if(13==e.which)return $("#"+$(this).data("defaultButton")).click(),!1}),$.validator.unobtrusive.adapters.add("dynamicrange",["minvalueproperty","maxvalueproperty"],function(e){e.rules.dynamicrange=e.params,null!=e.message&&($.validator.messages.dynamicrange=e.message)}),$.validator.addMethod("dynamicrange",function(e,t,a){var i,n=(i=t.name).substr(0,i.lastIndexOf(".")+1),r=parseInt($('input[name="'+l(a.minvalueproperty,n)+'"]').val(),10),o=parseInt($('input[name="'+l(a.maxvalueproperty,n)+'"]').val(),10),s=parseInt(e,10);return!(isNaN(r)||isNaN(o)||isNaN(s)||s<r||o<s)||($.validator.messages.dynamicrange=$.format($(t).attr("data-val-dynamicrange"),r,o),!1)},"")}(),function(o){o.fn.radiobuttonEnable=function(){return this.each(function(){var i=o(this);i.find("*[data-rb-enable-name]").each(function(){var e=o(this),t=i.find('input:radio[name="'+e.data("rbEnableName")+'"]:checked');if(0<t.length){var a=e.data("rbEnableValue");null!=a&&t.val().toString().toLowerCase()!=a.toString().toLowerCase()&&e.attr("disabled","disabled"),null!=(a=e.data("rbMakeVisibleValue"))&&t.val().toString().toLowerCase()!=a.toString().toLowerCase()&&e.hide()}}),i.find("input:radio").on("change",function(){var i=o(this),e='[data-rb-enable-name="'+i.attr("name")+'"]';o(e).each(function(){var e=o(this),t=tinymce.editors[e[0].id],a=e.data("rbEnableValue");null!=a&&(a.toString().toLowerCase()==i.val().toLowerCase()?(e.removeAttr("disabled"),t&&t.getBody().setAttribute("contenteditable",!0)):(e.attr("disabled","disabled"),t&&t.getBody().setAttribute("contenteditable",!1))),null!=(a=e.data("rbMakeVisibleValue"))&&(a.toString().toLowerCase()==i.val().toLowerCase()&&!e.is(":visible")||a.toString().toLowerCase()!=i.val().toLowerCase()&&e.is(":visible"))&&e.fadeToggle()})})})},o.fn.configureSCMForm=function(e){var a=o.extend({cancelButtonSelector:".cancel",submitButtonSelector:".submit",nextQuestionButtonSelector:".nextQuestion",skipButtonSelector:".skip",validatorIgnores:":disabled, input[type='hidden']",nextQuestion:null,cancel:null,skip:null,validateOnSubmit:null,validateOnKeyUp:!1},e);return this.each(function(){var t=o(this);jQuery.validator.unobtrusive.parse("#"+this.id),t.validate();var e=o.data(t[0],"validator").settings;e.ignore=a.validatorIgnores,!0===a.validateOnKeyUp&&(a.validateOnKeyUp=null),e.onkeyup=a.validateOnKeyUp,e.onsubmit=a.validateOnSubmit,t.find(a.submitButtonSelector).off("click.configureSCMForm").on("click.configureSCMForm",function(e){e.preventDefault(),t.valid()&&t.trigger("submit")}),t.find(a.nextQuestionButtonSelector).off("click.configureSCMForm").on("click.configureSCMForm",function(e){e.preventDefault(),a.nextQuestion()}),t.find(a.skipButtonSelector).off("click.configureSCMForm").on("click.configureSCMForm",function(e){e.preventDefault(),a.skip()}),t.find(a.cancelButtonSelector).off("click.configureSCMForm").on("click.configureSCMForm",function(e){e.preventDefault(),a.cancel?a.cancel():(t.hide(),SCM.hideModal())})})},o.fn.viewMore=function(e){var a=o.extend({hiddenSelector:".read-more",readMoreButtonSelector:"#readMore",readMoreText:"Read More",readLessText:"Read Less"},e);return this.each(function(){var t=o(a.hiddenSelector);t.hide(),o(a.readMoreButtonSelector).on("click",function(e){e.preventDefault(),t.fadeToggle()})})},o.fn.scmTinyMCE=function(){return o(".mceOpen.mce_forecolor").show(),o(".mce_forecolor .mceLast .mceIconOnly").show(),o(".mceOpen.mce_backcolor").show(),o(".mceOpen.mce_backcolor .mceIconOnly").show(),this.each(function(){o(this).tinymce({gecko_spellcheck:!0,theme:"advanced",theme_advanced_buttons1:"bold,italic,underline,|,bullist,numlist,|,sub,sup,|,charmap,|,forecolor,backcolor,|,link",theme_advanced_buttons2:"",theme_advanced_buttons3:"",plugins:"inlinepopups",theme_advanced_statusbar_location:null,oninit:function(e){var t=o("#"+e.editorId+"[data-rb-enable-name]"),a=o('input:radio[name="'+t.data("rbEnableName")+'"]');if(0<a.length&&a.val().toString().toLowerCase()!=t.data("rbEnableValue").toString().toLowerCase()){t.attr("disabled","disabled");var i=tinymce.editors[t[0].id];i&&i.getBody().setAttribute("contenteditable",!1)}}})})},o.fn.scmTimer=function(t){return this.each(function(){var a=o(this),i=o.extend({h:0,m:0,s:0,hs:0,stop:!1,milliseconds:150,intervalCheck:null},t);if(i.stop)clearInterval(a.data("scmTimerToken"));else{var e=function(e){return e<10&&(e="0"+e),e},n=(new Date).getTime(),r=function(){a.text(e(i.h)+":"+e(i.m)+":"+e(i.s)+":"+e(i.hs))};r(),a.data("scmTimerToken",setInterval(function(){if(a.is(":visible")){var e=(new Date).getTime(),t=e-n;i.hs+=Math.floor(t/10),n=e,100<=i.hs&&(i.s+=Math.floor(i.hs/100),i.hs=i.hs%100,60<=i.s&&(i.m+=Math.floor(i.s/60),i.s=i.s%60),60<=i.m&&(i.h+=Math.floor(i.m/60),i.m=i.m%60)),r(),!i.intervalCheck||i.intervalCheck(i)||clearInterval(a.data("scmTimerToken"))}else clearInterval(a.data("scmTimerToken"))},i.milliseconds))}})},o.fn.wkTimer=function(t){return this.each(function(){var a=o(this),i=o.extend({h:0,m:0,s:0,hs:0,stop:!1,milliseconds:150,intervalCheck:null},t);if(i.stop)clearInterval(a.data("wkTimerToken"));else{var e=function(e){return e<10&&(e="0"+e),e},n=(new Date).getTime(),r=function(){a.text(e(i.m)+":"+e(i.s))};r(),a.data("wkTimerToken",setInterval(function(){if(a.is(":visible")){var e=(new Date).getTime(),t=e-n;i.hs+=Math.floor(t/10),n=e,100<=i.hs&&(i.s+=Math.floor(i.hs/100),i.hs=i.hs%100,60<=i.s&&(i.m+=Math.floor(i.s/60),i.s=i.s%60),60<=i.m&&(i.h+=Math.floor(i.m/60),i.m=i.m%60)),r(),!i.intervalCheck||i.intervalCheck(i)||clearInterval(a.data("wkTimerToken"))}else clearInterval(a.data("wkTimerToken"))},i.milliseconds))}})}}(jQuery);var SCM=SCM||{};SCM.__namespace=!0,SCM.eventManager=function(r,e){var t=function(e,t){return r.pubsub("subscribe",e,t)},i=function(e,t){r.pubsub("publish",e,t)},n="actionCompleted",a=function(a,i){return t(n,function(e,t){a===t.actionEnum&&i(t)})},o="actionCompleteactionRequest",s=function(a,i){return t(o,function(e,t){a===t.actionEnum&&i(t.data)})};return{subscribeWidgetRefresh:function(e,t){var i=r.extend({refreshWhenInvisible:!1,messageContainerSelector:"#divMessage"},t),n="";n=a(e,function(t){if(!i.refreshIf||i.refreshIf(t)){var a=r(i.containerSelector);(i.refreshWhenInvisible||a.is(":visible"))&&r.ajax({type:"POST",url:i.url,data:i.data,dataType:"html",success:function(e){r.pubsub("unsubscribe",n),a.replaceWith(e).show(),i.refreshSuccess&&i.refreshSuccess(t)}})}})},subscribe:t,publish:i,publishActionCompleted:function(e,t){var a=r.extend({actionEnum:e},t);i(n,a)},subscribeActionCompleted:a,publishActionRequest:function(e,t){return i(o,{actionEnum:e,data:t})},subscribeActionRequest:s,subscribeActionRequestDisplayResult:function(e,a){return s(e,function(e){var t=r.extend({type:"POST"},e);r.ajax({type:t.type,url:t.url,data:t.data,dataType:"html",success:function(e){r(a).html(e).show()},error:function(e){alert(e)}}),SCM.hideModal()})}}}(jQuery),SCM.eventManager.subscriptionMessages={playVideo:"SCM.PlayVideo"};var SCM=SCM||{};!function(e,t,a){var i={},n=i.hasOwnProperty;e.subscribe=function(e,t){n.call(i,e)||(i[e]=[]);var a=i[e].push(t)-1;return{remove:function(){delete i[e][a]}}},e.publish=function(e,a){n.call(i,e)&&t.each(i[e],function(e,t){t(void 0!==a?a:{})})}}(SCM.EventEmitter=SCM.EventEmitter||{},jQuery);var SCM=SCM||{};!function(pdf,$){function formatIssuePurchaseLink(e,t){var a=e;if(0<=e.toLowerCase().indexOf("resourceid=")){a=e.replace(/resourceID=\{0\}|resourceID=\d+/i,"resourceid="+t)}return a}function logErrors(jqXHR,textStatus,errorThrown){if(window.console){var err=eval("("+jqXHR.responseText+")");console.log("error: "+err),console.log("status: "+textStatus)}}function openPDF(e){window.location.href=e}function openNoAccessModalArticle(e,t){e.attr({"data-reveal-id":"noAccessReveal","data-reveal":""}).removeAttr("data-ajax-url");var a="/article.aspx?articleid="+t+"#purchaseSubscriptionBox";pdf.$noAccessModal.find("#articleLinkToPurchase").attr("href",a),pdf.$noAccessModal.foundation("reveal","open")}function openNoAccessModalArticleSeo(e,t,a){if(e.attr({"data-reveal-id":"noAccessReveal","data-reveal":""}).removeAttr("data-ajax-url"),"DO_NOT_USE"===a)pdf.$noAccessModal.find("#articleLinkToPurchase").remove();else{var i=a;pdf.$noAccessModal.find("#articleLinkToPurchase").attr("href",i)}pdf.$noAccessModal.foundation("reveal","open")}function openNoAccessModalIssue(e,t){var a=formatIssuePurchaseLink(e,t);pdf.$noAccessModal.find(".aIssuePurchaseLink").attr("href",a),pdf.$noAccessModal.foundation("reveal","open")}pdf.$noAccessModal=$("#noAccessReveal"),pdf.checkArticlePDFAccess=function(t){var a=t.attr("data-article-id"),i=t.attr("data-article-url"),e=t.attr("data-ajax-url"),n=$("#hfSiteURL"),r="";null!==t.attr("data-article-seo-url")&&(r=t.attr("data-article-seo-url")),void 0!==n&&void 0!==n.val()&&""!==n&&(e="//"+n.val()+e);var o=a,s={};s.aId=o,$.ajax({type:"POST",url:e,data:s,traditional:!0,success:function(e){e.Success?openPDF(i):0<r.length?openNoAccessModalArticleSeo(t,a,r):openNoAccessModalArticle(t,a)},error:function(e,t,a){logErrors(e,t,a)}})},pdf.checkIssuePDFAccess=function(e){var t=e.attr("data-issue-id"),a=e.attr("data-issue-url"),i=e.attr("data-ajax-issue-url"),n=pdf.$noAccessModal.find(".aIssuePurchaseLink").attr("href");-1<a.toLowerCase().indexOf("/toc.pdf")?window.location.href=a:$.ajax({type:"POST",url:i,data:{issueId:t},traditional:!0,success:function(e){e.Success?openPDF(a):openNoAccessModalIssue(n,t)},error:function(e,t,a){logErrors(e,t,a)}})},pdf.bindUiEvents=function(){$(document).on("click",".al-link.pdfaccess",function(){$(document).foundation(),pdf.$noAccessModal.foundation("reveal","close"),pdf.$noAccessModal.find("#articleLinkToPurchase").show(),pdf.$noAccessModal.find(".issue-purchase-modal").hide(),$(this).attr("data-reveal-id")||pdf.checkArticlePDFAccess($(this))}),$(document).on("click",".close-reveal-modal",function(){$(this).parents(".reveal-modal").foundation("reveal","close")}),$(document).on("click",".al-link.issue-pdfLink",function(){pdf.$noAccessModal.foundation("reveal","close"),pdf.$noAccessModal.find("#articleLinkToPurchase").hide(),pdf.$noAccessModal.find(".issue-purchase-modal").show(),pdf.checkIssuePDFAccess($(this))})},pdf.init=function(){pdf.bindUiEvents()}}(SCM.PDFAccess=SCM.PDFAccess||{},jQuery),$(document).ready(function(){$("div[data-article-abstract-2b-fetched-wrapper] > div[data-article-abstract-get] a").on("click",function(){var wrapperDiv=$(this).closest("div[data-article-abstract-2b-fetched-wrapper]"),articleId=$(wrapperDiv).data("articleid-4-abstract"),triedFetchDiv=$(wrapperDiv).children("div[data-tried-to-fetch-abstract]").first(),triedFetch="true"===$(triedFetchDiv).data("tried-to-fetch-abstract"),abstractLocation=$("#abstract-"+articleId),baseSiteUrl=$("#hfSiteURL"),ajaxUrl="extract"==$(this).parent().data("link-article-abstract-type")?"/Article/ArticleAbstractOrExtractAjax":"/Article/ArticleAbstractAjax";void 0!==baseSiteUrl&&void 0!==baseSiteUrl.val()&&""!=baseSiteUrl&&(ajaxUrl="//"+baseSiteUrl.val()+ajaxUrl),triedFetch||($.ajax({url:ajaxUrl,type:"GET",data:{articleId:articleId},success:function(e){abstractLocation.html(e.Html)},error:function(xmlHttpRequest,textStatus,errorThrown){if(window.console){var err=eval("("+xmlHttpRequest.responseText+")");console.log("error: "+err),console.log("status: "+textStatus)}}}),$(triedFetchDiv).data("tried-to-fetch-abstract","true")),abstractLocation.toggle()})});var SCM=SCM||{};SCM.Supplements=SCM.Supplements||{},SCM.Supplements.updateIssueSupplementsOnChange=function(){$(".js-supplements-select").on("change",function(){window.location.href=$(this).val()})},SCM.Supplements.updateIssueSupplementsOnChange(),function(e){"function"==typeof define&&define.amd?define(["jquery"],e):e(jQuery)}(function(k){k.ui=k.ui||{};var r;k.ui.version="1.12.1",k.ui.keyCode={BACKSPACE:8,COMMA:188,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,LEFT:37,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SPACE:32,TAB:9,UP:38};function e(){this._curInst=null,this._keyEvent=!1,this._disabledInputs=[],this._datepickerShowing=!1,this._inDialog=!1,this._mainDivId="ui-datepicker-div",this._inlineClass="ui-datepicker-inline",this._appendClass="ui-datepicker-append",this._triggerClass="ui-datepicker-trigger",this._dialogClass="ui-datepicker-dialog",this._disableClass="ui-datepicker-disabled",this._unselectableClass="ui-datepicker-unselectable",this._currentClass="ui-datepicker-current-day",this._dayOverClass="ui-datepicker-days-cell-over",this.regional=[],this.regional[""]={closeText:"Done",prevText:"Prev",nextText:"Next",currentText:"Today",monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],weekHeader:"Wk",dateFormat:"mm/dd/yy",firstDay:0,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""},this._defaults={showOn:"focus",showAnim:"fadeIn",showOptions:{},defaultDate:null,appendText:"",buttonText:"...",buttonImage:"",buttonImageOnly:!1,hideIfNoPrevNext:!1,navigationAsDateFormat:!1,gotoCurrent:!1,changeMonth:!1,changeYear:!1,yearRange:"c-10:c+10",showOtherMonths:!1,selectOtherMonths:!1,showWeek:!1,calculateWeek:this.iso8601Week,shortYearCutoff:"+10",minDate:null,maxDate:null,duration:"fast",beforeShowDay:null,beforeShow:null,onSelect:null,onChangeMonthYear:null,onClose:null,numberOfMonths:1,showCurrentAtPos:0,stepMonths:1,stepBigMonths:12,altField:"",altFormat:"",constrainInput:!0,showButtonPanel:!1,autoSize:!1,disabled:!1},k.extend(this._defaults,this.regional[""]),this.regional.en=k.extend(!0,{},this.regional[""]),this.regional["en-US"]=k.extend(!0,{},this.regional.en),this.dpDiv=a(k("<div id='"+this._mainDivId+"' class='ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all'></div>"))}function a(e){var t="button, .ui-datepicker-prev, .ui-datepicker-next, .ui-datepicker-calendar td a";return e.on("mouseout",t,function(){k(this).removeClass("ui-state-hover"),-1!==this.className.indexOf("ui-datepicker-prev")&&k(this).removeClass("ui-datepicker-prev-hover"),-1!==this.className.indexOf("ui-datepicker-next")&&k(this).removeClass("ui-datepicker-next-hover")}).on("mouseover",t,o)}function o(){k.datepicker._isDisabledDatepicker(r.inline?r.dpDiv.parent()[0]:r.input[0])||(k(this).parents(".ui-datepicker-calendar").find("a").removeClass("ui-state-hover"),k(this).addClass("ui-state-hover"),-1!==this.className.indexOf("ui-datepicker-prev")&&k(this).addClass("ui-datepicker-prev-hover"),-1!==this.className.indexOf("ui-datepicker-next")&&k(this).addClass("ui-datepicker-next-hover"))}function u(e,t){for(var a in k.extend(e,t),t)null==t[a]&&(e[a]=t[a]);return e}k.extend(k.ui,{datepicker:{version:"1.12.1"}}),k.extend(e.prototype,{markerClassName:"hasDatepicker",maxRows:4,_widgetDatepicker:function(){return this.dpDiv},setDefaults:function(e){return u(this._defaults,e||{}),this},_attachDatepicker:function(e,t){var a,i,n;i="div"===(a=e.nodeName.toLowerCase())||"span"===a,e.id||(this.uuid+=1,e.id="dp"+this.uuid),(n=this._newInst(k(e),i)).settings=k.extend({},t||{}),"input"===a?this._connectDatepicker(e,n):i&&this._inlineDatepicker(e,n)},_newInst:function(e,t){return{id:e[0].id.replace(/([^A-Za-z0-9_\-])/g,"\\\\$1"),input:e,selectedDay:0,selectedMonth:0,selectedYear:0,drawMonth:0,drawYear:0,inline:t,dpDiv:t?a(k("<div class='"+this._inlineClass+" ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all'></div>")):this.dpDiv}},_connectDatepicker:function(e,t){var a=k(e);t.append=k([]),t.trigger=k([]),a.hasClass(this.markerClassName)||(this._attachments(a,t),a.addClass(this.markerClassName).on("keydown",this._doKeyDown).on("keypress",this._doKeyPress).on("keyup",this._doKeyUp),this._autoSize(t),k.data(e,"datepicker",t),t.settings.disabled&&this._disableDatepicker(e))},_attachments:function(e,t){var a,i,n,r=this._get(t,"appendText"),o=this._get(t,"isRTL");t.append&&t.append.remove(),r&&(t.append=k("<span class='"+this._appendClass+"'>"+r+"</span>"),e[o?"before":"after"](t.append)),e.off("focus",this._showDatepicker),t.trigger&&t.trigger.remove(),"focus"!==(a=this._get(t,"showOn"))&&"both"!==a||e.on("focus",this._showDatepicker),"button"!==a&&"both"!==a||(i=this._get(t,"buttonText"),n=this._get(t,"buttonImage"),t.trigger=k(this._get(t,"buttonImageOnly")?k("<img/>").addClass(this._triggerClass).attr({src:n,alt:i,title:i}):k("<button type='button'></button>").addClass(this._triggerClass).html(n?k("<img/>").attr({src:n,alt:i,title:i}):i)),e[o?"before":"after"](t.trigger),t.trigger.on("click",function(){return k.datepicker._datepickerShowing&&k.datepicker._lastInput===e[0]?k.datepicker._hideDatepicker():(k.datepicker._datepickerShowing&&k.datepicker._lastInput!==e[0]&&k.datepicker._hideDatepicker(),k.datepicker._showDatepicker(e[0])),!1}))},_autoSize:function(e){if(this._get(e,"autoSize")&&!e.inline){var t,a,i,n,r=new Date(2009,11,20),o=this._get(e,"dateFormat");o.match(/[DM]/)&&(t=function(e){for(n=i=a=0;n<e.length;n++)e[n].length>a&&(a=e[n].length,i=n);return i},r.setMonth(t(this._get(e,o.match(/MM/)?"monthNames":"monthNamesShort"))),r.setDate(t(this._get(e,o.match(/DD/)?"dayNames":"dayNamesShort"))+20-r.getDay())),e.input.attr("size",this._formatDate(e,r).length)}},_inlineDatepicker:function(e,t){var a=k(e);a.hasClass(this.markerClassName)||(a.addClass(this.markerClassName).append(t.dpDiv),k.data(e,"datepicker",t),this._setDate(t,this._getDefaultDate(t),!0),this._updateDatepicker(t),this._updateAlternate(t),t.settings.disabled&&this._disableDatepicker(e),t.dpDiv.css("display","block"))},_dialogDatepicker:function(e,t,a,i,n){var r,o,s,l,c,d=this._dialogInst;return d||(this.uuid+=1,r="dp"+this.uuid,this._dialogInput=k("<input type='text' id='"+r+"' style='position: absolute; top: -100px; width: 0px;'/>"),this._dialogInput.on("keydown",this._doKeyDown),k("body").append(this._dialogInput),(d=this._dialogInst=this._newInst(this._dialogInput,!1)).settings={},k.data(this._dialogInput[0],"datepicker",d)),u(d.settings,i||{}),t=t&&t.constructor===Date?this._formatDate(d,t):t,this._dialogInput.val(t),this._pos=n?n.length?n:[n.pageX,n.pageY]:null,this._pos||(o=document.documentElement.clientWidth,s=document.documentElement.clientHeight,l=document.documentElement.scrollLeft||document.body.scrollLeft,c=document.documentElement.scrollTop||document.body.scrollTop,this._pos=[o/2-100+l,s/2-150+c]),this._dialogInput.css("left",this._pos[0]+20+"px").css("top",this._pos[1]+"px"),d.settings.onSelect=a,this._inDialog=!0,this.dpDiv.addClass(this._dialogClass),this._showDatepicker(this._dialogInput[0]),k.blockUI&&k.blockUI(this.dpDiv),k.data(this._dialogInput[0],"datepicker",d),this},_destroyDatepicker:function(e){var t,a=k(e),i=k.data(e,"datepicker");a.hasClass(this.markerClassName)&&(t=e.nodeName.toLowerCase(),k.removeData(e,"datepicker"),"input"===t?(i.append.remove(),i.trigger.remove(),a.removeClass(this.markerClassName).off("focus",this._showDatepicker).off("keydown",this._doKeyDown).off("keypress",this._doKeyPress).off("keyup",this._doKeyUp)):"div"!==t&&"span"!==t||a.removeClass(this.markerClassName).empty(),r===i&&(r=null))},_enableDatepicker:function(t){var e,a,i=k(t),n=k.data(t,"datepicker");i.hasClass(this.markerClassName)&&("input"===(e=t.nodeName.toLowerCase())?(t.disabled=!1,n.trigger.filter("button").each(function(){this.disabled=!1}).end().filter("img").css({opacity:"1.0",cursor:""})):"div"!==e&&"span"!==e||((a=i.children("."+this._inlineClass)).children().removeClass("ui-state-disabled"),a.find("select.ui-datepicker-month, select.ui-datepicker-year").prop("disabled",!1)),this._disabledInputs=k.map(this._disabledInputs,function(e){return e===t?null:e}))},_disableDatepicker:function(t){var e,a,i=k(t),n=k.data(t,"datepicker");i.hasClass(this.markerClassName)&&("input"===(e=t.nodeName.toLowerCase())?(t.disabled=!0,n.trigger.filter("button").each(function(){this.disabled=!0}).end().filter("img").css({opacity:"0.5",cursor:"default"})):"div"!==e&&"span"!==e||((a=i.children("."+this._inlineClass)).children().addClass("ui-state-disabled"),a.find("select.ui-datepicker-month, select.ui-datepicker-year").prop("disabled",!0)),this._disabledInputs=k.map(this._disabledInputs,function(e){return e===t?null:e}),this._disabledInputs[this._disabledInputs.length]=t)},_isDisabledDatepicker:function(e){if(!e)return!1;for(var t=0;t<this._disabledInputs.length;t++)if(this._disabledInputs[t]===e)return!0;return!1},_getInst:function(e){try{return k.data(e,"datepicker")}catch(e){throw"Missing instance data for this datepicker"}},_optionDatepicker:function(e,t,a){var i,n,r,o,s=this._getInst(e);if(2===arguments.length&&"string"==typeof t)return"defaults"===t?k.extend({},k.datepicker._defaults):s?"all"===t?k.extend({},s.settings):this._get(s,t):null;i=t||{},"string"==typeof t&&((i={})[t]=a),s&&(this._curInst===s&&this._hideDatepicker(),n=this._getDateDatepicker(e,!0),r=this._getMinMaxDate(s,"min"),o=this._getMinMaxDate(s,"max"),u(s.settings,i),null!==r&&void 0!==i.dateFormat&&void 0===i.minDate&&(s.settings.minDate=this._formatDate(s,r)),null!==o&&void 0!==i.dateFormat&&void 0===i.maxDate&&(s.settings.maxDate=this._formatDate(s,o)),"disabled"in i&&(i.disabled?this._disableDatepicker(e):this._enableDatepicker(e)),this._attachments(k(e),s),this._autoSize(s),this._setDate(s,n),this._updateAlternate(s),this._updateDatepicker(s))},_changeDatepicker:function(e,t,a){this._optionDatepicker(e,t,a)},_refreshDatepicker:function(e){var t=this._getInst(e);t&&this._updateDatepicker(t)},_setDateDatepicker:function(e,t){var a=this._getInst(e);a&&(this._setDate(a,t),this._updateDatepicker(a),this._updateAlternate(a))},_getDateDatepicker:function(e,t){var a=this._getInst(e);return a&&!a.inline&&this._setDateFromField(a,t),a?this._getDate(a):null},_doKeyDown:function(e){var t,a,i,n=k.datepicker._getInst(e.target),r=!0,o=n.dpDiv.is(".ui-datepicker-rtl");if(n._keyEvent=!0,k.datepicker._datepickerShowing)switch(e.keyCode){case 9:k.datepicker._hideDatepicker(),r=!1;break;case 13:return(i=k("td."+k.datepicker._dayOverClass+":not(."+k.datepicker._currentClass+")",n.dpDiv))[0]&&k.datepicker._selectDay(e.target,n.selectedMonth,n.selectedYear,i[0]),(t=k.datepicker._get(n,"onSelect"))?(a=k.datepicker._formatDate(n),t.apply(n.input?n.input[0]:null,[a,n])):k.datepicker._hideDatepicker(),!1;case 27:k.datepicker._hideDatepicker();break;case 33:k.datepicker._adjustDate(e.target,e.ctrlKey?-k.datepicker._get(n,"stepBigMonths"):-k.datepicker._get(n,"stepMonths"),"M");break;case 34:k.datepicker._adjustDate(e.target,e.ctrlKey?+k.datepicker._get(n,"stepBigMonths"):+k.datepicker._get(n,"stepMonths"),"M");break;case 35:(e.ctrlKey||e.metaKey)&&k.datepicker._clearDate(e.target),r=e.ctrlKey||e.metaKey;break;case 36:(e.ctrlKey||e.metaKey)&&k.datepicker._gotoToday(e.target),r=e.ctrlKey||e.metaKey;break;case 37:(e.ctrlKey||e.metaKey)&&k.datepicker._adjustDate(e.target,o?1:-1,"D"),r=e.ctrlKey||e.metaKey,e.originalEvent.altKey&&k.datepicker._adjustDate(e.target,e.ctrlKey?-k.datepicker._get(n,"stepBigMonths"):-k.datepicker._get(n,"stepMonths"),"M");break;case 38:(e.ctrlKey||e.metaKey)&&k.datepicker._adjustDate(e.target,-7,"D"),r=e.ctrlKey||e.metaKey;break;case 39:(e.ctrlKey||e.metaKey)&&k.datepicker._adjustDate(e.target,o?-1:1,"D"),r=e.ctrlKey||e.metaKey,e.originalEvent.altKey&&k.datepicker._adjustDate(e.target,e.ctrlKey?+k.datepicker._get(n,"stepBigMonths"):+k.datepicker._get(n,"stepMonths"),"M");break;case 40:(e.ctrlKey||e.metaKey)&&k.datepicker._adjustDate(e.target,7,"D"),r=e.ctrlKey||e.metaKey;break;default:r=!1}else 36===e.keyCode&&e.ctrlKey?k.datepicker._showDatepicker(this):r=!1;r&&(e.preventDefault(),e.stopPropagation())},_doKeyPress:function(e){var t,a,i=k.datepicker._getInst(e.target);if(k.datepicker._get(i,"constrainInput"))return t=k.datepicker._possibleChars(k.datepicker._get(i,"dateFormat")),a=String.fromCharCode(null==e.charCode?e.keyCode:e.charCode),e.ctrlKey||e.metaKey||a<" "||!t||-1<t.indexOf(a)},_doKeyUp:function(e){var t=k.datepicker._getInst(e.target);if(t.input.val()!==t.lastVal)try{k.datepicker.parseDate(k.datepicker._get(t,"dateFormat"),t.input?t.input.val():null,k.datepicker._getFormatConfig(t))&&(k.datepicker._setDateFromField(t),k.datepicker._updateAlternate(t),k.datepicker._updateDatepicker(t))}catch(e){}return!0},_showDatepicker:function(e){var t,a,i,n,r,o,s;("input"!==(e=e.target||e).nodeName.toLowerCase()&&(e=k("input",e.parentNode)[0]),k.datepicker._isDisabledDatepicker(e)||k.datepicker._lastInput===e)||(t=k.datepicker._getInst(e),k.datepicker._curInst&&k.datepicker._curInst!==t&&(k.datepicker._curInst.dpDiv.stop(!0,!0),t&&k.datepicker._datepickerShowing&&k.datepicker._hideDatepicker(k.datepicker._curInst.input[0])),!1!==(i=(a=k.datepicker._get(t,"beforeShow"))?a.apply(e,[e,t]):{})&&(u(t.settings,i),t.lastVal=null,k.datepicker._lastInput=e,k.datepicker._setDateFromField(t),k.datepicker._inDialog&&(e.value=""),k.datepicker._pos||(k.datepicker._pos=k.datepicker._findPos(e),k.datepicker._pos[1]+=e.offsetHeight),n=!1,k(e).parents().each(function(){return!(n|="fixed"===k(this).css("position"))}),r={left:k.datepicker._pos[0],top:k.datepicker._pos[1]},k.datepicker._pos=null,t.dpDiv.empty(),t.dpDiv.css({position:"absolute",display:"block",top:"-1000px"}),k.datepicker._updateDatepicker(t),r=k.datepicker._checkOffset(t,r,n),t.dpDiv.css({position:k.datepicker._inDialog&&k.blockUI?"static":n?"fixed":"absolute",display:"none",left:r.left+"px",top:r.top+"px"}),t.inline||(o=k.datepicker._get(t,"showAnim"),s=k.datepicker._get(t,"duration"),t.dpDiv.css("z-index",function(e){for(var t,a;e.length&&e[0]!==document;){if(("absolute"===(t=e.css("position"))||"relative"===t||"fixed"===t)&&(a=parseInt(e.css("zIndex"),10),!isNaN(a)&&0!==a))return a;e=e.parent()}return 0}(k(e))+1),k.datepicker._datepickerShowing=!0,k.effects&&k.effects.effect[o]?t.dpDiv.show(o,k.datepicker._get(t,"showOptions"),s):t.dpDiv[o||"show"](o?s:null),k.datepicker._shouldFocusInput(t)&&t.input.trigger("focus"),k.datepicker._curInst=t)))},_updateDatepicker:function(e){this.maxRows=4,(r=e).dpDiv.empty().append(this._generateHTML(e)),this._attachHandlers(e);var t,a=this._getNumberOfMonths(e),i=a[1],n=e.dpDiv.find("."+this._dayOverClass+" a");0<n.length&&o.apply(n.get(0)),e.dpDiv.removeClass("ui-datepicker-multi-2 ui-datepicker-multi-3 ui-datepicker-multi-4").width(""),1<i&&e.dpDiv.addClass("ui-datepicker-multi-"+i).css("width",17*i+"em"),e.dpDiv[(1!==a[0]||1!==a[1]?"add":"remove")+"Class"]("ui-datepicker-multi"),e.dpDiv[(this._get(e,"isRTL")?"add":"remove")+"Class"]("ui-datepicker-rtl"),e===k.datepicker._curInst&&k.datepicker._datepickerShowing&&k.datepicker._shouldFocusInput(e)&&e.input.trigger("focus"),e.yearshtml&&(t=e.yearshtml,setTimeout(function(){t===e.yearshtml&&e.yearshtml&&e.dpDiv.find("select.ui-datepicker-year:first").replaceWith(e.yearshtml),t=e.yearshtml=null},0))},_shouldFocusInput:function(e){return e.input&&e.input.is(":visible")&&!e.input.is(":disabled")&&!e.input.is(":focus")},_checkOffset:function(e,t,a){var i=e.dpDiv.outerWidth(),n=e.dpDiv.outerHeight(),r=e.input?e.input.outerWidth():0,o=e.input?e.input.outerHeight():0,s=document.documentElement.clientWidth+(a?0:k(document).scrollLeft()),l=document.documentElement.clientHeight+(a?0:k(document).scrollTop());return t.left-=this._get(e,"isRTL")?i-r:0,t.left-=a&&t.left===e.input.offset().left?k(document).scrollLeft():0,t.top-=a&&t.top===e.input.offset().top+o?k(document).scrollTop():0,t.left-=Math.min(t.left,t.left+i>s&&i<s?Math.abs(t.left+i-s):0),t.top-=Math.min(t.top,t.top+n>l&&n<l?Math.abs(n+o):0),t},_findPos:function(e){for(var t,a=this._getInst(e),i=this._get(a,"isRTL");e&&("hidden"===e.type||1!==e.nodeType||k.expr.filters.hidden(e));)e=e[i?"previousSibling":"nextSibling"];return[(t=k(e).offset()).left,t.top]},_hideDatepicker:function(e){var t,a,i,n,r=this._curInst;!r||e&&r!==k.data(e,"datepicker")||this._datepickerShowing&&(t=this._get(r,"showAnim"),a=this._get(r,"duration"),i=function(){k.datepicker._tidyDialog(r)},k.effects&&(k.effects.effect[t]||k.effects[t])?r.dpDiv.hide(t,k.datepicker._get(r,"showOptions"),a,i):r.dpDiv["slideDown"===t?"slideUp":"fadeIn"===t?"fadeOut":"hide"](t?a:null,i),t||i(),this._datepickerShowing=!1,(n=this._get(r,"onClose"))&&n.apply(r.input?r.input[0]:null,[r.input?r.input.val():"",r]),this._lastInput=null,this._inDialog&&(this._dialogInput.css({position:"absolute",left:"0",top:"-100px"}),k.blockUI&&(k.unblockUI(),k("body").append(this.dpDiv))),this._inDialog=!1)},_tidyDialog:function(e){e.dpDiv.removeClass(this._dialogClass).off(".ui-datepicker-calendar")},_checkExternalClick:function(e){if(k.datepicker._curInst){var t=k(e.target),a=k.datepicker._getInst(t[0]);(t[0].id===k.datepicker._mainDivId||0!==t.parents("#"+k.datepicker._mainDivId).length||t.hasClass(k.datepicker.markerClassName)||t.closest("."+k.datepicker._triggerClass).length||!k.datepicker._datepickerShowing||k.datepicker._inDialog&&k.blockUI)&&(!t.hasClass(k.datepicker.markerClassName)||k.datepicker._curInst===a)||k.datepicker._hideDatepicker()}},_adjustDate:function(e,t,a){var i=k(e),n=this._getInst(i[0]);this._isDisabledDatepicker(i[0])||(this._adjustInstDate(n,t+("M"===a?this._get(n,"showCurrentAtPos"):0),a),this._updateDatepicker(n))},_gotoToday:function(e){var t,a=k(e),i=this._getInst(a[0]);this._get(i,"gotoCurrent")&&i.currentDay?(i.selectedDay=i.currentDay,i.drawMonth=i.selectedMonth=i.currentMonth,i.drawYear=i.selectedYear=i.currentYear):(t=new Date,i.selectedDay=t.getDate(),i.drawMonth=i.selectedMonth=t.getMonth(),i.drawYear=i.selectedYear=t.getFullYear()),this._notifyChange(i),this._adjustDate(a)},_selectMonthYear:function(e,t,a){var i=k(e),n=this._getInst(i[0]);n["selected"+("M"===a?"Month":"Year")]=n["draw"+("M"===a?"Month":"Year")]=parseInt(t.options[t.selectedIndex].value,10),this._notifyChange(n),this._adjustDate(i)},_selectDay:function(e,t,a,i){var n,r=k(e);k(i).hasClass(this._unselectableClass)||this._isDisabledDatepicker(r[0])||((n=this._getInst(r[0])).selectedDay=n.currentDay=k("a",i).html(),n.selectedMonth=n.currentMonth=t,n.selectedYear=n.currentYear=a,this._selectDate(e,this._formatDate(n,n.currentDay,n.currentMonth,n.currentYear)))},_clearDate:function(e){var t=k(e);this._selectDate(t,"")},_selectDate:function(e,t){var a,i=k(e),n=this._getInst(i[0]);t=null!=t?t:this._formatDate(n),n.input&&n.input.val(t),this._updateAlternate(n),(a=this._get(n,"onSelect"))?a.apply(n.input?n.input[0]:null,[t,n]):n.input&&n.input.trigger("change"),n.inline?this._updateDatepicker(n):(this._hideDatepicker(),this._lastInput=n.input[0],"object"!=typeof n.input[0]&&n.input.trigger("focus"),this._lastInput=null)},_updateAlternate:function(e){var t,a,i,n=this._get(e,"altField");n&&(t=this._get(e,"altFormat")||this._get(e,"dateFormat"),a=this._getDate(e),i=this.formatDate(t,a,this._getFormatConfig(e)),k(n).val(i))},noWeekends:function(e){var t=e.getDay();return[0<t&&t<6,""]},iso8601Week:function(e){var t,a=new Date(e.getTime());return a.setDate(a.getDate()+4-(a.getDay()||7)),t=a.getTime(),a.setMonth(0),a.setDate(1),Math.floor(Math.round((t-a)/864e5)/7)+1},parseDate:function(a,r,e){if(null==a||null==r)throw"Invalid arguments";if(""===(r="object"==typeof r?r.toString():r+""))return null;var i,t,n,o,s=0,l=(e?e.shortYearCutoff:null)||this._defaults.shortYearCutoff,c="string"!=typeof l?l:(new Date).getFullYear()%100+parseInt(l,10),d=(e?e.dayNamesShort:null)||this._defaults.dayNamesShort,u=(e?e.dayNames:null)||this._defaults.dayNames,h=(e?e.monthNamesShort:null)||this._defaults.monthNamesShort,p=(e?e.monthNames:null)||this._defaults.monthNames,f=-1,g=-1,m=-1,v=-1,y=!1,b=function(e){var t=i+1<a.length&&a.charAt(i+1)===e;return t&&i++,t},w=function(e){var t=b(e),a="@"===e?14:"!"===e?20:"y"===e&&t?4:"o"===e?3:2,i=new RegExp("^\\d{"+("y"===e?a:1)+","+a+"}"),n=r.substring(s).match(i);if(!n)throw"Missing number at position "+s;return s+=n[0].length,parseInt(n[0],10)},S=function(e,t,a){var i=-1,n=k.map(b(e)?a:t,function(e,t){return[[t,e]]}).sort(function(e,t){return-(e[1].length-t[1].length)});if(k.each(n,function(e,t){var a=t[1];if(r.substr(s,a.length).toLowerCase()===a.toLowerCase())return i=t[0],s+=a.length,!1}),-1!==i)return i+1;throw"Unknown name at position "+s},C=function(){if(r.charAt(s)!==a.charAt(i))throw"Unexpected literal at position "+s;s++};for(i=0;i<a.length;i++)if(y)"'"!==a.charAt(i)||b("'")?C():y=!1;else switch(a.charAt(i)){case"d":m=w("d");break;case"D":S("D",d,u);break;case"o":v=w("o");break;case"m":g=w("m");break;case"M":g=S("M",h,p);break;case"y":f=w("y");break;case"@":f=(o=new Date(w("@"))).getFullYear(),g=o.getMonth()+1,m=o.getDate();break;case"!":f=(o=new Date((w("!")-this._ticksTo1970)/1e4)).getFullYear(),g=o.getMonth()+1,m=o.getDate();break;case"'":b("'")?C():y=!0;break;default:C()}if(s<r.length&&(n=r.substr(s),!/^\s+/.test(n)))throw"Extra/unparsed characters found in date: "+n;if(-1===f?f=(new Date).getFullYear():f<100&&(f+=(new Date).getFullYear()-(new Date).getFullYear()%100+(f<=c?0:-100)),-1<v)for(g=1,m=v;;){if(m<=(t=this._getDaysInMonth(f,g-1)))break;g++,m-=t}if((o=this._daylightSavingAdjust(new Date(f,g-1,m))).getFullYear()!==f||o.getMonth()+1!==g||o.getDate()!==m)throw"Invalid date";return o},ATOM:"yy-mm-dd",COOKIE:"D, dd M yy",ISO_8601:"yy-mm-dd",RFC_822:"D, d M y",RFC_850:"DD, dd-M-y",RFC_1036:"D, d M y",RFC_1123:"D, d M yy",RFC_2822:"D, d M yy",RSS:"D, d M y",TICKS:"!",TIMESTAMP:"@",W3C:"yy-mm-dd",_ticksTo1970:24*(718685+Math.floor(492.5)-Math.floor(19.7)+Math.floor(4.925))*60*60*1e7,formatDate:function(a,e,t){if(!e)return"";var i,n=(t?t.dayNamesShort:null)||this._defaults.dayNamesShort,r=(t?t.dayNames:null)||this._defaults.dayNames,o=(t?t.monthNamesShort:null)||this._defaults.monthNamesShort,s=(t?t.monthNames:null)||this._defaults.monthNames,l=function(e){var t=i+1<a.length&&a.charAt(i+1)===e;return t&&i++,t},c=function(e,t,a){var i=""+t;if(l(e))for(;i.length<a;)i="0"+i;return i},d=function(e,t,a,i){return l(e)?i[t]:a[t]},u="",h=!1;if(e)for(i=0;i<a.length;i++)if(h)"'"!==a.charAt(i)||l("'")?u+=a.charAt(i):h=!1;else switch(a.charAt(i)){case"d":u+=c("d",e.getDate(),2);break;case"D":u+=d("D",e.getDay(),n,r);break;case"o":u+=c("o",Math.round((new Date(e.getFullYear(),e.getMonth(),e.getDate()).getTime()-new Date(e.getFullYear(),0,0).getTime())/864e5),3);break;case"m":u+=c("m",e.getMonth()+1,2);break;case"M":u+=d("M",e.getMonth(),o,s);break;case"y":u+=l("y")?e.getFullYear():(e.getFullYear()%100<10?"0":"")+e.getFullYear()%100;break;case"@":u+=e.getTime();break;case"!":u+=1e4*e.getTime()+this._ticksTo1970;break;case"'":l("'")?u+="'":h=!0;break;default:u+=a.charAt(i)}return u},_possibleChars:function(a){var i,e="",t=!1,n=function(e){var t=i+1<a.length&&a.charAt(i+1)===e;return t&&i++,t};for(i=0;i<a.length;i++)if(t)"'"!==a.charAt(i)||n("'")?e+=a.charAt(i):t=!1;else switch(a.charAt(i)){case"d":case"m":case"y":case"@":e+="0123456789";break;case"D":case"M":return null;case"'":n("'")?e+="'":t=!0;break;default:e+=a.charAt(i)}return e},_get:function(e,t){return void 0!==e.settings[t]?e.settings[t]:this._defaults[t]},_setDateFromField:function(e,t){if(e.input.val()!==e.lastVal){var a=this._get(e,"dateFormat"),i=e.lastVal=e.input?e.input.val():null,n=this._getDefaultDate(e),r=n,o=this._getFormatConfig(e);try{r=this.parseDate(a,i,o)||n}catch(e){i=t?"":i}e.selectedDay=r.getDate(),e.drawMonth=e.selectedMonth=r.getMonth(),e.drawYear=e.selectedYear=r.getFullYear(),e.currentDay=i?r.getDate():0,e.currentMonth=i?r.getMonth():0,e.currentYear=i?r.getFullYear():0,this._adjustInstDate(e)}},_getDefaultDate:function(e){return this._restrictMinMax(e,this._determineDate(e,this._get(e,"defaultDate"),new Date))},_determineDate:function(s,e,t){var a,i,n=null==e||""===e?t:"string"==typeof e?function(e){try{return k.datepicker.parseDate(k.datepicker._get(s,"dateFormat"),e,k.datepicker._getFormatConfig(s))}catch(e){}for(var t=(e.toLowerCase().match(/^c/)?k.datepicker._getDate(s):null)||new Date,a=t.getFullYear(),i=t.getMonth(),n=t.getDate(),r=/([+\-]?[0-9]+)\s*(d|D|w|W|m|M|y|Y)?/g,o=r.exec(e);o;){switch(o[2]||"d"){case"d":case"D":n+=parseInt(o[1],10);break;case"w":case"W":n+=7*parseInt(o[1],10);break;case"m":case"M":i+=parseInt(o[1],10),n=Math.min(n,k.datepicker._getDaysInMonth(a,i));break;case"y":case"Y":a+=parseInt(o[1],10),n=Math.min(n,k.datepicker._getDaysInMonth(a,i))}o=r.exec(e)}return new Date(a,i,n)}(e):"number"==typeof e?isNaN(e)?t:(a=e,(i=new Date).setDate(i.getDate()+a),i):new Date(e.getTime());return(n=n&&"Invalid Date"===n.toString()?t:n)&&(n.setHours(0),n.setMinutes(0),n.setSeconds(0),n.setMilliseconds(0)),this._daylightSavingAdjust(n)},_daylightSavingAdjust:function(e){return e?(e.setHours(12<e.getHours()?e.getHours()+2:0),e):null},_setDate:function(e,t,a){var i=!t,n=e.selectedMonth,r=e.selectedYear,o=this._restrictMinMax(e,this._determineDate(e,t,new Date));e.selectedDay=e.currentDay=o.getDate(),e.drawMonth=e.selectedMonth=e.currentMonth=o.getMonth(),e.drawYear=e.selectedYear=e.currentYear=o.getFullYear(),n===e.selectedMonth&&r===e.selectedYear||a||this._notifyChange(e),this._adjustInstDate(e),e.input&&e.input.val(i?"":this._formatDate(e))},_getDate:function(e){return!e.currentYear||e.input&&""===e.input.val()?null:this._daylightSavingAdjust(new Date(e.currentYear,e.currentMonth,e.currentDay))},_attachHandlers:function(e){var t=this._get(e,"stepMonths"),a="#"+e.id.replace(/\\\\/g,"\\");e.dpDiv.find("[data-handler]").map(function(){var e={prev:function(){k.datepicker._adjustDate(a,-t,"M")},next:function(){k.datepicker._adjustDate(a,+t,"M")},hide:function(){k.datepicker._hideDatepicker()},today:function(){k.datepicker._gotoToday(a)},selectDay:function(){return k.datepicker._selectDay(a,+this.getAttribute("data-month"),+this.getAttribute("data-year"),this),!1},selectMonth:function(){return k.datepicker._selectMonthYear(a,this,"M"),!1},selectYear:function(){return k.datepicker._selectMonthYear(a,this,"Y"),!1}};k(this).on(this.getAttribute("data-event"),e[this.getAttribute("data-handler")])})},_generateHTML:function(e){var t,a,i,n,r,o,s,l,c,d,u,h,p,f,g,m,v,y,b,w,S,C,k,x,_,M,A,T,D,$,I,F,j,E,L,R,P,N,O,U=new Date,q=this._daylightSavingAdjust(new Date(U.getFullYear(),U.getMonth(),U.getDate())),B=this._get(e,"isRTL"),H=this._get(e,"showButtonPanel"),W=this._get(e,"hideIfNoPrevNext"),z=this._get(e,"navigationAsDateFormat"),V=this._getNumberOfMonths(e),J=this._get(e,"showCurrentAtPos"),Y=this._get(e,"stepMonths"),Q=1!==V[0]||1!==V[1],K=this._daylightSavingAdjust(e.currentDay?new Date(e.currentYear,e.currentMonth,e.currentDay):new Date(9999,9,9)),G=this._getMinMaxDate(e,"min"),X=this._getMinMaxDate(e,"max"),Z=e.drawMonth-J,ee=e.drawYear;if(Z<0&&(Z+=12,ee--),X)for(t=this._daylightSavingAdjust(new Date(X.getFullYear(),X.getMonth()-V[0]*V[1]+1,X.getDate())),t=G&&t<G?G:t;this._daylightSavingAdjust(new Date(ee,Z,1))>t;)--Z<0&&(Z=11,ee--);for(e.drawMonth=Z,e.drawYear=ee,a=this._get(e,"prevText"),a=z?this.formatDate(a,this._daylightSavingAdjust(new Date(ee,Z-Y,1)),this._getFormatConfig(e)):a,i=this._canAdjustMonth(e,-1,ee,Z)?"<a class='ui-datepicker-prev ui-corner-all' data-handler='prev' data-event='click' title='"+a+"'><span class='ui-icon ui-icon-circle-triangle-"+(B?"e":"w")+"'>"+a+"</span></a>":W?"":"<a class='ui-datepicker-prev ui-corner-all ui-state-disabled' title='"+a+"'><span class='ui-icon ui-icon-circle-triangle-"+(B?"e":"w")+"'>"+a+"</span></a>",n=this._get(e,"nextText"),n=z?this.formatDate(n,this._daylightSavingAdjust(new Date(ee,Z+Y,1)),this._getFormatConfig(e)):n,r=this._canAdjustMonth(e,1,ee,Z)?"<a class='ui-datepicker-next ui-corner-all' data-handler='next' data-event='click' title='"+n+"'><span class='ui-icon ui-icon-circle-triangle-"+(B?"w":"e")+"'>"+n+"</span></a>":W?"":"<a class='ui-datepicker-next ui-corner-all ui-state-disabled' title='"+n+"'><span class='ui-icon ui-icon-circle-triangle-"+(B?"w":"e")+"'>"+n+"</span></a>",o=this._get(e,"currentText"),s=this._get(e,"gotoCurrent")&&e.currentDay?K:q,o=z?this.formatDate(o,s,this._getFormatConfig(e)):o,l=e.inline?"":"<button type='button' class='ui-datepicker-close ui-state-default ui-priority-primary ui-corner-all' data-handler='hide' data-event='click'>"+this._get(e,"closeText")+"</button>",c=H?"<div class='ui-datepicker-buttonpane ui-widget-content'>"+(B?l:"")+(this._isInRange(e,s)?"<button type='button' class='ui-datepicker-current ui-state-default ui-priority-secondary ui-corner-all' data-handler='today' data-event='click'>"+o+"</button>":"")+(B?"":l)+"</div>":"",d=parseInt(this._get(e,"firstDay"),10),d=isNaN(d)?0:d,u=this._get(e,"showWeek"),h=this._get(e,"dayNames"),p=this._get(e,"dayNamesMin"),f=this._get(e,"monthNames"),g=this._get(e,"monthNamesShort"),m=this._get(e,"beforeShowDay"),v=this._get(e,"showOtherMonths"),y=this._get(e,"selectOtherMonths"),b=this._getDefaultDate(e),w="",C=0;C<V[0];C++){for(k="",this.maxRows=4,x=0;x<V[1];x++){if(_=this._daylightSavingAdjust(new Date(ee,Z,e.selectedDay)),M=" ui-corner-all",A="",Q){if(A+="<div class='ui-datepicker-group",1<V[1])switch(x){case 0:A+=" ui-datepicker-group-first",M=" ui-corner-"+(B?"right":"left");break;case V[1]-1:A+=" ui-datepicker-group-last",M=" ui-corner-"+(B?"left":"right");break;default:A+=" ui-datepicker-group-middle",M=""}A+="'>"}for(A+="<div class='ui-datepicker-header ui-widget-header ui-helper-clearfix"+M+"'>"+(/all|left/.test(M)&&0===C?B?r:i:"")+(/all|right/.test(M)&&0===C?B?i:r:"")+this._generateMonthYearHeader(e,Z,ee,G,X,0<C||0<x,f,g)+"</div><table class='ui-datepicker-calendar'><thead><tr>",T=u?"<th class='ui-datepicker-week-col'>"+this._get(e,"weekHeader")+"</th>":"",S=0;S<7;S++)T+="<th scope='col'"+(5<=(S+d+6)%7?" class='ui-datepicker-week-end'":"")+"><span title='"+h[D=(S+d)%7]+"'>"+p[D]+"</span></th>";for(A+=T+"</tr></thead><tbody>",$=this._getDaysInMonth(ee,Z),ee===e.selectedYear&&Z===e.selectedMonth&&(e.selectedDay=Math.min(e.selectedDay,$)),I=(this._getFirstDayOfMonth(ee,Z)-d+7)%7,F=Math.ceil((I+$)/7),j=Q&&this.maxRows>F?this.maxRows:F,this.maxRows=j,E=this._daylightSavingAdjust(new Date(ee,Z,1-I)),L=0;L<j;L++){for(A+="<tr>",R=u?"<td class='ui-datepicker-week-col'>"+this._get(e,"calculateWeek")(E)+"</td>":"",S=0;S<7;S++)P=m?m.apply(e.input?e.input[0]:null,[E]):[!0,""],O=(N=E.getMonth()!==Z)&&!y||!P[0]||G&&E<G||X&&X<E,R+="<td class='"+(5<=(S+d+6)%7?" ui-datepicker-week-end":"")+(N?" ui-datepicker-other-month":"")+(E.getTime()===_.getTime()&&Z===e.selectedMonth&&e._keyEvent||b.getTime()===E.getTime()&&b.getTime()===_.getTime()?" "+this._dayOverClass:"")+(O?" "+this._unselectableClass+" ui-state-disabled":"")+(N&&!v?"":" "+P[1]+(E.getTime()===K.getTime()?" "+this._currentClass:"")+(E.getTime()===q.getTime()?" ui-datepicker-today":""))+"'"+(N&&!v||!P[2]?"":" title='"+P[2].replace(/'/g,"&#39;")+"'")+(O?"":" data-handler='selectDay' data-event='click' data-month='"+E.getMonth()+"' data-year='"+E.getFullYear()+"'")+">"+(N&&!v?"&#xa0;":O?"<span class='ui-state-default'>"+E.getDate()+"</span>":"<a class='ui-state-default"+(E.getTime()===q.getTime()?" ui-state-highlight":"")+(E.getTime()===K.getTime()?" ui-state-active":"")+(N?" ui-priority-secondary":"")+"' href='#' aria-label='"+E.getDate()+"'>"+E.getDate()+"</a>")+"</td>",E.setDate(E.getDate()+1),E=this._daylightSavingAdjust(E);A+=R+"</tr>"}11<++Z&&(Z=0,ee++),k+=A+="</tbody></table>"+(Q?"</div>"+(0<V[0]&&x===V[1]-1?"<div class='ui-datepicker-row-break'></div>":""):"")}w+=k}return w+=c,e._keyEvent=!1,w},_generateMonthYearHeader:function(e,t,a,i,n,r,o,s){var l,c,d,u,h,p,f,g,m=this._get(e,"changeMonth"),v=this._get(e,"changeYear"),y=this._get(e,"showMonthAfterYear"),b="<div class='ui-datepicker-title'>",w="";if(r||!m)w+="<span class='ui-datepicker-month'>"+o[t]+"</span>";else{for(l=i&&i.getFullYear()===a,c=n&&n.getFullYear()===a,w+="<select class='ui-datepicker-month' data-handler='selectMonth' data-event='change'>",d=0;d<12;d++)(!l||d>=i.getMonth())&&(!c||d<=n.getMonth())&&(w+="<option value='"+d+"'"+(d===t?" selected='selected'":"")+">"+s[d]+"</option>");w+="</select>"}if(y||(b+=w+(!r&&m&&v?"":"&#xa0;")),!e.yearshtml)if(e.yearshtml="",r||!v)b+="<span class='ui-datepicker-year'>"+a+"</span>";else{for(u=this._get(e,"yearRange").split(":"),h=(new Date).getFullYear(),f=(p=function(e){var t=e.match(/c[+\-].*/)?a+parseInt(e.substring(1),10):e.match(/[+\-].*/)?h+parseInt(e,10):parseInt(e,10);return isNaN(t)?h:t})(u[0]),g=Math.max(f,p(u[1]||"")),f=i?Math.max(f,i.getFullYear()):f,g=n?Math.min(g,n.getFullYear()):g,e.yearshtml+="<select class='ui-datepicker-year' data-handler='selectYear' data-event='change'>";f<=g;f++)e.yearshtml+="<option value='"+f+"'"+(f===a?" selected='selected'":"")+">"+f+"</option>";e.yearshtml+="</select>",b+=e.yearshtml,e.yearshtml=null}return b+=this._get(e,"yearSuffix"),y&&(b+=(!r&&m&&v?"":"&#xa0;")+w),b+="</div>"},_adjustInstDate:function(e,t,a){var i=e.selectedYear+("Y"===a?t:0),n=e.selectedMonth+("M"===a?t:0),r=Math.min(e.selectedDay,this._getDaysInMonth(i,n))+("D"===a?t:0),o=this._restrictMinMax(e,this._daylightSavingAdjust(new Date(i,n,r)));e.selectedDay=o.getDate(),e.drawMonth=e.selectedMonth=o.getMonth(),e.drawYear=e.selectedYear=o.getFullYear(),"M"!==a&&"Y"!==a||this._notifyChange(e)},_restrictMinMax:function(e,t){var a=this._getMinMaxDate(e,"min"),i=this._getMinMaxDate(e,"max"),n=a&&t<a?a:t;return i&&i<n?i:n},_notifyChange:function(e){var t=this._get(e,"onChangeMonthYear");t&&t.apply(e.input?e.input[0]:null,[e.selectedYear,e.selectedMonth+1,e])},_getNumberOfMonths:function(e){var t=this._get(e,"numberOfMonths");return null==t?[1,1]:"number"==typeof t?[1,t]:t},_getMinMaxDate:function(e,t){return this._determineDate(e,this._get(e,t+"Date"),null)},_getDaysInMonth:function(e,t){return 32-this._daylightSavingAdjust(new Date(e,t,32)).getDate()},_getFirstDayOfMonth:function(e,t){return new Date(e,t,1).getDay()},_canAdjustMonth:function(e,t,a,i){var n=this._getNumberOfMonths(e),r=this._daylightSavingAdjust(new Date(a,i+(t<0?t:n[0]*n[1]),1));return t<0&&r.setDate(this._getDaysInMonth(r.getFullYear(),r.getMonth())),this._isInRange(e,r)},_isInRange:function(e,t){var a,i,n=this._getMinMaxDate(e,"min"),r=this._getMinMaxDate(e,"max"),o=null,s=null,l=this._get(e,"yearRange");return l&&(a=l.split(":"),i=(new Date).getFullYear(),o=parseInt(a[0],10),s=parseInt(a[1],10),a[0].match(/[+\-].*/)&&(o+=i),a[1].match(/[+\-].*/)&&(s+=i)),(!n||t.getTime()>=n.getTime())&&(!r||t.getTime()<=r.getTime())&&(!o||t.getFullYear()>=o)&&(!s||t.getFullYear()<=s)},_getFormatConfig:function(e){var t=this._get(e,"shortYearCutoff");return{shortYearCutoff:t="string"!=typeof t?t:(new Date).getFullYear()%100+parseInt(t,10),dayNamesShort:this._get(e,"dayNamesShort"),dayNames:this._get(e,"dayNames"),monthNamesShort:this._get(e,"monthNamesShort"),monthNames:this._get(e,"monthNames")}},_formatDate:function(e,t,a,i){t||(e.currentDay=e.selectedDay,e.currentMonth=e.selectedMonth,e.currentYear=e.selectedYear);var n=t?"object"==typeof t?t:this._daylightSavingAdjust(new Date(i,a,t)):this._daylightSavingAdjust(new Date(e.currentYear,e.currentMonth,e.currentDay));return this.formatDate(this._get(e,"dateFormat"),n,this._getFormatConfig(e))}}),k.fn.datepicker=function(e){if(!this.length)return this;k.datepicker.initialized||(k(document).on("mousedown",k.datepicker._checkExternalClick),k.datepicker.initialized=!0),0===k("#"+k.datepicker._mainDivId).length&&k("body").append(k.datepicker.dpDiv);var t=Array.prototype.slice.call(arguments,1);return"string"!=typeof e||"isDisabled"!==e&&"getDate"!==e&&"widget"!==e?"option"===e&&2===arguments.length&&"string"==typeof arguments[1]?k.datepicker["_"+e+"Datepicker"].apply(k.datepicker,[this[0]].concat(t)):this.each(function(){"string"==typeof e?k.datepicker["_"+e+"Datepicker"].apply(k.datepicker,[this].concat(t)):k.datepicker._attachDatepicker(this,e)}):k.datepicker["_"+e+"Datepicker"].apply(k.datepicker,[this[0]].concat(t))},k.datepicker=new e,k.datepicker.initialized=!1,k.datepicker.uuid=(new Date).getTime(),k.datepicker.version="1.12.1";k.datepicker});var SCM=SCM||{};!function(e,d,i,t){var a=d("#Toolbar"),u=d("#ViewsDrop"),n=d("#ShareDrop"),r=d("#ToolsDrop");function o(){var e;!function(){if(d(".tab-item").parent("li").show(),d(".tabs-content").length){var t="";d(".tabs-content > .content").each(function(){var e=d(this);e.hasClass("active")&&(t=e.attr("id"))}),d("#ViewsDrop li").show(),d("#ViewsDrop").find('[data-tab="#'+t+'"]').closest("li").hide()}}(),(e=d(".item-with-dropdown")).show(),e.each(function(){var t=!1,a=d(this);a.find("ul li").each(function(){var e="none"===a.css("display");a.is(":visible")?t=!0:e||(t=!0)}),t||a.hide()})}function s(e,t){if(d(e,"#ContentTab").length){var i=d('.widget-items[data-widgetname="'+t+'"]').children(),a=u.children(".article-content-filter");d("#ContentTabFilteredView");a.filter('[data-content-filter="article-content"]').hide();var n=i.filter(".table-wrap, .fig-section").add(i.has(".table-wrap, .fig-section"));0===n.length&&a.remove('[data-content-filter="figures-tables"]');var r=i.filter(".video-section");0===r.length&&a.remove('[data-content-filter="video"]');var o=i.filter(".audio-section");0===o.length&&a.remove('[data-content-filter="audio"]');var s=d(".widget-ArticleDataSupplements, .supplementary-material");0===s.length&&a.remove('[data-content-filter="supplementary-data"]');var l=d("#ContentTab").find("div.downloadImagesppt"),c=d("#ContentTab").find("div.comments");a.on("click",function(){d(this).hide(),d(this).siblings().show();var e,t=d(this).attr("data-content-filter"),a=d(".article-metadata-standalone-panel");"figures-tables"===t?e=n:"video"===t?e=r:"audio"===t?e=o:"supplementary-data"===t&&(e=s),null!=e&&e.length?(i.hide(),s.hide(),e.show(),c.hide(),e.filter(".fig-section:not(:has(a[restricted]))").length?l.show():l.hide()):(i.show(),0<a.children().length?a.show():a.hide(),s.show(),c.show(),l.hide()),SCM.SiteJS.restrictedImages()})}}e.closeDropDownIfChildItemClicked=function(){d("#Toolbar .f-dropdown > li").on("click",function(){d(this).closest(".toolbar-item").trigger("click")})},e.removeTabLinkIfTabIsEmpty=function(e){d(e).find(".tab-trigger").each(function(){var e=d(this),t=e.attr("data-tab");if("#ContentTab"!==t&&d(t).find("*").length<20){var a=d(t).html();0===(void 0!==a?d.trim(a.replace(/(<([^>]+)>)/gi,"")):1).length&&e.parent("li").remove()}})},e.hideTabIfDropdownIsEmpty=function(){for(var e=[n,r],t=0;t<e.length;t++){var a=e[t];a.children("li").length<1&&a.parent().hide()}u.children("li").length<2&&u.parent().hide()},e.toggleTabContent=function(){d(".tab-trigger").on("click",function(e){e.preventDefault();var t=d(this).attr("data-tab"),a=d(t);a.siblings().removeClass("active"),a.addClass("active"),"#FigureTab"===t&&i.trigger("scroll"),o()})},e.styleToolbarStates=function(){a.on("click",".toolbar-item",function(){var e=d(this);e.addClass("clicked"),e.siblings().removeClass("clicked")}),i.on("click",function(){d(".toolbar-item").each(function(){var e=d(this);e.find("ul").hasClass("open")||e.removeClass("clicked")})})},e.initArticleContentFilter=function(){d(document.body).hasClass("pg_ChapterStandard")?s(".widget-BookSectionsText","BookSectionsText"):s(".widget-ArticleFulltext","ArticleFulltext")},e.init=function(){a.length&&(o(),e.removeTabLinkIfTabIsEmpty(u),e.styleToolbarStates(),e.toggleTabContent(),e.initArticleContentFilter(),e.hideTabIfDropdownIsEmpty())}}(SCM.Toolbar=SCM.Toolbar||{},jQuery,$(document)),function(e){"use strict";e.Placeholders={Utils:{addEventListener:function(e,t,a){return e.addEventListener?e.addEventListener(t,a,!1):e.attachEvent?e.attachEvent("on"+t,a):void 0},inArray:function(e,t){var a,i;for(a=0,i=e.length;a<i;a++)if(e[a]===t)return!0;return!1},moveCaret:function(e,t){var a;e.createTextRange?((a=e.createTextRange()).move("character",t),a.select()):e.selectionStart&&(e.focus(),e.setSelectionRange(t,t))},changeType:function(e,t){try{return e.type=t,!0}catch(e){return!1}}}}}(this),function(e){"use strict";function t(){}function s(){try{return document.activeElement}catch(e){}}function l(e,t){var a,i,n=!!t&&e.value!==t,r=e.value===e.getAttribute(_);return!(!n&&!r||"true"!==e.getAttribute(M))&&(e.removeAttribute(M),e.value=e.value.replace(e.getAttribute(_),""),e.className=e.className.replace(x,""),i=e.getAttribute($),0<=parseInt(i,10)&&(e.setAttribute("maxLength",i),e.removeAttribute($)),(a=e.getAttribute(A))&&(e.type=a),!0)}function c(e){var t=e.getAttribute(_);return!(""!==e.value||!t)&&(e.setAttribute(M,"true"),e.value=t,e.className+=" "+k,e.getAttribute($)||(e.setAttribute($,e.maxLength),e.removeAttribute("maxLength")),e.getAttribute(A)?e.type="text":"password"===e.type&&L.changeType(e,"text")&&e.setAttribute(A,"password"),!0)}function a(e,t){var a,i,n,r,o;if(e&&e.getAttribute(_))t(e);else for(i=e?e.getElementsByTagName("input"):u,n=e?e.getElementsByTagName("textarea"):h,o=0,r=(a=i?i.length:0)+(n?n.length:0);o<r;o++)t(o<a?i[o]:n[o-a])}function d(e){a(e,l)}function i(e){var t,a,i,n,r,o;e.form&&("string"==typeof(v=e.form)&&(v=document.getElementById(v)),v.getAttribute(T)||(L.addEventListener(v,"submit",(o=v,function(){d(o)})),v.setAttribute(T,"true"))),L.addEventListener(e,"focus",(r=e,function(){p&&r.value===r.getAttribute(_)&&"true"===r.getAttribute(M)?L.moveCaret(r,0):l(r)})),L.addEventListener(e,"blur",(n=e,function(){c(n)})),p&&(L.addEventListener(e,"keydown",(i=e,function(e){return f=i.value,"true"===i.getAttribute(M)&&f===i.getAttribute(_)&&L.inArray(C,e.keyCode)?(e.preventDefault&&e.preventDefault(),!1):void 0})),L.addEventListener(e,"keyup",(a=e,function(){l(a,f),""===a.value&&(a.blur(),L.moveCaret(a,0))})),L.addEventListener(e,"click",(t=e,function(){t===s()&&t.value===t.getAttribute(_)&&"true"===t.getAttribute(M)&&L.moveCaret(t,0)}))),e.setAttribute(D,"true"),e.setAttribute(_,g),(p||e!==s())&&c(e)}var u,h,p,n,f,r,o,g,m,v,y,b,w,S=["text","search","url","tel","email","password","number","textarea"],C=[27,33,34,35,36,37,38,39,40,8,46],k="placeholdersjs",x=RegExp("(?:^|\\s)"+k+"(?!\\S)"),_="data-placeholder-value",M="data-placeholder-active",A="data-placeholder-type",T="data-placeholder-submit",D="data-placeholder-bound",$="data-placeholder-maxlength",I=document.createElement("input"),F=document.getElementsByTagName("head")[0],j=document.documentElement,E=e.Placeholders,L=E.Utils;if(E.nativeSupport=void 0!==I.placeholder,!E.nativeSupport){for(u=document.getElementsByTagName("input"),h=document.getElementsByTagName("textarea"),p="false"===j.getAttribute("data-placeholder-focus"),n="false"!==j.getAttribute("data-placeholder-live"),(r=document.createElement("style")).type="text/css",o=document.createTextNode("."+k+" { color:#ccc; }"),r.styleSheet?r.styleSheet.cssText=o.nodeValue:r.appendChild(o),F.insertBefore(r,F.firstChild),w=0,b=u.length+h.length;w<b;w++)y=u.length>w?u[w]:h[w-u.length],(g=y.attributes.placeholder)&&((g=g.nodeValue)&&L.inArray(S,y.type)&&i(y));m=setInterval(function(){for(w=0,b=u.length+h.length;w<b;w++)y=u.length>w?u[w]:h[w-u.length],(g=y.attributes.placeholder)?(g=g.nodeValue)&&L.inArray(S,y.type)&&(y.getAttribute(D)||i(y),(g!==y.getAttribute(_)||"password"===y.type&&!y.getAttribute(A))&&("password"===y.type&&!y.getAttribute(A)&&L.changeType(y,"text")&&y.setAttribute(A,"password"),y.value===y.getAttribute(_)&&(y.value=g),y.setAttribute(_,g))):y.getAttribute(M)&&(l(y),y.removeAttribute(_));n||clearInterval(m)},100)}L.addEventListener(e,"beforeunload",function(){E.disable()}),E.disable=E.nativeSupport?t:d,E.enable=E.nativeSupport?t:function(e){a(e,c)}}(this),function(e){"function"==typeof define&&define.amd?define(["jquery"],e):"object"==typeof exports?module.exports=e(require("jquery")):e(jQuery)}(function(me){me.fn.jScrollPane=function(a){function i(v,e){function y(e){var t,a,i,n,r,o,s,l,c,d,u,h,p,f,g=!1,m=!1;if(L=e,void 0===R)r=v.scrollTop(),o=v.scrollLeft(),v.css({overflow:"hidden",padding:0}),P=v.innerWidth()+he,N=v.innerHeight(),v.width(P),R=me('<div class="jspPane" />').css("padding",ue).append(v.children()),O=me('<div class="jspContainer" />').css({width:P+"px",height:N+"px"}).append(R).appendTo(v);else{if(v.css("width",""),g=L.stickToBottom&&(20<(l=q-N)&&l-j()<10),m=L.stickToRight&&(20<(s=U-P)&&s-F()<10),(n=v.innerWidth()+he!=P||v.outerHeight()!=N)&&(P=v.innerWidth()+he,N=v.innerHeight(),O.css({width:P+"px",height:N+"px"})),!n&&pe==U&&R.outerHeight()==q)return void v.width(P);pe=U,R.css("width",""),v.width(P),O.find(">.jspVerticalBar,>.jspHorizontalBar").remove().end()}R.css("overflow","auto"),U=e.contentWidth?e.contentWidth:R[0].scrollWidth,q=R[0].scrollHeight,R.css("overflow",""),W=1<(H=q/N),(z=1<(B=U/P))||W?(v.addClass("jspScrollable"),(t=L.maintainPosition&&(Y||G))&&(a=F(),i=j()),W&&(O.append(me('<div class="jspVerticalBar" />').append(me('<div class="jspCap jspCapTop" />'),me('<div class="jspTrack" />').append(me('<div class="jspDrag" />').append(me('<div class="jspDragTop" />'),me('<div class="jspDragBottom" />'))),me('<div class="jspCap jspCapBottom" />'))),X=O.find(">.jspVerticalBar"),Z=X.find(">.jspTrack"),V=Z.find(">.jspDrag"),L.showArrows&&(ae=me('<a class="jspArrow jspArrowUp" />').bind("mousedown.jsp",C(0,-1)).bind("click.jsp",E),ie=me('<a class="jspArrow jspArrowDown" />').bind("mousedown.jsp",C(0,1)).bind("click.jsp",E),L.arrowScrollOnHover&&(ae.bind("mouseover.jsp",C(0,-1,ae)),ie.bind("mouseover.jsp",C(0,1,ie))),S(Z,L.verticalArrowPositions,ae,ie)),ee=N,O.find(">.jspVerticalBar>.jspCap:visible,>.jspVerticalBar>.jspArrow").each(function(){ee-=me(this).outerHeight()}),V.hover(function(){V.addClass("jspHover")},function(){V.removeClass("jspHover")}).bind("mousedown.jsp",function(e){me("html").bind("dragstart.jsp selectstart.jsp",E),V.addClass("jspActive");var t=e.pageY-V.position().top;return me("html").bind("mousemove.jsp",function(e){_(e.pageY-t,!1)}).bind("mouseup.jsp mouseleave.jsp",x),!1}),b()),z&&(O.append(me('<div class="jspHorizontalBar" />').append(me('<div class="jspCap jspCapLeft" />'),me('<div class="jspTrack" />').append(me('<div class="jspDrag" />').append(me('<div class="jspDragLeft" />'),me('<div class="jspDragRight" />'))),me('<div class="jspCap jspCapRight" />'))),ne=O.find(">.jspHorizontalBar"),re=ne.find(">.jspTrack"),Q=re.find(">.jspDrag"),L.showArrows&&(le=me('<a class="jspArrow jspArrowLeft" />').bind("mousedown.jsp",C(-1,0)).bind("click.jsp",E),ce=me('<a class="jspArrow jspArrowRight" />').bind("mousedown.jsp",C(1,0)).bind("click.jsp",E),L.arrowScrollOnHover&&(le.bind("mouseover.jsp",C(-1,0,le)),ce.bind("mouseover.jsp",C(1,0,ce))),S(re,L.horizontalArrowPositions,le,ce)),Q.hover(function(){Q.addClass("jspHover")},function(){Q.removeClass("jspHover")}).bind("mousedown.jsp",function(e){me("html").bind("dragstart.jsp selectstart.jsp",E),Q.addClass("jspActive");var t=e.pageX-Q.position().left;return me("html").bind("mousemove.jsp",function(e){A(e.pageX-t,!1)}).bind("mouseup.jsp mouseleave.jsp",x),!1}),oe=O.innerWidth(),w()),function(){if(z&&W){var e=re.outerHeight(),t=Z.outerWidth();ee-=e,me(ne).find(">.jspCap:visible,>.jspArrow").each(function(){oe+=me(this).outerWidth()}),oe-=t,N-=t,P-=e,re.parent().append(me('<div class="jspCorner" />').css("width",e+"px")),b(),w()}z&&R.width(O.outerWidth()-he+"px"),q=R.outerHeight(),H=q/N,z&&((se=Math.ceil(1/B*oe))>L.horizontalDragMaxWidth?se=L.horizontalDragMaxWidth:se<L.horizontalDragMinWidth&&(se=L.horizontalDragMinWidth),Q.width(se+"px"),K=oe-se,T(G)),W&&((te=Math.ceil(1/H*ee))>L.verticalDragMaxHeight?te=L.verticalDragMaxHeight:te<L.verticalDragMinHeight&&(te=L.verticalDragMinHeight),V.height(te+"px"),J=ee-te,M(Y))}(),t&&($(m?U-P:a,!1),D(g?q-N:i,!1)),R.find(":input,a").unbind("focus.jsp").bind("focus.jsp",function(e){I(e.target,!1)}),O.unbind(ge).bind(ge,function(e,t,a,i){G||(G=0),Y||(Y=0);var n=G,r=Y,o=e.deltaFactor||L.mouseWheelSpeed;return fe.scrollBy(a*o,-i*o,!1),n==G&&r==Y}),f=!1,O.unbind("touchstart.jsp touchmove.jsp touchend.jsp click.jsp-touchclick").bind("touchstart.jsp",function(e){var t=e.originalEvent.touches[0];c=F(),d=j(),u=t.pageX,h=t.pageY,f=!(p=!1)}).bind("touchmove.jsp",function(e){if(f){var t=e.originalEvent.touches[0],a=G,i=Y;return fe.scrollTo(c+u-t.pageX,d+h-t.pageY),p=p||5<Math.abs(u-t.pageX)||5<Math.abs(h-t.pageY),a==G&&i==Y}}).bind("touchend.jsp",function(){f=!1}).bind("click.jsp-touchclick",function(){return p?p=!1:void 0}),L.enableKeyboardNavigation&&function(){function i(){var e=G,t=Y;switch(n){case 40:fe.scrollByY(L.keyboardSpeed,!1);break;case 38:fe.scrollByY(-L.keyboardSpeed,!1);break;case 34:case 32:fe.scrollByY(N*L.scrollPagePercent,!1);break;case 33:fe.scrollByY(-N*L.scrollPagePercent,!1);break;case 39:fe.scrollByX(L.keyboardSpeed,!1);break;case 37:fe.scrollByX(-L.keyboardSpeed,!1)}return r=e!=G||t!=Y}var n,r,o=[];z&&o.push(ne[0]),W&&o.push(X[0]),R.bind("focus.jsp",function(){v.focus()}),v.attr("tabindex",0).unbind("keydown.jsp keypress.jsp").bind("keydown.jsp",function(e){if(e.target===this||o.length&&me(e.target).closest(o).length){var t=G,a=Y;switch(e.keyCode){case 40:case 38:case 34:case 32:case 33:case 39:case 37:n=e.keyCode,i();break;case 35:D(q-N),n=null;break;case 36:D(0),n=null}return!(r=e.keyCode==n&&t!=G||a!=Y)}}).bind("keypress.jsp",function(e){return e.keyCode==n&&i(),e.target===this||o.length&&me(e.target).closest(o).length?!r:void 0}),L.hideFocus?(v.css("outline","none"),"hideFocus"in O[0]&&v.attr("hideFocus",!0)):(v.css("outline",""),"hideFocus"in O[0]&&v.attr("hideFocus",!1))}(),L.clickOnTrack&&(k(),W&&Z.bind("mousedown.jsp",function(n){if(void 0===n.originalTarget||n.originalTarget==n.currentTarget){var r,o=me(this),e=o.offset(),s=n.pageY-e.top-Y,l=!0,c=function(){var e=o.offset(),t=n.pageY-e.top-te/2,a=N*L.scrollPagePercent,i=J*a/(q-N);if(s<0)t<Y-i?fe.scrollByY(-a):_(t);else{if(!(0<s))return void d();Y+i<t?fe.scrollByY(a):_(t)}r=setTimeout(c,l?L.initialDelay:L.trackClickRepeatFreq),l=!1},d=function(){r&&clearTimeout(r),r=null,me(document).unbind("mouseup.jsp",d)};return c(),me(document).bind("mouseup.jsp",d),!1}}),z&&re.bind("mousedown.jsp",function(n){if(void 0===n.originalTarget||n.originalTarget==n.currentTarget){var r,o=me(this),e=o.offset(),s=n.pageX-e.left-G,l=!0,c=function(){var e=o.offset(),t=n.pageX-e.left-se/2,a=P*L.scrollPagePercent,i=K*a/(U-P);if(s<0)t<G-i?fe.scrollByX(-a):A(t);else{if(!(0<s))return void d();G+i<t?fe.scrollByX(a):A(t)}r=setTimeout(c,l?L.initialDelay:L.trackClickRepeatFreq),l=!1},d=function(){r&&clearTimeout(r),r=null,me(document).unbind("mouseup.jsp",d)};return c(),me(document).bind("mouseup.jsp",d),!1}})),function(){if(location.hash&&1<location.hash.length){var e,t,a=escape(location.hash.substr(1));try{e=me("#"+a+', a[name="'+a+'"]')}catch(e){return}e.length&&R.find(a)&&(0===O.scrollTop()?t=setInterval(function(){0<O.scrollTop()&&(I(e,!0),me(document).scrollTop(O.position().top),clearInterval(t))},50):(I(e,!0),me(document).scrollTop(O.position().top)))}}(),L.hijackInternalLinks&&(me(document.body).data("jspHijack")||(me(document.body).data("jspHijack",!0),me(document.body).delegate('a[href*="#"]',"click",function(e){var t,a,i,n,r,o=this.href.substr(0,this.href.indexOf("#")),s=location.href;if(-1!==location.href.indexOf("#")&&(s=location.href.substr(0,location.href.indexOf("#"))),o===s){t=escape(this.href.substr(this.href.indexOf("#")+1));try{a=me("#"+t+', a[name="'+t+'"]')}catch(e){return}a.length&&((i=a.closest(".jspScrollable")).data("jsp").scrollToElement(a,!0),i[0].scrollIntoView&&(n=me(window).scrollTop(),((r=a.offset().top)<n||r>n+me(window).height())&&i[0].scrollIntoView()),e.preventDefault())}})))):(v.removeClass("jspScrollable"),R.css({top:0,left:0,width:O.width()-he}),O.unbind(ge),R.find(":input,a").unbind("focus.jsp"),v.attr("tabindex","-1").removeAttr("tabindex").unbind("keydown.jsp keypress.jsp"),R.unbind(".jsp"),k()),L.autoReinitialise&&!de?de=setInterval(function(){y(L)},L.autoReinitialiseDelay):!L.autoReinitialise&&de&&clearInterval(de),r&&v.scrollTop(0)&&D(r,!1),o&&v.scrollLeft(0)&&$(o,!1),v.trigger("jsp-initialised",[z||W])}function b(){Z.height(ee+"px"),Y=0,t=L.verticalGutter+Z.outerWidth(),R.width(P-t-he);try{0===X.position().left&&R.css("margin-left",t+"px")}catch(e){}}function w(){O.find(">.jspHorizontalBar>.jspCap:visible,>.jspHorizontalBar>.jspArrow").each(function(){oe-=me(this).outerWidth()}),re.width(oe+"px"),G=0}function S(e,t,a,i){var n,r="before",o="after";"os"==t&&(t=/Mac/.test(navigator.platform)?"after":"split"),t==r?o=t:t==o&&(r=t,n=a,a=i,i=n),e[r](a)[o](i)}function C(e,t,a){return function(){return function(e,t,a,i){a=me(a).addClass("jspActive");var n,r,o=!0,s=function(){0!==e&&fe.scrollByX(e*L.arrowButtonSpeed),0!==t&&fe.scrollByY(t*L.arrowButtonSpeed),r=setTimeout(s,o?L.initialDelay:L.arrowRepeatFreq),o=!1};s(),n=i?"mouseout.jsp":"mouseup.jsp",(i=i||me("html")).bind(n,function(){a.removeClass("jspActive"),r&&clearTimeout(r),r=null,i.unbind(n)})}(e,t,this,a),this.blur(),!1}}function k(){re&&re.unbind("mousedown.jsp"),Z&&Z.unbind("mousedown.jsp")}function x(){me("html").unbind("dragstart.jsp selectstart.jsp mousemove.jsp mouseup.jsp mouseleave.jsp"),V&&V.removeClass("jspActive"),Q&&Q.removeClass("jspActive")}function _(e,t){if(W){e<0?e=0:J<e&&(e=J);var a=new me.Event("jsp-will-scroll-y");if(v.trigger(a,[e]),!a.isDefaultPrevented()){var i=e||0,n=0===i,r=i==J,o=-(e/J)*(q-N);void 0===t&&(t=L.animateScroll),t?fe.animate(V,"top",e,M,function(){v.trigger("jsp-user-scroll-y",[-o,n,r])}):(V.css("top",e),M(e),v.trigger("jsp-user-scroll-y",[-o,n,r]))}}}function M(e){void 0===e&&(e=V.position().top),O.scrollTop(0);var t,a,i=0===(Y=e||0),n=Y==J,r=-(e/J)*(q-N);(o!=i||l!=n)&&(o=i,l=n,v.trigger("jsp-arrow-change",[o,l,s,c])),t=i,a=n,L.showArrows&&(ae[t?"addClass":"removeClass"]("jspDisabled"),ie[a?"addClass":"removeClass"]("jspDisabled")),R.css("top",r),v.trigger("jsp-scroll-y",[-r,i,n]).trigger("scroll")}function A(e,t){if(z){e<0?e=0:K<e&&(e=K);var a=new me.Event("jsp-will-scroll-x");if(v.trigger(a,[e]),!a.isDefaultPrevented()){var i=e||0,n=0===i,r=i==K,o=-(e/K)*(U-P);void 0===t&&(t=L.animateScroll),t?fe.animate(Q,"left",e,T,function(){v.trigger("jsp-user-scroll-x",[-o,n,r])}):(Q.css("left",e),T(e),v.trigger("jsp-user-scroll-x",[-o,n,r]))}}}function T(e){void 0===e&&(e=Q.position().left),O.scrollTop(0);var t,a,i=0===(G=e||0),n=G==K,r=-(e/K)*(U-P);(s!=i||c!=n)&&(s=i,c=n,v.trigger("jsp-arrow-change",[o,l,s,c])),t=i,a=n,L.showArrows&&(le[t?"addClass":"removeClass"]("jspDisabled"),ce[a?"addClass":"removeClass"]("jspDisabled")),R.css("left",r),v.trigger("jsp-scroll-x",[-r,i,n]).trigger("scroll")}function D(e,t){_(e/(q-N)*J,t)}function $(e,t){A(e/(U-P)*K,t)}function I(e,t,a){var i,n,r,o,s,l,c,d,u,h=0,p=0;try{i=me(e)}catch(e){return}for(n=i.outerHeight(),r=i.outerWidth(),O.scrollTop(0),O.scrollLeft(0);!i.is(".jspPane");)if(h+=i.position().top,p+=i.position().left,i=i.offsetParent(),/^body|html$/i.test(i[0].nodeName))return;l=(o=j())+N,h<o||t?d=h-L.horizontalGutter:l<h+n&&(d=h-N+n+L.horizontalGutter),isNaN(d)||D(d,a),c=(s=F())+P,p<s||t?u=p-L.horizontalGutter:c<p+r&&(u=p-P+r+L.horizontalGutter),isNaN(u)||$(u,a)}function F(){return-R.position().left}function j(){return-R.position().top}function E(){return!1}var L,R,P,N,O,U,q,B,H,W,z,V,J,Y,Q,K,G,X,Z,t,ee,te,ae,ie,ne,re,oe,se,le,ce,de,ue,he,pe,fe=this,o=!0,s=!0,l=!1,c=!1,a=v.clone(!1,!1).empty(),ge=me.fn.mwheelIntent?"mwheelIntent.jsp":"mousewheel.jsp";he="border-box"===v.css("box-sizing")?ue=0:(ue=v.css("paddingTop")+" "+v.css("paddingRight")+" "+v.css("paddingBottom")+" "+v.css("paddingLeft"),(parseInt(v.css("paddingLeft"),10)||0)+(parseInt(v.css("paddingRight"),10)||0)),me.extend(fe,{reinitialise:function(e){y(e=me.extend({},L,e))},scrollToElement:function(e,t,a){I(e,t,a)},scrollTo:function(e,t,a){$(e,a),D(t,a)},scrollToX:function(e,t){$(e,t)},scrollToY:function(e,t){D(e,t)},scrollToPercentX:function(e,t){$(e*(U-P),t)},scrollToPercentY:function(e,t){D(e*(q-N),t)},scrollBy:function(e,t,a){fe.scrollByX(e,a),fe.scrollByY(t,a)},scrollByX:function(e,t){A((F()+Math[e<0?"floor":"ceil"](e))/(U-P)*K,t)},scrollByY:function(e,t){_((j()+Math[e<0?"floor":"ceil"](e))/(q-N)*J,t)},positionDragX:function(e,t){A(e,t)},positionDragY:function(e,t){_(e,t)},animate:function(e,t,a,i,n){var r={};r[t]=a,e.animate(r,{duration:L.animateDuration,easing:L.animateEase,queue:!1,step:i,complete:n})},getContentPositionX:function(){return F()},getContentPositionY:function(){return j()},getContentWidth:function(){return U},getContentHeight:function(){return q},getPercentScrolledX:function(){return F()/(U-P)},getPercentScrolledY:function(){return j()/(q-N)},getIsScrollableH:function(){return z},getIsScrollableV:function(){return W},getContentPane:function(){return R},scrollToBottom:function(e){_(J,e)},hijackInternalLinks:me.noop,destroy:function(){var e,t;e=j(),t=F(),v.removeClass("jspScrollable").unbind(".jsp"),R.unbind(".jsp"),v.replaceWith(a.append(R.children())),a.scrollTop(e),a.scrollLeft(t),de&&clearInterval(de)}}),y(e)}return a=me.extend({},me.fn.jScrollPane.defaults,a),me.each(["arrowButtonSpeed","trackClickSpeed","keyboardSpeed"],function(){a[this]=a[this]||a.speed}),this.each(function(){var e=me(this),t=e.data("jsp");t?t.reinitialise(a):(me("script",e).filter('[type="text/javascript"],:not([type])').remove(),t=new i(e,a),e.data("jsp",t))})},me.fn.jScrollPane.defaults={showArrows:!1,maintainPosition:!0,stickToBottom:!1,stickToRight:!1,clickOnTrack:!0,autoReinitialise:!1,autoReinitialiseDelay:500,verticalDragMinHeight:0,verticalDragMaxHeight:99999,horizontalDragMinWidth:0,horizontalDragMaxWidth:99999,contentWidth:void 0,animateScroll:!1,animateDuration:300,animateEase:"linear",hijackInternalLinks:!1,verticalGutter:4,horizontalGutter:4,mouseWheelSpeed:3,arrowButtonSpeed:0,arrowRepeatFreq:50,arrowScrollOnHover:!1,trackClickSpeed:0,trackClickRepeatFreq:70,verticalArrowPositions:"split",horizontalArrowPositions:"split",enableKeyboardNavigation:!0,hideFocus:!1,keyboardSpeed:0,initialDelay:300,speed:30,scrollPagePercent:.8}}),function(e){"function"==typeof define&&define.amd?define(["jquery"],e):"object"==typeof exports?module.exports=e:e(jQuery)}(function(h){var p,f,e=["wheel","mousewheel","DOMMouseScroll","MozMousePixelScroll"],t="onwheel"in document||9<=document.documentMode?["wheel"]:["mousewheel","DomMouseScroll","MozMousePixelScroll"],g=Array.prototype.slice;if(h.event.fixHooks)for(var a=e.length;a;)h.event.fixHooks[e[--a]]=h.event.mouseHooks;var m=h.event.special.mousewheel={version:"3.1.12",setup:function(){if(this.addEventListener)for(var e=t.length;e;)this.addEventListener(t[--e],i,!1);else this.onmousewheel=i;h.data(this,"mousewheel-line-height",m.getLineHeight(this)),h.data(this,"mousewheel-page-height",m.getPageHeight(this))},teardown:function(){if(this.removeEventListener)for(var e=t.length;e;)this.removeEventListener(t[--e],i,!1);else this.onmousewheel=null;h.removeData(this,"mousewheel-line-height"),h.removeData(this,"mousewheel-page-height")},getLineHeight:function(e){var t=h(e),a=t["offsetParent"in h.fn?"offsetParent":"parent"]();return a.length||(a=h("body")),parseInt(a.css("fontSize"),10)||parseInt(t.css("fontSize"),10)||16},getPageHeight:function(e){return h(e).height()},settings:{adjustOldDeltas:!0,normalizeOffset:!0}};function i(e){var t,a=e||window.event,i=g.call(arguments,1),n=0,r=0,o=0,s=0,l=0;if((e=h.event.fix(a)).type="mousewheel","detail"in a&&(o=-1*a.detail),"wheelDelta"in a&&(o=a.wheelDelta),"wheelDeltaY"in a&&(o=a.wheelDeltaY),"wheelDeltaX"in a&&(r=-1*a.wheelDeltaX),"axis"in a&&a.axis===a.HORIZONTAL_AXIS&&(r=-1*o,o=0),n=0===o?r:o,"deltaY"in a&&(n=o=-1*a.deltaY),"deltaX"in a&&(r=a.deltaX,0===o&&(n=-1*r)),0!==o||0!==r){if(1===a.deltaMode){var c=h.data(this,"mousewheel-line-height");n*=c,o*=c,r*=c}else if(2===a.deltaMode){var d=h.data(this,"mousewheel-page-height");n*=d,o*=d,r*=d}if(t=Math.max(Math.abs(o),Math.abs(r)),(!f||t<f)&&y(a,f=t)&&(f/=40),y(a,t)&&(n/=40,r/=40,o/=40),n=Math[1<=n?"floor":"ceil"](n/f),r=Math[1<=r?"floor":"ceil"](r/f),o=Math[1<=o?"floor":"ceil"](o/f),m.settings.normalizeOffset&&this.getBoundingClientRect){var u=this.getBoundingClientRect();s=e.clientX-u.left,l=e.clientY-u.top}return e.deltaX=r,e.deltaY=o,e.deltaFactor=f,e.offsetX=s,e.offsetY=l,e.deltaMode=0,i.unshift(e,n,r,o),p&&clearTimeout(p),p=setTimeout(v,200),(h.event.dispatch||h.event.handle).apply(this,i)}}function v(){f=null}function y(e,t){return m.settings.adjustOldDeltas&&"mousewheel"===e.type&&t%120==0}h.fn.extend({mousewheel:function(e){return e?this.bind("mousewheel",e):this.trigger("mousewheel")},unmousewheel:function(e){return this.unbind("mousewheel",e)}})});var SCM=SCM||{};!function(e,n){e.initDatepicker=function(){n(".ui-datepicker-trigger").remove();var e=n(".datepicker__input");n(".ui-datepicker");e.removeClass("hasDatepicker"),e.datepicker({showOn:"both",buttonImage:"/UI/app/svg/general-calendar.svg",onClose:function(){e.removeClass("hasDatepicker"),t?(t.focus(),t=null):n(this).siblings(".ui-datepicker-trigger").focus()}}).keydown(function(e){e.preventDefault();var t=e.keyCode||e.which;if(9!==t||13!==t){if(37!==t&&38!==t&&39!==t&&40!==t)return!1;var a=n(this).val().split("/"),i=new Date(a[2],a[0]-1,a[1]);switch(t){case 37:i.setDate(i.getDate()-1);break;case 38:i.setDate(i.getDate()-7);break;case 39:i.setDate(i.getDate()+1);break;case 40:i.setDate(i.getDate()+7)}null!==i&&n(this).datepicker("setDate",i)}});var t,a=n(".ui-datepicker-trigger");e.attr("tabindex",-1),a.attr("tabindex",0),a.each(function(){var e=n(this),t=e.siblings("input").attr("id");e.attr("aria-label","open "+t+" datepicker, use arrows to select date")}),a.keypress(function(){t=n(this)})}}(SCM.AccessibleDatepicker=SCM.AccessibleDatepicker||{},jQuery);var SCM=SCM||{};SCM.ClientStatsMaster=function(s,e){function l(e,t,a,i,n,r){this.SourceType=e,this.ActionType=t,this.ActionDescription=a,this.ActionUrl=i,this.SearchData=n,this.IsTurnaway=r}function i(e,t,a,i,n,r){var o=new l(e,t,a,i,n,r).toJson();s.ajax({type:"POST",url:"/Services/UserActionService.svc/TrackUserAction",data:o,contentType:"application/json; charset=utf-8",dataType:"json",async:!0,processData:!0}).fail(function(e,t){window.console&&(console.log("jqXhr.responseText: "+e.responseText),console.log("status: "+t))})}return l.prototype.toJson=function(){return JSON.stringify(this)},{trackContentTabEvents:function(){var e=s("#Toolbar"),t={"#FigureTab":"FiguresClicked","#TableTab":"TablesClicked","#ContentTab":"ArticleClicked","#SupplementTab":"SupplementClicked","#MultimediaTab":"MultimediaClicked"};e.on("click",".tab-trigger",function(){var e=s(this).attr("data-tab");e in t&&i(22,"View",t[e],window.location.href,"",!1)})},trackShares:function(){var e=s("#ShareDrop"),t={addthis_button_email:"EmailClicked",addthis_button_share:"TwitterClicked",addthis_button_facebook:"FacebookClicked",addthis_button_compact:"CompactClicked"};e.on("click","a",function(){var e=s(this).attr("class");e in t&&i(22,"Share",t[e],window.location.href,"",!1)})},trackSingleAction:function(e,t,a){e.on("click",function(){i(22,t,a,window.location.href,"",!1)})}}}(jQuery),$(window).on("load",function(){SCM.ClientStatsMaster.trackContentTabEvents(),SCM.ClientStatsMaster.trackShares(),SCM.ClientStatsMaster.trackSingleAction($('a[data-reveal-id="getCitation"]'),"Tools","GetCitationClicked"),SCM.ClientStatsMaster.trackSingleAction($("div.toolboxGetAlertsWidget"),"Tools","AlertsClicked"),SCM.ClientStatsMaster.trackSingleAction($("div#getAlertsConfirmation"),"Tools","AlertAdded"),SCM.ClientStatsMaster.trackSingleAction($("#PermissionsLink"),"Tools","GetPermissionsClicked"),SCM.ClientStatsMaster.trackSingleAction($("a.tablelink").filter(":parent"),"ViewLargeImage","ViewLargeImageClicked")});var SCM=SCM||{};SCM.JumpLinks=SCM.JumpLinks||{},SCM.JumpLinks=function(l){var c,e,a=[],t=!1;return{init:function(){c=l("html, body"),e=l(".js-jumplink, .sectionLink"),(c.hasClass("pg_article")||c.hasClass("pg_issue"))&&(e.each(function(){var e=l(this),t=r(e.attr("href"));a.push({jumplink:e,target:t})}),l(window).on("scroll",o));e.on("click",function(e){if(c.hasClass("pg_issue")){var t=l(e.target),a=l.deparam.querystring(),i=1;a.page&&(i=Number.parseInt(a.page)),0!=t.data("page")&&t.data("page")!=i&&(window.location="?page="+t.data("page")+t.attr("href"))}else if(c.hasClass("pg_article")){var n=r(l(this).attr("href")).offset().top;c.animate({scrollTop:n},400,function(){l(window).off("scroll",o),l(window).on("scroll",o)})}}),c.hasClass("pg_articlesplitview")&&l(".js-jumplink:contains('References')").parents(".section-jump-link").hide()}};function r(e){var t=l(e);if(0===t.length&&e.startsWith("#")){var a=e.substring(1);t=l("[data-legacy-id='"+a+"']")}return t}function o(){window.scrollY,t||(rAF=requestAnimationFrame(i),t=!0)}function i(){var o=l(".js-jumplink"),s=l.deparam.querystring();l(window).on("scroll",function(){var i=l(this).scrollTop();if(l(".articleClientType").each(function(){var e=l(this).offset().top,t=l(this).attr("id"),a=l('.section-jump-link__link-wrap a[href="#'+t+'"]');e-90<i&&(l(a).length&&l(".list-issue-jumplinks li").removeClass("active"),o.removeClass("active"),l(a).closest(".js-jumplink").addClass("active"))}),c.hasClass("pg_issue")&&!o.hasClass("active")){var e=l("#ArticleListPageSize").val(),t=0;s.page&&(t=Number.parseInt(s.page)-1);var a,n=t*e,r=l(".section-jump-link__link-wrap a");r.each(function(e,t){if(t.dataset.ordinal>n)return l(a).closest(".js-jumplink").addClass("active"),!1;r.length-1==e&&l(t).closest(".js-jumplink").addClass("active"),a=t})}l(".article-body").length&&l("#ContentColumn h2").each(function(){var e=l(this).offset().top,t=l(this).attr("id"),a=l('#InfoColumn .section-jump-link__link-wrap a[href="#'+t+'"]');e-90<i&&(l(a).length&&l(".jumplink-list li").removeClass("active"),o.removeClass("active"),l(a).closest(".js-jumplink").addClass("active"))})})}}(jQuery);var SCM=SCM||{};SCM.StickyElements=SCM.StickyElements||{},SCM.StickyElements=function(a){var e,i,n,r,o,s,l,c,d,u,t,h,p,f,g,m,v="",y=window.scrollY||window.pageYOffset,b=!1;return{init:function(){e=a("body"),p=a(".master-container"),r=a(".page-column--left"),o=a(".toolbar-wrap"),s=a(".page-column--left, .toolbar-wrap, .sr-filters, .article-browse-mobile-nav"),l=a("section.master-header").height(),c=a(".js-ad-banner-header"),t=a("#hdnAdDelaySeconds").val(),d=a("#hdnAdConfigurationTop").val(),u=a("#hdnAdConfigurationRightRail").val(),0<a("#adBlockHeader iframe").length,$rightRailAdContainer=a("#Sidebar>div:last-of-type"),f=a("#Sidebar>div:last-of-type>div"),0<a("#Sidebar>div:last-of-type iframe").length,a("#Sidebar.page-column--right").height(),m=$rightRailAdContainer.height(),0<t&&"scrolldelay"===d&&(h=!0,setTimeout(function(){h=!1,c.removeClass("fixed"),p.removeClass("master-container-sticky")},t));e.hasClass("pg_article")&&(v="article",i=a(".article-browse-mobile-nav"));e.hasClass("pg_articlesbygroup")&&(v="articlebygroup");e.hasClass("pg_issue")&&(v="issue",n=a(".issue-browse-mobile-nav"));e.hasClass("pg_solr/searchresults")&&(v="search",$srFilters=a(".sr-filters"));e.hasClass("pg_selfserve/sspage")&&(v="selfserve");window.addEventListener("scroll",w,!1),S()}};function w(){y=window.scrollY||window.pageYOffset,b||(requestAnimationFrame(S),b=!0)}function S(){function e(){return 0<a("#adBlockHeader iframe").length}function t(){return 0<a("#Sidebar>div:last-of-type iframe").length}b=!1,1023<SCM.SiteJS.getViewportWidth()&&"article"===v&&(l-25<=y?(o.addClass("fixed"),a(".article-body").addClass("hold-position")):a(".article-body").removeClass("hold-position")),"sticky"===u&&t()&&(t()&&1200<SCM.SiteJS.getViewportWidth()?("article"===v&&(g=50+a("#Sidebar.page-column--right").height()+a("section.master-header").height(),m=f.height(),g-m-80<=y?(a("#Sidebar.page-column--right").css("height",a("#Sidebar.page-column--right").height()),$rightRailAdContainer.addClass("fixed")):(a("#Sidebar.page-column--right").css("height","auto"),$rightRailAdContainer.removeClass("fixed"))),"issue"!==v&&"search"!==v||(g=50+a("#Sidebar.page-column--right").height()+a("section.master-header").height(),m=f.height(),g-m-24<=y?(a("#Sidebar.page-column--right").css("height",a("#Sidebar.page-column--right").height()),$rightRailAdContainer.addClass("fixed")):(a("#Sidebar.page-column--right").css("height","auto"),$rightRailAdContainer.removeClass("fixed")))):$rightRailAdContainer.removeClass("fixed"),t()&&1023<SCM.SiteJS.getViewportWidth()?("articlebygroup"===v&&a(".pg_articlesbygroup #Sidebar .widget:last-of-type").css("margin-bottom","0"),"articlebygroup"!==v&&"selfserve"!==v||(g=50+a("#Sidebar.page-column--right").height()+a("section.master-header").height(),m=$rightRailAdContainer.height(),g-m-24<=y?(a("#Sidebar.page-column--right").css("height",a("#Sidebar.page-column--right").height()),$rightRailAdContainer.addClass("fixed")):(a("#Sidebar.page-column--right").css("height","auto"),$rightRailAdContainer.removeClass("fixed")))):$rightRailAdContainer.removeClass("fixed")),l-25<=y?("article"===v&&(r.addClass("fixed"),i.addClass("fixed")),"search"===v&&SCM.SiteJS.getViewportWidth()<=1023&&$srFilters.addClass("fixed")):"article"!==v&&"search"!==v||s.removeClass("fixed"),l+175<=y&&"issue"===v?r.addClass("fixed"):"issue"===v&&r.removeClass("fixed"),l+190<=y&&"issue"===v?n.addClass("fixed"):"issue"===v&&n.removeClass("fixed"),"scrolldelay"===d&&!0===h&&e()&&(l-290<=y?(c.addClass("fixed"),p.addClass("master-container-sticky")):(c.removeClass("fixed"),p.removeClass("master-container-sticky"))),"guardian"===d&&e()&&(l-290<=y&&y<220?(c.addClass("fixed"),c.removeClass("guardian-scrolled"),p.addClass("master-container-sticky"),a(".journal-header").show()):220<=y?(c.removeClass("fixed"),c.addClass("guardian-scrolled"),p.addClass("master-container-sticky"),a(".journal-header").hide()):(c.removeClass("fixed"),c.removeClass("guardian-scrolled"),p.removeClass("master-container-sticky"),a(".journal-header").show()))}}(jQuery);var SCM=SCM||{};SCM.Utilities=SCM.Utilities||{},SCM.AddReturnUrlToSocietyLinks=function(){var e=encodeURIComponent(window.location.href);$(".society-links-logo, .society-links-url").each(function(){"undefined"!=typeof placeholderReturnUrlValue&&0<placeholderReturnUrlValue.length&&$(this).attr("href",$(this).attr("href").replace(placeholderReturnUrlValue,e))})};var SCM=SCM||{};!function(c,f,o){var e=f("body"),a=(f(".article-browse-mobile-nav"),f(".article-browse-mobile-nav-inner"),f(".search-wrap-filters")),t=!1,n=!1,r=!1,s=(f(".navbar-search"),f(".navbar-search-container")),l=f(".js_close-navsearch"),d=f(".js_expand-navsearch"),u=f(".navbar-menu, .navbar-search-collapsed"),h=f(".navbar-search-advanced, .navbar-search-close, .navbar-search"),p=(f(".toolbar-wrap"),f(".toolbar-inner-wrap"),"Basic");f("#hfViewOption").val(),c.setBlockLink=function(){f(document).on("click",".js-widget-dynamic-entry",function(e){var t=f(e.currentTarget).data("resource-url");t&&(window.location=t)})},c.setAllLinksTarget=function(){f("a[target]").not(".openInAnotherWindow").each(function(){f(this).attr("target","")})},c.getNewSelectedFilter=function(){var t=a.children("li");t.on("click",function(){var e=f(this);t.removeClass("selected"),e.addClass("selected"),SCM.SiteJS.setSelectedSearchFilter()})},c.initSelfServeNavigation=function(){var e=f('.js-selfserve-navigation-menu a[href="'+window.location.pathname+'"]');e.addClass("ss-currentPage"),e.parents("ul.selfserve-nav-menu-child-list").addClass("open"),e.parents("ul.selfserve-nav-menu-child-list").siblings("button.selfserve-subnav-toggle").removeClass("icon-general-arrow-filled-right").addClass("icon-general-arrow-filled-down")},c.toggleSelfServeNavigation=function(){f(".selfserve-subnav-toggle, .selfserve-parent-toggle").on("click",function(e){var t=f(this),a=f(this).siblings(".selfserve-sublist");e.preventDefault(),t.hasClass("icon-general-arrow-filled-right")?t.removeClass("icon-general-arrow-filled-right").addClass("icon-general-arrow-filled-down"):t.removeClass("icon-general-arrow-filled-down").addClass("icon-general-arrow-filled-right"),a.hasClass("open")?a.removeClass("open"):a.addClass("open")})},c.getViewportWidth=function(){return Math.max(document.documentElement.clientWidth,window.innerWidth||0)},c.initLazyLoad=function(){f("img.contentFigures, img.inlineGraphics, img.lazy").lazyload({skip_invisible:!1})},c.initFoundation=function(){f(document).foundation()},c.loadAllImagesIfUserIsAboutToUseJumpLinks=function(){f("#LeftNavSticker").hover(function(){f(".lazy").each(function(){var e=f(this);e.attr("src",e.attr("data-original"))})})},c.showAuthorInfo=function(){f(".al-author-name .linked-name, .al-author-name-more .linked-name, .linked-name-byline, .al-author-footnotes .js-linked-footnotes").on("click",function(e){e.stopPropagation(),f(".al-author-info-wrap").removeAttr("style"),f(this).siblings(".al-author-info-wrap").show(),SCM.ScholarlyiQ.trackOnPageEvent("article-author-"+f(this).text())}),f(document).click(function(){f(".al-author-info-wrap").hide().removeAttr("style")})},c.addAuthorFootnote=function(){f(".al-author-name, .al-author-name-more").each(function(){var e=f(this).find(".info-card-note .xref-fn");e.length&&"*"===e.text()&&(f("<sup/>").append(e.html()).insertAfter(f(this).find(".linked-name")),e.remove());f(this).find(".info-author-correspondence").length&&f(this).find(".linked-name").append('<i class="icon-general-mail"></i>')})},c.showHideDropDown=function(){f(".selectDropdown").on("click",function(e){f(".dropdown").hide().removeClass("open"),e.stopPropagation(),f(this).siblings(".dropdown").slideToggle("300","linear").toggleClass("open")}),f(document).click(function(){f(".dropdown").hide().removeClass("open")})},c.showMoreRelatedContent=function(e,t){f(e).click(function(){var e=f(this);e.closest(".related-section-box, .widget-RelatedBookContent").find(t).toggleClass("show-item"),e.toggleClass("show-less").find("i").toggleClass("icon-show").toggleClass("icon-hide"),e.hasClass("show-less")?e.find("span").text("See Less"):e.find("span").text("See More")})},c.showRelatedBookWidgetIfHasContent=function(){f(".widget-RelatedBookContent").each(function(){var e=f(this);5<e.find("*").length&&e.addClass("show")})},c.showSpinner=function(){function e(){f(".preloader-wrap").removeClass("hide").addClass("active")}SCM.QueryBuilder.defaults.beforeSearch=e,f(".pagination").on("click",e)},c.setSelectedSearchFilter=function(){var e=a.children(".selected").text();f(".selected-text").text(e)},c.initFilterClickEvent=function(){f(".filter-wrap").on("click",function(e){a.hide(),e.stopPropagation(),a.toggle()}),f(document).click(function(){a.hide()})},c.launchGetCitationModal=function(){f('[data-reveal-id="getCitation"]').click(function(){f("#getCitation").foundation("reveal-modal","open")})},c.launchAddAlertModal=function(){f('[data-reveal-id="addArticleUpdateAlert"]').click(function(){f("#AddAlert").foundation("reveal-modal","open")})},c.launchEmailUserModal=function(){f('[data-reveal-id="emailUsernameModal"]').click(function(){f("#emailUserName").foundation("reveal-modal","open")})},c.closeNavbarSearch=function(){l.on("click",function(){u.fadeToggle(),h.fadeToggle(),s.toggleClass("active")})},c.expandNavbarSearch=function(){d.on("click",function(){s.toggleClass("active"),u.fadeToggle(),h.fadeToggle()})},c.toggleSearchCover=function(){f(".sf-facet").length&&f(".sf-facet").click(function(){f(document).ajaxStart(function(){f(".info-inner-cover").removeClass("uncovered"),f(".info-inner-cover").addClass("covered")}),f(document).ajaxComplete(function(){f(".info-inner-cover").removeClass("covered"),f(".info-inner-cover").addClass("uncovered")})})},c.calculateResetState=function(e){t=!!e,SCM.SiteJS.resetMobileSiteNav(t)},c.toggleMobileLanguageSubmenu=function(){f(".mobile-header-language").on("click",function(){f(".mobile-language-submenu").slideToggle()})},c.toggleMobileSiteMenuSubnav=function(){f("div.dropdown-menu ul.site-menu li.site-menu-item").on("click",function(){var e=f(this),t=e.children(".mobile-nav-arrow");e.children("ul.site-menu").slideToggle(),t.hasClass("icon-general_arrow-right")?t.removeClass("icon-general_arrow-right").addClass("icon-general_arrow-down"):t.removeClass("icon-general_arrow-down").addClass("icon-general_arrow-right")})},c.toggleMobileSignInForm=function(){var e=f(".mobile-login"),t=f(".mobile-signin-nav-arrow");f(".mobile-menu-link-wrap").on("click",function(){e.hasClass("open")||(e.addClass("open").slideToggle(),t.hide())}),f(".site-menu .mobile-login-form").on("click",".mobile-login-icon",function(){e.removeClass("open").slideToggle(),t.show()})},c.resetMobileSearchFilters=function(){f(".sf-facets, .sf-facet-list").removeAttr("style"),f(".sf-group-header-icon").removeClass("icon-general_arrow-down").addClass("icon-general_arrow-right")},c.resetMobileSiteNav=function(e){f(".header-bottom, .navigation, #MicrositeSearch, .arrow-nav, .arrow-search, .mobile-language-submenu").removeAttr("style"),f(".mobile-search-toggle, .mobile-menu-toggle, .arrow-nav, .arrow-search").removeClass("active"),f("#MicrositeSearch").removeClass("active-tablet"),e&&(r=n=!1)},c.toggleMobileSearch=function(){f(".mobile-search-toggle").on("click",function(){SCM.SiteJS.calculateResetState(n,r),r=!1===r,SCM.SiteJS.toggleResponsiveMenus(f(".mobile-search-toggle, .arrow-search"),r,f("#MicrositeSearch"))})},c.toggleResponsiveLeftColumn=function(){var t=f(".page-column--left");f(document.body).removeClass("noscroll"),f(".js-main").on("click",".toggle-left-col__search, .toggle-left-col__article",function(e){e.preventDefault(),f(document.body).addClass("noscroll"),t.show().addClass("js-filters-open"),navigator.userAgent.toLowerCase().includes("mozilla")||f(document).bind("touchmove",function(e){e.preventDefault()}),f(document).ajaxComplete(function(){f(document.body).removeClass("noscroll"),t.removeClass("js-filters-open"),f(document).unbind("touchmove"),c.initFoundation()})}),f(".toggle-left-col__issue").on("click",function(e){e.preventDefault(),f(document.body).addClass("noscroll"),f(".issue-dropdown-wrap").hide(),f(".responsive-issue-nav").show(),navigator.userAgent.toLowerCase().includes("mozilla")||f(document).bind("touchmove",function(e){e.preventDefault()})}),f(".toggle-left-col__close").on("click",function(e){e.preventDefault(),f(document.body).removeClass("noscroll"),t.removeClass("js-filters-open"),f(".page-column--left, .responsive-issue-nav, .issue-dropdown-wrap").removeAttr("style"),f(document).unbind("touchmove"),c.initFoundation()})},c.toggleMobileMenu=function(){f(".mobile-menu-toggle").on("click",function(){SCM.SiteJS.calculateResetState(r,n),n=!1===n,SCM.SiteJS.toggleResponsiveMenus(f(".mobile-menu-toggle, .arrow-nav"),n,f(".navigation"))})},c.toggleResponsiveMenus=function(e,t,a){var i=f(".header-bottom");t?(e.addClass("active"),a.show(),i.slideToggle()):(e.removeClass("active"),i.toggle(),a.delay(50).hide())},c.togglePubHistory=function(){var e=f(".ww-history");f(".ww-citation-history-wrap").on("click",function(){e.slideToggle()}),f(".ww-history-close").on("click",function(){e.slideToggle()})},c.initDatePicker=function(){f(".pg_advancedsearch").length&&f("#dpStartDate").length&&f("#dpStartDate, #dpEndDate, #dpStartDateAuthor, #dpEndDateAuthor").fdatepicker()},c.showFullAuthorList=function(){var t=f(".meta-authors--etal"),a=f(".meta-authors--remaining");t.on("click",function(e){e.preventDefault(),t.removeClass("is-active"),t.attr("aria-hidden",!0),a.addClass("is-active"),a.attr("aria-hidden",!1)})},c.showImages=function(e){e.find(".contentFigures").each(function(){var e=f(this);0<=e.attr("src").toLowerCase().indexOf("grey.gif")&&e.attr("src",e.attr("data-original"))})},c.openRevealModal=function(e){var t=f("#revealModal");t.find("#revealContent").empty().prepend(e.children().clone()),t.foundation("reveal","open"),SCM.SiteJS.showImages(t),SCM.SiteJS.restrictedImages()},c.revealFigsTablesInModal=function(){var l=f("#NeedSubscription");e.on("click",".xref-bibr, .xref-fn, .link-reveal, .table-graphic, .caption-title",function(){var e=f(this),t=e.attr("reveal-id")?e.attr("reveal-id"):e.attr("data-id"),a=f('[content-id="'+t+'"]').first();if(a=a.length?a:f('[content-id="'+t.toLowerCase()+'"]').first(),t.length&&!a.length){var i=t.split(" ");if(3<=i.length){var n=f("<div/>"),r=i[0],o=i[i.length-1],s=f('[content-id="'+r+'"]').first();(s=s.length?s:f('[content-id="'+r.toLowerCase()+'"]').first()).length&&(n.append(s.children().clone()),n=c.getAllReferencesInRange(s,n,o)),a=0<n.html().length?n:""}}f(a).hasClass("video-modal")||f(a).hasClass("audio-modal")?a.foundation("reveal","open"):a.length?SCM.SiteJS.openRevealModal(a):l.foundation("reveal","open")})},c.revealFeaturedFigureInModal=function(){f(".issue-featured-image a").on("click",function(){var e=f(this).closest(".image-synopsis-wrap").html(),t=f("#revealModal"),a=f(this).data("featuredfigureurl");a&&(t.find("#revealContent").empty().prepend(e),f("#revealContent img").attr("src",a),t.foundation("reveal","open"))})},c.getAllReferencesInRange=function(e,t,a){var i=e.next(),n=i.attr("content-id");n.length&&(t.append(i.children().clone()),n===a||n===a.toLowerCase()||c.getAllReferencesInRange(i,t,a));return t},c.showUnAuthenticatedSpans=function(){f(document).ready(function(){var e=f('div[data-widgetname="ArticleFulltext"] span#UserHasAccess').attr("data-userHasAccess");e&&e.length&&"false"===e.toLowerCase()&&f('div[data-widgetname="ArticleFulltext"] a[data-reveal-id]').each(function(){f(this).replaceWith(function(){return"<span>"+this.innerHTML+"</span>"})})})},c.oupHeaderDropdowns=function(){f(".mobile-search-toggle").on("click",function(e){e.preventDefault();var t=f(this);SCM.SiteJS.manageMobileDropdowns(t,".mobile-search-dropdown")}),f(".mobile-account-toggle").on("click",function(e){e.preventDefault();var t=f(this);SCM.SiteJS.manageMobileDropdowns(t,".mobile-account-dropdown")}),f(".mobile-nav-toggle").on("click",function(e){e.preventDefault();var t=f(this);SCM.SiteJS.manageMobileDropdowns(t,".mobile-nav-dropdown")})},c.manageMobileDropdowns=function(e,t){f(".dropdown-panel").hasClass("is-active")?e.hasClass("is-active")?(f(t).slideToggle().removeClass("is-active"),e.removeClass("is-active")):(f(".mobile-dropdown-toggle").removeClass("is-active"),f(".dropdown-panel-wrap").children(".is-active").slideToggle().removeClass("is-active"),e.addClass("is-active"),f(t).delay(400).slideToggle().addClass("is-active")):(e.addClass("is-active"),f(t).slideToggle().addClass("is-active"))},c.toggleMobileDropdownSubnav=function(){f(".dummy-link, .mobile-nav-dropdown .site-menu-item .mobile-nav-arrow, .mobile-account-dropdown .site-menu-item .mobile-nav-arrow").on("click",function(e){e.preventDefault();var t=f(this),a=t;a=t.hasClass("mobile-nav-arrow")?t:t.siblings(".mobile-nav-arrow"),t.siblings(".site-menu-lvl-1").slideToggle(),a.hasClass("icon-general_arrow-down")?a.removeClass("icon-general_arrow-down").addClass("icon-general_arrow-up"):a.removeClass("icon-general_arrow-up").addClass("icon-general_arrow-down")})},c.toggleArticleToolbarDropdown=function(){f(".drop-trigger").on("click",function(e){e.preventDefault(),f(this).siblings("ul").slideToggle()})};var g="signin",m="mobile",v="desktop";c.initSigninForm=function(){$mobileSignInLink=f(".mobile-account-dropdown ul li .mobile-account-signin"),$mobileSignInArrow=f(".mobile-account-dropdown ul li i.mobile-nav-arrow"),$mobileSignInForm=f(".mobile-account-dropdown ul li ul.individual-menu"),$desktopSignInForm=f(".dropdown-panel-signin"),$desktopInstitution=f(".dropdown-panel-institution");var t=function(t){$desktopSignInForm.hasClass("active")?f(".dropdown-panel-signin").hide().removeClass("active"):f(".dropdown-panel-signin").show().addClass("active");var e=SCM.SiteJS.GetLoginUrl(t),a=SCM.SiteJS.GetCaptchaInstanceNumber(t);f.ajax({url:(App.CurrentSubdomain.length?"/"+App.CurrentSubdomain:"")+e,cache:!1,data:{captchaInstanceNumber:a},success:function(e){SCM.SiteJS.UpdateLoginForm(t,e),SCM.AddReturnUrlToSocietyLinks()}})};f(".oup-header-menu-item.desktop .dropdown-toggle.signin").on("click",function(e){e.preventDefault(),t(v)}),f(".dropdown-toggle.institution").on("click",function(e){e.preventDefault(),$desktopInstitution.hasClass("active")?$desktopInstitution.hide().removeClass("active"):$desktopInstitution.show().addClass("active")});var a=!1;f(document).mousedown(function(e){var t=f(".dropdown-panel-signin, .dropdown-panel-institution");a=!f(t).is(e.target)&&0===f(t).has(e.target).length}),f(document).mouseup(function(e){var t=f(".dropdown-panel-signin, .dropdown-panel-institution");a&&!f(t).is(e.target)&&0===f(t).has(e.target).length&&(f(t).hide(),t.removeClass("active")),a=!1}),$mobileSignInLink.on("click",function(e){e.preventDefault(),t(m),$mobileSignInArrow.hasClass("icon-general_arrow-down")?$mobileSignInArrow.removeClass("icon-general_arrow-down").addClass("icon-general_arrow-up"):$mobileSignInArrow.removeClass("icon-general_arrow-up").addClass("icon-general_arrow-down"),$mobileSignInLink.hasClass("active")?$mobileSignInLink.removeClass("active"):$mobileSignInLink.addClass("active")}),f(document).on("click",".signin-form .signin-button",function(e){var t=f(this).closest(".signin-form"),a=t.find(".preloader-wrap");e.preventDefault(),e.stopPropagation(),SCM.SiteJS.Login(t,a),"/sign-in"!==location.pathname&&SCM.ScholarlyiQ.trackOnPageEvent("site-signin")}),f(document).on("keypress",".signin-form input.username, .signin-form input.password",function(e){var t=f(this).closest(".signin-form"),a=t.find(".preloader-wrap");13===(e.keyCode||e.which)&&(e.preventDefault(),SCM.SiteJS.Login(t,a))}),f(document).on("click",".signout-button",function(){var e;e=0===location.pathname.toLowerCase().indexOf("/my-account")?"/":location.pathname+location.search,f.get("/LOGOUT",{dest:"/HTTPHandlers/SAMs/LogoutHandler.ashx"}).done(function(){window.top.location.assign(e)}).fail(function(){window.top.location.assign(e)}),SCM.ScholarlyiQ.trackOnPageEvent("site-signout")}),f(document).on("click","a.shibboleth-signin",function(e){var t=window.top.location,a=t.origin+"/SHIBBOLETH?dest="+encodeURIComponent(t.pathname+t.search),i=f(this).data("target").replace("{0}",encodeURIComponent(a));window.top.location=i})},c.initLoginFormDropdown=function(){f(".signin-form").on("click",'a[data-target="register"]',function(e){e.preventDefault();var t=f.deparam.querystring().returnUrl;null==t&&(t=location.pathname+location.search),window.top.location.assign("/my-account/register?returnUrl="+encodeURIComponent(t))})},c.Login=function(e,i){var n=e.find("input.username").val(),r=e.find("input.password").val();if(0<e.find("#hpcName").val().length)console.log("Honeypot captcha triggered. Are you a bot?");else if(0!==n.length&&0!==r.length){var o=0<f("div.register-captcha-text-simple-lf").length,s=0<e.find("div.register-captcha-text-normal-lf").length,l=e.find("input.loginInstanceName").val();i.removeClass("hide");var t=0,a="txtCaptchaInputId";if(s)switch(l){case g:t=captcha0;break;case m:t=captcha1;break;case v:t=captcha2;break;default:t=0}else o&&(a+="-"+SCM.SiteJS.GetCaptchaInstanceNumber(l).toString());f.post((App.CurrentSubdomain.length?"/"+App.CurrentSubdomain:"")+"/OUP/ValidateCaptcha",{captchaResponse:s?grecaptcha.getResponse(t):"",simpleCaptchaResponse:o?document.getElementById(a).value:"",captchaInstanceNumber:SCM.SiteJS.GetCaptchaInstanceNumber(l)}).done(function(e){if("1"===e||!s&&!o)f.post("/LOGIN",{user:n,pass:r,dest:"/HTTPHandlers/SAMs/LoginHandler.ashx"}).done(function(e){"1"===e?"/sign-in"===location.pathname.toLowerCase()&&null!==f.deparam.querystring().handoff_url?window.location.reload():SCM.SiteJS.loginReturnBack():f.post("/OUP/LoginFormIncrementFailedAttempts").done(function(){var e=SCM.SiteJS.GetLoginUrl(l),t=SCM.SiteJS.GetCaptchaInstanceNumber(l);f.ajax({url:(App.CurrentSubdomain.length?"/"+App.CurrentSubdomain:"")+e,cache:!1,data:{captchaInstanceNumber:t},success:function(e){SCM.SiteJS.UpdateLoginForm(l,e),SCM.AddReturnUrlToSocietyLinks(),f(".error").show(),i.addClass("hide")}})})});else{var t=SCM.SiteJS.GetLoginUrl(l),a=SCM.SiteJS.GetCaptchaInstanceNumber(l);f.ajax({url:(App.CurrentSubdomain.length?"/"+App.CurrentSubdomain:"")+t,cache:!1,data:{captchaInstanceNumber:a},success:function(e){SCM.SiteJS.UpdateLoginForm(l,e),SCM.AddReturnUrlToSocietyLinks(),f(".error").show(),i.addClass("hide")}})}})}else e.find(".error").show()},c.UpdateLoginForm=function(e,t){if(e===v){var a=f(".dropdown-panel-signin");a.html(t),a.find("input.loginInstanceName").val(v),0<a.find("div.register-captcha-text-normal-lf").length&&resetCaptchaElement2()}else if(e===m){var i=f(".mobile-account-dropdown ul li ul.individual-menu");i.html(t),i.find("input.loginInstanceName").val(m),0<i.find("div.register-captcha-text-normal-lf").length&&resetCaptchaElement1()}else if(e===g){var n=f(".unauth-column.account");n.html(t),n.find("input.loginInstanceName").val(g),0<n.find("div.register-captcha-text-normal-lf").length&&resetCaptchaElement()}},c.GetLoginUrl=function(e){var t="/OUP/LoginForm/LoginFormPopup";return e==g&&(t="/OUP/LoginForm/OUP_SignInPage_LoginForm"),t},c.GetCaptchaInstanceNumber=function(e){var t=0;switch(e){case g:t=0;break;case m:t=1;break;case v:t=2;break;default:t=0}return t},c.loginReturnBack=function(){var e=f.deparam.querystring().returnUrl;null==e&&(e=f.deparam.querystring().redirectUrl),null!=e&&""!==e||(e=window.top.location.pathname+window.top.location.search);if(/^\/((\w+\/)?sign-in|my-account\/forgot-password|my-account\/reset-password|my-account\/register)/i.test(e)&&(e="/"),"/"!==e){var t=e.match(/\/\/([^/]+\.)?([^./]+\.[^./]+)/i);null!==t&&t[2].toLowerCase()!==window.top.location.hostname.match(/(.*\.)?([^.]+\.[^.]+)/i)[2].toLowerCase()&&(e="/")}window.top.location.assign(e)},c.alertLinks=function(){f(".userAlert a").each(function(){var n=f(this);n.on("click",function(){var e=n.data("additionalurl"),t=n.data("userloggedin"),a=n.data("alerttype");if(void 0!==t&&"false"===t.toLowerCase()){var i=f.deparam.querystring().returnUrl;n.parent().hasClass("alertType-MarketingLink")&&(i=e),null==i&&(i=location.pathname+location.search),void 0!==a&&(i=i+"#trigger-alerttype="+a),window.location="/sign-in?returnUrl="+encodeURIComponent(i)}else void 0!==e&&e.length?window.location=e:SCM.SiteJS.showSignUpAlertInfo(n)})})},c.showSignUpAlertInfo=function(s){f.ajax({url:(App.CurrentSubdomain.length?"/"+App.CurrentSubdomain:"")+"/Toolbox/AlertsSignUp/AlertsSignUpPopup",cache:!1,data:{alertType:s.data("alerttype"),resourceId:s.data("alertresourceid"),resourceType:s.data("alertresourcetype"),email:s.data("alertuseremail"),resourceName:s.data("alertresourcename"),taxonomyName:s.data("alerttaxonomyname")},dataType:"html",success:function(e){f(".userAlertSignUp").html(e);var t=f(".userAlertSignUpModal");t.foundation("reveal","open");var o=f(".userAlertSignUp").find("#selectAlertFreqeuncy");f(".userAlertSignUp").find("input.js-taxonomy-checkbox:checked");SCM.SiteJS.initTaxonomyArrows(f(".userAlertSignUp")),f(".addUserAlert").on("click",function(){var e=f(this).parent(),t=f(this).parent().find(".js-alert-name").val(),a=f(this).parent().find(".js-taxonomy-checkbox:checked"),i=!1;33==s.data("alerttype")&&(t?a.length<1&&(i=!0,SCM.SiteJS.showErrorMessage(e,f("#errorSelectionRequired"))):(i=!0,SCM.SiteJS.showErrorMessage(e,f("#errorAlertNameRequired"))));var n=a.filter(SCM.SiteJS.taxonomyFilterFunction),r=SCM.SiteJS.processTaxonomies(n);i||SCM.SiteJS.addSignUpAlert(s,o,t,r,e)}),f(".userAlertClose").on("click",function(){t.foundation("reveal","close")})}})},c.showEditAlertInfo=function(e){var l=e.parents(".email-alerts-content-row");f.ajax({url:(App.CurrentSubdomain.length?"/"+App.CurrentSubdomain:"")+"/Toolbox/AlertsSignUp/AlertsSignUpPopup",cache:!1,data:{alertType:l.data("alerttype"),resourceId:l.data("alertresourceid"),resourceType:l.data("alertresourcetype"),email:l.data("alertuseremail"),resourceName:l.data("alertresourcename"),taxonomyName:l.data("alerttaxonomyname"),existingAlert:l.data("alert")},dataType:"html",success:function(e){f(".userAlertSignUp").html(e);var t=f(".userAlertSignUpModal");t.foundation("reveal","open");var s=f(".userAlertSignUp").find("#selectAlertFreqeuncy");f(".userAlertSignUp").find("input.js-taxonomy-checkbox:checked");SCM.SiteJS.initTaxonomyArrows(f(".userAlertSignUp")),f(".js-edit-user-alert").on("click",function(){var e=f(this).parent(),t=f(this).parent().find(".js-alert-name").val(),a=f(this).parent().find(".js-taxonomy-checkbox:checked"),i=f("#AlertSignUp_AlertId").val(),n=!1;33==l.data("alerttype")&&(t?a.length<1&&(n=!0,SCM.SiteJS.showErrorMessage(e,f("#errorSelectionRequired"))):(n=!0,SCM.SiteJS.showErrorMessage(e,f("#errorAlertNameRequired"))));var r=a.filter(SCM.SiteJS.taxonomyFilterFunction),o=SCM.SiteJS.processTaxonomies(r);n||SCM.SiteJS.editTaxonomyAlert(i,l,s,t,o,e)}),f(".userAlertClose").on("click",function(){t.foundation("reveal","close")})}})},c.taxonomyFilterFunction=function(){return f(this).parents(".taxonomy-child-list-item").parents(".taxonomy-child-list-item").children(".taxonomy-parent-label").find(".js-taxonomy-checkbox:checked").length<1},c.initTaxonomyArrows=function(e){e.find(".taxonomy-parent-arrow").on("click",function(){var e=f(this);e.parents(".taxonomy-label-wrap").siblings(".taxonomy-child-list").slideToggle(),e.hasClass("icon-general-arrow-filled-right")?e.removeClass("icon-general-arrow-filled-right").addClass("icon-general-arrow-filled-down"):e.removeClass("icon-general-arrow-filled-down").addClass("icon-general-arrow-filled-right")}),e.find(".js-taxonomy-checkbox").on("click",function(){f(this).is(":checked")?f(this).parent().parent().find(".js-taxonomy-checkbox").prop("checked",!0):(f(this).parent().parent().find(".js-taxonomy-checkbox").prop("checked",!1),f(this).closest(".taxonomy-node").children(".taxonomy-parent-label").find(".js-taxonomy-checkbox").prop("checked",!1),f(this).parents(".taxonomy-child-list-item").children(".taxonomy-parent-label").find(".js-taxonomy-checkbox").prop("checked",!1))})},c.showErrorMessage=function(e,t){e.find(".js-message").hide(),t.removeClass("hide"),t.show()},c.processTaxonomies=function(e){var t=new Array;for(i=0;i<e.length;i++){var a=e[i].attributes["data-id"].value;t.push(a)}return t},c.addSignUpAlert=function(e,t,a,i,n){var r;null!=t&&(r=t.val()),f.ajax({url:(App.CurrentSubdomain.length?"/"+App.CurrentSubdomain:"")+"/Toolbox/AddAlertsSignUpForTaxonomySearch/AddAlertsSignUpPopup",cache:!1,data:{alertType:e.data("alerttype"),resourceId:e.data("alertresourceid"),resourceType:e.data("alertresourcetype"),email:e.data("alertuseremail"),resourceName:e.data("alertresourcename"),scheduleId:r,alertName:a,taxonomyName:e.data("alerttaxonomyname"),taxonomies:JSON.stringify(i)},dataType:"html",success:function(e){if(null!=e)if("name-exists"===e.trim())SCM.SiteJS.showErrorMessage(n,f("#errorAlertNameExists"));else if("search-exists"===e.trim())SCM.SiteJS.showErrorMessage(n,f("#errorAlertSearchExists"));else{f(".userAlertSignUp").html(e);var t=f(".userAlertSignUpModal");t.foundation("reveal","open"),f(".userAlertClose").on("click",function(){t.foundation("reveal","close")})}}})},c.editTaxonomyAlert=function(e,t,a,i,n,r){var o;null!=a&&(o=a.val()),f.ajax({url:(App.CurrentSubdomain.length?"/"+App.CurrentSubdomain:"")+"/Toolbox/EditAlertForTaxonomySearch/AddAlertsSignUpPopup",cache:!1,type:"POST",data:{alertId:e,scheduleId:o,alertName:i,taxonomyName:t.data("alerttaxonomyname"),taxonomies:JSON.stringify(n)},dataType:"html",success:function(e){var t,a=JSON.parse(e);null!=a&&((t=a.Success?f("#messageCustom"):f("#errorCustom")).html(a.Message),SCM.SiteJS.showErrorMessage(r,t))}})},c.initSearchResultsSort=function(){var e=f(".sort-order-select-option"),t=f(".sort-order-select"),a=f(".preloader-wrap");t.on("change",function(){var e=f("#routename").val(),t=""===e?"/search-results?"+f(this).val():"/"+e+"/search-results?"+f(this).val();window.location=t}),e.on("click",function(){f(this).find("option[value]").length&&a.removeClass("hide"),sessionStorage.detailsState=p}),f(".al-pageNumber,.sr-nav-previous,.sr-nav-next").on("click",function(){if(!f(this).hasClass("currentPage")){a.removeClass("hide");var e=f(this).attr("data-url");window.location="search-results?"+e}})},c.restrictedImages=function(){f("div.graphic-wrap[restricted]").each(function(){var e=f(this).children(".copy-right-statement");f(e).toggle(!1),f(this).off("contextmenu").on("contextmenu",function(){return f(e).toggle(),!1}),f(this).off("click").click(function(){return f(e).toggle(),!1}),f(e).off("click").click(function(){return f(e).toggle(),!1})})},c.registerArticleListNewAndPopularCombinedMode=function(){f(".articleListNewAndPopular-mode").each(function(){var i=f(this);i.on("click",function(e){e.preventDefault(),f(".articleListNewAndPopular-mode").removeClass("active"),i.addClass("active");var t=i.data("mode"),a=f(".articleListNewAndPopular-ContentView-"+t);a.hasClass("hasContent")||(SCM.SiteJS.getArticleListNewAndPopularContent(t,a),a.addClass("hasContent")),f('section[class*="articleListNewAndPopular-ContentView-"]').hide(),a.removeClass("hide"),a.show()})})},c.getArticleListNewAndPopularContent=function(e,t){f.ajax({url:(App.CurrentSubdomain.length?"/"+App.CurrentSubdomain:"")+"/PlatformArticle/ArticleListNewAndPopularContent/",cache:!1,data:{mode:e},dataType:"html",success:function(e){t.html(e)}})},c.moveSubmitCommentLink=function(){var e=f(".submitCommentPlaceHolder"),t=f(".widget-UserComment");e.append(t)},c.addUserCommentJumpLink=function(){var e=f(".content-nav");if(e.length){var t=f(".comments-jumplink");e.append(t)}};var y=function(e){e.length&&(f(".contents-title").show(),f(".jumplink-list").append(e))};c.addDataSupplementsJumpLink=function(){var e=f(".dataSupplements-jumplink");y(e)},c.addDataRepositoriesJumpLink=function(){var e=f(".dataRepositories-jumplink");y(e)},c.addAuthorNotesJumpLink=function(){var e=f(".authorNotes-section-title");if(e.length){var t=f('<li class="section-jump-link head-1"><div class="section-jump-link__link-wrap"><a class="jumplink js-jumplink scrollTo" href="#authorNotesSectionTitle">'+e.text()+"</a></div></li>");y(t)}};var b=!(c.toggleSearchResultsDetails=function(){var t=f("#switch-container"),a=f("#switch-post"),i=f(".sri-expandedView");"Expanded"===(p=sessionStorage.detailsState?sessionStorage.detailsState:"undefined"!=typeof clientViewOption&&""!==clientViewOption?clientViewOption:f("#hfViewOption").val())?(t.removeClass("off").addClass("on"),a.removeClass("off").addClass("on"),i.removeClass("hide")):"Basic"===p&&i.addClass("hide"),f(".pagination").on("click",function(){sessionStorage.detailsState=p}),t.unbind("click").on("click",function(e){e.stopPropagation(),p="Expanded"===p?"Basic":"Expanded",t.toggleClass("on off"),a.toggleClass("on off"),i.hasClass("hide")?i.removeClass("hide"):i.addClass("hide")})});c.adjustRelatedTagsDisplay=function(){f(".article-metadata-panel:not(:last)").remove();var e=f(".article-metadata-panel").last(),t=f(".kwd-group"),a=f(".related-topic-tags"),n=f(".article-metadata-taxonomies"),r=f(".article-metadata-tocSections"),o=f(".wi-editors");$openScienceBadge=f(".wi-open-science-badge");var s=[t,a,n,r,o,$openScienceBadge];for(e.length||(e=f(".article-metadata-standalone-panel"),f(".widget-items").prepend(e)),i=0;i<s.length;i++)s[i].length&&e.append(s[i]);e.html()&&e.show(),c.removeEmpty(".article-metadata-panel"),c.removeEmpty(".article-metadata-standalone-panel"),c.removeEmpty(".access-state-logos"),c.removeEmpty(".article-pubstate"),b=!0,window.dispatchEvent(new CustomEvent("adjustRelatedTagsDisplay.complete"))},c.isFinishedAdjustRelatedTagsDisplay=function(){return b},c.removeEmpty=function(e){var t=f(e);if(0===t.children().length){var a=t.text();a&&a.trim()||t.remove()}},c.showPdfOnlyLink=function(){f(".PdfOnlyLink").length&&f(".toolbar-item.item-pdf").length&&f(".toolbar-item.item-pdf").children().clone().appendTo(".PdfOnlyLink")},c.triggerAlertModalOnRedirect=function(){var e=f.bbq.getState("trigger-alerttype");void 0!==e&&(f('.userAlert a[data-userloggedin="True"][data-alerttype='+e+"]").click(),f.bbq.removeState("trigger-alerttype"))},c.triggerSaveSearchModelOnRedirect=function(){"1"===f.bbq.getState("triggerSaveSearch")&&(f(".lnkSaveSolrSearch").click(),f.bbq.removeState("triggerSaveSearch"))},c.configureMathjax=function(){MathJax.Hub.Config({CommonHTML:{linebreaks:{automatic:!0}},"HTML-CSS":{linebreaks:{automatic:!0}},SVG:{linebreaks:{automatic:!0}},tex2jax:{inlineMath:[["|$","$|"],["\\(","\\)"]]}}),"sticky"!==f("#hdnAdConfigurationRightRail").val()&&MathJax.Hub.Register.StartupHook("End",function(){if(!(screen.width<1024)){var p=f(".page-column-wrap").width();f("#ContentTab").on("click",".js-mathjax-view-large",function(e){var t=f(e.currentTarget);if(!t.hasClass("js-mathjax-view-large-expanded")&&!t.prev().hasClass("js-mathjax-view-large-expanded")){var a=t.clone(!1);a.css("position","absolute"),a.addClass("js-mathjax-view-large-clone"),a.addClass("mathjax-view-large-expanded"),a.addClass("js-mathjax-view-large-expanded"),t.before(a);var i=e.currentTarget.dataset.targetWidth,n=t.height(),r=f(".page-column-wrap").offset().left,o=r+p,s=e.currentTarget.dataset.widthDifference,l=Math.ceil(s/2),c=t.offset().left,d=c-r,u=o-(c+t.width());if(l<d&&l<u)a.css("marginLeft",-l+"px"),a.css("marginRight",-l+"px");else if(l<d){var h=s-u;a.css("marginLeft",-h+"px")}a.css("minHeight",Math.ceil(n)+"px"),a.css("width",i+"px")}t.hasClass("js-mathjax-view-large-expanded")?(t.css("visibility","hidden"),t.next().css("visibility","")):(t.css("visibility","hidden"),t.prev().css("visibility",""))}),f("#ContentTab .math span.MathJax").each(function(e,t){var a=t.offsetWidth+2,i=f(t).parents(".formula-wrap"),n=i.width();n<a&&(i.addClass("js-mathjax-view-large").addClass("mathjax-view-large"),a=Math.min(a,1200,p),i[0].dataset.widthDifference=a-n,i[0].dataset.targetWidth=a)}),f("#ContentTab .tex-math").each(function(e,t){var a=t.offsetWidth+5,i=f(t).parents(".formula-wrap"),n=i.width();n<a&&(i.addClass("js-mathjax-view-large").addClass("mathjax-view-large"),a=Math.min(a,1200,p),i[0].dataset.widthDifference=a-n,i[0].dataset.targetWidth=a)});var e=function(e){e.matches?f(".mathjax-view-large").removeClass("js-mathjax-view-large"):f(".mathjax-view-large").addClass("js-mathjax-view-large")},t=window.matchMedia("(max-width: 1023px)");t.addListener(e),e(t)}})},c.ariaToggleTable=function(t){var a=f(t+"-button"),i=a.children(".collapse-icon");a.on("click",function(e){e.preventDefault(),"true"===a.attr("aria-expanded")?a.attr("aria-expanded","false"):a.attr("aria-expanded","true"),i.hasClass("icon-general-arrow-filled-down")?i.removeClass("icon-general-arrow-filled-down").addClass("icon-general-arrow-filled-right"):i.removeClass("icon-general-arrow-filled-right").addClass("icon-general-arrow-filled-down"),f(t).toggleClass("hide"),"false"===f(t).attr("aria-hidden")?f(t).attr("aria-hidden","true"):f(t).attr("aria-hidden","false")})},c.initAriaControls=function(){f("[id^=collapsible-table-]").each(function(e){SCM.SiteJS.ariaToggleTable("#collapsible-table-"+e)})},c.abstractMathJax=function(){f(".abstract-response-placeholder").length&&MathJax.Hub.Queue(["Typeset",MathJax.Hub,".abstract-response-placeholder"])},c.setAccessIcons=function(){var e=f("#ArticleList h5.item-title, .al-article-list-group .al-article-items");e.length&&void 0!==o&&e.each(function(e,t){var a=f(this).data("articleidaccess"),i=SCM.SiteJS.getAccessIcon(a,o);if(void 0!==i){var n=f(this).find("i.access-icon"),r="Available to Purchase";switch(n.removeClass(i.icon).addClass(i.icon),i.icon){case"icon-availability_open":r="Open Access";break;case"icon-availability_free":r="Free";break;case"icon-availability_unlocked":r="Available";break;case"icon-availability_cart":r="Available to Purchase";break;default:r="Available to Purchase"}n.attr("title",r)}})},c.getAccessIcon=function(a,e){var i;return e.map(function(e,t){if(e.id===a)return i=e,!1}),i},c.articleUserComments=function(e){e=!0===e;var n=f(".comment-form__modal .preloader-wrap"),r=f(".content-form__response--error");f("#comment-modal-opener"+(e?"-sv":"")).click(function(e){if(e.preventDefault(),"True"!==SCM.UserCommentView.isUserLoggedIn){var t=f.deparam.querystring().returnUrl;null==t&&(t=location.pathname+location.search),window.location="/sign-in?returnUrl="+encodeURIComponent(t)}else resetCommentForm(),f.ajax({url:(App.CurrentSubdomain.length?"/"+App.CurrentSubdomain:"")+"/Content/SelfServeContent",type:"GET",data:{selfServeContentId:"CommentsTermsAndConditions",selfServeVersionId:0}}).success(function(e){showTermsAndConditions(e)})}),f("#btnUserAgreeTerms").click(function(e){e.preventDefault(),validateTermsCheckbox()&&(f("#TermsAndConditionsContainer, #termsAgreeRow, #termsButtonRow").hide(),f("#divUserCommentForm").show())}),f("#divCommentModal .btnUserCommentSubmit").click(function(e){e.preventDefault(),validateCommentForm()&&(n.removeClass("hide"),submitCommentValues())}),f("#divCommentModal .btnModalCancel, #divCommentModal .btnCommentModalExit, .comment-form__close").click(function(e){e.preventDefault(),f("#divCommentModal").foundation("reveal","close")}),f('input[name="NoConflicts"]').change(function(){f(this).is(":checked")?f(".disclosureBox").show():f(".disclosureBox").hide()}),showTermsAndConditions=function(e){f("#termsAgreeRow .lblTermsAndConditions.errors").hide(),f("#TermsAndConditionsContainer").html(e),f("#TermsAndConditionsContainer, #termsAgreeRow, #termsButtonRow").show(),f("#divCommentModal").foundation("reveal","open")},validateTermsCheckbox=function(){var e=f("#termsAgreeRow #termsAndConditionsCheckbox");return e.length&&!e.is(":checked")?(f("#termsAgreeRow .lblTermsAndConditions.errors").show(),!1):(f("#termsAgreeRow .lblTermsAndConditions.errors").hide(),!0)},validateCommentForm=function(){resetCommentFormValidation(),f.validity.setup({outputMode:"label"}),f.validity.start(),f("#divCommentModal .required").require();var e=f.validity.end(),t=f("#divUserCommentForm").find("textarea#Comment"),a=t.val(),i=parseInt(t.attr("maxlength"));return 0<i&&a.length>i&&(a=a.substring(0,i)),"true"===SCM.UserCommentView.bShowDisclosure&&f('input[name="NoConflicts"]').is(":checked")&&""===f('textarea[name="Disclosure"]').val()?(f("#divCommentModal .lbldisclosure.errors").show(),!1):e.valid},resetCommentForm=function(){f("#divUserCommentForm").hide();var e=f("#divCommentModal");e.find("input, textarea").val(""),e.find("#displayAlert, div.captchaAlert").hide(),f('input[name="NoConflicts"]').removeAttr("checked"),f("#termsAndConditionsCheckbox").attr("checked",!1),f(".disclosureBox").hide(),f("#divCommentModal .btnCommentModalExit").hide(),f("#recaptcha_reload").trigger("click");var t=e.find("#Author");t.attr("value",t.attr("dataauthorvalue")),resetCommentFormValidation()},resetCommentFormValidation=function(){var e=f("#divCommentModal");e.find(".error").not(".lbldisclosure.errors").remove(),r.hide(),e.find(".lbldisclosure.errors").hide(),f("#termsAgreeRow .lblTermsAndConditions.errors").hide(),r.text("")},submitCommentValues=function(){var t=f("#divUserCommentForm"),e=SCM.UserCommentView.articleId,a="",i="";"true"===SCM.UserCommentView.showAffiliations&&(a=t.find("input#AffInstitution").val()),"true"===SCM.UserCommentView.bShowDisclosure&&(i=t.find("textarea#Disclosure").val()),f.ajax({type:"POST",url:"/Content/SubmitUserComment",data:{author:t.find("input#Author").val(),affInstitutions:a,disclosure:i,title:t.find("input#Title").val(),comment:t.find("textarea#Comment").val(),articleid:e,recaptchaChallege:f("#recaptcha_challenge_field").val(),recaptchaResponse:f("#recaptcha_response_field").val(),instanceName:SCM.UserCommentView.InstanceName},success:function(e){console.log(["success",e]),n.addClass("hide"),!0===e.Success?(t.hide(),f("#divCommentModal #displayAlert").show(),f("#divCommentModal .btnCommentModalExit").show(),"true"===SCM.UserCommentView.isNotModerated.toLowerCase()&&location.reload()):(n.addClass("hide"),f("div.captchaAlert").show())},error:function(e){"401"==e.status?(r.html("You must be logged in to submit a comment."),window.location="/sign-in?returnUrl="+encodeURIComponent(window.location.pathname+window.location.search)):r.html("Comments not saved. Please Try Again."),n.addClass("hide"),r.show()}})}},c.init=function(){c.articleUserComments(),c.closeNavbarSearch(),c.expandNavbarSearch(),c.initAriaControls(),c.initFilterClickEvent(),c.initSearchResultsSort(),c.initFoundation(),c.initLazyLoad(),c.showAuthorInfo(),c.showFullAuthorList(),c.addAuthorFootnote(),c.showHideDropDown(),c.showRelatedBookWidgetIfHasContent(),c.showMoreRelatedContent(".grw-viewmorelink",".grw-hide-me"),c.showMoreRelatedContent(".mrw-viewmorelink",".mrw-hide-me"),c.showSpinner(),c.toggleMobileLanguageSubmenu(),c.toggleMobileMenu(),SCM.SiteJS.toggleMobileSignInForm(),c.toggleArticleToolbarDropdown(),c.toggleMobileDropdownSubnav(),c.toggleMobileSiteMenuSubnav(),c.toggleMobileSearch(),c.toggleResponsiveLeftColumn(),c.togglePubHistory(),c.restrictedImages(),c.moveSubmitCommentLink(),c.addAuthorNotesJumpLink(),c.addDataSupplementsJumpLink(),c.addDataRepositoriesJumpLink(),c.addUserCommentJumpLink(),c.alertLinks(),c.registerArticleListNewAndPopularCombinedMode(),c.oupHeaderDropdowns(),c.initSigninForm(),c.initSelfServeNavigation(),c.toggleSelfServeNavigation(),c.setAllLinksTarget(),c.showPdfOnlyLink(),c.setBlockLink()},c.windowLoadInit=function(){c.initDatePicker(),c.revealFigsTablesInModal(),c.revealFeaturedFigureInModal(),c.launchGetCitationModal(),c.setSelectedSearchFilter(),c.getNewSelectedFilter(),c.loadAllImagesIfUserIsAboutToUseJumpLinks(),c.showUnAuthenticatedSpans(),c.toggleSearchResultsDetails(),c.toggleSearchCover()},c.initArticleTopInfoAccessOptions=function(){var e=window.location.pathname.substring(0,window.location.pathname.indexOf("/",2))+"/sign-in?returnUrl="+encodeURIComponent(window.location.pathname+window.location.search);f(".article-top-info-user-restricted-options").find(".article-top-info-sign-in").attr("href",e)}}(SCM.SiteJS=SCM.SiteJS||{},jQuery,SCM.ArticleAccessIcons),function(i,e){var t,a=i(".page-column--left"),n=(i(".datepicker__input"),i(".microsite-search")),r=i(".mobile-search-dropdown"),o=i(".navbar-menu, .navbar-search-collapsed"),s=i(".navbar-search-advanced, .navbar-search-close, .navbar-search"),l=(i("section.master-header").height(),SCM.SiteJS.getViewportWidth()),c=function(){SCM.SiteJS.getViewportWidth()<=1023?a.addClass("mobile"):a.removeClass("mobile")};i(window).on("resize",function(e){clearTimeout(t),t=setTimeout(function(){c();var e=SCM.SiteJS.getViewportWidth();l!=e&&(1023<=l&&i(".dropdown-panel, .site-menu").removeAttr("style"),a.hasClass("js-filters-open")||(i(document.body).removeClass("noscroll"),a.hide(),i(".responsive-issue-nav").hide(),i(".page-column--left, .responsive-issue-nav, .issue-dropdown-wrap").removeAttr("style"),l=SCM.SiteJS.getViewportWidth()),(l<=930||1101<=l)&&(o.removeAttr("style"),s.removeAttr("style")),931<=l&&(r.removeAttr("style"),n.removeAttr("style")))},10)}),window.addEventListener("orientationchange",function(){var e=i(window).scrollTop();i("body").animate({scrollTop:e},0)},!1),i(window).on("load",function(){SCM.SiteJS.windowLoadInit(),SCM.SiteJS.adjustRelatedTagsDisplay()}),i(function(){c(),SCM.SiteJS.init(),SCM.Toolbar.init(),SCM.PDFAccess.init(),SCM.SiteJS.setAccessIcons(),SCM.StickyElements.init(),SCM.AddReturnUrlToSocietyLinks(),SCM.JumpLinks.init(),i(".custom-scroll").jScrollPane(),0<i(".widget-ArticleFulltext").length&&SCM.ArticleFulltext.init(),SCM.SiteJS.triggerAlertModalOnRedirect(),SCM.SiteJS.triggerSaveSearchModelOnRedirect(),SCM.SiteJS.configureMathjax(),SCM.AccessibleDatepicker.initDatepicker(),SCM.SplitScreen.init()}),i(document).ajaxStart(function(){i("body").css("cursor","wait")}).ajaxComplete(function(e,t,a){SCM.SiteJS.initFoundation(),SCM.SiteJS.initSearchResultsSort(),SCM.SolrSearch.ajaxComplete(),SCM.SiteJS.setAccessIcons(),SCM.SiteJS.setAllLinksTarget(),SCM.SiteJS.toggleResponsiveLeftColumn(),i("body").css("cursor","default"),SCM.SiteJS.abstractMathJax(),SCM.SiteJS.alertLinks()})}(jQuery);var SCM=SCM||{};!function(e,g){e.initTestPassword=function(e,t,a){var i=/[A-Z---------------------------------------------------]|\ud801[\udc00-\udc27]|\ud835[\udc00-\udc19\udc34-\udc4d\udc68-\udc81\udc9c\udc9e-\udc9f\udca2\udca5-\udca6\udca9-\udcac\udcae-\udcb5\udcd0-\udce9\udd04-\udd05\udd07-\udd0a\udd0d-\udd14\udd16-\udd1c\udd38-\udd39\udd3b-\udd3e\udd40-\udd44\udd46\udd4a-\udd50\udd6c-\udd85\udda0-\uddb9\uddd4-\udded\ude08-\ude21\ude3c-\ude55\ude70-\ude89\udea8-\udec0\udee2-\udefa\udf1c-\udf34\udf56-\udf6e\udf90-\udfa8\udfca]/,n=/[0-9]/,r="",o=g(".password-input-check-wrap"),s=o.find(".icon-case"),l=(o.find(".password-confirm-icon"),o.find(".password-input-icon")),c=o.find(".icon-length"),d=o.find(".icon-number"),u=o.find(".password-check-wrap"),h=g(".password-confirm-wrap"),p=h.find(".password-confirm-icon"),f=!1;o.on("keyup",e,function(){var e=g(this).val();r=e,f?u.hide():u.show(),10<=e.length?SCM.MyAccount.showValidPasswordCriteria(c):SCM.MyAccount.showInvalidPasswordCriteria(c),i.test(e)?SCM.MyAccount.showValidPasswordCriteria(s):SCM.MyAccount.showInvalidPasswordCriteria(s),n.test(e)?SCM.MyAccount.showValidPasswordCriteria(d):SCM.MyAccount.showInvalidPasswordCriteria(d),c.hasClass("green")&&s.hasClass("green")&&d.hasClass("green")?(f=!0,u.fadeOut(1500),l.hide(),e===o.find(t).val()&&($iconConfirm.hide(),o.find(a).addClass("btn-green"),o.find(".register-button-overlay").hide())):(f=!1,u.show(),SCM.MyAccount.lockRegistrationButton(),l.show()),""!==e&&null!==e||(u.hide(),l.hide())}),h.on("keyup",t,function(){var e=g(this).val();r===e?(p.hide(),f&&(h.find(a).addClass("btn-green"),h.find(".register-button-overlay").hide())):(""===e||null===e?p.hide():p.show(),SCM.MyAccount.lockRegistrationButton())}),g(document).on("click",function(){u.hide()})}}(SCM.TestPassword=SCM.TestPassword||{},jQuery);var SCM=SCM||{};!function(e,s,t){e.setActiveJumplink=function(){s(".section-jump-link").on("click",function(){s(".section-jump-link").removeClass("active"),s(this).closest(".section-jump-link").addClass("active")})},e.toggleNestedJumplinks=function(){s(".section-jump-link .list-toggle, .section-jump-link .mobile-list-toggle").on("click",function(e){e.preventDefault();var t=s(this),a=t.parents(".section-jump-link__link-wrap").siblings("ul.section-jump-link__sublist"),i="icon-general-arrow-filled-right",n="icon-general-arrow-filled-down",r="icon-general_arrow-right",o="icon-general_arrow-down";t.hasClass("list-toggle")&&(t.hasClass(i)?t.removeClass(i).addClass(n):t.removeClass(n).addClass(i)),t.hasClass("mobile-list-toggle")&&(t.hasClass(r)?t.removeClass(r).addClass(o):t.removeClass(o).addClass(r)),"false"===t.attr("aria-expanded")?t.attr("aria-expanded","true"):t.attr("aria-expanded","false"),a.slideToggle(),"false"===a.attr("aria-hidden")?a.attr("aria-hidden","true"):a.attr("aria-hidden","false")})},e.filterTopicTerms=function(){s(".issue-topic__input").keyup(function(){s(".issue-topic__term").hide();var e=s(this).val(),t=e.toLowerCase();s.extend(s.expr[":"],{containsIN:function(e,t,a,i){return 0<=(e.textContent||e.innerText||"").toLowerCase().indexOf((a[3]||"").toLowerCase())}}),s(".issue-topic__term:containsIN('"+t+"')").show(),null!==e&&""!==e||s(".issue-topic__term").show()})},e.updateIssueBrowseOnChange=function(){s(".issue-browse-select").on("change",function(){window.location.href=s(this).val()})}}(SCM.Issues=SCM.Issues||{},jQuery),jQuery(document).ready(function(i){SCM.Issues.filterTopicTerms(),SCM.Issues.toggleNestedJumplinks(),SCM.Issues.updateIssueBrowseOnChange(),window.location.hash&&i('a[href="'+window.location.hash+'"]').addClass("active").parents(".section-jump-link").slice(1).children(".section-jump-link__link-wrap").children(".list-toggle").click(),SCM.SiteJS.getViewportWidth()<=900&&i("#IssuesList > option").each(function(){var e=i(this).text();if(47<e.length){var t=e.substr(0,47).lastIndexOf(" ");if(0<t){var a=e.substr(0,t)+"...";i(this).text(a)}}})});var SCM=SCM||{};!function(ns,$){var baseSiteUrl=$("#hfSiteURL");ns.initMyAccount=function(){var t,a=$(".myaccount-tabs-inner-wrap"),i=$(".mobile-nav-icon");$(document).on("click",".myaccount-mobile-nav",function(e){e.stopPropagation(),a.toggle(),i.hasClass("icon-general-arrow-filled-down")?i.removeClass("icon-general-arrow-filled-down").addClass("icon-general-arrow-filled-up"):i.removeClass("icon-general-arrow-filled-up").addClass("icon-general-arrow-filled-down")}),$(document).click(function(){a.hide().removeAttr("style")}),$(window).on("scroll",function(e){clearTimeout(t),t=setTimeout(function(){a.removeAttr("style")},50)}),$(window).on("resize",function(e){clearTimeout(t),t=setTimeout(function(){a.removeAttr("style")},50)});var e=location.pathname,n=e.indexOf("/","/my-account/".length);0<n&&(e=e.substring(0,n));var r=$(".myaccount-tabs-inner-wrap").find("li").has('a[href="'+e+'"]');r.addClass("is-active"),$("#myaccount-tabs").find(".myaccount-current-label").html(r.text()),$(document).on("click","#myaccount-tabs-content #updatePersonalDetailsBtn",function(){var t=$("#myaccount-tabs-content");t.find(".success-message").html("").hide(),t.find(".error-message").html("").hide();var e=t.find("#Title").val(),a=t.find("#FirstName").val(),i=t.find("#LastName").val(),n=t.find("#Phone").val(),r=t.find("#CountryList").val(),o=$("#myaccount-tabs-content").find("#MyAccountToken").val(),s=/[<>]/;if(s.test(e)||s.test(a)||s.test(i)||s.test(n)){var l=t.find("#err-message-angle-brackets").html();return t.find(".error-message").html(l).show(),void $("html, body").animate({scrollTop:t.offset().top},10)}$.post("/OUPMyAccount/UpdateAccount",{title:e,firstName:a,lastName:i,phone:n,country:r,token:o},function(e){null!=e&&(e.ReturnId&&$("#myaccount-tabs-content").find("#MyAccountToken").val(e.ReturnId),e.Success?($("#header-account-info-user-fullname").html(a+" "+i),t.find(".success-message").html(e.Html).show()):(t.find(".error-message").html(e.Html).show(),$("html, body").animate({scrollTop:t.offset().top},10)))})});var d=$("#change-password").find(".error-message").html();SCM.TestPassword.initTestPassword("#newPassword","#confirmNewPassword","#changePasswordBtn"),$(document).on("click","#changePasswordBtn",function(){var t=$("#change-password"),a=t.find(".success-message");a.hide();var i=t.find(".error-message");i.html(d).hide();var e={},n=t.find("#currentPassword").val(),r=!1;""===n&&(e.currentPassword=$("label[for=currentPassword]").text().replace("*",""),r=!0);var o=t.find("#newPassword").val();""===o&&(e.newPassword=$("label[for=newPassword]").text().replace("*",""),r=!0);var s=t.find("#confirmNewPassword").val();if(""===s&&(e.confirmNewPassword=$("label[for=confirmNewPassword]").text().replace("*",""),r=!0),r){for(var l in e)i.append("<p> * "+e[l]+"</p>").show();$("html, body").animate({scrollTop:t.offset().top},10)}else{i.html("");var c=$("#myaccount-tabs-content").find("#MyAccountToken").val();$.post("/OUPMyAccount/ChangePassword",{currentPassword:n,newPassword:o,confirmNewPassword:s,token:c},function(e){null!=e&&(e.ReturnId&&$("#myaccount-tabs-content").find("#MyAccountToken").val(e.ReturnId),null!=e.Messages&&"1"==e.Messages[0]?(a.show(),$.post("/LOGIN",{user:e.Messages[1],pass:o,dest:"/HTTPHandlers/SAMs/LoginHandler.ashx"}).done(function(e){"1"!==e?location.href="/sign-in":$.post("/OUPMyAccount/RefreshToken",{},function(e){null!=e&&e.ReturnId&&$("#myaccount-tabs-content").find("#MyAccountToken").val(e.ReturnId)})})):(null!=e.Messages&&null!=e.Messages[1]&&i.html(e.Messages[1]).show(),$("html, body").animate({scrollTop:t.offset().top},10)))})}});var c=$("#change-email-address").find(".error-message").html();$(document).on("click","#changeEmailBtn",function(){var t=$("#change-email-address");t.find(".success-message").html("");var a=t.find(".error-message");a.html(c).hide();var e={},i=!1,n=t.find("#newEmailAddress").val();""===n&&(e.newEmailAddress=$("label[for=newEmailAddress]").text().replace("*",""),i=!0);var r=t.find("#confirmNewEmailAddress").val();""===r&&(e.confirmNewEmailAddress=$("label[for=confirmNewEmailAddress]").text().replace("*",""),i=!0);var o=t.find("#currentPassword").val();if(""===o&&(e.password=$("label[for=currentPassword]").text().replace("*",""),i=!0),i){for(var s in e)a.append("<p> * "+e[s]+"</p>").show();$("html, body").animate({scrollTop:t.offset().top},10)}else{a.html("");var l=$("#myaccount-tabs-content").find("#MyAccountToken").val();$.post("/OUPMyAccount/RequestEmailAddressChange",{newEmailAddress:n,confirmNewEmailAddress:r,password:o,token:l},function(e){null!=e&&(e.ReturnId&&$("#myaccount-tabs-content").find("#MyAccountToken").val(e.ReturnId),null==e.Messages||null==e.Messages[0]||""==e.Messages[0]?(t.children(".change-email-address-form").hide(),t.children(".change-email-address-verification").show()):a.html(e.Messages[0]).show())})}}),$(document).on("click","#changeEmailVerificationBtn",function(){var t=$("#change-email-address"),a=t.find(".success-message");a.html("").hide();var i=t.find(".error-message");i.html("").hide();var e=t.find("#changeEmailVerificationCode").val();0<e.length&&$.post("/OUPMyAccount/VerifyEmailAddressChange",{verificationCode:e},function(e){"1"==e[0]?(a.html(e[1]).show(),$.get("/LOGOUT",{dest:"/HTTPHandlers/SAMs/LogoutHandler.ashx"}).done(function(){}).fail(function(){})):(i.html(e[1]).show(),$("html, body").animate({scrollTop:t.offset().top},10))})})},ns.initSavedSearches=function(){$(".solrSearchSaveWidget table.tablesorter").tablesorter({theme:"default",delayInit:!0,ignoreCase:!0,headers:{4:{sorter:!1}},sortList:[[0,0]]}),$(".solrSearchSaveWidget .save-search-delete").click(function(){SCM.MyAccount.deleteSaveSearch($(this))}),$(".solrSearchSaveWidget .ddlSearchAlertFrequencyMyAccount").change(function(){SCM.MyAccount.changeUserAlert($(this))}),$(".solrSearchSaveWidget .save-search-rename-rename").click(function(){var e=$(this).closest("td"),t=e.find(".save-search-name-link");t.hide(),e.find(".save-search-input").val(t.text()).css("display","inline-block").focus(),e.find(".save-search-rename-cancel").show(),e.find(".save-search-rename-save").show(),$(this).hide()}),$(".solrSearchSaveWidget .save-search-rename-cancel").click(function(){var e=$(this).closest("td");e.find(".save-search-name-link").show(),e.find(".save-search-input").hide(),e.find(".save-search-rename-rename").show(),e.find(".save-search-rename-save").hide(),$(this).hide()}),$(".solrSearchSaveWidget .save-search-rename-save").click(function(){var e=$(this),t=e.closest("td"),a=t.find(".save-search-input"),i=e.closest("tr").data("usersearchid"),n=a.val();n.length&&(SCM.MyAccount.renameSaveSearch(n,i),a.hide(),t.find(".save-search-name-link").text(n).show(),t.find(".save-search-rename-rename").show(),t.find(".save-search-rename-cancel").hide(),$(this).hide())}),$(".solrSearchSaveWidget .save-search-input").on("keypress",function(e){var t=$(this).closest("td"),a=$(this).val();if(13===(e.keyCode||e.which)&&(e.preventDefault(),a.length)){var i=t.closest("tr").data("usersearchid");SCM.MyAccount.renameSaveSearch(a,i),$(this).hide(),t.find(".save-search-name-link").text(a).show(),t.find(".save-search-rename-rename").show(),t.find(".save-search-rename-save").hide(),t.find(".save-search-rename-cancel").hide()}})},ns.bindTableSorter=function(e){$(e).trigger("update");var t=$(e).get(0).config.sortList;$(e).trigger("sorton",[t])},ns.deleteSaveSearch=function(delElem){$(".alerts-wrap-cover").removeClass("uncovered"),$(".alerts-wrap-cover").addClass("covered");var ajaxUrl="//"+baseSiteUrl.val()+"/Solr/DeleteSolrSearchInfoWithToken",parentElem=delElem.closest("tr"),id=parentElem.data("usersearchid"),userAlertId=parentElem.data("useralertid"),token=$("#SolrSearchAuthToken").val();$.ajax({url:ajaxUrl,type:"POST",dataType:"json",cache:!1,data:{userSearchId:id,userAlertId:userAlertId,token:token},success:function(e){null!=e&&(e.ReturnId&&$("#SolrSearchAuthToken").val(e.ReturnId),$(".solrSearchSaveWidget .solrSearchSaveModel .message").html(e.Html).parent().foundation("reveal","open"),e.Success&&parentElem.remove())},error:function(xmlHttpRequest,textStatus,errorThrown){if(window.console){var err=eval("("+xmlHttpRequest.responseText+")");console.log("error: "+err),console.log("status: "+textStatus)}}}).done(function(){SCM.MyAccount.bindTableSorter($(".saved-searches-table.tablesorter")),$(".alerts-wrap-cover").removeClass("covered"),$(".alerts-wrap-cover").addClass("uncovered")})},ns.changeUserAlert=function(upElem){var ajaxUrl="//"+baseSiteUrl.val()+"/Solr/UpdateUserAlertWithToken",parentElem=upElem.closest("tr"),id=parentElem.data("usersearchid"),userAlertId=parentElem.data("useralertid"),scheduleId=upElem.val(),token=$("#SolrSearchAuthToken").val();$(".alerts-wrap-cover").removeClass("uncovered"),$(".alerts-wrap-cover").addClass("covered"),$.ajax({url:ajaxUrl,type:"POST",dataType:"json",cache:!1,data:{userSearchId:id,userAlertId:userAlertId,scheduleId:scheduleId,token:token},success:function(e){if(null!=e){var t=JSON.parse(e.ReturnId);null!=t&&null!=t.Token&&$("#SolrSearchAuthToken").val(t.Token),$(".solrSearchSaveWidget .solrSearchSaveModel .message").html(e.Html).parent().foundation("reveal","open"),e.Success&&null!=t&&null!=t.ReturnId&&parentElem.data("useralertid",t.ReturnId)}},error:function(xmlHttpRequest,textStatus,errorThrown){if(window.console){var err=eval("("+xmlHttpRequest.responseText+")");console.log("error: "+err),console.log("status: "+textStatus)}}}).done(function(){$(".alerts-wrap-cover").removeClass("covered"),$(".alerts-wrap-cover").addClass("uncovered")})},ns.renameSaveSearch=function(searchName,userSearchId){var ajaxUrl="//"+baseSiteUrl.val()+"/Solr/RenameSolrSearchInfoWithToken",token=$("#SolrSearchAuthToken").val();$.ajax({url:ajaxUrl,type:"POST",dataType:"json",cache:!1,data:{searchName:searchName,userSearchId:userSearchId,token:token},success:function(e){null!=e&&(e.ReturnId&&$("#SolrSearchAuthToken").val(e.ReturnId),$(".solrSearchSaveWidget .solrSearchSaveModel .message").html(e.Html).parent().foundation("reveal","open"))},error:function(xmlHttpRequest,textStatus,errorThrown){if(window.console){var err=eval("("+xmlHttpRequest.responseText+")");console.log("error: "+err),console.log("status: "+textStatus)}}}).done(function(){SCM.MyAccount.bindTableSorter($(".saved-searches-table.tablesorter"))})},ns.initRegister=function(e){var m=$(".widget-Register");null!=e&&0<e.length&&(m.find(".error-message").html(e).show(),SCM.MyAccount.clearLastErrorMessage()),m.on("click","#showPassword",function(){m.find("#Password, #ConfirmPassword").each(function(){var e=$(this).clone();e.attr("type","text"),e.attr("autocomplete","off"),e.attr("value",$(this).val()),$(this).after(e),$(this).remove()}),$(this).hide(),$(this).siblings("#hidePassword").show()}),m.on("click","#hidePassword",function(){m.find("#Password, #ConfirmPassword").each(function(){var e=$(this).clone();e.attr("type","password"),e.removeAttr("autocomplete"),e.attr("value",$(this).val()),$(this).after(e),$(this).remove()}),$(this).hide(),$(this).siblings("#showPassword").show()}),m.on("click","#registerBtn",function(){m.find(".error-message").html().hide;var t=m.find("#EmailAddress").val(),a=m.find("#Password").val(),e=m.find("#ConfirmPassword").val(),i=m.find("#Title").val(),n=m.find("#FirstName").val(),r=m.find("#LastName").val(),o=m.find("#CountryList").val(),s=m.find("#Telephone").val(),l=m.find("#hpcName").val(),c=(m.find(".txtCaptchaInput").val(),$("#recaptcha_challenge_field").val(),$("#recaptcha_response_field").val(),m.find("#registerIssueAlert")),d=!1;null!=c&&(d=!!c.is(":checked"));var u=m.find("#hfAlertJournalId"),h=null!=u&&0<u.length?u.val():0,p=m.find("#hfAlertSiteId"),f=null!=p&&0<p.length?p.val():0,g=d?"?siteId="+f+"&journalId="+h:"";0<l.length?console.log("Honeypot captcha triggered. Are you a bot?"):$.post("/OUPMyAccount/Register",{email:t,password:a,confirmPassword:e,title:void 0===i?null:i,firstName:void 0===n?null:n,lastName:void 0===r?null:r,country:void 0===o?null:o,phone:void 0===s?null:s,captchaResponse:captchaEnabled?grecaptcha.getResponse():""},function(e){"OK"===e?$.post("/LOGIN",{user:t,pass:a,dest:"/HTTPHandlers/SAMs/LoginHandler.ashx"+g}).done(function(e){"1"===e?SCM.SiteJS.loginReturnBack():m.find(".error-message").html("The account has been created, but the login failed. Please try login again.").show()}):window.location.reload()})}),SCM.TestPassword.initTestPassword("#Password","#ConfirmPassword","#registerBtn")},ns.clearLastErrorMessage=function(){$.post("/OUPMyAccount/ClearLastErrorMessage")},ns.lockRegistrationButton=function(){$(".register-form-wrap").find("#registerBtn").removeClass("btn-green"),$(".register-form-wrap").find(".register-button-overlay").show()},ns.showValidPasswordCriteria=function(e){e.removeClass("icon-general-close red").addClass("icon-general-check green"),e.siblings(".password-check-label").addClass("fade")},ns.showInvalidPasswordCriteria=function(e){e.removeClass("icon-general-check green").addClass("icon-general-close red"),e.siblings(".password-check-label").removeClass("fade")},ns.initForgotPassword=function(){var e=$("#forgot-password").find(".error-message").html();$("#forgotPasswordBtn").on("click",function(){var a=$("#forgot-password"),i=a.find(".success-message"),n=a.find(".error-message");i.html("").hide(),n.html(e).hide();var r=a.find("#contactEmail").val();0<r.length?$.post("/OUPMyAccount/ForgotPassword",{email:r},function(e){if(null==e||""==e){var t=a.find(".success-message-template").html().replace("{0}",r);i.html(t).show()}else n.html(e).show(),$("html, body").animate({scrollTop:a.offset().top},10)},"html"):(n.append("<p> * "+$("label[for=contactEmail]").text().replace("*","")+"</p>").show(),$("html, body").animate({scrollTop:a.offset().top},10))})},ns.initResetPassword=function(){$("#changePasswordBtn").on("click",function(){var t=$("#change-password"),a=t.find(".success-message"),i=t.find(".error-message"),e=$.deparam.querystring().t,n=t.find("#newPassword").val(),r=t.find("#confirmNewPassword").val();$.post("/OUPMyAccount/ResetPassword",{token:e,newPassword:n,confirmNewPassword:r},function(e){null==e||""==e?(a.show(),i.hide()):(a.hide(),i.html(e).show(),$("html, body").animate({scrollTop:t.offset().top},10))},"html")}),SCM.TestPassword.initTestPassword("#newPassword","#confirmNewPassword","#changePasswordBtn")},ns.countSubjectChoices=function(){$("#communication-preferences-subject-choices").find(".topics-selected-wrap").each(function(){var e=$(this).closest("li").find("input[type=checkbox]"),t=e.filter(":checked");$(this).find(".totalCount").html(e.length),$(this).find(".checkedTotal").html(t.length),$(this).show()})},ns.changeUserTypeSubjects=function(t){var e=$("#communication-preferences");$("#userTypeSubjectHeader").hide();var a=e.find("#userTypes").val();"3"===a&&$("#userTypeSubjectHeader").show(),e.find("ul#userTypeSubjects > li").each(function(){var e=$(this).find("input[type=checkbox]");$(this).attr("data-classification-id")===a?($(this).show(),t&&e.prop("checked",e.data("checked"))):($(this).hide(),t&&e.prop("checked",!1))})},ns.initCommunicationPreferences=function(e){SCM.MyAccount.countSubjectChoices(),$("#communication-preferences-subject-choices").on("click",".mainSubjects > a",function(){$(this).siblings("ul").slideToggle(),$(this).children("i").hasClass("icon-general-arrow-filled-down")?$(this).children("i").removeClass("icon-general-arrow-filled-down").addClass("icon-general-arrow-filled-right"):$(this).children("i").removeClass("icon-general-arrow-filled-right").addClass("icon-general-arrow-filled-down")}),$("#communication-preferences-subject-choices").on("click","input[type=checkbox]",function(){$(this).next("ul").find("input[type=checkbox]").prop("checked",!$(this).is(":checked")),SCM.MyAccount.countSubjectChoices()}),null!=e&&0<e&&$("#communication-preferences #userTypes").val(e),SCM.MyAccount.changeUserTypeSubjects(!1),$("#communication-preferences #userTypes").change(function(){SCM.MyAccount.changeUserTypeSubjects(!0)}),$("#communication-preferences #btnConfirmOptIn").on("click",function(){var t=$(this);$.ajax({url:"/OUPMyAccount/SendEmailForOptInCommPref",type:"GET",dataType:"json"}).done(function(e){e.Success?$("#communication-preferences").find(".success-message").html(e.Html).show():$("#communication-preferences").find(".error-message").html(e.Html).show(),t.hide(),$("#communication-preferences .send-verify-email").hide()})}),$("#communication-preferences #updatePreferencesBtn").click(function(e){var t=$("#communication-preferences"),a=!t.find("#confirmOptOut").is(":checked"),i=[];t.find("input[type=checkbox][data-type=subjectId]").filter(":checked").each(function(){i.push($(this).val())});var n=t.find("#userTypes").val();$.ajax({url:"/OUPMyAccount/UpdateCommunicationPreferences",type:"POST",traditional:!0,data:{optInMarketEmail:a,subjectIds:i,classificationId:n},dataType:"html"}).done(function(e){t.find(".success-message").html(e).show(),a?(t.find(".optedIn-message").show(),t.find(".optedOut-message").hide()):(t.find(".optedIn-message").hide(),t.find(".optedOut-message").show()),t.find("#userTypeSubjects input[type=checkbox][data-type=subjectId]").each(function(){$(this).data("checked",$(this).is(":checked"))})}),e.preventDefault()}),$("#communication-preferences #communication-preferences-subject-choices input[type=checkbox][data-type=subjectId]").click(function(e){$("#communication-preferences").find(".success-message").hide()})},ns.initActivateSubscription=function(){$("#activateSubscriptionBtn").on("click",function(){var t=$(".activate-subscription-wrap"),i=t.find(".error-message");if(i.html("").hide(),0==$("#activateSubscriptionTermsConditions").is(":checked"))i.html($("#activateSubErrTermsConditions").html()).show(),$("html, body").animate({scrollTop:t.offset().top},10);else{var e=$("#activateSubscriptionToken").val();0<e.length&&$.post("/OUPMyAccount/ActivateSubscriptionSubmitToken",{token:e},function(e){"subscriptions"==e?location.href="/my-account/subscriptions":"institutional-settings"==e?setTimeout(function(){location.href="/my-account/institutional-settings"},1e3):(i.html(e).show(),$("html, body").animate({scrollTop:t.offset().top},10))},"html").fail(function(e,t,a){i.html('We encountered a problem when trying to activate your subscription. Please try again. If the problem continues, please contact <a href="/journals/pages/contact_us/customer_services">customer services</a>.').show()})}}),$("#activateSubscriptionToken").on("keypress",function(e){13===(e.keyCode||e.which)&&(e.preventDefault(),$("#activateSubscriptionBtn").click())})},ns.initInstitutionalSettings=function(){var h=$(".error-summary").html();$("#institutionalAccountInfo").on("click","#saveInstitutionalSettingsBtn",function(){var i=$(this).closest("#institutionalAccountInfo"),n=i.find(".error-summary");n.html(h);var r=i.find(".instUpdate-success");r.hide(),n.hide(),i.find(".instUpdate-error").html("").removeClass("is-active");var e=i.find("#instSet-InstitutionName").val(),t=i.find("#instSet-IpAddresses").val(),a=i.find("#instSet-OrgId").val(),o=i.find("#instSet-EntityId").val(),s=i.find("#instSet-OpenUrl").val(),l=i.find("#instSet-OpenUrlButton").val(),c=i.find("#instSet-InstUrl").val(),d=i.find("#instSet-InstLogo").val(),u=$("#myaccount-tabs-content").find("#MyAccountToken").val();$.post("/OUPMyAccount/UpdateInstitutionalAccountInfo",{institutionName:e,ipAddresses:t,orgId:a,entityId:o,openUrl:s,openUrlButton:l,instUrl:c,instLogoUrl:d,token:u},function(e){if(null!=e&&null!=e)if(e.ReturnId&&$("#myaccount-tabs-content").find("#MyAccountToken").val(e.ReturnId),$.isEmptyObject(e.Errors))r.show(),$.trim(l).length?$("#instSet-OpenUrlButtonImg").attr("src",l).show():$("#instSet-OpenUrlButtonImg").hide(),$.trim(d).length?$("#instSet-InstLogoImg").attr("src",d).show():$("#instSet-InstLogoImg").hide();else{for(var t in e.Errors){var a=null;switch(t){case"general":a="general";break;case"institutionName":a="instSet-InstitutionName";break;case"ipAddressList":a="instSet-IpAddresses";break;case"orgId":a="instSet-OrgId";break;case"entityId":a="instSet-EntityId";break;case"openUrl":a="instSet-OpenUrl";break;case"openUrlButton":a="instSet-OpenUrlButton";break;case"instUrl":a="instSet-InstUrl";break;case"instLogoUrl":a="instSet-InstLogo"}null!=a&&("general"===a?i.find(".instUpdate-error.general-error").html(e.Errors[t]).addClass("is-active"):(i.find("#"+a).next(".instUpdate-error").html(e.Errors[t]).addClass("is-active"),n.append("<p> * "+$("label[for="+a+"]").text().replace("*","")+"</p>"),n.show()))}$("html, body").animate({scrollTop:i.offset().top},10)}})}),$(document).on("click","#institutionalAccountInfo .question-icon",function(e){e.preventDefault();var t=$(this).next('[data-type="help-text"]').html();$("#institutionalSettingsModalBody").html(t),$("#institutionalSettingsModal").foundation("reveal","open")})},ns.initSubscriptions=function(){$(".subscriptions-wrap table.tablesorter").tablesorter({theme:"default",delayInit:!0,ignoreCase:!0,sortList:[[0,0]]}),$(".subscriptions-wrap .view-expired-link").click(function(){$(this).hide(),$subTypeContainer=$(this).closest(".subscription-type").find(".subscription-type-table"),$subTypeContainer.show(),$subTypeContainer.children("tbody").children("tr").show()}),$(".subscriptions-wrap .subscription-resource-link").click(function(){var e=$(this).data("resource-id"),t=$(this).data("resource-type");$.get("/OUPMyAccount/GetResourceUrl",{resourceId:e,resourceType:t},function(e){top.location=e},"text")})}}(SCM.MyAccount=SCM.MyAccount||{},jQuery),$(document).ready(function(){var t,a=$("#journalAddEditDiv"),i=$("#journalAddEditDiv .add-new-alert .new-alert-row-wrap");$(document).on("click",".myaccount-tabs-inner-wrap div",function(){$(".tabbed-content-overlay").show()}),$("#myaccount-tabs-content").bind("DOMSubtreeModified",function(){$(".tabbed-content-overlay").hide()}),$("#institutionalLogoURL").keyup(function(){$(".logoPreview").attr("src",$(this).val()),$(".logoPreview").error(function(){$(this).attr("src","/Images/grey.gif")})});var n=function(e){a.hasClass("open")&&!e.hasClass("js-save-alerts")&&$(document).on("closed.fndtn.reveal","[data-reveal]",function(){i.html(t)})};$(document).on("opened.fndtn.reveal","[data-reveal]",function(){t=i.html(),$(document).on("mouseup.myAccount",function(e){var t=$(e.target);n(t)}),$(document).on("keyup.myAccount",function(e){var t=$(e.target);n(t)})}),$(document).on("closed.fndtn.reveal","[data-reveal]",function(){$(document).unbind("mouseup.myAccount"),$(document).unbind("keyup.myAccount")})});var SCM=SCM||{};!function(ns,$,bc){function tabs(o,s){var e=$(o);e.parents(".js-abstract-response-placeholder").addClass("removePad"),e.on("click",s,function(e){var t=$(e.target),a=t.parents(".js-abstract-response-placeholder"),i=a.find(o+"-content"),n=t.index(),r=$(s,i);a.find("li").removeClass("is-active"),t.addClass("is-active"),r.eq(n).addClass("is-active")})}ns.initAbstractClickEvent=function(){$(".master-main").on("click","a.showAbstractLink",function(){var wrapperDiv=$(this).closest("div[data-article-abstract-fetched-wrapper]"),articleId=$(wrapperDiv).data("articleid-abstract"),triedFetchDiv=$(wrapperDiv).children("div[data-tried-to-fetch-abstract]").first(),triedFetch="true"===$(triedFetchDiv).data("tried-to-fetch-abstract"),abstractLocation=$("#abstract-"+articleId),baseSiteUrl=$("#hfSiteURL"),abstractLinks=$("#abstract-"+articleId+"-links"),ajaxUrl="extract"===$(this).closest("div.abstract-link").data("link-article-abstract-type")?"/PlatformArticle/ArticleAbstractOrExtractAjax":"/PlatformArticle/ArticleAbstractAjax";abstractLocation.parent().toggleClass("tabExpand"),void 0!==baseSiteUrl&&void 0!==baseSiteUrl.val()&&""!==baseSiteUrl&&(ajaxUrl="//"+baseSiteUrl.val()+ajaxUrl),$(abstractLocation).closest("li").toggleClass("abstractExpanded"),$(abstractLocation).append('<div class="spinner"></div>'),triedFetch||($.ajax({url:ajaxUrl,type:"GET",data:{articleId:articleId},success:function(e){abstractLocation.html(e.Html),abstractLocation.append(abstractLinks.html()),tabs(".js-tabs"," > li"),bc.init()},error:function(xmlHttpRequest,textStatus,errorThrown){if($(abstractLocation).find(".spinner").remove(),window.console){var err=eval("("+xmlHttpRequest.responseText+")");console.log("error: "+err),console.log("status: "+textStatus)}}}),$(triedFetchDiv).data("tried-to-fetch-abstract","true")),abstractLocation.toggle();var $thisAbstractIcon=wrapperDiv.find(".abstract-toggle-icon"),$downArrow="icon-general-arrow-filled-down",$upArrow="icon-general-arrow-filled-up";$thisAbstractIcon.hasClass($downArrow)?$thisAbstractIcon.removeClass($downArrow).addClass($upArrow):$thisAbstractIcon.removeClass($upArrow).addClass($downArrow)})}}(SCM.ArticleAbstract=SCM.ArticleAbstract||{},jQuery,SCM.Utilities.Brightcove),jQuery(document).ready(function(e){SCM.ArticleAbstract.initAbstractClickEvent()});var SCM=SCM||{};SCM.SearchResults={},SCM.SearchResults.defaults={controller:"Solr",action:"SolrSearch",instanceName:"Search",baseSiteUrl:"",updateTargetSelector:"#divSearch"},$(function(){function h(a,i){a.bind("keydown",function(e){if(13===e.which){var t=a.val();if(isYearOnly(t))return updateYearOnlyToFullDate(a,i),e.preventDefault(),e.stopImmediatePropagation(),!1}}).datepicker()}function n(){$(".collapsible-facet .sf-facet-list").each(function(){12<$(this).find(".sf-facet").length&&($(this).find(".facetShowMoreLi").remove(),$(this).find(".sf-facet:gt(11)").hide(),$(this).append('<li class="facetShowMoreLi"><a href="" class="facetShowMore">Show more</a></li>'))})}function r(){$(".taxonomy-parent-arrow").on("click",function(){var e=$(this);e.parents(".taxonomy-label-wrap").siblings(".taxonomy-child-list").slideToggle(),e.hasClass("icon-general-arrow-filled-right")?e.removeClass("icon-general-arrow-filled-right").addClass("icon-general-arrow-filled-down"):e.removeClass("icon-general-arrow-filled-down").addClass("icon-general-arrow-filled-right")}),0<$(".taxonomy-child-list .queryitem").length&&$(".taxonomy-child-list .queryitem").parents(".taxonomy-child-list .taxonomy-child-list-item").each(function(){if(0<$(this).find(".queryitem").length){var e=$(this).find(".taxonomy-parent-arrow").first();void 0!==e&&0<e.length&&e.hasClass("icon-general-arrow-filled-right")&&(e.parents(".taxonomy-label-wrap").siblings(".taxonomy-child-list").slideToggle(),e.removeClass("icon-general-arrow-filled-right").addClass("icon-general-arrow-filled-down"))}})}$(document).on("click",".facetShowMore",function(e){$(this).closest(".sf-facet-list").find(".sf-facet:gt(11):visible").length?($(this).closest(".sf-facet-list").find(".sf-facet:gt(11):visible").animate({height:"toggle"},400),$(this).text("Show more")):($(this).closest(".sf-facet-list").find(".sf-facet").not(":visible").animate({height:"toggle"},400),$(this).text("Show less")),e.preventDefault()}),$("#searchResultsPage").on("click",".journal-description-container a",function(e){e.preventDefault(),$(this).closest(".journal-description-container").find(".journal-description").toggleClass("hide")}),n(),r();var p={},d=window.location.search.substring(1);function f(e,t){SCM.ArticleImageDetails.init("sr-item-image",e,t)}window.onpopstate=function(e){e.state&&SCM.SearchResults.doSolrSearch(e.state)},function(){var e=$(SCM.SearchResults.defaults.updateTargetSelector);p[d]={results:e.html()},window.history.replaceState({queryString:d},null,null);var t=$("#fromDate"),a=$("#ToDate");$("#fromDate").datepicker(),$("#ToDate").datepicker();var i=!0;Date.prototype.today=function(){return(this.getMonth()+1<10?"0":"")+(this.getMonth()+1)+"/"+(this.getDate()<10?"0":"")+this.getDate()+"/"+this.getFullYear()};var o=function(e){var t=/^(\d{1,2})[-\/](\d{1,2})[-\/](\d{2,4})$/.exec(e);if(null==t)return!1;var a=t[2],i=t[1]-1,n=t[3];2==n.length&&(n="20"+n);var r=new Date(n,i,a);return r.getDate()==a&&r.getMonth()==i&&r.getFullYear()==n},s=function(e){var t=/^(\d{4})$/.exec(e);return t&&-1<t[1]},l=function(e,t){var a=e.val(),i=null,n=null;return n=t?i="01":(i="12","31"),e.val(i+"/"+n+"/"+a),e.val()},c=function(e){var t=/^(\d{1,2})[-\/](\d{1,2})[-\/](\d{2,4})$/.exec(e),a=t[1],i=t[2],n=t[3],r=i,o=a,s=n;return 2==n.length&&(s="20"+n),1==i.length&&(r="0"+i),1==a.length&&(o="0"+a),o+"/"+r+"/"+s};e.on("click",".chkSelect",function(e){SCM.SearchResults.doSolrSearch({queryString:$(this).data("redirectUrl")})}),e.on("click",".js-sf-facet__link",function(e){var t=$(this).attr("data-url");null!==t&&"#"!==t&&""!==t&&(e.preventDefault(),SCM.SearchResults.doSolrSearch({queryString:t}))}),e.on("click","a.close",function(e){var t=$(this).attr("data-url");null!=t&&"#"!=t&&""!=t&&(e.preventDefault(),SCM.SearchResults.doSolrSearch({queryString:t})),h($("#fromDate"),!0),h($("#ToDate"),!1),$(".ui-datepicker-trigger")&&0!==$(".ui-datepicker-trigger").length||($(".datepicker__input").hasClass("hasDatepicker")&&$(".datepicker__input").removeClass("hasDatepicker"),SCM.AccessibleDatepicker.initDatepicker())}),e.on("click",".rbShowFacet",function(e){if(e.preventDefault(),"False"==$(this).attr("previous-status")){var t=$(this).attr("data-url");SCM.SearchResults.doSolrSearch({queryString:t})}}),e.on("click","#solrSearchBtn",function(e){var t=$("#txtSearch").val();null==t||""==t?alert("Please enter a term to perform search"):(t=encodeURIComponent(t),SCM.SearchResults.doSolrSearch({queryString:"q="+t}))}),e.on("click","#btnRangeSearch",function(e){var t=$("#fromDate").val();s(t)&&(t=l($("#fromDate"),!0));var a=$(".date-range-input-radio[value=single]").is(":checked")?t:$("#ToDate").val();if(""!==a&&s(a)&&(a=l($("#ToDate"),!1)),o(t)&&o(a)){var i=c(t),n=c(a);if(new Date(n)<new Date(i))alert("End Date must be greater than Start Date");else{var r=$(this).attr("data-url").replace("queryText",i+" TO "+n);SCM.SearchResults.doSolrSearch({queryString:r})}}else alert("Please enter valid dates")});var n=function(e){return"string"==typeof e?"true"==e.toLowerCase():!!e},r=function(){var e={UserEmail:$("#UserEmail").val(),ResourceTitle:$("#ResourceTitle").val(),AlertType:$("#AlertType").val(),CurrentUserEmail:$("#CurrentUserEmail").val(),IsUserAlreadySubscribed:n($("#IsUserAlreadySubscribed").val()),SuccessfulUpdate:$("#SuccessfulUpdate").val(),ResourceId:$("#ResourceId").val(),ResourceType:$("#ResourceType").val(),SearchTerm:$("#SearchTerm").val(),SearchUrl:$("#SearchUrl").val(),CurrentAlertContextSiteId:$("#CurrentAlertContextSiteId").val(),ShowSaveSearchToUnauthenticatedUser:n($("#ShowSaveSearchToUnauthenticatedUser").val()),UserIsLoggedIn:n($("#UserIsLoggedIn").val())};if(null!=e.IsUserAlreadySubscribed&&e.IsUserAlreadySubscribed){var t=$("#Config_SearchAlertMyAccoutUrl").val();window.location.href=t}else e.ShowSaveSearchToUnauthenticatedUser&&!e.UserIsLoggedIn?(ShowSignInForSearchAlertSignUp(),i=!0):$.post("/Toolbox/ToolboxGetAlertsUpdateMessage",e,function(e){i=!0,alert("Alert Saved Sucessfully. Visit My Account page to manage your email alerts"),$("#divSearchAlerts").html(e),$("#divSearchAlerts a").on("click",function(e){e.preventDefault(),r()})})};e.on("click","#divSearchAlerts a",function(e){e.preventDefault(),i&&(i=!1,r())}),h(t,!0),h(a,!1)}(),f(!1,"0"),SCM.SearchResults=$.extend(SCM.SearchResults,function(c,e){function d(e,t,a){window.console&&console.error(a)}function u(e,t){if(c(".ui-datepicker-trigger")&&0!==c(".ui-datepicker-trigger").length||c(".datepicker__input").hasClass("hasDatepicker")&&c(".datepicker__input").removeClass("hasDatepicker"),SCM.AccessibleDatepicker.initDatepicker(),i(t[0]),h(c("#fromDate"),!0),h(c("#ToDate"),!1),"undefined"!=typeof clientViewOption&&""!==clientViewOption){var a=c(".sri-expandedView");"Expanded"===clientViewOption?a.show():a.hide()}r(),n(),window.history.state?window.history.state.queryString!=e.queryString&&window.history.pushState(e,null,window.location.pathname+"?"+e.queryString):window.history.pushState(e,null,window.location.pathname+"?"+e.queryString),SCM.JournalCitationFilter&&SCM.JournalCitationFilter.init()}var i=function(e){e.getBoundingClientRect().top<0&&c("html, body").animate({scrollTop:e.offsetTop},1e3)};return{doSolrSearch:function(t){var a,i=!1;void 0!==t.openModal&&(i=!0,a=t.openModal);if(/\/(search-results|advanced-search)$/i.test(location.pathname)){var n=c.extend(SCM.SearchResults.defaults,t);if(/\/advanced-search$/i.test(location.pathname)){var e="/search-results";return void 0!==n.baseSiteUrl&&""!==n.baseSiteUrl&&(e="//"+n.baseSiteUrl+e),e+="?"+t.queryString,void(window.location=e)}var r=c(n.updateTargetSelector);if(p[t.queryString])t.cacheSearchWithoutUpdatingDom||(r.html(p[t.queryString].results).show(),SCM.SolrSearch.ajaxComplete(),u(t,r),f(i,a));else{var o=!1,s=c.deparam.querystring().mg;void 0!==s&&(o="true"===s.toLowerCase()),o&&(n.instanceName="OUP_SearchResults_MG",null!==t.queryString&&(0<t.queryString.toLowerCase().indexOf("mg=true")||(t.queryString=t.queryString+"&mg=true")));var l="/"+n.controller+"/"+n.action+"/"+n.instanceName;void 0!==n.baseSiteUrl&&""!==n.baseSiteUrl&&(l="//"+n.baseSiteUrl+l),l+="?"+t.queryString,t.functionToDoWhileAjaxLoading&&t.functionToDoWhileAjaxLoading(t.currentItem),c.get(l).done(function(e){t.cacheSearchWithoutUpdatingDom||r.html(e),p[t.queryString]={results:e,updateTargetSelector:n.updateTargetSelector},t.cacheSearchWithoutUpdatingDom||(u(t,r),f(i,a))}).fail(d).always(function(){t.functionToDoWhileAjaxLoading&&t.functionToDoWhileAjaxLoading(t.currentItem)})}}}}}(jQuery))});var SCM=SCM||{};!function(SolrSearch,$,undefined){var bodyVar=$("body"),hfSolrJournalID=$("#hfSolrJournalID"),hfParentSiteName=$("#hfParentSiteName").val(),hfGlobalSearchSiteURL=$("#hfGlobalSearchSiteURL").val(),currentSearchScope=$("#navbar-search-filter :selected").val(),hfjournalSiteScope=$("#hfjournalSiteScope").val(),hfparentSiteScope=$("#hfparentSiteScope").val(),searchSiteID=$("#hfsiteID").val(),hfParentSiteURL=$("#hfparentSiteUrl").val(),hfparentSiteID=$("#hfparentSiteID").val(),siteUrl=$("#hfSiteURL").val(),hfdefaultSearchURL=$("#hfdefaultSearchURL").val(),defaultAdvancedSearchUrl=$("#hfDefaultAdvancedSearchUrl").val(),hfIssueSearch=$("#hfIssueSearch").val(),hfIssueSiteScope=$("#hfIssueSiteScope").val(),queryText="";function setAdvancedSearchLinkToCurrentSearchScope(){currentSearchScope===hfparentSiteScope?$(".js-advanced-search").attr("href",getBaseUrl(hfParentSiteURL)+"/"+getSearchUrl(defaultAdvancedSearchUrl)):currentSearchScope===hfjournalSiteScope?$(".js-advanced-search").attr("href",getBaseUrl()+"/journals/"+getSearchUrl(defaultAdvancedSearchUrl,null,null,null,!0)):""!==currentSearchScope?$(".js-advanced-search").attr("href",getBaseUrl(siteUrl)+"/"+getSearchUrl(defaultAdvancedSearchUrl,null,searchSiteID,currentSearchScope)):$(".js-advanced-search").attr("href",getBaseUrl(siteUrl)+"/"+getSearchUrl(defaultAdvancedSearchUrl,null,searchSiteID))}function getBaseUrl(e){return isNullOrEmpty(e)?getUrlProtocol()+window.location.hostname:getUrlProtocol()+e}function getUrlProtocol(){return window.location.protocol+"//"}$("#navbar-search-filter, #mobile-navbar-search-filter").change(function(){currentSearchScope=$(this).val(),setAdvancedSearchLinkToCurrentSearchScope()});var testSearchInput=function(e,t){if(""===hfParentSiteName)return""===$.trim(e)||null===e||"Search OUP"===e?(alert("Please enter a term to search: "),!1):e?(doSolrSearch(e,t),!0):(console.error("Search failed"),!1);doSolrSearch(e,t)},doKeywordsSearch=function(e){'"'!==e[0]&&'"'!==e[e.length-1]&&(e='"'+e+'"');var t='search-results?page=1&qb=%7B"Keywords1":'+encodeURIComponent(e)+"%7D&SearchSourceType=1";if(hfGlobalSearchSiteURL===undefined||hfGlobalSearchSiteURL!==undefined&&""===hfGlobalSearchSiteURL){var a=$("#hfSiteURL");a.length&&(t="//"+a.val()+"/"+t)}else t="//"+hfGlobalSearchSiteURL.val()+t;window.location.href=t},testKeypress=function(e,t,a){13===e.keyCode&&(e.preventDefault(),testSearchInput(a,t))};function doSolrSearch(e,t){queryText=encodeURIComponent(e);var a="",i="";i=hfGlobalSearchSiteURL===undefined||hfGlobalSearchSiteURL!==undefined&&""===hfGlobalSearchSiteURL?$("#hfSiteURL"):hfGlobalSearchSiteURL,t===$("#hfjournalSiteScope").val()?(a="/../journals/"+hfdefaultSearchURL+queryText+"&SearchSourceType=1",window.location.href=a):isNullOrEmpty(t)?(a=getSearchUrl(hfdefaultSearchURL,queryText,searchSiteID,null,!0),i.length&&(a="//"+i.val()+"/"+a),window.location.href=a):t===$("#hfparentSiteScope").val()?(a=getSearchUrl(hfdefaultSearchURL,queryText,hfparentSiteID),a="//"+hfParentSiteURL+"/"+a,window.location.href=a):window.location.href=(a=t===hfIssueSiteScope?getSearchUrl(hfdefaultSearchURL,queryText,hfparentSiteID,null,!1,!0):getSearchUrl(hfdefaultSearchURL,queryText,searchSiteID,t),i.length&&(a="//"+i.val()+"/"+a),a)}function getSearchUrl(e,t,a,i,n,r){isNullOrEmpty(n)&&(n=!1);var o=e;return isNullOrEmpty(t)?o=o.replace("&q=",""):o+=t,isNullOrEmpty(a)||(o+="&fl_SiteID="+a),o+="&SearchSourceType=1",!0===n&&(o+="&allJournals=1"),r&&(isNullOrEmpty(hfIssueSearch)||(o+=hfIssueSearch)),isNullOrEmpty(i)||(o+="&"+getTaxonomyParameter(i)),o}function isNullOrEmpty(e){return void 0===e||e===undefined||null==e||""==e}function getTaxonomyParameter(e){return"tax="+e}var openSaveSolrSearch=function(e){e.foundation("reveal","open")};function initDateRangeToggle(){$(".date-range-input-radio").on("click",function(){"single"===$(this).attr("value")?($(".date-input-to").hide(),$(".date-label-from span").text("Search on this date").append("<br/>")):($(".date-input-to").show(),$(".date-label-from span").text("From"))})}var saveSolrSearchInfo=function(solrSearchSaveModel){var txtSolrSearchName=$(".txtSolrSearchName"),ddlSearchAlertFrequency=$("#ddlSearchAlertFrequency");if(""===$.trim(txtSolrSearchName.val())||null===txtSolrSearchName.val())return alert("Please enter a name"),!1;var redirectUrl=$("#hdnSearchSaveRedirectUrl"),currentUrl=window.location.href,token=$("#SolrSearchAuthToken").val(),data=JSON.stringify({searchName:txtSolrSearchName.val(),url:currentUrl,scheduleId:ddlSearchAlertFrequency.val(),redirectUrl:redirectUrl.val(),token:token}),ajaxUrl="//"+SCM.SearchResults.defaults.baseSiteUrl+"/Solr/SaveSolrSearchInfoWithToken";$.ajax({url:ajaxUrl,type:"POST",dataType:"json",cache:!1,data:data,contentType:"application/json; charset=utf-8",success:function(e){null!=e&&(e.ReturnId&&$("#SolrSearchAuthToken").val(e.ReturnId),e.RedirectUrl&&e.RedirectUrl.length?window.location=e.RedirectUrl:(alert(e.Html),solrSearchSaveModel.foundation("reveal","close")))},error:function(xmlHttpRequest,textStatus,errorThrown){if(window.console){var err=eval("("+xmlHttpRequest.responseText+")");console.log("error: "+err),console.log("status: "+textStatus)}}})};function buildSaveSearchUiEvent(){var e=$(".lnkSaveSolrSearch"),i=$(".solrSearchSaveModel"),t=$(".btnSolrSearchSave"),a=$(".txtSolrSearchName");e.unbind("click").on("click",function(){var e=$(this).attr("data-userloggedin");if(e!==undefined&&"false"===e.toLowerCase()){var t=$("#hdnSearchSaveRedirectUrl"),a=window.location.href;window.location=t.val()+"?returnUrl="+encodeURIComponent(a+"#triggerSaveSearch=1")}else openSaveSolrSearch(i)}),t.unbind("click").on("click",function(){saveSolrSearchInfo(i)}),a.off("keypress").on("keypress",function(e){13===(e.keyCode||e.which)&&saveSolrSearchInfo(i)})}function restrictedImagesSearch(){$("div.sri-figure[restricted]").each(function(){$(this).unbind("contextmenu").bind("contextmenu",function(){return!1})})}function bindUiEvents(){var e=$(".master-header").find(".microsite-search-icon"),t=$(".master-header").find(".microsite-search-term"),a=$(".master-header").find(".mobile-microsite-search-icon"),i=$(".master-header").find(".mobile-microsite-search-term"),n=$(".toolbar-search").find(".microsite-search-icon"),r=$(".toolbar-search").find(".microsite-search-term"),o=$("#UmbrellaSearchIcon"),s=$("#UmbrellaHomeSearchIcon"),l=$("#UmbrellaSearchTerm"),c=$("#UmbrellaHomeSearchTerm"),d=$(".kwd-part");o.on("click",function(){testSearchInput(l.val(),"J*")}),s.on("click",function(){testSearchInput(c.val(),"J*")}),e.on("click",function(){testSearchInput(t.val(),currentSearchScope)}),a.on("click",function(){testSearchInput(i.val(),currentSearchScope)}),n.on("click",function(){testSearchInput(r.val(),currentSearchScope)}),$(".searchLi .icon-search").on("click",function(){testSearchInput(t.val(),currentSearchScope)}),d.on("click",function(){doKeywordsSearch($(this).attr("data-keyword"))}),l.bind("keypress",function(e){testKeypress(e,"J*",l.val())}),c.bind("keypress",function(e){testKeypress(e,"J*",c.val())}),t.bind("keypress",function(e){testKeypress(e,currentSearchScope,t.val())}),i.bind("keypress",function(e){testKeypress(e,currentSearchScope,i.val())}),r.bind("keypress",function(e){testKeypress(e,currentSearchScope,r.val())})}$("body").on("click",".taxonomy-label",function(){var e=$("#TaxonomyCurrentDataUrl").val();if(e=decodeURIComponent(e),""!==$(this).attr("data-parentid")){var t=$(".taxonomy-node").attr("data-id"),a=$(this).parent(".taxonomy-label-wrap").attr("data-id"),i=e.indexOf("tax");if(-1!==i){var n=e.substring(i);if(null!==n&&""!==n)if(-1<n.indexOf("="+t))e=e.replace(n,"tax="+a);else if(-1===$.inArray(a,decodeURIComponent(n.slice(4)).split(","))){var r=n+","+a;e=e.replace(n,r)}}else e+="&tax="+a;SCM.SearchResults.doSolrSearch({queryString:e})}}),SolrSearch.init=function(){var a="";bindUiEvents(),buildSaveSearchUiEvent(),initDateRangeToggle(),restrictedImagesSearch(),setAdvancedSearchLinkToCurrentSearchScope(),$("body").on("click",".sf-group-header",function(){if($(window).outerWidth()<1024){var e=$(this),t=e.children(".sf-group-header-icon");e.siblings("fieldset").children(".sf-facets, .sf-facet-list").slideToggle(),e.siblings(".taxonomy-node").slideToggle(),t.hasClass("icon-general_arrow-right")?t.removeClass("icon-general_arrow-right").addClass("icon-general_arrow-down"):t.removeClass("icon-general_arrow-down").addClass("icon-general_arrow-right")}}),SCM.QueryBuilder.configure(),0<$(SCM.SearchResults.defaults.updateTargetSelector).length?SCM.QueryBuilder.defaults.runSearch=function(e){SCM.SearchResults.doSolrSearch({queryString:e})}:($(".querybuilder-submit").attr("value","Search"),$(".querybuilder-title").text("Build a query"),SCM.QueryBuilder.defaults.runSearch=function(e){var t=$("#hfSiteURL").val();-1===e.indexOf("q=")&&(e="q="+e),window.location=window.location.protocol+"//"+t+"/search-results?"+e}),$(".sort-dropdown-option:selected").addClass("selected"),bodyVar.on("click",".sriTopiclink",function(e){var t=(queryText=$(this).text()).replace(",","");doSolrSearch(t,""===(a=currentSearchScope)||null===a?null:a),e.preventDefault()}),$("a.categoryLink").each(function(){var e=$(this).attr("href"),t=hfSolrJournalID.val();if(isNullOrEmpty(t))$(this).attr("href",hfGlobalSearchSiteURL+e);else{var a=t.substr(1,t.length);$(this).attr("href","/"+e+"&fd_JournalID="+a)}}),bodyVar.on("click","#topicResultsWire",function(e){var t=location.search;t=t.substring(0,t.indexOf("&fd_JournalID")),window.location.href=hfGlobalSearchSiteURL.val()+"solr/topicresults.aspx"+t}),bodyVar.on("click",".mg-tab",function(e){var t=$(this).data("tab"),a=$.deparam.querystring().q,i="";void 0!==a&&(i="&q="+a);var n="",r=$.deparam.querystring().fl_SiteID;void 0!==r&&(n="&fl_SiteID="+r);var o="",s=$.deparam.querystring().SearchSourceType;void 0!==s&&(o="&SearchSourceType="+s);var l="",c=$.deparam.querystring().allJournals;void 0!==c&&(l="&allJournals="+c);var d=$.deparam.querystring().mg,u=!1;void 0!==d&&(u="true"===d.toLowerCase());var h=window.location.href.split("?")[0]+"?page=1"+i+n+o+l;"Images"!==t||u?"AllResults"===t&&u&&(window.location.href=h):window.location.href=h+"&mg=true"})},SolrSearch.ajaxComplete=function(){buildSaveSearchUiEvent(),initDateRangeToggle(),restrictedImagesSearch(),SCM.QueryBuilder.configure(),SCM.SiteJS.initSearchResultsSort()},SCM.SearchResults.defaults.instanceName="OUP_SearchResults",SCM.SearchResults.defaults.updateTargetSelector="#searchResultsPage";var baseSiteURL=$("#hfSiteURL");void 0!==baseSiteURL&&""!==baseSiteURL.val()&&(SCM.SearchResults.defaults.baseSiteUrl=baseSiteURL.val()),SCM.SolrSearch.init()}(SCM.SolrSearch=SCM.SolrSearch||{},jQuery);try{var _cookiepolicyfancybox=jQuery}catch(e){try{var _cookiepolicyfancybox=$}catch(e){}}$!==jQuery&&(_cookiepolicyfancybox=_cookiepolicyfancybox.noConflict()),function(s){var l,c,a,i,t,d,n,r,o,u,e,h,p,f=0,g={},m=[],v=0,y={},b=[],w=null,S=new Image,C=/\.(jpg|gif|png|bmp|jpeg)(.*)?$/i,k=/[^\.]\.(swf)\s*$/i,x=1,_=0,M="",A=!1,T=s.extend(s("<div/>")[0],{prop:0}),D=function(){c.hide(),S.onerror=S.onload=null,w&&w.abort(),l.empty()},$=function(){if(!1===g.onError(m,f,g))return c.hide(),void(A=!1);g.titleShow=!1,g.width="auto",g.height="auto",l.html('<p id="oupcookiepolicy_fancybox-error">The requested content cannot be loaded.<br />Please try again later.</p>'),F()},I=function(){var i,e,t,a,n,r,o=m[f];if(D(),g=s.extend({},s.fn.oupcookiepolicy_fancybox.defaults,void 0===s(o).data("oupcookiepolicy_fancybox")?g:s(o).data("oupcookiepolicy_fancybox")),!1!==(r=g.onStart(m,f,g)))if("object"==typeof r&&(g=s.extend(g,r)),t=g.title||(o.nodeName?s(o).attr("title"):o.title)||"",o.nodeName&&!g.orig&&(g.orig=s(o).children("img:first").length?s(o).children("img:first"):s(o)),""===t&&g.orig&&g.titleFromAlt&&(t=g.orig.attr("alt")),i=g.href||(o.nodeName?s(o).attr("href"):o.href)||null,(/^(?:javascript)/i.test(i)||"#"==i)&&(i=null),g.type?(e=g.type,i||(i=g.content)):g.content?e="html":i&&(e=i.match(C)?"image":i.match(k)?"swf":s(o).hasClass("iframe")?"iframe":0===i.indexOf("#")?"inline":"ajax"),e)switch("inline"==e&&(o=i.substr(i.indexOf("#")),e=0<s(o).length?"inline":"ajax"),g.type=e,g.href=i,g.title=t,g.autoDimensions&&("html"==g.type||"inline"==g.type||"ajax"==g.type?(g.width="auto",g.height="auto"):g.autoDimensions=!1),g.modal&&(g.overlayShow=!0,g.hideOnOverlayClick=!1,g.hideOnContentClick=!1,g.enableEscapeButton=!1,g.showCloseButton=!1),g.padding=parseInt(g.padding,10),g.margin=parseInt(g.margin,10),l.css("padding",g.padding+g.margin),s(".oupcookiepolicy_fancybox-inline-tmp").unbind("oupcookiepolicy_fancybox-cancel").bind("oupcookiepolicy_fancybox-change",function(){s(this).replaceWith(d.children())}),e){case"html":l.html(g.content),F();break;case"inline":if(!0===s(o).parent().is("#oupcookiepolicy_fancybox-content"))return void(A=!1);s('<div class="oupcookiepolicy_fancybox-inline-tmp" />').hide().insertBefore(s(o)).bind("oupcookiepolicy_fancybox-cleanup",function(){s(this).replaceWith(d.children())}).bind("oupcookiepolicy_fancybox-cancel",function(){s(this).replaceWith(l.children())}),s(o).appendTo(l),F();break;case"image":A=!1,s.oupcookiepolicy_fancybox.showActivity(),(S=new Image).onerror=function(){$()},S.onload=function(){A=!0,S.onerror=S.onload=null,j()},S.src=i;break;case"swf":g.scrolling="no",a='<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" width="'+g.width+'" height="'+g.height+'"><param name="movie" value="'+i+'"></param>',n="",s.each(g.swf,function(e,t){a+='<param name="'+e+'" value="'+t+'"></param>',n+=" "+e+'="'+t+'"'}),a+='<embed src="'+i+'" type="application/x-shockwave-flash" width="'+g.width+'" height="'+g.height+'"'+n+"></embed></object>",l.html(a),F();break;case"ajax":A=!1,s.oupcookiepolicy_fancybox.showActivity(),g.ajax.win=g.ajax.success,w=s.ajax(s.extend({},g.ajax,{url:i,data:g.ajax.data||{},error:function(e,t,a){0<e.status&&$()},success:function(e,t,a){if(200==("object"==typeof a?a:w).status){if("function"==typeof g.ajax.win){if(!1===(r=g.ajax.win(i,e,t,a)))return void c.hide();"string"!=typeof r&&"object"!=typeof r||(e=r)}l.html(e),F()}}}));break;case"iframe":E()}else $();else A=!1},F=function(){var e=g.width,t=g.height;e=-1<e.toString().indexOf("%")?parseInt((s(window).width()-2*g.margin)*parseFloat(e)/100,10)+"px":"auto"==e?"auto":e+"px",t=-1<t.toString().indexOf("%")?parseInt((s(window).height()-2*g.margin)*parseFloat(t)/100,10)+"px":"auto"==t?"auto":t+"px",l.wrapInner('<div style="width:'+e+";height:"+t+";overflow: "+("auto"==g.scrolling?"auto":"yes"==g.scrolling?"scroll":"hidden")+';position:relative;"></div>'),g.width=l.width(),g.height=l.height(),E()},j=function(){g.width=S.width,g.height=S.height,s("<img />").attr({id:"oupcookiepolicy_fancybox-img",src:S.src,alt:g.title}).appendTo(l),E()},E=function(){var e,t;return c.hide(),i.is(":visible")&&!1===y.onCleanup(b,v,y)?(s.event.trigger("oupcookiepolicy_fancybox-cancel"),void(A=!1)):(A=!0,s(d.add(a)).unbind(),s(window).unbind("resize.fb scroll.fb"),s(document).unbind("keydown.fb"),b=m,v=f,y=g,i.is(":visible")&&"outside"!==y.titlePosition&&i.css("height",i.height()),y.overlayShow?(a.css({"background-color":y.overlayColor,opacity:y.overlayOpacity,cursor:y.hideOnOverlayClick?"pointer":"auto",height:s(document).height()}),a.is(":visible")||a.show()):a.hide(),p=U(),L(),i.is(":visible")?(s(n.add(o).add(u)).hide(),e=i.position(),h={top:e.top,left:e.left,width:i.width(),height:i.height()},t=h.width==p.width&&h.height==p.height,void d.fadeTo(y.changeFade,.3,function(){var e=function(){d.html(l.contents()).fadeTo(y.changeFade,1,R)};s.event.trigger("oupcookiepolicy_fancybox-change"),d.empty().removeAttr("filter").css({"border-width":y.padding,width:p.width-2*y.padding,height:g.autoDimensions?"auto":p.height-_-2*y.padding}),t?e():(T.prop=0,s(T).animate({prop:1},{duration:y.changeSpeed,easing:y.easingChange,step:N,complete:e}))})):(i.removeAttr("style"),d.css("border-width",y.padding),"elastic"==y.transitionIn?(h=q(),d.html(l.contents()),i.show(),y.opacity&&(p.opacity=0),T.prop=0,void s(T).animate({prop:1},{duration:y.speedIn,easing:y.easingIn,step:N,complete:R})):("inside"==y.titlePosition&&0<_&&r.show(),d.css({width:p.width-2*y.padding,height:g.autoDimensions?"auto":p.height-_-2*y.padding}).html(l.contents()),void i.css(p).fadeIn("none"==y.transitionIn?0:y.speedIn,R))))},L=function(){var e;if(M=y.title||"",_=0,r.empty().removeAttr("style").removeClass(),!1!==y.titleShow)if((M=s.isFunction(y.titleFormat)?y.titleFormat(M,b,v,y):!(!(e=M)||!e.length)&&("float"==y.titlePosition?'<table id="oupcookiepolicy_fancybox-title-float-wrap" cellpadding="0" cellspacing="0"><tr><td id="oupcookiepolicy_fancybox-title-float-left"></td><td id="oupcookiepolicy_fancybox-title-float-main">'+e+'</td><td id="oupcookiepolicy_fancybox-title-float-right"></td></tr></table>':'<div id="oupcookiepolicy_fancybox-title-'+y.titlePosition+'">'+e+"</div>"))&&""!==M){switch(r.addClass("oupcookiepolicy_fancybox-title-"+y.titlePosition).html(M).appendTo("body").show(),y.titlePosition){case"inside":r.css({width:p.width-2*y.padding,marginLeft:y.padding,marginRight:y.padding}),_=r.outerHeight(!0),r.appendTo(t),p.height+=_;break;case"over":r.css({marginLeft:y.padding,width:p.width-2*y.padding,bottom:y.padding}).appendTo(t);break;case"float":r.css("left",-1*parseInt((r.width()-p.width-40)/2,10)).appendTo(i);break;default:r.css({width:p.width-2*y.padding,paddingLeft:y.padding,paddingRight:y.padding}).appendTo(i)}r.hide()}else r.hide();else r.hide()},R=function(){s.support.opacity||(d.get(0).style.removeAttribute("filter"),i.get(0).style.removeAttribute("filter")),g.autoDimensions&&d.css("height","auto"),i.css("height","auto"),M&&M.length&&r.show(),y.showCloseButton&&n.show(),function(){if((y.enableEscapeButton||y.enableKeyboardNav)&&s(document).bind("keydown.fb",function(e){27==e.keyCode&&y.enableEscapeButton?(e.preventDefault(),s.oupcookiepolicy_fancybox.close()):37!=e.keyCode&&39!=e.keyCode||!y.enableKeyboardNav||"INPUT"===e.target.tagName||"TEXTAREA"===e.target.tagName||"SELECT"===e.target.tagName||(e.preventDefault(),s.oupcookiepolicy_fancybox[37==e.keyCode?"prev":"next"]())}),!y.showNavArrows)return o.hide(),u.hide();(y.cyclic&&1<b.length||0!==v)&&o.show(),(y.cyclic&&1<b.length||v!=b.length-1)&&u.show()}(),y.hideOnContentClick&&d.bind("click",s.oupcookiepolicy_fancybox.close),y.hideOnOverlayClick&&a.bind("click",s.oupcookiepolicy_fancybox.close),s(window).bind("resize.fb",s.oupcookiepolicy_fancybox.resize),y.centerOnScroll&&s(window).bind("scroll.fb",s.oupcookiepolicy_fancybox.center),"iframe"==y.type&&s('<iframe id="oupcookiepolicy_fancybox-frame" name="oupcookiepolicy_fancybox-frame'+(new Date).getTime()+'" frameborder="0" hspace="0" allowtransparency="true" scrolling="'+g.scrolling+'" src="'+y.href+'"></iframe>').appendTo(d),i.show(),A=!1,s.oupcookiepolicy_fancybox.center(),y.onComplete(b,v,y),P()},P=function(){var e;b.length-1>v&&void 0!==(e=b[v+1].href)&&e.match(C)&&((new Image).src=e),0<v&&void 0!==(e=b[v-1].href)&&e.match(C)&&((new Image).src=e)},N=function(e){var t={width:parseInt(h.width+(p.width-h.width)*e,10),height:parseInt(h.height+(p.height-h.height)*e,10),top:parseInt(h.top+(p.top-h.top)*e,10),left:parseInt(h.left+(p.left-h.left)*e,10)};void 0!==p.opacity&&(t.opacity=e<.5?.5:e),i.css(t),d.css({width:t.width-2*y.padding,height:t.height-_*e-2*y.padding})},O=function(){return[s(window).width()-2*y.margin,s(window).height()-2*y.margin,s(document).scrollLeft()+y.margin,s(document).scrollTop()+y.margin]},U=function(){var e,t=O(),a={},i=y.autoScale,n=2*y.padding;return-1<y.width.toString().indexOf("%")?a.width=parseInt(t[0]*parseFloat(y.width)/100,10):a.width=y.width+n,-1<y.height.toString().indexOf("%")?a.height=parseInt(t[1]*parseFloat(y.height)/100,10):a.height=y.height+n,i&&(a.width>t[0]||a.height>t[1])&&("image"==g.type||"swf"==g.type?(e=y.width/y.height,a.width>t[0]&&(a.width=t[0],a.height=parseInt((a.width-n)/e+n,10)),a.height>t[1]&&(a.height=t[1],a.width=parseInt((a.height-n)*e+n,10))):(a.width=Math.min(a.width,t[0]),a.height=Math.min(a.height,t[1]))),a.top=parseInt(Math.max(t[3]-20,t[3]+.5*(t[1]-a.height-40)),10),a.left=parseInt(Math.max(t[2]-20,t[2]+.5*(t[0]-a.width-40)),10),a},q=function(){var e,t,a,i,n=!!g.orig&&s(g.orig);return n&&n.length?((i=(a=n).offset()).top+=parseInt(a.css("paddingTop"),10)||0,i.left+=parseInt(a.css("paddingLeft"),10)||0,i.top+=parseInt(a.css("border-top-width"),10)||0,i.left+=parseInt(a.css("border-left-width"),10)||0,i.width=a.width(),i.height=a.height(),{width:(e=i).width+2*y.padding,height:e.height+2*y.padding,top:e.top-y.padding-20,left:e.left-y.padding-20}):(t=O(),{width:2*y.padding,height:2*y.padding,top:parseInt(t[3]+.5*t[1],10),left:parseInt(t[2]+.5*t[0],10)})},B=function(){c.is(":visible")?(s("div",c).css("top",-40*x+"px"),x=(x+1)%12):clearInterval(e)};s.fn.oupcookiepolicy_fancybox=function(e){return s(this).length&&s(this).data("oupcookiepolicy_fancybox",s.extend({},e,s.metadata?s(this).metadata():{})).unbind("click.fb").bind("click.fb",function(e){if(e.preventDefault(),!A){A=!0,s(this).blur(),m=[],f=0;var t=s(this).attr("rel")||"";t&&""!=t&&"nofollow"!==t?(m=s("a[rel="+t+"], area[rel="+t+"]"),f=m.index(this)):m.push(this),I()}}),this},s.oupcookiepolicy_fancybox=function(e){var t;if(!A){if(A=!0,t=void 0!==arguments[1]?arguments[1]:{},m=[],f=parseInt(t.index,10)||0,s.isArray(e)){for(var a=0,i=e.length;a<i;a++)"object"==typeof e[a]?s(e[a]).data("oupcookiepolicy_fancybox",s.extend({},t,e[a])):e[a]=s({}).data("oupcookiepolicy_fancybox",s.extend({content:e[a]},t));m=jQuery.merge(m,e)}else"object"==typeof e?s(e).data("oupcookiepolicy_fancybox",s.extend({},t,e)):e=s({}).data("oupcookiepolicy_fancybox",s.extend({content:e},t)),m.push(e);(f>m.length||f<0)&&(f=0),I()}},s.oupcookiepolicy_fancybox.showActivity=function(){clearInterval(e),c.show(),e=setInterval(B,66)},s.oupcookiepolicy_fancybox.hideActivity=function(){c.hide()},s.oupcookiepolicy_fancybox.next=function(){return s.oupcookiepolicy_fancybox.pos(v+1)},s.oupcookiepolicy_fancybox.prev=function(){return s.oupcookiepolicy_fancybox.pos(v-1)},s.oupcookiepolicy_fancybox.pos=function(e){A||(e=parseInt(e),m=b,-1<e&&e<b.length?(f=e,I()):y.cyclic&&1<b.length&&(f=e>=b.length?0:b.length-1,I()))},s.oupcookiepolicy_fancybox.cancel=function(){A||(A=!0,s.event.trigger("oupcookiepolicy_fancybox-cancel"),D(),g.onCancel(m,f,g),A=!1)},s.oupcookiepolicy_fancybox.close=function(){if(!A&&!i.is(":hidden"))if(A=!0,y&&!1===y.onCleanup(b,v,y))A=!1;else if(D(),s(n.add(o).add(u)).hide(),s(d.add(a)).unbind(),s(window).unbind("resize.fb scroll.fb"),s(document).unbind("keydown.fb"),d.find("iframe").attr("src","about:blank"),"inside"!==y.titlePosition&&r.empty(),i.stop(),"elastic"==y.transitionOut){h=q();var e=i.position();p={top:e.top,left:e.left,width:i.width(),height:i.height()},y.opacity&&(p.opacity=1),r.empty().hide(),T.prop=1,s(T).animate({prop:0},{duration:y.speedOut,easing:y.easingOut,step:N,complete:t})}else i.fadeOut("none"==y.transitionOut?0:y.speedOut,t);function t(){a.fadeOut("fast"),r.empty().hide(),i.hide(),s.event.trigger("oupcookiepolicy_fancybox-cleanup"),d.empty(),b=g=[],v=f=0,y=g={},A=!1}},s.oupcookiepolicy_fancybox.resize=function(){a.is(":visible")&&a.css("height",s(document).height()),s.oupcookiepolicy_fancybox.center(!0)},s.oupcookiepolicy_fancybox.center=function(){var e,t;A||(t=!0===arguments[0]?1:0,e=O(),!t&&(i.width()>e[0]||i.height()>e[1])||i.stop().animate({top:parseInt(Math.max(e[3]-20,e[3]+.5*(e[1]-d.height()-40)-y.padding)),left:parseInt(Math.max(e[2]-20,e[2]+.5*(e[0]-d.width()-40)-y.padding))},"number"==typeof arguments[0]?arguments[0]:200))},s.oupcookiepolicy_fancybox.init=function(){s("#oupcookiepolicy_fancybox-wrap").length||(s("body").append(l=s('<div id="oupcookiepolicy_fancybox-tmp"></div>'),c=s('<div id="oupcookiepolicy_fancybox-loading"><div></div></div>'),a=s('<div id="oupcookiepolicy_fancybox-overlay"></div>'),i=s('<div id="oupcookiepolicy_fancybox-wrap"></div>')),(t=s('<div id="oupcookiepolicy_fancybox-outer"></div>').append('<div class="oupcookiepolicy_fancybox-bg" id="oupcookiepolicy_fancybox-bg-n"></div><div class="oupcookiepolicy_fancybox-bg" id="oupcookiepolicy_fancybox-bg-ne"></div><div class="oupcookiepolicy_fancybox-bg" id="oupcookiepolicy_fancybox-bg-e"></div><div class="oupcookiepolicy_fancybox-bg" id="oupcookiepolicy_fancybox-bg-se"></div><div class="oupcookiepolicy_fancybox-bg" id="oupcookiepolicy_fancybox-bg-s"></div><div class="oupcookiepolicy_fancybox-bg" id="oupcookiepolicy_fancybox-bg-sw"></div><div class="oupcookiepolicy_fancybox-bg" id="oupcookiepolicy_fancybox-bg-w"></div><div class="oupcookiepolicy_fancybox-bg" id="oupcookiepolicy_fancybox-bg-nw"></div>').appendTo(i)).append(d=s('<div id="oupcookiepolicy_fancybox-content"></div>'),n=s('<a id=""></a>'),r=s('<div id="oupcookiepolicy_fancybox-title"></div>'),o=s('<a href="javascript:;" id="oupcookiepolicy_fancybox-left"><span class="fancy-ico" id="oupcookiepolicy_fancybox-left-ico"></span></a>'),u=s('<a href="javascript:;" id="oupcookiepolicy_fancybox-right"><span class="fancy-ico" id="oupcookiepolicy_fancybox-right-ico"></span></a>')),n.click(s.oupcookiepolicy_fancybox.close),c.click(s.oupcookiepolicy_fancybox.cancel),o.click(function(e){e.preventDefault(),s.oupcookiepolicy_fancybox.prev()}),u.click(function(e){e.preventDefault(),s.oupcookiepolicy_fancybox.next()}),s.fn.mousewheel&&i.bind("mousewheel.fb",function(e,t){A?e.preventDefault():0!=s(e.target).get(0).clientHeight&&s(e.target).get(0).scrollHeight!==s(e.target).get(0).clientHeight||(e.preventDefault(),s.oupcookiepolicy_fancybox[0<t?"prev":"next"]())}),s.support.opacity||i.addClass("oupcookiepolicy_fancybox-ie"))},s.fn.oupcookiepolicy_fancybox.defaults={padding:10,margin:40,opacity:!1,modal:!1,cyclic:!1,scrolling:"auto",width:560,height:340,autoScale:!0,autoDimensions:!0,centerOnScroll:!1,ajax:{},swf:{wmode:"transparent"},hideOnOverlayClick:!0,hideOnContentClick:!1,overlayShow:!0,overlayOpacity:.7,overlayColor:"#777",titleShow:!0,titlePosition:"float",titleFormat:null,titleFromAlt:!1,transitionIn:"fade",transitionOut:"fade",speedIn:300,speedOut:300,changeSpeed:300,changeFade:"fast",easingIn:"swing",easingOut:"swing",showCloseButton:!0,showNavArrows:!0,enableEscapeButton:!1,enableKeyboardNav:!0,onStart:function(){},onCancel:function(){},onComplete:function(){},onCleanup:function(){},onClosed:function(){},onError:function(){}},s(document).ready(function(){s.oupcookiepolicy_fancybox.init()})}(jQuery);var domain="//global.oup.com",cookieWsUrl=domain+"/cookiealert",cookiePolicyUrl=domain+"/cookiepolicy/",version="/0",cookieDate="/01-01-2000",preferredLanguage="",cookieName="oup-cookie",databaseVersion="0",cookieOlderThanSpecificDays=!0,ie6Message='<div id="oupcookiepolicy_message" class="cookiepolicyimplied"><div class="cookiepolicytext">We use cookies to enhance your experience on our website. By clicking \'continue\' or by continuing to use our website, you are agreeing to our use of cookies. You can change your cookie settings at any time.</div><ul class="cookiepolicylinks"><li><a href="#" onClick="window.location.reload( true );" class="cookiepolicycontinue" title="Close this message">Continue</a></li><li><a href="http://global.oup.com/cookiepolicy/" target="_blank" class="cookiepolicymore" title="How we use cookies on this site">Find out more</a></li></ul><div class="cookiepolicyend"></div></div>';try{var _cookiepolicy=jQuery}catch(e){try{var _cookiepolicy=$}catch(e){}}function writeTheElements(){var e=document.createElement("div");e.innerHTML='<div id="cookiepolicy_div"><a id="cookiepolicy_link" href="#cookiepolicy_data"></a><div id="cookiepolicy_parent"style="display:none"><div id="cookiepolicy_data"></div></div></div>',document.body.insertBefore(e,document.body.firstChild)}function getTheCookie(){var e=window.navigator.userLanguage;null==e&&(e=window.navigator.language),e=e.substring(0,2);var t=metaKeywords();""!=oupcookiepolicy_preferredlanguage&&" "!=oupcookiepolicy_preferredlanguage&&"undefined"!=oupcookiepolicy_preferredlanguage&&0<oupcookiepolicy_preferredlanguage.length?preferredLanguage="/"+oupcookiepolicy_preferredlanguage:""!=t&&"undefined"!=t?(t=t.substring(0,2),preferredLanguage="/"+t):""!=e&&"undefined"!=e&&(e=e.substring(0,2),preferredLanguage="/"+e),""!=preferredLanguage&&"undefined"!=preferredLanguage||(preferredLanguage="/en");var a=document.cookie;cookiearray=a.split(";");for(var i=0;i<cookiearray.length;i++){var n=cookiearray[i].split("=")[0],r=cookiearray[i].split("=")[1];if(-1!=n.indexOf(cookieName)){version=""==r.split("_")[0]?"/0":"/"+r.split("_")[0];var o=constructDateString(r.split("_")[1]),s=new Date(o),l=new Date;cookieOlderThanSpecificDays=7776e6<l-s,cookieDate="/"+r.split("_")[1]}}}function metaKeywords(){var e="";for(metaCollection=document.getElementsByTagName("meta"),i=0;i<metaCollection.length;i++)nameAttribute=metaCollection[i].name.search(/language/),-1!=nameAttribute&&(e=metaCollection[i].content);return e}function constructDateString(e){try{var t=e.split("-")[0],a=e.split("-")[1];return e.split("-")[2]+","+a+","+t}catch(e){}}function checkForAlertMessage(){var e=null;if(e=createCORSRequest("GET",cookieWsUrl+preferredLanguage+version+cookieDate,!0),"undefined"!=typeof XDomainRequest)e.onprogress=function(){},e.ontimeout=function(){},e.onerror=function(){},e.onload=function(){"true"==e.responseText&&getAlertMessage()},setTimeout(function(){e.send()},0);else if(window.ActiveXObject)e.onreadystatechange=function(){4==e.readyState&&200==e.status&&"true"==e.responseText&&getAlertMessage()},e.send();else try{e.onreadystatechange=function(){4==e.readyState&&"true"==e.responseText&&getAlertMessage()},e.send()}catch(e){}}function getAlertMessage(){var e=null,t=!1;e=createCORSRequest("GET",cookieWsUrl+preferredLanguage+"/"+oupcookiepolicy_messagetype,!0),"undefined"!=typeof XDomainRequest?e.onload=function(){t||(t=!0,generateAlertMessage(e.responseText))}:window.ActiveXObject?e.onreadystatechange=function(){4==e.readyState&&200==e.status&&(t=!0,generateAlertMessage(e.responseText))}:e.onreadystatechange=function(){4!=e.readyState||200!=e.status||t||(t=!0,generateAlertMessage(e.responseText))},e.send()}function createCORSRequest(t,a){navigator.userAgent;var i=new XMLHttpRequest;if("withCredentials"in i)i.open(t,a,!0);else if("undefined"!=typeof XDomainRequest)try{(i=new XDomainRequest).open(t,a)}catch(e){(i=new XMLHttpRequest).open(t,a,!0)}else if(window.ActiveXObject)try{(i=new ActiveXObject("Msxml2.XMLHTTP")).open(t,a)}catch(e){try{(i=new ActiveXObject("Microsoft.XMLHTTP")).open(t,a)}catch(e){i.open(t,a,!0)}}else try{(i=new XDomainRequest).open(t,a)}catch(e){(i=new XMLHttpRequest).open(t,a,!0)}return i}function generateAlertMessage(e){var t="/cookiepolicy/",a="1",i=preferredLanguage.substring(1,preferredLanguage.length).split(","),n=0,r="",o="";if(e.length&&0<e.length){i.length;if(-1!=e.indexOf("____"))for(var s=e.split("____"),l=s.length-1,c=0;c<l;c++){var d=s[c].substring(0,e.indexOf("|"));r=s[c].substring(s[c].indexOf("|")+1,s[c].length);for(var u=FindNewLangWithCountryCode(i[n++]),h=r.split(t),p=h.length,f="",g=0;g<p;g++)f=0!=g?"explicit"==oupcookiepolicy_messagetype?f+t+"?siteid="+oupcookiepolicy_siteid+"&lang="+u+h[g]+"<br/>":f+t+"?siteid="+oupcookiepolicy_siteid+"&lang="+u+h[g]:h[g];o+=f=f.replace("dbCookieVersion",d)}else if(e.length&&0<e.length&&-1!=e.indexOf("|")){d=e.substring(0,e.indexOf("|"));o=r=e.substring(e.indexOf("|")+1,e.length)}if(""!=a&&" "!=a||(a="1"),alertMessageToDisplay=o,"implied"==oupcookiepolicy_messagetype){alertMessageToDisplay=htmlDecode(alertMessageToDisplay);var m=document.createElement("div");m.innerHTML=alertMessageToDisplay,document.body.insertBefore(m,document.body.firstChild),saveCookie(a)}else{document.getElementById("cookiepolicy_data").innerHTML=alertMessageToDisplay;try{document.getElementById("cookiepolicy_link").click()}catch(e){_cookiepolicy("#cookiepolicy_link").click()}}}}function cookiePolicy(){window.open(cookiePolicyUrl,"_blank")}function saveCookie(e){var t=new Date,a=new Date;a.setDate(a.getDate()+365);var i=t.getDate()+"-"+(t.getMonth()+1)+"-"+t.getFullYear(),n=a.toGMTString(),r=cookieName+"="+e+"_"+i+"; expires="+n+"; path="+oupcookiepolicy_documentroot,o=document.domain;if(null!=oupcookiepolicy_siteid&&""!=oupcookiepolicy_siteid&&"journals"==oupcookiepolicy_siteid&&null!=o&&"undefine"!=o&&""!=o){var s="";if(-1!=o.indexOf(".")){var l=o.split(".");2<l.length&&(s="."+l[l.length-2]+"."+l[l.length-1]),r=r+"; domain="+s}}document.cookie=r,_cookiepolicy.oupcookiepolicy_fancybox&&_cookiepolicy.oupcookiepolicy_fancybox.close()}function closeImplied(){document.location.reload(!0)}function htmlDecode(e){var t,a,i=e;if(this.isEmpty(i))return"";if(i=this.HTML2Numerical(i),arr=i.match(/&#[0-9]{1,5};/g),null!=arr)for(var n=0;n<arr.length;n++)i=-32768<=(t=(a=arr[n]).substring(2,a.length-1))&&t<=65535?i.replace(a,String.fromCharCode(t)):i.replace(a,"");return i}function isEmpty(e){return!e||(null===e||0==e.length||/^\s+$/.test(e))}function HTML2Numerical(e){return swapArrayVals(e,this.arr1,this.arr2)}_cookiepolicy(document).ready(function(){writeTheElements(),getTheCookie(),"explicit"==oupcookiepolicy_messagetype&&"function"==typeof _cookiepolicy.oupcookiepolicy_fancybox&&(_cookiepolicy("a#cookiepolicy_link").oupcookiepolicy_fancybox({hideOnContentClick:!1,hideOnOverlayClick:!1}),_cookiepolicy("a.group").oupcookiepolicy_fancybox({transitionIn:"elastic",transitionOut:"elastic",speedIn:600,speedOut:200,overlayShow:!1}));try{cookieOlderThanSpecificDays&&checkForAlertMessage()}catch(e){var t="/cookiepolicy/";if(alertMessageToDisplay=htmlDecode(ie6Message),-1!=alertMessageToDisplay.indexOf(t)){var a=alertMessageToDisplay.substring(0,alertMessageToDisplay.indexOf(t)),i=alertMessageToDisplay.substring(alertMessageToDisplay.indexOf(t)+t.length,alertMessageToDisplay.length);alertMessageToDisplay=a+t+"?siteid="+oupcookiepolicy_siteid+i}var n=document.createElement("div");n.innerHTML=alertMessageToDisplay,document.body.insertBefore(n,document.body.firstChild),saveCookie(1)}}),_cookiepolicy(document).keydown(function(e){if(27==e.keyCode&&27==e.keyCode&&!e.disableEscape)return!1});var arr1=["&nbsp;","&iexcl;","&cent;","&pound;","&curren;","&yen;","&brvbar;","&sect;","&uml;","&copy;","&ordf;","&laquo;","&not;","&shy;","&reg;","&macr;","&deg;","&plusmn;","&sup2;","&sup3;","&acute;","&micro;","&para;","&middot;","&cedil;","&sup1;","&ordm;","&raquo;","&frac14;","&frac12;","&frac34;","&iquest;","&Agrave;","&Aacute;","&Acirc;","&Atilde;","&Auml;","&Aring;","&AElig;","&Ccedil;","&Egrave;","&Eacute;","&Ecirc;","&Euml;","&Igrave;","&Iacute;","&Icirc;","&Iuml;","&ETH;","&Ntilde;","&Ograve;","&Oacute;","&Ocirc;","&Otilde;","&Ouml;","&times;","&Oslash;","&Ugrave;","&Uacute;","&Ucirc;","&Uuml;","&Yacute;","&THORN;","&szlig;","&agrave;","&aacute;","&acirc;","&atilde;","&auml;","&aring;","&aelig;","&ccedil;","&egrave;","&eacute;","&ecirc;","&euml;","&igrave;","&iacute;","&icirc;","&iuml;","&eth;","&ntilde;","&ograve;","&oacute;","&ocirc;","&otilde;","&ouml;","&divide;","&oslash;","&ugrave;","&uacute;","&ucirc;","&uuml;","&yacute;","&thorn;","&yuml;","&quot;","&amp;","&lt;","&gt;","&OElig;","&oelig;","&Scaron;","&scaron;","&Yuml;","&circ;","&tilde;","&ensp;","&emsp;","&thinsp;","&zwnj;","&zwj;","&lrm;","&rlm;","&ndash;","&mdash;","&lsquo;","&rsquo;","&sbquo;","&ldquo;","&rdquo;","&bdquo;","&dagger;","&Dagger;","&permil;","&lsaquo;","&rsaquo;","&euro;","&fnof;","&Alpha;","&Beta;","&Gamma;","&Delta;","&Epsilon;","&Zeta;","&Eta;","&Theta;","&Iota;","&Kappa;","&Lambda;","&Mu;","&Nu;","&Xi;","&Omicron;","&Pi;","&Rho;","&Sigma;","&Tau;","&Upsilon;","&Phi;","&Chi;","&Psi;","&Omega;","&alpha;","&beta;","&gamma;","&delta;","&epsilon;","&zeta;","&eta;","&theta;","&iota;","&kappa;","&lambda;","&mu;","&nu;","&xi;","&omicron;","&pi;","&rho;","&sigmaf;","&sigma;","&tau;","&upsilon;","&phi;","&chi;","&psi;","&omega;","&thetasym;","&upsih;","&piv;","&bull;","&hellip;","&prime;","&Prime;","&oline;","&frasl;","&weierp;","&image;","&real;","&trade;","&alefsym;","&larr;","&uarr;","&rarr;","&darr;","&harr;","&crarr;","&lArr;","&uArr;","&rArr;","&dArr;","&hArr;","&forall;","&part;","&exist;","&empty;","&nabla;","&isin;","&notin;","&ni;","&prod;","&sum;","&minus;","&lowast;","&radic;","&prop;","&infin;","&ang;","&and;","&or;","&cap;","&cup;","&int;","&there4;","&sim;","&cong;","&asymp;","&ne;","&equiv;","&le;","&ge;","&sub;","&sup;","&nsub;","&sube;","&supe;","&oplus;","&otimes;","&perp;","&sdot;","&lceil;","&rceil;","&lfloor;","&rfloor;","&lang;","&rang;","&loz;","&spades;","&clubs;","&hearts;","&diams;"],arr2=["&#160;","&#161;","&#162;","&#163;","&#164;","&#165;","&#166;","&#167;","&#168;","&#169;","&#170;","&#171;","&#172;","&#173;","&#174;","&#175;","&#176;","&#177;","&#178;","&#179;","&#180;","&#181;","&#182;","&#183;","&#184;","&#185;","&#186;","&#187;","&#188;","&#189;","&#190;","&#191;","&#192;","&#193;","&#194;","&#195;","&#196;","&#197;","&#198;","&#199;","&#200;","&#201;","&#202;","&#203;","&#204;","&#205;","&#206;","&#207;","&#208;","&#209;","&#210;","&#211;","&#212;","&#213;","&#214;","&#215;","&#216;","&#217;","&#218;","&#219;","&#220;","&#221;","&#222;","&#223;","&#224;","&#225;","&#226;","&#227;","&#228;","&#229;","&#230;","&#231;","&#232;","&#233;","&#234;","&#235;","&#236;","&#237;","&#238;","&#239;","&#240;","&#241;","&#242;","&#243;","&#244;","&#245;","&#246;","&#247;","&#248;","&#249;","&#250;","&#251;","&#252;","&#253;","&#254;","&#255;","&#34;","&#38;","&#60;","&#62;","&#338;","&#339;","&#352;","&#353;","&#376;","&#710;","&#732;","&#8194;","&#8195;","&#8201;","&#8204;","&#8205;","&#8206;","&#8207;","&#8211;","&#8212;","&#8216;","&#8217;","&#8218;","&#8220;","&#8221;","&#8222;","&#8224;","&#8225;","&#8240;","&#8249;","&#8250;","&#8364;","&#402;","&#913;","&#914;","&#915;","&#916;","&#917;","&#918;","&#919;","&#920;","&#921;","&#922;","&#923;","&#924;","&#925;","&#926;","&#927;","&#928;","&#929;","&#931;","&#932;","&#933;","&#934;","&#935;","&#936;","&#937;","&#945;","&#946;","&#947;","&#948;","&#949;","&#950;","&#951;","&#952;","&#953;","&#954;","&#955;","&#956;","&#957;","&#958;","&#959;","&#960;","&#961;","&#962;","&#963;","&#964;","&#965;","&#966;","&#967;","&#968;","&#969;","&#977;","&#978;","&#982;","&#8226;","&#8230;","&#8242;","&#8243;","&#8254;","&#8260;","&#8472;","&#8465;","&#8476;","&#8482;","&#8501;","&#8592;","&#8593;","&#8594;","&#8595;","&#8596;","&#8629;","&#8656;","&#8657;","&#8658;","&#8659;","&#8660;","&#8704;","&#8706;","&#8707;","&#8709;","&#8711;","&#8712;","&#8713;","&#8715;","&#8719;","&#8721;","&#8722;","&#8727;","&#8730;","&#8733;","&#8734;","&#8736;","&#8743;","&#8744;","&#8745;","&#8746;","&#8747;","&#8756;","&#8764;","&#8773;","&#8776;","&#8800;","&#8801;","&#8804;","&#8805;","&#8834;","&#8835;","&#8836;","&#8838;","&#8839;","&#8853;","&#8855;","&#8869;","&#8901;","&#8968;","&#8969;","&#8970;","&#8971;","&#9001;","&#9002;","&#9674;","&#9824;","&#9827;","&#9829;","&#9830;"];function swapArrayVals(e,t,a){if(this.isEmpty(e))return"";var i;if(t&&a&&t.length==a.length)for(var n=0,r=t.length;n<r;n++)i=new RegExp(t[n],"g"),e=e.replace(i,a[n]);return e}function FindNewLangWithCountryCode(e){var t=!1,a="GB",i=new Array(10);i[0]=new Array(2),i[0][0]="ja",i[0][1]="JP",i[1]=new Array(2),i[1][0]="en",i[1][1]="GB",i[2]=new Array(2),i[2][0]="zh",i[2][1]="TW",i[3]=new Array(2),i[3][0]="de",i[3][1]="DE",i[4]=new Array(2),i[4][0]="fr",i[4][1]="FR",i[5]=new Array(2),i[5][0]="es",i[5][1]="ES",i[6]=new Array(2),i[6][0]="nl",i[6][1]="NL",i[7]=new Array(2),i[7][0]="it",i[7][1]="IT",i[8]=new Array(2),i[8][0]="pt",i[8][1]="PT",i[9]=new Array(2),i[9][0]="sk",i[9][1]="SK";for(var n=0;n<10;n++)for(var r=0;r<2;r++)if("Array["+n+", "+r+']:= "'+i[n][r]+'" ',0==r&&i[n][r]==e){e=e+"_"+(a=i[n][r+1]),t=!0;break}return t||(e="en_"+a),e}var SCM=SCM||{};SCM.BookToc=SCM.BookToc||{},function(e,r){function t(e){var t=r(this).find(".js-show-headings-icon");if(t.length){var a=t.data("sectionid");if(a){var i=r(".js-headings-placeholder[data-sectionid="+a+"]");if(i.length){if(t.hasClass("icon-general-arrow-filled-right")){if(!i.children().length){var n=window.location.origin+"/Book/ChapterHeadings";r.ajax({url:n,data:{chapterId:a}}).done(function(e){e&&e.length&&i.append(e)}).fail(function(e,t){window.console&&window.console.error&&(console.error("error: "+e.responseText),console.error("status: "+t))})}t.removeClass("icon-general-arrow-filled-right"),t.addClass("icon-general-arrow-filled-down")}else t.hasClass("icon-general-arrow-filled-down")&&(t.removeClass("icon-general-arrow-filled-down"),t.addClass("icon-general-arrow-filled-right"));i.toggleClass("hide")}else console.error(".js-headings-placeholder not found")}else console.error("sectionid not found")}else console.error(".js-show-headings-icon not found")}e.init=function(){e.registerHeadingsClick()},e.registerHeadingsClick=function(){r("body").on("click",".js-show-headings-button",t)}}(SCM.BookToc.Headings=SCM.BookToc.Headings||{},jQuery);var SCM=SCM||{};SCM.BookToc=SCM.BookToc||{},function(e,t,a){e.init=function(){t.init()},a(function(){e.init()})}(SCM.BookToc,SCM.BookToc.Headings=SCM.BookToc.Headings||{},jQuery);
//# sourceMappingURL=footer.min.js.map
