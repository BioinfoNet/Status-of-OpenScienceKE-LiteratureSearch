/*
 jQuery JavaScript Library v3.4.1
 https://jquery.com/

 Includes Sizzle.js
 https://sizzlejs.com/

 Copyright JS Foundation and other contributors
 Released under the MIT license
 https://jquery.org/license

 Date: 2019-05-01T21:04Z
 Sizzle CSS Selector Engine v2.3.4
 https://sizzlejs.com/

 Copyright JS Foundation and other contributors
 Released under the MIT license
 https://js.foundation/

 Date: 2019-04-08
 Determine if an object is a Buffer

 @author   Feross Aboukhadijeh <https://feross.org>
 @license  MIT
*/
webpackJsonp([6],{"+Fex":function(f,k,a){a.d(k,"a",function(){return e});var e=Object.freeze({TYPE:{SURVEY:"SURVEY",POLL:"POLL",REVIEW:"REVIEW"},extractType:function(a){switch(a){case 0:case "0":case "SURVEY":return"SURVEY";case 1:case "1":case "POLL":return"POLL";case 2:case "2":case "REVIEW":return"REVIEW";default:return null}},STATUS:{DRAFT:"DRAFT",READY:"READY",STARTED:"STARTED",STOPPED:"STOPPED",COMPLETED:"COMPLETED"},extractStatus:function(a){switch(a){case 0:case "0":case "DRAFT":return"DRAFT";
case 1:case "1":case "READY":return"READY";case 2:case "2":case "STARTED":return"STARTED";case 3:case "3":case "STOPPED":return"STOPPED";case 4:case "4":case "COMPLETED":return"COMPLETED";default:return null}},SCHEDULE:{MANUAL:"MANUAL",SCHEDULED:"SCHEDULED"},extractSchedule:function(a){switch(a){case "0":case 0:case "MANUAL":return"MANUAL";case 1:case "1":case "SCHEDULED":return"SCHEDULED";default:return null}},CONDITION:{PERCENT_PAGE:"PERCENT_PAGE",AFTER_SEC:"AFTER_SEC",BEFORE_LEAVE:"BEFORE_LEAVE"},
extractCondition:function(a){switch(a){case 0:case "0":case "PERCENT_PAGE":return"PERCENT_PAGE";case 1:case "1":case "AFTER_SEC":return"AFTER_SEC";case 2:case "2":case "BEFORE_LEAVE":return"BEFORE_LEAVE";default:return null}},FREQUENCY:{ONCE_DAY:"ONCE_DAY",PAGE_VIEW:"PAGE_VIEW"},extractFrequency:function(a){switch(a){case 0:case "0":case "ONCE_DAY":return"ONCE_DAY";case 1:case "1":case "PAGE_VIEW":return"PAGE_VIEW";default:return"null"}},SCOPE:{DOI:"DOI",DOI_REGEX:"DOI_REGEX",JOURNAL_ID:"JOURNAL_ID",
URL_REGEX:"URL_REGEX"},extractScope:function(a){switch(a){case 0:case "0":case "DOI":return"DOI";case 1:case "1":case "DOI_REGEX":return"DOI_REGEX";case 2:case "2":case "JOURNAL_ID":return"JOURNAL_ID";case 3:case "3":case "URL_REGEX":return"URL_REGEX";default:return null}},extractDto:function(a){if(a){var b=this;return{id:a.id,type:b.extractType(a.type),status:b.extractStatus(a.status),creationTime:a.creationTime,lastModified:a.lastModified,settings:function(a){return a?{condition:a.condition?{type:b.extractCondition(a.condition.type),
value:a.condition.value}:null,frequency:a.frequency?{type:b.extractFrequency(a.frequency.type),value:a.frequency.value}:null,positions:a.positions,schedule:a.schedule?{type:b.extractSchedule(a.schedule.type),from:a.schedule.from,to:a.schedule.to}:null,scopes:function(a){if(a&&a.scopes&&Array.isArray(a.scopes)){var c=[];a.scopes.forEach(function(a){a&&c.push({value:a.value,type:b.extractScope(a.type)})});return c}return[]}(a)}:null}(a.settings)}}return null}})},"/1gr":function(f,k,a){var e=a("tNLN");
f.exports=function(a,b){for(;!Object.prototype.hasOwnProperty.call(a,b)&&(a=e(a),null!==a););return a}},"/JTF":function(f,k,a){Object.defineProperty(k,"__esModule",{value:!0});var e=a("CYdk");k["default"]=function(){var c=window,b=a("7t+N");if(b.xpath)return Promise.resolve(b);b.__orig="rmq";c.rmqJquery=b;c.jQuery&&(c.jQuery.__orig="own");var f=c.jQuery;c.jQuery=b;return window.Remarq&&window.Remarq.inOwnCode?a.e(0).then(a.bind(null,"xbmg")).then(function(a){return a})["catch"](function(a){error("Failed to load jQuery xpath",
a);throw a;}):Object(e["default"])(function(){return c.Remarq&&c.Remarq.grovePrefix}).then(function(b){var e=c.__webpack_public_path__;a.p=b+"dist/";a.e(0).then(a.bind(null,"xbmg")).then(function(a){return a})["catch"](function(a){error("Failed to load jQuery xpath",a);throw a;})["finally"](function(){a.p=e;f&&(c.jQuery=f)})})}()},"/gZ2":function(f,k){f.exports=function(a,e,c,b,f){f(a,function(a,f,d){c=b?(b=!1,a):e(c,a,f,d)});return c}},"037f":function(f,k,a){var e=a("1oyr"),c=a("p0bc");k=a("wSKX");
f.exports=c?function(a,f){return c(a,"toString",{configurable:!0,enumerable:!1,value:e(f),writable:!0})}:k},"07sv":function(f,k,a){var e=a("rpnb"),c=a("CxPB"),b=a("t8rQ");f.exports=function(a,f){return null==a?a:e(a,c(f),b)}},"09Qt":function(f,k,a){var e=a("uIr7"),c=a("vi0E"),b=a("l9Lx");k=a("C0hh");f.exports=Object.getOwnPropertySymbols?function(a){for(var f=[];a;)e(f,b(a)),a=c(a);return f}:k},"0Mzu":function(f,k,a){(function(a){!function(){var c,b,f,e,m,d=[].slice,x={}.hasOwnProperty,z=function(a,
b){function t(){this.constructor=a}for(var R in b)x.call(b,R)&&(a[R]=b[R]);t.prototype=b.prototype;a.prototype=new t;a.__super__=b.prototype;return a},h=function(a,b){return function(){return a.apply(b,arguments)}},A=[].indexOf||function(a){for(var b=0,t=this.length;b<t;b++)if(b in this&&this[b]===a)return b;return-1};var v=function(a){return this.map(function(){var b;var t="";for(b=this;(null!=b?b.nodeType:void 0)===Node.ELEMENT_NODE&&b!==a;){var c=b.tagName.replace(":","\\:");c=u(b.parentNode).children(c).index(b)+
1;c="["+c+"]";t="/"+b.tagName.toLowerCase()+c+t;b=b.parentNode}return t}).get()};var k=function(a){var b=function(a){var t=L(a);a=D(a);return""+t+"["+a+"]"};var t=function(t){var c;for(c="";t!==a;){if(null==t)throw Error("Called getPathTo on a node which was not a descendant of @rootNode. "+a);c=b(t)+"/"+c;t=t.parentNode}return c=("/"+c).replace(/\/$/,"")};return this.map(function(){return t(this)}).get()};var K=function(a,b,t){var c,R;if(!a.hasChildNodes())throw Error("XPath error: node has no children!");
var d=a.childNodes;var f=c=0;for(R=d.length;f<R;f++){a=d[f];var e=L(a);if(e===b&&(c+=1,c===t))return a}throw Error("XPath error: wanted child not found.");};var L=function(a){a=a.nodeName.toLowerCase();switch(a){case "#text":return"text()";case "#comment":return"comment()";case "#cdata-section":return"cdata-section()";default:return a}};var D=function(a){var b;var t=0;for(b=a;b;)b.nodeName===a.nodeName&&t++,b=b.previousSibling;return t};var F=null;if("undefined"!==typeof Gettext&&null!==Gettext){var S=
new Gettext({domain:"annotator"});F=function(a){return S.gettext(a)}}else F=function(a){return a};var B=function(a){return F(a)};var u=a;var J={flatten:function(a){var b=function(a){var t;var c=[];var R=0;for(t=a.length;R<t;R++){var d=a[R];c=c.concat(d&&u.isArray(d)?b(d):d)}return c};return b(a)},contains:function(a,b){for(;null!=b;){if(b===a)return!0;b=b.parentNode}return!1},getTextNodes:function(a){var b=function(a){if(a&&a.nodeType!==Node.TEXT_NODE){var t=[];if(a.nodeType!==Node.COMMENT_NODE)for(a=
a.lastChild;a;)t.push(b(a)),a=a.previousSibling;return t.reverse()}return a};return a.map(function(){return J.flatten(b(this))})},getLastTextNodeUpTo:function(a){switch(a.nodeType){case Node.TEXT_NODE:return a;case Node.ELEMENT_NODE:if(null!=a.lastChild){var b=J.getLastTextNodeUpTo(a.lastChild);if(null!=b)return b}}a=a.previousSibling;return null!=a?J.getLastTextNodeUpTo(a):null},getFirstTextNodeNotBefore:function(a){switch(a.nodeType){case Node.TEXT_NODE:return a;case Node.ELEMENT_NODE:if(null!=
a.firstChild){var b=J.getFirstTextNodeNotBefore(a.firstChild);if(null!=b)return b}}a=a.nextSibling;return null!=a?J.getFirstTextNodeNotBefore(a):null},readRangeViaSelection:function(a){var b=J.getGlobal().getSelection();b.removeAllRanges();b.addRange(a.toRange());return b.toString()},xpathFromNode:function(a,b){try{var t=v.call(a,b)}catch(na){t=k.call(a,b)}return t},nodeFromXPath:function(a,b){var t;a=a.substring(1).split("/");var c=0;for(t=a.length;c<t;c++){var R=a[c];var d=R.split("[");R=d[0];d=
d[1];d=null!=d?parseInt((null!=d?d.split("]"):void 0)[0]):1;b=K(b,R.toLowerCase(),d)}return b},escape:function(a){return a.replace(/&(?!\w+;)/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}};J.uuid=function(){var a=0;return function(){return a++}}();J.getGlobal=function(){return function(){return this}()};J.maxZIndex=function(a){var b;var t=[];var c=0;for(b=a.length;c<b;c++){var d=a[c];"static"===u(d).css("position")?t.push(-1):t.push(parseInt(u(d).css("z-index"),10)||
-1)}return Math.max.apply(Math,t)};J.mousePosition=function(a,b){var t;"absolute"!==(t=u(b).css("position"))&&"fixed"!==t&&"relative"!==t&&(b=u(b).offsetParent()[0]);b=u(b).offset();return{top:a.pageY-b.top,left:a.pageX-b.left}};J.preventEventDefault=function(a){return null!=a?"function"===typeof a.preventDefault?a.preventDefault():void 0:void 0};var ca="log debug info warn exception assert dir dirxml trace group groupEnd groupCollapsed time timeEnd profile profileEnd count clear table error notifyFirebug firebug userObjects".split(" ");
if("undefined"!==typeof console&&null!==console){null==console.group&&(console.group=function(a){return null});null==console.groupCollapsed&&(console.groupCollapsed=console.group);var T=0;for(c=ca.length;T<c;T++){var q=ca[T];null==console[q]&&(console[q]=function(){return null})}}else{this.console={};T=0;for(c=ca.length;T<c;T++)q=ca[T],this.console[q]=function(){};this.console.error=function(){var a=1<=arguments.length?d.call(arguments,0):[];return alert("ERROR: "+a.join(", "))};this.console.warn=
function(){var a=1<=arguments.length?d.call(arguments,0):[];return alert("WARNING: "+a.join(", "))}}var Q=function(){function a(a,t){this.options=u.extend(!0,{},this.options,t);this.element=u(a);this._closures={};this.on=this.subscribe;this.addEvents()}a.prototype.events={};a.prototype.options={};a.prototype.element=null;a.prototype.addEvents=function(){var b;var t=a._parseEvents(this.events);var c=[];var d=0;for(b=t.length;d<b;d++){var f=t[d];c.push(this._addEvent(f.selector,f.event,f.functionName))}return c};
a.prototype.removeEvents=function(){var b;var t=a._parseEvents(this.events);var c=[];var d=0;for(b=t.length;d<b;d++){var f=t[d];c.push(this._removeEvent(f.selector,f.event,f.functionName))}return c};a.prototype._addEvent=function(b,t,c){var d=this;var R=function(){return d[c].apply(d,arguments)};""===b&&a._isCustomEvent(t)?this.subscribe(t,R):this.element.delegate(b,t,R);this._closures[""+b+"/"+t+"/"+c]=R;return this};a.prototype._removeEvent=function(b,t,c){var d=this._closures[""+b+"/"+t+"/"+c];
""===b&&a._isCustomEvent(t)?this.unsubscribe(t,d):this.element.undelegate(b,t,d);delete this._closures[""+b+"/"+t+"/"+c];return this};a.prototype.publish=function(){this.element.triggerHandler.apply(this.element,arguments);return this};a.prototype.subscribe=function(a,t){var b=function(){return t.apply(this,[].slice.call(arguments,1))};b.guid=t.guid=u.guid+=1;this.element.bind(a,b);return this};a.prototype.unsubscribe=function(){this.element.unbind.apply(this.element,arguments);return this};return a}();
Q._parseEvents=function(a){var b,t;var c=[];for(b in a){var f=a[b];var e=b.split(" ");var h=2<=e.length?d.call(e,0,t=e.length-1):(t=0,[]);e=e[t++];c.push({selector:h.join(" "),event:e,functionName:f})}return c};Q.natives=function(){var b;var c=a.event.special;var t=[];for(b in c)x.call(c,b)&&t.push(b);return"blur focus focusin focusout load resize scroll unload click dblclick\nmousedown mouseup mousemove mouseover mouseout mouseenter mouseleave\nchange select submit keydown keypress keyup error".split(/[^a-z]+/).concat(t)}();
Q._isCustomEvent=function(a){a=a.split(".")[0];return-1===u.inArray(a,Q.natives)};var U={sniff:function(a){return null!=a.commonAncestorContainer?new U.BrowserRange(a):"string"===typeof a.start?new U.SerializedRange(a):a.start&&"object"===typeof a.start?new U.NormalizedRange(a):!1},nodeFromXPath:function(a,b){var t;null==b&&(b=document);var c=function(a,t){null==t&&(t=null);try{return document.evaluate("."+a,b,t,XPathResult.FIRST_ORDERED_NODE_TYPE,null).singleNodeValue}catch(da){return J.nodeFromXPath(a,
b)}};if(u.isXMLDoc(document.documentElement)){var d=document.createNSResolver(null===document.ownerDocument?document.documentElement:document.ownerDocument.documentElement);d=c(a,d);if(!d){a=function(){var b;var c=a.split("/");var d=[];var f=0;for(b=c.length;f<b;f++)(t=c[f])&&-1===t.indexOf(":")?d.push(t.replace(/^([a-z]+)/,"xhtml:$1")):d.push(t);return d}().join("/");var f=document.lookupNamespaceURI(null);d=function(a){return"xhtml"===a?f:document.documentElement.getAttribute("xmlns:"+a)};d=c(a,
d)}return d}return c(a)}};U.RangeError=function(a){function b(a,c,d){this.type=a;this.message=c;this.parent=null!=d?d:null;b.__super__.constructor.call(this,this.message)}z(b,a);return b}(Error);U.BrowserRange=function(){function a(a){this.commonAncestorContainer=a.commonAncestorContainer;this.startContainer=a.startContainer;this.startOffset=a.startOffset;this.endContainer=a.endContainer;this.endOffset=a.endOffset}a.prototype.normalize=function(a){var t;if(this.tainted)return!1;this.tainted=!0;var b=
t=void 0;if(this.startContainer.nodeType===Node.ELEMENT_NODE){a=J.getFirstTextNodeNotBefore(this.startContainer.childNodes[this.startOffset]);var c=0}else a=this.startContainer,c=this.startOffset;if(this.endContainer.nodeType===Node.ELEMENT_NODE){var d=this.endContainer.childNodes[this.endOffset];if(null!=d){for(;null!=d&&d.nodeType!==Node.TEXT_NODE;)d=d.firstChild;null!=d&&(t=d,b=0)}null==t&&(d=this.endContainer.childNodes[this.endOffset-1],t=J.getLastTextNodeUpTo(d),b=t.nodeValue.length)}else t=
this.endContainer,b=this.endOffset;d={};d.start=0<c?a.nodeValue.length>c?a.splitText(c):a.nextSibling:a;a===t?(d.start.nodeValue.length>b-c&&d.start.splitText(b-c),d.end=d.start):(t.nodeValue.length>b&&t.splitText(b),d.end=t);for(d.commonAncestor=this.commonAncestorContainer;d.commonAncestor.nodeType!==Node.ELEMENT_NODE;)d.commonAncestor=d.commonAncestor.parentNode;return new U.NormalizedRange(d)};a.prototype.serialize=function(a,t){return this.normalize(a).serialize(a,t)};return a}();U.NormalizedRange=
function(){function a(a){this.commonAncestor=a.commonAncestor;this.start=a.start;this.end=a.end}a.prototype.normalize=function(a){return this};a.prototype.limit=function(a){var t;var b=u.grep(this.textNodes(),function(t){return t.parentNode===a||u.contains(a,t.parentNode)});if(!b.length)return null;this.start=b[0];this.end=b[b.length-1];var c=u(this.start).parents();var d=u(this.end).parents();var f=0;for(t=d.length;f<t;f++)if(b=d[f],-1!==c.index(b)){this.commonAncestor=b;break}return this};a.prototype.serialize=
function(a,t){var b=function(b,c){var d,f;var e=t?u(b).parents(":not("+t+")").eq(0):u(b).parent();var h=J.xpathFromNode(e,a)[0];e=J.getTextNodes(e);var q=e.slice(0,e.index(b));var m=d=0;for(f=q.length;m<f;m++)e=q[m],d+=e.nodeValue.length;return c?[h,d+b.nodeValue.length]:[h,d]};var c=b(this.start);b=b(this.end,!0);return new U.SerializedRange({start:c[0],end:b[0],startOffset:c[1],endOffset:b[1]})};a.prototype.text=function(){var a;var t=this.textNodes();var b=[];var c=0;for(a=t.length;c<a;c++){var d=
t[c];b.push(d.nodeValue)}return b.join("")};a.prototype.textNodes=function(){var a=J.getTextNodes(u(this.commonAncestor));var t=[a.index(this.start),a.index(this.end)];return u.makeArray(a.slice(t[0],+t[1]+1||9E9))};a.prototype.toRange=function(){var a=document.createRange();a.setStartBefore(this.start);a.setEndAfter(this.end);return a};return a}();U.SerializedRange=function(){function a(a){this.start=a.start;this.startOffset=a.startOffset;this.end=a.end;this.endOffset=a.endOffset}a.prototype.normalize=
function(a){var t,b;var c={};var d=["start","end"];var f=0;for(t=d.length;f<t;f++){var e=d[f];try{var h=U.nodeFromXPath(this[e],a)}catch(va){throw a=va,new U.RangeError(e,"Error while finding "+e+" node: "+this[e]+": "+a,a);}if(!h)throw new U.RangeError(e,"Couldn't find "+e+" node: "+this[e]);var q=0;var m=this[e+"Offset"];"end"===e&&m--;var R=J.getTextNodes(u(h));var A=0;for(b=R.length;A<b;A++){var v=R[A];if(q+v.nodeValue.length>m){c[e+"Container"]=v;c[e+"Offset"]=this[e+"Offset"]-q;break}else q+=
v.nodeValue.length}if(null==c[e+"Offset"])throw new U.RangeError(""+e+"offset","Couldn't find offset "+this[e+"Offset"]+" in element "+this[e]);}var x=null==document.compareDocumentPosition?function(a,t){return a.contains(t)}:function(a,t){return a.compareDocumentPosition(t)&16};u(c.startContainer).parents().each(function(){if(x(this,c.endContainer))return c.commonAncestorContainer=this,!1});return(new U.BrowserRange(c)).normalize(a)};a.prototype.serialize=function(a,t){return this.normalize(a).serialize(a,
t)};a.prototype.toObject=function(){return{start:this.start,startOffset:this.startOffset,end:this.end,endOffset:this.endOffset}};return a}();var aa=this.Annotator;var G=function(a){function b(a,c){this.onDeleteAnnotation=h(this.onDeleteAnnotation,this);this.onEditAnnotation=h(this.onEditAnnotation,this);this.onAdderClick=h(this.onAdderClick,this);this.onAdderMousedown=h(this.onAdderMousedown,this);this.onHighlightMouseover=h(this.onHighlightMouseover,this);this.checkForEndSelection=h(this.checkForEndSelection,
this);this.checkForStartSelection=h(this.checkForStartSelection,this);this.clearViewerHideTimer=h(this.clearViewerHideTimer,this);this.startViewerHideTimer=h(this.startViewerHideTimer,this);this.showViewer=h(this.showViewer,this);this.onEditorSubmit=h(this.onEditorSubmit,this);this.onEditorHide=h(this.onEditorHide,this);this.showEditor=h(this.showEditor,this);b.__super__.constructor.apply(this,arguments);this.plugins={};if(!b.supported())return this;this.options.readOnly||this._setupDocumentEvents();
this._setupWrapper()._setupViewer()._setupEditor();this._setupDynamicStyle();this.adder=u(this.html.adder).appendTo(this.wrapper).hide();b._instances.push(this)}z(b,a);b.prototype.events={".annotator-adder button click":"onAdderClick",".annotator-adder button mousedown":"onAdderMousedown",".annotator-hl mouseover":"onHighlightMouseover",".annotator-hl mouseout":"startViewerHideTimer"};b.prototype.html={adder:'<div class="annotator-adder"><button>'+B("Annotate")+"</button></div>",wrapper:'<div class="annotator-wrapper"></div>'};
b.prototype.options={readOnly:!1};b.prototype.plugins={};b.prototype.editor=null;b.prototype.viewer=null;b.prototype.selectedRanges=null;b.prototype.mouseIsDown=!1;b.prototype.ignoreMouseup=!1;b.prototype.viewerHideTimer=null;b.prototype._setupWrapper=function(){this.wrapper=u(this.html.wrapper);this.element.find("script").remove();this.element.wrapInner(this.wrapper);this.wrapper=this.element.find(".annotator-wrapper");return this};b.prototype._setupViewer=function(){var a=this;this.viewer=new b.Viewer({readOnly:this.options.readOnly});
this.viewer.hide().on("edit",this.onEditAnnotation).on("delete",this.onDeleteAnnotation).addField({load:function(t,b){b.text?u(t).html(J.escape(b.text)):u(t).html("<i>"+B("No Comment")+"</i>");return a.publish("annotationViewerTextField",[t,b])}}).element.appendTo(this.wrapper).bind({mouseover:this.clearViewerHideTimer,mouseout:this.startViewerHideTimer});return this};b.prototype._setupEditor=function(){this.editor=new b.Editor;this.editor.hide().on("hide",this.onEditorHide).on("save",this.onEditorSubmit).addField({type:"textarea",
label:B("Comments")+"\u2026",load:function(a,b){return u(a).find("textarea").val(b.text||"")},submit:function(a,b){return b.text=u(a).find("textarea").val()}});this.editor.element.appendTo(this.wrapper);return this};b.prototype._setupDocumentEvents=function(){u(document).bind({mouseup:this.checkForEndSelection,mousedown:this.checkForStartSelection});return this};b.prototype._setupDynamicStyle=function(){var a=u("#annotator-dynamic-style");a.length||(a=u('<style id="annotator-dynamic-style"></style>').appendTo(document.head));
var b;var c=["adder","outer","notice","filter"];var d=[];var f=0;for(b=c.length;f<b;f++){var e=c[f];d.push(":not(.annotator-"+e+")")}e="*"+d.join("");e=J.maxZIndex(u(document.body).find(e));e=Math.max(e,1E3);a.text([".annotator-adder, .annotator-outer, .annotator-notice {","  z-index: "+(e+20)+";","}\n.annotator-filter {","  z-index: "+(e+10)+";","}"].join("\n"));return this};b.prototype.destroy=function(){u(document).unbind({mouseup:this.checkForEndSelection,mousedown:this.checkForStartSelection});
u("#annotator-dynamic-style").remove();this.adder.remove();this.viewer.destroy();this.editor.destroy();this.wrapper.find(".annotator-hl").each(function(){u(this).contents().insertBefore(this);return u(this).remove()});this.wrapper.contents().insertBefore(this.wrapper);this.wrapper.remove();this.element.data("annotator",null);var a=this.plugins;for(c in a)this.plugins[c].destroy();this.removeEvents();var c=b._instances.indexOf(this);if(-1!==c)return b._instances.splice(c,1)};b.prototype.getSelectedRanges=
function(){var a,b,c,d;var e=J.getGlobal().getSelection();var f=[];var h=[];e.isCollapsed||(f=function(){var t,d;var f=[];b=t=0;for(d=e.rangeCount;0<=d?t<d:t>d;b=0<=d?++t:--t)m=e.getRangeAt(b),a=new U.BrowserRange(m),c=a.normalize().limit(this.wrapper[0]),null===c&&h.push(m),f.push(c);return f}.call(this),e.removeAllRanges());var q=0;for(d=h.length;q<d;q++){var m=h[q];e.addRange(m)}return u.grep(f,function(a){a&&e.addRange(a.toRange());return a})};b.prototype.createAnnotation=function(){var a={};
this.publish("beforeAnnotationCreated",[a]);return a};b.prototype.setupAnnotation=function(a){var b;var t=this.wrapper[0];a.ranges||(a.ranges=this.selectedRanges);var c=[];var d=a.ranges;var e=0;for(b=d.length;e<b;e++){var f=d[e];try{c.push(U.sniff(f).normalize(t))}catch(eb){var h=eb;if(h instanceof U.RangeError)this.publish("rangeNormalizeFail",[a,f,h]);else throw h;}}a.quote=[];a.ranges=[];a.highlights=[];f=0;for(t=c.length;f<t;f++)h=c[f],a.quote.push(u.trim(h.text())),a.ranges.push(h.serialize(this.wrapper[0],
".annotator-hl")),u.merge(a.highlights,this.highlightRange(h));a.quote=a.quote.join(" / ");u(a.highlights).data("annotation",a);return a};b.prototype.updateAnnotation=function(a){this.publish("beforeAnnotationUpdated",[a]);this.publish("annotationUpdated",[a]);return a};b.prototype.deleteAnnotation=function(a){var b;if(null!=a.highlights){var t=a.highlights;var c=0;for(b=t.length;c<b;c++){var d=t[c];null!=d.parentNode&&u(d).replaceWith(d.childNodes)}}this.publish("annotationDeleted",[a]);return a};
b.prototype.loadAnnotations=function(a){var b=this;null==a&&(a=[]);var t=function(a){var d;null==a&&(a=[]);var e=a.splice(0,10);var f=0;for(d=e.length;f<d;f++){var h=e[f];b.setupAnnotation(h)}return 0<a.length?setTimeout(function(){return t(a)},10):b.publish("annotationsLoaded",[c])};var c=a.slice();t(a);return this};b.prototype.dumpAnnotations=function(){return this.plugins.Store?this.plugins.Store.dumpAnnotations():!1};b.prototype.highlightRange=function(a,b){var t;null==b&&(b="annotator-hl");var c=
/^\s*$/;b=u("<span class='"+b+"'></span>");var d=a.textNodes();var f=[];var e=0;for(t=d.length;e<t;e++)a=d[e],c.test(a.nodeValue)||f.push(u(a).wrapAll(b).parent().show()[0]);return f};b.prototype.highlightRanges=function(a,b){var t;null==b&&(b="annotator-hl");var c=[];var d=0;for(t=a.length;d<t;d++){var e=a[d];u.merge(c,this.highlightRange(e,b))}return c};b.prototype.addPlugin=function(a,c){var t;if(!this.plugins[a]){var d=b.Plugin[a];"function"===typeof d&&(this.plugins[a]=new d(this.element[0],
c),this.plugins[a].annotator=this,"function"===typeof(t=this.plugins[a]).pluginInit&&t.pluginInit())}return this};b.prototype.showEditor=function(a,b){this.editor.element.css(b);this.editor.load(a);this.publish("annotationEditorShown",[this.editor,a]);return this};b.prototype.onEditorHide=function(){this.publish("annotationEditorHidden",[this.editor]);return this.ignoreMouseup=!1};b.prototype.onEditorSubmit=function(a){return this.publish("annotationEditorSubmit",[this.editor,a])};b.prototype.showViewer=
function(a,b){this.viewer.element.css(b);this.viewer.load(a);return this.publish("annotationViewerShown",[this.viewer,a])};b.prototype.startViewerHideTimer=function(){if(!this.viewerHideTimer)return this.viewerHideTimer=setTimeout(this.viewer.hide,250)};b.prototype.clearViewerHideTimer=function(){clearTimeout(this.viewerHideTimer);return this.viewerHideTimer=!1};b.prototype.checkForStartSelection=function(a){a&&this.isAnnotator(a.target)||this.startViewerHideTimer();return this.mouseIsDown=!0};b.prototype.checkForEndSelection=
function(a){var b;this.mouseIsDown=!1;if(!this.ignoreMouseup){var t=this.selectedRanges=this.getSelectedRanges();var c=0;for(b=t.length;c<b;c++){var d=t[c];d=d.commonAncestor;u(d).hasClass("annotator-hl")&&(d=u(d).parents("[class!=annotator-hl]")[0]);if(this.isAnnotator(d))return}return a&&this.selectedRanges.length?this.adder.css(J.mousePosition(a,this.wrapper[0])).show():this.adder.hide()}};b.prototype.isAnnotator=function(a){return!!u(a).parents().addBack().filter("[class^=annotator-]").not(this.wrapper).length};
b.prototype.onHighlightMouseover=function(a){this.clearViewerHideTimer();if(this.mouseIsDown||this.viewer.isShown())return!1;var b=u(a.target).parents(".annotator-hl").addBack().map(function(){return u(this).data("annotation")});return this.showViewer(u.makeArray(b),J.mousePosition(a,this.wrapper[0]))};b.prototype.onAdderMousedown=function(a){null!=a&&a.preventDefault();return this.ignoreMouseup=!0};b.prototype.onAdderClick=function(a){var b=this;null!=a&&a.preventDefault();a=this.adder.position();
this.adder.hide();var t=this.setupAnnotation(this.createAnnotation());u(t.highlights).addClass("annotator-hl-temporary");var c=function(){e();u(t.highlights).removeClass("annotator-hl-temporary");return b.publish("annotationCreated",[t])};var d=function(){e();return b.deleteAnnotation(t)};var e=function(){b.unsubscribe("annotationEditorHidden",d);return b.unsubscribe("annotationEditorSubmit",c)};this.subscribe("annotationEditorHidden",d);this.subscribe("annotationEditorSubmit",c);return this.showEditor(t,
a)};b.prototype.onEditAnnotation=function(a){var b=this;var t=this.viewer.element.position();var c=function(){d();return b.updateAnnotation(a)};var d=function(){b.unsubscribe("annotationEditorHidden",d);return b.unsubscribe("annotationEditorSubmit",c)};this.subscribe("annotationEditorHidden",d);this.subscribe("annotationEditorSubmit",c);this.viewer.hide();return this.showEditor(a,t)};b.prototype.onDeleteAnnotation=function(a){this.viewer.hide();return this.deleteAnnotation(a)};return b}(Q);G.Plugin=
function(a){function b(a,c){b.__super__.constructor.apply(this,arguments)}z(b,a);b.prototype.pluginInit=function(){};b.prototype.destroy=function(){return this.removeEvents()};return b}(Q);q=J.getGlobal();null==(null!=(b=q.document)?b.evaluate:void 0)&&u.getScript("http://assets.annotateit.org/vendor/xpath.min.js");null==q.getSelection&&u.getScript("http://assets.annotateit.org/vendor/ierange.min.js");null==q.JSON&&u.getScript("http://assets.annotateit.org/vendor/json2.min.js");null==q.Node&&(q.Node=
{ELEMENT_NODE:1,ATTRIBUTE_NODE:2,TEXT_NODE:3,CDATA_SECTION_NODE:4,ENTITY_REFERENCE_NODE:5,ENTITY_NODE:6,PROCESSING_INSTRUCTION_NODE:7,COMMENT_NODE:8,DOCUMENT_NODE:9,DOCUMENT_TYPE_NODE:10,DOCUMENT_FRAGMENT_NODE:11,NOTATION_NODE:12});G.$=u;G.Delegator=Q;G.Range=U;G.Util=J;G._instances=[];G._t=B;G.supported=function(){return function(){return!!this.getSelection}()};G.noConflict=function(){J.getGlobal().Annotator=aa;return this};u.fn.annotator=function(a){var b=Array.prototype.slice.call(arguments,1);
return this.each(function(){var t;if(t=u.data(this,"annotator"))return a&&t[a].apply(t,b);t=new G(this,a);return u.data(this,"annotator",t)})};this.Annotator=G;G.Widget=function(a){function b(a,c){b.__super__.constructor.apply(this,arguments);this.classes=u.extend({},G.Widget.prototype.classes,this.classes)}z(b,a);b.prototype.classes={hide:"annotator-hide",invert:{x:"annotator-invert-x",y:"annotator-invert-y"}};b.prototype.destroy=function(){this.removeEvents();return this.element.remove()};b.prototype.checkOrientation=
function(){this.resetOrientation();var a=u(G.Util.getGlobal());var b=this.element.children(":first");var c=b.offset();var d=a.scrollTop();a=a.width()+a.scrollLeft();var e=c.top;c=c.left+b.width();0>e-d&&this.invertY();0<c-a&&this.invertX();return this};b.prototype.resetOrientation=function(){this.element.removeClass(this.classes.invert.x).removeClass(this.classes.invert.y);return this};b.prototype.invertX=function(){this.element.addClass(this.classes.invert.x);return this};b.prototype.invertY=function(){this.element.addClass(this.classes.invert.y);
return this};b.prototype.isInvertedY=function(){return this.element.hasClass(this.classes.invert.y)};b.prototype.isInvertedX=function(){return this.element.hasClass(this.classes.invert.x)};return b}(Q);G.Editor=function(a){function b(a){this.onCancelButtonMouseover=h(this.onCancelButtonMouseover,this);this.processKeypress=h(this.processKeypress,this);this.submit=h(this.submit,this);this.load=h(this.load,this);this.hide=h(this.hide,this);this.show=h(this.show,this);b.__super__.constructor.call(this,
u(this.html)[0],a);this.fields=[];this.annotation={}}z(b,a);b.prototype.events={"form submit":"submit",".annotator-save click":"submit",".annotator-cancel click":"hide",".annotator-cancel mouseover":"onCancelButtonMouseover","textarea keydown":"processKeypress"};b.prototype.classes={hide:"annotator-hide",focus:"annotator-focus"};b.prototype.html='<div class="annotator-outer annotator-editor">\n  <form class="annotator-widget">\n    <ul class="annotator-listing"></ul>\n    <div class="annotator-controls">\n      <a href="#cancel" class="annotator-cancel">'+
B("Cancel")+'</a>\n<a href="#save" class="annotator-save annotator-focus">'+B("Save")+"</a>\n    </div>\n  </form>\n</div>";b.prototype.options={};b.prototype.show=function(a){G.Util.preventEventDefault(a);this.element.removeClass(this.classes.hide);this.element.find(".annotator-save").addClass(this.classes.focus);this.checkOrientation();this.element.find(":input:first").focus();this.setupDraggables();return this.publish("show")};b.prototype.hide=function(a){G.Util.preventEventDefault(a);this.element.addClass(this.classes.hide);
return this.publish("hide")};b.prototype.load=function(a){var b;this.annotation=a;this.publish("load",[this.annotation]);var t=this.fields;var c=0;for(b=t.length;c<b;c++)a=t[c],a.load(a.element,this.annotation);return this.show()};b.prototype.submit=function(a){var b;G.Util.preventEventDefault(a);var t=this.fields;var c=0;for(b=t.length;c<b;c++)a=t[c],a.submit(a.element,this.annotation);this.publish("save",[this.annotation]);return this.hide()};b.prototype.addField=function(a){var b=u.extend({id:"annotator-field-"+
G.Util.uuid(),type:"input",label:"",load:function(){},submit:function(){}},a);var t=null;a=u('<li class="annotator-item" />');b.element=a[0];switch(b.type){case "textarea":t=u("<textarea />");break;case "input":case "checkbox":t=u("<input />");break;case "select":t=u("<select />")}a.append(t);t.attr({id:b.id,placeholder:b.label});"checkbox"===b.type&&(t[0].type="checkbox",a.addClass("annotator-checkbox"),a.append(u("<label />",{"for":b.id,html:b.label})));this.element.find("ul:first").append(a);this.fields.push(b);
return b.element};b.prototype.checkOrientation=function(){b.__super__.checkOrientation.apply(this,arguments);var a=this.element.find("ul");var c=this.element.find(".annotator-controls");this.element.hasClass(this.classes.invert.y)?c.insertBefore(a):c.is(":first-child")&&c.insertAfter(a);return this};b.prototype.processKeypress=function(a){if(27===a.keyCode)return this.hide();if(13===a.keyCode&&!a.shiftKey)return this.submit()};b.prototype.onCancelButtonMouseover=function(){return this.element.find("."+
this.classes.focus).removeClass(this.classes.focus)};b.prototype.setupDraggables=function(){var a;this.element.find(".annotator-resize").remove();(a=this.element.hasClass(this.classes.invert.y)?this.element.find(".annotator-item:last"):this.element.find(".annotator-item:first"))&&u('<span class="annotator-resize"></span>').appendTo(a);var b=null;var c=this.classes;var d=this.element;var e=null;var f=d.find(".annotator-resize");var h=d.find(".annotator-controls");var q=!1;a=function(a){if(a.target===
this)return b={element:this,top:a.pageY,left:a.pageX},e=d.find("textarea:first"),u(window).bind({"mouseup.annotator-editor-resize":m,"mousemove.annotator-editor-resize":A}),a.preventDefault()};var m=function(){b=null;return u(window).unbind(".annotator-editor-resize")};var A=function(a){if(b&&!1===q){var t=a.pageY-b.top;var m=a.pageX-b.left;if(b.element===f[0]){var A=e.outerHeight();var v=e.outerWidth();var x=d.hasClass(c.invert.x)?-1:1;var r=d.hasClass(c.invert.y)?1:-1;e.height(A+t*r);e.width(v+
m*x);e.outerHeight()!==A&&(b.top=a.pageY);e.outerWidth()!==v&&(b.left=a.pageX)}else b.element===h[0]&&(d.css({top:parseInt(d.css("top"),10)+t,left:parseInt(d.css("left"),10)+m}),b.top=a.pageY,b.left=a.pageX);q=!0;return setTimeout(function(){return q=!1},1E3/60)}};f.bind("mousedown",a);return h.bind("mousedown",a)};return b}(G.Widget);G.Viewer=function(a){function b(a){this.onDeleteClick=h(this.onDeleteClick,this);this.onEditClick=h(this.onEditClick,this);this.load=h(this.load,this);this.hide=h(this.hide,
this);this.show=h(this.show,this);b.__super__.constructor.call(this,u(this.html.element)[0],a);this.item=u(this.html.item)[0];this.fields=[];this.annotations=[]}z(b,a);b.prototype.events={".annotator-edit click":"onEditClick",".annotator-delete click":"onDeleteClick"};b.prototype.classes={hide:"annotator-hide",showControls:"annotator-visible"};b.prototype.html={element:'<div class="annotator-outer annotator-viewer">\n  <ul class="annotator-widget annotator-listing"></ul>\n</div>',item:'<li class="annotator-annotation annotator-item">\n  <span class="annotator-controls">\n    <a href="#" title="View as webpage" class="annotator-link">View as webpage</a>\n    <button title="Edit" class="annotator-edit">Edit</button>\n    <button title="Delete" class="annotator-delete">Delete</button>\n  </span>\n</li>'};
b.prototype.options={readOnly:!1};b.prototype.show=function(a){var b=this;G.Util.preventEventDefault(a);var t=this.element.find(".annotator-controls").addClass(this.classes.showControls);setTimeout(function(){return t.removeClass(b.classes.showControls)},500);this.element.removeClass(this.classes.hide);return this.checkOrientation().publish("show")};b.prototype.isShown=function(){return!this.element.hasClass(this.classes.hide)};b.prototype.hide=function(a){G.Util.preventEventDefault(a);this.element.addClass(this.classes.hide);
return this.publish("hide")};b.prototype.load=function(a){var b,t;this.annotations=a||[];var c=this.element.find("ul:first").empty();var d=this.annotations;var e=0;for(b=d.length;e<b;e++){a=d[e];var f=u(this.item).clone().appendTo(c).data("annotation",a);var h=f.find(".annotator-controls");var q=h.find(".annotator-link");var m=h.find(".annotator-edit");var A=h.find(".annotator-delete");h=(new Y(a.links||[])).get("alternate",{type:"text/html"});0===h.length||null==h[0].href?q.remove():q.attr("href",
h[0].href);if(this.options.readOnly)m.remove(),A.remove();else var v={showEdit:function(){return m.removeAttr("disabled")},hideEdit:function(){return m.attr("disabled","disabled")},showDelete:function(){return A.removeAttr("disabled")},hideDelete:function(){return A.attr("disabled","disabled")}};var x=this.fields;var r=0;for(t=x.length;r<t;r++)h=x[r],q=u(h.element).clone().appendTo(f)[0],h.load(q,a,v)}this.publish("load",[this.annotations]);return this.show()};b.prototype.addField=function(a){a=u.extend({load:function(){}},
a);a.element=u("<div />")[0];this.fields.push(a);a.element;return this};b.prototype.onEditClick=function(a){return this.onButtonClick(a,"edit")};b.prototype.onDeleteClick=function(a){return this.onButtonClick(a,"delete")};b.prototype.onButtonClick=function(a,b){a=u(a.target).parents(".annotator-annotation");return this.publish(b,[a.data("annotation")])};return b}(G.Widget);var Y=function(){function a(a){this.data=a}a.prototype.get=function(a,b){var c,t,d;null==b&&(b={});b=u.extend({},b,{rel:a});a=
function(){var a=[];for(c in b)x.call(b,c)&&a.push(c);return a}();var e=this.data;var f=[];var h=0;for(d=e.length;h<d;h++){var q=e[h];(t=a.reduce(function(a,c){return a&&q[c]===b[c]},!0))&&f.push(q)}return f};return a}();G=G||{};G.Notification=function(a){function b(a){this.hide=h(this.hide,this);this.show=h(this.show,this);b.__super__.constructor.call(this,u(this.options.html).appendTo(document.body)[0],a)}z(b,a);b.prototype.events={click:"hide"};b.prototype.options={html:"<div class='annotator-notice'></div>",
classes:{show:"annotator-notice-show",info:"annotator-notice-info",success:"annotator-notice-success",error:"annotator-notice-error"}};b.prototype.show=function(a,b){null==b&&(b=G.Notification.INFO);this.currentStatus=b;u(this.element).addClass(this.options.classes.show).addClass(this.options.classes[this.currentStatus]).html(J.escape(a||""));setTimeout(this.hide,5E3);return this};b.prototype.hide=function(){null==this.currentStatus&&(this.currentStatus=G.Notification.INFO);u(this.element).removeClass(this.options.classes.show).removeClass(this.options.classes[this.currentStatus]);
return this};return b}(Q);G.Notification.INFO="info";G.Notification.SUCCESS="success";G.Notification.ERROR="error";u(function(){var a=new G.Notification;G.showNotification=a.show;return G.hideNotification=a.hide});G.Plugin.Unsupported=function(a){function b(){return f=b.__super__.constructor.apply(this,arguments)}z(b,a);b.prototype.options={message:G._t("Sorry your current browser does not support the Annotator")};b.prototype.pluginInit=function(){var a=this;if(!G.supported())return u(function(){G.showNotification(a.options.message);
if(void 0===window.XMLHttpRequest&&void 0!==ActiveXObject)return u("html").addClass("ie6")})};return b}(G.Plugin);var ua=function(a){var b;a=a.match(/([0-9]{4})(-([0-9]{2})(-([0-9]{2})(T([0-9]{2}):([0-9]{2})(:([0-9]{2})(\.([0-9]+))?)?(Z|(([-+])([0-9]{2}):([0-9]{2})))?)?)?)?/);var c=0;var d=new Date(a[1],0,1);a[3]&&d.setMonth(a[3]-1);a[5]&&d.setDate(a[5]);a[7]&&d.setHours(a[7]);a[8]&&d.setMinutes(a[8]);a[10]&&d.setSeconds(a[10]);a[12]&&d.setMilliseconds(1E3*Number("0."+a[12]));a[14]&&(c=60*Number(a[16])+
Number(a[17]),c*=null!=(b="-"===a[15])?b:NaN);c-=d.getTimezoneOffset();d.setTime(Number(Number(d)+6E4*c));return d};var O=function(a){var b;if("undefined"!==typeof atob&&null!==atob)return atob(a);var c=b=0;var d=[];if(!a)return a;for(a+="";b<a.length;){var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(a.charAt(b++));var f="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(a.charAt(b++));var h="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(a.charAt(b++));
var q="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(a.charAt(b++));var m=e<<18|f<<12|h<<6|q;e=m>>16&255;f=m>>8&255;m&=255;64===h?d[c++]=String.fromCharCode(e):64===q?d[c++]=String.fromCharCode(e,f):d[c++]=String.fromCharCode(e,f,m)}return d.join("")};var Ea=function(a){var b=a.length%4;if(0!==b){var c=0;for(b=4-b;0<=b?c<b:c>b;0<=b?++c:--c)a+="="}a=a.replace(/-/g,"+");a=a.replace(/_/g,"/");return O(a)};var C=function(a){a=a.split(".");return JSON.parse(Ea(a[1]))};G.Plugin.Auth=
function(a){function b(a,c){b.__super__.constructor.apply(this,arguments);this.waitingForToken=[];this.options.token?this.setToken(this.options.token):this.requestToken()}z(b,a);b.prototype.options={token:null,tokenUrl:"/auth/token",autoFetch:!0};b.prototype.requestToken=function(){var a=this;this.requestInProgress=!0;return u.ajax({url:this.options.tokenUrl,dataType:"text",xhrFields:{withCredentials:!0}}).done(function(b,c,t){return a.setToken(b)}).fail(function(a,b,c){b=G._t("Couldn't get auth token:");
return G.showNotification(""+b+" "+a.responseText,G.Notification.ERROR)}).always(function(){return a.requestInProgress=!1})};b.prototype.setToken=function(a){var b=this;this.token=a;this._unsafeToken=C(a);if(this.haveValidToken()){this.options.autoFetch&&(this.refreshTimeout=setTimeout(function(){return b.requestToken()},1E3*(this.timeToExpiry()-2)));this.updateHeaders();for(a=[];0<this.waitingForToken.length;)a.push(this.waitingForToken.pop()(this._unsafeToken));return a}if(this.options.autoFetch)return setTimeout(function(){return b.requestToken()},
1E4)};b.prototype.haveValidToken=function(){return this._unsafeToken&&this._unsafeToken.issuedAt&&this._unsafeToken.ttl&&this._unsafeToken.consumerKey&&0<this.timeToExpiry()?!0:!1};b.prototype.timeToExpiry=function(){var a=(new Date).getTime()/1E3;a=ua(this._unsafeToken.issuedAt).getTime()/1E3+this._unsafeToken.ttl-a;return 0<a?a:0};b.prototype.updateHeaders=function(){var a=this.element.data("annotator:headers");return this.element.data("annotator:headers",u.extend(a,{"x-annotator-auth-token":this.token}))};
b.prototype.withToken=function(a){if(null!=a){if(this.haveValidToken())return a(this._unsafeToken);this.waitingForToken.push(a);if(!this.requestInProgress)return this.requestToken()}};return b}(G.Plugin);G.Plugin.Store=function(a){function b(a,c){this._onError=h(this._onError,this);this._onLoadAnnotationsFromSearch=h(this._onLoadAnnotationsFromSearch,this);this._onLoadAnnotations=h(this._onLoadAnnotations,this);this._getAnnotations=h(this._getAnnotations,this);b.__super__.constructor.apply(this,arguments);
this.annotations=[]}z(b,a);b.prototype.events={annotationCreated:"annotationCreated",annotationDeleted:"annotationDeleted",annotationUpdated:"annotationUpdated"};b.prototype.options={annotationData:{},emulateHTTP:!1,loadFromSearch:!1,prefix:"/store",urls:{create:"/annotations",read:"/annotations/:id",update:"/annotations/:id",destroy:"/annotations/:id",search:"/search"}};b.prototype.pluginInit=function(){if(G.supported())return this.annotator.plugins.Auth?this.annotator.plugins.Auth.withToken(this._getAnnotations):
this._getAnnotations()};b.prototype._getAnnotations=function(){return this.options.loadFromSearch?this.loadAnnotationsFromSearch(this.options.loadFromSearch):this.loadAnnotations()};b.prototype.annotationCreated=function(a){var b=this;return 0>A.call(this.annotations,a)?(this.registerAnnotation(a),this._apiRequest("create",a,function(c){return b.updateAnnotation(a,c)})):this.updateAnnotation(a,{})};b.prototype.annotationUpdated=function(a){var b=this;if(0<=A.call(this.annotations,a))return this._apiRequest("update",
a,function(c){return b.updateAnnotation(a,c)})};b.prototype.annotationDeleted=function(a){var b=this;if(0<=A.call(this.annotations,a))return this._apiRequest("destroy",a,function(){return b.unregisterAnnotation(a)})};b.prototype.registerAnnotation=function(a){return this.annotations.push(a)};b.prototype.unregisterAnnotation=function(a){return this.annotations.splice(this.annotations.indexOf(a),1)};b.prototype.updateAnnotation=function(a,b){0>A.call(this.annotations,a)||u.extend(a,b);return u(a.highlights).data("annotation",
a)};b.prototype.loadAnnotations=function(){return this._apiRequest("read",null,this._onLoadAnnotations)};b.prototype._onLoadAnnotations=function(a){var b,c;null==a&&(a=[]);var d={};var t=this.annotations;var e=0;for(b=t.length;e<b;e++){var f=t[e];d[f.id]=f}b=[];t=0;for(c=a.length;t<c;t++)f=a[t],d[f.id]?(e=d[f.id],this.updateAnnotation(e,f)):b.push(f);this.annotations=this.annotations.concat(b);return this.annotator.loadAnnotations(b.slice())};b.prototype.loadAnnotationsFromSearch=function(a){return this._apiRequest("search",
a,this._onLoadAnnotationsFromSearch)};b.prototype._onLoadAnnotationsFromSearch=function(a){null==a&&(a={});return this._onLoadAnnotations(a.rows||[])};b.prototype.dumpAnnotations=function(){var a;var b=this.annotations;var c=[];var d=0;for(a=b.length;d<a;d++){var e=b[d];c.push(JSON.parse(this._dataFor(e)))}return c};b.prototype._apiRequest=function(a,b,c){var d=b&&b.id;var t=this._urlFor(a,d);b=this._apiRequestOptions(a,b,c);t=u.ajax(t,b);t._id=d;t._action=a;return t};b.prototype._apiRequestOptions=
function(a,b,c){var d=this._methodFor(a);c={type:d,headers:this.element.data("annotator:headers"),dataType:"json",success:c||function(){},error:this._onError};!this.options.emulateHTTP||"PUT"!==d&&"DELETE"!==d||(c.headers=u.extend(c.headers,{"X-HTTP-Method-Override":d}),c.type="POST");if("search"===a)return c=u.extend(c,{data:b});a=b&&this._dataFor(b);return this.options.emulateJSON?(c.data={json:a},this.options.emulateHTTP&&(c.data._method=d),c):c=u.extend(c,{data:a,contentType:"application/json; charset=utf-8"})};
b.prototype._urlFor=function(a,b){var c=null!=this.options.prefix?this.options.prefix:"";c+=this.options.urls[a];c=c.replace(/\/:id/,null!=b?"/"+b:"");return c=c.replace(/:id/,null!=b?b:"")};b.prototype._methodFor=function(a){return{create:"POST",read:"GET",update:"PUT",destroy:"DELETE",search:"GET"}[a]};b.prototype._dataFor=function(a){var b=a.highlights;delete a.highlights;u.extend(a,this.options.annotationData);var c=JSON.stringify(a);b&&(a.highlights=b);return c};b.prototype._onError=function(a){var b=
a._action;var c=G._t("Sorry we could not ")+b+G._t(" this annotation");"search"===a._action?c=G._t("Sorry we could not search the store for annotations"):"read"!==a._action||a._id||(c=G._t("Sorry we could not ")+b+G._t(" the annotations from the store"));switch(a.status){case 401:c=G._t("Sorry you are not allowed to ")+b+G._t(" this annotation");break;case 404:c=G._t("Sorry we could not connect to the annotations store");break;case 500:c=G._t("Sorry something went wrong with the annotation store")}G.showNotification(c,
G.Notification.ERROR);return null};return b}(G.Plugin);G.Plugin.Permissions=function(a){function b(a,c){this._setAuthFromToken=h(this._setAuthFromToken,this);this.updateViewer=h(this.updateViewer,this);this.updateAnnotationPermissions=h(this.updateAnnotationPermissions,this);this.updatePermissionsField=h(this.updatePermissionsField,this);this.addFieldsToAnnotation=h(this.addFieldsToAnnotation,this);b.__super__.constructor.apply(this,arguments);this.options.user&&(this.setUser(this.options.user),delete this.options.user)}
z(b,a);b.prototype.events={beforeAnnotationCreated:"addFieldsToAnnotation"};b.prototype.options={showViewPermissionsCheckbox:!0,showEditPermissionsCheckbox:!0,userId:function(a){return a},userString:function(a){return a},userAuthorize:function(a,b,c){var d;if(b.permissions){b=b.permissions[a]||[];if(0===b.length)return!0;var t=0;for(d=b.length;t<d;t++)if(a=b[t],this.userId(c)===a)return!0;return!1}return b.user?c?this.userId(c)===this.userId(b.user):!1:!0},user:"",permissions:{read:[],update:[],"delete":[],
admin:[]}};b.prototype.pluginInit=function(){var a=this;if(G.supported()){var b=this;var c=function(a,c){return function(d,t){return b[a].call(b,c,d,t)}};!this.user&&this.annotator.plugins.Auth&&this.annotator.plugins.Auth.withToken(this._setAuthFromToken);!0===this.options.showViewPermissionsCheckbox&&this.annotator.editor.addField({type:"checkbox",label:G._t("Allow anyone to <strong>view</strong> this annotation"),load:c("updatePermissionsField","read"),submit:c("updateAnnotationPermissions","read")});
!0===this.options.showEditPermissionsCheckbox&&this.annotator.editor.addField({type:"checkbox",label:G._t("Allow anyone to <strong>edit</strong> this annotation"),load:c("updatePermissionsField","update"),submit:c("updateAnnotationPermissions","update")});this.annotator.viewer.addField({load:this.updateViewer});if(this.annotator.plugins.Filter)return this.annotator.plugins.Filter.addFilter({label:G._t("User"),property:"user",isFiltered:function(b,c){var d;c=a.options.userString(c);if(!b||!c)return!1;
var t=b.split(/\s*/);var e=0;for(d=t.length;e<d;e++)if(b=t[e],-1===c.indexOf(b))return!1;return!0}})}};b.prototype.setUser=function(a){return this.user=a};b.prototype.addFieldsToAnnotation=function(a){if(a&&(a.permissions=this.options.permissions,this.user))return a.user=this.user};b.prototype.authorize=function(a,b,c){void 0===c&&(c=this.user);return this.options.userAuthorize?this.options.userAuthorize.call(this.options,a,b,c):!0};b.prototype.updatePermissionsField=function(a,b,c){b=u(b).show();
var d=b.find("input").removeAttr("disabled");this.authorize("admin",c)||b.hide();return this.authorize(a,c||{},null)?d.attr("checked","checked"):d.removeAttr("checked")};b.prototype.updateAnnotationPermissions=function(a,b,c){c.permissions||(c.permissions=this.options.permissions);return u(b).find("input").is(":checked")?c.permissions[a]=[]:c.permissions[a]=[this.options.userId(this.user)]};b.prototype.updateViewer=function(a,b,c){a=u(a);var d=this.options.userString(b.user);b.user&&d&&"string"===
typeof d?(d=G.Util.escape(this.options.userString(b.user)),a.html(d).addClass("annotator-user")):a.remove();if(c&&(this.authorize("update",b)||c.hideEdit(),!this.authorize("delete",b)))return c.hideDelete()};b.prototype._setAuthFromToken=function(a){return this.setUser(a.userId)};return b}(G.Plugin);G.Plugin.AnnotateItPermissions=function(a){function b(){this._setAuthFromToken=h(this._setAuthFromToken,this);this.updateAnnotationPermissions=h(this.updateAnnotationPermissions,this);this.updatePermissionsField=
h(this.updatePermissionsField,this);this.addFieldsToAnnotation=h(this.addFieldsToAnnotation,this);return e=b.__super__.constructor.apply(this,arguments)}z(b,a);b.prototype.options={showViewPermissionsCheckbox:!0,showEditPermissionsCheckbox:!0,groups:{world:"group:__world__",authenticated:"group:__authenticated__",consumer:"group:__consumer__"},userId:function(a){return a.userId},userString:function(a){return a.userId},userAuthorize:function(a,b,c){var d,e,t,f;a=(b.permissions||{})[a]||[];return(d=
this.groups.world,0<=A.call(a,d))?!0:null!=c&&null!=c.userId&&null!=c.consumerKey?c.userId===b.user&&c.consumerKey===b.consumer?!0:(e=this.groups.authenticated,0<=A.call(a,e))?!0:c.consumerKey===b.consumer&&(t=this.groups.consumer,0<=A.call(a,t))?!0:c.consumerKey===b.consumer&&(f=c.userId,0<=A.call(a,f))?!0:c.consumerKey===b.consumer&&c.admin?!0:!1:!1},permissions:{read:["group:__world__"],update:[],"delete":[],admin:[]}};b.prototype.addFieldsToAnnotation=function(a){if(a&&(a.permissions=this.options.permissions,
this.user))return a.user=this.user.userId,a.consumer=this.user.consumerKey};b.prototype.updatePermissionsField=function(a,b,c){b=u(b).show();var d=b.find("input").removeAttr("disabled");this.authorize("admin",c)||b.hide();return this.user&&this.authorize(a,c||{},{userId:"__nonexistentuser__",consumerKey:this.user.consumerKey})?d.attr("checked","checked"):d.removeAttr("checked")};b.prototype.updateAnnotationPermissions=function(a,b,c){c.permissions||(c.permissions=this.options.permissions);return u(b).find("input").is(":checked")?
c.permissions[a]=["read"===a?this.options.groups.world:this.options.groups.consumer]:c.permissions[a]=[]};b.prototype._setAuthFromToken=function(a){return this.setUser(a)};return b}(G.Plugin.Permissions);G.Plugin.Filter=function(a){function b(a,c){this._onPreviousClick=h(this._onPreviousClick,this);this._onNextClick=h(this._onNextClick,this);this._onFilterKeyup=h(this._onFilterKeyup,this);this._onFilterBlur=h(this._onFilterBlur,this);this._onFilterFocus=h(this._onFilterFocus,this);this.updateHighlights=
h(this.updateHighlights,this);var d;a=u(this.html.element).appendTo((null!=c?c.appendTo:void 0)||this.options.appendTo);b.__super__.constructor.call(this,a,c);(d=this.options).filters||(d.filters=[]);this.filter=u(this.html.filter);this.filters=[];this.current=0}z(b,a);b.prototype.events={".annotator-filter-property input focus":"_onFilterFocus",".annotator-filter-property input blur":"_onFilterBlur",".annotator-filter-property input keyup":"_onFilterKeyup",".annotator-filter-previous click":"_onPreviousClick",
".annotator-filter-next click":"_onNextClick",".annotator-filter-clear click":"_onClearClick"};b.prototype.classes={active:"annotator-filter-active",hl:{hide:"annotator-hl-filtered",active:"annotator-hl-active"}};b.prototype.html={element:'<div class="annotator-filter">\n  <strong>'+G._t("Navigate:")+'</strong>\n<span class="annotator-filter-navigation">\n  <button class="annotator-filter-previous">'+G._t("Previous")+'</button>\n<button class="annotator-filter-next">'+G._t("Next")+"</button>\n</span>\n<strong>"+
G._t("Filter by:")+"</strong>\n</div>",filter:'<span class="annotator-filter-property">\n  <label></label>\n  <input/>\n  <button class="annotator-filter-clear">'+G._t("Clear")+"</button>\n</span>"};b.prototype.options={appendTo:"body",filters:[],addAnnotationFilter:!0,isFiltered:function(a,b){var c;if(!a||!b)return!1;var d=a.split(/\s+/);var e=0;for(c=d.length;e<c;e++)if(a=d[e],-1===b.indexOf(a))return!1;return!0}};b.prototype.pluginInit=function(){var a;var b=this.options.filters;var c=0;for(a=
b.length;c<a;c++){var d=b[c];this.addFilter(d)}this.updateHighlights();this._setupListeners()._insertSpacer();if(!0===this.options.addAnnotationFilter)return this.addFilter({label:G._t("Annotation"),property:"text"})};b.prototype.destroy=function(){b.__super__.destroy.apply(this,arguments);var a=u("html");var c=parseInt(a.css("padding-top"),10)||0;a.css("padding-top",c-this.element.outerHeight());return this.element.remove()};b.prototype._insertSpacer=function(){var a=u("html");var b=parseInt(a.css("padding-top"),
10)||0;a.css("padding-top",b+this.element.outerHeight());return this};b.prototype._setupListeners=function(){var a;var b=["annotationsLoaded","annotationCreated","annotationUpdated","annotationDeleted"];var c=0;for(a=b.length;c<a;c++){var d=b[c];this.annotator.subscribe(d,this.updateHighlights)}return this};b.prototype.addFilter=function(a){var b=u.extend({label:"",property:"",isFiltered:this.options.isFiltered},a);var c;var d=this.filters;var e=[];var f=0;for(c=d.length;f<c;f++)a=d[f],a.property===
b.property&&e.push(a);e.length||(b.id="annotator-filter-"+b.property,b.annotations=[],b.element=this.filter.clone().appendTo(this.element),b.element.find("label").html(b.label).attr("for",b.id),b.element.find("input").attr({id:b.id,placeholder:G._t("Filter by ")+b.label+"\u2026"}),b.element.find("button").hide(),b.element.data("filter",b),this.filters.push(b));return this};b.prototype.updateFilter=function(a){var b,c;a.annotations=[];this.updateHighlights();this.resetHighlights();if(b=u.trim(a.element.find("input").val())){var d=
this.highlights.map(function(){return u(this).data("annotation")});var e=u.makeArray(d);var f=0;for(c=e.length;f<c;f++){d=e[f];var t=d[a.property];a.isFiltered(b,t)&&a.annotations.push(d)}return this.filterHighlights()}};b.prototype.updateHighlights=function(){this.highlights=this.annotator.element.find(".annotator-hl:visible");return this.filtered=this.highlights.not(this.classes.hl.hide)};b.prototype.filterHighlights=function(){var a,b;var c=u.grep(this.filters,function(a){return!!a.annotations.length});
var d=(null!=(a=c[0])?a.annotations:void 0)||[];if(1<c.length){var e=[];u.each(c,function(){return u.merge(e,this.annotations)});var f=[];d=[];u.each(e,function(){return-1===u.inArray(this,f)?f.push(this):d.push(this)})}c=this.highlights;var h=a=0;for(b=d.length;a<b;h=++a)h=d[h],c=c.not(h.highlights);c.addClass(this.classes.hl.hide);this.filtered=this.highlights.not(this.classes.hl.hide);return this};b.prototype.resetHighlights=function(){this.highlights.removeClass(this.classes.hl.hide);this.filtered=
this.highlights;return this};b.prototype._onFilterFocus=function(a){a=u(a.target);a.parent().addClass(this.classes.active);return a.next("button").show()};b.prototype._onFilterBlur=function(a){if(!a.target.value)return a=u(a.target),a.parent().removeClass(this.classes.active),a.next("button").hide()};b.prototype._onFilterKeyup=function(a){if(a=u(a.target).parent().data("filter"))return this.updateFilter(a)};b.prototype._findNextHighlight=function(a){if(!this.highlights.length)return this;var b=a?
0:-1;var c=a?-1:0;var d=a?"lt":"gt";a=this.highlights.not("."+this.classes.hl.hide);var e=a.filter("."+this.classes.hl.active);e.length||(e=a.eq(b));b=e.data("annotation");e=a.index(e[0]);d=a.filter(":"+d+"("+e+")").not(b.highlights).eq(c);d.length||(d=a.eq(c));return this._scrollToHighlight(d.data("annotation").highlights)};b.prototype._onNextClick=function(a){return this._findNextHighlight()};b.prototype._onPreviousClick=function(a){return this._findNextHighlight(!0)};b.prototype._scrollToHighlight=
function(a){a=u(a);this.highlights.removeClass(this.classes.hl.active);a.addClass(this.classes.hl.active);return u("html, body").animate({scrollTop:a.offset().top-(this.element.height()+20)},150)};b.prototype._onClearClick=function(a){return u(a.target).prev("input").val("").keyup().blur()};return b}(G.Plugin);G.Plugin.Markdown=function(a){function b(a,c){this.updateTextField=h(this.updateTextField,this);null!=("undefined"!==typeof Showdown&&null!==Showdown?Showdown.converter:void 0)&&(b.__super__.constructor.apply(this,
arguments),this.converter=new Showdown.converter)}z(b,a);b.prototype.events={annotationViewerTextField:"updateTextField"};b.prototype.updateTextField=function(a,b){b=G.Util.escape(b.text||"");return u(a).html(this.convert(b))};b.prototype.convert=function(a){return this.converter.makeHtml(a)};return b}(G.Plugin);G.Plugin.Tags=function(a){function b(){this.setAnnotationTags=h(this.setAnnotationTags,this);this.updateField=h(this.updateField,this);return m=b.__super__.constructor.apply(this,arguments)}
z(b,a);b.prototype.options={parseTags:function(a){a=u.trim(a);var b=[];a&&(b=a.split(/\s+/));return b},stringifyTags:function(a){return a.join(" ")}};b.prototype.field=null;b.prototype.input=null;b.prototype.pluginInit=function(){if(G.supported())return this.field=this.annotator.editor.addField({label:G._t("Add some tags here")+"\u2026",load:this.updateField,submit:this.setAnnotationTags}),this.annotator.viewer.addField({load:this.updateViewer}),this.annotator.plugins.Filter&&this.annotator.plugins.Filter.addFilter({label:G._t("Tag"),
property:"tags",isFiltered:G.Plugin.Tags.filterCallback}),this.input=u(this.field).find(":input")};b.prototype.parseTags=function(a){return this.options.parseTags(a)};b.prototype.stringifyTags=function(a){return this.options.stringifyTags(a)};b.prototype.updateField=function(a,b){a="";b.tags&&(a=this.stringifyTags(b.tags));return this.input.val(a)};b.prototype.setAnnotationTags=function(a,b){return b.tags=this.parseTags(this.input.val())};b.prototype.updateViewer=function(a,b){a=u(a);return b.tags&&
u.isArray(b.tags)&&b.tags.length?a.addClass("annotator-tags").html(function(){return u.map(b.tags,function(a){return'<span class="annotator-tag">'+G.Util.escape(a)+"</span>"}).join(" ")}):a.remove()};return b}(G.Plugin);G.Plugin.Tags.filterCallback=function(a,b){var c,d;null==b&&(b=[]);var e=0;var f=[];if(a){f=a.split(/\s+/g);var h=0;for(c=f.length;h<c;h++)if(a=f[h],b.length){var q=0;for(d=b.length;q<d;q++){var m=b[q];-1!==m.indexOf(a)&&(e+=1)}}}return e===f.length};G.prototype.setupPlugins=function(a,
b){null==a&&(a={});null==b&&(b={});var c=G.Util.getGlobal();var d="Unsupported Auth Tags Filter Store AnnotateItPermissions".split(" ");c.Showdown&&d.push("Markdown");c=c.location.href.split(/#|\?/).shift()||"";a={Tags:{},Filter:{filters:[{label:G._t("User"),property:"user"},{label:G._t("Tags"),property:"tags"}]},Auth:{tokenUrl:a.tokenUrl||"http://annotateit.org/api/token"},Store:{prefix:a.storeUrl||"http://annotateit.org/api",annotationData:{uri:c},loadFromSearch:{uri:c}}};for(f in b)x.call(b,f)&&
0>A.call(d,f)&&d.push(f);u.extend(!0,a,b);var e=[];b=0;for(c=d.length;b<c;b++){var f=d[b];f in a&&!a[f]?e.push(void 0):e.push(this.addPlugin(f,a[f]))}return e}}.call(this)}).call(k,a("7t+N"))},"0ghZ":function(f,k,a){var e=a("PfJA"),c=a("iYj9"),b=a("KGqH");f.exports=function(a){return c(a)?b(a):e(a)}},"0uX4":function(f,k,a){var e=(k=(k=a("NkRn"))?k.prototype:void 0)?k.valueOf:void 0;f.exports=function(a){return e?Object(e.call(a)):{}}},"1C79":function(f,k,a){function e(a,f,m,d,x){var r=-1,h=a.length;
m||(m=b);for(x||(x=[]);++r<h;){var A=a[r];0<f&&m(A)?1<f?e(A,f-1,m,d,x):c(x,A):d||(x[x.length]=A)}return x}var c=a("uIr7"),b=a("Qp3N");f.exports=e},"1QDk":function(f,k,a){var e=a("tv3T"),c=a("09Qt");f.exports=function(a,f){return e(a,c(a),f)}},"1oyr":function(f,k){f.exports=function(a){return function(){return a}}},2247:function(f,k,a){var e=a("Hxdr"),c=a("JyYQ"),b=a("yzuE"),r=a("NGEn");f.exports=function(a,f){return(r(a)?e:b)(a,c(f,3))}},"31ss":function(f,k,a){Object.defineProperty(k,"__esModule",
{value:!0});f=a("Oy1H");var e=a.n(f),c=a("RTiT"),b=a("RTdn"),r=a("C8kI"),y=a("yVmd"),m=a("Tkzw"),d=a("9LPS"),x=a("4T/i"),z=a("hofT");f=a("L6bb");var h=a.n(f),A=a("CK11"),v=a("CAlj"),N=a("HCHl"),K=a("RdJH"),L=a("GCEA"),D=a("ObtK"),F=a("cuGy"),S=a("vzIA"),B=window,u=document,J=a("7t+N");J.__orig="rmq";window.rmqJquery=J;window.jQuery&&(window.jQuery.__orig="own");k["default"]=function(a){function f(a,b){return new Promise(function(c,d){var e=new XMLHttpRequest;e.withCredentials=!0;b=b||"none";e.open("GET",
a+"&prompt="+b,!0);e.responseType="json";e.onload=function(a){if(200===e.status){var b=a=null;try{a=e.response,b=e.responseURL}catch(Oa){b=e.responseURL}if(a)c(a);else if(b){a=e.responseURL;var d=new XMLHttpRequest;d.withCredentials=!0;d.open("GET",a,!0);d.responseType="json";d.onload=function(a){(a=d.response)?c(a):c(null)};d.onerror=function(a){c(null)};d.send()}}else c(null)};e.onerror=function(a){c(null)};e.send()})}function q(a,c,d,f){return new Promise(function(h,q){var m=a&&a===c.doi,t=null==
f||c.articleInfo&&c.articleInfo.issn&&f.replace("-","")===c.articleInfo.issn;c&&c.articleInfo&&(c.articleInfo.title=c.articleInfo.title||document.title);if(m&&t)m=c.articleInfo,m.doi=c.articleInfo.doi||a,m.access=c.articleInfo.access||d,h({doi:a,access:d,articleInfo:m});else{m="/domain/settings/article";m=a?m+("?doi="+encodeURIComponent(a.toLowerCase())):m+("?doi="+encodeURIComponent((window.location.host+window.location.pathname).toLowerCase()));f&&(m+="&issn="+encodeURIComponent(f.replace("-","")));
t=Object(b.extractSiteUrl)(ma);m+="&siteUrl="+encodeURIComponent(t);var A=new XMLHttpRequest;A.withCredentials=!0;A.open("GET",za+m,!0);A.responseType="json";c[b.TP_HEADER_NAME]&&A.setRequestHeader(b.TP_HEADER_NAME,c[b.TP_HEADER_NAME]);A.onload=function(b){b="object"===e()(A.response)?A.response:A.response&&JSON.parse(A.response);b.doi=b.doi||a;b.access=b.access||d;h({doi:a,access:d,articleInfo:b})};A.onerror=function(a){a=A.status;var b=A.statusText,c="text"===A.responseType?A.responseText:null;
0===a||200===a&&""===c?h({}):q({status:a,statusText:b,response:c})};A.send()}})}function Q(a,c,d,e){var f=Object(b.extractCookies)();f=Object(b.setupNcp)(a,f,c);return Object(b.pageInfoPromise)(a.Remarq.lastResolvedSettings,za,f,c).then(function(c){a.Remarq.lastResolvedSettings=c;var f=Object(x.a)(c.selectors.doi,"text")[0],h=Object(b.resolveDenial)(c.selectors.denial),m=Object(b.resolveAccessSelector)(c);m=Object(b.determineAccess)(m,f,h,c.selectors.fullTextIndex,e);return Object(r.doiDescriptor)(m,
f,d)})}function k(a){var c=a.cookies,d=a.page,e=a.articleInfo,f=a.themePreferences,h=e.subjects&&e.subjects.join(",");a=Object.assign({subjects:h,userRHKey:B.Hermes&&B.Hermes.userRHKey,hrmTracker:c.hrmTracker,hrmTracker_S:c.hrmTracker_S,hrmEvtId:B.Hermes&&B.Hermes.hrmEvtId,articleTitle:e.title},a);delete a.cookies;delete a.page;delete a.articleInfo;delete a.themingPreferences;a[b.TP_HEADER_NAME]=d[b.TP_HEADER_NAME];a[b.CSRF_HEADER_NAME]=d[b.CSRF_HEADER_NAME];d.nocaptcha&&(a.nocaptcha=d.nocaptcha);
ma&&(a.isLite=ma,a.isExtension=ca);f&&(d=[f.color,f.highContrast?"high_contrast":null,f.liter?"liter":null].filter(function(a){return null!=a}).join(":"))&&(a.palette=d);return a}var aa=/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent),G=a.isLiter,Y=null,ua=J.Deferred(),O=new Promise(function(a,b){ua.promise().then(function(b){Y=b;a(Y)})}),Ea=null,C,Z,R,t=a.groveBase,na=a.groveProtocol,ca=-1!==na.indexOf("chrome-extension:"),za=a.apiBase,P=0<t.length?na+"//"+
t+"/":"",ma=a.isLite,da=a.isLiter,H=!1,eb,fa,la=new v.a(P);B.Remarq.grovePrefix=P;B.Remarq.unsubscribeCallbacks=[];var Aa=!1,pa={},va=J.Deferred();B.Remarq.status=function(){return va.promise()};B.Remarq.unsubscribeListeners=function(){B.Remarq.unsubscribeCallbacks&&(B.Remarq.unsubscribeCallbacks.forEach(function(a){try{a()}catch(wa){}}),B.Remarq.unsubscribeCallbacks=[])};B.Remarq.start=function(){if(Aa)return"string"===typeof Aa?Promise.reject(Aa):Promise.resolve(C);Aa=!0;u.body.id||J("html").attr("id");
var e=u.domain;e.startsWith("www.")&&(e=e.substring(4));var v=Object(b.extractCookies)(),r=Object(b.setupNcp)(B,v,a);return Object(b.pageInfoPromise)(b.groveInstallHelper.defaultLiteSettings,za,r,a).then(function(r){pa.loggedIn=!!r.authenticatedUser;B.Remarq.lastResolvedSettings=r;h()(document.body.innerHTML);eb=r.selectors;if(a.checkBrowser&&!r.userAgentSupported)throw Aa="Remarq does not support current Browser",Aa;e=r.domain&&"*"!==r.domain?r.domain:e;r.activeSurveysPolls&&la.setActiveSurveysPolls(r.activeSurveysPolls);
var D=r.pdId,Q=a.defaultPDFSelector,U=r.selectors.pdfIndex||[Q],T=r.selectors.abstractIndex,O=r.selectors.stickyIndex;Q=r.selectors.fullTextIndex;var S=Object(b.resolveBannerAt)(r.selectors.posIndex);S=S&&S.item?S.item:document.body;var I=Object(b.resolveAbstractAt)(T),oa=Object(b.resolveStickyAt)(O),Ha=Object(b.resolveDenial)(r.selectors.denial),wa=Object(b.resolveAccessSelector)(r);T=r.selectors.doi;var fb="",ta="",Na=!1;if(r&&r.preferences){O=r.preferences;O.privacyPolicy&&(ta=r.preferences.privacyPolicy);
O.postCommentMessage&&(fb=r.preferences.postCommentMessage);O.commentsDisclosureRequired&&(Na=r.preferences.commentsDisclosureRequired);if(O.themePreferences)var ha=O.themePreferences;if(O.richEditorPreferences)var V=O.richEditorPreferences}var Ia=null;r&&r.publisherName&&(Ia=r.publisherName);T=Object(x.a)(T,"text")[0];wa=Object(b.determineAccess)(wa,T,Ha,Q);Q=(Q=r.selectors.issn)&&Object(x.a)(Q,"text").filter(function(a){return a})[0];Q=q(T,r,wa,Q);var Ba=r.widgetConfiguration&&r.widgetConfiguration.iamConfiguration;
if(Ba){T=Ba.serverUrl;var g=Ba.enabled||a.iamEnabled;T=T&&g?f(T,"none"):Promise.resolve(null)}else T=Promise.resolve(null);return Promise.all([Q,T]).then(function(f){var h=f[0];f=f[1];var q=h.articleInfo||{};q.title||(q.title=document.title);var Q=h.doi;wa=wa||h.access;q.doi=q.doi||Q;q.access=q.access||wa;var T=q.issn,O=void 0!==q.remarqEnabled?q.remarqEnabled:r.enableRemarqByDefault;r.selectors.enableRemarq&&!1===Object(x.a)(r.selectors.enableRemarq)[0]&&(O=!1);if(O&&!r.isLite)pa.version="full",
ma&&(ma=!1,a.isLite=!1),da&&(da=!1,a.isLiter=!1);else if(ma||da)O=!0,pa.version="lite";va.resolve(pa);u.dispatchEvent(new CustomEvent("Remarq_statusAvailable",{detail:pa}));if(O){H=O;B.addEventListener("message",Fa,!1);B.Remarq.unsubscribeCallbacks.push(function(){B.removeEventListener("message",Fa,!1)});var X;if(!ca){setInterval(function(){var a=B.location.href;a!==X&&(X&&u.dispatchEvent(new CustomEvent("URL_changed",{detail:{oldURL:X,newURL:a}})),X=a)},100);var ea=function(a){B.Remarq.urlUpdated(a.detail.newURL)};
u.addEventListener("URL_changed",ea);B.Remarq.unsubscribeCallbacks.push(function(){u.removeEventListener("URL_changed",ea)})}O=window.document.getElementById("rmrqTourMode")?window.document.getElementById("rmrqTourMode").value:null;var M=k({doi:Q,pdId:D,access:wa,domain:e,denial:Ha,issn:T,cookies:v,page:r,articleInfo:q,tourMode:O,postCommentMessage:fb,publisherName:Ia,commentsDisclosureRequired:Na,privacyPolicy:ta,richEditorPreferences:V,themePreferences:ha});g&&(M.iamEnabled=g);Ba&&(M.iamConfiguration=
Ba);f&&(M.iamUser=f);B.articleInfo=q||r.articleInfo;Object(b.appendAnnotatorCssToHead)(u,P);Object(b.appendGroveMainCssToHead)(u,P);Object(b.appendRobotoFontToHead)(u);if(G)try{ua.resolve(new L.a(P,za,a,M,!0,r.authenticatedUser))}catch(Ua){ua.reject(Ua)}else{f=!!(window.view&&window.view.state&&window.view.state.doc);B.Remarq.ann=c.a.setGp(a).instruct(B,S,f?"prose_mirror":"html");fa=new A.a(r,h);fa.start();Ea=new N.a(Remarq,P,eb,fa,a,M);Ea.decorateLinks(D,U,"pdf");h={};ma&&(h["box-shadow"]="none");
aa&&J(S);var Aa=function(a){var b=window.innerWidth;a=C.clientWidth;window.getComputedStyle(document.documentElement).getPropertyValue("--grove-client-width");b=550<=b?500:b-50;b!=a&&document.documentElement.style.setProperty("--grove-client-width",b+"px")};Object(b.installFrame)("GroveSide",P+"web/leftside.html",za,na+"//"+t,u.body,h,{expanded:!1,pdId:D,mobileUserAgent:aa},M,a,null,{title:"Remarq Widget Main"}).then(function(c){C=c;aa&&C.addEventListener("scroll",function(a){return!1});Aa();window.addEventListener("resize",
function(a){Aa(a)});Object(b.installFrame)("CornerWidget",P+"web/cornerWidget.html",za,na+"//"+t,{element:c,relativePosition:"above"},{},{expanded:!1,signedin:!1,expl:!1,pdId:D,mobileUserAgent:aa},M,a,null,{title:"Remarq Trigger Frame"}).then(function(a){Z=a;R=Object(K.a)(P,r,Z);Z.style.visibility="visible"})});var xa=null;J(C).on("transitionstart",function $a(a){null!=C.dataset.expanded&&"false"!==C.dataset.expanded?xa!=C.clientWidth&&(xa=C.clientWidth,Z.style.width=xa+33+"px",setTimeout($a,100)):
(Z.style.width="83px",xa=null)})}var Fa=function(c){var e=Object(m.groveMessageExtractor)(c);if(c.data.relay){e=Array.isArray(c.data.relay)?c.data.relay:[c.data.relay];var f=c&&c.data&&c.data.origin;f&&(c.data.msg.origin=f);-1!=e.indexOf("TopWidget")&&e.indexOf(!0)&&e.push("pdfFrame");"reload"===c.data.msg.action&&(window.reloadWinInfo=c.data.msg);e.forEach(function(a){"rootFrame"===a&&window.postMessage(c.data.msg,document.origin||document.location.origin);var e=b.widgetsStateHolder.get(d.WIDGET_NAMES.fromFrameId(a));
e&&e.status===d.WIDGET_STATUS.LOADING?(Object(F.debug)("widget["+a+"] is loading -> storing event in queue.."),e.pendingEventsQueue.enqueue(c.data.msg)):e&&e.status===d.WIDGET_STATUS.UNINSTALLED?Object(F.debug)("widget["+a+"] is not installed -> skipping event relay.."):"contentFrames"===a&&Y?Y.broadcastToFrames(c.data.msg):("GroveSide"===a&&Object(F.debug)("Will relay to groveSide",c.data.msg),(e=document.getElementById(a))&&e.contentWindow&&("GroveSide"===a&&Object(F.debug)("Relaying to groveSide",
c.data.msg),e.contentWindow.postMessage(c.data.msg,"*")))})}else if(c.data.popup){var g=document.getElementById("GroveSide"),h=B.open(c.data.popup);if(h){g&&g.contentWindow&&g.contentWindow.postMessage({action:"popupOpened",popup:c.data.popup},P);var q=setInterval(function(){if(h.closed)if(clearInterval(q),-1!=navigator.appVersion.indexOf("Trident")){var a={redirected:"redirected"};g&&g.contentWindow&&g.contentWindow.postMessage(a,P)}else g&&g.contentWindow&&g.contentWindow.postMessage({action:"popupClosed",
popup:c.data.popup},P)},1E3)}else g&&g.contentWindow&&g.contentWindow.postMessage({action:"popupFailed",popup:c.data.popup},P)}else if(c.data.action)if(e=c.data.action,"resize"===e){var A=c.data["class"],r=c.data.expanded;if(e=c.data.frameId)Array.isArray(e)||(e=[e]),Y&&Y.handleExpand(r),r&&R&&R.destroy(),e.forEach(function(a){if("pdfFrame"==a&&"off"==r){var b=document.getElementById(a);b&&b.parentNode.removeChild(b);b={indication:"pdfStatus",status:"off"};var d=document.getElementById("GroveSide");
d&&d.contentWindow&&d.contentWindow.postMessage(b,P)}if((b=document.getElementById(a)||c.srcElement)&&b.dataset){b.dataset.expanded=r;b.dataset["class"]=A;b.className=A;if(d="GroveSide"===b.id&&-1<b.parentElement.className.indexOf("groveSideContainer")&&b.parentElement)d.dataset.expanded=r,d.dataset["class"]=A,d.className="groveSideContainer "+A;b.contentWindow&&b.contentWindow.postMessage({action:"resize",expanded:r},P);"Welcome"==a?(a=document.getElementById("GroveSide"),b=document.getElementById("CornerWidget"),
a&&a.dataset&&b&&b.dataset&&(a.dataset.expanded=!1,a.dataset["class"]="collapsed",a.className="collapsed",a.contentWindow&&a.contentWindow.postMessage({action:"resize",expanded:!1},P),b.dataset.expanded=!1,b.dataset["class"]="collapsed",b.className="collapsed",b.contentWindow&&b.contentWindow.postMessage({action:"resize",expanded:!1},P))):"GroveSide"===a&&r&&b.focus()}else"pdfFrame"==a&&(fa.setView("page"),fa.hide(),fa.render())})}else if("restyle"===e){var v=c.data.signedin;if(e=c.data.frameId)Array.isArray(e)||
(e=[e]),e.forEach(function(a){(a=document.getElementById(a)||c.srcElement)&&a.dataset&&(a.dataset.signedin=v)})}else{if("exit"!==e&&"logout"!==e)if("kill"===e)(e=(e=c.data.frameId)&&document.getElementById(e))&&e.parentElement.removeChild(e);else if("setupSticky"===e)fa.setPdfLeftOffset(c.data.offset),fa.setView("pdf"),fa.render();else if("makeVisible"===e)document.getElementById("CornerWidget")&&(document.getElementById("CornerWidget").style.visibility="visible"),document.getElementById("GroveSide")&&
(document.getElementById("GroveSide").style.visibility="visible");else if("loadPagePreview"===e)Object(z.a)(c,document.getElementById(c.data.origin).contentWindow);else if("requestScroll"===e||"gotoPage"===e)Y&&Y.scrollToElement(c.data.elementId,c.data.page);else if("textAreaInit"!==e)if("textAreaFocused"===e)aa&&(C.style.position="absolute",C.style.top=u.scrollingElement.scrollTop+"px");else if("textAreaBlurred"===e)aa&&(document.getElementById("GroveSide").style.position="fixed");else if("textAreaDestroyed"===
e)aa&&(document.getElementById("GroveSide").style.position="fixed");else if("goto"===e){if(e=c.data.hash)window.location.hash=e}else"frameInit"===e&&Object(b.frameInitHandler)(M,c)}else if(e&&e.getName&&e.getName()===m.SigninEvent.evtName()||c.data.signin||c.data.connect)(e=document.getElementById("GroveSide"))&&e.contentWindow&&e.contentWindow.postMessage(c.data,P);else if("sidebarLoaded"===c.data)[document.getElementById("CornerWidget"),document.getElementById("TopWidget"),document.getElementById("Sticky")].filter(function(a){return null!=
a}).forEach(function(a){a.contentWindow.postMessage("sidebarLoaded","*")}),document.getElementById("CornerWidget")&&(document.getElementById("CornerWidget").style.visibility="visible"),document.getElementById("GroveSide")&&(document.getElementById("GroveSide").style.visibility="visible"),document.getElementById("TopWidget")&&(document.getElementById("TopWidget").style.visibility="visible",document.getElementById("TopWidget").style.position="static"),R&&R.show(),la.containsActiveSurveys()?(Object(b.installFrame)("SurveyWidget",
P+"web/surveyWidget.html",za,na+"//"+t,u.body,{visibility:"hidden"},{expanded:!1},M,a,null,{title:"Remarq Survey Widget"}),Object(F.debug)("installed survey widget!")):Object(F.debug)("no active surveys found : skipping survey widget installation.."),la.containsActivePolls()?(M.activePollsIds=la.activePollsIds,Object(b.installFrame)("PollWidget",P+"web/pollWidget.html",za,na+"//"+t,{element:C,relativePosition:"above"},{visibility:"hidden"},{expanded:!1},M,a,null,{title:"Remarq Poll Widget"}),Object(F.debug)("installed poll widget!")):
Object(F.debug)("no active polls found : skipping poll widget installation..");else if(c&&c.data&&c.data.evtName===y.a.ANNOTATIONS_LOADED_EVENT)(e=document.getElementById("GroveSide"))&&e.contentWindow&&e.contentWindow.postMessage(c.data,P);else if(c.data&&c.data._name===m.WidgetInitializedEvent.evtName()){e=d.WIDGET_NAMES.fromFrameId(c.data.widgetId);for(e=b.widgetsStateHolder.get(e);e&&e.status===d.WIDGET_STATUS.LOADING&&!e.pendingEventsQueue.isEmpty();)f=e.pendingEventsQueue.dequeue(),e.frame&&
e.frame.contentWindow&&e.frame.contentWindow.postMessage(f,"*");e&&(e.status=d.WIDGET_STATUS.INITIALIZED)}else if(c.data&&c.data._name===m.WidgetDestroyedEvent.evtName()){if(e=d.WIDGET_NAMES.fromFrameId(c.data.widgetId),e=b.widgetsStateHolder.get(e))e.status=d.WIDGET_STATUS.UNINSTALLED}else c.data&&c.data._name===m.UpdateFrameTitleEvent.evtName()&&C.setAttribute("title",c.data.title)};B.addEventListener("message",function(){var a=!1,c=Object(b.extractCookies)().rmq_cwet;return function(b){var d=b.data;
"explAnimation"===d.msg?a||r.activeSurveysPolls&&0!=r.activeSurveysPolls.active.length||(b=b.data.toggle,void 0===c&&(b&&(d=new Date,d.setTime(d.getTime()+864E5),d="expires="+d.toUTCString(),document.cookie="rmq_cwet=0;path=/;"+d),document.getElementById("CornerWidget").setAttribute("data-expl",""+b))):"resize"===d.action&&(a=d.expanded)&&Z&&Z.setAttribute("data-expl","false")}}());B.addEventListener("message",Fa,!1);B.Remarq.unsubscribeCallbacks.push(function(){B.removeEventListener("message",Fa,
!1)});I&&(Object(b.installFrame)("TopWidget",P+"web/topwidget.html",za,na+"//"+t,{element:I.item,relativePosition:I.relativePosition},{visibility:"hidden",position:"fixed"},{expanded:"normal",pdId:D},M,a,null,{title:"Remarq Top Widget"}),null!=oa&&0<oa.length&&oa[0]&&Object(b.installFrame)("Sticky",P+"web/sticky.html",za,na+"//"+t,{element:oa[0].item,relativePosition:oa[0].relativePosition},{visibility:"hidden",position:"fixed"},{expanded:"normal",pdId:D},M,a,null,{title:"Remarq Sticky widget"}));
u.dispatchEvent(new CustomEvent("Remarq_started",{detail:"started"}));return C}return null},function(a){})})};B.Remarq.stop=function(){H=Aa=!1;Ea&&Ea.destroy();Ea=null;Y&&Y.destroy();c.a.destroy();B.Remarq.unsubscribeListeners();b.widgetsStateHolder.values().forEach(function(a){a&&a.frame&&(a.frame.contentWindow&&a.frame.contentWindow.postMessage({action:"destroy",reason:"destroy"},"*"),"pdfFrame"===a.name&&a.frame&&a.status!==d.WIDGET_STATUS.UNINSTALLED&&B.history.back(),a.frame.parentNode&&a.frame.parentNode.removeChild(a.frame),
a.frame=null,a.status=d.WIDGET_STATUS.UNINSTALLED,a.pendingEventsQueue.clear())});window.Remarq.unsubscribeCallbacks=[];Object(b.removeElementById)("grove-annotator-css");Object(b.removeElementById)("grove-main-css");Object(b.removeElementById)("grove-roboto-css");u.dispatchEvent(new CustomEvent("Remarq_stopped"))};B.Remarq.restart=function(){B.Remarq.stop();B.Remarq.start()};B.Remarq.loadAsLite=function(){H||(ma=a.isLite=!0,B.Remarq.restart())};B.Remarq.urlUpdated=function(c){var d=B.history&&B.history.state,
e=d&&d.contentType;e||(d=u.contentType)&&0===d.indexOf("application/")&&(e=d.substring(12).toUpperCase());d=Object(b.calculateSiteUrl)(c);Q(B,a,d,e).then(function(a){setTimeout(function(){B.postMessage({relay:"GroveSide",origin:"rootFrame",msg:{action:"reload",doi:a,siteUrl:c,pdId:null,contentType:e}},"*")},1E3)})};B.Remarq.loadPdfFrame=function(a,b){D.a.getInstance().handle("pdf",void 0,a,void 0,b).then(function(a){D.a.getInstance().pdfFrame=a})["catch"](function(a){Object(F.error)("Failed to load PDF document",
a)})};var ta=!window.navigator.onLine;B.Remarq.setOfflineStatus=function(a){ta!==a&&(ta=a,C&&C.contentWindow&&C.contentWindow.postMessage({action:"offlineStatusChange",offlineStatus:ta},"*"),Y&&Y.setOfflineStatus(ta),u.dispatchEvent(new CustomEvent("Remarq_offlineStatusChanged",{detail:{offlineStatus:ta}})))};B.Remarq.getOfflineStatus=function(){return ta};B.Remarq.inject=function(b){B.Remarq.start().then(function(a){O.then(function(a){a.initiate(b).then(function(b){C=b.rmqInjectorHandler.groveSide;
u.dispatchEvent(new CustomEvent("Remarq_injected",{handler:a,frame:b.rmqInjectorHandler.groveSide}))})["catch"](function(a){Object(F.error)("Cannot instantiate literatumHandler",a)})})["catch"](function(a){Object(F.error)("While initiating lt:",a);throw a;})})["catch"](function(c){Object(F.info)("Cannot inject Remarq",c);G&&(new S.a(B,{},P,za,{},a)).injectUnsupported(b)})};B.ononline=function(a){B.Remarq.setOfflineStatus(!1)};B.onoffline=function(a){B.Remarq.setOfflineStatus(!0)};return B.Remarq}},
"3T7U":function(f,k){f.exports=function(){throw new TypeError("Invalid attempt to destructure non-iterable instance");}},"3rZI":function(f,k){f.exports=function(a,e,c,b){var f=-1,y=null==a?0:a.length;for(b&&y&&(c=a[++f]);++f<y;)c=e(c,a[f],f,a);return c}},"4EtY":function(f,k,a){f=a("Z60a");var e=a.n(f);f=a("C9uT");var c=a.n(f),b=a("RTdn");"use strict";a=function(){var a=function(){function a(){e()(this,a);this.cookies=Object(b.extractCookies)();a.prototype.setCookie=b.setCookie}c()(a,[{key:"getCookies",
value:function(){return this.cookies}},{key:"get",value:function(a){return a&&this.cookies?this.cookies[a]:null}}]);return a}(),f=null;return Object.freeze({getInstance:function(){f||(f=new a);return f}})}();k.a=a},"4T/i":function(f,k,a){(function(e){function c(a,b,h){function A(b,c,d){var e=a.field||a.attribute;if("text"===c||e)return b.map(function(a){var b=a;e?(e&&e.split(".")).forEach(function(a){b=b[a]}):b=a.text||a.innerText||a.textContent;return d?r(d,b):b});if("node"===c)return b}function r(a,
b){if(2<a.length){var c=new RegExp(a[0],a[1]);var d=a[2]}else c=new RegExp(a[0]),d=a[1];if(d){a=c.exec(b);var e=/^\$([0-9]+)$/.exec(d);if(a)return e[1]?(b=parseInt(e[1]),a[b]):b.replace(c,d)}else return null}function x(a,b){var c=y()(a,3);a=c[0];var d=c[1];c=c[2];if(Array.isArray(b)&&0===b.length||null===b||void 0===b)return d;try{var e=new Function("$array","$0","return ("+a+")");if(Array.isArray(b))return e.call(null,b,b[0]);e.call(null,[b],b)}catch(Q){return void 0!==c?c:d}}if(Array.isArray(a))return a.map(function(a){return c(a,
b,h)}).reduce(function(a,b){null!=b&&(Array.isArray(b)?b.forEach(function(b){null!=b&&a.push(b)}):a.push(b));return a},[]);if(!a)return null;h=h&&decodeURIComponent(h);var z=a.type,k=a.value,D=a.sed;"string"===typeof a&&(z="css",k=a);try{var F=k&&JSON.parse(k)}catch(u){F=k}if("constant"===z)return[F];if("css"===z||"jquery"===z)if(b=b||(D?"text":"node"),F)if("string"===typeof F){var S;"css"===z?S=document.querySelectorAll(F):"jquery"===z&&(S=e(F));var B=Array.prototype.slice.call(S);B=A(B,b,D)}else"object"===
f()(F)&&(B=Object.keys(F).map(function(a){if("css"===z){var b=document.querySelectorAll(a);b=Array.prototype.slice.call(b)}else"jquery"===z&&(b=e(a));return b[0]?F[a]:null}).filter(function(a){return null!=a}));else throw"CSS selector value not specified"+JSON.stringify(a);else if("url"===z){if(b&&"text"!==b&&!h)throw"URL selectors can only return text";B=h?h:decodeURIComponent(d.location.pathname);D&&(B=r(D,B));B=[B]}else if("xpath"===z)"string"===typeof F?(k=Object(m.a)(F),"string"===typeof k?B=
D?[r(D,k)]:[k]:Array.isArray(k)&&(B=A(k,b,D))):"object"===f()(F)&&(B=Object.keys(F).map(function(a){return Object(m.a)(F)[0]?F[a]:null}).filter(function(a){return null!=a}));else if("meta"===z)D=document.getElementsByTagName("meta"),D=filter(D,function(a){return a.property===F||a.name===F}),B=map(D,function(a){return a.content});else throw"Cannot evaluate type:"+z;a.expression&&(B=x(a.expression,B));return B}k.a=c;var b=a("Oy1H"),f=a.n(b);b=a("NM/j");var y=a.n(b),m=a("sCxY"),d=window}).call(k,a("7t+N"))},
"5/Qr":function(f,k,a){var e=a("Kzd6"),c=a("6Git"),b=a("WyC4"),r=a("0uX4"),y=a("Ilb/");f.exports=function(a,d,f){var m=a.constructor;switch(d){case "[object ArrayBuffer]":return e(a);case "[object Boolean]":case "[object Date]":return new m(+a);case "[object DataView]":return c(a,f);case "[object Float32Array]":case "[object Float64Array]":case "[object Int8Array]":case "[object Int16Array]":case "[object Int32Array]":case "[object Uint8Array]":case "[object Uint8ClampedArray]":case "[object Uint16Array]":case "[object Uint32Array]":return y(a,
f);case "[object Map]":return new m;case "[object Number]":case "[object String]":return new m(a);case "[object RegExp]":return b(a);case "[object Set]":return new m;case "[object Symbol]":return r(a)}}},"6Git":function(f,k,a){var e=a("Kzd6");f.exports=function(a,b){b=b?e(a.buffer):a.buffer;return new a.constructor(b,a.byteOffset,a.byteLength)}},"6PBa":function(f,k,a){var e=a("Hxdr"),c=a("JyYQ"),b=a("CHen"),r=a("xond");f.exports=function(a,f){if(null==a)return{};var d=e(r(a),function(a){return[a]});
f=c(f);return b(a,d,function(a,b){return f(a,b[0])})}},"6t3S":function(f,k,a){k.a=function(a){var c=a&&a.groveBase&&a.groveProtocol&&(0<a.groveBase.length?a.groveProtocol+"//"+a.groveBase+"/":"")||"*";return function(b,e,f,m){var d=document.getElementById("GroveSide");d?d.contentWindow.postMessage({gaEvent:{eventCategory:b,eventAction:e,eventLabel:f,eventValue:m}},c):window.parent.postMessage({relay:"GroveSide",origin:a.frameName||"rootFrame",msg:{gaEvent:{eventCategory:b,eventAction:e,eventLabel:f,
eventValue:m}}},c)}}},"7UU1":function(f,k){f.exports=function(a){if(Array.isArray(a))return a}},"7t+N":function(f,k,a){var e,c;(function(a,c){"object"===typeof f&&"object"===typeof f.exports?f.exports=a.document?c(a,!0):function(a){if(!a.document)throw Error("jQuery requires a window with a document");return c(a)}:c(a)})("undefined"!==typeof window?window:this,function(a,r){function b(a,b,c){c=c||X;var l,w=c.createElement("script");w.text=a;if(b)for(l in Ba)(a=b[l]||b.getAttribute&&b.getAttribute(l))&&
w.setAttribute(l,a);c.head.appendChild(w).parentNode.removeChild(w)}function m(a){return null==a?a+"":"object"===typeof a||"function"===typeof a?Pa[Za.call(a)]||"object":typeof a}function d(a){var b=!!a&&"length"in a&&a.length,l=m(a);return V(a)||Ia(a)?!1:"array"===l||0===b||"number"===typeof b&&0<b&&b-1 in a}function x(a,b){return a.nodeName&&a.nodeName.toLowerCase()===b.toLowerCase()}function z(a,b,c){return V(b)?g.grep(a,function(a,l){return!!b.call(a,l,a)!==c}):b.nodeType?g.grep(a,function(a){return a===
b!==c}):"string"!==typeof b?g.grep(a,function(a){return-1<M.call(b,a)!==c}):g.filter(b,a,c)}function h(a,b){for(;(a=a[b])&&1!==a.nodeType;);return a}function A(a){var b={};g.each(a.match(xa)||[],function(a,l){b[l]=!0});return b}function v(a){return a}function N(a){throw a;}function K(a,b,c,d){var l;try{a&&V(l=a.promise)?l.call(a).done(b).fail(c):a&&V(l=a.then)?l.call(a,b,c):b.apply(void 0,[a].slice(d))}catch(bc){c.apply(void 0,[bc])}}function L(){X.removeEventListener("DOMContentLoaded",L);a.removeEventListener("load",
L);g.ready()}function D(a,b){return b.toUpperCase()}function F(a){return a.replace($a,"ms-").replace(Xa,D)}function S(){this.expando=g.expando+S.uid++}function B(a,b,c){if(void 0===c&&1===a.nodeType)if(c="data-"+b.replace(xb,"-$&").toLowerCase(),c=a.getAttribute(c),"string"===typeof c){try{var l=c;c="true"===l?!0:"false"===l?!1:"null"===l?null:l===+l+""?+l:La.test(l)?JSON.parse(l):l}catch(sc){}Ca.set(a,b,c)}else c=void 0;return c}function u(a,b,c,d){var l,w=20,n=d?function(){return d.cur()}:function(){return g.css(a,
b,"")},e=n(),p=c&&c[3]||(g.cssNumber[b]?"":"px"),f=a.nodeType&&(g.cssNumber[b]||"px"!==p&&+e)&&Ma.exec(g.css(a,b));if(f&&f[3]!==p){e/=2;p=p||f[3];for(f=+e||1;w--;)g.style(a,b,f+p),0>=(1-l)*(1-(l=n()/e||.5))&&(w=0),f/=l;f*=2;g.style(a,b,f+p);c=c||[]}if(c){f=+f||+e||0;var ba=c[1]?f+(c[1]+1)*c[2]:+c[2];d&&(d.unit=p,d.start=f,d.end=ba)}return ba}function J(a,b){for(var l,c,w=[],d=0,n=a.length;d<n;d++)if(c=a[d],c.style)if(l=c.style.display,b){if("none"===l&&(w[d]=W.get(c,"display")||null,w[d]||(c.style.display=
"")),""===c.style.display&&ja(c)){l=d;var e=c.ownerDocument;c=c.nodeName;var p=Va[c];p||(e=e.body.appendChild(e.createElement(c)),p=g.css(e,"display"),e.parentNode.removeChild(e),"none"===p&&(p="block"),Va[c]=p);e=p;w[l]=e}}else"none"!==l&&(w[d]="none",W.set(c,"display",l));for(d=0;d<n;d++)null!=w[d]&&(a[d].style.display=w[d]);return a}function ca(a,b){var l="undefined"!==typeof a.getElementsByTagName?a.getElementsByTagName(b||"*"):"undefined"!==typeof a.querySelectorAll?a.querySelectorAll(b||"*"):
[];return void 0===b||b&&x(a,b)?g.merge([a],l):l}function T(a,b){for(var l=0,c=a.length;l<c;l++)W.set(a[l],"globalEval",!b||W.get(b[l],"globalEval"))}function q(a,b,c,d,n){for(var l,w,e,f=b.createDocumentFragment(),ba=[],E=0,h=a.length;E<h;E++)if((l=a[E])||0===l)if("object"===m(l))g.merge(ba,l.nodeType?[l]:l);else if(lb.test(l)){w=w||f.appendChild(b.createElement("div"));e=(Da.exec(l)||["",""])[1].toLowerCase();e=sa[e]||sa._default;w.innerHTML=e[1]+g.htmlPrefilter(l)+e[2];for(e=e[0];e--;)w=w.lastChild;
g.merge(ba,w.childNodes);w=f.firstChild;w.textContent=""}else ba.push(b.createTextNode(l));f.textContent="";for(E=0;l=ba[E++];)if(d&&-1<g.inArray(l,d))n&&n.push(l);else if(a=p(l),w=ca(f.appendChild(l),"script"),a&&T(w),c)for(e=0;l=w[e++];)mb.test(l.type||"")&&c.push(l);return f}function Q(){return!0}function U(){return!1}function aa(a,b){a:{try{var l=X.activeElement;break a}catch(Nb){}l=void 0}return a===l===("focus"===b)}function G(a,b,c,d,n,e){var l;if("object"===typeof b){"string"!==typeof c&&
(d=d||c,c=void 0);for(l in b)G(a,l,c,d,b[l],e);return a}null==d&&null==n?(n=c,d=c=void 0):null==n&&("string"===typeof c?(n=d,d=void 0):(n=d,d=c,c=void 0));if(!1===n)n=U;else if(!n)return a;if(1===e){var w=n;n=function(a){g().off(a);return w.apply(this,arguments)};n.guid=w.guid||(w.guid=g.guid++)}return a.each(function(){g.event.add(this,b,n,d,c)})}function Y(a,b,c){c?(W.set(a,b,!1),g.event.add(a,b,{namespace:!1,handler:function(a){var l=W.get(this,b);if(a.isTrigger&1&&this[b])if(l.length)(g.event.special[b]||
{}).delegateType&&a.stopPropagation();else{l=Oa.call(arguments);W.set(this,b,l);var w=c(this,b);this[b]();var d=W.get(this,b);l!==d||w?W.set(this,b,!1):d={};if(l!==d)return a.stopImmediatePropagation(),a.preventDefault(),d.value}else l.length&&(W.set(this,b,{value:g.event.trigger(g.extend(l[0],g.Event.prototype),l.slice(1),this)}),a.stopImmediatePropagation())}})):void 0===W.get(a,b)&&g.event.add(a,b,Q)}function ua(a,b){return x(a,"table")&&x(11!==b.nodeType?b:b.firstChild,"tr")?g(a).children("tbody")[0]||
a:a}function O(a){a.type=(null!==a.getAttribute("type"))+"/"+a.type;return a}function Ea(a){"true/"===(a.type||"").slice(0,5)?a.type=a.type.slice(5):a.removeAttribute("type");return a}function C(a,b){var l,c;if(1===b.nodeType){if(W.hasData(a)){var w=W.access(a);var d=W.set(b,w);if(w=w.events)for(c in delete d.handle,d.events={},w)for(d=0,l=w[c].length;d<l;d++)g.event.add(b,c,w[c][d])}Ca.hasData(a)&&(a=Ca.access(a),a=g.extend({},a),Ca.set(b,a))}}function Z(a,c,d,n){c=Sa.apply([],c);var l,w=0,e=a.length,
p=e-1,f=c[0],E=V(f);if(E||1<e&&"string"===typeof f&&!ha.checkClone&&Ib.test(f))return a.each(function(b){var l=a.eq(b);E&&(c[0]=f.call(this,b,l.html()));Z(l,c,d,n)});if(e){var ba=q(c,a[0].ownerDocument,!1,a,n);var h=ba.firstChild;1===ba.childNodes.length&&(ba=h);if(h||n){h=g.map(ca(ba,"script"),O);for(l=h.length;w<e;w++){var m=ba;w!==p&&(m=g.clone(m,!0,!0),l&&g.merge(h,ca(m,"script")));d.call(a[w],m,w)}if(l)for(ba=h[h.length-1].ownerDocument,g.map(h,Ea),w=0;w<l;w++)m=h[w],mb.test(m.type||"")&&!W.access(m,
"globalEval")&&g.contains(ba,m)&&(m.src&&"module"!==(m.type||"").toLowerCase()?g._evalUrl&&!m.noModule&&g._evalUrl(m.src,{nonce:m.nonce||m.getAttribute("nonce")}):b(m.textContent.replace(Ob,""),m,ba))}}return a}function R(a,b,c){for(var l=b?g.filter(b,a):a,d=0;null!=(b=l[d]);d++)c||1!==b.nodeType||g.cleanData(ca(b)),b.parentNode&&(c&&p(b)&&T(ca(b,"script")),b.parentNode.removeChild(b));return a}function t(a,b,c){var l=a.style;if(c=c||rb(a)){var d=c.getPropertyValue(b)||c[b];""!==d||p(a)||(d=g.style(a,
b));if(!ha.pixelBoxStyles()&&Fb.test(d)&&ab.test(b)){a=l.width;b=l.minWidth;var w=l.maxWidth;l.minWidth=l.maxWidth=l.width=d;d=c.width;l.width=a;l.minWidth=b;l.maxWidth=w}}return void 0!==d?d+"":d}function na(a,b){return{get:function(){if(a())delete this.get;else return(this.get=b).apply(this,arguments)}}}function Ha(a){var b=g.cssProps[a]||Pb[a];if(b)return b;if(a in Gb)return a;a:{b=a;for(var l=b[0].toUpperCase()+b.slice(1),c=Jb.length;c--;)if(b=Jb[c]+l,b in Gb)break a;b=void 0}return Pb[a]=b||
a}function za(a,b,c){return(a=Ma.exec(b))?Math.max(0,a[2]-(c||0))+(a[3]||"px"):b}function P(a,b,c,d,n,e){var l="width"===b?1:0,w=0,p=0;if(c===(d?"border":"content"))return 0;for(;4>l;l+=2)"margin"===c&&(p+=g.css(a,c+Ra[l],!0,n)),d?("content"===c&&(p-=g.css(a,"padding"+Ra[l],!0,n)),"margin"!==c&&(p-=g.css(a,"border"+Ra[l]+"Width",!0,n))):(p+=g.css(a,"padding"+Ra[l],!0,n),"padding"!==c?p+=g.css(a,"border"+Ra[l]+"Width",!0,n):w+=g.css(a,"border"+Ra[l]+"Width",!0,n));!d&&0<=e&&(p+=Math.max(0,Math.ceil(a["offset"+
b[0].toUpperCase()+b.slice(1)]-e-p-w-.5))||0);return p}function ma(a,b,c){var l=rb(a),d=(!ha.boxSizingReliable()||c)&&"border-box"===g.css(a,"boxSizing",!1,l),n=d,w=t(a,b,l),e="offset"+b[0].toUpperCase()+b.slice(1);if(Fb.test(w)){if(!c)return w;w="auto"}(!ha.boxSizingReliable()&&d||"auto"===w||!parseFloat(w)&&"inline"===g.css(a,"display",!1,l))&&a.getClientRects().length&&(d="border-box"===g.css(a,"boxSizing",!1,l),(n=e in a)&&(w=a[e]));w=parseFloat(w)||0;return w+P(a,b,c||(d?"border":"content"),
n,l,w)+"px"}function da(a,b,c,d,n){return new da.prototype.init(a,b,c,d,n)}function H(){yb&&(!1===X.hidden&&a.requestAnimationFrame?a.requestAnimationFrame(H):a.setTimeout(H,g.fx.interval),g.fx.tick())}function eb(){a.setTimeout(function(){sb=void 0});return sb=Date.now()}function fa(a,b){var l=0,c={height:a};for(b=b?1:0;4>l;l+=2-b){var d=Ra[l];c["margin"+d]=c["padding"+d]=a}b&&(c.opacity=c.width=a);return c}function la(a,b,c){for(var l,d=(pa.tweeners[b]||[]).concat(pa.tweeners["*"]),n=0,w=d.length;n<
w;n++)if(l=d[n].call(c,b,a))return l}function Aa(a,b){var l,c;for(l in a){var d=F(l);var n=b[d];var w=a[l];Array.isArray(w)&&(n=w[1],w=a[l]=w[0]);l!==d&&(a[d]=w,delete a[l]);if((c=g.cssHooks[d])&&"expand"in c)for(l in w=c.expand(w),delete a[d],w)l in a||(a[l]=w[l],b[l]=n);else b[d]=n}}function pa(a,b,c){var l,d=0,n=pa.prefilters.length,w=g.Deferred().always(function(){delete e.elem}),e=function(){if(l)return!1;var b=sb||eb();b=Math.max(0,p.startTime+p.duration-b);for(var c=1-(b/p.duration||0),d=0,
n=p.tweens.length;d<n;d++)p.tweens[d].run(c);w.notifyWith(a,[p,c,b]);if(1>c&&n)return b;n||w.notifyWith(a,[p,1,0]);w.resolveWith(a,[p]);return!1},p=w.promise({elem:a,props:g.extend({},b),opts:g.extend(!0,{specialEasing:{},easing:g.easing._default},c),originalProperties:b,originalOptions:c,startTime:sb||eb(),duration:c.duration,tweens:[],createTween:function(b,l){b=g.Tween(a,p.opts,b,l,p.opts.specialEasing[b]||p.opts.easing);p.tweens.push(b);return b},stop:function(b){var c=0,d=b?p.tweens.length:0;
if(l)return this;for(l=!0;c<d;c++)p.tweens[c].run(1);b?(w.notifyWith(a,[p,1,0]),w.resolveWith(a,[p,b])):w.rejectWith(a,[p,b]);return this}});c=p.props;for(Aa(c,p.opts.specialEasing);d<n;d++)if(b=pa.prefilters[d].call(p,a,c,p.opts))return V(b.stop)&&(g._queueHooks(p.elem,p.opts.queue).stop=b.stop.bind(b)),b;g.map(c,la,p);V(p.opts.start)&&p.opts.start.call(a,p);p.progress(p.opts.progress).done(p.opts.done,p.opts.complete).fail(p.opts.fail).always(p.opts.always);g.fx.timer(g.extend(e,{elem:a,anim:p,
queue:p.opts.queue}));return p}function va(a){return(a.match(xa)||[]).join(" ")}function ta(a){return a.getAttribute&&a.getAttribute("class")||""}function oa(a){return Array.isArray(a)?a:"string"===typeof a?a.match(xa)||[]:[]}function wa(a,b,c,d){var l;if(Array.isArray(b))g.each(b,function(b,l){c||nb.test(a)?d(a,l):wa(a+"["+("object"===typeof l&&null!=l?b:"")+"]",l,c,d)});else if(c||"object"!==m(b))d(a,b);else for(l in b)wa(a+"["+l+"]",b[l],c,d)}function fb(a){return function(b,l){"string"!==typeof b&&
(l=b,b="*");var c=0,d=b.toLowerCase().match(xa)||[];if(V(l))for(;b=d[c++];)"+"===b[0]?(b=b.slice(1)||"*",(a[b]=a[b]||[]).unshift(l)):(a[b]=a[b]||[]).push(l)}}function Na(a,b,c,d){function l(p){var e;n[p]=!0;g.each(a[p]||[],function(a,p){a=p(b,c,d);if("string"===typeof a&&!w&&!n[a])return b.dataTypes.unshift(a),l(a),!1;if(w)return!(e=a)});return e}var n={},w=a===Tb;return l(b.dataTypes[0])||!n["*"]&&l("*")}function ob(a,b){var l,c,d=g.ajaxSettings.flatOptions||{};for(l in b)void 0!==b[l]&&((d[l]?a:
c||(c={}))[l]=b[l]);c&&g.extend(!0,a,c);return a}var ea=[],X=a.document,tb=Object.getPrototypeOf,Oa=ea.slice,Sa=ea.concat,I=ea.push,M=ea.indexOf,Pa={},Za=Pa.toString,Qa=Pa.hasOwnProperty,gb=Qa.toString,hb=gb.call(Object),ha={},V=function(a){return"function"===typeof a&&"number"!==typeof a.nodeType},Ia=function(a){return null!=a&&a===a.window},Ba={type:!0,src:!0,nonce:!0,noModule:!0},g=function(a,b){return new g.fn.init(a,b)},Fa=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g;g.fn=g.prototype={jquery:"3.4.1",
constructor:g,length:0,toArray:function(){return Oa.call(this)},get:function(a){return null==a?Oa.call(this):0>a?this[a+this.length]:this[a]},pushStack:function(a){a=g.merge(this.constructor(),a);a.prevObject=this;return a},each:function(a){return g.each(this,a)},map:function(a){return this.pushStack(g.map(this,function(b,l){return a.call(b,l,b)}))},slice:function(){return this.pushStack(Oa.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(a){var b=
this.length;a=+a+(0>a?b:0);return this.pushStack(0<=a&&a<b?[this[a]]:[])},end:function(){return this.prevObject||this.constructor()},push:I,sort:ea.sort,splice:ea.splice};g.extend=g.fn.extend=function(){var a,b,c,d=arguments[0]||{},n=1,p=arguments.length,e=!1;"boolean"===typeof d&&(e=d,d=arguments[n]||{},n++);"object"===typeof d||V(d)||(d={});n===p&&(d=this,n--);for(;n<p;n++)if(null!=(a=arguments[n]))for(b in a){var f=a[b];if("__proto__"!==b&&d!==f)if(e&&f&&(g.isPlainObject(f)||(c=Array.isArray(f)))){var E=
d[b];E=c&&!Array.isArray(E)?[]:c||g.isPlainObject(E)?E:{};c=!1;d[b]=g.extend(e,E,f)}else void 0!==f&&(d[b]=f)}return d};g.extend({expando:"jQuery"+("3.4.1"+Math.random()).replace(/\D/g,""),isReady:!0,error:function(a){throw Error(a);},noop:function(){},isPlainObject:function(a){if(!a||"[object Object]"!==Za.call(a))return!1;a=tb(a);if(!a)return!0;a=Qa.call(a,"constructor")&&a.constructor;return"function"===typeof a&&gb.call(a)===hb},isEmptyObject:function(a){for(var b in a)return!1;return!0},globalEval:function(a,
c){b(a,{nonce:c&&c.nonce})},each:function(a,b){var l,c=0;if(d(a))for(l=a.length;c<l&&!1!==b.call(a[c],c,a[c]);c++);else for(c in a)if(!1===b.call(a[c],c,a[c]))break;return a},trim:function(a){return null==a?"":(a+"").replace(Fa,"")},makeArray:function(a,b){b=b||[];null!=a&&(d(Object(a))?g.merge(b,"string"===typeof a?[a]:a):I.call(b,a));return b},inArray:function(a,b,c){return null==b?-1:M.call(b,a,c)},merge:function(a,b){for(var l=+b.length,c=0,d=a.length;c<l;c++)a[d++]=b[c];a.length=d;return a},
grep:function(a,b,c){for(var l=[],d=0,n=a.length,p=!c;d<n;d++)c=!b(a[d],d),c!==p&&l.push(a[d]);return l},map:function(a,b,c){var l,n=0,p=[];if(d(a))for(l=a.length;n<l;n++){var e=b(a[n],n,c);null!=e&&p.push(e)}else for(n in a)e=b(a[n],n,c),null!=e&&p.push(e);return Sa.apply([],p)},guid:1,support:ha});"function"===typeof Symbol&&(g.fn[Symbol.iterator]=ea[Symbol.iterator]);g.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(a,b){Pa["[object "+b+"]"]=b.toLowerCase()});
var Ta=function(a){function b(a,b,c,l){var d,n,p,e;var w=b&&b.ownerDocument;var f=b?b.nodeType:9;c=c||[];if("string"!==typeof a||!a||1!==f&&9!==f&&11!==f)return c;if(!l&&((b?b.ownerDocument||b:aa)!==k&&V(b),b=b||k,ja)){if(11!==f&&(e=I.exec(a)))if(d=e[1])if(9===f)if(n=b.getElementById(d)){if(n.id===d)return c.push(n),c}else return c;else{if(w&&(n=w.getElementById(d))&&L(b,n)&&n.id===d)return c.push(n),c}else{if(e[2])return nb.apply(c,b.getElementsByTagName(a)),c;if((d=e[3])&&P.getElementsByClassName&&
b.getElementsByClassName)return nb.apply(c,b.getElementsByClassName(d)),c}if(!(!P.qsa||O[a+" "]||ia&&ia.test(a)||1===f&&"object"===b.nodeName.toLowerCase())){d=a;w=b;if(1===f&&Rb.test(a)){(p=b.getAttribute("id"))?p=p.replace(ca,Sb):b.setAttribute("id",p=u);f=Ha(a);for(w=f.length;w--;)f[w]="#"+p+" "+q(f[w]);d=f.join(",");w=lb.test(a)&&h(b.parentNode)||b}try{return nb.apply(c,w.querySelectorAll(d)),c}catch(wc){O(a,!0)}finally{p===u&&b.removeAttribute("id")}}}return za(a.replace(mb,"$1"),b,c,l)}function l(){function a(c,
l){b.push(c+" ")>M.cacheLength&&delete a[b.shift()];return a[c+" "]=l}var b=[];return a}function c(a){a[u]=!0;return a}function d(a){var b=k.createElement("fieldset");try{return!!a(b)}catch(uc){return!1}finally{b.parentNode&&b.parentNode.removeChild(b)}}function n(a,b){a=a.split("|");for(var c=a.length;c--;)M.attrHandle[a[c]]=b}function p(a,b){var c=b&&a,l=c&&1===a.nodeType&&1===b.nodeType&&a.sourceIndex-b.sourceIndex;if(l)return l;if(c)for(;c=c.nextSibling;)if(c===b)return-1;return a?1:-1}function e(a){return function(b){return"input"===
b.nodeName.toLowerCase()&&b.type===a}}function f(a){return function(b){var c=b.nodeName.toLowerCase();return("input"===c||"button"===c)&&b.type===a}}function E(a){return function(b){return"form"in b?b.parentNode&&!1===b.disabled?"label"in b?"label"in b.parentNode?b.parentNode.disabled===a:b.disabled===a:b.isDisabled===a||b.isDisabled!==!a&&X(b)===a:b.disabled===a:"label"in b?b.disabled===a:!1}}function g(a){return c(function(b){b=+b;return c(function(c,l){for(var d,n=a([],c.length,b),p=n.length;p--;)c[d=
n[p]]&&(c[d]=!(l[d]=c[d]))})})}function h(a){return a&&"undefined"!==typeof a.getElementsByTagName&&a}function m(){}function q(a){for(var b=0,c=a.length,l="";b<c;b++)l+=a[b].value;return l}function t(a,b,c){var l=b.dir,d=b.next,n=d||l,p=c&&"parentNode"===n,e=K++;return b.first?function(b,c,d){for(;b=b[l];)if(1===b.nodeType||p)return a(b,c,d);return!1}:function(b,c,w){var f,E=[N,e];if(w)for(;b=b[l];){if((1===b.nodeType||p)&&a(b,c,w))return!0}else for(;b=b[l];)if(1===b.nodeType||p){var g=b[u]||(b[u]=
{});g=g[b.uniqueID]||(g[b.uniqueID]={});if(d&&d===b.nodeName.toLowerCase())b=b[l]||b;else{if((f=g[n])&&f[0]===N&&f[1]===e)return E[2]=f[2];g[n]=E;if(E[2]=a(b,c,w))return!0}}return!1}}function A(a){return 1<a.length?function(b,c,l){for(var d=a.length;d--;)if(!a[d](b,c,l))return!1;return!0}:a[0]}function r(a,b,c,l,d){for(var n,p=[],e=0,w=a.length,f=null!=b;e<w;e++)if(n=a[e])if(!c||c(n,l,d))p.push(n),f&&b.push(e);return p}function v(a,l,d,n,p,e){n&&!n[u]&&(n=v(n));p&&!p[u]&&(p=v(p,e));return c(function(c,
e,w,f){var E,g=[],h=[],m=e.length,q;if(!(q=c)){q=l||"*";for(var ba=w.nodeType?[w]:w,t=[],A=0,v=ba.length;A<v;A++)b(q,ba[A],t);q=t}q=!a||!c&&l?q:r(q,g,a,w,f);ba=d?p||(c?a:m||n)?[]:e:q;d&&d(q,ba,w,f);if(n){var ka=r(ba,h);n(ka,[],w,f);for(w=ka.length;w--;)if(E=ka[w])ba[h[w]]=!(q[h[w]]=E)}if(c){if(p||a){if(p){ka=[];for(w=ba.length;w--;)(E=ba[w])&&ka.push(q[w]=E);p(null,ba=[],ka,f)}for(w=ba.length;w--;)(E=ba[w])&&-1<(ka=p?Y(c,E):g[w])&&(c[ka]=!(e[ka]=E))}}else ba=r(ba===e?ba.splice(m,ba.length):ba),p?
p(null,e,ba,f):nb.apply(e,ba)})}function ka(a){var b,c,l=a.length,d=M.relative[a[0].type];var n=d||M.relative[" "];for(var p=d?1:0,e=t(function(a){return a===b},n,!0),w=t(function(a){return-1<Y(b,a)},n,!0),f=[function(a,c,l){a=!d&&(l||c!==ya)||((b=c).nodeType?e(a,c,l):w(a,c,l));b=null;return a}];p<l;p++)if(n=M.relative[a[p].type])f=[t(A(f),n)];else{n=M.filter[a[p].type].apply(null,a[p].matches);if(n[u]){for(c=++p;c<l&&!M.relative[a[c].type];c++);return v(1<p&&A(f),1<p&&q(a.slice(0,p-1).concat({value:" "===
a[p-2].type?"*":""})).replace(mb,"$1"),n,p<c&&ka(a.slice(p,c)),c<l&&ka(a=a.slice(c)),c<l&&q(a))}f.push(n)}return A(f)}function x(a,l){var d=0<l.length,n=0<a.length,p=function(c,p,e,w,f){var E,g,h=0,q="0",m=c&&[],ba=[],t=ya,A=c||n&&M.find.TAG("*",f),ka=N+=null==t?1:Math.random()||.1,v=A.length;for(f&&(ya=p===k||p||f);q!==v&&null!=(E=A[q]);q++){if(n&&E){var Nb=0;p||E.ownerDocument===k||(V(E),e=!ja);for(;g=a[Nb++];)if(g(E,p||k,e)){w.push(E);break}f&&(N=ka)}d&&((E=!g&&E)&&h--,c&&m.push(E))}h+=q;if(d&&
q!==h){for(Nb=0;g=l[Nb++];)g(m,ba,p,e);if(c){if(0<h)for(;q--;)m[q]||ba[q]||(ba[q]=S.call(w));ba=r(ba)}nb.apply(w,ba);f&&!c&&0<ba.length&&1<h+l.length&&b.uniqueSort(w)}f&&(N=ka,ya=t);return m};return d?c(p):p}var z,ya,D,Q,k,F,ja,ia,y,U,L,u="sizzle"+1*new Date,aa=a.document,N=0,K=0,T=l(),Eb=l(),ua=l(),O=l(),B=function(a,b){a===b&&(Q=!0);return 0},G={}.hasOwnProperty,Va=[],S=Va.pop,C=Va.push,nb=Va.push,bb=Va.slice,Y=function(a,b){for(var c=0,l=a.length;c<l;c++)if(a[c]===b)return c;return-1},R=/[\x20\t\r\n\f]+/g,
mb=/^[\x20\t\r\n\f]+|((?:^|[^\\])(?:\\.)*)[\x20\t\r\n\f]+$/g,sa=/^[\x20\t\r\n\f]*,[\x20\t\r\n\f]*/,Da=/^[\x20\t\r\n\f]*([>+~]|[\x20\t\r\n\f])[\x20\t\r\n\f]*/,Rb=/[\x20\t\r\n\f]|>/,Ea=/:((?:\\.|[\w-]|[^\x00-\xa0])+)(?:\((('((?:\\.|[^\\'])*)'|"((?:\\.|[^\\"])*)")|((?:\\.|[^\\()[\]]|\[[\x20\t\r\n\f]*((?:\\.|[\w-]|[^\x00-\xa0])+)(?:[\x20\t\r\n\f]*([*^$|!~]?=)[\x20\t\r\n\f]*(?:'((?:\\.|[^\\'])*)'|"((?:\\.|[^\\"])*)"|((?:\\.|[\w-]|[^\x00-\xa0])+))|)[\x20\t\r\n\f]*\])*)|.*)\)|)/,J=/^(?:\\.|[\w-]|[^\x00-\xa0])+$/,
H={ID:/^#((?:\\.|[\w-]|[^\x00-\xa0])+)/,CLASS:/^\.((?:\\.|[\w-]|[^\x00-\xa0])+)/,TAG:/^((?:\\.|[\w-]|[^\x00-\xa0])+|[*])/,ATTR:/^\[[\x20\t\r\n\f]*((?:\\.|[\w-]|[^\x00-\xa0])+)(?:[\x20\t\r\n\f]*([*^$|!~]?=)[\x20\t\r\n\f]*(?:'((?:\\.|[^\\'])*)'|"((?:\\.|[^\\"])*)"|((?:\\.|[\w-]|[^\x00-\xa0])+))|)[\x20\t\r\n\f]*\]/,PSEUDO:/^:((?:\\.|[\w-]|[^\x00-\xa0])+)(?:\((('((?:\\.|[^\\'])*)'|"((?:\\.|[^\\"])*)")|((?:\\.|[^\\()[\]]|\[[\x20\t\r\n\f]*((?:\\.|[\w-]|[^\x00-\xa0])+)(?:[\x20\t\r\n\f]*([*^$|!~]?=)[\x20\t\r\n\f]*(?:'((?:\\.|[^\\'])*)'|"((?:\\.|[^\\"])*)"|((?:\\.|[\w-]|[^\x00-\xa0])+))|)[\x20\t\r\n\f]*\])*)|.*)\)|)/,
CHILD:/^:(only|first|last|nth|nth-last)-(child|of-type)(?:\([\x20\t\r\n\f]*(even|odd|(([+-]|)(\d*)n|)[\x20\t\r\n\f]*(?:([+-]|)[\x20\t\r\n\f]*(\d+)|))[\x20\t\r\n\f]*\)|)/i,bool:/^(?:checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped)$/i,needsContext:/^[\x20\t\r\n\f]*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\([\x20\t\r\n\f]*((?:-\d)?\d*)[\x20\t\r\n\f]*\)|)(?=[^-]|$)/i},zb=/HTML$/i,Z=/^(?:input|select|textarea|button)$/i,Ab=/^h\d$/i,
na=/^[^{]+\{\s*\[native \w/,I=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,lb=/[+~]/,db=/\\([\da-f]{1,6}[\x20\t\r\n\f]?|([\x20\t\r\n\f])|.)/ig,Ja=function(a,b,c){a="0x"+b-65536;return a!==a||c?b:0>a?String.fromCharCode(a+65536):String.fromCharCode(a>>10|55296,a&1023|56320)},ca=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\0-\x1f\x7f-\uFFFF\w-]/g,Sb=function(a,b){return b?"\x00"===a?"\ufffd":a.slice(0,-1)+"\\"+a.charCodeAt(a.length-1).toString(16)+" ":"\\"+a},W=function(){V()},X=t(function(a){return!0===a.disabled&&"fieldset"===
a.nodeName.toLowerCase()},{dir:"parentNode",next:"legend"});try{nb.apply(Va=bb.call(aa.childNodes),aa.childNodes),Va[aa.childNodes.length].nodeType}catch(tc){nb={apply:Va.length?function(a,b){C.apply(a,bb.call(b))}:function(a,b){for(var c=a.length,l=0;a[c++]=b[l++];);a.length=c-1}}}var P=b.support={};var Bb=b.isXML=function(a){var b=(a.ownerDocument||a).documentElement;return!zb.test(a.namespaceURI||b&&b.nodeName||"HTML")};var V=b.setDocument=function(a){var b;a=a?a.ownerDocument||a:aa;if(a===k||
9!==a.nodeType||!a.documentElement)return k;k=a;F=k.documentElement;ja=!Bb(k);aa!==k&&(b=k.defaultView)&&b.top!==b&&(b.addEventListener?b.addEventListener("unload",W,!1):b.attachEvent&&b.attachEvent("onunload",W));P.attributes=d(function(a){a.className="i";return!a.getAttribute("className")});P.getElementsByTagName=d(function(a){a.appendChild(k.createComment(""));return!a.getElementsByTagName("*").length});P.getElementsByClassName=na.test(k.getElementsByClassName);P.getById=d(function(a){F.appendChild(a).id=
u;return!k.getElementsByName||!k.getElementsByName(u).length});P.getById?(M.filter.ID=function(a){var b=a.replace(db,Ja);return function(a){return a.getAttribute("id")===b}},M.find.ID=function(a,b){if("undefined"!==typeof b.getElementById&&ja)return(a=b.getElementById(a))?[a]:[]}):(M.filter.ID=function(a){var b=a.replace(db,Ja);return function(a){return(a="undefined"!==typeof a.getAttributeNode&&a.getAttributeNode("id"))&&a.value===b}},M.find.ID=function(a,b){if("undefined"!==typeof b.getElementById&&
ja){var c,l=b.getElementById(a);if(l){if((c=l.getAttributeNode("id"))&&c.value===a)return[l];var d=b.getElementsByName(a);for(b=0;l=d[b++];)if((c=l.getAttributeNode("id"))&&c.value===a)return[l]}return[]}});M.find.TAG=P.getElementsByTagName?function(a,b){if("undefined"!==typeof b.getElementsByTagName)return b.getElementsByTagName(a);if(P.qsa)return b.querySelectorAll(a)}:function(a,b){var c=[],l=0;b=b.getElementsByTagName(a);if("*"===a){for(;a=b[l++];)1===a.nodeType&&c.push(a);return c}return b};
M.find.CLASS=P.getElementsByClassName&&function(a,b){if("undefined"!==typeof b.getElementsByClassName&&ja)return b.getElementsByClassName(a)};y=[];ia=[];if(P.qsa=na.test(k.querySelectorAll))d(function(a){F.appendChild(a).innerHTML="<a id='"+u+"'></a><select id='"+u+"-\r\\' msallowcapture=''><option selected=''></option></select>";a.querySelectorAll("[msallowcapture^='']").length&&ia.push("[*^$]=[\\x20\\t\\r\\n\\f]*(?:''|\"\")");a.querySelectorAll("[selected]").length||ia.push("\\[[\\x20\\t\\r\\n\\f]*(?:value|checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped)");
a.querySelectorAll("[id~="+u+"-]").length||ia.push("~=");a.querySelectorAll(":checked").length||ia.push(":checked");a.querySelectorAll("a#"+u+"+*").length||ia.push(".#.+[+~]")}),d(function(a){a.innerHTML="<a href='' disabled='disabled'></a><select disabled='disabled'><option/></select>";var b=k.createElement("input");b.setAttribute("type","hidden");a.appendChild(b).setAttribute("name","D");a.querySelectorAll("[name=d]").length&&ia.push("name[\\x20\\t\\r\\n\\f]*[*^$|!~]?=");2!==a.querySelectorAll(":enabled").length&&
ia.push(":enabled",":disabled");F.appendChild(a).disabled=!0;2!==a.querySelectorAll(":disabled").length&&ia.push(":enabled",":disabled");a.querySelectorAll("*,:x");ia.push(",.*:")});(P.matchesSelector=na.test(U=F.matches||F.webkitMatchesSelector||F.mozMatchesSelector||F.oMatchesSelector||F.msMatchesSelector))&&d(function(a){P.disconnectedMatch=U.call(a,"*");U.call(a,"[s!='']:x");y.push("!=",":((?:\\\\.|[\\w-]|[^\x00-\\xa0])+)(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|\\[[\\x20\\t\\r\\n\\f]*((?:\\\\.|[\\w-]|[^\x00-\\xa0])+)(?:[\\x20\\t\\r\\n\\f]*([*^$|!~]?=)[\\x20\\t\\r\\n\\f]*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|((?:\\\\.|[\\w-]|[^\x00-\\xa0])+))|)[\\x20\\t\\r\\n\\f]*\\])*)|.*)\\)|)")});
ia=ia.length&&new RegExp(ia.join("|"));y=y.length&&new RegExp(y.join("|"));L=(b=na.test(F.compareDocumentPosition))||na.test(F.contains)?function(a,b){var c=9===a.nodeType?a.documentElement:a;b=b&&b.parentNode;return a===b||!!(b&&1===b.nodeType&&(c.contains?c.contains(b):a.compareDocumentPosition&&a.compareDocumentPosition(b)&16))}:function(a,b){if(b)for(;b=b.parentNode;)if(b===a)return!0;return!1};B=b?function(a,b){if(a===b)return Q=!0,0;var c=!a.compareDocumentPosition-!b.compareDocumentPosition;
if(c)return c;c=(a.ownerDocument||a)===(b.ownerDocument||b)?a.compareDocumentPosition(b):1;return c&1||!P.sortDetached&&b.compareDocumentPosition(a)===c?a===k||a.ownerDocument===aa&&L(aa,a)?-1:b===k||b.ownerDocument===aa&&L(aa,b)?1:D?Y(D,a)-Y(D,b):0:c&4?-1:1}:function(a,b){if(a===b)return Q=!0,0;var c=0,l=a.parentNode,d=b.parentNode,n=[a],e=[b];if(!l||!d)return a===k?-1:b===k?1:l?-1:d?1:D?Y(D,a)-Y(D,b):0;if(l===d)return p(a,b);for(;a=a.parentNode;)n.unshift(a);for(a=b;a=a.parentNode;)e.unshift(a);
for(;n[c]===e[c];)c++;return c?p(n[c],e[c]):n[c]===aa?-1:e[c]===aa?1:0};return k};b.matches=function(a,c){return b(a,null,null,c)};b.matchesSelector=function(a,c){(a.ownerDocument||a)!==k&&V(a);if(!(!P.matchesSelector||!ja||O[c+" "]||y&&y.test(c)||ia&&ia.test(c)))try{var l=U.call(a,c);if(l||P.disconnectedMatch||a.document&&11!==a.document.nodeType)return l}catch(vc){O(c,!0)}return 0<b(c,k,null,[a]).length};b.contains=function(a,b){(a.ownerDocument||a)!==k&&V(a);return L(a,b)};b.attr=function(a,b){(a.ownerDocument||
a)!==k&&V(a);var c=M.attrHandle[b.toLowerCase()];c=c&&G.call(M.attrHandle,b.toLowerCase())?c(a,b,!ja):void 0;return void 0!==c?c:P.attributes||!ja?a.getAttribute(b):(c=a.getAttributeNode(b))&&c.specified?c.value:null};b.escape=function(a){return(a+"").replace(ca,Sb)};b.error=function(a){throw Error("Syntax error, unrecognized expression: "+a);};b.uniqueSort=function(a){var b,c=[],l=0,d=0;Q=!P.detectDuplicates;D=!P.sortStable&&a.slice(0);a.sort(B);if(Q){for(;b=a[d++];)b===a[d]&&(l=c.push(d));for(;l--;)a.splice(c[l],
1)}D=null;return a};var da=b.getText=function(a){var b="",c=0;var l=a.nodeType;if(!l)for(;l=a[c++];)b+=da(l);else if(1===l||9===l||11===l){if("string"===typeof a.textContent)return a.textContent;for(a=a.firstChild;a;a=a.nextSibling)b+=da(a)}else if(3===l||4===l)return a.nodeValue;return b};var M=b.selectors={cacheLength:50,createPseudo:c,match:H,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},
preFilter:{ATTR:function(a){a[1]=a[1].replace(db,Ja);a[3]=(a[3]||a[4]||a[5]||"").replace(db,Ja);"~="===a[2]&&(a[3]=" "+a[3]+" ");return a.slice(0,4)},CHILD:function(a){a[1]=a[1].toLowerCase();"nth"===a[1].slice(0,3)?(a[3]||b.error(a[0]),a[4]=+(a[4]?a[5]+(a[6]||1):2*("even"===a[3]||"odd"===a[3])),a[5]=+(a[7]+a[8]||"odd"===a[3])):a[3]&&b.error(a[0]);return a},PSEUDO:function(a){var b,c=!a[6]&&a[2];if(H.CHILD.test(a[0]))return null;a[3]?a[2]=a[4]||a[5]||"":c&&Ea.test(c)&&(b=Ha(c,!0))&&(b=c.indexOf(")",
c.length-b)-c.length)&&(a[0]=a[0].slice(0,b),a[2]=c.slice(0,b));return a.slice(0,3)}},filter:{TAG:function(a){var b=a.replace(db,Ja).toLowerCase();return"*"===a?function(){return!0}:function(a){return a.nodeName&&a.nodeName.toLowerCase()===b}},CLASS:function(a){var b=T[a+" "];return b||(b=new RegExp("(^|[\\x20\\t\\r\\n\\f])"+a+"([\\x20\\t\\r\\n\\f]|$)"),T(a,function(a){return b.test("string"===typeof a.className&&a.className||"undefined"!==typeof a.getAttribute&&a.getAttribute("class")||"")}))},ATTR:function(a,
c,l){return function(d){d=b.attr(d,a);if(null==d)return"!="===c;if(!c)return!0;d+="";return"="===c?d===l:"!="===c?d!==l:"^="===c?l&&0===d.indexOf(l):"*="===c?l&&-1<d.indexOf(l):"$="===c?l&&d.slice(-l.length)===l:"~="===c?-1<(" "+d.replace(R," ")+" ").indexOf(l):"|="===c?d===l||d.slice(0,l.length+1)===l+"-":!1}},CHILD:function(a,b,c,l,d){var n="nth"!==a.slice(0,3),p="last"!==a.slice(-4),e="of-type"===b;return 1===l&&0===d?function(a){return!!a.parentNode}:function(b,c,w){var f,E;c=n!==p?"nextSibling":
"previousSibling";var g=b.parentNode,h=e&&b.nodeName.toLowerCase();w=!w&&!e;var q=!1;if(g){if(n){for(;c;){for(f=b;f=f[c];)if(e?f.nodeName.toLowerCase()===h:1===f.nodeType)return!1;var ba=c="only"===a&&!ba&&"nextSibling"}return!0}ba=[p?g.firstChild:g.lastChild];if(p&&w){f=g;var m=f[u]||(f[u]={});m=m[f.uniqueID]||(m[f.uniqueID]={});q=m[a]||[];q=(E=q[0]===N&&q[1])&&q[2];for(f=E&&g.childNodes[E];f=++E&&f&&f[c]||(q=E=0)||ba.pop();)if(1===f.nodeType&&++q&&f===b){m[a]=[N,E,q];break}}else if(w&&(f=b,m=f[u]||
(f[u]={}),m=m[f.uniqueID]||(m[f.uniqueID]={}),q=m[a]||[],q=E=q[0]===N&&q[1]),!1===q)for(;(f=++E&&f&&f[c]||(q=E=0)||ba.pop())&&((e?f.nodeName.toLowerCase()!==h:1!==f.nodeType)||!++q||(w&&(m=f[u]||(f[u]={}),m=m[f.uniqueID]||(m[f.uniqueID]={}),m[a]=[N,q]),f!==b)););q-=d;return q===l||0===q%l&&0<=q/l}}},PSEUDO:function(a,l){var d=M.pseudos[a]||M.setFilters[a.toLowerCase()]||b.error("unsupported pseudo: "+a);if(d[u])return d(l);if(1<d.length){var n=[a,a,"",l];return M.setFilters.hasOwnProperty(a.toLowerCase())?
c(function(a,b){for(var c,n=d(a,l),p=n.length;p--;)c=Y(a,n[p]),a[c]=!(b[c]=n[p])}):function(a){return d(a,0,n)}}return d}},pseudos:{not:c(function(a){var b=[],l=[],d=ea(a.replace(mb,"$1"));return d[u]?c(function(a,b,c,l){l=d(a,null,l,[]);for(var n=a.length;n--;)if(c=l[n])a[n]=!(b[n]=c)}):function(a,c,n){b[0]=a;d(b,null,n,l);b[0]=null;return!l.pop()}}),has:c(function(a){return function(c){return 0<b(a,c).length}}),contains:c(function(a){a=a.replace(db,Ja);return function(b){return-1<(b.textContent||
da(b)).indexOf(a)}}),lang:c(function(a){J.test(a||"")||b.error("unsupported lang: "+a);a=a.replace(db,Ja).toLowerCase();return function(b){var c;do if(c=ja?b.lang:b.getAttribute("xml:lang")||b.getAttribute("lang"))return c=c.toLowerCase(),c===a||0===c.indexOf(a+"-");while((b=b.parentNode)&&1===b.nodeType);return!1}}),target:function(b){var c=a.location&&a.location.hash;return c&&c.slice(1)===b.id},root:function(a){return a===F},focus:function(a){return a===k.activeElement&&(!k.hasFocus||k.hasFocus())&&
!!(a.type||a.href||~a.tabIndex)},enabled:E(!1),disabled:E(!0),checked:function(a){var b=a.nodeName.toLowerCase();return"input"===b&&!!a.checked||"option"===b&&!!a.selected},selected:function(a){a.parentNode&&a.parentNode.selectedIndex;return!0===a.selected},empty:function(a){for(a=a.firstChild;a;a=a.nextSibling)if(6>a.nodeType)return!1;return!0},parent:function(a){return!M.pseudos.empty(a)},header:function(a){return Ab.test(a.nodeName)},input:function(a){return Z.test(a.nodeName)},button:function(a){var b=
a.nodeName.toLowerCase();return"input"===b&&"button"===a.type||"button"===b},text:function(a){var b;return"input"===a.nodeName.toLowerCase()&&"text"===a.type&&(null==(b=a.getAttribute("type"))||"text"===b.toLowerCase())},first:g(function(){return[0]}),last:g(function(a,b){return[b-1]}),eq:g(function(a,b,c){return[0>c?c+b:c]}),even:g(function(a,b){for(var c=0;c<b;c+=2)a.push(c);return a}),odd:g(function(a,b){for(var c=1;c<b;c+=2)a.push(c);return a}),lt:g(function(a,b,c){for(b=0>c?c+b:c>b?b:c;0<=--b;)a.push(b);
return a}),gt:g(function(a,b,c){for(c=0>c?c+b:c;++c<b;)a.push(c);return a})}};M.pseudos.nth=M.pseudos.eq;for(z in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})M.pseudos[z]=e(z);for(z in{submit:!0,reset:!0})M.pseudos[z]=f(z);m.prototype=M.filters=M.pseudos;M.setFilters=new m;var Ha=b.tokenize=function(a,c){var l,d,n,p,e;if(p=Eb[a+" "])return c?0:p.slice(0);p=a;var w=[];for(e=M.preFilter;p;){if(!f||(l=sa.exec(p)))l&&(p=p.slice(l[0].length)||p),w.push(d=[]);var f=!1;if(l=Da.exec(p))f=l.shift(),
d.push({value:f,type:l[0].replace(mb," ")}),p=p.slice(f.length);for(n in M.filter)!(l=H[n].exec(p))||e[n]&&!(l=e[n](l))||(f=l.shift(),d.push({value:f,type:n,matches:l}),p=p.slice(f.length));if(!f)break}return c?p.length:p?b.error(a):Eb(a,w).slice(0)};var ea=b.compile=function(a,b){var c,l=[],d=[],n=ua[a+" "];if(!n){b||(b=Ha(a));for(c=b.length;c--;)n=ka(b[c]),n[u]?l.push(n):d.push(n);n=ua(a,x(d,l));n.selector=a}return n};var za=b.select=function(a,b,c,l){var d,n,p,e="function"===typeof a&&a,w=!l&&
Ha(a=e.selector||a);c=c||[];if(1===w.length){var f=w[0]=w[0].slice(0);if(2<f.length&&"ID"===(n=f[0]).type&&9===b.nodeType&&ja&&M.relative[f[1].type]){b=(M.find.ID(n.matches[0].replace(db,Ja),b)||[])[0];if(!b)return c;e&&(b=b.parentNode);a=a.slice(f.shift().value.length)}for(d=H.needsContext.test(a)?0:f.length;d--;){n=f[d];if(M.relative[p=n.type])break;if(p=M.find[p])if(l=p(n.matches[0].replace(db,Ja),lb.test(f[0].type)&&h(b.parentNode)||b)){f.splice(d,1);a=l.length&&q(f);if(!a)return nb.apply(c,l),
c;break}}}(e||ea(a,w))(l,b,!ja,c,!b||lb.test(a)&&h(b.parentNode)||b);return c};P.sortStable=u.split("").sort(B).join("")===u;P.detectDuplicates=!!Q;V();P.sortDetached=d(function(a){return a.compareDocumentPosition(k.createElement("fieldset"))&1});d(function(a){a.innerHTML="<a href='#'></a>";return"#"===a.firstChild.getAttribute("href")})||n("type|href|height|width",function(a,b,c){if(!c)return a.getAttribute(b,"type"===b.toLowerCase()?1:2)});P.attributes&&d(function(a){a.innerHTML="<input/>";a.firstChild.setAttribute("value",
"");return""===a.firstChild.getAttribute("value")})||n("value",function(a,b,c){if(!c&&"input"===a.nodeName.toLowerCase())return a.defaultValue});d(function(a){return null==a.getAttribute("disabled")})||n("checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",function(a,b,c){var l;if(!c)return!0===a[b]?b.toLowerCase():(l=a.getAttributeNode(b))&&l.specified?l.value:null});return b}(a);g.find=Ta;g.expr=Ta.selectors;g.expr[":"]=g.expr.pseudos;
g.uniqueSort=g.unique=Ta.uniqueSort;g.text=Ta.getText;g.isXMLDoc=Ta.isXML;g.contains=Ta.contains;g.escapeSelector=Ta.escape;var qa=function(a,b,c){for(var l=[],d=void 0!==c;(a=a[b])&&9!==a.nodeType;)if(1===a.nodeType){if(d&&g(a).is(c))break;l.push(a)}return l},ib=function(a,b){for(var c=[];a;a=a.nextSibling)1===a.nodeType&&a!==b&&c.push(a);return c},jb=g.expr.match.needsContext,ub=/^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i;g.filter=function(a,b,c){var l=b[0];c&&(a=":not("+a+
")");return 1===b.length&&1===l.nodeType?g.find.matchesSelector(l,a)?[l]:[]:g.find.matches(a,g.grep(b,function(a){return 1===a.nodeType}))};g.fn.extend({find:function(a){var b,c=this.length,l=this;if("string"!==typeof a)return this.pushStack(g(a).filter(function(){for(b=0;b<c;b++)if(g.contains(l[b],this))return!0}));var d=this.pushStack([]);for(b=0;b<c;b++)g.find(a,l[b],d);return 1<c?g.uniqueSort(d):d},filter:function(a){return this.pushStack(z(this,a||[],!1))},not:function(a){return this.pushStack(z(this,
a||[],!0))},is:function(a){return!!z(this,"string"===typeof a&&jb.test(a)?g(a):a||[],!1).length}});var pb=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/;(g.fn.init=function(a,b,c){if(!a)return this;c=c||Ka;if("string"===typeof a){var l="<"===a[0]&&">"===a[a.length-1]&&3<=a.length?[null,a,null]:pb.exec(a);if(!l||!l[1]&&b)return!b||b.jquery?(b||c).find(a):this.constructor(b).find(a);if(l[1]){if(b=b instanceof g?b[0]:b,g.merge(this,g.parseHTML(l[1],b&&b.nodeType?b.ownerDocument||b:X,!0)),ub.test(l[1])&&g.isPlainObject(b))for(l in b)if(V(this[l]))this[l](b[l]);
else this.attr(l,b[l])}else if(a=X.getElementById(l[2]))this[0]=a,this.length=1;return this}return a.nodeType?(this[0]=a,this.length=1,this):V(a)?void 0!==c.ready?c.ready(a):a(g):g.makeArray(a,this)}).prototype=g.fn;var Ka=g(X);var kb=/^(?:parents|prev(?:Until|All))/,qb={children:!0,contents:!0,next:!0,prev:!0};g.fn.extend({has:function(a){var b=g(a,this),c=b.length;return this.filter(function(){for(var a=0;a<c;a++)if(g.contains(this,b[a]))return!0})},closest:function(a,b){var c,l=0,d=this.length,
n=[],p="string"!==typeof a&&g(a);if(!jb.test(a))for(;l<d;l++)for(c=this[l];c&&c!==b;c=c.parentNode)if(11>c.nodeType&&(p?-1<p.index(c):1===c.nodeType&&g.find.matchesSelector(c,a))){n.push(c);break}return this.pushStack(1<n.length?g.uniqueSort(n):n)},index:function(a){return a?"string"===typeof a?M.call(g(a),this[0]):M.call(this,a.jquery?a[0]:a):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(a,b){return this.pushStack(g.uniqueSort(g.merge(this.get(),g(a,b))))},addBack:function(a){return this.add(null==
a?this.prevObject:this.prevObject.filter(a))}});g.each({parent:function(a){return(a=a.parentNode)&&11!==a.nodeType?a:null},parents:function(a){return qa(a,"parentNode")},parentsUntil:function(a,b,c){return qa(a,"parentNode",c)},next:function(a){return h(a,"nextSibling")},prev:function(a){return h(a,"previousSibling")},nextAll:function(a){return qa(a,"nextSibling")},prevAll:function(a){return qa(a,"previousSibling")},nextUntil:function(a,b,c){return qa(a,"nextSibling",c)},prevUntil:function(a,b,c){return qa(a,
"previousSibling",c)},siblings:function(a){return ib((a.parentNode||{}).firstChild,a)},children:function(a){return ib(a.firstChild)},contents:function(a){if("undefined"!==typeof a.contentDocument)return a.contentDocument;x(a,"template")&&(a=a.content||a);return g.merge([],a.childNodes)}},function(a,b){g.fn[a]=function(c,l){var d=g.map(this,b,c);"Until"!==a.slice(-5)&&(l=c);l&&"string"===typeof l&&(d=g.filter(l,d));1<this.length&&(qb[a]||g.uniqueSort(d),kb.test(a)&&d.reverse());return this.pushStack(d)}});
var xa=/[^\x20\t\r\n\f]+/g;g.Callbacks=function(a){a="string"===typeof a?A(a):g.extend({},a);var b,c,l,d,n=[],p=[],e=-1,f=function(){d=d||a.once;for(l=b=!0;p.length;e=-1)for(c=p.shift();++e<n.length;)!1===n[e].apply(c[0],c[1])&&a.stopOnFalse&&(e=n.length,c=!1);a.memory||(c=!1);b=!1;d&&(n=c?[]:"")},E={add:function(){n&&(c&&!b&&(e=n.length-1,p.push(c)),function hc(b){g.each(b,function(b,c){V(c)?a.unique&&E.has(c)||n.push(c):c&&c.length&&"string"!==m(c)&&hc(c)})}(arguments),c&&!b&&f());return this},
remove:function(){g.each(arguments,function(a,b){for(var c;-1<(c=g.inArray(b,n,c));)n.splice(c,1),c<=e&&e--});return this},has:function(a){return a?-1<g.inArray(a,n):0<n.length},empty:function(){n&&(n=[]);return this},disable:function(){d=p=[];n=c="";return this},disabled:function(){return!n},lock:function(){d=p=[];c||b||(n=c="");return this},locked:function(){return!!d},fireWith:function(a,c){d||(c=c||[],c=[a,c.slice?c.slice():c],p.push(c),b||f());return this},fire:function(){E.fireWith(this,arguments);
return this},fired:function(){return!!l}};return E};g.extend({Deferred:function(b){var c=[["notify","progress",g.Callbacks("memory"),g.Callbacks("memory"),2],["resolve","done",g.Callbacks("once memory"),g.Callbacks("once memory"),0,"resolved"],["reject","fail",g.Callbacks("once memory"),g.Callbacks("once memory"),1,"rejected"]],l="pending",d={state:function(){return l},always:function(){n.done(arguments).fail(arguments);return this},"catch":function(a){return d.then(null,a)},pipe:function(){var a=
arguments;return g.Deferred(function(b){g.each(c,function(c,l){var d=V(a[l[4]])&&a[l[4]];n[l[1]](function(){var a=d&&d.apply(this,arguments);if(a&&V(a.promise))a.promise().progress(b.notify).done(b.resolve).fail(b.reject);else b[l[0]+"With"](this,d?[a]:arguments)})});a=null}).promise()},then:function(b,l,d){function n(b,c,l,d){return function(){var e=this,f=arguments,w=function(){if(!(b<p)){var a=l.apply(e,f);if(a===c.promise())throw new TypeError("Thenable self-resolution");var w=a&&("object"===
typeof a||"function"===typeof a)&&a.then;V(w)?d?w.call(a,n(p,c,v,d),n(p,c,N,d)):(p++,w.call(a,n(p,c,v,d),n(p,c,N,d),n(p,c,v,c.notifyWith))):(l!==v&&(e=void 0,f=[a]),(d||c.resolveWith)(e,f))}},E=d?w:function(){try{w()}catch(cc){g.Deferred.exceptionHook&&g.Deferred.exceptionHook(cc,E.stackTrace),b+1>=p&&(l!==N&&(e=void 0,f=[cc]),c.rejectWith(e,f))}};b?E():(g.Deferred.getStackHook&&(E.stackTrace=g.Deferred.getStackHook()),a.setTimeout(E))}}var p=0;return g.Deferred(function(a){c[0][3].add(n(0,a,V(d)?
d:v,a.notifyWith));c[1][3].add(n(0,a,V(b)?b:v));c[2][3].add(n(0,a,V(l)?l:N))}).promise()},promise:function(a){return null!=a?g.extend(a,d):d}},n={};g.each(c,function(a,b){var p=b[2],e=b[5];d[b[1]]=p.add;e&&p.add(function(){l=e},c[3-a][2].disable,c[3-a][3].disable,c[0][2].lock,c[0][3].lock);p.add(b[3].fire);n[b[0]]=function(){n[b[0]+"With"](this===n?void 0:this,arguments);return this};n[b[0]+"With"]=p.fireWith});d.promise(n);b&&b.call(n,n);return n},when:function(a){var b=arguments.length,c=b,l=Array(c),
d=Oa.call(arguments),n=g.Deferred(),p=function(a){return function(c){l[a]=this;d[a]=1<arguments.length?Oa.call(arguments):c;--b||n.resolveWith(l,d)}};if(1>=b&&(K(a,n.done(p(c)).resolve,n.reject,!b),"pending"===n.state()||V(d[c]&&d[c].then)))return n.then();for(;c--;)K(d[c],p(c),n.reject);return n.promise()}});var wb=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;g.Deferred.exceptionHook=function(b,c){a.console&&a.console.warn&&b&&wb.test(b.name)&&a.console.warn("jQuery.Deferred exception: "+
b.message,b.stack,c)};g.readyException=function(b){a.setTimeout(function(){throw b;})};var Ua=g.Deferred();g.fn.ready=function(a){Ua.then(a).catch(function(a){g.readyException(a)});return this};g.extend({isReady:!1,readyWait:1,ready:function(a){(!0===a?--g.readyWait:g.isReady)||(g.isReady=!0,!0!==a&&0<--g.readyWait||Ua.resolveWith(X,[g]))}});g.ready.then=Ua.then;"complete"===X.readyState||"loading"!==X.readyState&&!X.documentElement.doScroll?a.setTimeout(g.ready):(X.addEventListener("DOMContentLoaded",
L),a.addEventListener("load",L));var ra=function(a,b,c,d,n,p,e){var l=0,f=a.length,w=null==c;if("object"===m(c))for(l in n=!0,c)ra(a,b,l,c[l],!0,p,e);else if(void 0!==d&&(n=!0,V(d)||(e=!0),w&&(e?(b.call(a,d),b=null):(w=b,b=function(a,b,c){return w.call(g(a),c)})),b))for(;l<f;l++)b(a[l],c,e?d:d.call(a[l],l,b(a[l],c)));return n?a:w?b.call(a):f?b(a[0],c):p},$a=/^-ms-/,Xa=/-([a-z])/g,Ya=function(a){return 1===a.nodeType||9===a.nodeType||!+a.nodeType};S.uid=1;S.prototype={cache:function(a){var b=a[this.expando];
b||(b={},Ya(a)&&(a.nodeType?a[this.expando]=b:Object.defineProperty(a,this.expando,{value:b,configurable:!0})));return b},set:function(a,b,c){var l;a=this.cache(a);if("string"===typeof b)a[F(b)]=c;else for(l in b)a[F(l)]=b[l];return a},get:function(a,b){return void 0===b?this.cache(a):a[this.expando]&&a[this.expando][F(b)]},access:function(a,b,c){if(void 0===b||b&&"string"===typeof b&&void 0===c)return this.get(a,b);this.set(a,b,c);return void 0!==c?c:b},remove:function(a,b){var c,l=a[this.expando];
if(void 0!==l){if(void 0!==b)for(Array.isArray(b)?b=b.map(F):(b=F(b),b=b in l?[b]:b.match(xa)||[]),c=b.length;c--;)delete l[b[c]];if(void 0===b||g.isEmptyObject(l))a.nodeType?a[this.expando]=void 0:delete a[this.expando]}},hasData:function(a){a=a[this.expando];return void 0!==a&&!g.isEmptyObject(a)}};var W=new S,Ca=new S,La=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,xb=/[A-Z]/g;g.extend({hasData:function(a){return Ca.hasData(a)||W.hasData(a)},data:function(a,b,c){return Ca.access(a,b,c)},removeData:function(a,
b){Ca.remove(a,b)},_data:function(a,b,c){return W.access(a,b,c)},_removeData:function(a,b){W.remove(a,b)}});g.fn.extend({data:function(a,b){var c,l=this[0],d=l&&l.attributes;if(void 0===a){if(this.length){var n=Ca.get(l);if(1===l.nodeType&&!W.get(l,"hasDataAttrs")){for(c=d.length;c--;)if(d[c]){var p=d[c].name;0===p.indexOf("data-")&&(p=F(p.slice(5)),B(l,p,n[p]))}W.set(l,"hasDataAttrs",!0)}}return n}return"object"===typeof a?this.each(function(){Ca.set(this,a)}):ra(this,function(b){if(l&&void 0===
b){var c=Ca.get(l,a);if(void 0!==c)return c;c=B(l,a);if(void 0!==c)return c}else this.each(function(){Ca.set(this,a,b)})},null,b,1<arguments.length,null,!0)},removeData:function(a){return this.each(function(){Ca.remove(this,a)})}});g.extend({queue:function(a,b,c){if(a){b=(b||"fx")+"queue";var l=W.get(a,b);c&&(!l||Array.isArray(c)?l=W.access(a,b,g.makeArray(c)):l.push(c));return l||[]}},dequeue:function(a,b){b=b||"fx";var c=g.queue(a,b),l=c.length,d=c.shift(),n=g._queueHooks(a,b),p=function(){g.dequeue(a,
b)};"inprogress"===d&&(d=c.shift(),l--);d&&("fx"===b&&c.unshift("inprogress"),delete n.stop,d.call(a,p,n));!l&&n&&n.empty.fire()},_queueHooks:function(a,b){var c=b+"queueHooks";return W.get(a,c)||W.access(a,c,{empty:g.Callbacks("once memory").add(function(){W.remove(a,[b+"queue",c])})})}});g.fn.extend({queue:function(a,b){var c=2;"string"!==typeof a&&(b=a,a="fx",c--);return arguments.length<c?g.queue(this[0],a):void 0===b?this:this.each(function(){var c=g.queue(this,a,b);g._queueHooks(this,a);"fx"===
a&&"inprogress"!==c[0]&&g.dequeue(this,a)})},dequeue:function(a){return this.each(function(){g.dequeue(this,a)})},clearQueue:function(a){return this.queue(a||"fx",[])},promise:function(a,b){var c,l=1,d=g.Deferred(),n=this,p=this.length,e=function(){--l||d.resolveWith(n,[n])};"string"!==typeof a&&(b=a,a=void 0);for(a=a||"fx";p--;)(c=W.get(n[p],a+"queueHooks"))&&c.empty&&(l++,c.empty.add(e));e();return d.promise(b)}});var Wa=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,Ma=new RegExp("^(?:([+-])=|)("+
Wa+")([a-z%]*)$","i"),Ra=["Top","Right","Bottom","Left"],Ga=X.documentElement,p=function(a){return g.contains(a.ownerDocument,a)},ya={composed:!0};Ga.getRootNode&&(p=function(a){return g.contains(a.ownerDocument,a)||a.getRootNode(ya)===a.ownerDocument});var ja=function(a,b){a=b||a;return"none"===a.style.display||""===a.style.display&&p(a)&&"none"===g.css(a,"display")},ia=function(a,b,c,d){var l,n={};for(l in b)n[l]=a.style[l],a.style[l]=b[l];c=c.apply(a,d||[]);for(l in b)a.style[l]=n[l];return c},
Va={};g.fn.extend({show:function(){return J(this,!0)},hide:function(){return J(this)},toggle:function(a){return"boolean"===typeof a?a?this.show():this.hide():this.each(function(){ja(this)?g(this).show():g(this).hide()})}});var bb=/^(?:checkbox|radio)$/i,Da=/<([a-z][^\/\0>\x20\t\r\n\f]*)/i,mb=/^$|^module$|\/(?:java|ecma)script/i,sa={option:[1,"<select multiple='multiple'>","</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],
td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};sa.optgroup=sa.option;sa.tbody=sa.tfoot=sa.colgroup=sa.caption=sa.thead;sa.th=sa.td;var lb=/<|&#?\w+;/;(function(){var a=X.createDocumentFragment().appendChild(X.createElement("div")),b=X.createElement("input");b.setAttribute("type","radio");b.setAttribute("checked","checked");b.setAttribute("name","t");a.appendChild(b);ha.checkClone=a.cloneNode(!0).cloneNode(!0).lastChild.checked;a.innerHTML="<textarea>x</textarea>";ha.noCloneChecked=
!!a.cloneNode(!0).lastChild.defaultValue})();var zb=/^key/,Ab=/^(?:mouse|pointer|contextmenu|drag|drop)|click/,Ja=/^([^.]*)(?:\.(.+)|)/;g.event={global:{},add:function(a,b,c,d,n){var l,p,e,f,E;if(e=W.get(a)){if(c.handler){var w=c;c=w.handler;n=w.selector}n&&g.find.matchesSelector(Ga,n);c.guid||(c.guid=g.guid++);(p=e.events)||(p=e.events={});(l=e.handle)||(l=e.handle=function(b){return"undefined"!==typeof g&&g.event.triggered!==b.type?g.event.dispatch.apply(a,arguments):void 0});b=(b||"").match(xa)||
[""];for(e=b.length;e--;){var h=Ja.exec(b[e])||[];var q=f=h[1];var m=(h[2]||"").split(".").sort();q&&(h=g.event.special[q]||{},q=(n?h.delegateType:h.bindType)||q,h=g.event.special[q]||{},f=g.extend({type:q,origType:f,data:d,handler:c,guid:c.guid,selector:n,needsContext:n&&g.expr.match.needsContext.test(n),namespace:m.join(".")},w),(E=p[q])||(E=p[q]=[],E.delegateCount=0,h.setup&&!1!==h.setup.call(a,d,m,l)||a.addEventListener&&a.addEventListener(q,l)),h.add&&(h.add.call(a,f),f.handler.guid||(f.handler.guid=
c.guid)),n?E.splice(E.delegateCount++,0,f):E.push(f),g.event.global[q]=!0)}}},remove:function(a,b,c,d,n){var l,p,e,f,E,w=W.hasData(a)&&W.get(a);if(w&&(e=w.events)){b=(b||"").match(xa)||[""];for(f=b.length;f--;){var h=Ja.exec(b[f])||[];var q=E=h[1];var m=(h[2]||"").split(".").sort();if(q){var t=g.event.special[q]||{};q=(d?t.delegateType:t.bindType)||q;var A=e[q]||[];h=h[2]&&new RegExp("(^|\\.)"+m.join("\\.(?:.*\\.|)")+"(\\.|$)");for(p=l=A.length;l--;){var r=A[l];!n&&E!==r.origType||c&&c.guid!==r.guid||
h&&!h.test(r.namespace)||d&&d!==r.selector&&("**"!==d||!r.selector)||(A.splice(l,1),r.selector&&A.delegateCount--,t.remove&&t.remove.call(a,r))}p&&!A.length&&(t.teardown&&!1!==t.teardown.call(a,m,w.handle)||g.removeEvent(a,q,w.handle),delete e[q])}else for(q in e)g.event.remove(a,q+b[f],c,d,!0)}g.isEmptyObject(e)&&W.remove(a,"handle events")}},dispatch:function(a){var b=g.event.fix(a),c,l,d,n=Array(arguments.length);var p=(W.get(this,"events")||{})[b.type]||[];var e=g.event.special[b.type]||{};n[0]=
b;for(c=1;c<arguments.length;c++)n[c]=arguments[c];b.delegateTarget=this;if(!e.preDispatch||!1!==e.preDispatch.call(this,b)){var f=g.event.handlers.call(this,b,p);for(c=0;(d=f[c++])&&!b.isPropagationStopped();)for(b.currentTarget=d.elem,p=0;(l=d.handlers[p++])&&!b.isImmediatePropagationStopped();)if(!b.rnamespace||!1===l.namespace||b.rnamespace.test(l.namespace))b.handleObj=l,b.data=l.data,l=((g.event.special[l.origType]||{}).handle||l.handler).apply(d.elem,n),void 0!==l&&!1===(b.result=l)&&(b.preventDefault(),
b.stopPropagation());e.postDispatch&&e.postDispatch.call(this,b);return b.result}},handlers:function(a,b){var c,l=[],d=b.delegateCount,n=a.target;if(d&&n.nodeType&&!("click"===a.type&&1<=a.button))for(;n!==this;n=n.parentNode||this)if(1===n.nodeType&&("click"!==a.type||!0!==n.disabled)){var p=[];var e={};for(c=0;c<d;c++){var f=b[c];var E=f.selector+" ";void 0===e[E]&&(e[E]=f.needsContext?-1<g(E,this).index(n):g.find(E,this,null,[n]).length);e[E]&&p.push(f)}p.length&&l.push({elem:n,handlers:p})}d<
b.length&&l.push({elem:this,handlers:b.slice(d)});return l},addProp:function(a,b){Object.defineProperty(g.Event.prototype,a,{enumerable:!0,configurable:!0,get:V(b)?function(){if(this.originalEvent)return b(this.originalEvent)}:function(){if(this.originalEvent)return this.originalEvent[a]},set:function(b){Object.defineProperty(this,a,{enumerable:!0,configurable:!0,writable:!0,value:b})}})},fix:function(a){return a[g.expando]?a:new g.Event(a)},special:{load:{noBubble:!0},click:{setup:function(a){a=
this||a;bb.test(a.type)&&a.click&&x(a,"input")&&Y(a,"click",Q);return!1},trigger:function(a){a=this||a;bb.test(a.type)&&a.click&&x(a,"input")&&Y(a,"click");return!0},_default:function(a){a=a.target;return bb.test(a.type)&&a.click&&x(a,"input")&&W.get(a,"click")||x(a,"a")}},beforeunload:{postDispatch:function(a){void 0!==a.result&&a.originalEvent&&(a.originalEvent.returnValue=a.result)}}}};g.removeEvent=function(a,b,c){a.removeEventListener&&a.removeEventListener(b,c)};g.Event=function(a,b){if(!(this instanceof
g.Event))return new g.Event(a,b);a&&a.type?(this.originalEvent=a,this.type=a.type,this.isDefaultPrevented=a.defaultPrevented||void 0===a.defaultPrevented&&!1===a.returnValue?Q:U,this.target=a.target&&3===a.target.nodeType?a.target.parentNode:a.target,this.currentTarget=a.currentTarget,this.relatedTarget=a.relatedTarget):this.type=a;b&&g.extend(this,b);this.timeStamp=a&&a.timeStamp||Date.now();this[g.expando]=!0};g.Event.prototype={constructor:g.Event,isDefaultPrevented:U,isPropagationStopped:U,isImmediatePropagationStopped:U,
isSimulated:!1,preventDefault:function(){var a=this.originalEvent;this.isDefaultPrevented=Q;a&&!this.isSimulated&&a.preventDefault()},stopPropagation:function(){var a=this.originalEvent;this.isPropagationStopped=Q;a&&!this.isSimulated&&a.stopPropagation()},stopImmediatePropagation:function(){var a=this.originalEvent;this.isImmediatePropagationStopped=Q;a&&!this.isSimulated&&a.stopImmediatePropagation();this.stopPropagation()}};g.each({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,
detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,view:!0,"char":!0,code:!0,charCode:!0,key:!0,keyCode:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,which:function(a){var b=a.button;return null==a.which&&zb.test(a.type)?null!=a.charCode?a.charCode:a.keyCode:!a.which&&void 0!==b&&Ab.test(a.type)?b&1?1:b&2?3:b&4?2:0:a.which}},g.event.addProp);g.each({focus:"focusin",blur:"focusout"},
function(a,b){g.event.special[a]={setup:function(){Y(this,a,aa);return!1},trigger:function(){Y(this,a);return!0},delegateType:b}});g.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(a,b){g.event.special[a]={delegateType:b,bindType:b,handle:function(a){var c=a.relatedTarget,d=a.handleObj;if(!c||c!==this&&!g.contains(this,c)){a.type=d.origType;var l=d.handler.apply(this,arguments);a.type=b}return l}}});g.fn.extend({on:function(a,b,c,d){return G(this,
a,b,c,d)},one:function(a,b,c,d){return G(this,a,b,c,d,1)},off:function(a,b,c){if(a&&a.preventDefault&&a.handleObj){var d=a.handleObj;g(a.delegateTarget).off(d.namespace?d.origType+"."+d.namespace:d.origType,d.selector,d.handler);return this}if("object"===typeof a){for(d in a)this.off(d,b,a[d]);return this}if(!1===b||"function"===typeof b)c=b,b=void 0;!1===c&&(c=U);return this.each(function(){g.event.remove(this,a,c,b)})}});var Bb=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([a-z][^\/\0>\x20\t\r\n\f]*)[^>]*)\/>/gi,
Kb=/<script|<style|<link/i,Ib=/checked\s*(?:[^=]|=\s*.checked.)/i,Ob=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g;g.extend({htmlPrefilter:function(a){return a.replace(Bb,"<$1></$2>")},clone:function(a,b,c){var d,l=a.cloneNode(!0),n=p(a);if(!(ha.noCloneChecked||1!==a.nodeType&&11!==a.nodeType||g.isXMLDoc(a))){var e=ca(l);var f=ca(a);var E=0;for(d=f.length;E<d;E++){var h=f[E],w=e[E],q=w.nodeName.toLowerCase();if("input"===q&&bb.test(h.type))w.checked=h.checked;else if("input"===q||"textarea"===q)w.defaultValue=
h.defaultValue}}if(b)if(c)for(f=f||ca(a),e=e||ca(l),E=0,d=f.length;E<d;E++)C(f[E],e[E]);else C(a,l);e=ca(l,"script");0<e.length&&T(e,!n&&ca(a,"script"));return l},cleanData:function(a){for(var b,c,d,l=g.event.special,n=0;void 0!==(c=a[n]);n++)if(Ya(c)){if(b=c[W.expando]){if(b.events)for(d in b.events)l[d]?g.event.remove(c,d):g.removeEvent(c,d,b.handle);c[W.expando]=void 0}c[Ca.expando]&&(c[Ca.expando]=void 0)}}});g.fn.extend({detach:function(a){return R(this,a,!0)},remove:function(a){return R(this,
a)},text:function(a){return ra(this,function(a){return void 0===a?g.text(this):this.empty().each(function(){if(1===this.nodeType||11===this.nodeType||9===this.nodeType)this.textContent=a})},null,a,arguments.length)},append:function(){return Z(this,arguments,function(a){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||ua(this,a).appendChild(a)})},prepend:function(){return Z(this,arguments,function(a){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var b=ua(this,a);b.insertBefore(a,
b.firstChild)}})},before:function(){return Z(this,arguments,function(a){this.parentNode&&this.parentNode.insertBefore(a,this)})},after:function(){return Z(this,arguments,function(a){this.parentNode&&this.parentNode.insertBefore(a,this.nextSibling)})},empty:function(){for(var a,b=0;null!=(a=this[b]);b++)1===a.nodeType&&(g.cleanData(ca(a,!1)),a.textContent="");return this},clone:function(a,b){a=null==a?!1:a;b=null==b?a:b;return this.map(function(){return g.clone(this,a,b)})},html:function(a){return ra(this,
function(a){var b=this[0]||{},c=0,d=this.length;if(void 0===a&&1===b.nodeType)return b.innerHTML;if("string"===typeof a&&!Kb.test(a)&&!sa[(Da.exec(a)||["",""])[1].toLowerCase()]){a=g.htmlPrefilter(a);try{for(;c<d;c++)b=this[c]||{},1===b.nodeType&&(g.cleanData(ca(b,!1)),b.innerHTML=a);b=0}catch(bc){}}b&&this.empty().append(a)},null,a,arguments.length)},replaceWith:function(){var a=[];return Z(this,arguments,function(b){var c=this.parentNode;0>g.inArray(this,a)&&(g.cleanData(ca(this)),c&&c.replaceChild(b,
this))},a)}});g.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(a,b){g.fn[a]=function(a){for(var c=[],d=g(a),n=d.length-1,l=0;l<=n;l++)a=l===n?this:this.clone(!0),g(d[l])[b](a),I.apply(c,a.get());return this.pushStack(c)}});var Fb=new RegExp("^("+Wa+")(?!px)[a-z%]+$","i"),rb=function(b){var c=b.ownerDocument.defaultView;c&&c.opener||(c=a);return c.getComputedStyle(b)},ab=new RegExp(Ra.join("|"),"i");(function(){function b(){if(E){f.style.cssText=
"position:absolute;left:-11111px;width:60px;margin-top:1px;padding:0;border:0";E.style.cssText="position:relative;display:block;box-sizing:border-box;overflow:scroll;margin:auto;border:1px;padding:1px;width:60%;top:1%";Ga.appendChild(f).appendChild(E);var b=a.getComputedStyle(E);c="1%"!==b.top;e=12===Math.round(parseFloat(b.marginLeft));E.style.right="60%";p=36===Math.round(parseFloat(b.right));d=36===Math.round(parseFloat(b.width));E.style.position="absolute";n=12===Math.round(parseFloat(E.offsetWidth/
3));Ga.removeChild(f);E=null}}var c,d,n,p,e,f=X.createElement("div"),E=X.createElement("div");E.style&&(E.style.backgroundClip="content-box",E.cloneNode(!0).style.backgroundClip="",ha.clearCloneStyle="content-box"===E.style.backgroundClip,g.extend(ha,{boxSizingReliable:function(){b();return d},pixelBoxStyles:function(){b();return p},pixelPosition:function(){b();return c},reliableMarginLeft:function(){b();return e},scrollboxSize:function(){b();return n}}))})();var Jb=["Webkit","Moz","ms"],Gb=X.createElement("div").style,
Pb={},Lb=/^(none|table(?!-c[ea]).+)/,Qb=/^--/,Vb={position:"absolute",visibility:"hidden",display:"block"},Hb={letterSpacing:"0",fontWeight:"400"};g.extend({cssHooks:{opacity:{get:function(a,b){if(b)return a=t(a,"opacity"),""===a?"1":a}}},cssNumber:{animationIterationCount:!0,columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,gridArea:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnStart:!0,gridRow:!0,gridRowEnd:!0,gridRowStart:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,
zIndex:!0,zoom:!0},cssProps:{},style:function(a,b,c,d){if(a&&3!==a.nodeType&&8!==a.nodeType&&a.style){var n,l=F(b),p=Qb.test(b),e=a.style;p||(b=Ha(l));var f=g.cssHooks[b]||g.cssHooks[l];if(void 0!==c){var E=typeof c;"string"===E&&(n=Ma.exec(c))&&n[1]&&(c=u(a,b,n),E="number");null!=c&&c===c&&("number"!==E||p||(c+=n&&n[3]||(g.cssNumber[l]?"":"px")),ha.clearCloneStyle||""!==c||0!==b.indexOf("background")||(e[b]="inherit"),f&&"set"in f&&void 0===(c=f.set(a,c,d))||(p?e.setProperty(b,c):e[b]=c))}else return f&&
"get"in f&&void 0!==(n=f.get(a,!1,d))?n:e[b]}},css:function(a,b,c,d){var n;var l=F(b);Qb.test(b)||(b=Ha(l));(l=g.cssHooks[b]||g.cssHooks[l])&&"get"in l&&(n=l.get(a,!0,c));void 0===n&&(n=t(a,b,d));"normal"===n&&b in Hb&&(n=Hb[b]);return""===c||c?(a=parseFloat(n),!0===c||isFinite(a)?a||0:n):n}});g.each(["height","width"],function(a,b){g.cssHooks[b]={get:function(a,c,d){if(c)return!Lb.test(g.css(a,"display"))||a.getClientRects().length&&a.getBoundingClientRect().width?ma(a,b,d):ia(a,Vb,function(){return ma(a,
b,d)})},set:function(a,c,d){var n,l=rb(a),p=!ha.scrollboxSize()&&"absolute"===l.position,e=(p||d)&&"border-box"===g.css(a,"boxSizing",!1,l);d=d?P(a,b,d,e,l):0;e&&p&&(d-=Math.ceil(a["offset"+b[0].toUpperCase()+b.slice(1)]-parseFloat(l[b])-P(a,b,"border",!1,l)-.5));d&&(n=Ma.exec(c))&&"px"!==(n[3]||"px")&&(a.style[b]=c,c=g.css(a,b));return za(a,c,d)}}});g.cssHooks.marginLeft=na(ha.reliableMarginLeft,function(a,b){if(b)return(parseFloat(t(a,"marginLeft"))||a.getBoundingClientRect().left-ia(a,{marginLeft:0},
function(){return a.getBoundingClientRect().left}))+"px"});g.each({margin:"",padding:"",border:"Width"},function(a,b){g.cssHooks[a+b]={expand:function(c){var d=0,n={};for(c="string"===typeof c?c.split(" "):[c];4>d;d++)n[a+Ra[d]+b]=c[d]||c[d-2]||c[0];return n}};"margin"!==a&&(g.cssHooks[a+b].set=za)});g.fn.extend({css:function(a,b){return ra(this,function(a,b,c){var d,n={},l=0;if(Array.isArray(b)){c=rb(a);for(d=b.length;l<d;l++)n[b[l]]=g.css(a,b[l],!1,c);return n}return void 0!==c?g.style(a,b,c):g.css(a,
b)},a,b,1<arguments.length)}});g.Tween=da;da.prototype={constructor:da,init:function(a,b,c,d,n,p){this.elem=a;this.prop=c;this.easing=n||g.easing._default;this.options=b;this.start=this.now=this.cur();this.end=d;this.unit=p||(g.cssNumber[c]?"":"px")},cur:function(){var a=da.propHooks[this.prop];return a&&a.get?a.get(this):da.propHooks._default.get(this)},run:function(a){var b,c=da.propHooks[this.prop];this.pos=this.options.duration?b=g.easing[this.easing](a,this.options.duration*a,0,1,this.options.duration):
b=a;this.now=(this.end-this.start)*b+this.start;this.options.step&&this.options.step.call(this.elem,this.now,this);c&&c.set?c.set(this):da.propHooks._default.set(this);return this}};da.prototype.init.prototype=da.prototype;da.propHooks={_default:{get:function(a){return 1!==a.elem.nodeType||null!=a.elem[a.prop]&&null==a.elem.style[a.prop]?a.elem[a.prop]:(a=g.css(a.elem,a.prop,""))&&"auto"!==a?a:0},set:function(a){if(g.fx.step[a.prop])g.fx.step[a.prop](a);else 1!==a.elem.nodeType||!g.cssHooks[a.prop]&&
null==a.elem.style[Ha(a.prop)]?a.elem[a.prop]=a.now:g.style(a.elem,a.prop,a.now+a.unit)}}};da.propHooks.scrollTop=da.propHooks.scrollLeft={set:function(a){a.elem.nodeType&&a.elem.parentNode&&(a.elem[a.prop]=a.now)}};g.easing={linear:function(a){return a},swing:function(a){return.5-Math.cos(a*Math.PI)/2},_default:"swing"};g.fx=da.prototype.init;g.fx.step={};var sb,yb,Wb=/^(?:toggle|show|hide)$/,Xb=/queueHooks$/;g.Animation=g.extend(pa,{tweeners:{"*":[function(a,b){var c=this.createTween(a,b);u(c.elem,
a,Ma.exec(b),c);return c}]},tweener:function(a,b){V(a)?(b=a,a=["*"]):a=a.match(xa);for(var c,d=0,n=a.length;d<n;d++)c=a[d],pa.tweeners[c]=pa.tweeners[c]||[],pa.tweeners[c].unshift(b)},prefilters:[function(a,b,c){var d;var n="width"in b||"height"in b;var p=this,l={},e=a.style,f=a.nodeType&&ja(a),E=W.get(a,"fxshow");if(!c.queue){var h=g._queueHooks(a,"fx");if(null==h.unqueued){h.unqueued=0;var q=h.empty.fire;h.empty.fire=function(){h.unqueued||q()}}h.unqueued++;p.always(function(){p.always(function(){h.unqueued--;
g.queue(a,"fx").length||h.empty.fire()})})}for(d in b){var m=b[d];if(Wb.test(m)){delete b[d];var t=t||"toggle"===m;if(m===(f?"hide":"show"))if("show"===m&&E&&void 0!==E[d])f=!0;else continue;l[d]=E&&E[d]||g.style(a,d)}}if((b=!g.isEmptyObject(b))||!g.isEmptyObject(l)){if(n&&1===a.nodeType){c.overflow=[e.overflow,e.overflowX,e.overflowY];var w=E&&E.display;null==w&&(w=W.get(a,"display"));n=g.css(a,"display");"none"===n&&(w?n=w:(J([a],!0),w=a.style.display||w,n=g.css(a,"display"),J([a])));("inline"===
n||"inline-block"===n&&null!=w)&&"none"===g.css(a,"float")&&(b||(p.done(function(){e.display=w}),null==w&&(n=e.display,w="none"===n?"":n)),e.display="inline-block")}c.overflow&&(e.overflow="hidden",p.always(function(){e.overflow=c.overflow[0];e.overflowX=c.overflow[1];e.overflowY=c.overflow[2]}));b=!1;for(d in l)b||(E?"hidden"in E&&(f=E.hidden):E=W.access(a,"fxshow",{display:w}),t&&(E.hidden=!f),f&&J([a],!0),p.done(function(){f||J([a]);W.remove(a,"fxshow");for(d in l)g.style(a,d,l[d])})),b=la(f?E[d]:
0,d,p),d in E||(E[d]=b.start,f&&(b.end=b.start,b.start=0))}}],prefilter:function(a,b){b?pa.prefilters.unshift(a):pa.prefilters.push(a)}});g.speed=function(a,b,c){var d=a&&"object"===typeof a?g.extend({},a):{complete:c||!c&&b||V(a)&&a,duration:a,easing:c&&b||b&&!V(b)&&b};g.fx.off?d.duration=0:"number"!==typeof d.duration&&(d.duration=d.duration in g.fx.speeds?g.fx.speeds[d.duration]:g.fx.speeds._default);if(null==d.queue||!0===d.queue)d.queue="fx";d.old=d.complete;d.complete=function(){V(d.old)&&d.old.call(this);
d.queue&&g.dequeue(this,d.queue)};return d};g.fn.extend({fadeTo:function(a,b,c,d){return this.filter(ja).css("opacity",0).show().end().animate({opacity:b},a,c,d)},animate:function(a,b,c,d){var n=g.isEmptyObject(a),p=g.speed(b,c,d);b=function(){var b=pa(this,g.extend({},a),p);(n||W.get(this,"finish"))&&b.stop(!0)};b.finish=b;return n||!1===p.queue?this.each(b):this.queue(p.queue,b)},stop:function(a,b,c){var d=function(a){var b=a.stop;delete a.stop;b(c)};"string"!==typeof a&&(c=b,b=a,a=void 0);b&&!1!==
a&&this.queue(a||"fx",[]);return this.each(function(){var b=!0,n=null!=a&&a+"queueHooks",p=g.timers,e=W.get(this);if(n)e[n]&&e[n].stop&&d(e[n]);else for(n in e)e[n]&&e[n].stop&&Xb.test(n)&&d(e[n]);for(n=p.length;n--;)p[n].elem!==this||null!=a&&p[n].queue!==a||(p[n].anim.stop(c),b=!1,p.splice(n,1));!b&&c||g.dequeue(this,a)})},finish:function(a){!1!==a&&(a=a||"fx");return this.each(function(){var b=W.get(this),c=b[a+"queue"];var d=b[a+"queueHooks"];var n=g.timers,p=c?c.length:0;b.finish=!0;g.queue(this,
a,[]);d&&d.stop&&d.stop.call(this,!0);for(d=n.length;d--;)n[d].elem===this&&n[d].queue===a&&(n[d].anim.stop(!0),n.splice(d,1));for(d=0;d<p;d++)c[d]&&c[d].finish&&c[d].finish.call(this);delete b.finish})}});g.each(["toggle","show","hide"],function(a,b){var c=g.fn[b];g.fn[b]=function(a,d,n){return null==a||"boolean"===typeof a?c.apply(this,arguments):this.animate(fa(b,!0),a,d,n)}});g.each({slideDown:fa("show"),slideUp:fa("hide"),slideToggle:fa("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},
fadeToggle:{opacity:"toggle"}},function(a,b){g.fn[a]=function(a,c,d){return this.animate(b,a,c,d)}});g.timers=[];g.fx.tick=function(){var a=0,b=g.timers;for(sb=Date.now();a<b.length;a++){var c=b[a];c()||b[a]!==c||b.splice(a--,1)}b.length||g.fx.stop();sb=void 0};g.fx.timer=function(a){g.timers.push(a);g.fx.start()};g.fx.interval=13;g.fx.start=function(){yb||(yb=!0,H())};g.fx.stop=function(){yb=null};g.fx.speeds={slow:600,fast:200,_default:400};g.fn.delay=function(b,c){b=g.fx?g.fx.speeds[b]||b:b;return this.queue(c||
"fx",function(c,d){var n=a.setTimeout(c,b);d.stop=function(){a.clearTimeout(n)}})};(function(){var a=X.createElement("input"),b=X.createElement("select").appendChild(X.createElement("option"));a.type="checkbox";ha.checkOn=""!==a.value;ha.optSelected=b.selected;a=X.createElement("input");a.value="t";a.type="radio";ha.radioValue="t"===a.value})();var Cb=g.expr.attrHandle;g.fn.extend({attr:function(a,b){return ra(this,g.attr,a,b,1<arguments.length)},removeAttr:function(a){return this.each(function(){g.removeAttr(this,
a)})}});g.extend({attr:function(a,b,c){var d,n,p=a.nodeType;if(3!==p&&8!==p&&2!==p){if("undefined"===typeof a.getAttribute)return g.prop(a,b,c);1===p&&g.isXMLDoc(a)||(n=g.attrHooks[b.toLowerCase()]||(g.expr.match.bool.test(b)?Yb:void 0));if(void 0!==c){if(null===c){g.removeAttr(a,b);return}if(n&&"set"in n&&void 0!==(d=n.set(a,c,b)))return d;a.setAttribute(b,c+"");return c}if(n&&"get"in n&&null!==(d=n.get(a,b)))return d;d=g.find.attr(a,b);return null==d?void 0:d}},attrHooks:{type:{set:function(a,b){if(!ha.radioValue&&
"radio"===b&&x(a,"input")){var c=a.value;a.setAttribute("type",b);c&&(a.value=c);return b}}}},removeAttr:function(a,b){var c=0,d=b&&b.match(xa);if(d&&1===a.nodeType)for(;b=d[c++];)a.removeAttribute(b)}});var Yb={set:function(a,b,c){!1===b?g.removeAttr(a,c):a.setAttribute(c,c);return c}};g.each(g.expr.match.bool.source.match(/\w+/g),function(a,b){var c=Cb[b]||g.find.attr;Cb[b]=function(a,b,d){var n=b.toLowerCase();if(!d){var p=Cb[n];Cb[n]=e;var e=null!=c(a,b,d)?n:null;Cb[n]=p}return e}});var Zb=/^(?:input|select|textarea|button)$/i,
Db=/^(?:a|area)$/i;g.fn.extend({prop:function(a,b){return ra(this,g.prop,a,b,1<arguments.length)},removeProp:function(a){return this.each(function(){delete this[g.propFix[a]||a]})}});g.extend({prop:function(a,b,c){var d,n=a.nodeType;if(3!==n&&8!==n&&2!==n){if(1!==n||!g.isXMLDoc(a)){b=g.propFix[b]||b;var p=g.propHooks[b]}return void 0!==c?p&&"set"in p&&void 0!==(d=p.set(a,c,b))?d:a[b]=c:p&&"get"in p&&null!==(d=p.get(a,b))?d:a[b]}},propHooks:{tabIndex:{get:function(a){var b=g.find.attr(a,"tabindex");
return b?parseInt(b,10):Zb.test(a.nodeName)||Db.test(a.nodeName)&&a.href?0:-1}}},propFix:{"for":"htmlFor","class":"className"}});ha.optSelected||(g.propHooks.selected={get:function(a){(a=a.parentNode)&&a.parentNode&&a.parentNode.selectedIndex;return null},set:function(a){if(a=a.parentNode)a.selectedIndex,a.parentNode&&a.parentNode.selectedIndex}});g.each("tabIndex readOnly maxLength cellSpacing cellPadding rowSpan colSpan useMap frameBorder contentEditable".split(" "),function(){g.propFix[this.toLowerCase()]=
this});g.fn.extend({addClass:function(a){var b,c,d,n,p=0;if(V(a))return this.each(function(b){g(this).addClass(a.call(this,b,ta(this)))});var e=oa(a);if(e.length)for(;b=this[p++];){var f=ta(b);if(c=1===b.nodeType&&" "+va(f)+" "){for(n=0;d=e[n++];)0>c.indexOf(" "+d+" ")&&(c+=d+" ");c=va(c);f!==c&&b.setAttribute("class",c)}}return this},removeClass:function(a){var b,c,d,n,p=0;if(V(a))return this.each(function(b){g(this).removeClass(a.call(this,b,ta(this)))});if(!arguments.length)return this.attr("class",
"");var e=oa(a);if(e.length)for(;b=this[p++];){var f=ta(b);if(c=1===b.nodeType&&" "+va(f)+" "){for(n=0;d=e[n++];)for(;-1<c.indexOf(" "+d+" ");)c=c.replace(" "+d+" "," ");c=va(c);f!==c&&b.setAttribute("class",c)}}return this},toggleClass:function(a,b){var c=typeof a,d="string"===c||Array.isArray(a);return"boolean"===typeof b&&d?b?this.addClass(a):this.removeClass(a):V(a)?this.each(function(c){g(this).toggleClass(a.call(this,c,ta(this),b),b)}):this.each(function(){var b,n;if(d){var p=0;var e=g(this);
for(n=oa(a);b=n[p++];)e.hasClass(b)?e.removeClass(b):e.addClass(b)}else if(void 0===a||"boolean"===c)(b=ta(this))&&W.set(this,"__className__",b),this.setAttribute&&this.setAttribute("class",b||!1===a?"":W.get(this,"__className__")||"")})},hasClass:function(a){var b,c=0;for(a=" "+a+" ";b=this[c++];)if(1===b.nodeType&&-1<(" "+va(ta(b))+" ").indexOf(a))return!0;return!1}});var cb=/\r/g;g.fn.extend({val:function(a){var b,c,d=this[0];if(arguments.length){var n=V(a);return this.each(function(c){1===this.nodeType&&
(c=n?a.call(this,c,g(this).val()):a,null==c?c="":"number"===typeof c?c+="":Array.isArray(c)&&(c=g.map(c,function(a){return null==a?"":a+""})),b=g.valHooks[this.type]||g.valHooks[this.nodeName.toLowerCase()],b&&"set"in b&&void 0!==b.set(this,c,"value")||(this.value=c))})}if(d){if((b=g.valHooks[d.type]||g.valHooks[d.nodeName.toLowerCase()])&&"get"in b&&void 0!==(c=b.get(d,"value")))return c;c=d.value;return"string"===typeof c?c.replace(cb,""):null==c?"":c}}});g.extend({valHooks:{option:{get:function(a){var b=
g.find.attr(a,"value");return null!=b?b:va(g.text(a))}},select:{get:function(a){var b=a.options,c=a.selectedIndex,d="select-one"===a.type,n=d?null:[],p=d?c+1:b.length;for(a=0>c?p:d?c:0;a<p;a++){var e=b[a];if(!(!e.selected&&a!==c||e.disabled||e.parentNode.disabled&&x(e.parentNode,"optgroup"))){e=g(e).val();if(d)return e;n.push(e)}}return n},set:function(a,b){for(var c,d=a.options,n=g.makeArray(b),p=d.length;p--;)if(b=d[p],b.selected=-1<g.inArray(g.valHooks.option.get(b),n))c=!0;c||(a.selectedIndex=
-1);return n}}}});g.each(["radio","checkbox"],function(){g.valHooks[this]={set:function(a,b){if(Array.isArray(b))return a.checked=-1<g.inArray(g(a).val(),b)}};ha.checkOn||(g.valHooks[this].get=function(a){return null===a.getAttribute("value")?"on":a.value})});ha.focusin="onfocusin"in a;var vb=/^(?:focusinfocus|focusoutblur)$/,n=function(a){a.stopPropagation()};g.extend(g.event,{trigger:function(b,c,d,p){var e,f,l,E=[d||X],h=Qa.call(b,"type")?b.type:b;var q=Qa.call(b,"namespace")?b.namespace.split("."):
[];var m=l=e=d=d||X;if(3!==d.nodeType&&8!==d.nodeType&&!vb.test(h+g.event.triggered)){-1<h.indexOf(".")&&(q=h.split("."),h=q.shift(),q.sort());var t=0>h.indexOf(":")&&"on"+h;b=b[g.expando]?b:new g.Event(h,"object"===typeof b&&b);b.isTrigger=p?2:3;b.namespace=q.join(".");b.rnamespace=b.namespace?new RegExp("(^|\\.)"+q.join("\\.(?:.*\\.|)")+"(\\.|$)"):null;b.result=void 0;b.target||(b.target=d);c=null==c?[b]:g.makeArray(c,[b]);q=g.event.special[h]||{};if(p||!q.trigger||!1!==q.trigger.apply(d,c)){if(!p&&
!q.noBubble&&!Ia(d)){var A=q.delegateType||h;vb.test(A+h)||(m=m.parentNode);for(;m;m=m.parentNode)E.push(m),e=m;e===(d.ownerDocument||X)&&E.push(e.defaultView||e.parentWindow||a)}for(e=0;(m=E[e++])&&!b.isPropagationStopped();)l=m,b.type=1<e?A:q.bindType||h,(f=(W.get(m,"events")||{})[b.type]&&W.get(m,"handle"))&&f.apply(m,c),(f=t&&m[t])&&f.apply&&Ya(m)&&(b.result=f.apply(m,c),!1===b.result&&b.preventDefault());b.type=h;p||b.isDefaultPrevented()||q._default&&!1!==q._default.apply(E.pop(),c)||!Ya(d)||
!t||!V(d[h])||Ia(d)||((e=d[t])&&(d[t]=null),g.event.triggered=h,b.isPropagationStopped()&&l.addEventListener(h,n),d[h](),b.isPropagationStopped()&&l.removeEventListener(h,n),g.event.triggered=void 0,e&&(d[t]=e));return b.result}}},simulate:function(a,b,c){a=g.extend(new g.Event,c,{type:a,isSimulated:!0});g.event.trigger(a,null,b)}});g.fn.extend({trigger:function(a,b){return this.each(function(){g.event.trigger(a,b,this)})},triggerHandler:function(a,b){var c=this[0];if(c)return g.event.trigger(a,b,
c,!0)}});ha.focusin||g.each({focus:"focusin",blur:"focusout"},function(a,b){var c=function(a){g.event.simulate(b,a.target,g.event.fix(a))};g.event.special[b]={setup:function(){var d=this.ownerDocument||this,n=W.access(d,b);n||d.addEventListener(a,c,!0);W.access(d,b,(n||0)+1)},teardown:function(){var d=this.ownerDocument||this,n=W.access(d,b)-1;n?W.access(d,b,n):(d.removeEventListener(a,c,!0),W.remove(d,b))}}});var E=a.location,ka=Date.now(),Eb=/\?/;g.parseXML=function(b){if(!b||"string"!==typeof b)return null;
try{var c=(new a.DOMParser).parseFromString(b,"text/xml")}catch(ba){c=void 0}c&&!c.getElementsByTagName("parsererror").length||g.error("Invalid XML: "+b);return c};var nb=/\[\]$/,Rb=/\r?\n/g,db=/^(?:submit|button|image|reset|file)$/i,Sb=/^(?:input|select|textarea|keygen)/i;g.param=function(a,b){var c,d=[],n=function(a,b){b=V(b)?b():b;d[d.length]=encodeURIComponent(a)+"="+encodeURIComponent(null==b?"":b)};if(null==a)return"";if(Array.isArray(a)||a.jquery&&!g.isPlainObject(a))g.each(a,function(){n(this.name,
this.value)});else for(c in a)wa(c,a[c],b,n);return d.join("&")};g.fn.extend({serialize:function(){return g.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var a=g.prop(this,"elements");return a?g.makeArray(a):this}).filter(function(){var a=this.type;return this.name&&!g(this).is(":disabled")&&Sb.test(this.nodeName)&&!db.test(a)&&(this.checked||!bb.test(a))}).map(function(a,b){a=g(this).val();return null==a?null:Array.isArray(a)?g.map(a,function(a){return{name:b.name,
value:a.replace(Rb,"\r\n")}}):{name:b.name,value:a.replace(Rb,"\r\n")}}).get()}});var jc=/%20/g,kc=/#.*$/,lc=/([?&])_=[^&]*/,mc=/^(.*?):[ \t]*([^\r\n]*)$/mg,nc=/^(?:GET|HEAD)$/,oc=/^\/\//,dc={},Tb={},ec="*/".concat("*"),$b=X.createElement("a");$b.href=E.href;g.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:E.href,type:"GET",isLocal:/^(?:about|app|app-storage|.+-extension|file|res|widget):$/.test(E.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",
accepts:{"*":ec,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":JSON.parse,"text xml":g.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(a,b){return b?ob(ob(a,g.ajaxSettings),b):ob(g.ajaxSettings,a)},ajaxPrefilter:fb(dc),ajaxTransport:fb(Tb),
ajax:function(b,c){function d(b,c,d,e){var E=c;if(!Q){Q=!0;f&&a.clearTimeout(f);n=void 0;p=e||"";D.readyState=0<b?4:0;e=200<=b&&300>b||304===b;if(d){var h=q;for(var ka=D,k,x,z,F,ja=h.contents,ia=h.dataTypes;"*"===ia[0];)ia.shift(),void 0===k&&(k=h.mimeType||ka.getResponseHeader("Content-Type"));if(k)for(x in ja)if(ja[x]&&ja[x].test(k)){ia.unshift(x);break}if(ia[0]in d)z=ia[0];else{for(x in d){if(!ia[0]||h.converters[x+" "+ia[0]]){z=x;break}F||(F=x)}z=z||F}z?(z!==ia[0]&&ia.unshift(z),h=d[z]):h=void 0}a:{d=
q;k=h;x=D;z=e;var y;ka={};ja=d.dataTypes.slice();if(ja[1])for(w in d.converters)ka[w.toLowerCase()]=d.converters[w];for(F=ja.shift();F;){d.responseFields[F]&&(x[d.responseFields[F]]=k);!U&&z&&d.dataFilter&&(k=d.dataFilter(k,d.dataType));var U=F;if(F=ja.shift())if("*"===F)F=U;else if("*"!==U&&U!==F){var w=ka[U+" "+F]||ka["* "+F];if(!w)for(y in ka)if(h=y.split(" "),h[1]===F&&(w=ka[U+" "+h[0]]||ka["* "+h[0]])){!0===w?w=ka[y]:!0!==ka[y]&&(F=h[0],ja.unshift(h[1]));break}if(!0!==w)if(w&&d.throws)k=w(k);
else try{k=w(k)}catch(ic){h={state:"parsererror",error:w?ic:"No conversion from "+U+" to "+F};break a}}}h={state:"success",data:k}}if(e)if(q.ifModified&&((E=D.getResponseHeader("Last-Modified"))&&(g.lastModified[ya]=E),(E=D.getResponseHeader("etag"))&&(g.etag[ya]=E)),204===b||"HEAD"===q.type)E="nocontent";else if(304===b)E="notmodified";else{E=h.state;var u=h.data;var L=h.error;e=!L}else if(L=E,b||!E)E="error",0>b&&(b=0);D.status=b;D.statusText=(c||E)+"";e?A.resolveWith(m,[u,E,D]):A.rejectWith(m,
[D,E,L]);D.statusCode(v);v=void 0;l&&t.trigger(e?"ajaxSuccess":"ajaxError",[D,q,e?u:L]);r.fireWith(m,[D,E]);l&&(t.trigger("ajaxComplete",[D,q]),--g.active||g.event.trigger("ajaxStop"))}}"object"===typeof b&&(c=b,b=void 0);c=c||{};var n,p,e,f,l,h,q=g.ajaxSetup({},c),m=q.context||q,t=q.context&&(m.nodeType||m.jquery)?g(m):g.event,A=g.Deferred(),r=g.Callbacks("once memory"),v=q.statusCode||{},k={},x={},z="canceled",D={readyState:0,getResponseHeader:function(a){var b;if(Q){if(!e)for(e={};b=mc.exec(p);)e[b[1].toLowerCase()+
" "]=(e[b[1].toLowerCase()+" "]||[]).concat(b[2]);b=e[a.toLowerCase()+" "]}return null==b?null:b.join(", ")},getAllResponseHeaders:function(){return Q?p:null},setRequestHeader:function(a,b){null==Q&&(a=x[a.toLowerCase()]=x[a.toLowerCase()]||a,k[a]=b);return this},overrideMimeType:function(a){null==Q&&(q.mimeType=a);return this},statusCode:function(a){var b;if(a)if(Q)D.always(a[D.status]);else for(b in a)v[b]=[v[b],a[b]];return this},abort:function(a){a=a||z;n&&n.abort(a);d(0,a);return this}};A.promise(D);
q.url=((b||q.url||E.href)+"").replace(oc,E.protocol+"//");q.type=c.method||c.type||q.method||q.type;q.dataTypes=(q.dataType||"*").toLowerCase().match(xa)||[""];if(null==q.crossDomain){b=X.createElement("a");try{b.href=q.url,b.href=b.href,q.crossDomain=$b.protocol+"//"+$b.host!==b.protocol+"//"+b.host}catch(Ub){q.crossDomain=!0}}q.data&&q.processData&&"string"!==typeof q.data&&(q.data=g.param(q.data,q.traditional));Na(dc,q,c,D);if(Q)return D;(l=g.event&&q.global)&&0===g.active++&&g.event.trigger("ajaxStart");
q.type=q.type.toUpperCase();q.hasContent=!nc.test(q.type);var ya=q.url.replace(kc,"");q.hasContent?q.data&&q.processData&&0===(q.contentType||"").indexOf("application/x-www-form-urlencoded")&&(q.data=q.data.replace(jc,"+")):(b=q.url.slice(ya.length),q.data&&(q.processData||"string"===typeof q.data)&&(ya+=(Eb.test(ya)?"&":"?")+q.data,delete q.data),!1===q.cache&&(ya=ya.replace(lc,"$1"),b=(Eb.test(ya)?"&":"?")+"_="+ka++ +b),q.url=ya+b);q.ifModified&&(g.lastModified[ya]&&D.setRequestHeader("If-Modified-Since",
g.lastModified[ya]),g.etag[ya]&&D.setRequestHeader("If-None-Match",g.etag[ya]));(q.data&&q.hasContent&&!1!==q.contentType||c.contentType)&&D.setRequestHeader("Content-Type",q.contentType);D.setRequestHeader("Accept",q.dataTypes[0]&&q.accepts[q.dataTypes[0]]?q.accepts[q.dataTypes[0]]+("*"!==q.dataTypes[0]?", "+ec+"; q=0.01":""):q.accepts["*"]);for(h in q.headers)D.setRequestHeader(h,q.headers[h]);if(q.beforeSend&&(!1===q.beforeSend.call(m,D,q)||Q))return D.abort();z="abort";r.add(q.complete);D.done(q.success);
D.fail(q.error);if(n=Na(Tb,q,c,D)){D.readyState=1;l&&t.trigger("ajaxSend",[D,q]);if(Q)return D;q.async&&0<q.timeout&&(f=a.setTimeout(function(){D.abort("timeout")},q.timeout));try{var Q=!1;n.send(k,d)}catch(Ub){if(Q)throw Ub;d(-1,Ub)}}else d(-1,"No Transport");return D},getJSON:function(a,b,c){return g.get(a,b,c,"json")},getScript:function(a,b){return g.get(a,void 0,b,"script")}});g.each(["get","post"],function(a,b){g[b]=function(a,c,d,n){V(c)&&(n=n||d,d=c,c=void 0);return g.ajax(g.extend({url:a,
type:b,dataType:n,data:c,success:d},g.isPlainObject(a)&&a))}});g._evalUrl=function(a,b){return g.ajax({url:a,type:"GET",dataType:"script",cache:!0,async:!1,global:!1,converters:{"text script":function(){}},dataFilter:function(a){g.globalEval(a,b)}})};g.fn.extend({wrapAll:function(a){this[0]&&(V(a)&&(a=a.call(this[0])),a=g(a,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&a.insertBefore(this[0]),a.map(function(){for(var a=this;a.firstElementChild;)a=a.firstElementChild;return a}).append(this));
return this},wrapInner:function(a){return V(a)?this.each(function(b){g(this).wrapInner(a.call(this,b))}):this.each(function(){var b=g(this),c=b.contents();c.length?c.wrapAll(a):b.append(a)})},wrap:function(a){var b=V(a);return this.each(function(c){g(this).wrapAll(b?a.call(this,c):a)})},unwrap:function(a){this.parent(a).not("body").each(function(){g(this).replaceWith(this.childNodes)});return this}});g.expr.pseudos.hidden=function(a){return!g.expr.pseudos.visible(a)};g.expr.pseudos.visible=function(a){return!!(a.offsetWidth||
a.offsetHeight||a.getClientRects().length)};g.ajaxSettings.xhr=function(){try{return new a.XMLHttpRequest}catch(l){}};var pc={0:200,1223:204},Mb=g.ajaxSettings.xhr();ha.cors=!!Mb&&"withCredentials"in Mb;ha.ajax=Mb=!!Mb;g.ajaxTransport(function(b){var c,d;if(ha.cors||Mb&&!b.crossDomain)return{send:function(n,p){var e,f=b.xhr();f.open(b.type,b.url,b.async,b.username,b.password);if(b.xhrFields)for(e in b.xhrFields)f[e]=b.xhrFields[e];b.mimeType&&f.overrideMimeType&&f.overrideMimeType(b.mimeType);b.crossDomain||
n["X-Requested-With"]||(n["X-Requested-With"]="XMLHttpRequest");for(e in n)f.setRequestHeader(e,n[e]);c=function(a){return function(){c&&(c=d=f.onload=f.onerror=f.onabort=f.ontimeout=f.onreadystatechange=null,"abort"===a?f.abort():"error"===a?"number"!==typeof f.status?p(0,"error"):p(f.status,f.statusText):p(pc[f.status]||f.status,f.statusText,"text"!==(f.responseType||"text")||"string"!==typeof f.responseText?{binary:f.response}:{text:f.responseText},f.getAllResponseHeaders()))}};f.onload=c();d=
f.onerror=f.ontimeout=c("error");void 0!==f.onabort?f.onabort=d:f.onreadystatechange=function(){4===f.readyState&&a.setTimeout(function(){c&&d()})};c=c("abort");try{f.send(b.hasContent&&b.data||null)}catch(gc){if(c)throw gc;}},abort:function(){c&&c()}}});g.ajaxPrefilter(function(a){a.crossDomain&&(a.contents.script=!1)});g.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(a){g.globalEval(a);
return a}}});g.ajaxPrefilter("script",function(a){void 0===a.cache&&(a.cache=!1);a.crossDomain&&(a.type="GET")});g.ajaxTransport("script",function(a){if(a.crossDomain||a.scriptAttrs){var b,c;return{send:function(d,n){b=g("<script>").attr(a.scriptAttrs||{}).prop({charset:a.scriptCharset,src:a.url}).on("load error",c=function(a){b.remove();c=null;a&&n("error"===a.type?404:200,a.type)});X.head.appendChild(b[0])},abort:function(){c&&c()}}}});var fc=[],ac=/(=)\?(?=&|$)|\?\?/;g.ajaxSetup({jsonp:"callback",
jsonpCallback:function(){var a=fc.pop()||g.expando+"_"+ka++;this[a]=!0;return a}});g.ajaxPrefilter("json jsonp",function(b,c,d){var n,p=!1!==b.jsonp&&(ac.test(b.url)?"url":"string"===typeof b.data&&0===(b.contentType||"").indexOf("application/x-www-form-urlencoded")&&ac.test(b.data)&&"data");if(p||"jsonp"===b.dataTypes[0]){var e=b.jsonpCallback=V(b.jsonpCallback)?b.jsonpCallback():b.jsonpCallback;p?b[p]=b[p].replace(ac,"$1"+e):!1!==b.jsonp&&(b.url+=(Eb.test(b.url)?"&":"?")+b.jsonp+"="+e);b.converters["script json"]=
function(){n||g.error(e+" was not called");return n[0]};b.dataTypes[0]="json";var f=a[e];a[e]=function(){n=arguments};d.always(function(){void 0===f?g(a).removeProp(e):a[e]=f;b[e]&&(b.jsonpCallback=c.jsonpCallback,fc.push(e));n&&V(f)&&f(n[0]);n=f=void 0});return"script"}});ha.createHTMLDocument=function(){var a=X.implementation.createHTMLDocument("").body;a.innerHTML="<form></form><form></form>";return 2===a.childNodes.length}();g.parseHTML=function(a,b,c){if("string"!==typeof a)return[];"boolean"===
typeof b&&(c=b,b=!1);if(!b)if(ha.createHTMLDocument){b=X.implementation.createHTMLDocument("");var d=b.createElement("base");d.href=X.location.href;b.head.appendChild(d)}else b=X;d=ub.exec(a);c=!c&&[];if(d)return[b.createElement(d[1])];d=q([a],b,c);c&&c.length&&g(c).remove();return g.merge([],d.childNodes)};g.fn.load=function(a,b,c){var d,n,p=this,e=a.indexOf(" ");if(-1<e){var f=va(a.slice(e));a=a.slice(0,e)}V(b)?(c=b,b=void 0):b&&"object"===typeof b&&(d="POST");0<p.length&&g.ajax({url:a,type:d||
"GET",dataType:"html",data:b}).done(function(a){n=arguments;p.html(f?g("<div>").append(g.parseHTML(a)).find(f):a)}).always(c&&function(a,b){p.each(function(){c.apply(this,n||[a.responseText,b,a])})});return this};g.each("ajaxStart ajaxStop ajaxComplete ajaxError ajaxSuccess ajaxSend".split(" "),function(a,b){g.fn[b]=function(a){return this.on(b,a)}});g.expr.pseudos.animated=function(a){return g.grep(g.timers,function(b){return a===b.elem}).length};g.offset={setOffset:function(a,b,c){var d=g.css(a,
"position"),n=g(a),p={};"static"===d&&(a.style.position="relative");var e=n.offset();var f=g.css(a,"top");var E=g.css(a,"left");("absolute"===d||"fixed"===d)&&-1<(f+E).indexOf("auto")?(E=n.position(),f=E.top,E=E.left):(f=parseFloat(f)||0,E=parseFloat(E)||0);V(b)&&(b=b.call(a,c,g.extend({},e)));null!=b.top&&(p.top=b.top-e.top+f);null!=b.left&&(p.left=b.left-e.left+E);"using"in b?b.using.call(a,p):n.css(p)}};g.fn.extend({offset:function(a){if(arguments.length)return void 0===a?this:this.each(function(b){g.offset.setOffset(this,
a,b)});var b;if(b=this[0]){if(!b.getClientRects().length)return{top:0,left:0};var c=b.getBoundingClientRect();b=b.ownerDocument.defaultView;return{top:c.top+b.pageYOffset,left:c.left+b.pageXOffset}}},position:function(){if(this[0]){var a,b=this[0],c={top:0,left:0};if("fixed"===g.css(b,"position"))var d=b.getBoundingClientRect();else{d=this.offset();var n=b.ownerDocument;for(a=b.offsetParent||n.documentElement;a&&(a===n.body||a===n.documentElement)&&"static"===g.css(a,"position");)a=a.parentNode;a&&
a!==b&&1===a.nodeType&&(c=g(a).offset(),c.top+=g.css(a,"borderTopWidth",!0),c.left+=g.css(a,"borderLeftWidth",!0))}return{top:d.top-c.top-g.css(b,"marginTop",!0),left:d.left-c.left-g.css(b,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var a=this.offsetParent;a&&"static"===g.css(a,"position");)a=a.offsetParent;return a||Ga})}});g.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(a,b){var c="pageYOffset"===b;g.fn[a]=function(d){return ra(this,function(a,d,
n){if(Ia(a))var p=a;else 9===a.nodeType&&(p=a.defaultView);if(void 0===n)return p?p[b]:a[d];p?p.scrollTo(c?p.pageXOffset:n,c?n:p.pageYOffset):a[d]=n},a,d,arguments.length)}});g.each(["top","left"],function(a,b){g.cssHooks[b]=na(ha.pixelPosition,function(a,c){if(c)return c=t(a,b),Fb.test(c)?g(a).position()[b]+"px":c})});g.each({Height:"height",Width:"width"},function(a,b){g.each({padding:"inner"+a,content:b,"":"outer"+a},function(c,d){g.fn[d]=function(n,p){var e=arguments.length&&(c||"boolean"!==typeof n),
f=c||(!0===n||!0===p?"margin":"border");return ra(this,function(b,c,n){return Ia(b)?0===d.indexOf("outer")?b["inner"+a]:b.document.documentElement["client"+a]:9===b.nodeType?(c=b.documentElement,Math.max(b.body["scroll"+a],c["scroll"+a],b.body["offset"+a],c["offset"+a],c["client"+a])):void 0===n?g.css(b,c,f):g.style(b,c,n,f)},b,e?n:void 0,e)}})});g.each("blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(" "),
function(a,b){g.fn[b]=function(a,c){return 0<arguments.length?this.on(b,null,a,c):this.trigger(b)}});g.fn.extend({hover:function(a,b){return this.mouseenter(a).mouseleave(b||a)}});g.fn.extend({bind:function(a,b,c){return this.on(a,null,b,c)},unbind:function(a,b){return this.off(a,null,b)},delegate:function(a,b,c,d){return this.on(b,a,c,d)},undelegate:function(a,b,c){return 1===arguments.length?this.off(a,"**"):this.off(b,a||"**",c)}});g.proxy=function(a,b){if("string"===typeof b){var c=a[b];b=a;a=
c}if(V(a)){var d=Oa.call(arguments,2);c=function(){return a.apply(b||this,d.concat(Oa.call(arguments)))};c.guid=a.guid=a.guid||g.guid++;return c}};g.holdReady=function(a){a?g.readyWait++:g.ready(!0)};g.isArray=Array.isArray;g.parseJSON=JSON.parse;g.nodeName=x;g.isFunction=V;g.isWindow=Ia;g.camelCase=F;g.type=m;g.now=Date.now;g.isNumeric=function(a){var b=g.type(a);return("number"===b||"string"===b)&&!isNaN(a-parseFloat(a))};!(e=[],c=function(){return g}.apply(k,e),void 0!==c&&(f.exports=c));var qc=
a.jQuery,rc=a.$;g.noConflict=function(b){a.$===g&&(a.$=rc);b&&a.jQuery===g&&(a.jQuery=qc);return g};r||(a.jQuery=a.$=g);return g})},"8++/":function(f,k){f.exports=function(a){return a!==a}},"86tT":function(f,k,a){var e=a("gHOb"),c=a("UnEC");f.exports=function(a){return c(a)&&"[object Map]"==e(a)}},"8AZL":function(f,k){f.exports=function(a,e,c){switch(c.length){case 0:return a.call(e);case 1:return a.call(e,c[0]);case 2:return a.call(e,c[0],c[1]);case 3:return a.call(e,c[0],c[1],c[2])}return a.apply(e,
c)}},"8gK5":function(f,k){f.exports=function(a){var e=[];if(null!=a)for(var c in Object(a))e.push(c);return e}},"8tbe":function(f,k,a){a.d(k,"c",function(){return b});a.d(k,"a",function(){return r});a.d(k,"b",function(){return y});f=a("Z60a");var e=a.n(f);f=a("C9uT");var c=a.n(f),b=function(){function a(b){e()(this,a);this.action=a.evtName();this.user=b?b:null}c()(a,null,[{key:"evtName",value:function(){return"start"}}]);return a}(),r=function(){function a(b){e()(this,a);this.action=a.evtName();this.reason=
b&&0<=a.reasons().indexOf(b)?b:null}c()(a,null,[{key:"evtName",value:function(){return"destroy"}},{key:"reasons",value:function(){return["logout","destroy"]}}]);return a}(),y=function(){function a(b){e()(this,a);this.action=a.evtName();this.offlineStatus=b?!!b:!1}c()(a,null,[{key:"evtName",value:function(){return"offlineStatusChange"}},{key:"of",value:function(b){return b?new a(b.offlineStatus):null}}]);return a}()},"95Qu":function(f,k){(function(){var a={rotl:function(a,c){return a<<c|a>>>32-c},
rotr:function(a,c){return a<<32-c|a>>>c},endian:function(e){if(e.constructor==Number)return a.rotl(e,8)&16711935|a.rotl(e,24)&4278255360;for(var c=0;c<e.length;c++)e[c]=a.endian(e[c]);return e},randomBytes:function(a){for(var c=[];0<a;a--)c.push(Math.floor(256*Math.random()));return c},bytesToWords:function(a){for(var c=[],b=0,e=0;b<a.length;b++,e+=8)c[e>>>5]|=a[b]<<24-e%32;return c},wordsToBytes:function(a){for(var c=[],b=0;b<32*a.length;b+=8)c.push(a[b>>>5]>>>24-b%32&255);return c},bytesToHex:function(a){for(var c=
[],b=0;b<a.length;b++)c.push((a[b]>>>4).toString(16)),c.push((a[b]&15).toString(16));return c.join("")},hexToBytes:function(a){for(var c=[],b=0;b<a.length;b+=2)c.push(parseInt(a.substr(b,2),16));return c},bytesToBase64:function(a){for(var c=[],b=0;b<a.length;b+=3)for(var e=a[b]<<16|a[b+1]<<8|a[b+2],f=0;4>f;f++)8*b+6*f<=8*a.length?c.push("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(e>>>6*(3-f)&63)):c.push("=");return c.join("")},base64ToBytes:function(a){a=a.replace(/[^A-Z0-9+\/]/ig,
"");for(var c=[],b=0,e=0;b<a.length;e=++b%4)0!=e&&c.push(("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".indexOf(a.charAt(b-1))&Math.pow(2,-2*e+8)-1)<<2*e|"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".indexOf(a.charAt(b))>>>6-2*e);return c}};f.exports=a})()},"9LPS":function(f,k,a){Object.defineProperty(k,"__esModule",{value:!0});a.d(k,"TP_HEADER_NAME",function(){return e});a.d(k,"CSRF_HEADER_NAME",function(){return c});a.d(k,"CSRF_COOKIE_NAME",function(){return b});
a.d(k,"TPC_BLOCKED_HEADER",function(){return r});a.d(k,"DEFAULT_USER_IMAGE",function(){return y});a.d(k,"WIDGET_NAMES",function(){return m});a.d(k,"WIDGET_STATUS",function(){return d});var e="X-RMRQ-SESSION",c="X-CSRF-TOKEN",b="XSRF-TOKEN",r="X-TPC-BLOCKED",y="images/Remarq-Logo-ForTopBar.png",m=Object.freeze(new function z(){var a=this;this.REMARQ="GroveSide";this.TOP_WIDGET="TopWidget";this.CORNER_WIDGET="CornerWidget";this.POLL_WIDGET="PollWidget";this.SURVEY_WIDGET="SurveyWidget";this.STICKY_WIDGET=
"Sticky";this.PDF_FRAME="pdfFrame";this.CROSS_TABS_MESSAGE_BROKER="CrossTabsMessageBroker";this.DASHBOARD="grove-body";this.PUBLIC_PROFILE="PublicProfile";z.prototype.fromFrameId=function(b){switch(b){case "GroveSide":return a.REMARQ;case "SurveyWidget":return a.SURVEY_WIDGET;case "Sticky":return a.STICKY_WIDGET;case "PollWidget":return a.POLL_WIDGET;case "CornerWidget":return a.CORNER_WIDGET;case "TopWidget":return a.TOP_WIDGET;case "pdfFrame":return a.PDF_FRAME;default:return null}}}),d=Object.freeze(new function(){this.INITIALIZED=
"INITIALIZED";this.LOADING="LOADING";this.UNINSTALLED="UNINSTALLED"})},AgIj:function(f,k,a){var e=a("cdq7"),c=a("JyYQ"),b=a("5Zxu"),r=Math.max,y=Math.min;f.exports=function(a,d,f){var m=null==a?0:a.length;if(!m)return-1;var h=m-1;void 0!==f&&(h=b(f),h=0>f?r(m+h,0):y(h,m-1));return e(a,c(d,3),h,!0)}},BnCw:function(f,k,a){function e(a,r,k){f.exports="undefined"!==typeof Reflect&&Reflect.get?e=Reflect.get:e=function(a,b,e){if(a=c(a,b))return b=Object.getOwnPropertyDescriptor(a,b),b.get?b.get.call(e):
b.value};return e(a,r,k||a)}var c=a("/1gr");f.exports=e},C8kI:function(f,k,a){function e(a){return a.toLowerCase()}Object.defineProperty(k,"__esModule",{value:!0});k.isFollowing=function(a,b){return a&&b&&b.followingArticles&&(-1!=b.followingArticles.indexOf(a)||-1!=b.followingArticles.indexOf(a.toLowerCase()))?!0:!1};k.doiMatches=function(a,b){a=a.toLowerCase();b=b.toLowerCase();return-1<a.indexOf(b)||-1<b.indexOf(a)};k.normalize=e;k.realDoi=function(a){if(null!=a){var b=a.indexOf(";jsessionid=");
-1<b&&(a=a.substring(0,b))}null==a?a=null:a.startsWith("10.")||(a.startsWith("full")||a.startsWith("abs")||a.startsWith("denial")||a.startsWith("doi/")||a.startsWith("citedby/")?(b=a.indexOf("/"),a=a.substring(b+1)):a=(a=/^[^10.]*(10\.[0-9]{4}.*)/i,"function"===typeof a.matches)&&a.matches()&&"function"===typeof a.group?a.group(1):null);return a&&e(a)};k.doiDescriptor=function(a,b,e){return a+"/"+(b||e)}},C9uT:function(f,k){function a(a,c){for(var b=0;b<c.length;b++){var e=c[b];e.enumerable=e.enumerable||
!1;e.configurable=!0;"value"in e&&(e.writable=!0);Object.defineProperty(a,e.key,e)}}f.exports=function(e,c,b){c&&a(e.prototype,c);b&&a(e,b);return e}},CAlj:function(f,k,a){a.d(k,"a",function(){return x});f=a("Oy1H");var e=a.n(f);f=a("Z60a");var c=a.n(f);f=a("C9uT");var b=a.n(f),r=a("4EtY"),y=a("Tkzw"),m=a("mBFJ"),d=a("+Fex"),x=function(){function a(b){c()(this,a);var e=this;e.filters=null;e.holder=null;e.grovePrefix=b;e.filters=null;e.activePollsIds=null;(function(){var a={};Object.defineProperty(e,
"surveyWidget",{get:function(){a.surveyWidget||(a.surveyWidget=document.getElementById("SurveyWidget"));return a.surveyWidget},set:function(b){a.surveyWidget=b},configurable:!1,enumerable:!0});Object.defineProperty(e,"pollWidget",{get:function(){a.pollWidget||(a.pollWidget=document.getElementById("PollWidget"));return a.pollWidget},set:function(b){a.pollWidget=b},configurable:!1,enumerable:!0});Object.defineProperty(e,"sideWidget",{get:function(){a.sideWidget||(a.sideWidget=document.getElementById("GroveSide"));
return a.sideWidget},set:function(b){a.sideWidget=b},configurable:!1,enumerable:!0})})();(function(){e.holder={};Object.keys(d.a.TYPE).forEach(function(a){e.holder[a]={}})})();(function(){var a=r.a.getInstance().get(m.a.evtName()),b=null;a&&(b=JSON.parse(a));a&&b?(Object.setPrototypeOf(b,m.a.prototype),e.filters=b):(e.filters=new m.a,e._updateFiltersCookie())})();e._initSubscriptions()}b()(a,[{key:"_initSubscriptions",value:function(){window.addEventListener("message",this._handleFrameMessages.bind(this))}},
{key:"_handleFrameMessages",value:function(a){if(a&&a.data)switch(a.data._name){case y.WidgetInitializedEvent.evtName():this._handleWidgetInitializedEvent(a);break;case y.ToggleWidgetEvent.evtName():this._handleToggleWidgetEvent(a);break;case y.UpdateSurveyFilterEvent.evtName():this._handleUpdateSurveyFilterEvent(a);break;case y.GMLoginEvent.evtName():this._handleLoginEvent(a);break;case y.SubmitCompletedSurveyErrorEvent.evtName():this._handleSubmitCompletedSurveyErrorEvent(a);break;case y.UpdateCurrentPollEvent.evtName():this._handleUpdateCurrentPollEvent(a);
break;default:"resize"===a.data.action&&this._handleExpandWidgetEvent(a)}}},{key:"_handleSubmitCompletedSurveyErrorEvent",value:function(a){if(a&&a.data&&a.data._name===y.SubmitCompletedSurveyErrorEvent.evtName()&&a.data.widgetId)switch(a.data.widgetId){case "PollWidget":this.pollWidget&&(a=this.pollWidget,a.style.visibility="hidden");break;case "SurveyWidget":this.surveyWidget&&(a=this.surveyWidget,a.setAttribute("data-expanded","false"),a.style.visibility="hidden")}}},{key:"_handleExpandWidgetEvent",
value:function(a){if(a&&a.data&&"resize"===a.data.action)switch(a.data["class"]){case "expanded":this.pollWidget&&(this.pollWidget.setAttribute("data-noanimation","true"),this.pollWidget.style.visibility="hidden");break;case "collapsed":this.pollWidget&&(this.pollWidget.setAttribute("data-noanimation","false"),this.pollWidget.style.visibility="visible")}}},{key:"_handleLoginEvent",value:function(a){a&&a.data&&a.data._name===y.GMLoginEvent.evtName()&&a.data.user&&(this.pollWidget&&this.pollWidget.contentWindow&&
this.grovePrefix&&(this.pollWidget.setAttribute("data-expanded","false"),this.pollWidget.style.visibility="hidden",this.pollWidget.contentWindow.postMessage(new y.ReloadWidgetEvent({widgetId:"PollWidget"}),this.grovePrefix)),this._toggleSurveysWidget(this.surveyWidget,!1))}},{key:"_handleUpdateSurveyFilterEvent",value:function(a){a&&a.data&&a.data._name===y.UpdateSurveyFilterEvent.evtName()&&a.data.filter&&(this.filters.put(a.data.filter),this._updateFiltersCookie())}},{key:"toggleWidgetVisibility",
value:function(a,b,c,d){if(a){var e=document.getElementById(a);switch(a){case "PollWidget":this._togglePollsWidget(e,b,d);break;case "SurveyWidget":this._toggleSurveysWidget(e,b,c)}}}},{key:"_toggleSurveysWidget",value:function(a,b,c){a&&(b?c&&this.holder&&this.holder[d.a.TYPE.SURVEY]?(b=this.holder[d.a.TYPE.SURVEY][c])&&b.settings&&b.settings.condition?d.a.extractCondition(b.settings.condition.type)===d.a.CONDITION.AFTER_SEC&&0<=b.settings.condition.value&&setTimeout(function(){a.setAttribute("data-expanded",
"true");a.style.visibility="visible"},1E3*b.settings.condition.value):b&&b.settings&&!b.settings.condition&&(a.setAttribute("data-expanded","true"),a.style.visibility="visible"):(a.setAttribute("data-expanded","true"),a.style.visibility="visible"):(a.setAttribute("data-expanded","false"),a.style.visibility="hidden"))}},{key:"_togglePollsWidget",value:function(a,b,c){a&&"hidden"!=c&&(b?a.setAttribute("data-expanded","true"):a.setAttribute("data-expanded","false"),c&&(a.style.visibility=c))}},{key:"setActiveSurveysPolls",
value:function(a){var b=this;b.activePollsIds=[];a&&a.active&&a.active.forEach(function(a){(a=d.a.extractDto(a))&&a.type&&a.id&&(b.holder[a.type][a.id]=a,a.type===d.a.TYPE.POLL&&b.activePollsIds.push(a.id))})}},{key:"containsActivePolls",value:function(){return this._containsActiveSurveyType(d.a.TYPE.POLL)}},{key:"containsActiveSurveys",value:function(){return this._containsActiveSurveyType(d.a.TYPE.SURVEY)}},{key:"_containsActiveSurveyType",value:function(a){return this.holder&&a&&this.holder[a]&&
"object"===e()(this.holder[a])?(a=Object.keys(this.holder[a]))&&0<a.length?!0:!1:!1}},{key:"_handleWidgetInitializedEvent",value:function(a){if(a&&a.data&&a.data._name===y.WidgetInitializedEvent.evtName()){var b;switch(a.data.widgetId){case "SurveyWidget":(b=this._getCandidateSurveys(d.a.TYPE.SURVEY))&&this.surveyWidget&&this.surveyWidget.contentWindow&&this.surveyWidget.contentWindow.postMessage(new y.ActiveSurveysEvent({data:b}),this.grovePrefix);break;case "PollWidget":(b=this._getCandidateSurveys(d.a.TYPE.POLL))&&
this.pollWidget&&this.pollWidget.contentWindow&&this.pollWidget.contentWindow.postMessage(new y.ActiveSurveysEvent({data:b,currentPollId:a.data.currentPollId}),this.grovePrefix)}}}},{key:"_handleUpdateCurrentPollEvent",value:function(a){this._getCandidateSurveys(d.a.TYPE.POLL)&&this.pollWidget&&this.pollWidget.contentWindow&&this.pollWidget.contentWindow.postMessage(new y.UpdateCurrentPollWidgetEvent({currentPollId:a.data.currentPollId}),this.grovePrefix)}},{key:"_handleToggleWidgetEvent",value:function(a){a&&
a.data&&a.data._name===y.ToggleWidgetEvent.evtName()&&this.toggleWidgetVisibility(a.data.widgetId,a.data.value,a.data.surveyId,a.data.visibility)}},{key:"_updateFiltersCookie",value:function(){try{r.a.getInstance().setCookie(m.a.evtName(),JSON.stringify(this.filters),m.a.expirationDate())}catch(h){return!1}return!0}},{key:"_getCandidateSurveys",value:function(a){return a&&d.a.extractType(a)&&this.holder&&this.holder[a]?this.holder[a]:null}}]);return a}()},CHen:function(f,k,a){var e=a("uCi2"),c=a("HAGj"),
b=a("bIjD");f.exports=function(a,f,m){for(var d=-1,r=f.length,k={};++d<r;){var h=f[d],A=e(a,h);m(A,h)&&c(k,b(h,a),A)}return k}},CK11:function(f,k,a){(function(e){var c=a("4T/i");k.a=function(a,f){var b=this,m="page",d=a.stickyWidgetConfiguration&&a.stickyWidgetConfiguration.topAir,k=a.stickyWidgetConfiguration&&a.stickyWidgetConfiguration.bottomAir,r=a.stickyWidgetConfiguration&&a.stickyWidgetConfiguration.stickyWidth,h=a.stickyWidgetConfiguration&&a.stickyWidgetConfiguration.air,A;this.access=f.access;
this.started=!1;f=a.selectors.stickyIndex?a.selectors.stickyIndex[0]:void 0;var v=void 0,N=f?Object(c.a)(f)[0]:void 0,K=void 0;this.install=null!==a.selectors.stickyIndex&&void 0!==a.selectors.stickyIndex&&void 0!==N&&"full"===this.access;if(!0===this.install){f=a.selectors.stickyIndex[0];v=a.selectors.stickyIndex[1];N=Object(c.a)(f)[0];K=void 0!==v?Object(c.a)(v)[0]:void 0;var L=void 0!==N&&null!=h?N.offsetLeft-r-h:null;var D=void 0!==K?K.getBoundingClientRect().height+d:d}this.setPdfLeftOffset=
function(a){!1!==this.install&&null!=a&&(A=a-h)};this.setView=function(a){if(!1!==this.install&&(m=a,document.getElementById("Sticky"))){switch(m){case "page":null!=L&&(document.getElementById("Sticky").style.left=(0<=L?L:0)+"px");break;case "pdf":null!=A&&(document.getElementById("Sticky").style.left=(0<A&&0<A-r?A-r:0)+"px"),this.show()}D||(K=void 0!=v?Object(c.a)(v)[0]:void 0,D=void 0!=K?K.getBoundingClientRect().height+d:d);null!=D&&(document.getElementById("Sticky").style.top=D+"px")}};this.show=
function(){if(!1!==this.install)switch(m){case "pdf":document.getElementById("Sticky")&&(document.getElementById("Sticky").style.visibility="visible");break;case "page":document.getElementById("Sticky")&&document.getElementById("TopWidget")&&(document.getElementById("Sticky").style.visibility=0>document.getElementById("TopWidget").getBoundingClientRect().bottom?"visible":"hidden")}};this.hide=function(){!1!==this.install&&document.getElementById("Sticky")&&(document.getElementById("Sticky").style.visibility=
"hidden")};this.render=function(){if(!1!==this.install&&"full"===b.access){var a=e(N).offset().left;L=null!=h?a-r-h:null;if(document.getElementById("TopWidget"))switch(document.getElementById("TopWidget").style.visibility){case "visible":b.show();break;case "hidden":b.hide()}else b.hide();switch(m){case "pdf":b.setView("pdf");b.hide();break;case "page":b.setView("page"),void 0!==N&&(N.getBoundingClientRect().bottom<=k||0>L)&&b.hide()}}};this.start=function(){!1!==this.install&&(document.addEventListener("scroll",
this.render),window.addEventListener("resize",this.render),this.started=!0)}}}).call(k,a("7t+N"))},CYdk:function(f,k,a){Object.defineProperty(k,"__esModule",{value:!0});k["default"]=function(a,c,b){c=c||10;return new Promise(function(b,e){try{var f=a();if(f)b(f);else var d=setInterval(function(){try{var c=a();c&&(clearInterval(d),b(c))}catch(z){e(z)}},c)}catch(x){e(x)}})}},CxPB:function(f,k,a){var e=a("wSKX");f.exports=function(a){return"function"==typeof a?a:e}},D79o:function(f,k,a){function e(a,
b,c){c=c||a.length;for(var d=b.indexOf(a),f=[],h=b.indexOf(a);-1!=h;)f.push(h),h=b.indexOf(a,h+1);if(-1!=d)return{text:a,s:d,ss:f,c:100*a.length/c};d=a.length/2;return 5<=d?[e(a.substring(0,d),b,c),e(a.substring(d),b,c)]:{text:a,s:-1,ss:[]}}function c(a,b){if(!Array.isArray(a))return[a];b=b||[];a.forEach(function(a){Array.isArray(a)?c(a,b):b.push(a)});return b}function b(a){for(var b=[],c=0;c<a.length;c++){var d=a[c];if(null!=d){for(var e=c+1;e<a.length;e++){var f=a[e];if(d.s+d.text.length==f.s)d.text+=
f.text,d.c+=f.c,a[e]=null;else break}b.push(d)}}return b}function r(a){for(var b=a[0].ss.map(function(b){return[{s:b,c:a[0].c,text:a[0].text}]}),c=function(c){var e=a[c].ss.map(function(b){return{s:b,c:a[c].c,text:a[c].text}});b=d()(b,function(a){var b=a[a.length-1].s,c=e.filter(function(a){return a.s>b});return 0==c.length?[a]:c=x()(c,function(b){var c=a.slice();c.push(b);return c})})},e=1;e<a.length;e++)c(e);return b}function y(a){return a.reduce(function(a,b){return a+b.c},0)}function m(a){return a[a.length-
1].s-a[0].s}Object.defineProperty(k,"__esModule",{value:!0});f=a("Oy1H");a.n(f);f=a("nfWN");var d=a.n(f);f=a("2247");var x=a.n(f),z=a("cuGy"),h={};try{h=window||{}}catch(A){}k["default"]={confidence:y,distance:m,combos:r,find:function(a,d,f){var k=a;f&&(k=f.back.trim()+a+f.front.trim());if(5>k.length)return null;var x=Date.now();d=e(k,d);d=c(d).filter(function(a){return-1!=a.s});if(0<d.length)d=r(d),d=d.sort(function(a,b){var c=y(a),d=y(b);return c==d?(a=m(a),b=m(b),a-b):d-c});else return[];var D=
d[0];D=b(D);var A=y(D);d=D.slice(0);D[0]&&f&&(a=this.find(a,k))&&(a.forEach(function(a){a.s+=D[0].s}),D=a,D.forEach(function(a){a.c=a.c*A/100}));D[0]||(D=d);a=m(D);f=D.reduce(function(a,b){return a+b.text.length},0);D.confidence=A;D.dist=a;D.totLength=f;x=Date.now()-x;D.elapsed=x;Object(z.debug)("partialMatch",A,x,h.articleInfo&&h.articleInfo.page,h.articleInfo&&h.articleInfo.id);return D}}},En79:function(f,k,a){f.exports=a("FS69")},FS69:function(f,k,a){f=function(a){function c(a,b,c,d){b=Object.create((b&&
b.prototype instanceof e?b:e).prototype);d=new N(d||[]);b._invoke=z(a,c,d);return b}function b(a,b,c){try{return{type:"normal",arg:a.call(b,c)}}catch(C){return{type:"throw",arg:C}}}function e(){}function f(){}function m(){}function d(a){["next","throw","return"].forEach(function(b){a[b]=function(a){return this._invoke(b,a)}})}function k(a){function c(d,e,f,q){d=b(a[d],a,e);if("throw"===d.type)q(d.arg);else{var h=d.arg;return(d=h.value)&&"object"===typeof d&&F.call(d,"__await")?Promise.resolve(d.__await).then(function(a){c("next",
a,f,q)},function(a){c("throw",a,f,q)}):Promise.resolve(d).then(function(a){h.value=a;f(h)},function(a){return c("throw",a,f,q)})}}var d;this._invoke=function(a,b){function e(){return new Promise(function(d,e){c(a,b,d,e)})}return d=d?d.then(e,e):e()}}function z(a,c,d){var e=T;return function(f,m){if(e===Q)throw Error("Generator is already running");if(e===U){if("throw"===f)throw m;return L()}d.method=f;for(d.arg=m;;){if(f=d.delegate)if(f=h(f,d)){if(f===aa)continue;return f}if("next"===d.method)d.sent=
d._sent=d.arg;else if("throw"===d.method){if(e===T)throw e=U,d.arg;d.dispatchException(d.arg)}else"return"===d.method&&d.abrupt("return",d.arg);e=Q;f=b(a,c,d);if("normal"===f.type){e=d.done?U:q;if(f.arg===aa)continue;return{value:f.arg,done:d.done}}"throw"===f.type&&(e=U,d.method="throw",d.arg=f.arg)}}}function h(a,c){var d=a.iterator[c.method];if(d===S){c.delegate=null;if("throw"===c.method){if(a.iterator["return"]&&(c.method="return",c.arg=S,h(a,c),"throw"===c.method))return aa;c.method="throw";
c.arg=new TypeError("The iterator does not provide a 'throw' method")}return aa}d=b(d,a.iterator,c.arg);if("throw"===d.type)return c.method="throw",c.arg=d.arg,c.delegate=null,aa;d=d.arg;if(!d)return c.method="throw",c.arg=new TypeError("iterator result is not an object"),c.delegate=null,aa;if(d.done)c[a.resultName]=d.value,c.next=a.nextLoc,"return"!==c.method&&(c.method="next",c.arg=S);else return d;c.delegate=null;return aa}function A(a){var b={tryLoc:a[0]};1 in a&&(b.catchLoc=a[1]);2 in a&&(b.finallyLoc=
a[2],b.afterLoc=a[3]);this.tryEntries.push(b)}function v(a){var b=a.completion||{};b.type="normal";delete b.arg;a.completion=b}function N(a){this.tryEntries=[{tryLoc:"root"}];a.forEach(A,this);this.reset(!0)}function K(a){if(a){var b=a[u];if(b)return b.call(a);if("function"===typeof a.next)return a;if(!isNaN(a.length)){var c=-1;b=function Z(){for(;++c<a.length;)if(F.call(a,c))return Z.value=a[c],Z.done=!1,Z;Z.value=S;Z.done=!0;return Z};return b.next=b}}return{next:L}}function L(){return{value:S,
done:!0}}var D=Object.prototype,F=D.hasOwnProperty,S,B="function"===typeof Symbol?Symbol:{},u=B.iterator||"@@iterator",J=B.asyncIterator||"@@asyncIterator",ca=B.toStringTag||"@@toStringTag";a.wrap=c;var T="suspendedStart",q="suspendedYield",Q="executing",U="completed",aa={};B={};B[u]=function(){return this};var G=Object.getPrototypeOf;(G=G&&G(G(K([]))))&&G!==D&&F.call(G,u)&&(B=G);var Y=m.prototype=e.prototype=Object.create(B);f.prototype=Y.constructor=m;m.constructor=f;m[ca]=f.displayName="GeneratorFunction";
a.isGeneratorFunction=function(a){return(a="function"===typeof a&&a.constructor)?a===f||"GeneratorFunction"===(a.displayName||a.name):!1};a.mark=function(a){Object.setPrototypeOf?Object.setPrototypeOf(a,m):(a.__proto__=m,ca in a||(a[ca]="GeneratorFunction"));a.prototype=Object.create(Y);return a};a.awrap=function(a){return{__await:a}};d(k.prototype);k.prototype[J]=function(){return this};a.AsyncIterator=k;a.async=function(b,d,e,f){var q=new k(c(b,d,e,f));return a.isGeneratorFunction(d)?q:q.next().then(function(a){return a.done?
a.value:q.next()})};d(Y);Y[ca]="Generator";Y[u]=function(){return this};Y.toString=function(){return"[object Generator]"};a.keys=function(a){var b=[],c;for(c in a)b.push(c);b.reverse();return function Z(){for(;b.length;){var c=b.pop();if(c in a)return Z.value=c,Z.done=!1,Z}Z.done=!0;return Z}};a.values=K;N.prototype={constructor:N,reset:function(a){this.next=this.prev=0;this.sent=this._sent=S;this.done=!1;this.delegate=null;this.method="next";this.arg=S;this.tryEntries.forEach(v);if(!a)for(var b in this)"t"===
b.charAt(0)&&F.call(this,b)&&!isNaN(+b.slice(1))&&(this[b]=S)},stop:function(){this.done=!0;var a=this.tryEntries[0].completion;if("throw"===a.type)throw a.arg;return this.rval},dispatchException:function(a){function b(b,d){f.type="throw";f.arg=a;c.next=b;d&&(c.method="next",c.arg=S);return!!d}if(this.done)throw a;for(var c=this,d=this.tryEntries.length-1;0<=d;--d){var e=this.tryEntries[d],f=e.completion;if("root"===e.tryLoc)return b("end");if(e.tryLoc<=this.prev){var q=F.call(e,"catchLoc"),h=F.call(e,
"finallyLoc");if(q&&h){if(this.prev<e.catchLoc)return b(e.catchLoc,!0);if(this.prev<e.finallyLoc)return b(e.finallyLoc)}else if(q){if(this.prev<e.catchLoc)return b(e.catchLoc,!0)}else if(h){if(this.prev<e.finallyLoc)return b(e.finallyLoc)}else throw Error("try statement without catch or finally");}}},abrupt:function(a,b){for(var c=this.tryEntries.length-1;0<=c;--c){var d=this.tryEntries[c];if(d.tryLoc<=this.prev&&F.call(d,"finallyLoc")&&this.prev<d.finallyLoc){var e=d;break}}e&&("break"===a||"continue"===
a)&&e.tryLoc<=b&&b<=e.finallyLoc&&(e=null);c=e?e.completion:{};c.type=a;c.arg=b;return e?(this.method="next",this.next=e.finallyLoc,aa):this.complete(c)},complete:function(a,b){if("throw"===a.type)throw a.arg;"break"===a.type||"continue"===a.type?this.next=a.arg:"return"===a.type?(this.rval=this.arg=a.arg,this.method="return",this.next="end"):"normal"===a.type&&b&&(this.next=b);return aa},finish:function(a){for(var b=this.tryEntries.length-1;0<=b;--b){var c=this.tryEntries[b];if(c.finallyLoc===a)return this.complete(c.completion,
c.afterLoc),v(c),aa}},"catch":function(a){for(var b=this.tryEntries.length-1;0<=b;--b){var c=this.tryEntries[b];if(c.tryLoc===a){a=c.completion;if("throw"===a.type){var d=a.arg;v(c)}return d}}throw Error("illegal catch attempt");},delegateYield:function(a,b,c){this.delegate={iterator:K(a),resultName:b,nextLoc:c};"next"===this.method&&(this.arg=S);return aa}};return a}(f.exports);try{regeneratorRuntime=f}catch(e){Function("r","regeneratorRuntime = r")(f)}},Fkvj:function(f,k,a){function e(a,f,k,aa,
G,Y){var q,Q=f&1,U=f&2,C=f&4;k&&(q=G?k(a,aa,G,Y):k(a));if(void 0!==q)return q;if(!u(a))return a;if(aa=F(a)){if(q=K(a),!Q)return x(a,q)}else{var Z=N(a),R="[object Function]"==Z||"[object GeneratorFunction]"==Z;if(S(a))return d(a,Q);if("[object Object]"==Z||"[object Arguments]"==Z||R&&!G){if(q=U||R?{}:D(a),!Q)return U?h(a,m(q,a)):z(a,y(q,a))}else{if(!T[Z])return G?a:{};q=L(a,Z,Q)}}Y||(Y=new c);if(G=Y.get(a))return G;Y.set(a,q);J(a)?a.forEach(function(b){q.add(e(b,f,k,b,a,Y))}):B(a)&&a.forEach(function(b,
c){q.set(c,e(b,f,k,c,a,Y))});U=C?U?v:A:U?keysIn:ca;var t=aa?void 0:U(a);b(t||a,function(b,c){t&&(c=b,b=a[c]);r(q,c,e(b,f,k,c,a,Y))});return q}var c=a("bJWQ"),b=a("PqYH"),r=a("i4ON"),y=a("jD7S"),m=a("py9u"),d=a("mKB/"),x=a("hrPF"),z=a("Nkkh"),h=a("1QDk"),A=a("MoMe"),v=a("xond"),N=a("gHOb"),K=a("UfSK"),L=a("5/Qr"),D=a("WQFf"),F=a("NGEn"),S=a("ggOT"),B=a("dwsC"),u=a("yCNF"),J=a("SGXn"),ca=a("ktak"),T={};T["[object Arguments]"]=T["[object Array]"]=T["[object ArrayBuffer]"]=T["[object DataView]"]=T["[object Boolean]"]=
T["[object Date]"]=T["[object Float32Array]"]=T["[object Float64Array]"]=T["[object Int8Array]"]=T["[object Int16Array]"]=T["[object Int32Array]"]=T["[object Map]"]=T["[object Number]"]=T["[object Object]"]=T["[object RegExp]"]=T["[object Set]"]=T["[object String]"]=T["[object Symbol]"]=T["[object Uint8Array]"]=T["[object Uint8ClampedArray]"]=T["[object Uint16Array]"]=T["[object Uint32Array]"]=!0;T["[object Error]"]=T["[object Function]"]=T["[object WeakMap]"]=!1;f.exports=e},Fp5l:function(f,k,a){var e=
a("bGc4"),c=a("UnEC");f.exports=function(a){return c(a)&&e(a)}},G0Wc:function(f,k,a){var e=a("yCNF"),c=a("HT7L"),b=a("8gK5"),r=Object.prototype.hasOwnProperty;f.exports=function(a){if(!e(a))return b(a);var f=c(a),d=[],k;for(k in a)("constructor"!=k||!f&&r.call(a,k))&&d.push(k);return d}},G8ar:function(f,k,a){var e=a("cdq7"),c=a("8++/"),b=a("i6nN");f.exports=function(a,f,m){return f===f?b(a,f,m):e(a,c,m)}},GCEA:function(f,k,a){f=a("T/v0");var e=a.n(f);f=a("tNLN");var c=a.n(f);f=a("j/rp");var b=a.n(f);
f=a("Z60a");var r=a.n(f);f=a("C9uT");var y=a.n(f),m=a("CYdk");f=a("JyB8");a.n(f);var d=a("ZV5t"),x=a("M+3u"),z=a("vzIA");f=a("6PBa");var h=a.n(f);f=a("07sv");var A=a.n(f);f=a("wSKX");var v=a.n(f),N=a("RTdn"),K=a("K9Qf");f=a("moUy");a.n(f);var L=a("8tbe"),D=a("cuGy"),F=a("jItp"),S=a("yVmd"),B=window,u=a("7t+N");u.__orig="rmq";window.rmqJquery=u;window.jQuery&&(window.jQuery.__orig="own");var J=null;a=function(){function a(b,c,d,e,f,q){r()(this,a);J=this;B.LiteratumHandler=this;this.grovePrefix=b;this.apiBase=
c;this.gp=d||{};this.urlParams=e||{};this.contentType="EPUB"+(B.readerConfig&&"pdf"===B.readerConfig.format?"_PDF":"");this.urlParams.contentType=this.contentType;b=this.urlParams;c=this.gp;Object.assign(b,{});b.theme="liter";b.version=c.isLiter?"liter":"full";c={frameOrigin:Object(N.extractSiteUrl)(!1),expanded:"liter",mode:"literatum"};Object.assign(c,b);this.dataset=c=h()(c,v.a);this.waitForLogin=f;this.userLoggedIn=q;this.highlightEventHandler=this.rmqInjectorHandler=this.contentFrameHandler=
this.readerCheckerIntervalId=this.readerUtil=null}y()(a,[{key:"installInFrame",value:function(a,b,c){if(a&&a.contentWindow){var d=this.dataset,e=a.contentWindow.document.createElement("script");e.id="groveScript";e.src=this.grovePrefix+("/"===this.grovePrefix[this.grovePrefix.length-1]?"":"/")+"epub_internal.bundle.js";if(c){a.contentWindow.spineOfFrame=c;var f=this;Object.defineProperty(a.contentWindow,"readerUtil",{get:function(){return f.readerUtil},set:function(a){},configurable:!1,enumerable:!0});
a.contentWindow.windowEventManager=new F.WindowEventManager(a.contentWindow.window)}e.dataset.page=JSON.stringify(b);e.dataset.waitForLogin=this.waitForLogin&&!this.userLoggedIn?"true":"false";A()(a.dataset,function(a,b){e.dataset[b]=a});A()(d,function(a,b){e.dataset[b]=a});try{a.contentWindow.document.head.appendChild(e)}catch(O){Object(D.error)(O)}}}},{key:"getSpineItemForPage",value:function(a){return this.reader.getLoadedSpineItems().filter(function(b){return b.idref===a})[0]}},{key:"getFramesForPage",
value:function(b){var c=this.getSpineItemForPage(b);return c?a.getContentFrames().filter(function(a,b){a=b.dataset.loaduri;b=c.href;return a&&-1!==a.indexOf(b)}):u()}},{key:"_handleUserLoginEvent",value:function(a,b){this.userLoggedIn=b&&b.id;this.waitForLogin&&this._handleFrameEvent(new L.c(b))}},{key:"_handleUserLogoutEvent",value:function(a){delete this.userLoggedIn;this.contentFrameHandler&&this.contentFrameHandler.clearLoadedAnnotations();this.waitForLogin&&this._handleFrameEvent(new L.a("logout"))}},
{key:"initiate",value:function(a){var b=this;return Object(m["default"])(function(){return B.READIUM}).then(function(a){var c=a.fxlPagingFrameScale;a.fxlPagingFrameScale=function(a,b){try{return a[0].contentDocument?c(a,b):null}catch(Ea){return null}};var d=!1;a&&a.reader&&(d=b._resolveDoiFromReader(a.reader));if(d)return a;throw"could not resolve doi from reader..";}).then(function(c){return new Promise(function(d,e){b.rmqInjectorHandler=new z.a(B,b.dataset,b.grovePrefix,b.apiBase,b.urlParams,b.gp);
b.rmqInjectorHandler.injectInTab(a).then(function(a){d(c)})["catch"](function(a){e("could not inject remarq to readium panel..",a)})})}).then(function(a){return new Promise(function(c,d){try{b.setupReader(a.reader),null!=b.readerCheckerIntervalId&&(b.readerCheckerIntervalId=setInterval(function(){b.reader!==B.READIUM.reader&&(Object(D.debug)("READER CHANGED!!!!"),clearInterval(b.readerCheckerIntervalId),b.setupReader(B.READIUM.reader))},100)),c(b)}catch(ua){d("could not setup reader..",ua)}})})}},
{key:"setupReader",value:function(a){this.reader=a;this.readerUtil||(this.contentFrameHandler=new d.a(this,B),this.highlightEventHandler=new T(this),this.readerUtil=new K.a(a,[this.contentFrameHandler,this.highlightEventHandler]))}},{key:"_resolveDoiFromReader",value:function(a){function b(a){a=a.attr("href");var b=a.indexOf("doi.org");return a.substring(b+7)}if(B.readerConfig&&B.readerConfig.doi)return this.doi=B.readerConfig.doi,!0;a="function"===typeof a.metadata&&a.metadata();var c=u('a[href*="doi.org"]');
1===c.length?this.doi=b(c):1<c.length&&(c=u('p.doi a[href*="doi.org"]'),1===c.length&&(this.doi=b(c)));this.doi||(c=/.*(10\.[0-9]{4}[0-9]?\/).*/,c.test(B.location.pathname)&&(c=c.exec(B.location.pathname)[1],c=B.location.pathname.indexOf(c),this.doi=B.location.pathname.substring(c)));return this.doi?(this.dataset.doi=this.urlParams.doi=this.doi,!0):a&&a.identifier?(this.dataset.doi=this.urlParams.doi=this.doi=a.identifier,!0):!1}},{key:"handleExpand",value:function(a){this.rmqInjectorHandler?this.rmqInjectorHandler.handleExpand(a):
Object(D.debug)("LITERATUM HANDLER :: HANDLE EXPAND -> REMARQ INJECTOR NOT INITIALIZED YET..")}},{key:"scrollToElement",value:function(a,b){this.readerUtil.scrollToElement(a,b)}},{key:"broadcastToFrames",value:function(a){(new Date).getTime();a.name=a.messageIndication;this.readerUtil&&this.readerUtil.updateCurrentView();if(a&&a.name)switch(a.name){case "test":break;case "highlight":this.highlightEventHandler.processEvent(a);break;case "newUser":var b=a.user;b?this._handleUserLoginEvent(a,b):this._handleUserLogoutEvent(a);
break;case "allComments":case "addConversationItems":this._handleAllCommentsEvent(a);break;default:this._handleFrameEvent(a)}else a&&this._handleFrameEvent(a)}},{key:"_handleAllCommentsEvent",value:function(a){var b=this;if(a&&("allComments"===a.messageIndication||"addConversationItems"===a.messageIndication)&&a.comments&&Array.isArray(a.comments)){var c=a.comments.reduce(function(a,c){var d=Object(F.getMostRelativeContextRange)(b.contentType,c.contextRanges,Object(N.extractSiteUrl)(),c.doi,"full/"+
b.doi);(d=d&&d.page)&&d.idref?(a[d.idref]=a[d.idref]||[]).push(c):(a.__unresolved__=a.__unresolved__||[]).push(c);return a},{});u.each(this.contentFrameHandler.loadedContentFrames.holder,function(b,d){b=(c[b]||[]).concat(c.__unresolved__||[]);0<b.length&&!d.isAnnotationCollectionLoaded(b)&&(a.comments=b,d.contentFrame.postMessage(a,"*"))})}}},{key:"_handleFrameEvent",value:function(a){a&&this.contentFrameHandler&&this.contentFrameHandler.loadedContentFrames&&this.contentFrameHandler.loadedContentFrames.values().forEach(function(b){if(b){var c=
b.contentFrame;b=b.spineItem;c&&b&&a&&c.postMessage(a,"*")}})}},{key:"getPage",value:function(a){var b=this,c=this;return new Promise(function(d,e){if(a){var f=b.getFramesForPage(a)[0];f?d({html:f.contentDocument.documentElement.innerHTML}):(f=c.reader.spine().items.filter(function(b){return b.idref===a.idref})[0])?(f=f.href,B.READIUM.getCurrentPublicationFetcher().getFileContentsFromPackage(f,function(a){d({html:a})},function(a){e(a)})):e("cannot find tgt spine for idref ".concat(a.idref))}else e("Not implemented for whole epub")})}},
{key:"destroy",value:function(){this.broadcastToFrames({action:"destroy",reason:"destroy"});this.groveSide=null}},{key:"setOfflineStatus",value:function(a){this.broadcastToFrames(new L.b(a))}}],[{key:"getInstance",value:function(){return J}},{key:"getContentFrames",value:function(){return u("#epub-reader-container").find("iframe")}}]);return a}();var ca=function(){function a(b,c){r()(this,a);this.created=(new Date).getTime();this.applied=null;this.data=b;this.consumer=c?c:null}y()(a,[{key:"process",
value:function(){var a=this;this.consumer&&((new x.b([this.consumer])).on(x.a.CONSUMER_FINISHED,function(){a.applied=(new Date).getTime()}).start(function(){Object(D.debug)("waiting for event consumption")}),this.consumer.start())}}]);return a}(),T=function(a){function d(a){r()(this,d);var b=e()(this,c()(d).call(this));b.events=K.b.eventNames();b.name=[K.b.CONTENT_RELOADED_EVENT,K.b.VIEW_DESTROYED_EVENT,K.b.VIEW_CREATED_EVENT,K.b.CONTENT_FRAME_UNLOADED_EVENT];b.delegate=a?a:null;b.throttleWindow=
5E3;b.showEvent=null;b.hideEvent=null;b.annotationsLoadingConsumer=null;return b}b()(d,a);y()(d,[{key:"notify",value:function(a,b){if(a)switch(a){case K.b.CONTENT_RELOADED_EVENT:this._handleContentReloadedEvent(a,b);break;case K.b.VIEW_DESTROYED_EVENT:case K.b.VIEW_CREATED_EVENT:this._handleReaderViewChangeEvent(a,b);break;case K.b.CONTENT_FRAME_UNLOADED_EVENT:this._handleContentFrameUnloadedEvent(a,b)}}},{key:"_handleContentFrameUnloadedEvent",value:function(a,b){a&&a===K.b.CONTENT_FRAME_UNLOADED_EVENT&&
b&&(a=this&&this.showEvent&&this.showEvent.consumer&&this.showEvent.consumer&&(this.showEvent.consumer.status===x.c.STARTED||this.showEvent.consumer.status===x.c.READY)?this.showEvent:this&&this.hideEvent&&this.hideEvent.consumer&&this.hideEvent.consumer&&(this.hideEvent.consumer.status===x.c.STARTED||this.hideEvent.consumer.status===x.c.READY)?this.hideEvent:null,a&&a.data&&a.data.page&&this.delegate.contentFrameHandler&&this.delegate.contentFrameHandler.loadedContentFrames&&(a=this.delegate.contentFrameHandler.loadedContentFrames.get(a.data.page.idref))&&
a.contentFrame&&a.contentFrame.sHref===b&&(this.cancel(),Object(D.debug)("found processed highlight in the removed content frame! canceling process..")))}},{key:"_handleReaderViewChangeEvent",value:function(a,b){!a||a!==K.b.VIEW_DESTROYED_EVENT&&a!==K.b.VIEW_CREATED_EVENT||this.cancel()}},{key:"_handleContentReloadedEvent",value:function(a,b){a&&a===K.b.CONTENT_RELOADED_EVENT&&b&&(a=(a=b["new"])&&a.openPages&&Array.isArray(a.openPages)&&0<a.openPages.length?a.openPages[0]:null)&&(this.showEvent||
this.hideEvent)&&(this.showEvent&&this.showEvent.data&&this.showEvent.consumer&&this.showEvent.consumer.status===x.c.STARTED?(b=this.showEvent.data.page,!b||a.idref===b.idref&&a.spineItemIndex===b.index||this.cancel()):this.showEvent&&this.showEvent.consumer&&this.showEvent.consumer.status===x.c.FINISHED&&this.hideEvent&&this.hideEvent.consumer&&this.hideEvent.data&&(this.hideEvent.consumer.status===x.c.READY||this.hideEvent.consumer.status===x.c.STARTED)&&(b=this.hideEvent.data.page,!b||a.idref===
b.idref&&a.spineItemIndex===b.index||this.cancel()))}},{key:"processEvent",value:function(a){var b=this;if(this._isShowEvent(a)){this.annotationsLoadingConsumer&&this.annotationsLoadingConsumer.status!==x.c.FINISHED&&Object(D.debug)("Unfinished consumer?");if(this.showEvent)if(this.isSameEvent(this.showEvent.data,a)){if(this.showEvent.consumer.status!==x.c.FINISHED){Object(D.debug)("skipping event as a same one is already processed..");return}Object(D.debug)("redo highlight & scroll")}else this.cancel(),
Object(D.debug)("canceling previous processed highlight event..",a);Object(D.debug)("creating new show event and start process..");this.annotationsLoadingConsumer=this.createAnnotationsLoadingConsumer(a,function(){b.showEvent=new ca(a,b.createHighlightEventConsumer(a));b.showEvent.process()})}else if(!this._isHideEvent(a)||this.annotationsLoadingConsumer&&this.annotationsLoadingConsumer.status!==x.c.FINISHED)this._isHideEvent(a)&&this.annotationsLoadingConsumer&&this.annotationsLoadingConsumer.status===
x.c.STARTED&&(new x.b([this.annotationsLoadingConsumer],function(){Object(D.debug)("hide event is waiting for loading annotations consumer to finish")})).on(x.a.CONSUMER_FINISHED,function(c){!b.hideEvent&&b.showEvent&&b._matchEvents(b.showEvent.data,a)&&b.annotationsLoadingConsumer&&b.annotationsLoadingConsumer.status===x.c.FINISHED&&b.processEvent(a)}).start();else if(!this.hideEvent&&this.showEvent&&this._matchEvents(this.showEvent.data,a)){this.hideEvent=new ca(a,this.createHighlightEventConsumer(a));
var c=function(){var a=function(){b.hideEvent?((new x.b([b.hideEvent.consumer],function(){Object(D.debug)("waiting for hide highlight to finish..")})).on(x.a.CONSUMER_FINISHED,function(){b.cancel()}).start(),b.hideEvent.process()):Object(D.debug)("highlight hide event canceled!")},c=b.hideEvent.created-b.showEvent.applied;c<b.throttleWindow?(c=0>c?b.throttleWindow:b.throttleWindow-c,setTimeout(a,c)):a()};this.showEvent&&this.showEvent.consumer&&this.showEvent.consumer.status===x.c.FINISHED?c():this.showEvent&&
this.showEvent.consumer&&this.showEvent.consumer.status===x.c.STARTED&&(new x.b([this.showEvent.consumer],function(){Object(D.debug)("waiting for show event to finish..")})).on(x.a.CONSUMER_FINISHED,function(a){c()}).start()}else this.hideEvent?Object(D.debug)("skipping hide highlight event because another is in progress..",a):Object(D.debug)("skipping hide highlight event because not matched with the current handle show highlight..",a)}},{key:"createAnnotationsLoadingConsumer",value:function(a,b){if(a&&
this.delegate.readerUtil.currentView&&this.delegate.readerUtil.currentView.isLoaded(a.page)&&this.delegate.contentFrameHandler&&this.delegate.contentFrameHandler.loadedContentFrames){var c=this.delegate.contentFrameHandler.loadedContentFrames.get(a.page.idref);if(c&&c.isAnnotationLoaded({commentId:a.commentId,access:a.access,page:a.page}))return(new x.b([],function(){Object(D.debug)("annotations loaded for frame..");b&&"function"===typeof b&&b()})).start();if(c&&!c.isAnnotationLoaded({commentId:a.commentId,
access:a.access,page:a.page}))return(new x.b([this.delegate.contentFrameHandler],function(){Object(D.debug)("waiting for annotations to load on a loaded content frame..")})).on(S.a.ANNOTATIONS_LOADED_EVENT,function(c){if(c&&c.result&&c.delegate){var d=c.result;d&&d.isAnnotationLoaded({commentId:a.commentId,access:a.access,page:a.page})?(Object(D.debug)("annotations for event loaded.. ",a),b&&"function"===typeof b&&b()):d&&!d.isAnnotationLoaded({commentId:a.commentId,access:a.access,page:a.page})?
c.replay():Object(D.error)("not expected!")}}).start()}else return(new x.b([],function(){Object(D.debug)("content frame not loaded yet, skipping annot loading consumer..");b&&"function"===typeof b&&b()})).start()}},{key:"createHighlightEventConsumer",value:function(a){var b=this,c=a.page,d=Object(F.getMostRelativeContextRange)(this.delegate.contentType,a.contextRanges,Object(N.extractSiteUrl)(),"full/"+this.doi,"full/"+this.doi);c||(c=d&&d.page);return c&&c.idref&&this.delegate.readerUtil?this.delegate.readerUtil.currentView&&
this.delegate.readerUtil.currentView.isLoaded(c)?(Object(D.debug)("highlight found in page.. applying scroll."),new x.b([this.delegate.readerUtil,this.delegate.contentFrameHandler],function(){var d=b.delegate.contentFrameHandler.loadedContentFrames.get(c.idref);d&&d.contentFrame?d.contentFrame.postMessage(a,"*"):Object(D.error)("BROADCAST EVENT TO FRAMES -> CONTENT FRAME NOT FOUND!")})):this._isShowEvent(a)?(new x.b([this.delegate.readerUtil,this.delegate.contentFrameHandler],function(){b.delegate.readerUtil.openSpineItemPage(c.idref,
c.index)})).on(K.b.NEW_CONTENT_FRAME_EVENT,function(a){Object(D.debug)("consuming the new content frame event.. [idref : "+c.idref+"]");Object(D.debug)(a)}).on(S.a.ANNOTATIONS_LOADED_EVENT,function(d){Object(D.debug)("consuming the annotations loaded event.. [idref : "+c.idref+"]");Object(D.debug)(d);var e=b.delegate.contentFrameHandler.loadedContentFrames.get(c.idref);e&&e.contentFrame&&e.isAnnotationLoaded(a)?e.contentFrame.postMessage(a,"*"):d.replay()}):new x.b([],function(){Object(D.debug)("Noop chain event consumer")}):
null}},{key:"_isShowEvent",value:function(a){return!!a&&a.highlight}},{key:"_isHideEvent",value:function(a){return!!a&&!a.highlight}},{key:"_matchEvents",value:function(a,b){return!!a&&!!b&&a.access===b.access&&a.highlight===!b.highlight&&(a.commentId&&b.commentId&&a.commentId===b.commentId||a.id&&b.id&&a.id===b.id)}},{key:"isSameEvent",value:function(a,b){return!!a&&!!b&&a.access===b.access&&a.highlight===b.highlight&&(a.commentId&&b.commentId&&a.commentId===b.commentId||a.id&&b.id&&a.id===b.id)}},
{key:"cancel",value:function(){this.annotationsLoadingConsumer=(this.annotationsLoadingConsumer&&this.annotationsLoadingConsumer.cancel(),null);this.showEvent=(this.showEvent&&this.showEvent.consumer&&this.showEvent.consumer.cancel(),null);this.hideEvent=(this.hideEvent&&this.hideEvent.consumer&&this.hideEvent.consumer.cancel(),null)}}]);return d}(f.Observer);k.a=a},HAGj:function(f,k,a){var e=a("i4ON"),c=a("bIjD"),b=a("ZGh9"),r=a("yCNF"),y=a("Ubhr");f.exports=function(a,d,f,k){if(!r(a))return a;d=
c(d,a);for(var h=-1,m=d.length,x=m-1,z=a;null!=z&&++h<m;){var K=y(d[h]),L=f;if(h!=x){var D=z[K];L=k?k(D,K,z):void 0;void 0===L&&(L=r(D)?D:b(d[h+1])?[]:{})}e(z,K,L);z=z[K]}return a}},HCHl:function(f,k,a){f=a("Z60a");var e=a.n(f);f=a("C9uT");var c=a.n(f),b=a("4T/i"),r=a("6t3S"),y=a("ObtK");f=a("JEhQ");var m=a.n(f),d=a("7t+N");d.__orig="rmq";window.rmqJquery=d;window.jQuery&&(window.jQuery.__orig="own");var x=0,z={};a=function(){function a(b,c,f,h,m,k){e()(this,a);this.id=x++;this.gp=m;z[""+this.id]=
this;this.Remarq=b;this.pdfHandler=new y.a(b,c,f,h,m);d("body").append('<div id="rmq_pdfTooltip" class="rmq_tooltipCustom rmq_tooltipPosition rmq_pdfTooltipbg" data-init="true" style="display: none"><div class="rmq_tooltiptext rmq_annotatedpdf rmq_adderPdfExplanatoryText">Select REMARQ PDF to open the article including all annotations and conversations.</div><span class="rmq_tooltiptext"><button id="rmq_annotatedpdf"><div class="rmq_adderIcon"><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="15" height="19" viewBox="0 0 15 19"><defs><path id="rmqpdf_a" d="M.655 1.39h4.79V.45H.655z"/><path id="rmqpdf_c" d="M0 18.611h14.101V.001H0v18.61zm1.5-1.5h11.102V1.498H1.5V17.11z"/><path id="rmqpdf_e" d="M3.046.22c1.31 0 2.4.812 2.4 2.132v2.224c0 1.181-.822 1.947-1.93 2.086v.147c0 .526.148.647.729.647h.139v.83a2.751 2.751 0 0 1-.37.028c-.895 0-1.466-.425-1.466-1.246v-.406C1.44 6.514.655 5.748.655 4.576V2.361c0-1.319 1.072-2.14 2.39-2.14zm1.338 4.218v-1.78c0-.223-.027-.426-.083-.592-.147-.618-.683-.868-1.255-.868-.701 0-1.33.38-1.33 1.31V4.29c0 .221.028.416.075.59.156.61.692.86 1.255.86.7 0 1.338-.362 1.338-1.302z"/></defs><g fill="none" fill-rule="evenodd"><g transform="translate(4 13)"><mask id="rmqpdf_b" fill="#fff"><use xlink:href="#rmqpdf_a"/></mask><use fill="#333" xlink:href="#rmqpdf_a"/><g fill="#F8F8F8" mask="url(#rmqpdf_b)"><path d="M-5-14h16V6H-5z"/></g></g><mask id="rmqpdf_d" fill="#fff"><use xlink:href="#rmqpdf_c"/></mask><use fill="#333" xlink:href="#rmqpdf_c"/><g fill="#F8F8F8" mask="url(#rmqpdf_d)"><path d="M-1-1h16v20H-1z"/></g><g transform="translate(4 4)"><mask id="rmqpdf_f" fill="#fff"><use xlink:href="#rmqpdf_e"/></mask><use fill="#333" xlink:href="#rmqpdf_e"/><g fill="#F8F8F8" mask="url(#rmqpdf_f)"><path d="M-5-5h16v20H-5z"/></g></g></g></svg></div><div class="rmq_adderText">REMARQ PDF</div></button><button id="rmq_originalpdf"><div class="rmq_adderIcon"><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="14" height="19" viewBox="0 0 14 19"><defs><path id="pdf_a" d="M0 18.611h14.101V.001H0v18.61zm1.5-1.5h11.102V1.498H1.5V17.11z"/><path id="pdf_c" d="M3.16 5.85l.017-.035c.103-.277.103-.277.172-.449.035-.12.121-.363.311-.914.086-.225.138-.432.19-.604.258.448.465.793.776 1.225.12.155.207.293.31.414l-.155.051c-.12.052-.259.086-.449.156l-.24.086c-.432.138-.674.224-1.07.38.051-.104.085-.207.137-.31M3.556.845a.399.399 0 0 1 .052-.12c.017.017.017.052.034.102.07.38.07.501-.034 1.001-.017-.05-.035-.103-.035-.137-.086-.38-.103-.57-.017-.846m2.916 5.037c.172 0 .344 0 .585.052.173.035.225.103.225.121v.121s-.018.017-.103.034a.847.847 0 0 1-.345.018c-.086-.035-.225-.087-.518-.328.052-.018.104-.018.156-.018M1.417 7.781c-.07.121-.12.242-.172.328-.173.328-.207.396-.31.5-.07.052-.156.017-.208-.017C.71 8.575.658 8.54.78 8.23c.068-.173.397-.38.69-.569 0 .051-.035.085-.052.12m1.26-2.622c-.052.155-.052.155-.156.414l-.017.035a8.76 8.76 0 0 1-.466.982c-.207.104-.414.207-.707.38-.62.362-1.053.621-1.208 1.035-.086.225-.293.777.155 1.14a.846.846 0 0 0 1.105 0c.207-.19.293-.363.465-.692.052-.085.104-.189.172-.327.277-.535.45-.897.484-.949 0-.017.017-.034.034-.052.121-.05.26-.103.414-.172.57-.242.811-.31 1.328-.483l.242-.086c.19-.069.327-.103.466-.155.172-.069.311-.104.448-.155.121.103.242.223.397.344.328.276.553.414.794.483.207.052.5.035.69-.017.604-.155.62-.603.638-.794.017-.259-.138-.707-.81-.828-.31-.052-.518-.052-.708-.052-.19 0-.345.018-.587.052a.983.983 0 0 1-.207.035c-.172-.173-.293-.345-.483-.604-.362-.518-.586-.88-.948-1.518-.052-.086-.104-.189-.156-.276.035-.155.07-.327.104-.534l.052-.243c.137-.655.172-.879.068-1.414-.12-.587-.517-.724-.724-.707-.103 0-.517.07-.69.673-.12.413-.103.724 0 1.155.07.311.225.691.483 1.157-.086.362-.19.69-.379 1.241-.173.57-.259.794-.293.932"/></defs><g fill="none" fill-rule="evenodd"><mask id="pdf_b" fill="#fff"><use xlink:href="#pdf_a"/></mask><use fill="#333" xlink:href="#pdf_a"/><g fill="#F8F8F8" mask="url(#pdf_b)"><path d="M-1-1h16v20H-1z"/></g><g><g transform="translate(3 5)"><mask id="pdf_d" fill="#fff"><use xlink:href="#pdf_c"/></mask><use fill="#333" xlink:href="#pdf_c"/><g fill="#F8F8F8" mask="url(#pdf_d)"><path d="M-1 0H9v10H-1z"/></g></g></g></g></svg></div><div class="rmq_adderText">PDF</div></button></span></div>');
this.tooltip=d("#rmq_pdfTooltip").hide();d("#rmq_annotatedpdf",this.tooltip).on("click",this.showRemarq(k));d("#rmq_originalpdf",this.tooltip).on("click",this.showOriginal());d("#rmq_clearPDF",this.tooltip).on("click",this.hide());document.addEventListener("click",this.hide());this.decoratedLinks=[];this.sendGaEvent=Object(r.a)(m)}c()(a,[{key:"show",value:function(a,b,c){var e=this;return function(c,f){var h=c.currentTarget;if(f||h.dataset.denied)if(h.href)window.location.href=h.href;else{if(h=d(h),
(c=h.data("handlerFn"))&&h.off("click",c),h.click(),c)h.on("click",c)}else e.sendGaEvent("PdfDialog","ShowPrompt"),e.showEvent=c.originalEvent,c.preventDefault(),f=d(h).offset(),c=f.top+d(h).height()+6,f=f.left,e.tgtElement=h,e.tgtElement.type=a,e.tgtElement.pdId=b,e.tooltip.css({top:c,left:f}).show()}}},{key:"hide",value:function(){var a=this,b=this;b.hideFN=function(c){a.hideEvent=c;if((!b.showEvent||b.showEvent.timeStamp!==c.timeStamp)&&b.tgtElement&&c.target!==b.tgtElement)if(b.actionEvent||b.sendGaEvent("PdfDialog",
"HidePrompt"),delete b.actionEvent,b.tgtElement.dataset&&"loading"===b.tgtElement.dataset.status)d(b.tgtElement).data("loadPromise").then(function(a){b.tgtElement=null;b.tooltip.hide()})["catch"](function(a){b.tgtElement=null;b.tooltip.hide()});else b.tgtElement=null,b.tooltip.hide()};return b.hideFN}},{key:"showRemarq",value:function(a){var b=this,c=this;c.showRemarqFN=function(e){c.sendGaEvent("PdfDialog","ShowRemarq");c.actionEvent=e;var f=c.tgtElement;e=f.type;var h=f.pdId,k=parseFloat(f.innerText.substring(f.innerText.indexOf("(")+
1,f.innerText.indexOf(" K)")));isNaN(k)&&(k=null);c.tgtElement.dataset.status="loading";var r=d.Deferred();d(c.tgtElement).data("loadPromise",r.promise());var z=d("#rmq_annotatedpdf",b.tooltip).html();d("#rmq_annotatedpdf",b.tooltip).html('<img src="'.concat(m.a,'"></img>')).prop("disabled","disabled");c.pdfHandler.handle(e,h,f,k,a).then(function(a){c.tgtElement.dataset.status="loaded";c.Remarq.pdfFrame=a;d("#rmq_annotatedpdf",b.tooltip).html(z).prop("disabled","");r.resolve(a)})["catch"](function(a){c.tgtElement.dataset.status=
"load_error";d("#rmq_annotatedpdf",b.tooltip).html(z).prop("disabled","");"A"===f.tagName&&(f.dataset.denied=a&&a.msg||"true");r.reject(a);d(f).click()})};return c.showRemarqFN}},{key:"showOriginal",value:function(){var a=this;a.showOriginalFN=function(b){a.sendGaEvent("PdfDialog","ShowOriginal");a.actionEvent=b;d(a.tgtElement).trigger("click",[!0])};return a.showOriginalFN}},{key:"decorateLinks",value:function(a,c,e){var f=this;c&&c.map(function(a){return Object(b.a)(a).filter(function(a){return a.href&&
-1!==a.href.indexOf("scholar.google.com")?!1:!0})}).forEach(function(b){b.forEach(function(b){var c=d(b);b=b.click;var h=f.show(e,a);c.on("click",h);c.data("handlerFn",h);c.data("fallbackFn",b);f.decoratedLinks.push(c)})})}},{key:"destroy",value:function(){this.tooltip&&(document.removeEventListener("click",this.hide()),d("#rmq_annotatedpdf",this.tooltip).off("click",this.showRemarqFN),d("#rmq_originalpdf",this.tooltip).off("click",this.showOriginalFN),d("#rmq_clearPDF",this.tooltip).off("click",
this.hideFN),this.tooltip.remove(),this.decoratedLinks.forEach(function(a){var b=a.data("handlerFn");a.data("fallbackFn");a.off("click",b)}),this.tooltip=null,delete z[""+this.id])}}]);return a}();k.a=a},"Ilb/":function(f,k,a){var e=a("Kzd6");f.exports=function(a,b){b=b?e(a.buffer):a.buffer;return new a.constructor(b,a.byteOffset,a.length)}},JDN0:function(f,k,a){var e=a("aCM0"),c=a("NGEn"),b=a("UnEC");f.exports=function(a){return"string"==typeof a||!c(a)&&b(a)&&"[object String]"==e(a)}},JEhQ:function(f,
k){f.exports="data:image/gif;base64,R0lGODlhGAAYAPQAAP///wAAAM7Ozvr6+uDg4LCwsOjo6I6OjsjIyJycnNjY2KioqMDAwPLy8nZ2doaGhri4uGhoaAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACH/C05FVFNDQVBFMi4wAwEAAAAh/hpDcmVhdGVkIHdpdGggYWpheGxvYWQuaW5mbwAh+QQJBwAAACwAAAAAGAAYAAAFriAgjiQAQWVaDgr5POSgkoTDjFE0NoQ8iw8HQZQTDQjDn4jhSABhAAOhoTqSDg7qSUQwxEaEwwFhXHhHgzOA1xshxAnfTzotGRaHglJqkJcaVEqCgyoCBQkJBQKDDXQGDYaIioyOgYSXA36XIgYMBWRzXZoKBQUMmil0lgalLSIClgBpO0g+s26nUWddXyoEDIsACq5SsTMMDIECwUdJPw0Mzsu0qHYkw72bBmozIQAh+QQJBwAAACwAAAAAGAAYAAAFsCAgjiTAMGVaDgR5HKQwqKNxIKPjjFCk0KNXC6ATKSI7oAhxWIhezwhENTCQEoeGCdWIPEgzESGxEIgGBWstEW4QCGGAIJEoxGmGt5ZkgCRQQHkGd2CESoeIIwoMBQUMP4cNeQQGDYuNj4iSb5WJnmeGng0CDGaBlIQEJziHk3sABidDAHBgagButSKvAAoyuHuUYHgCkAZqebw0AgLBQyyzNKO3byNuoSS8x8OfwIchACH5BAkHAAAALAAAAAAYABgAAAW4ICCOJIAgZVoOBJkkpDKoo5EI43GMjNPSokXCINKJCI4HcCRIQEQvqIOhGhBHhUTDhGo4diOZyFAoKEQDxra2mAEgjghOpCgz3LTBIxJ5kgwMBShACREHZ1V4Kg1rS44pBAgMDAg/Sw0GBAQGDZGTlY+YmpyPpSQDiqYiDQoCliqZBqkGAgKIS5kEjQ21VwCyp76dBHiNvz+MR74AqSOdVwbQuo+abppo10ssjdkAnc0rf8vgl8YqIQAh+QQJBwAAACwAAAAAGAAYAAAFrCAgjiQgCGVaDgZZFCQxqKNRKGOSjMjR0qLXTyciHA7AkaLACMIAiwOC1iAxCrMToHHYjWQiA4NBEA0Q1RpWxHg4cMXxNDk4OBxNUkPAQAEXDgllKgMzQA1pSYopBgonCj9JEA8REQ8QjY+RQJOVl4ugoYssBJuMpYYjDQSliwasiQOwNakALKqsqbWvIohFm7V6rQAGP6+JQLlFg7KDQLKJrLjBKbvAor3IKiEAIfkECQcAAAAsAAAAABgAGAAABbUgII4koChlmhokw5DEoI4NQ4xFMQoJO4uuhignMiQWvxGBIQC+AJBEUyUcIRiyE6CR0CllW4HABxBURTUw4nC4FcWo5CDBRpQaCoF7VjgsyCUDYDMNZ0mHdwYEBAaGMwwHDg4HDA2KjI4qkJKUiJ6faJkiA4qAKQkRB3E0i6YpAw8RERAjA4tnBoMApCMQDhFTuySKoSKMJAq6rD4GzASiJYtgi6PUcs9Kew0xh7rNJMqIhYchACH5BAkHAAAALAAAAAAYABgAAAW0ICCOJEAQZZo2JIKQxqCOjWCMDDMqxT2LAgELkBMZCoXfyCBQiFwiRsGpku0EshNgUNAtrYPT0GQVNRBWwSKBMp98P24iISgNDAS4ipGA6JUpA2WAhDR4eWM/CAkHBwkIDYcGiTOLjY+FmZkNlCN3eUoLDmwlDW+AAwcODl5bYl8wCVYMDw5UWzBtnAANEQ8kBIM0oAAGPgcREIQnVloAChEOqARjzgAQEbczg8YkWJq8nSUhACH5BAkHAAAALAAAAAAYABgAAAWtICCOJGAYZZoOpKKQqDoORDMKwkgwtiwSBBYAJ2owGL5RgxBziQQMgkwoMkhNqAEDARPSaiMDFdDIiRSFQowMXE8Z6RdpYHWnEAWGPVkajPmARVZMPUkCBQkJBQINgwaFPoeJi4GVlQ2Qc3VJBQcLV0ptfAMJBwdcIl+FYjALQgimoGNWIhAQZA4HXSpLMQ8PIgkOSHxAQhERPw7ASTSFyCMMDqBTJL8tf3y2fCEAIfkECQcAAAAsAAAAABgAGAAABa8gII4k0DRlmg6kYZCoOg5EDBDEaAi2jLO3nEkgkMEIL4BLpBAkVy3hCTAQKGAznM0AFNFGBAbj2cA9jQixcGZAGgECBu/9HnTp+FGjjezJFAwFBQwKe2Z+KoCChHmNjVMqA21nKQwJEJRlbnUFCQlFXlpeCWcGBUACCwlrdw8RKGImBwktdyMQEQciB7oACwcIeA4RVwAODiIGvHQKERAjxyMIB5QlVSTLYLZ0sW8hACH5BAkHAAAALAAAAAAYABgAAAW0ICCOJNA0ZZoOpGGQrDoOBCoSxNgQsQzgMZyIlvOJdi+AS2SoyXrK4umWPM5wNiV0UDUIBNkdoepTfMkA7thIECiyRtUAGq8fm2O4jIBgMBA1eAZ6Knx+gHaJR4QwdCMKBxEJRggFDGgQEREPjjAMBQUKIwIRDhBDC2QNDDEKoEkDoiMHDigICGkJBS2dDA6TAAnAEAkCdQ8ORQcHTAkLcQQODLPMIgIJaCWxJMIkPIoAt3EhACH5BAkHAAAALAAAAAAYABgAAAWtICCOJNA0ZZoOpGGQrDoOBCoSxNgQsQzgMZyIlvOJdi+AS2SoyXrK4umWHM5wNiV0UN3xdLiqr+mENcWpM9TIbrsBkEck8oC0DQqBQGGIz+t3eXtob0ZTPgNrIwQJDgtGAgwCWSIMDg4HiiUIDAxFAAoODwxDBWINCEGdSTQkCQcoegADBaQ6MggHjwAFBZUFCm0HB0kJCUy9bAYHCCPGIwqmRq0jySMGmj6yRiEAIfkECQcAAAAsAAAAABgAGAAABbIgII4k0DRlmg6kYZCsOg4EKhLE2BCxDOAxnIiW84l2L4BLZKipBopW8XRLDkeCiAMyMvQAA+uON4JEIo+vqukkKQ6RhLHplVGN+LyKcXA4Dgx5DWwGDXx+gIKENnqNdzIDaiMECwcFRgQCCowiCAcHCZIlCgICVgSfCEMMnA0CXaU2YSQFoQAKUQMMqjoyAglcAAyBAAIMRUYLCUkFlybDeAYJryLNk6xGNCTQXY0juHghACH5BAkHAAAALAAAAAAYABgAAAWzICCOJNA0ZVoOAmkY5KCSSgSNBDE2hDyLjohClBMNij8RJHIQvZwEVOpIekRQJyJs5AMoHA+GMbE1lnm9EcPhOHRnhpwUl3AsknHDm5RN+v8qCAkHBwkIfw1xBAYNgoSGiIqMgJQifZUjBhAJYj95ewIJCQV7KYpzBAkLLQADCHOtOpY5PgNlAAykAEUsQ1wzCgWdCIdeArczBQVbDJ0NAqyeBb64nQAGArBTt8R8mLuyPyEAOwAAAAAAAAAAAA=="},
JUs9:function(f,k,a){var e=a("G8ar");f.exports=function(a,b){return!(null==a||!a.length)&&-1<e(a,b,0)}},JyB8:function(f,k,a){Object.defineProperty(k,"__esModule",{value:!0});f=function(){function a(){this.holder={}}a.prototype.put=function(a,b){return this.holder&&b&&a?(this.holder[a]=b,!0):!1};a.prototype.get=function(a){return this.holder&&a&&this.holder[a]?this.holder[a]:null};a.prototype.contains=function(a){return!!(this.holder&&a&&0<=Object.keys(this.holder).indexOf(a))};a.prototype.remove=
function(a){this.holder&&a&&delete this.holder[a]};a.prototype.isEmpty=function(){if(this.holder){var a=Object.keys(this.holder);if(a&&Array.isArray(a))return 0===a.length}return!1};a.prototype.delegate=function(a){return a&&"function"===typeof a?a(this):null};a.prototype.values=function(){var a=this;return this.holder&&"object"===typeof this.holder?Object.keys(this.holder).map(function(b){return a.holder[b]}):[]};a.prototype.keys=function(){return this.holder&&"object"===typeof this.holder?Object.keys(this.holder):
[]};a.prototype.clear=function(){var a=this;this.holder&&"object"===typeof this.holder&&Object.keys(this.holder).forEach(function(b){return delete a.holder[b]})};a.prototype.updateBucketProperty=function(a,b,e,f){return(f=this.get(a))&&b?(f[b]=e,this.put(a,f),!0):!1};return a}();k.HolderUtil=f},K9Qf:function(f,k,a){a.d(k,"b",function(){return K});a.d(k,"a",function(){return L});a.d(k,"c",function(){return B});f=a("Z60a");var e=a.n(f);f=a("C9uT");var c=a.n(f);f=a("T/v0");var b=a.n(f);f=a("tNLN");var r=
a.n(f);f=a("BnCw");var y=a.n(f);f=a("j/rp");var m=a.n(f);f=a("KgVm");var d=a.n(f);f=a("P6Rp");var x=a.n(f);f=a("moUy");a.n(f);var z=a("cuGy");"use strict";var h=a("7t+N");h.__orig="rmq";window.rmqJquery=h;window.jQuery&&(window.jQuery.__orig="own");var A=Object.freeze({MEDIA_OVERLAY_STATUS_CHANGED:"MediaOverlayStatusChanged",PAGINATION_CHANGED:"PaginationChanged",READER_VIEW_CREATED:"ReaderViewCreated",READER_VIEW_DESTROYED:"ReaderViewDestroyed",SETTINGS_APPLIED:"SettingsApplied"}),v=Object.freeze({CONTENT_DOCUMENT_LOADED:"ContentDocumentLoaded",
CONTENT_DOCUMENT_LOAD_START:"ContentDocumentLoadStart",CONTENT_DOCUMENT_UNLOADED:"ContentDocumentUnloaded",IFRAME_LOADED:"IframeLoaded",CURRENT_VIEW_PAGINATION_CHANGED:"CurrentViewPaginationChanged",FXL_VIEW_RESIZED:"FXLViewResized"}),N=Object.freeze({PAGE_EFFECT:1,UNKNOWN:2,SCROLL_EFFECT:4,name:function(a){if(a)switch(a){case 1:case "PAGE_EFFECT":return"PAGE_EFFECT";case 4:case "SCROLL_EFFECT":return"SCROLL_EFFECT"}return null}}),K=Object.freeze({NEW_CONTENT_FRAME_EVENT:"NEW_CONTENT_FRAME_EVENT",
CONTENT_FRAME_UNLOADED_EVENT:"CONTENT_FRAME_UNLOADED_EVENT",CONTENT_RELOADED_EVENT:"CONTENT_RELOADED_EVENT",VIEW_CREATED_EVENT:"VIEW_CREATED_EVENT",VIEW_DESTROYED_EVENT:"VIEW_DESTROYED_EVENT",eventNames:function(){return Object.keys(K)}}),L=function(a){function d(a,c){e()(this,d);c=b()(this,r()(d).call(this,c));c.id=(new Date).getMilliseconds();c._reader=a?a:null;c.settings=null;c.setViewerSettings(c._reader?c._reader.viewerSettings():null);c.currentView=null;c.currentViewType=N.name(c._reader?c._reader.getCurrentViewType():
null);c.spineItems=[];c._setupReaderState();c.initSubscription();return c}m()(d,a);c()(d,[{key:"getMetadata",value:function(){return this._reader&&"function"===typeof this._reader.metadata?this._reader.metadata():null}},{key:"subscribe",value:function(a){y()(r()(d.prototype),"subscribe",this).call(this,a);this.currentView&&this.currentView.subscribe(a)}},{key:"unsubscribe",value:function(a){y()(r()(d.prototype),"unsubscribe",this).call(this,a);this.currentView&&this.currentView.unsubscribe(a)}},{key:"initSubscription",
value:function(){if(this._reader){var a={ctx:this};this._reader.addListener(A.PAGINATION_CHANGED,this._handlePaginationChangedEvent,a,!1);this._reader.addListener(A.READER_VIEW_CREATED,this._handleReaderViewCreatedEvent,a,!1);this._reader.addListener(A.READER_VIEW_DESTROYED,this._handleReaderViewDestroyedEvent,a,!1);this._reader.addListener(A.SETTINGS_APPLIED,this._handleSettingsAppliedEvent,a,!1);this._reader.addListener(v.CONTENT_DOCUMENT_LOADED,this._handleContentDocumentLoadedEvent,a,!1);this._reader.addListener(v.CURRENT_VIEW_PAGINATION_CHANGED,
this._handleCurrentViewPaginationChangedEvent,a,!1)}}},{key:"_handlePaginationChangedEvent",value:function(a){this.ctx._setupReaderState()}},{key:"_setupReaderState",value:function(){this&&this._reader&&this.spineItems&&Array.isArray(this.spineItems)&&0===this.spineItems.length&&this._setSpineItems(this._reader.spine());this&&!this.currentView&&this._initCurrentView()}},{key:"_initCurrentView",value:function(){if(this&&this._reader&&this.currentView){this.currentView.destroy();this.currentView=null;
var a=this._reader.getCurrentView();if(a)return this._setCurrentView(a),!0}else if(this&&this._reader&&!this.currentView&&(a=this._reader.getCurrentView()))return this._setCurrentView(a),!0;return!1}},{key:"_setSpineItems",value:function(a){a&&a.items&&Array.isArray(a.items)?this.spineItems=a.items.map(function(a){return B.of(a)}):this.spineItems=[]}},{key:"_handleReaderViewCreatedEvent",value:function(a){Object(z.debug)(a);var b=this.ctx;b&&(b.currentViewType=N.name(a),b.notifyAll(K.VIEW_CREATED_EVENT,
b.currentViewType))}},{key:"_handleReaderViewDestroyedEvent",value:function(){var a=this.ctx;a&&(a.currentViewType=null);a&&a.currentView&&(a.currentView.destroy(),a.currentView=null,a.notifyAll(K.VIEW_DESTROYED_EVENT,{}))}},{key:"_handleSettingsAppliedEvent",value:function(){var a=this.ctx;a&&a.setViewerSettings(a._reader?a._reader.viewerSettings():null)}},{key:"_handleContentDocumentLoadedEvent",value:function(a,b){}},{key:"_handleCurrentViewPaginationChangedEvent",value:function(a){}},{key:"_setCurrentView",
value:function(a){this.currentView=a?S.of(a,this):null}},{key:"updateCurrentView",value:function(){this.currentView&&this.currentView.update()}},{key:"scrollToElement",value:function(a,b){this._reader.openSpineItemElementId(b.idref,a,this)}},{key:"openSpineItemPage",value:function(a,b){(a=this._reader.openSpineItemPage(a,0,b))&&this.updateCurrentView();return a}},{key:"openPageIndex",value:function(a){return this._reader.openPageIndex(a)}},{key:"getViewScale",value:function(){return this._reader?
this._reader.getViewScale():null}},{key:"getLoadedSpineItems",value:function(){return this._reader.getLoadedSpineItems()}},{key:"setViewerSettings",value:function(a){this.settings=a?D.of(this._reader.viewerSettings()):null}}]);return d}(f.Subject),D=function(){function a(b){e()(this,a);this._settings=b?b:null;this.columnGap=b&&0<=b.columnGap?b.columnGap:null;this.columnMaxWidth=b&&0<=b.columnMaxWidth?b.columnMaxWidth:null;this.columnMinWidth=b&&0<=b.columnMinWidth?b.columnMinWidth:null;this.fontSelection=
b&&0<=b.fontSelection?b.fontSelection:null;this.fontSize=b&&0<=b.fontSize?b.fontSize:null;this.pageTransition=b&&-10<=b.pageTransition?b.pageTransition:null;this.scroll=b&&b.scroll?b.scroll:null}c()(a,[{key:"update",value:function(a){this._settings&&this._settings.update(a)}}],[{key:"of",value:function(b){return new a(b)}}]);return a}(),F=function(){function a(b,c){e()(this,a);this._$iframe=b?b:null;this.iLoadUri=b&&b[0]&&b[0].dataset&&(b[0].dataset.loaduri||b[0].dataset.src);this.iLoadUri||(this.iLoadUri=
b&&b.dataset&&(b.dataset.loaduri||b.dataset.src));this.sHref=c&&c.href?c.href:null;this.src=(b.data&&"function"===typeof b.data?b:h(b)).data("src");b=this.src.split("/");c=b.indexOf("ops");(this.srcBase=1<c?b[c-1]:b[0])&&this.srcBase.endsWith(".epub")&&(this.srcBase=this.srcBase.substring(0,this.srcBase.length-5));this._$iframe&&this._$iframe[0]&&(b=this._$iframe[0].getAttribute("src"))&&((b=b.split("/"))&&Array.isArray(b)&&0<b.length?this.blobSrc=b[b.length-1]:this.blobSrc=null)}c()(a,[{key:"postMessage",
value:function(a,b){var c=this._$iframe&&this._$iframe[0]&&this._$iframe[0].contentWindow?this._$iframe[0]:this._$iframe;Object(z.debug)("CONTENT FRAME POST MESSAGE:",this);c.contentWindow&&c.contentWindow.postMessage(a,b)}}],[{key:"of",value:function(b,c){return new a(b,c)}}]);return a}(),S=function(a){function f(a,c){e()(this,f);var d=b()(this,r()(f).call(this,c.observers));d._view=a?a:null;d.delegate=c;d.paginationInfo=null;d.setPaginationInfo(d._view?d._view.getPaginationInfo():null);d.loadedSpineItems=
[];d.setLoadedSpineItems(d._view?d._view.getLoadedSpineItems():[]);d.contentFrames=[];d.initContentFramesCollection();d.initSubscriptions();return d}m()(f,a);c()(f,[{key:"initContentFramesCollection",value:function(){var a=this;if(this.paginationInfo&&this.paginationInfo.openPages){var b=this.loadedSpineItems.filter(function(b){return a.paginationInfo.openPages.find(function(a){return b.idref===a.idref&&b.index===a.spineItemIndex&&0<a.spineItemPageCount})});b=this._findInstalledContentFrames(b);this&&
b&&Array.isArray(b)&&b.forEach(function(b){return a.addContentFrame(b)})}}},{key:"update",value:function(){this.setPaginationInfo(this._view?this._view.getPaginationInfo():null);this.setLoadedSpineItems(this._view?this._view.getLoadedSpineItems():[]);this._removeUnloadedContentFrames(this.loadedSpineItems)}},{key:"isLoaded",value:function(a){return!!a&&!!this.loadedSpineItems.find(function(b){return b.idref===a.idref&&b.index===a.index})}},{key:"_findInstalledContentFrames",value:function(a){var b=
[],c=h("#epub-reader-container").find("iframe");if(c&&a&&Array.isArray(a))for(var d=0;d<c.length;d++){var e=c[d];e&&e&&e.dataset&&function(){var c=e.dataset.loaduri||e.dataset.src,d=a.find(function(a){return c&&0<=c.indexOf(a.href)});e&&d&&b.push(F.of(h(e),B.of(d)))}()}return b}},{key:"initSubscriptions",value:function(){if(this._view){var a={ctx:this};this._view.addListener(v.CONTENT_DOCUMENT_LOADED,this._handleContentDocumentLoadedEvent,a,!1);this._view.addListener(v.CONTENT_DOCUMENT_LOAD_START,
this._handleContentDocumentLoadStartEvent,a,!1);this._view.addListener(v.CONTENT_DOCUMENT_UNLOADED,this._handleContentDocumentUnloadedEvent,a,!1);this._view.addListener(v.IFRAME_LOADED,this._handleIframeLoadedEvent,a,!1);this._view.addListener(v.CURRENT_VIEW_PAGINATION_CHANGED,this._handleCurrentViewPaginationChangedEvent,a,!1);this._view.addListener(v.FXL_VIEW_RESIZED,this._handleFXLViewResizedEvent,a,!1)}}},{key:"removeSubscriptions",value:function(){if(this._view){var a={ctx:this};this._view.removeListener(v.CONTENT_DOCUMENT_LOADED,
this._handleContentDocumentLoadedEvent,a,!1);this._view.removeListener(v.CONTENT_DOCUMENT_LOAD_START,this._handleContentDocumentLoadStartEvent,a,!1);this._view.removeListener(v.CONTENT_DOCUMENT_UNLOADED,this._handleContentDocumentUnloadedEvent,a,!1);this._view.removeListener(v.IFRAME_LOADED,this._handleIframeLoadedEvent,a,!1);this._view.removeListener(v.CURRENT_VIEW_PAGINATION_CHANGED,this._handleCurrentViewPaginationChangedEvent,a,!1);this._view.removeListener(v.FXL_VIEW_RESIZED,this._handleFXLViewResizedEvent,
a,!1)}}},{key:"destroy",value:function(){this.removeSubscriptions();this.paginationInfo=null;this.loadedSpineItems=[];this._removeUnloadedContentFrames(this.loadedSpineItems);this.contentFrames=[];this.delegate=this._view=null;this.unsubscribeAll()}},{key:"addContentFrame",value:function(a){if(a&&a._$iframe&&a._$iframe[0]&&a._$iframe[0].contentWindow&&this.contentFrames&&Array.isArray(this.contentFrames)){var b=d()(this.contentFrames,function(b){return b.iLoadUri&&a.iLoadUri&&b.iLoadUri===a.iLoadUri||
b.sHref&&a.sHref&&b.sHref===a.sHref});0<=b&&(this.contentFrames.splice(b,1),this.notifyAll(K.CONTENT_FRAME_UNLOADED_EVENT,a.sHref));this.contentFrames.push(a);(b=this.loadedSpineItems.find(function(b){return b.href===a.sHref}))||(b=this.delegate.spineItems.find(function(b){return b.href===a.sHref}));Object(z.debug)("Reader util : adding new content frame ["+a.sHref+"]");this.notifyAll(K.NEW_CONTENT_FRAME_EVENT,{contentFrame:a,spineOfFrame:b});return!0}return!1}},{key:"_removeUnloadedContentFrames",
value:function(a){var b=this,c=[];a&&Array.isArray(a)&&(a.forEach(function(a){var e=d()(b.contentFrames,function(b){return b.sHref===a.href});0<=e&&c.push(b.contentFrames[e])}),x()(this.contentFrames,c,function(a,b){return a.sHref===b.sHref}).forEach(function(a){Object(z.debug)("Reader util : removing content frame ["+a.sHref+"]");b.notifyAll(K.CONTENT_FRAME_UNLOADED_EVENT,a.sHref)}));this.contentFrames=c}},{key:"_handleContentDocumentLoadedEvent",value:function(a,b){var c=this.ctx;c&&(c.update(),
c.addContentFrame(F.of(a,b)))}},{key:"_handleContentDocumentLoadStartEvent",value:function(a,b){if(a=this.ctx){b=Object.assign({},a.paginationInfo);a.update();var c=Object.assign({},a.paginationInfo);a.notifyAll(K.CONTENT_RELOADED_EVENT,{prev:b,"new":c})}}},{key:"_handleContentDocumentUnloadedEvent",value:function(a,b){}},{key:"_handleIframeLoadedEvent",value:function(a,b){}},{key:"_handleCurrentViewPaginationChangedEvent",value:function(a){(a=this.ctx)&&a.update()}},{key:"_handleFXLViewResizedEvent",
value:function(a,b,c){Object(z.debug)(a,b,c)}},{key:"setPaginationInfo",value:function(a){this.paginationInfo=a?J.of(a):null}},{key:"setLoadedSpineItems",value:function(a){this.loadedSpineItems=a&&Array.isArray(a)&&this.loadedSpineItems&&Array.isArray(this.loadedSpineItems)?a.map(function(a){return B.of(a)}):[]}}],[{key:"of",value:function(a,b){return new f(a,b)}}]);return f}(f.Subject),B=function(){function a(b){e()(this,a);this._spineItem=b?b:null;this.href=b&&b.href?b.href:null;this.idref=b&&b.idref?
b.idref:null;this.index=b&&0<=b.index?b.index:null;this.page_spread=b&&b.page_spread?b.page_spread:null;this.paginationInfo=b&&b.paginationInfo?u.of(b.paginationInfo):null}c()(a,[{key:"isCenterPage",value:function(){return this._spineItem.isCenterPage()}},{key:"isFixedLayout",value:function(){return this._spineItem.isFixedLayout()}},{key:"isFlowScrolledContinuous",value:function(){return this._spineItem.isFlowScrolledContinuous()}},{key:"isFlowScrolledDoc",value:function(){return this._spineItem.isFlowScrolledDoc()}},
{key:"isLeftPage",value:function(){return this._spineItem.isLeftPage()}},{key:"isReflowable",value:function(){return this._spineItem.isReflowable()}},{key:"isRightPage",value:function(){return this._spineItem.isRightPage()}}],[{key:"of",value:function(b){return new a(b)}}]);return a}(),u=function(){function a(b){e()(this,a);this.columnCount=b&&0<=b.columnCount?b.columnCount:null;this.columnGap=b&&0<=b.columnGap?b.columnGap:null;this.columnMaxWidth=b&&0<=b.columnMaxWidth?b.columnMaxWidth:null;this.columnMinWidth=
b&&0<=b.columnMinWidth?b.columnMinWidth:null;this.columnWidth=b&&0<=b.columnWidth?b.columnWidth:null;this.currentPageIndex=b&&0<=b.currentPageIndex?b.currentPageIndex:null;this.currentSpreadIndex=b&&0<=b.currentSpreadIndex?b.currentSpreadIndex:null;this.isVerticalWritingMode=b&&b.isVerticalWritingMode?!0:!1;this.pageOffset=b&&0<=b.pageOffset?b.pageOffset:null;this.rightToLeft=b&&b.rightToLeft?b.rightToLeft:!1;this.spreadCount=b&&0<=b.spreadCount?b.spreadCount:null;this.visibleColumnCount=b&&0<=b.visibleColumnCount?
b.visibleColumnCount:null}c()(a,null,[{key:"of",value:function(b){return new a(b)}}]);return a}(),J=function(){function a(b){e()(this,a);this._viewPaginationInfo=b?b:null;this.spineItemCount=b&&0<=b.spineItemCount?b.spineItemCount:null;this.isFixedLayout=!b||!1!==b.isFixedLayout&&!0!==b.isFixedLayout?null:b.isFixedLayout;this.isRightToLeft=!b||!1!==b.isRightToLeft&&!0!==b.isRightToLeft?null:b.isRightToLeft;this.openPages=this._extractPages(b&&b.openPages?b.openPages:null)}c()(a,[{key:"addOpenPage",
value:function(a,b,c,d){return this._viewPaginationInfo.addOpenPage(a,b,c,d)}},{key:"canGoLeft",value:function(){return this._viewPaginationInfo.canGoLeft()}},{key:"canGoNext",value:function(){return this._viewPaginationInfo.canGoNext()}},{key:"canGoPrev",value:function(){return this._viewPaginationInfo.canGoPrev()}},{key:"canGoRight",value:function(){return this._viewPaginationInfo.canGoRight()}},{key:"_extractPages",value:function(a){var b=[];a&&Array.isArray(a)&&a.forEach(function(a){b.push(ca.of(a))});
return b}}],[{key:"of",value:function(b){return new a(b)}}]);return a}(),ca=function(){function a(b){e()(this,a);this.idref=b&&b.idref?b.idref:null;this.spineItemIndex=b&&0<=b.spineItemIndex?b.spineItemIndex:null;this.spineItemPageCount=b&&0<=b.spineItemPageCount?b.spineItemPageCount:null;this.spineItemPageIndex=b&&0<=b.spineItemPageIndex?b.spineItemPageIndex:null}c()(a,null,[{key:"of",value:function(b){return new a(b)}}]);return a}()},KGqH:function(f,k){var a=/\ud83c[\udffb-\udfff](?=\ud83c[\udffb-\udfff])|(?:[^\ud800-\udfff][\u0300-\u036f\ufe20-\ufe2f\u20d0-\u20ff]?|[\u0300-\u036f\ufe20-\ufe2f\u20d0-\u20ff]|(?:\ud83c[\udde6-\uddff]){2}|[\ud800-\udbff][\udc00-\udfff]|[\ud800-\udfff])[\ufe0e\ufe0f]?(?:[\u0300-\u036f\ufe20-\ufe2f\u20d0-\u20ff]|\ud83c[\udffb-\udfff])?(?:\u200d(?:[^\ud800-\udfff]|(?:\ud83c[\udde6-\uddff]){2}|[\ud800-\udbff][\udc00-\udfff])[\ufe0e\ufe0f]?(?:[\u0300-\u036f\ufe20-\ufe2f\u20d0-\u20ff]|\ud83c[\udffb-\udfff])?)*/g;
f.exports=function(e){return e.match(a)||[]}},Kzd6:function(f,k,a){var e=a("qwTf");f.exports=function(a){var b=new a.constructor(a.byteLength);(new e(b)).set(new e(a));return b}},L6bb:function(f,k,a){(function(){var e=a("95Qu"),c=a("iFDI").utf8,b=a("Re3r"),k=a("iFDI").bin,y=function(a,d){a.constructor==String?a=d&&"binary"===d.encoding?k.stringToBytes(a):c.stringToBytes(a):b(a)?a=Array.prototype.slice.call(a,0):Array.isArray(a)||(a=a.toString());d=e.bytesToWords(a);var f=8*a.length;a=1732584193;for(var m=
-271733879,h=-1732584194,r=271733878,v=0;v<d.length;v++)d[v]=(d[v]<<8|d[v]>>>24)&16711935|(d[v]<<24|d[v]>>>8)&4278255360;d[f>>>5]|=128<<f%32;d[(f+64>>>9<<4)+14]=f;f=y._ff;var N=y._gg,K=y._hh,L=y._ii;for(v=0;v<d.length;v+=16){var D=a,F=m,S=h,B=r;a=f(a,m,h,r,d[v+0],7,-680876936);r=f(r,a,m,h,d[v+1],12,-389564586);h=f(h,r,a,m,d[v+2],17,606105819);m=f(m,h,r,a,d[v+3],22,-1044525330);a=f(a,m,h,r,d[v+4],7,-176418897);r=f(r,a,m,h,d[v+5],12,1200080426);h=f(h,r,a,m,d[v+6],17,-1473231341);m=f(m,h,r,a,d[v+7],
22,-45705983);a=f(a,m,h,r,d[v+8],7,1770035416);r=f(r,a,m,h,d[v+9],12,-1958414417);h=f(h,r,a,m,d[v+10],17,-42063);m=f(m,h,r,a,d[v+11],22,-1990404162);a=f(a,m,h,r,d[v+12],7,1804603682);r=f(r,a,m,h,d[v+13],12,-40341101);h=f(h,r,a,m,d[v+14],17,-1502002290);m=f(m,h,r,a,d[v+15],22,1236535329);a=N(a,m,h,r,d[v+1],5,-165796510);r=N(r,a,m,h,d[v+6],9,-1069501632);h=N(h,r,a,m,d[v+11],14,643717713);m=N(m,h,r,a,d[v+0],20,-373897302);a=N(a,m,h,r,d[v+5],5,-701558691);r=N(r,a,m,h,d[v+10],9,38016083);h=N(h,r,a,m,d[v+
15],14,-660478335);m=N(m,h,r,a,d[v+4],20,-405537848);a=N(a,m,h,r,d[v+9],5,568446438);r=N(r,a,m,h,d[v+14],9,-1019803690);h=N(h,r,a,m,d[v+3],14,-187363961);m=N(m,h,r,a,d[v+8],20,1163531501);a=N(a,m,h,r,d[v+13],5,-1444681467);r=N(r,a,m,h,d[v+2],9,-51403784);h=N(h,r,a,m,d[v+7],14,1735328473);m=N(m,h,r,a,d[v+12],20,-1926607734);a=K(a,m,h,r,d[v+5],4,-378558);r=K(r,a,m,h,d[v+8],11,-2022574463);h=K(h,r,a,m,d[v+11],16,1839030562);m=K(m,h,r,a,d[v+14],23,-35309556);a=K(a,m,h,r,d[v+1],4,-1530992060);r=K(r,a,
m,h,d[v+4],11,1272893353);h=K(h,r,a,m,d[v+7],16,-155497632);m=K(m,h,r,a,d[v+10],23,-1094730640);a=K(a,m,h,r,d[v+13],4,681279174);r=K(r,a,m,h,d[v+0],11,-358537222);h=K(h,r,a,m,d[v+3],16,-722521979);m=K(m,h,r,a,d[v+6],23,76029189);a=K(a,m,h,r,d[v+9],4,-640364487);r=K(r,a,m,h,d[v+12],11,-421815835);h=K(h,r,a,m,d[v+15],16,530742520);m=K(m,h,r,a,d[v+2],23,-995338651);a=L(a,m,h,r,d[v+0],6,-198630844);r=L(r,a,m,h,d[v+7],10,1126891415);h=L(h,r,a,m,d[v+14],15,-1416354905);m=L(m,h,r,a,d[v+5],21,-57434055);
a=L(a,m,h,r,d[v+12],6,1700485571);r=L(r,a,m,h,d[v+3],10,-1894986606);h=L(h,r,a,m,d[v+10],15,-1051523);m=L(m,h,r,a,d[v+1],21,-2054922799);a=L(a,m,h,r,d[v+8],6,1873313359);r=L(r,a,m,h,d[v+15],10,-30611744);h=L(h,r,a,m,d[v+6],15,-1560198380);m=L(m,h,r,a,d[v+13],21,1309151649);a=L(a,m,h,r,d[v+4],6,-145523070);r=L(r,a,m,h,d[v+11],10,-1120210379);h=L(h,r,a,m,d[v+2],15,718787259);m=L(m,h,r,a,d[v+9],21,-343485551);a=a+D>>>0;m=m+F>>>0;h=h+S>>>0;r=r+B>>>0}return e.endian([a,m,h,r])};y._ff=function(a,b,c,e,
f,r,k){a=a+(b&c|~b&e)+(f>>>0)+k;return(a<<r|a>>>32-r)+b};y._gg=function(a,b,c,e,f,r,k){a=a+(b&e|c&~e)+(f>>>0)+k;return(a<<r|a>>>32-r)+b};y._hh=function(a,b,c,e,f,r,k){a=a+(b^c^e)+(f>>>0)+k;return(a<<r|a>>>32-r)+b};y._ii=function(a,b,c,e,f,r,k){a=a+(c^(b|~e))+(f>>>0)+k;return(a<<r|a>>>32-r)+b};y._blocksize=16;y._digestsize=16;f.exports=function(a,b){if(void 0===a||null===a)throw Error("Illegal argument "+a);a=e.wordsToBytes(y(a,b));return b&&b.asBytes?a:b&&b.asString?k.bytesToString(a):e.bytesToHex(a)}})()},
L8MQ:function(f,k,a){var e=a("ktnU"),c=a("ktak");f.exports=function(a){return null==a?[]:e(a,c(a))}},LoU7:function(f,k,a){(function(a){(function(){function a(a){var b=typeof a;if("object"==b)if(a){if(a instanceof Array)return"array";if(a instanceof Object)return b;var c=Object.prototype.toString.call(a);if("[object Window]"==c)return"object";if("[object Array]"==c||"number"==typeof a.length&&"undefined"!=typeof a.splice&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("splice"))return"array";
if("[object Function]"==c||"undefined"!=typeof a.call&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("call"))return"function"}else return"null";else if("function"==b&&"undefined"==typeof a.call)return"object";return b}function b(a){return"string"==typeof a}function e(a,b,c){return a.call.apply(a.bind,arguments)}function k(a,b,c){if(!a)throw Error();if(2<arguments.length){var d=Array.prototype.slice.call(arguments,2);return function(){var c=Array.prototype.slice.call(arguments);
Array.prototype.unshift.apply(c,d);return a.apply(b,c)}}return function(){return a.apply(b,arguments)}}function m(a,b,c){m=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?e:k;return m.apply(null,arguments)}function d(a,b){var c=Array.prototype.slice.call(arguments,1);return function(){var b=c.slice();b.push.apply(b,arguments);return a.apply(this,b)}}function x(a){function b(){}var c=ma;b.prototype=c.prototype;a.G=c.prototype;a.prototype=new b;a.prototype.constructor=
a;a.F=function(a,b,d){for(var n=Array(arguments.length-2),e=2;e<arguments.length;e++)n[e-2]=arguments[e];return c.prototype[b].apply(a,n)}}function z(a,b){return-1!=a.indexOf(b)}function h(a,b){return a<b?-1:a>b?1:0}function A(a,c){a:{var d=a.length;for(var n=b(a)?a.split(""):a,e=0;e<d;e++)if(e in n&&c.call(void 0,n[e],e,a)){d=e;break a}d=-1}return 0>d?null:b(a)?a.charAt(d):a[d]}function v(a){return Array.prototype.concat.apply(Array.prototype,arguments)}function N(a,b,c){return 2>=arguments.length?
Array.prototype.slice.call(a,b):Array.prototype.slice.call(a,b,c)}function K(){var a=Ma.document;return a?a.documentMode:void 0}function L(a){if(!Ob[a]){for(var b=0,c=Ra(String(Ib)).split("."),d=Ra(String(a)).split("."),n=Math.max(c.length,d.length),e=0;0==b&&e<n;e++){var f=c[e]||"",p=d[e]||"",g=/(\d*)(\D*)/g,m=/(\d*)(\D*)/g;do{var r=g.exec(f)||["","",""],q=m.exec(p)||["","",""];if(0==r[0].length&&0==q[0].length)break;b=h(0==r[1].length?0:parseInt(r[1],10),0==q[1].length?0:parseInt(q[1],10))||h(0==
r[2].length,0==q[2].length)||h(r[2],q[2])}while(0==b)}Ob[a]=0<=b}}function D(a,b,c,d){this.a=a;this.nodeName=c;this.nodeValue=d;this.nodeType=2;this.parentNode=this.ownerElement=b}function F(a,b){var c=Jb&&"href"==b.nodeName?a.getAttribute(b.nodeName,2):b.nodeValue;return new D(b,a,b.nodeName,c)}function S(a){var b=null,c=a.nodeType;1==c&&(b=a.textContent,b=void 0==b||null==b?a.innerText:b,b=void 0==b||null==b?"":b);if("string"!=typeof b)if(ab&&"title"==a.nodeName.toLowerCase()&&1==c)b=a.text;else if(9==
c||1==c){a=9==c?a.documentElement:a.firstChild;c=0;var d=[];for(b="";a;){do 1!=a.nodeType&&(b+=a.nodeValue),ab&&"title"==a.nodeName.toLowerCase()&&(b+=a.text),d[c++]=a;while(a=a.firstChild);for(;c&&!(a=d[--c].nextSibling););}}else b=a.nodeValue;return""+b}function B(a,b,c){if(null===b)return!0;try{if(!a.getAttribute)return!1}catch(Eb){return!1}Jb&&"class"==b&&(b="className");return null==c?!!a.getAttribute(b):a.getAttribute(b,2)==c}function u(a,c,d,e,f){return(ab?J:ca).call(null,a,c,b(d)?d:null,b(e)?
e:null,f||new O)}function J(a,b,c,d,e){if(a instanceof Qa||8==a.b||c&&null===a.b){var n=b.all;if(!n)return e;a=U(a);if("*"!=a&&(n=b.getElementsByTagName(a),!n))return e;if(c){for(var f=[],p=0;b=n[p++];)B(b,c,d)&&f.push(b);n=f}for(p=0;b=n[p++];)"*"==a&&"!"==b.tagName||R(e,b);return e}Q(a,b,c,d,e);return e}function ca(a,b,c,d,e){b.getElementsByName&&d&&"name"==c&&!sa?(b=b.getElementsByName(d),p(b,function(b){a.a(b)&&R(e,b)})):b.getElementsByClassName&&d&&"class"==c?(b=b.getElementsByClassName(d),p(b,
function(b){b.className==d&&a.a(b)&&R(e,b)})):a instanceof X?Q(a,b,c,d,e):b.getElementsByTagName&&(b=b.getElementsByTagName(a.f()),p(b,function(a){B(a,c,d)&&R(e,a)}));return e}function T(a,b,c,d,e){var n;if((a instanceof Qa||8==a.b||c&&null===a.b)&&(n=b.childNodes)){var f=U(a);if("*"!=f&&(n=ya(n,function(a){return a.tagName&&a.tagName.toLowerCase()==f}),!n))return e;c&&(n=ya(n,function(a){return B(a,c,d)}));p(n,function(a){"*"==f&&("!"==a.tagName||"*"==f&&1!=a.nodeType)||R(e,a)});return e}return q(a,
b,c,d,e)}function q(a,b,c,d,e){for(b=b.firstChild;b;b=b.nextSibling)B(b,c,d)&&a.a(b)&&R(e,b);return e}function Q(a,b,c,d,e){for(b=b.firstChild;b;b=b.nextSibling)B(b,c,d)&&a.a(b)&&R(e,b),Q(a,b,c,d,e)}function U(a){if(a instanceof X){if(8==a.b)return"!";if(null===a.b)return"*"}return a.f()}function aa(a,b){if(!a||!b)return!1;if(a.contains&&1==b.nodeType)return a==b||a.contains(b);if("undefined"!=typeof a.compareDocumentPosition)return a==b||!!(a.compareDocumentPosition(b)&16);for(;b&&a!=b;)b=b.parentNode;
return b==a}function G(a,b){if(a==b)return 0;if(a.compareDocumentPosition)return a.compareDocumentPosition(b)&2?1:-1;if(sa&&!(9<=Number(rb))){if(9==a.nodeType)return-1;if(9==b.nodeType)return 1}if("sourceIndex"in a||a.parentNode&&"sourceIndex"in a.parentNode){var c=1==a.nodeType,d=1==b.nodeType;if(c&&d)return a.sourceIndex-b.sourceIndex;var e=a.parentNode,n=b.parentNode;return e==n?ua(a,b):!c&&aa(e,b)?-1*Y(a,b):!d&&aa(n,a)?Y(b,a):(c?a.sourceIndex:e.sourceIndex)-(d?b.sourceIndex:n.sourceIndex)}d=9==
a.nodeType?a:a.ownerDocument||a.document;c=d.createRange();c.selectNode(a);c.collapse(!0);d=d.createRange();d.selectNode(b);d.collapse(!0);return c.compareBoundaryPoints(Ma.Range.START_TO_END,d)}function Y(a,b){var c=a.parentNode;if(c==b)return-1;for(;b.parentNode!=c;)b=b.parentNode;return ua(b,a)}function ua(a,b){for(;b=b.previousSibling;)if(b==a)return-1;return 1}function O(){this.b=this.a=null;this.l=0}function Ea(a){this.node=a;this.a=this.b=null}function C(a,b){if(!a.a)return b;if(!b.a)return a;
var c=a.a;b=b.a;for(var d=null,e,f=0;c&&b;){e=c.node;var n=b.node;e==n||e instanceof D&&n instanceof D&&e.a==n.a?(e=c,c=c.a,b=b.a):0<G(c.node,b.node)?(e=b,b=b.a):(e=c,c=c.a);(e.b=d)?d.a=e:a.a=e;d=e;f++}for(e=c||b;e;)e.b=d,d=d.a=e,f++,e=e.a;a.b=d;a.l=f;return a}function Z(a,b){b=new Ea(b);b.a=a.a;a.b?a.a.b=b:a.a=a.b=b;a.a=b;a.l++}function R(a,b){b=new Ea(b);b.b=a.b;a.a?a.b.a=b:a.a=a.b=b;a.b=b;a.l++}function t(a){return(a=a.a)?a.node:null}function na(a){return(a=t(a))?S(a):""}function Ha(a,b){return new za(a,
!!b)}function za(a,b){this.f=a;this.b=(this.c=b)?a.b:a.a;this.a=null}function P(a){var b=a.b;if(null==b)return null;var c=a.a=b;a.b=a.c?b.b:b.a;return c.node}function ma(a){this.i=a;this.b=this.g=!1;this.f=null}function da(a){return"\n  "+a.toString().split("\n").join("\n  ")}function H(a,b){a.g=b}function eb(a,b){a.b=b}function fa(a,b){a=a.a(b);return a instanceof O?+na(a):+a}function la(a,b){a=a.a(b);return a instanceof O?na(a):""+a}function Aa(a,b){a=a.a(b);return a instanceof O?!!a.l:!!a}function pa(a,
b,c){ma.call(this,a.i);this.c=a;this.h=b;this.o=c;this.g=b.g||c.g;this.b=b.b||c.b;this.c==Pb&&(c.b||c.g||4==c.i||0==c.i||!b.f?b.b||b.g||4==b.i||0==b.i||!c.f||(this.f={name:c.f.name,s:b}):this.f={name:b.f.name,s:c})}function va(a,b,c,d,e){b=b.a(d);c=c.a(d);var f;if(b instanceof O&&c instanceof O){b=Ha(b);for(d=P(b);d;d=P(b))for(e=Ha(c),f=P(e);f;f=P(e))if(a(S(d),S(f)))return!0;return!1}if(b instanceof O||c instanceof O){b instanceof O?(e=b,d=c):(e=c,d=b);f=Ha(e);for(var p=typeof d,n=P(f);n;n=P(f)){switch(p){case "number":n=
+S(n);break;case "boolean":n=!!S(n);break;case "string":n=S(n);break;default:throw Error("Illegal primitive type for comparison.");}if(e==b&&a(n,d)||e==c&&a(d,n))return!0}return!1}return e?"boolean"==typeof b||"boolean"==typeof c?a(!!b,!!c):"number"==typeof b||"number"==typeof c?a(+b,+c):a(b,c):a(+b,+c)}function ta(a,b,c,d){this.a=a;this.w=b;this.i=c;this.m=d}function oa(a,b,c,d){if(Gb.hasOwnProperty(a))throw Error("Binary operator already created: "+a);a=new ta(a,b,c,d);return Gb[a.toString()]=a}
function wa(a,b,c){this.a=a;this.b=b||1;this.f=c||1}function fb(a,b){if(b.a.length&&4!=a.i)throw Error("Primary expression must evaluate to nodeset if filter has predicate(s).");ma.call(this,a.i);this.c=a;this.h=b;this.g=a.g;this.b=a.b}function Na(a,b){if(b.length<a.A)throw Error("Function "+a.j+" expects at least"+a.A+" arguments, "+b.length+" given");if(null!==a.v&&b.length>a.v)throw Error("Function "+a.j+" expects at most "+a.v+" arguments, "+b.length+" given");a.B&&p(b,function(b,c){if(4!=b.i)throw Error("Argument "+
c+" to function "+a.j+" is not of type Nodeset: "+b);});ma.call(this,a.i);this.h=a;this.c=b;H(this,a.g||ia(b,function(a){return a.g}));eb(this,a.D&&!b.length||a.C&&!!b.length||ia(b,function(a){return a.b}))}function ob(a,b,c,d,e,f,p,g,h){this.j=a;this.i=b;this.g=c;this.D=d;this.C=e;this.m=f;this.A=p;this.v=void 0!==g?g:p;this.B=!!h}function ea(a,b,c,d,e,f,p,g){if(Lb.hasOwnProperty(a))throw Error("Function already created: "+a+".");Lb[a]=new ob(a,b,c,d,!1,e,f,p,g)}function X(a,b){this.h=a;this.c=void 0!==
b?b:null;this.b=null;switch(a){case "comment":this.b=8;break;case "text":this.b=3;break;case "processing-instruction":this.b=7;break;case "node":break;default:throw Error("Unexpected argument");}}function tb(a){return"comment"==a||"text"==a||"processing-instruction"==a||"node"==a}function Oa(a){this.b=a;this.a=0}function Sa(a){a=a.match(Qb);for(var b=0;b<a.length;b++)Vb.test(a[b])&&a.splice(b,1);return new Oa(a)}function I(a,b){return a.b[a.a+(b||0)]}function M(a){return a.b[a.a++]}function Pa(a){return a.b.length<=
a.a}function Za(a){ma.call(this,3);this.c=a.substring(1,a.length-1)}function Qa(a,b){this.j=a.toLowerCase();a="*"==this.j?"*":"http://www.w3.org/1999/xhtml";this.c=b?b.toLowerCase():a}function gb(a,b){ma.call(this,a.i);this.h=a;this.c=b;this.g=a.g;this.b=a.b;1==this.c.length&&(a=this.c[0],a.u||a.c!=sb||(a=a.o,"*"!=a.f()&&(this.f={name:a.f(),s:null})))}function hb(){ma.call(this,4)}function ha(){ma.call(this,4)}function V(a){return"/"==a||"//"==a}function Ia(a){ma.call(this,4);this.c=a;H(this,ia(this.c,
function(a){return a.g}));eb(this,ia(this.c,function(a){return a.b}))}function Ba(a,b){this.a=a;this.b=!!b}function g(a,b,c){for(c=c||0;c<a.a.length;c++)for(var d=a.a[c],e=Ha(b),f=b.l,p,n=0;p=P(e);n++){var g=a.b?f-n:n+1;p=d.a(new wa(p,g,f));if("number"==typeof p)g=g==p;else if("string"==typeof p||"boolean"==typeof p)g=!!p;else if(p instanceof O)g=0<p.l;else throw Error("Predicate.evaluate returned an unexpected type.");if(!g){g=e;p=g.f;var h=g.a;if(!h)throw Error("Next must be called at least once before remove.");
var m=h.b;h=h.a;m?m.a=h:p.a=h;h?h.b=m:p.b=m;p.l--;g.a=null}}return b}function Fa(a,b,c,d){ma.call(this,4);this.c=a;this.o=b;this.h=c||new Ba([]);this.u=!!d;b=this.h;b=0<b.a.length?b.a[0].f:null;a.b&&b&&(a=b.name,a=ab?a.toLowerCase():a,this.f={name:a,s:b.s});a:{a=this.h;for(b=0;b<a.a.length;b++)if(c=a.a[b],c.g||1==c.i||0==c.i){a=!0;break a}a=!1}this.g=a}function Ta(a,b,c,d){this.j=a;this.f=b;this.a=c;this.b=d}function qa(a,b,c,d){if(Hb.hasOwnProperty(a))throw Error("Axis already created: "+a);b=new Ta(a,
b,c,!!d);return Hb[a]=b}function ib(a){ma.call(this,1);this.c=a;this.g=a.g;this.b=a.b}function jb(a){ma.call(this,1);this.c=a}function ub(a,b){this.a=a;this.b=b}function pb(a){for(var b,c=[];;){Ka(a,"Missing right hand side of binary expression.");b=$a(a);var d=M(a.a);if(!d)break;var e=(d=Gb[d]||null)&&d.w;if(!e){a.a.a--;break}for(;c.length&&e<=c[c.length-1].w;)b=new pa(c.pop(),c.pop(),b);c.push(b,d)}for(;c.length;)b=new pa(c.pop(),c.pop(),b);return b}function Ka(a,b){if(Pa(a.a))throw Error(b);}function kb(a,
b){a=M(a.a);if(a!=b)throw Error("Bad token, expected: "+b+" got: "+a);}function qb(a){a=M(a.a);if(")"!=a)throw Error("Bad token: "+a);}function xa(a){a=M(a.a);if(2>a.length)throw Error("Unclosed literal string");return new Za(a)}function wb(a){var b=[];if(V(I(a.a))){var c=M(a.a);var d=I(a.a);if("/"==c&&(Pa(a.a)||"."!=d&&".."!=d&&"@"!=d&&"*"!=d&&!/(?![0-9])[\w]/.test(d)))return new hb;d=new hb;Ka(a,"Missing next location step.");c=Ua(a,c);b.push(c)}else{a:{c=I(a.a);d=c.charAt(0);switch(d){case "$":throw Error("Variable reference not allowed in HTML XPath");
case "(":M(a.a);c=pb(a);Ka(a,'unclosed "("');kb(a,")");break;case '"':case "'":c=xa(a);break;default:if(isNaN(+c))if(!tb(c)&&/(?![0-9])[\w]/.test(d)&&"("==I(a.a,1)){c=M(a.a);c=Lb[c]||null;M(a.a);for(d=[];")"!=I(a.a);){Ka(a,"Missing function argument list.");d.push(pb(a));if(","!=I(a.a))break;M(a.a)}Ka(a,"Unclosed function argument list.");qb(a);c=new Na(c,d)}else{c=null;break a}else c=new jb(+M(a.a))}"["==I(a.a)&&(d=new Ba(ra(a)),c=new fb(c,d))}if(c)if(V(I(a.a)))d=c;else return c;else c=Ua(a,"/"),
d=new ha,b.push(c)}for(;V(I(a.a));)c=M(a.a),Ka(a,"Missing next location step."),c=Ua(a,c),b.push(c);return new gb(d,b)}function Ua(a,b){var c;if("/"!=b&&"//"!=b)throw Error('Step op should be "/" or "//"');if("."==I(a.a))return c=new Fa(Zb,new X("node")),M(a.a),c;if(".."==I(a.a))return c=new Fa(Cb,new X("node")),M(a.a),c;if("@"==I(a.a)){var d=sb;M(a.a);Ka(a,"Missing attribute name")}else if("::"==I(a.a,1)){if(!/(?![0-9])[\w]/.test(I(a.a).charAt(0)))throw Error("Bad token: "+M(a.a));var e=M(a.a);d=
Hb[e]||null;if(!d)throw Error("No axis with name: "+e);M(a.a);Ka(a,"Missing node name")}else d=yb;e=I(a.a);if(/(?![0-9])[\w\*]/.test(e.charAt(0)))if("("==I(a.a,1)){if(!tb(e))throw Error("Invalid node type: "+e);e=M(a.a);if(!tb(e))throw Error("Invalid type name: "+e);kb(a,"(");Ka(a,"Bad nodetype");var f=I(a.a).charAt(0);var p=null;if('"'==f||"'"==f)p=xa(a);Ka(a,"Bad nodetype");qb(a);e=new X(e,p)}else if(e=M(a.a),f=e.indexOf(":"),-1==f)e=new Qa(e);else{p=e.substring(0,f);if("*"==p)var n="*";else if(n=
a.b(p),!n)throw Error("Namespace prefix not declared: "+p);e=e.substr(f+1);e=new Qa(e,n)}else throw Error("Bad token: "+M(a.a));f=new Ba(ra(a),d.a);return c||new Fa(d,e,f,"//"==b)}function ra(a){for(var b=[];"["==I(a.a);){M(a.a);Ka(a,"Missing predicate expression.");var c=pb(a);b.push(c);Ka(a,"Unclosed predicate expression.");kb(a,"]")}return b}function $a(a){if("-"==I(a.a))return M(a.a),new ib($a(a));var b=wb(a);if("|"!=I(a.a))a=b;else{for(b=[b];"|"==M(a.a);)Ka(a,"Missing next union location path."),
b.push(wb(a));a.a.a--;a=new Ia(b)}return a}function Xa(a){switch(a.nodeType){case 1:return d(W,a);case 9:return Xa(a.documentElement);case 11:case 10:case 6:case 12:return Ya;default:return a.parentNode?Xa(a.parentNode):Ya}}function Ya(){return null}function W(a,b){if(a.prefix==b)return a.namespaceURI||"http://www.w3.org/1999/xhtml";var c=a.getAttributeNode("xmlns:"+b);return c&&c.specified?c.value||null:a.parentNode&&9!=a.parentNode.nodeType?W(a.parentNode,b):null}function Ca(b,c){if(!b.length)throw Error("Empty XPath expression.");
b=Sa(b);if(Pa(b))throw Error("Invalid XPath expression.");c?"function"==a(c)||(c=m(c.lookupNamespaceURI,c)):c=function(){return null};var d=pb(new ub(b,c));if(!Pa(b))throw Error("Bad token: "+M(b));this.evaluate=function(a,b){a=d.a(new wa(a));return new La(a,b)}}function La(a,b){if(0==b)if(a instanceof O)b=4;else if("string"==typeof a)b=2;else if("number"==typeof a)b=1;else if("boolean"==typeof a)b=3;else throw Error("Unexpected evaluation result.");if(2!=b&&1!=b&&3!=b&&!(a instanceof O))throw Error("value could not be converted to the specified type");
this.resultType=b;switch(b){case 2:this.stringValue=a instanceof O?na(a):""+a;break;case 1:this.numberValue=a instanceof O?+na(a):+a;break;case 3:this.booleanValue=a instanceof O?0<a.l:!!a;break;case 4:case 5:case 6:case 7:var c=Ha(a);var d=[];for(var e=P(c);e;e=P(c))d.push(e instanceof D?e.a:e);this.snapshotLength=a.l;this.invalidIteratorState=!1;break;case 8:case 9:c=t(a);this.singleNodeValue=c instanceof D?c.a:c;break;default:throw Error("Unknown XPathResult type.");}var f=0;this.iterateNext=function(){if(4!=
b&&5!=b)throw Error("iterateNext called with wrong result type");return f>=d.length?null:d[f++]};this.snapshotItem=function(a){if(6!=b&&7!=b)throw Error("snapshotItem called with wrong result type");return a>=d.length||0>a?null:d[a]}}function xb(a){this.lookupNamespaceURI=Xa(a)}function Wa(a,b){a=a||Ma;var c=a.Document&&a.Document.prototype||a.document;if(!c.evaluate||b)a.XPathResult=La,c.evaluate=function(a,b,c,d){return(new Ca(a,c)).evaluate(b,d)},c.createExpression=function(a,b){return new Ca(a,
b)},c.createNSResolver=function(a){return new xb(a)}}var Ma=this,Ra=String.prototype.trim?function(a){return a.trim()}:function(a){return a.replace(/^[\s\xa0]+|[\s\xa0]+$/g,"")},Ga=Array.prototype.indexOf?function(a,b,c){return Array.prototype.indexOf.call(a,b,c)}:function(a,c,d){d=null==d?0:0>d?Math.max(0,a.length+d):d;if(b(a))return b(c)&&1==c.length?a.indexOf(c,d):-1;for(;d<a.length;d++)if(d in a&&a[d]===c)return d;return-1},p=Array.prototype.forEach?function(a,b,c){Array.prototype.forEach.call(a,
b,c)}:function(a,c,d){for(var e=a.length,f=b(a)?a.split(""):a,p=0;p<e;p++)p in f&&c.call(d,f[p],p,a)},ya=Array.prototype.filter?function(a,b,c){return Array.prototype.filter.call(a,b,c)}:function(a,c,d){for(var e=a.length,f=[],p=0,n=b(a)?a.split(""):a,g=0;g<e;g++)if(g in n){var h=n[g];c.call(d,h,g,a)&&(f[p++]=h)}return f},ja=Array.prototype.reduce?function(a,b,c,d){d&&(b=m(b,d));return Array.prototype.reduce.call(a,b,c)}:function(a,b,c,d){var e=c;p(a,function(c,f){e=b.call(d,e,c,f,a)});return e},
ia=Array.prototype.some?function(a,b,c){return Array.prototype.some.call(a,b,c)}:function(a,c,d){for(var e=a.length,f=b(a)?a.split(""):a,p=0;p<e;p++)if(p in f&&c.call(d,f[p],p,a))return!0;return!1};a:{var Va=Ma.navigator;if(Va){var bb=Va.userAgent;if(bb){var Da=bb;break a}}Da=""}var mb=z(Da,"Opera")||z(Da,"OPR"),sa=z(Da,"Trident")||z(Da,"MSIE"),lb=z(Da,"Edge"),zb=z(Da,"Gecko")&&!(z(Da.toLowerCase(),"webkit")&&!z(Da,"Edge"))&&!(z(Da,"Trident")||z(Da,"MSIE"))&&!z(Da,"Edge"),Ab=z(Da.toLowerCase(),"webkit")&&
!z(Da,"Edge");a:{var Ja="",Bb=function(){var a=Da;if(zb)return/rv:([^\);]+)(\)|;)/.exec(a);if(lb)return/Edge\/([\d\.]+)/.exec(a);if(sa)return/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(a);if(Ab)return/WebKit\/(\S+)/.exec(a);if(mb)return/(?:Version)[ \/]?(\S+)/.exec(a)}();Bb&&(Ja=Bb?Bb[1]:"");if(sa){var Kb=K();if(null!=Kb&&Kb>parseFloat(Ja)){var Ib=String(Kb);break a}}Ib=Ja}var Ob={},Fb=Ma.document,rb=Fb&&sa?K()||("CSS1Compat"==Fb.compatMode?parseInt(Ib,10):5):void 0,ab=sa&&!(9<=Number(rb)),Jb=sa&&!(8<=
Number(rb));!zb&&!sa||sa&&9<=Number(rb)||zb&&L("1.9.1");sa&&L("9");x(pa);pa.prototype.a=function(a){return this.c.m(this.h,this.o,a)};pa.prototype.toString=function(){var a="Binary Expression: "+this.c;a+=da(this.h);return a+da(this.o)};ta.prototype.toString=function(){return this.a};var Gb={};oa("div",6,1,function(a,b,c){return fa(a,c)/fa(b,c)});oa("mod",6,1,function(a,b,c){return fa(a,c)%fa(b,c)});oa("*",6,1,function(a,b,c){return fa(a,c)*fa(b,c)});oa("+",5,1,function(a,b,c){return fa(a,c)+fa(b,
c)});oa("-",5,1,function(a,b,c){return fa(a,c)-fa(b,c)});oa("<",4,2,function(a,b,c){return va(function(a,b){return a<b},a,b,c)});oa(">",4,2,function(a,b,c){return va(function(a,b){return a>b},a,b,c)});oa("<=",4,2,function(a,b,c){return va(function(a,b){return a<=b},a,b,c)});oa(">=",4,2,function(a,b,c){return va(function(a,b){return a>=b},a,b,c)});var Pb=oa("=",3,2,function(a,b,c){return va(function(a,b){return a==b},a,b,c,!0)});oa("!=",3,2,function(a,b,c){return va(function(a,b){return a!=b},a,b,
c,!0)});oa("and",2,2,function(a,b,c){return Aa(a,c)&&Aa(b,c)});oa("or",1,2,function(a,b,c){return Aa(a,c)||Aa(b,c)});x(fb);fb.prototype.a=function(a){a=this.c.a(a);return g(this.h,a)};fb.prototype.toString=function(){return"Filter:"+da(this.c)+da(this.h)};x(Na);Na.prototype.a=function(a){return this.h.m.apply(null,v(a,this.c))};Na.prototype.toString=function(){var a="Function: "+this.h;if(this.c.length){var b=ja(this.c,function(a,b){return a+da(b)},"Arguments:");a+=da(b)}return a};ob.prototype.toString=
function(){return this.j};var Lb={};ea("boolean",2,!1,!1,function(a,b){return Aa(b,a)},1);ea("ceiling",1,!1,!1,function(a,b){return Math.ceil(fa(b,a))},1);ea("concat",3,!1,!1,function(a,b){return ja(N(arguments,1),function(b,c){return b+la(c,a)},"")},2,null);ea("contains",2,!1,!1,function(a,b,c){return z(la(b,a),la(c,a))},2);ea("count",1,!1,!1,function(a,b){return b.a(a).l},1,1,!0);ea("false",2,!1,!1,function(){return!1},0);ea("floor",1,!1,!1,function(a,b){return Math.floor(fa(b,a))},1);ea("id",4,
!1,!1,function(a,b){function c(a){if(ab){var b=e.all[a];if(b){if(b.nodeType&&a==b.id)return b;if(b.length)return A(b,function(b){return a==b.id})}return null}return e.getElementById(a)}var d=a.a,e=9==d.nodeType?d:d.ownerDocument;d=la(b,a).split(/\s+/);var f=[];p(d,function(a){a=c(a);!a||0<=Ga(f,a)||f.push(a)});f.sort(G);var n=new O;p(f,function(a){R(n,a)});return n},1);ea("lang",2,!1,!1,function(){return!1},1);ea("last",1,!0,!1,function(a){if(1!=arguments.length)throw Error("Function last expects ()");
return a.f},0);ea("local-name",3,!1,!0,function(a,b){return(a=b?t(b.a(a)):a.a)?a.localName||a.nodeName.toLowerCase():""},0,1,!0);ea("name",3,!1,!0,function(a,b){return(a=b?t(b.a(a)):a.a)?a.nodeName.toLowerCase():""},0,1,!0);ea("namespace-uri",3,!0,!1,function(){return""},0,1,!0);ea("normalize-space",3,!1,!0,function(a,b){return(b?la(b,a):S(a.a)).replace(/[\s\xa0]+/g," ").replace(/^\s+|\s+$/g,"")},0,1);ea("not",2,!1,!1,function(a,b){return!Aa(b,a)},1);ea("number",1,!1,!0,function(a,b){return b?fa(b,
a):+S(a.a)},0,1);ea("position",1,!0,!1,function(a){return a.b},0);ea("round",1,!1,!1,function(a,b){return Math.round(fa(b,a))},1);ea("starts-with",2,!1,!1,function(a,b,c){b=la(b,a);a=la(c,a);return 0==b.lastIndexOf(a,0)},2);ea("string",3,!1,!0,function(a,b){return b?la(b,a):S(a.a)},0,1);ea("string-length",1,!1,!0,function(a,b){return(b?la(b,a):S(a.a)).length},0,1);ea("substring",3,!1,!1,function(a,b,c,d){c=fa(c,a);if(isNaN(c)||Infinity==c||-Infinity==c)return"";d=d?fa(d,a):Infinity;if(isNaN(d)||-Infinity===
d)return"";c=Math.round(c)-1;var e=Math.max(c,0);a=la(b,a);return Infinity==d?a.substring(e):a.substring(e,c+Math.round(d))},2,3);ea("substring-after",3,!1,!1,function(a,b,c){b=la(b,a);a=la(c,a);c=b.indexOf(a);return-1==c?"":b.substring(c+a.length)},2);ea("substring-before",3,!1,!1,function(a,b,c){b=la(b,a);a=la(c,a);a=b.indexOf(a);return-1==a?"":b.substring(0,a)},2);ea("sum",1,!1,!1,function(a,b){a=Ha(b.a(a));b=0;for(var c=P(a);c;c=P(a))b+=+S(c);return b},1,1,!0);ea("translate",3,!1,!1,function(a,
b,c,d){b=la(b,a);c=la(c,a);var e=la(d,a);a={};for(d=0;d<c.length;d++){var f=c.charAt(d);f in a||(a[f]=e.charAt(d))}c="";for(d=0;d<b.length;d++)f=b.charAt(d),c+=f in a?a[f]:f;return c},3);ea("true",2,!1,!1,function(){return!0},0);X.prototype.a=function(a){return null===this.b||this.b==a.nodeType};X.prototype.f=function(){return this.h};X.prototype.toString=function(){var a="Kind Test: "+this.h;null===this.c||(a+=da(this.c));return a};var Qb=/\$?(?:(?![0-9-\.])(?:\*|[\w-\.]+):)?(?![0-9-\.])(?:\*|[\w-\.]+)|\/\/|\.\.|::|\d+(?:\.\d*)?|\.\d+|"[^"]*"|'[^']*'|[!<>]=|\s+|./g,
Vb=/^\s/;x(Za);Za.prototype.a=function(){return this.c};Za.prototype.toString=function(){return"Literal: "+this.c};Qa.prototype.a=function(a){var b=a.nodeType;if(1!=b&&2!=b)return!1;b=void 0!==a.localName?a.localName:a.nodeName;return"*"!=this.j&&this.j!=b.toLowerCase()?!1:"*"==this.c?!0:this.c==(a.namespaceURI?a.namespaceURI.toLowerCase():"http://www.w3.org/1999/xhtml")};Qa.prototype.f=function(){return this.j};Qa.prototype.toString=function(){return"Name Test: "+("http://www.w3.org/1999/xhtml"==
this.c?"":this.c+":")+this.j};x(gb);x(hb);hb.prototype.a=function(a){var b=new O;a=a.a;9==a.nodeType?R(b,a):R(b,a.ownerDocument);return b};hb.prototype.toString=function(){return"Root Helper Expression"};x(ha);ha.prototype.a=function(a){var b=new O;R(b,a.a);return b};ha.prototype.toString=function(){return"Context Helper Expression"};gb.prototype.a=function(a){var b=this.h.a(a);if(!(b instanceof O))throw Error("Filter expression must evaluate to nodeset.");a=this.c;for(var c=0,d=a.length;c<d&&b.l;c++){var e=
a[c],f=Ha(b,e.c.a);if(e.g||e.c!=Xb)if(e.g||e.c!=Yb){var p=P(f);for(b=e.a(new wa(p));null!=(p=P(f));)p=e.a(new wa(p)),b=C(b,p)}else p=P(f),b=e.a(new wa(p));else{for(p=P(f);(b=P(f))&&(!p.contains||p.contains(b))&&b.compareDocumentPosition(p)&8;p=b);b=e.a(new wa(p))}}return b};gb.prototype.toString=function(){var a="Path Expression:"+da(this.h);if(this.c.length){var b=ja(this.c,function(a,b){return a+da(b)},"Steps:");a+=da(b)}return a};x(Ia);Ia.prototype.a=function(a){var b=new O;p(this.c,function(c){c=
c.a(a);if(!(c instanceof O))throw Error("Path expression must evaluate to NodeSet.");b=C(b,c)});return b};Ia.prototype.toString=function(){return ja(this.c,function(a,b){return a+da(b)},"Union Expression:")};Ba.prototype.toString=function(){return ja(this.a,function(a,b){return a+da(b)},"Predicates:")};x(Fa);Fa.prototype.a=function(a){var b=a.a;var c=this.f;var d=null,e=null,f=0;c&&(d=c.name,e=c.s?la(c.s,a):null,f=1);if(this.u)if(this.g||this.c!=yb)if(a=Ha((new Fa(Wb,new X("node"))).a(a)),b=P(a))for(c=
this.m(b,d,e,f);null!=(b=P(a));)c=C(c,this.m(b,d,e,f));else c=new O;else c=u(this.o,b,d,e),c=g(this.h,c,f);else c=this.m(a.a,d,e,f);return c};Fa.prototype.m=function(a,b,c,d){a=this.c.f(this.o,a,b,c);return g(this.h,a,d)};Fa.prototype.toString=function(){var a="Step:"+da("Operator: "+(this.u?"//":"/"));this.c.j&&(a+=da("Axis: "+this.c));a+=da(this.o);if(this.h.a.length){var b=ja(this.h.a,function(a,b){return a+da(b)},"Predicates:");a+=da(b)}return a};Ta.prototype.toString=function(){return this.j};
var Hb={};qa("ancestor",function(a,b){for(var c=new O;b=b.parentNode;)a.a(b)&&Z(c,b);return c},!0);qa("ancestor-or-self",function(a,b){var c=new O;do a.a(b)&&Z(c,b);while(b=b.parentNode);return c},!0);var sb=qa("attribute",function(a,b){var c=new O,d=a.f();if("style"==d&&ab&&b.style)return R(c,new D(b.style,b,"style",b.style.cssText)),c;var e=b.attributes;if(e)if(a instanceof X&&null===a.b||"*"==d){d=0;for(var f;f=e[d];d++)ab?f.nodeValue&&R(c,F(b,f)):R(c,f)}else(f=e.getNamedItem(d))&&(ab?f.nodeValue&&
R(c,F(b,f)):R(c,f));return c},!1),yb=qa("child",function(a,c,d,e,f){return(ab?T:q).call(null,a,c,b(d)?d:null,b(e)?e:null,f||new O)},!1,!0);qa("descendant",u,!1,!0);var Wb=qa("descendant-or-self",function(a,b,c,d){var e=new O;B(b,c,d)&&a.a(b)&&R(e,b);return u(a,b,c,d,e)},!1,!0),Xb=qa("following",function(a,b,c,d){var e=new O;do for(var f=b;f=f.nextSibling;)B(f,c,d)&&a.a(f)&&R(e,f),e=u(a,f,c,d,e);while(b=b.parentNode);return e},!1,!0);qa("following-sibling",function(a,b){for(var c=new O;b=b.nextSibling;)a.a(b)&&
R(c,b);return c},!1);qa("namespace",function(){return new O},!1);var Cb=qa("parent",function(a,b){var c=new O;if(9==b.nodeType)return c;if(2==b.nodeType)return R(c,b.ownerElement),c;b=b.parentNode;a.a(b)&&R(c,b);return c},!1),Yb=qa("preceding",function(a,b,c,d){var e=new O,f=[];do f.unshift(b);while(b=b.parentNode);for(var p=1,g=f.length;p<g;p++){var h=[];for(b=f[p];b=b.previousSibling;)h.unshift(b);for(var m=0,n=h.length;m<n;m++)b=h[m],B(b,c,d)&&a.a(b)&&R(e,b),e=u(a,b,c,d,e)}return e},!0,!0);qa("preceding-sibling",
function(a,b){for(var c=new O;b=b.previousSibling;)a.a(b)&&Z(c,b);return c},!0);var Zb=qa("self",function(a,b){var c=new O;a.a(b)&&R(c,b);return c},!1);x(ib);ib.prototype.a=function(a){return-fa(this.c,a)};ib.prototype.toString=function(){return"Unary Expression: -"+da(this.c)};x(jb);jb.prototype.a=function(){return this.c};jb.prototype.toString=function(){return"Number: "+this.c};La.ANY_TYPE=0;La.NUMBER_TYPE=1;La.STRING_TYPE=2;La.BOOLEAN_TYPE=3;La.UNORDERED_NODE_ITERATOR_TYPE=4;La.ORDERED_NODE_ITERATOR_TYPE=
5;La.UNORDERED_NODE_SNAPSHOT_TYPE=6;La.ORDERED_NODE_SNAPSHOT_TYPE=7;La.ANY_UNORDERED_NODE_TYPE=8;La.FIRST_ORDERED_NODE_TYPE=9;var Db=["wgxpath","install"],cb=Ma;Db[0]in cb||!cb.execScript||cb.execScript("var "+Db[0]);for(var vb;Db.length&&(vb=Db.shift());)Db.length||void 0===Wa?cb[vb]?cb=cb[vb]:cb=cb[vb]={}:cb[vb]=Wa;f.exports.install=Wa;f.exports.XPathResultType={ANY_TYPE:0,NUMBER_TYPE:1,STRING_TYPE:2,BOOLEAN_TYPE:3,UNORDERED_NODE_ITERATOR_TYPE:4,ORDERED_NODE_ITERATOR_TYPE:5,UNORDERED_NODE_SNAPSHOT_TYPE:6,
ORDERED_NODE_SNAPSHOT_TYPE:7,ANY_UNORDERED_NODE_TYPE:8,FIRST_ORDERED_NODE_TYPE:9}}).call(a)}).call(k,a("DuR2"))},"M+3u":function(f,k,a){a.d(k,"c",function(){return d});a.d(k,"a",function(){return h});a.d(k,"b",function(){return A});f=a("M1I4");var e=a.n(f);f=a("Z60a");var c=a.n(f);f=a("C9uT");var b=a.n(f);f=a("T/v0");var r=a.n(f);f=a("tNLN");var y=a.n(f);f=a("j/rp");var m=a.n(f);f=a("moUy");a.n(f);a=function(a){function d(a){c()(this,d);var b=r()(this,y()(d).call(this));b.events=[a];b.name=a;return b}
m()(d,a);b()(d,[{key:"notify",value:function(a,b){}}]);return d}(f.Observer);var d=Object.freeze({READY:"READY",STARTED:"STARTED",FINISHED:"FINISHED",CANCELED:"CANCELED"}),x=function(a){function e(a,b,f,h,m){c()(this,e);b=r()(this,y()(e).call(this,b));b.delegate=h;b.id=a;b.action=f;b.status=b.status?b.status:d.READY;b.result=null;b.replayTimes=0;return b}m()(e,a);b()(e,[{key:"notify",value:function(a,b){a&&a===this.name&&this.status!==d.CANCELED&&(this.status=d.FINISHED,this.result=b,this.action&&
"function"===typeof this.action&&this.action(this),this.delegate.consume(this))}},{key:"replay",value:function(){return this.delegate&&this.delegate.actions&&Array.isArray(this.delegate.actions)&&this.action&&"function"===typeof this.action&&this.replayTimes<z.MAX_REPLAY_TIMES?(this.result=null,this.status=d.READY,this.replayTimes++,!0):!1}}]);return e}(a),z=Object.freeze({MAX_REPLAY_TIMES:15}),h=Object.freeze({CONSUMER_READY:"CONSUMER_READY",CONSUMER_STARTED:"CONSUMER_STARTED",CONSUMER_FINISHED:"CONSUMER_FINISHED",
CONSUMER_CANCELED:"CONSUMER_CANCELED"}),A=function(a){function f(a,b){c()(this,f);var h=r()(this,y()(f).call(this));h.actions=[];h.subjects=a&&Array.isArray(a)&&a.filter(function(a){return a&&a.subscribe&&a.unsubscribe})?a:[];h.subjects.push(e()(h));h.status=d.READY;h.initiator=b&&"function"===typeof b?b:null;return h}m()(f,a);b()(f,[{key:"on",value:function(a,b){a&&b&&"function"===typeof b&&(a=new x(this.actions.length,a,b,this,d.READY),this.actions.push(a));return this}},{key:"start",value:function(a){this.status=
d.STARTED;this.status!==d.CANCELED&&(this._next(),a&&"function"===typeof a&&a(),this.initiator&&"function"===typeof this.initiator&&this.initiator());return this}},{key:"_next",value:function(){if(this.actions&&Array.isArray(this.actions)&&this.status!==d.CANCELED){var a=this.actions.find(function(a){return a.status===d.READY});a&&a.action&&"function"===typeof a.action?(this.subjects.forEach(function(b){return b.subscribe(a)}),this.status=d.STARTED,this.notifyAll(h.CONSUMER_STARTED,this)):(this.status=
d.FINISHED,this.notifyAll(h.CONSUMER_FINISHED,this))}return this}},{key:"consume",value:function(a){a&&this.subjects.forEach(function(b){return b.unsubscribe(a)});this._next();return this}},{key:"cancel",value:function(){for(var a=null;a=this.actions.find(function(a){return a.status===d.READY});)a.status=d.CANCELED,a&&this.subjects.forEach(function(b){return b.unsubscribe(a)});this.status=d.CANCELED;this.notifyAll(h.CONSUMER_CANCELED,this);return this}}]);return f}(f.Subject);(function(){function a(b,
d){c()(this,a);this.initiator=d?d:null;this.consumer=new A(b,d)}b()(a,[{key:"on",value:function(a,b){this.consumer.on(a,b);return this}},{key:"build",value:function(){return this.initiator&&"function"===typeof this.initiator?this.consumer.start(this.initiator):this.consumer}}]);return a})()},"M+Z9":function(f,k,a){var e=a("3rZI"),c=a("v9aJ"),b=a("JyYQ"),r=a("/gZ2"),y=a("NGEn");f.exports=function(a,d,f){var m=y(a)?e:r,h=3>arguments.length;return m(a,b(d,4),f,h,c)}},M1I4:function(f,k){f.exports=function(a){if(void 0===
a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return a}},M1c9:function(f,k){f.exports=function(a,e,c){var b=-1,f=a.length;0>e&&(e=-e>f?0:f+e);c=c>f?f:c;0>c&&(c+=f);f=e>c?0:c-e>>>0;e>>>=0;for(c=Array(f);++b<f;)c[b]=a[b+e];return c}},M6Wl:function(f,k,a){var e=a("rpnb"),c=a("ktak");f.exports=function(a,f){return a&&e(a,f,c)}},"NM/j":function(f,k,a){var e=a("7UU1"),c=a("cXIJ"),b=a("3T7U");f.exports=function(a,f){return e(a)||c(a,f)||b()}},Nkkh:function(f,k,a){var e=
a("tv3T"),c=a("l9Lx");f.exports=function(a,f){return e(a,c(a),f)}},OYJC:function(f,k,a){a.d(k,"b",function(){return v});a.d(k,"a",function(){return N});f=a("Z60a");var e=a.n(f);f=a("C9uT");var c=a.n(f);f=a("T/v0");var b=a.n(f);f=a("tNLN");var r=a.n(f);f=a("j/rp");var y=a.n(f);f=a("moUy");a.n(f);var m=a("cuGy");0;"use strict";var d=Object.freeze({TOUCH_START:"touchstart",TOUCH_END:"touchend",TOUCH_MOVE:"touchmove",SELECTION_CHANGE:"selectionchange",MOUSE_DOWN:"mousedown",MOUSE_UP:"mouseup",CLICK:"click"}),
x=Object.freeze({UNIDENTIFIED:"UNIDENTIFIED_ACTION",TOUCH:"TOUCH",MOVE:"MOVE",SELECTION:"SELECTION",CLICK:"click",SUPPRESS_SELECTION_EVENTS:"SUPPRESS_SELECTION_EVENTS",RELEASE_SELECTION_EVENTS:"RELEASE_SELECTION_EVENTS"}),z=Object.freeze({INIT:"INITIAL_STATE",UNIDENTIFIED:"UNIDENTIFIED",TOUCH_PROGRESS:"TOUCH_PROGRESS",SELECTION_PROGRESS:"SELECTION_PROGRESS"}),h="selectionchange touchstart touchend touchcancel touchmove mouseup mousedown".split(" "),A=a("7t+N");A.__orig="rmq";window.rmqJquery=A;window.jQuery&&
(window.jQuery.__orig="own");var v=function(a){function f(a,c,d){e()(this,f);var h=b()(this,r()(f).call(this));h.name="TOUCH_EVENTS_HANDLER";h._win=a;h._doc=c;h.ahThis=d;h.eventsQ=[];h.actionsQ=[];h.state=z.INIT;h._lastEvent={};return h}y()(f,a);c()(f,[{key:"start",value:function(){this._setupDocumentEvents()}},{key:"stop",value:function(){var a=this;h.forEach(function(b){a._doc.removeEventListener(b,a._qEvent)})}},{key:"_qEvent",value:function(a){this.eventsQ.push(a.type);this._lastEvent[a.type]=
a;var b=null,c=!1;switch(this.state){case z.INIT:a.type===d.TOUCH_START||a.type===d.MOUSE_DOWN?this.state=z.TOUCH_PROGRESS:a.type===d.SELECTION_CHANGE&&(this.state=z.SELECTION_PROGRESS,this._selectionTimeoutCheck());break;case z.SELECTION_PROGRESS:a.type!==d.SELECTION_CHANGE?(b=this._handleSelectionchange(),this.state=z.INIT,this.eventsQ.splice(0)):this._selectionTimeoutCheck();break;case z.TOUCH_PROGRESS:a.type===d.TOUCH_END||a.type===d.MOUSE_UP?(b=this._handleTouchstart(),b===x.SELECTION&&(c=!0),
this.state=z.INIT,this.eventsQ.splice(0)):a.type===d.SELECTION_CHANGE&&this._selectionTimeoutCheck()}b&&this.notifyAll(b,{event:a,action:b,eventBag:{touchstart:this._lastEvent[d.TOUCH_START],selectionchange:this._lastEvent[d.SELECTION_CHANGE],touchend:this._lastEvent[d.TOUCH_END],touchmouve:this._lastEvent[d.TOUCH_MOVE],mousedown:this._lastEvent[d.MOUSE_DOWN],mouseup:this._lastEvent[d.MOUSE_UP],click:this._lastEvent[d.CLICK]},newSelection:c})}},{key:"_selectionTimeoutCheck",value:function(){var a=
this;null!=this.timeoutCheckId&&clearTimeout(this.timeoutCheckId);this.timeoutCheckId=setTimeout(function(b,c){c==a.eventsQ.length&&(c=b._handleSelectionchange(),b.notifyAll(c,{action:c,event:a._lastEvent[d.SELECTION_CHANGE],newSelection:!0}),b.state=z.INIT,a.eventsQ.splice(0))},500,this,this.eventsQ.length)}},{key:"_setupDocumentEvents",value:function(){var a=this;h.forEach(function(b){a._doc.addEventListener(b,a._qEvent.bind(a),{passive:!0})})}},{key:"_consumeEvent",value:function(a){for(var b=
0;b<this.eventsQ.length&&this.eventsQ[b]===a;b++);this.eventsQ.splice(0,b+1)}},{key:"_handleTouchstart",value:function(){for(var a=this.eventsQ.shift(),b=!1;a!==d.TOUCH_END&&a!==d.MOUSE_UP;){switch(a){case d.TOUCH_MOVE:case d.SELECTION_CHANGE:b=!0}a=this.eventsQ.shift()}a===d.MOUSE_UP&&(b=!1);b?"Range"!==this._win.getSelection().type?(a=x.MOVE,this.actionsQ.unshift(x.MOVE)):(a=x.SELECTION,this.actionsQ.unshift(x.SELECTION)):(a=x.TOUCH,this.actionsQ.unshift(a));return a}},{key:"_handleSelectionchange",
value:function(){this._consumeEvent(d.SELECTION_CHANGE);this.actionsQ.unshift(x.SELECTION);return x.SELECTION}}]);return f}(f.Subject),N=function(a){function d(a,c,f,h,m){e()(this,d);var k=b()(this,r()(d).call(this));if(!(c&&f&&h&&a))throw"invalid injection to AnnoHelperTouchHandler";k.name="ACTIONS";k.events=[x.MOVE,x.SELECTION,x.TOUCH];k._Annotator=a;k.annotator=c;k.BrowserRange=f;k.adderIsVisible=!1;k.handleMathJaxSelectedRanges=h;k.ahThis=m;return k}y()(d,a);c()(d,[{key:"sendLogMessage",value:function(a){a=
{type:a};try{document.getElementById("GroveSide").contentWindow.postMessage(a,"*")}catch(F){}}},{key:"_clearHighlight",value:function(){A(".rmq-annotator-hl.rmq-annotator-hl-temporary").each(function(a,b){A(b.childNodes).each(function(a,b){A(b).unwrap(".rmq-annotator-hl.rmq-annotator-hl-temporary")})})}},{key:"_highlight",value:function(){var a=this.annotator;A(a.selectedRanges).each(function(b,c){return a.highlightRange(c,"rmq-annotator-hl rmq-annotator-hl-temporary")})}},{key:"checkForEndSelection",
value:function(a){var b=this;this.annotator.checkForEndSelection(a,function(a){if(b.adderIsVisible=a){a=A("button",b.annotator.adder);var c=-1!==navigator.userAgent.indexOf("Firefox"),d=-1===navigator.userAgent.indexOf("Chrome")&&-1!==navigator.userAgent.indexOf("Safari");/MSIE |Trident\//.test(navigator.userAgent);c||d||a&&a[0]&&a[0].focus()}})}},{key:"notify",value:function(a,b){var c=b.event;b=b.newSelection;switch(a){case x.TOUCH:this.checkForEndSelection(c);break;case x.MOVE:break;case x.SELECTION:"Range"!==
window.getSelection().type||this.adderIsVisible&&!b||this.checkForEndSelection(c);break;default:Object(m.debug)("Nothing to do")}}}]);return d}(f.Observer)},ObtK:function(f,k,a){function e(a){var b=null;"string"===typeof a?b=a:"A"===a.tagName?b=a.href:"BUTTON"===a.tagName&&"submit"===a.type&&(b=(a=v(a).parents("form")[0])&&a.action);if(b){try{var c=(new URL(b)).protocol}catch(S){}"https:"===window.location.protocol&&"http:"===c&&(b=b.replace("http","https"))}return b}function c(a,b,c){function f(a,
d,e,f){d=d||"GET";return new Promise(function(q,r){A&&A.abort();A=new XMLHttpRequest;A.withCredentials=!0;A.open(d,a,!0);f&&A.setRequestHeader("Content-Type",f);A.responseType="arraybuffer";A.onprogress=function(a){var b=a.srcElement.getResponseHeader("Content-Type");h.dispatchEvent(new CustomEvent("pdfContentLoading",{detail:{contentType:b,origEvent:a}}));c&&c(a,!1)};A.onload=function(d){c&&c(d,!0);var e=A.getResponseHeader("Content-Type");if(e&&-1===e.indexOf(b))r(e);else{d=A.response;var f=A.responseURL||
a;d&&(e=new Blob([d],{type:e,responseURL:f}),m&&m.setItem(a,e,f),URL.createObjectURL(e),q({responseURL:f,data:d}))}};A.onerror=function(a){r(a)};A.send(e)})}var m=Object(d.a)("remarq_cache","pdf_files",window);b=b||"application/pdf";var r=null,k=null,x=e(a);if("A"===a.tagName)r=function(){return f(x,"GET",null)};else if("BUTTON"===a.tagName&&"submit"===a.type)if(k=v(a).parents("form")[0])x=k.action,r=function(){var b=k;var c=b.action;var d=b.method;!1!==(b.onsubmit&&b.onsubmit())?(b=v(b).serialize()+
"&"+encodeURI(a.name)+"="+encodeURI(a.value),c=f(c,d,b,"application/x-www-form-urlencoded")):c=Promise.reject("form onsubmit returned false");return c};else return Promise.reject("Form not found :"+a);else if(x)r=function(){return f(x,"GET",null)};else return Promise.reject("Unsupported element:"+a);try{return k&&!1===(k.onsubmit&&k.onsubmit())?Promise.reject("form onsubmit returned false"):m.getItem(x).then(function(a){return a?a:r()})["catch"](function(a){return r()})}catch(T){return r()}}k.b=c;
a.d(k,"a",function(){return K});f=a("Z60a");var b=a.n(f);f=a("C9uT");var r=a.n(f),y=a("qrcb"),m=a("4T/i"),d=a("TvYa");a("RTdn");a("9LPS");var x=a("RTdn"),z=window,h=document,A=null,v=a("7t+N");v.__orig="rmq";window.rmqJquery=v;window.jQuery&&(window.jQuery.__orig="own");var N=null,K=function(){function a(c,d,e,f,h){b()(this,a);N||(this.pdfFrameInit=v.Deferred(),this.pdfFrameLoaded=v.Deferred(),window.addEventListener("message",this.waitPDFFrame.bind(this)));N=this;this.gp=h;this.Remarq=c;this.grovePrefix=
d;this.apiBase=h.apiBase;this.selectors=e;this.stickyController=f;this.isExtension=-1!==d.indexOf("chrome-extension:");this.isLite=h&&h.isLite;this.id=(new Date).getTime()}r()(a,null,[{key:"getInstance",value:function(){return N}}]);r()(a,[{key:"waitPDFFrame",value:function(a){"pdfFrameInit"===a.data.action&&this.pdfFrameInit.resolve(!0);"pdfFrameLoaded"===a.data.action&&this.pdfFrameLoaded.resolve(!0)}},{key:"updateProgress",value:function(a){var b=this;return function(c,d){var e=b.pdfFrame;d?(c=
b.pdfFrame)&&c.contentWindow.postMessage({msg:"loading",percentage:100},"*"):(d=null,a?d=c.loaded/1024/a*100:c.lengthComputable&&(d=c.loaded/c.total*100),d?e&&e.contentWindow&&e.contentWindow.postMessage({msg:"loading",percentage:Math.floor(d)},"*"):e&&e.contentWindow&&e.contentWindow.postMessage({msg:"loading",megabytes:(c.loaded/1048576).toFixed(1)},"*"))}}},{key:"createPdfIFrame",value:function(a,b,c){a=a||"pdf";!b&&a&&(b="application/"+a);var d=this,e=d.grovePrefix;d.isExtension&&(e+="dist/");
c.contentType=c.contentType||a.toUpperCase();a="epub"===a?e+"pdfFrame/epub.html":e+"pdf.js/generic/web/viewer.html";var f=d.apiBase;h.addEventListener("pdfContentLoading",function Q(a){(a=a.detail.contentType)&&-1!==a.indexOf(b)&&d.pdfFrame&&(d.pdfFrame.dataset.expanded="loading");h.removeEventListener("pdfContentLoading",Q)});var m=h.getElementById("CornerWidget");return Object(x.installFrame)("pdfFrame",a,f,e,m?{element:m,relativePosition:"above"}:{element:h.body,relativePosition:"bottom"},{},{expanded:"off"},
c,this.gp,null).then(function(a){return d.pdfFrame=a})}},{key:"configurePdfFrameAndLoadPdf",value:function(a,b,d,f,r,k){var x=this;b.contentWindow.postMessage({msg:"loading"},"*");var D=function(a){var c=a.responseURL,r=a.data;x.pdfFrameLoaded.promise().then(function(){x.pdfFrameLoaded=v.Deferred();var a=c||e(f);z.history&&z.history.pushState({contentType:"PDF"},h.title,a);var d=function(){b&&b.contentWindow&&b.contentWindow.postMessage({action:"close"},"*")};z.addEventListener("popstate",function(){d();
z.removeEventListener("popstate",d);z.location.href===a&&z.history.back()});z.onbeforeunload=function(){z.removeEventListener("popstate",d)}});return new Promise(function(a,h){x.pdfFrameInit.promise().then(function(){x.pdfFrameInit=v.Deferred();var h=c||e(f),q=Object(m.a)(x.selectors.doi,"text",h)[0];h=decodeURIComponent(h);q="full/"+(q||h);x.isExtension?b.contentWindow.postMessage({msg:"init",buffer:r,doi:q,siteUrl:h,pdId:d,urlParams:k},"*"):b.contentWindow.postMessage({msg:"init",buffer:r,urlParams:k,
doi:q,siteUrl:h,pdId:d},"*");document.getElementById("GroveSide").contentWindow.postMessage({indication:"pdfStatus",status:"on"},"*");b.dataset.expanded="on";x.stickyController.setView("pdf");x.stickyController.hide();a(b)})})},q=y.b;"epub"===a&&(q=y.a);return c(f,q,this.updateProgress(r)).then(function(a){return D(a)})}},{key:"handle",value:function(a,b,c,d,e){var f=this;return this.createPdfIFrame(a,void 0,e).then(function(h){return f.configurePdfFrameAndLoadPdf(a,h,b,c,d,e)})["catch"](function(a){var b=
f.pdfFrame;b&&b.dataset&&(b.dataset.expanded="off");throw a;})}},{key:"getPage",value:function(a){var b=this,c=this;return new Promise(function(d,e){window.addEventListener("message",function(c){"getPageResponse"===c.data.action&&c.data.pageNumber===a&&(c.data.html?d({html:c.data.html}):c.data.text?d({text:c.data.text}):e(c.data.error),window.removeEventListener("message",b))});c.pdfFrame||(c.pdfFrame=document.getElementById("pdfFrame"));c.pdfFrame.contentWindow.postMessage({action:"getPage",pageNumber:a},
"*")})}}]);return a}()},Oy1H:function(f,k){function a(c){a="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"===typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a};return a(c)}function e(c){"function"===typeof Symbol&&"symbol"===a(Symbol.iterator)?f.exports=e=function(b){return a(b)}:f.exports=e=function(b){return b&&"function"===typeof Symbol&&b.constructor===Symbol&&b!==Symbol.prototype?"symbol":
a(b)};return e(c)}f.exports=e},P6Rp:function(f,k,a){var e=a("Rx1E"),c=a("1C79");k=a("YkxI");var b=a("Fp5l"),r=a("oqL2");a=k(function(a,f){var d=r(f);b(d)&&(d=void 0);return b(a)?e(a,c(f,1,b,!0),void 0,d):[]});f.exports=a},PfJA:function(f,k){f.exports=function(a){return a.split("")}},PqYH:function(f,k){f.exports=function(a,e){for(var c=-1,b=null==a?0:a.length;++c<b&&!1!==e(a[c],c,a););return a}},Q2wK:function(f,k,a){var e=a("8AZL"),c=Math.max;f.exports=function(a,f,k){f=c(void 0===f?a.length-1:f,0);
return function(){for(var b=arguments,d=-1,r=c(b.length-f,0),y=Array(r);++d<r;)y[d]=b[f+d];d=-1;for(r=Array(f+1);++d<f;)r[d]=b[d];r[f]=k(y);return e(a,this,r)}}},Qp3N:function(f,k,a){k=a("NkRn");var e=a("1Yb9"),c=a("NGEn"),b=k?k.isConcatSpreadable:void 0;f.exports=function(a){return c(a)||e(a)||!!(b&&a&&a[b])}},RTdn:function(f,k,a){function e(a,b){this.name=a;this.status=b;this.frame=null;var c=[];this.queue=c;this.pendingEventsQueue={isEmpty:function(){return 0===c.length},dequeue:function(){return 0<
c.length&&c.splice(0,1)[0]},enqueue:function(a){return c.push(a)},clear:function(){return c.splice(0,c.length)||!0}}}function c(a){return void 0!==a?(a=A()(a),a.enableRemarqByDefault=!0,a):B.defaultLiteSettings}function b(a){var b=new K(a);a=b.href;b=b.href.indexOf("#");-1!==b&&(a=a.substring(0,b));return decodeURIComponent(a)}function r(a){return b(window.location.href)}function y(){return J.cookie.split(";").reduce(function(a,b){b=b.split("=");a[b[0].trim()]=b[1]&&b[1].trim();return a},{})}function m(a){return a&&
a.map(function(a){var b=Object(h.a)(a);return null!=b&&0<b.length?{item:b[0],relativePosition:a.relativePosition||"top"}:null}).reduce(function(a,b){null!=b&&(Array.isArray(b)?b.forEach(function(b){null!=b&&a.push(b)}):a.push(b));return a},[])[0]}function d(a,b,c,d){var e=a.createElement("link");e.id=c;e.type="text/css";e.rel="stylesheet";e.href=b+d;x(a).appendChild(e)}function x(a){return 0<a.getElementsByTagName("head").length?a.getElementsByTagName("head")[0]:a.body}Object.defineProperty(k,"__esModule",
{value:!0});a.d(k,"TP_HEADER_NAME",function(){return L});a.d(k,"CSRF_HEADER_NAME",function(){return D});a.d(k,"CSRF_COOKIE_NAME",function(){return F});a.d(k,"TPC_BLOCKED_HEADER",function(){return S});a.d(k,"groveInstallHelper",function(){return B});k.WidgetState=e;a.d(k,"widgetsStateHolder",function(){return ca});k.maskedRemarqSettings=c;k.calculateSiteUrl=b;k.extractSiteUrl=r;k.extractCookies=y;k.setCookie=function(a,b,c){var d=new Date;d.setTime(d.getTime()+864E5*c);c="expires="+d.toUTCString();
document.cookie=a+"="+b+";"+c+";path=/"};k.setupNcp=function(a,b,c){a={userRHKey:a.Hermes&&a.Hermes.userRHKey,hrmTracker:b.hrmTracker,hrmTracker_S:b.hrmTracker_S,hrmEvtId:a.Hermes&&a.Hermes.hrmEvtId,surveysCookie:b.rmq_jsp?b.rmq_jsp:null};c.nocaptcha&&(a.nocaptcha=c.nocaptcha);c.origin&&(a.origin=c.origin);return a};k.pageInfoPromise=function(a,b,d,e){var f=r(e&&e.isLite);return new Promise(function(h,m){var r=new XMLHttpRequest;r.withCredentials=!0;var k=Object.assign({version:e.version,iamEnabled:e.iamEnabled,
siteUrl:f},d);m=Object.keys(k).map(function(a){return a+"="+encodeURIComponent(k[a])}).join("&");r.open("GET",b+"/domain/settings?"+m,!0);r.responseType="json";r.onload=function(a){a="object"===z()(r.response)?r.response:r.response&&JSON.parse(r.response);var b=r.getResponseHeader(L),c=r.getResponseHeader(D);a[L]=b;a[D]=c;h(a)};r.onerror=function(b){e.isLite?(b=c(a),b.isLite=!0,h(b)):h({selector:{}})};r.send()})};k.resolveAbstractAt=function(a){return m(a)};k.resolveBannerAt=function(a){return m(a)};
k.resolveStickyAt=function(a){return a&&a.map(function(a){var b=Object(h.a)(a);return null!=b&&0<b.length?{item:b[0],relativePosition:a.relativePosition}:null})};k.resolveDenial=function(a){return a&&a.map(function(a){a=Object(h.a)(a,"node");return null!=a&&0<a.length}).reduce(function(a,b){return a||b},!1)};k.resolveAccessSelector=function(a){var b=Object(h.a)(a.selectors.access)[0];return b=a.access||b};k.determineAccess=function(a,b,c,d,e){c?a="denial":!a||0!==a.indexOf("pdf")&&0!==a.indexOf("epub")?
"abs"!==a&&"full"!==a&&(a=null):a="full";null!=a||null==b||c||(a=!e||"PDF"!==e.toUpperCase()&&"EPUB"!==e.toUpperCase()?d?d.map(function(a){return Object(h.a)(a)}).reduce(function(a,b){null!=b&&(Array.isArray(b)?b.forEach(function(b){null!=b&&a.push(b)}):a.push(b));return a},[])[0]?"full":"abs":"full":"full");return a||"full"};k.appendAnnotatorCssToHead=function(a,b){var c=a.createElement("link");c.id="grove-annotator-css";c.type="text/css";c.rel="stylesheet";c.href=b+"main/annotator.css";x(a).appendChild(c)};
k.appendGroveMainCssToHead=function(a,b){d(a,b,"grove-main-css","main/grove_main.css");-1!==navigator.userAgent.indexOf("Edge")||-1!==navigator.userAgent.indexOf("Trident")?d(a,b,"grove-main-css-2","main/grove_main_edge.css"):d(a,b,"grove-main-2","main/grove_main_vars.css")};k.appendRobotoFontToHead=function(a){var b=a.createElement("link");b.id="grove-roboto-css";b.rel="stylesheet";b.href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700,400italic";x(a).appendChild(b)};k.removeElementById=
function(a){J.getElementById(a)&&J.getElementById(a).parentNode.removeChild(J.getElementById(a))};k.frameInitHandler=function(a,b){"frameInit"===b.data.action&&b.source.postMessage({action:"urlParams",urlParams:a},"*")};k.installFrame=function(a,b,c,d,e,f,h,m,k,x,z){return new Promise(function(q,D){var t=null;x&&(t=J.createElement("div"),t.className=x);var A=k.isLite;if(J.getElementById(a))q(J.getElementById(a));else{var F="bottom";e||(e=document.body);e.relativePosition&&(F=e.relativePosition,e=
e.element);var B=J.createElement("iframe");B.id=a;A=r(A);var C=y(),N=J.contentType,L;N&&0===N.indexOf("application/")&&(L=N.substring(12).toUpperCase());m=Object.assign(m,{siteUrl:A,apiBase:c,userRHKey:u.Hermes&&u.Hermes.userRHKey,hrmTracker:C.hrmTracker,hrmTracker_S:C.hrmTracker_S,hrmEvtId:u.Hermes&&u.Hermes.hrmEvtId,origin:k.origin?k.origin:"",publicUrl:k.publicUrl?k.publicUrl:"",winOrigin:u.origin});L&&!m.contentType&&(m.contentType=L);k.palette&&(m.palette=k.palette);B.src=b;B.frameBorder="0";
B.scrolling="GroveSide"===a?"yes":"no";B.style.overflow=f.overflow||"GroveSide"===a?"":"hidden";B.allowtransparency="true";B.onload=function(a){this.contentWindow.postMessage({action:"init",urlParams:m},d)};B.onerror=function(a){D(a)};h&&Object.keys(h).forEach(function(a){B.dataset[a]=h[a];t&&(t.dataset[a]=h[a])});f&&Object.keys(f).forEach(function(a){B.style[a]=f[a];t&&(t.style[a]=f[a])});t&&t.appendChild(B);z&&Object.keys(z).forEach(function(a){B.setAttribute(a,z[a])});L=t||B;"bottom"===F?e.appendChild(L):
"top"===F?e.insertBefore(B,e.childNodes[0]):"below"===F?e.parentElement.insertBefore(L,e.nextSibling):"above"===F&&e.parentElement.insertBefore(L,e);if(F=ca.get(v.WIDGET_NAMES.fromFrameId(a)))F.status=v.WIDGET_STATUS.LOADING,F.frame=B;q(B)}})};f=a("Oy1H");var z=a.n(f),h=a("4T/i");f=a("kvU2");var A=a.n(f),v=a("9LPS"),N=a("JyB8");a.n(N);window.$||window.jQuery||a("7t+N");"function"!==typeof window.URL&&a("Xk2i");var K=window.URL,L="X-RMRQ-SESSION",D="X-CSRF-TOKEN",F="XSRF-TOKEN",S="X-TPC-BLOCKED",B=
{},u=window,J=document;B.defaultLiteSettings={domain:"*",userRHKey:null,pdId:null,publisherName:null,doiPrefixes:null,preferences:null,widgetConfiguration:null,enableRule:null,selectors:{posIndex:null,abstractIndex:null,fullTextIndex:null,stickyIndex:null,pdfIndex:[{type:"css",value:"a[href*='pdf']",field:null,sed:null,relativePosition:null}],doi:[{type:"url",value:null,field:null,sed:[".*((10\\.[0-9]{4})/[^\\/\\?\\#]*).*","$1"],relativePosition:null}],issn:null,corrAuthor:null,access:[{type:"url",
value:null,field:null,sed:[".*/([A-z]+)/((10\\.[0-9]{4})/[^\\/\\?\\#]*).*","$1"],relativePosition:null}],denial:null},enableRemarqByDefault:!0,userAgentSupported:!0,doi:null,access:null,articleInfo:null,authenticatedUser:null,rmq_sbc:0,whatsNew:null,stickyWidgetConfiguration:{topAir:100,bottomAir:30,stickyWidth:null,air:25}};var ca=Object.freeze(function(){var a=new N.HolderUtil;a.put(v.WIDGET_NAMES.REMARQ,new e(v.WIDGET_NAMES.REMARQ,v.WIDGET_STATUS.UNINSTALLED));a.put(v.WIDGET_NAMES.TOP_WIDGET,new e(v.WIDGET_NAMES.TOP_WIDGET,
v.WIDGET_STATUS.UNINSTALLED));a.put(v.WIDGET_NAMES.CORNER_WIDGET,new e(v.WIDGET_NAMES.CORNER_WIDGET,v.WIDGET_STATUS.UNINSTALLED));a.put(v.WIDGET_NAMES.POLL_WIDGET,new e(v.WIDGET_NAMES.POLL_WIDGET,v.WIDGET_STATUS.UNINSTALLED));a.put(v.WIDGET_NAMES.SURVEY_WIDGET,new e(v.WIDGET_NAMES.SURVEY_WIDGET,v.WIDGET_STATUS.UNINSTALLED));a.put(v.WIDGET_NAMES.STICKY_WIDGET,new e(v.WIDGET_NAMES.STICKY_WIDGET,v.WIDGET_STATUS.UNINSTALLED));a.put(v.WIDGET_NAMES.PDF_FRAME,new e(v.WIDGET_NAMES.PDF_FRAME,v.WIDGET_STATUS.UNINSTALLED));
return a}())},RTiT:function(f,k,a){function e(a){var b="temporary";switch(a){case 0:b="private";break;case 1:case 4:b="comment";break;case 3:case 6:b="update";break;case 7:b="conversation"}return"rmq-annotator-hl-"+b}f=a("En79");var c=a.n(f);f=a("NM/j");var b=a.n(f);f=a("Oy1H");var r=a.n(f),y=a("D79o");f=a("RyI1");var m=a.n(f);f=a("JDN0");var d=a.n(f);f=a("nfWN");var x=a.n(f);f=a("nIHh");var z=a.n(f);f=a("NGEn");var h=a.n(f);f=a("2247");var A=a.n(f);f=a("rCVp");a.n(f);f=a("hygk");var v=a.n(f);f=a("L8MQ");
var N=a.n(f);f=a("KgVm");var K=a.n(f);f=a("AgIj");var L=a.n(f);f=a("bpPp");var D=a.n(f),F=a("sCxY"),S=a("jItp"),B=a("OYJC"),u=a("yVmd"),J=a("cuGy"),ca=a("s6UT"),T=a("6t3S"),q=a("7t+N");q.__orig="rmq";window.jQuery?window.jQuery.__orig="own":(q=a("7t+N"),q.__orig="rmq",window.jQuery=q);var Q=!!(window.view&&window.view.state&&window.view.state.doc),U=-1===navigator.userAgent.indexOf("Chrome")&&-1!==navigator.userAgent.indexOf("Safari"),aa=/[\s,.\-]/g,G=/[^\s,.\-]/;window.annotatorHelperCnt=0;k.a={setPageIndex:function(a,
b){this.pageIndex=a;this.pageIndex.commentIdx={};this.pageIndex.pageAnnotations={};this.adapter=b;this.pageIndex=a;this.pageIndex.onPageChange={};this.pageIndex.currentPage=b.getCurrentPage();this.pageIndex.pushPageChange=function(a,b){this.onPageChange[a]?this.onPageChange[a].push(b):this.onPageChange[a]=[b]};this.pageIndex.popPageChange=function(a){return this.onPageChange[a]&&this.onPageChange[a].pop()};this.pageIndex.clearPageHandlers=function(a){this.onPageChange[a]=[]}},setGp:function(a){this.gp=
a;return this},setArticleInfo:function(a){this.articleInfo=a;return this},compress:function(a){return a&&a.replace(aa,"")},instruct:function(f,k,O,aa){var C,Z,R,t,na,Y,za,P,ma,da,H,ua,fa,la,Aa,pa,va,ta,oa,wa,Ea,Na,ob,ea,X,tb,Oa,Sa,I,M,Pa,Za,Qa,gb,hb,ha,V,Ia,Ba,g,Fa,Ta,qa,ib,jb,ub,pb,Ka,kb,qb,xa,wb,Ua,ra,$a,Xa,Ya,W,Ca,La,xb,Wa,Ma,Ra;return c.a.async(function(Ga){for(;;)switch(Ga.prev=Ga.next){case 0:Ra=function(){return"pdf"!==O.toLowerCase()};Ma=function(a,b,c){b=b||"$";c=c||"\\";for(var d=0,e=a.indexOf(b),
f=!1,p="";-1!==e;)a[e-1]===c?e=a.indexOf(b,e+2):(d=a.substring(d,e),f||"$"===d||("$"===d[0]&&(d=d.substr(1)),p+=d),f=!f,d=e,e=a.indexOf(b,e+1));d=a.substring(d);return p+d};Wa=function(a,b,c){b=b||"$";c=c||"\\";var d="string"===typeof a?a:a.textContent,e=RegExp("\\"+b,"g");if(!0===a.equation&&a.matches){if(a.matches('script[type*="math/"]')){if((new DOMParser).parseFromString(d,"text/xml").querySelector("parsererror"))return d=d.replace(e,c+b),"$"+d+"$";if(a=(a=/<([^>]*):math/.exec(d))&&a[1])d=d.replace(new RegExp(a+
"\\:","g"),""),d=d.replace("xmlns:"+a,"xmlns");return d.replace(/[\n|\t]/g,"")}if(a.matches('span[data-jats="latex"]')||a.matches('span[data-ams-doc^="math"]'))return d;throw{msg:"Unknown equation node",node:a};}return d=d.replace(e,c+b)};xb=function(a,b,c,d){if(-1<a){var e=Ca(Object.keys(I.idx().parent),a),f=Ca(Object.keys(I.idx().parent),b);0>e&&(e=-1-e);0>f&&(f=-f-1);var p=Object.keys(I.idx().parent)[e],h=I.idx().parent[p];e=I.idx().textNode[p];var g=Object.keys(I.idx().parent)[f],m=I.idx().parent[g];
f=I.idx().textNode[g];a=La(h,a-p,e,0);b=La(m,b-g,f,-0);if(null!=a&&null!=b)return e=a.el,c=a.offset,f=b.el,{startElement:e,startOffset:c,endElement:f,endOffset:b.offset+1,certainty:d};Object(J.debug)(a,b,c)}else return null};La=function(a,b,c,d){for(d=parseInt(d)||0;0>b+d;)a=Z(c.textContent),d+=a.length,c=gb(I.idx().textNode,c);hb(c);for(a=0;;){for(var e=c.textContent.split(""),f=0;f<e.length;f++){if(a==b+d)return{el:c,offset:f};G.test(e[f])&&a++}c=Qa(I.idx().textNode,c);if(null==c)return null}};
Ca=function(a,b){for(var c=0,d=a.length-1,e,f;c<=d;)if(e=(c+d)/2|0,f=a[e],f<b)c=e+1;else if(f>b)d=e-1;else return e;return~d};W=function(a){var b={indication:"unSelectComment"};b.unSelectComment=a;ra(b)};Ya=function(a){var b={indication:"scrollToComment"};b.scrollComment=a;ra(b)};Xa=function(a){for(var b=[],c=0;c<a.length;c++){var d={};d.commentId=a[c].commentId;d.access=a[c].access;a[c].groupId&&(d.groupId=a[c].groupId);b.push(d)}return b};$a=function(a){a.origin||(a.origin=R);a.contentType=O;var b=
C.gp&&C.gp.origin;try{var c=f.parent.origin}catch(ia){}f.parent.postMessage(a,b||c||"*")};ra=function(a){Object(J.debug)("[AH] Should Relay message",a);a.origin||(a.origin=R);a.contentType=O;if(document.getElementById("GroveSide")){var b=document.getElementById("GroveSide").contentWindow;a.contentType=O;Object(J.debug)("[AH] Should Relay message #2",a);b.postMessage(a,"*")}else Object(J.debug)("[AH] Should Relay message #3",a),f.parent.postMessage({relay:"GroveSide",msg:a,origin:R},"*")};Ua=function(a,
b){a.origin||(a.origin=R);f.parent.postMessage({relay:b||"GroveSide",msg:a,origin:R},"*")};wb=function(a){var b={indication:"updateRanges"};b.data=a;ra(b)};xa=function(a){var b={indication:"updateOffset"};b.annotationSection=a;ra(b)};qb=function(a){var b={};b.commentId=a.commentId;b.offset=a.offset;b.access=a.access;b.context=a.context;b.page=a.page;b.resolved=a.resolved;a.quoteHTML&&0<a.quoteHTML.trim().length&&(b.quoteHTML=a.quoteHTML);return b};kb=function(a,b,c,d){var e={};e.indication=b;e.annotationSection=
a;e.origIndication=c;e.tile=d;ra(e)};Ka=function(a,b){b=Object.assign({access:b},a);b.fontFamilies instanceof Set&&(b.fontFamilies=Array.from(b.fontFamilies));b.section=a.quote;delete b.highlights;f&&f.articleInfo?(b.articleInfo=f.articleInfo,b.siteUrl=f.articleInfo.siteUrl,b.doi=f.articleInfo.doi,f.articleInfo.page&&!b.page&&(b.page=f.articleInfo.page)):f&&(b.siteUrl=f.location.href);b.fromHiglightMenu=!0;return b};pb=function(a,b,c){function d(a){var b=a.split("/");return(a=A()(["p"],function(a){return L()(b,
function(b){return(b=/^(.*)\[(.*)\]$/.exec(b))&&a==b[1]})}).filter(function(a){return-1!=a})[0])?D()(b,0,a+1).join("/"):null}function e(a){try{var c=H.Util.nodeFromXPath(a,b)}catch(Ja){c="",0!==a.indexOf("//")&&(c=0===a.indexOf("/")?"/":"//"),c=document.evaluate(c+a,b,null,0,null).iterateNext()}return(a=q(c).nextAll("[data-paragraph-end]"))&&a[0]&&(a=H.Util.xpathFromNode(q(a[0]),b),Array.isArray(a))?a=a[0]:null}function f(a){var b=a.split("/");1<b.length&&(a="/"+b[1]);g=a}if(null==c||void 0==c){if(!a.ranges[0])return null;
var p=a.ranges[0].start,h=a.ranges[a.ranges.length-1].end}var g=c&&d(c)||d(p)||d(h);g||(g=c&&e(c)||e(p)||e(h));g||(g=c&&f(c)||f(p)||f(h));g||(g=h);if(p=H.Util.nodeFromXPath(g,b))if(1==a.access||4==a.access)c=M[g]||[],h=p.getElementsByClassName("chatballon")[0],c&&0<c.filter(function(b){return a.commentId&&b.commentId&&b.commentId==a.commentId}).length||(h?h.textContent=""+(parseInt(h.textContent)+1):(h=document.createElement("button"),q(h).addClass("chatballon"),h.textContent="1",q(h).click(function(a){a=
M[g];Ta(a);Ya(Xa(a)[0])}),p.appendChild(h)),99<parseInt(h.textContent)?q(h).addClass("big"):q(h).removeClass("big"),c.push(a)),a.chatballon=h,a.paragraphXpath=g,M[g]=c;else if(3==a.access||6==a.access){c=Pa[g]||[];h=p.getElementsByClassName("chatballonU")[0];if(!(c&&0<c.filter(function(b){return a.commentId&&b.commentId&&b.commentId==a.commentId}).length)){if(h)h.textContent=""+(parseInt(h.textContent)+1);else{h=document.createElement("button");q(h).addClass("chatballonU");h.textContent="1";q(h).click(function(a){a=
Pa[g];Ta(a);Ya(Xa(a)[0])});var m=p.getElementsByClassName("chatballon")[0];m&&p.insertBefore(h,m);p.appendChild(h)}99<parseInt(h.textContent)?q(h).addClass("big"):q(h).removeClass("big");c.push(a)}a.chatballonU=h;a.paragraphXpath=g;Pa[g]=c}return{chatballon:a.chatballon,chatballonU:a.chatballon,paragraphXpath:a.paragraphXpath}};ub=function(a,b){return pb(a,b)};jb=function(a,b){var c=b.slice(0);a.selectedRanges=null;var d=[];a=q("body").find(".rmq-annotator-hl").addBack().map(function(){return q(this).data("annotation")}).toArray().reduce(function(a,
b){a.set(b.commentId,b);return a},new Map);a=Array.from(a.values());a.forEach(function(a){var b=K()(c,function(b){return a.commentId===b.commentId});-1===b&&a.commentId?d.push(a):-1<b&&c.splice(b,1)});d.forEach(function(a){I.deleteAnnotation(a);if(a.chatballon){var b=parseInt(a.chatballon.innerText);1<b?a.chatballon.innerText=""+(b-1):a.chatballon.remove()}a.chatballonU&&(b=parseInt(a.chatballonU.innerText),1<b?a.chatballonU.innerText=""+(b-1):a.chatballonU.remove())});return c};Ta=function(a){var b=
x()(a,function(a){var b=a.commentId;return void 0!==a.highlights?a.highlights:q.grep(q("body").find(".rmq-annotator-hl"),function(a){return Ba(a,b)})});b.forEach(function(a){q(a).toggleClass("rmq-active",!0)});setTimeout(function(){b.forEach(function(a){q(a).toggleClass("rmq-active",!1)})},3E3)};Fa=function(a){var b=q(a).data("annotation");a=q(a).data("rmqCommentId");if(b)return C.annotationCache[a]||b;if(a)return C.annotationCache[a]};g=function(a,b){a=q(a).data();return a.annotation?a.annotation.access===
b:a.rmqAccess?b===a.rmqAccess:!1};Ba=function(a,b){var c=q(a).data();if(c.annotation)var d=c.annotation.commentId;else if(c.rmqCommentId||a.dataset.rmqCommentId)d=c.rmqCommentId||a.dataset.rmqCommentId;if(d){if(d===b)return!0;if(d.startsWith("tmp_"))return(a=C.tmpIdSubstutionMap[d])&&b===a}return!1};hb=function(a){if(null==a)return-1;var b=I.idx().textNode.indexOf(a);if(-1==b){Object(J.info)("DOM has changed since we started - need to check the parent index");for(var c=a.parentNode,d=I.idx().parent.indexOf(c);-1==
d&&null!=c;){c=c.parentNode;if(null==c)break;d=I.idx().parent.indexOf(c)}var e=Object.keys(I.idx().parent).indexOf(""+d),f=recur(c);c=Object.keys(I.idx().parent)[e+1];I.idx();e=new Set;for(var p=d;p<c;p++){var h=I.idx().textNode[p];null!=h&&(e.add(h),delete I.idx().textNode[p])}Object.keys(f.textNode).map(function(a){return parseInt(a)}).forEach(function(c){I.idx().textNode[c+d]=f.textNode[c];f.textNode[c]==a?b=c+d:f.textNode[c].textContent==a.textContent&&(b=c+d)})}return b=Object.keys(I.idx().textNode).indexOf(""+
b)};gb=function(a,b){b=Za(a,b);return 0<b?(b=Object.keys(a)[b-1],null!=b?a[""+b]:null):null};Qa=function(a,b){b=Za(a,b);b=Object.keys(a)[b+1];return null!=b?a[""+b]:null};Za=function(a,b){b=a.indexOf(b);return-1!==b?Object.keys(a).indexOf(""+b):-1};Oa=function(a){if(a)if(Ea(a))a.classList=m()(a.classList,function(a){return-1===a.indexOf("rmq-annotator")});else if(a.tagName&&-1!==Sa.indexOf(a.tagName.toLowerCase())){a.classList=m()(a.classList,function(a){return-1===a.indexOf("rmq-annotator")});for(var b=
0;b<(a.childNodes?a.childNodes.length:0);b++){var c=a.childNodes[b];if(c&&"string"===typeof c.id&&0<=c.id.indexOf("rmqId_")&&c.tagName&&"span"===c.tagName.toLowerCase()){a.removeChild(c);break}}}else q(a).replaceWith(a.childNodes)};tb=function(a){a=a.map(function(a){return a._parent?a._parent:a});for(var b=null,c=0;c<a.length;c++)a[c]!==b?b=a[c]:a[c]=null;return a.filter(function(a){return null!==a})};X=function(a,b,c){b=b||[];var d=!1;a=q(a).toArray();do d=!1,a=x()(a.map(function(a){if(a.tagName&&
c&&-1!==c.indexOf(a.tagName.toLowerCase())||!a.hasChildNodes())return[a];d=!0;var e=z()(a.childNodes),f=-1!==b.indexOf(a.tagName.toLowerCase());e.forEach(function(b){f?b._parent=a:a._parent&&(b._parent=a._parent)});return e}));while(d);return a};Na=function(a){for(;a;){var b=ta(a),c=wa(a),d=oa(a);if(d)return[d,a];if(b){if(b=q(a).find('script[type^="math"]')[0])return[b,a];break}else if(c)return[c,a];a=a.parentNode}return[null,null]};Ea=function(a){return ta(a)||wa(a)||oa(a)};wa=function(a){if(a&&
a.matches&&a.matches('span[data-jats^="math"]'))return a.querySelector('span[data-jats="latex"].accessibly-hidden');if(a&&a.matches&&a.matches('span[data-ams-doc^="math"]'))return a.querySelector('span[data-ams-doc^="math"].accessibly-hidden')};oa=function(a){return a instanceof HTMLElement&&a.matches("span.MathJax")?(a=a.nextElementSibling,a.matches('script[type^="math/"]')?a:null):null};ta=function(a){return a.className&&"string"===typeof a.className&&(-1!==a.className.indexOf("-eqn")||-1!==a.className.indexOf("disp-formula"))};
va=function(a){Array.isArray(a)&&1==a.length&&a[0]&&a[0].id&&0===a[0].commonAncestor.indexOf("MathJax")&&(a[0].commonAncestor=q(a[0].commonAncestor).parents(".MathJax_Display").next()[0]);return a};pa=function(a){a={type:a};document.getElementById("GroveSide")&&document.getElementById("GroveSide").contentWindow.postMessage(a,"*")};na=function(){return/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)};0<this.annotatorHelperCnt++&&Object(J.error)("Annotator already instructed");
O=(O||"html").toUpperCase();C=this;C.id=(new Date).getTime();C.tmpIdSubstutionMap={};C.annotationCache={};Z=C.compress;R="string"===typeof document.body.id&&""!==document.body.id&&document.body.id;R||(t=C.adapter&&C.adapter.getCurrentPage&&C.adapter.getCurrentPage(),"number"===typeof t?t=""+t:"object"===r()(t)&&(t=JSON.stringify(t)),R="Page_"+t);aa&&(C.worker=aa,C.worker.onmessage=function(a){var b=a.data.messageId,c=C.workerPromises[b],d=a.data.err;a=a.data.result;c&&(delete C.workerPromises[b],
a?c.resolve(a):d?c.reject(d):c.reject("NothingReturned"))},C.workerPromises=[],C.submitJob=function(a){var b=Math.random().toString(36).substring(2);a.messageId=b;var c=new Promise(function(a,c){C.workerPromises[b]={resolve:a,reject:c}});C.worker.postMessage(a);return c});Y=na();P=za=!0;ma=window.jQuery;window.jQuery=q;Ga.prev=59;da=a("0Mzu");Ga.next=66;break;case 63:throw Ga.prev=63,Ga.t0=Ga["catch"](59),Ga.t0;case 66:H=C._Annotator=da.Annotator||da;if(!Q){Ga.next=73;break}Ga.next=70;return c.a.awrap(a.e(3).then(a.bind(null,
"S8/A")));case 70:ua=Ga.sent,ua=ua["default"]||ua,H=ua(H,C);case 73:return ma&&(window.jQuery=ma),H.prototype._setupWrapper=function(){this.element.find("script").filter(':not([type*="math/"])').remove();this.element.addClass("rmq-annotator-wrapper");this.wrapper=this.element;C.wThis=this;return this},H.prototype._setupViewer=function(){return this},H.prototype._setupEditor=function(){return this},H.Notification=function(){},H.prototype.destroy=function(){za?C.touchEventsHandler.stop():(document.removeEventListener("mouseup",
this.checkForEndSelection),document.removeEventListener("mousedown",this.checkForStartSelection));q("#annotator-dynamic-style").remove();this.adder&&this.adder.remove();this.viewer&&this.viewer.destroy();this.editor&&this.editor.destroy();this.wrapper&&this.wrapper.find(".rmq-annotator-hl").each(function(){Oa(this)});this.element&&this.element.removeClass("rmq-annotator-wrapper");this.element&&this.element.data("annotator",null);var a=this.plugins;for(b in a)this.plugins[b].destroy();this.removeEvents();
var b=H._instances.indexOf(this);if(-1!==b)return H._instances.splice(b,1)},H.prototype.events={".rmq-annotator-hl mouseover":"onHighlightMouseover",".rmq-annotator-hl mouseout":"startViewerHideTimer",".rmq-annotator-adder button click":"onAdderClick",".rmq-annotator-adder button mousedown":"onAdderMousedown"},Y&&(H.prototype.events=Object.assign(H.prototype.events),H.prototype.events={".rmq-annotator-adder button touchend":"onAdderClick"}),fa=document.getElementById("rmrqTourMode")&&"true"===document.getElementById("rmrqTourMode").value,
la=this.gp&&this.gp.isLite,H.prototype.html={adder:'<div class="rmq-annotator-adder rmq_tooltipCustom" aria-modal="true"><div class="rmq_tooltiptext rmq_pdfTooltipbg"><button id="highlight"><div class="rmq_adderIcon"><svg width="17px" height="17px" viewBox="0 0 17 17" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><g stroke="none" stroke-width="1" fill="none" fill-rule="evenodd"><g><g transform="translate(3.000000, 2.000000)"><polygon fill="#f8f8f8" points="0 13 11 13 11 12 0 12"></polygon><path fill="#f8f8f8" d="M1.41222388,7.76602119 L0,9.22181369 L2.70562744,11.4613037 L3.90055197,10.2714002 L6.10399263,9.49181108 C6.27186931,9.45774448 6.42432144,9.36721231 6.53455341,9.23296783 L10.7121763,4.10573462 C11.4966018,3.14240008 11.4456458,1.73074241 10.5635903,0.876360432 C9.5470617,-0.108570284 8.17015245,0.00985276586 7.37327375,0.762518151 L2.4184515,5.05239021 C2.28857681,5.16579913 2.20289355,5.31750614 2.17245618,5.48314331 L1.41222388,7.76602119 Z M9.87368038,3.42274977 L5.69746197,8.54826531 C5.73746826,8.49954004 5.78863949,8.46405676 5.84509535,8.44410079 L5.78998674,8.45576148 L3.3008194,9.33644225 L2.66821289,10.0626831 L1.61816406,9.09716797 L2.27437774,8.43044769 L2.39929014,8.22479354 L3.2141979,5.77773238 L3.22462418,5.72323352 C3.20611601,5.77886906 3.17300281,5.82922848 3.1280883,5.86845046 L8.09853212,1.56439002 C8.5203635,1.16665716 9.24476428,1.10435404 9.81111104,1.65309641 C10.2821702,2.10937658 10.3102266,2.88663752 9.87368038,3.42274977 Z"></path><polygon fill="#f8f8f8" points="3 5.75518453 6.34423899 9.18321503 7.11834502 8.4280305 3.77410604 5"></polygon><polygon fill="#f8f8f8" points="1.61553955 8.29144287 3.62811279 10.0869141 4.58270264 9.5645752 1.77410604 7"></polygon></g></g></g></svg></div><div class="rmq_adderText">HIGHLIGHT</div></button>'+
'<button id="note" '.concat(fa?"disabled":"",">")+'<div class="rmq_adderIcon"><svg width="17px" height="17px" viewBox="0 0 17 17" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" style="margin-left: 4px"><g stroke="none" stroke-width="1" fill="none" fill-rule="evenodd"><g><path fill="#f8f8f8" d="M1.98730469,0 L1.98730469,5 L0,5 L0,15 L10.999,15 L10.999,5 L8.9675293,5.03501211 L8.9675293,0.0350121094 L1.98730469,0 Z M3,0.999 L8.031,0.999 L7.99909961,5 L3,5 L3,0.999 Z M0.999,14 L9.999,14 L9.999,6 L0.999,6 L0.999,14 Z M5,12.001 L6,12.001 L6,8 L5,8 L5,12.001 Z"></path></g></g></svg></div><div class="rmq_adderText">NOTE</div></button>'+
(la?"":'<button id="comment" '.concat(fa?"disabled":"",">")+'<div class="rmq_adderIcon"><svg width="17px" height="17px" viewBox="0 0 17 17" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><g stroke="none" stroke-width="1" fill="none" fill-rule="evenodd"><g><g transform="translate(2.000000, 3.000000)"><polygon fill="#f8f8f8" points="1.67657143 3.04367885 10.248 3.04367885 10.248 2.197525 1.67657143 2.197525"></polygon><polygon fill="#f8f8f8" points="1.67657143 5.15906346 10.248 5.15906346 10.248 4.31290962 1.67657143 4.31290962"></polygon><polygon fill="#f8f8f8" points="1.67657143 7.27444808 7.42564286 7.27444808 7.42564286 6.42829423 1.67657143 6.42829423"></polygon><polyline stroke="#f8f8f8" stroke-linecap="square" points="11.8175786 0.105769231 0.107078571 0.105769231 0.107078571 9.07182692 7.14550714 9.07182692 10.2899357 10.9306154 10.2708643 9.06759615 11.8175786 9.06759615 11.8175786 0.105769231"></polyline></g></g></g></svg></div><div class="rmq_adderText">COMMENT</div></button>')+
'<button id="conversation" '.concat(fa?"disabled":"",">")+'<div class="rmq_adderIcon"><svg width="21px" height="21px" viewBox="0 0 21 21" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><g stroke="none" stroke-width="1" fill="none" fill-rule="evenodd"><g><path fill="#f8f8f8" id="a" d="M9 17.988V10h11.262v7.984h-1.35l.02 2.014-3.401-2.01H9zm1-1h5.804l2.11 1.247-.013-1.25h1.36V11H10v5.988zM15.64 10V4H2v10.047h1.664L3.64 16.44l4.04-2.388H9v-1H7.406l-2.748 1.624.017-1.629H3V5h11.64v5h1z"/></g></g></svg></div><div class="rmq_adderText">DISCUSS</div></button></div></div>',
wrapper:'<div class="rmq-annotator-wrapper"></div>'},Aa=H.prototype.publish,H.prototype.publish=function(a,b){Aa.call(C.annotator,a,b);var c=null;try{c=JSON.parse(JSON.stringify(b))}catch(ia){}a={evtName:a,page:C.adapter&&C.adapter.getCurrentPage(),evtArgs:c};$a(a)},H.prototype.onHighlightMouseover=function(a){Object(J.debug)("onHighlightMouseover")},H.prototype.startViewerHideTimer=function(a){Object(J.debug)("startViewerHideTimer")},H.prototype._setupDocumentEvents=function(){if(za){var a=new B.a(H,
this,H.Range.BrowserRange,va,C),b=new B.b(window,document,C);b.start();b.subscribe(a);C.touchEventsHandler=b}else P&&(document.addEventListener("mouseup",this.checkForEndSelection),document.addEventListener("mousedown",this.checkForStartSelection));return this},H.prototype.checkForStartSelection=function(a){return this.mouseIsDown=!0},H.prototype.getSelectedRanges=function(){if(Q)return this.proseMirrorGetSelectedRanges();var a=H.Util.getGlobal().getSelection();var b=[];var c=[];if(!a.isCollapsed){var d;
var e=[];var f=b=0;for(d=a.rangeCount;0<=d?b<d:b>d;f=0<=d?++b:--b){var h=a.getRangeAt(f);for(f=new H.Range.BrowserRange(h);f.endContainer.nodeType===Node.ELEMENT_NODE&&0==f.endContainer.childNodes.length;){f.endContainer=f.endContainer.previousElementSibling?f.endContainer.previousElementSibling:f.endContainer.parentNode;var g=f.endContainer.childNodes.length;f.endOffset=1<g?g-1:1}for(;f.startContainer.nodeType===Node.ELEMENT_NODE&&0==f.startContainer.childNodes.length;)f.startContainer=f.startContainer.nextElementSibling?
f.startContainer.nextElementSibling:f.startContainer.parentNode,f.startOffset=0;try{var m=f.normalize().limit(this.wrapper[0]);null===m&&c.push(h);e.push(m)}catch(lb){}}b=e}return b},H.Util.mousePosition=function(a,b){var c=q(b).css("position");"absolute"!==c&&"fixed"!==c&&"relative"!==c&&(b=q(b).offsetParent()[0]);c=q(b).offset();if(U&&!na()){var d=q(b).parents("[style*=left]").css("left");b=q(b).parents("[style*=top]").css("top");d=d&&d.replace("px","");b=b&&b.replace("px","");d=d&&parseFloat(d);
b=b&&parseFloat(b);null!=b&&(c.top=b);null!=d&&(c.left=d)}return{top:a.pageY-c.top,left:a.pageX-c.left}},H.Util.findSelectionOffset=function(a,b){b?(a=q(b).css("position"),"absolute"!==a&&"fixed"!==a&&"relative"!==a&&(b=q(b).offsetParent()[0]),b=q(b).offset()):b={top:0,left:0};return(a=(a=H.Util.getGlobal().getSelection())&&a.getRangeAt(a.rangeCount-1))&&0<a.getClientRects().length?(a=a.getClientRects(),a=a[a.length-1],{top:a.bottom+window.pageYOffset-b.top,left:a.right-b.left}):null},H.prototype.checkForEndSelection=
function(a,b){var c=0===a.type.indexOf("mouse");a.type.indexOf("touch");var d=0===a.type.indexOf("selection");var e=a.button;if(!(c&&0!==e||this.ignoreMouseup)){this.mouseIsDown=!1;var p=this.selectedRanges=va(this.getSelectedRanges());c=0;for(e=p.length;c<e;c++){var h=p[c];h=h.commonAncestor;q(h).hasClass("rmq-annotator-hl")&&(h=q(h).parents("[class!=rmq-annotator-hl]")[0]);if(this.isAnnotator(h))return}if(a&&this.selectedRanges.length){if(d?(e=window.getSelection().focusNode,e.nodeType!==Node.ELEMENT_NODE&&
(e=e.parentElement)):e=a.target,c=H.Util.mousePosition(a,this.wrapper[0]),c=(p=H.Util.findSelectionOffset(a,this.wrapper[0]))||c||{left:0,top:0},C.adapter&&C.adapter.adjustEndSelectionOffset?c=C.adapter.adjustEndSelectionOffset(e,U?p:c):(e=this.wrapper.width(),e=c.left+this.adder.width()-e,0<e&&(c.left-=e)),e=this.selectedRanges.map(function(a){return a.serialize(I.wrapper[0],"rmq-annotator-hl")}),(p=this.selectedRanges.map(function(a){return H.Range.sniff(a).normalize(I.wrapper[0]).text()}).join(" "))||
this.pvSection){if(p&&p!==this.pvSection)return this.pvSection=p,fa&&ra({indication:"selectionEnd",ranges:e,section:p}),f.parent.postMessage({relay:"contentFrames",msg:{messageIndication:"adderShown",windowId:window.articleInfo&&window.articleInfo.id},origin:R},"*"),this.adder.is(":visible")||Object(T.a)(C.gp)("AnnotatorDialog","AdderShown"),a=this.adder.css(c).show(),b&&b(!0),a;if(!d)return this.adder.is(":visible")&&Object(T.a)(C.gp)("AnnotatorDialog","AdderHidden"),C.candidateAnnotation?(kb({},
"commentCancelled"),I.deleteAnnotation(C.candidateAnnotation),delete C.candidateAnnotation):ra({action:"onAdderClickClear"}),this.selectedRanges.splice(),delete this.pvSection,d=this.adder.hide(),a.target.matches(".rmq-annotator-hl")||($a({action:"resize",origin:R,expanded:!1,frameId:["CornerWidget","GroveSide"],"class":"collapsed"}),Ua({action:"resize",expanded:!1},["GroveSide","CornerWidget"])),b&&b(!1),d}}else return this.adder.is(":visible")&&Object(T.a)(C.gp)("AnnotatorDialog","AdderHidden"),
C.candidateAnnotation?(kb({},"commentCancelled"),I.deleteAnnotation(C.candidateAnnotation),delete C.candidateAnnotation):ra({action:"onAdderClickClear"}),delete this.pvSection,d=this.adder.hide(),a.target.matches(".rmq-annotator-hl")||($a({action:"resize",origin:R,expanded:!1,frameId:["CornerWidget","GroveSide"],"class":"collapsed"}),Ua({action:"resize",expanded:!1},["GroveSide","CornerWidget"])),b&&b(!1),d}},H.Range.NormalizedRange.prototype.text=function(){var a=null,c=this.leafNodes().filter(function(a){return a.nodeType===
Node.ELEMENT_NODE?I.recur_filter(a,!1):a.nodeType===Node.TEXT_NODE?I.recur_filter(a.parentNode,!1):!1});c=c.map(function(c){var d=Na(c.parentNode);return(d=b()(d,2)[0])?d!==a?(a=d,d.equation=!0,d):null:c}).filter(function(a){return null!=a});c=c.map(function(a){return Wa(a)});return c.join("")},ob=function(a){return function(b,c){b=b.getAttribute(a);return d()(b)?"/".concat(c,"[@").concat(a,'="').concat(b,'"]'):null}},ea=[ob("name"),function(a,b){var c=a.getAttribute("id");if(null!=c&&-1==!c.indexOf("rmqId"))return"".concat(b,
'[@id="').concat(c,'"]');c=a.getAttribute("data-page-number");return d()(c)?(b="".concat(b,'[@data-page-number="').concat(c,'"]'),(a=a.getAttribute("class"))&&-1!==a.split(" ").indexOf("page")?"".concat(b,'[@class="').concat(a,'"]'):b):null}],H.Util.xpathFromNode=function(a,b){var c=a[0];for(a=[];c!==b&&null!=c&&c.tagName;){var d=c.tagName&&c.tagName.replace(":","\\:").toLowerCase(),e=ea.map(function(a){return a(c,d)}).filter(function(a){return null!=a});if(e[0]){e=e[0];a.unshift(e);break}else if(c.parentElement)e=
m()(c.parentElement.children,function(a){return a.tagName===c.tagName}).indexOf(c)+1,e="".concat(d,"[").concat(e,"]"),a.unshift(e),c=c.parentElement;else break}return["/"+a.join("/")]},H.Util.nodeFromXPath=function(a,b){var c=Object(F.a)(a,b);if(c[0])return c[0];if("/"===a[0]){c=Object(F.a)(a.substring(1),b);if(c[0])return c[0];"/"!==a[1]&&(a="/"+a)}else a="//"+a;c=Object(F.a)(a,b);return c[0]},H.Range.nodeFromXPath=H.Util.nodeFromXPath,H.Range.NormalizedRange.prototype.leafNodes=function(a,b){b=
X(q(this.commonAncestor),a,b);var c=b.indexOf(this.start);-1===c&&a&&-1!==a.indexOf(this.start.parentElement.tagName.toLowerCase())&&(c=b.indexOf(this.start.parentElement));var d=b.indexOf(this.end);-1===d&&a&&-1!==a.indexOf(this.end.parentElement.tagName.toLowerCase())&&(d=b.indexOf(this.end.parentElement));return q.makeArray(b.slice(c,+d+1||9E9))},H.prototype.deleteAnnotation=function(a){if(a.proseMirror)this.proseMirrorDeleteAnnotation(a);else{var b=a.commentId;q.grep(q("body").find(".rmq-annotator-hl"),
function(a){return Ba(a,b)}).forEach(function(a){return Oa(a)})}this.publish(u.a.ANNOTATION_DELETED_EVENT,[function(a){(a=Object.assign({},a))&&a.highlights&&delete a.highlights;return a}(a)]);return C.adapter&&C.adapter.onDeletedAnnotation?C.adapter.onDeletedAnnotation(a):a},H.prototype.clearEventHandler=function(){var a=this;setTimeout(function(){var b=window.getSelection();b&&"Range"!==b.type&&(this.ignoreMouseup=!1,H.Util.getGlobal().getSelection().removeAllRanges(),a.selectedRanges=null)},300)},
H.prototype.onAdderKeyUp=function(a){("Escape"===a.key||27===a.keyCode)&&this.adder&&this.adder.hide()},H.prototype.onAdderClick=function(a){Object(J.debug)("onAdderClick");var b=!1;null!=a&&a.preventDefault();var c=a.currentTarget&&a.currentTarget.id||a.target.id;""===c&&(c=q(a.target).parents("button")[0].id);if(""===c)this.adder.hide();else{pa("target id="+c);Y||this.adder.hide();if("highlight"===c)b=!0;else if("clear"===c)return;if(!d){var d=this.setupAnnotation(this.createAnnotation(),!1);q(d.highlights).addClass("rmq-annotator-hl-temporary")}if(b){var e=
0;var f="highlight"}else"comment"===c?(e=1,f="candidateCreateComment"):"note"===c?(e=0,f="candidateNote"):"update"===c?(e=3,f="candidateUpdateComment"):"conversation"===c&&(e=7,f="candidateHighlightConversation");if(f){Object(T.a)(C.gp)("AnnotatorDialog",f);try{kb(Ka(d,e),f,void 0,"candidateNote"===f?"types":void 0),q(".rmq-annotator-hl-temporary").filter(function(a,b){return-1===d.highlights.indexOf(b)}).map(function(a,b){return q(b)}),C.candidateAnnotation&&q(C.candidateAnnotation.highlights).hasClass("rmq-annotator-hl-temporary")&&
this.deleteAnnotation(C.candidateAnnotation),C.candidateAnnotation=d}catch(Da){Object(J.error)("While sending annotation event",Da)}this.ignoreMouseup=!1}}},Sa="sup sub b i em h1 h2 h3 h4 img".split(" "),H.prototype.highlightRange=function(a,c){var d=this;null==c&&(c="annotator-hl");var e=Object(S.getRandomId)();var f=q("<span id='rmqId_".concat(e,"' class='").concat(c,"'></span>"));var p,h=a.leafNodes(Sa,["svg"]).filter(function(a){return d.recur_filter(a)&&d.recur_filter(a.parentNode)}),g=new Set;
a=!0;for(var m=h.length;a;){var r=h.reduce(function(a,b){b._parent&&(a.get(b._parent)?a.get(b._parent).push(b):a.set(b._parent,[b]));return a},new Map);Array.from(r.entries()).filter(function(a){a=b()(a,2);var c=a[1],d=X(a[0],Sa,["svg"]);c.forEach(function(a){var b=d.indexOf(a);-1!==b?d.splice(b,1):(b=tb(d),a=b.indexOf(a),-1!==a&&X(b[a],Sa,["svg"]).forEach(function(a){a=d.indexOf(a);-1!==a&&d.splice(a,1)}))});return 0===d.length}).forEach(function(a){var c=b()(a,2);a=c[0];c=c[1];var d=h.indexOf(c[0]);
h.splice(d,c.length,a)});a=0<r.size&&r.size<m;m=r.size}h=h.map(function(a){var d=Na(a.parentNode),h=b()(d,2);d=h[0];h=h[1];return d?d!==p?(p=d,q(h).addClass(c).show()[0]):null:a.tagName&&-1!==Sa.indexOf(a.tagName.toLowerCase())?(a.id||a.setAttribute("id","rmqId_".concat(e)),q(a).addClass(c).show()[0]):-1!==Sa.indexOf(a.parentNode.tagName.toLowerCase())?(d=H.Util.getTextNodes(q(a.parentNode)).get(),d.map(function(a){return g.has(a)}).reduce(function(a,b){return a||b})?null:(d.forEach(function(a){return g.add(a)}),
a.parentNode.id||a.parentNode.setAttribute("id","rmqId_".concat(e)),q(a).wrapAll(f).parent().show()[0])):q(a).wrapAll(f).parent().show()[0]});h=h.filter(function(a){return null!=a});h=x()(h);h.find(function(a){return a&&a.id&&0<=a.id.indexOf("rmqId_")})||(a=document.createElement("span"),a.id="rmqId_"+e,h&&Array.isArray(h)&&h[0]&&h[0].appendChild(a));return h},H.prototype.addContextToComment=function(a,b){function d(a){var b,d,e,p;return c.a.wrap(function(c){for(;;)switch(c.prev=c.next){case 0:b=
a,d=q(b.parentNode),e=H.Util.getTextNodes(d).filter(function(a,b){return h.recur_filter(b)}),p=e.index(b);case 4:if(!(0<p)){c.next=12;break}--p;b=e[p];c.next=10;return b;case 10:c.next=19;break;case 12:d=d.parent();if(!d[0]){c.next=18;break}e=H.Util.getTextNodes(d).filter(function(a,b){return h.recur_filter(b)});p=e.index(b);c.next=19;break;case 18:return c.abrupt("return");case 19:c.next=4;break;case 21:case "end":return c.stop()}},f)}function e(a){var b,d,e,f;return c.a.wrap(function(c){for(;;)switch(c.prev=
c.next){case 0:b=a,d=q(b.parentNode),e=H.Util.getTextNodes(d).filter(function(a,b){return h.recur_filter(b)}),f=e.index(b);case 4:if(!(f<e.length-2)){c.next=12;break}f+=1;b=e[f];c.next=10;return b;case 10:c.next=19;break;case 12:d=d.parent();if(!d[0]){c.next=18;break}e=H.Util.getTextNodes(d).filter(function(a,b){return h.recur_filter(b)});f=e.index(b);c.next=19;break;case 18:return c.abrupt("return");case 19:c.next=4;break;case 21:case "end":return c.stop()}},p)}var f=c.a.mark(d),p=c.a.mark(e),h=
this;if(!b[0])return a;var g=b.map(function(a){return Z(a.text())}).join("");g=40-Ma(g).length;if(0<g){a.context={back:[],front:[]};var m=b[b.length-1].end;b=d(b[0].start);for(m=e(m);0<g;){var r=b.next();r.done||(r=Z(r.value.textContent),g>=r.length?(a.context.back.unshift(r),g-=r.length):(a.context.back.unshift(r.substring(r.length-g)),g=0));0<g&&(r=m.next(),r.done||(r=Z(r.value.textContent),g>=r.length?(a.context.front.push(r),g-=r.length):(a.context.front.push(r.substring(0,g)),g=0)))}a.context.back=
a.context.back.join("");a.context.front=a.context.front.join("")}return a},H.prototype.setupAnnotation=function(a,b,c,d){var e=!a.commentId;if(e)a.ranges=I.getSelectedRanges()||[],a.resolved=!0,C.adapter&&(a.page=C.adapter.getCurrentPage());else{var f=q.grep(q("body").find(".rmq-annotator-hl"),function(b){return Ba(b,a.commentId)});if(f&&0<f.length)return c=this.findAnnotationOffset(a),null!=c&&(e=c.offset_v,b=c.offset_h,c=c.offset_t,a.offset!==e&&(a.offset=e,a.offset_h=b,a.offset_t=c,xa(qb(a),"updateOffset"))),
a;a.quote||(a.quote=a.section);Q&&(f=this.proseMirrorFindRanges(a),a.ranges=(a.ranges||[]).concat([f]));f=!1;a.ranges&&0<a.ranges.length&&(f=this.verifySelection(a.ranges,a));if(!f&&a.contextRanges&&0<a.contextRanges.length){var h=!0,p=!1,g=void 0;try{for(var m=a.contextRanges[Symbol.iterator](),r;!(h=(r=m.next()).done);h=!0){var k=r.value;if(f=this.verifySelection(k.ranges,a,k.certainty)){a.ranges=k.ranges;a.page=k.page;break}}}catch(Ja){p=!0,g=Ja}finally{try{if(!h&&null!=m["return"])m["return"]()}finally{if(p)throw g;
}}}if(f)a.resolved=!0,Object(J.info)("%cFound ranges for %s","color: blue; font-style: bold",a.commentId);else{if(c)return a.resolved=null,a;a.ranges=this.lookupRangesInDocument(a,d)||[];a.resolved=!!a.ranges[0];c=Object(S.getMostRelativeContextRange)(O,a.contextRanges,null,a.doi);a.page=a.ranges&&a.ranges.page||c&&c.page}}c=a.offset;Q?(a=this.proseMirrorHandleResolvedAnnotation(a,f,e,b),a.proseMirror=!0):(a=this.handleResolvedAnnotation(a,f,e,b),a.proseMirror=!1);C.annotationCache[a.commentId]=a;
!f&&a.ranges&&0<a.ranges.length&&(b=a.ranges&&a.ranges.offset,d=a.ranges&&a.ranges.certainty,e||(f=q(a.highlights)[0],f=a.page||f&&C.adapter&&C.adapter.getElementPage&&C.adapter.getElementPage(f),wb({commentId:a.commentId,type:O,access:a.access,offset:b,certainty:d,ranges:a.ranges,page:f})));Q?(b=a.offset,b===c||e||xa(qb(a))):(b=this.findAnnotationOffset(a),null!=b&&(d=b,b=d.offset_v,c=d.offset_h,d=d.offset_t,a.offset!==b&&(a.offset=b,a.offset_h=c,a.offset_t=d,e||xa(qb(a)))));return C.adapter&&C.adapter.onResolvedAnnotationSetup?
C.adapter.onResolvedAnnotationSetup(a):a},H.prototype.handleQuoteHTMLOfHighlightedElement=function(a){var c=Na(a);if(c=b()(c,2)[0])return c.equation=!0,Wa(c);var d=function(a){a=a.cloneNode(!0);var b=q(a).find("[href]").toArray();a.getAttribute("href")&&b.unshift(a);b.forEach(function(a){a.getAttribute("href");a.setAttribute("href",a.href)});b=q(a).find("[src]").toArray();a.getAttribute("src")&&b.unshift(a);b.forEach(function(a){a.getAttribute("src");a.setAttribute("src",a.src)});q("span.rmq-annotator-hl",
a).each(function(a,b){q(b).contents().unwrap()});a.style&&a.style.fontSize&&(a.style.fontSize="");return 0<a.innerHTML.length?"<"+a.tagName+">"+a.innerHTML+"</"+a.tagName+">":a.outerHTML};return-1!==Sa.indexOf(a.tagName&&a.tagName.toLowerCase())?d(a):A()(a.childNodes,function(a){if(a instanceof Text){var b=a._parent,c=q(a).parentsUntil(":not(.rmq-annotator-hl)").parent(),e=c[0]&&c[0].tagName&&"a"===c[0].tagName.toLowerCase()?c[0]:null;e=e||b;b=function(a){if(e){var b=e.cloneNode(!1);b.getAttribute("href");
b.setAttribute("href",b.href);b.innerText=a;b.style&&b.style.fontSize&&(b.style.fontSize="");return b.outerHTML}return a};if(c.is(":visible"))if(C.adapter&&C.adapter.handleTextQuoted)try{return b(C.adapter.handleTextQuoted(a,annotation))}catch(mb){return b(a.textContent)}else return b(a.textContent);else return""}else return-1!==Sa.indexOf(a.tagName&&a.tagName.toLowerCase())?d(a):a.textContent}).map(function(a){return Wa(a)}).join("")},H.prototype.handleResolvedAnnotation=function(a,b,c,d){var f=
this;if(!c&&q.grep(q("body").find(".rmq-annotator-hl"),function(b){return Ba(b,a.commentId)})[0])return a;var h;b=[];var p=a.ranges;var g=0;for(h=p.length;g<h;g++){var m=p[g];try{b.push(H.Range.sniff(m).normalize(this.wrapper[0]))}catch(lb){if(c=lb,c instanceof H.Range.RangeError)I.publish("rangeNormalizeFail",[a,m,c]);else throw c;}}a.quote=[];a.ranges=[];a.highlights=[];d||this.addContextToComment(a,b);c=0;for(m=b.length;c<m;c++)d=b[c],a.quote.push(q.trim(d.text())),g=e(a.access),a.ranges.push(d.serialize(this.wrapper[0],
"rmq-annotator-hl "+g)),q.merge(a.highlights,this.highlightRange(d,"rmq-annotator-hl "+g));a.quote=a.quote.join(" / ");C.adapter&&C.adapter.beforeTextQuoted&&C.adapter.beforeTextQuoted(a);a.quoteHTML=a.highlights.map(function(a){return f.handleQuoteHTMLOfHighlightedElement(a)}).join("");a.quoteHTML=Object(ca["default"])()(a.quoteHTML,{trim:!0,pack:!0});C.adapter&&C.adapter.afterTextQuoted&&C.adapter.afterTextQuoted();b=a.commentId?a.commentId:"tmp_"+Object(S.getRandomId)();a.commentId||(a.commentId=
b);b=a.commentId;d=null!=a.access?a.access:-1;q(a.highlights).data("rmqCommentId",b).data("rmqAccess",d).data("annotation",{commentId:b,access:d});if(c=ub(a,this.wrapper[0]))b=c.chatballon,d=c.chatballonU,c=c.paragraphXpath,b&&(q(a.highlights).data("annotation").chatballon=b),d&&(q(a.highlights).data("annotation").chatballonU=d),c&&(q(a.highlights).data("annotation").paragraphXpath=c);H.Util.getGlobal().getSelection().removeAllRanges();return a},I=new H(k),C.annotator=I,Object.defineProperty(I,"pageIndex",
{get:function(){return C.pageIndex},set:function(a){C.pageIndex=a}}),Object.defineProperty(I,"adapter",{get:function(){return C.adapter},set:function(a){C.adapter=a}}),Object.defineProperty(I,"mode",{get:function(){return C.mode},set:function(a){C.mode=a}}),Object.defineProperty(I,"annotationCache",{get:function(){return C.annotationCache},set:function(a){C.annotationCache=a}}),M={},Pa={},ha={attributes:!0,childList:!0,characterData:!0,subtree:!0,characterDataOldValue:!0},V=new MutationObserver(function(a){}),
V.observe(k,ha),Ia={page:{index:-1,idref:null},progress:!1,start:function(a){this.progress=!0;this.page=a},stop:function(){this.progress=!1;this.page={index:-1,idref:null}}},H.prototype.highlight=function(a){function b(){return new Promise(function(c,h){"fromLoad"===a.data.srcScroll&&(a.data.highlight?Ia.start(d.adapter.currentPage):Ia.stop());if(g&&g.proseMirror)I.proseMirrorScrollIntoView(g);else{var m=p[0];if(null==m&&d.pageIndex){var r=a.data.page||d.pageIndex.commentIdx[e];if(!r){var k=Object(S.getMostRelativeContextRange)(O,
a.data.contextRanges,null,a.data.doi);if(k)r=k.page;else{h("changed to Page ".concat(r));return}}if(r&&!v()(d.pageIndex.currentPage,r))return d.adapter&&d.adapter.gotoPage(r,{commentId:e,access:f}).then(function(){return b()});if(d.pageIndex.pageAnnotations[r]&&(g=d.pageIndex.pageAnnotations[r].filter(function(a){return a.commentId===e})[0]))if(I.setupAnnotation(g,!0,!1,!0),p=q.grep(q("body").find(".rmq-annotator-hl"),function(a){return Ba(a,e)}),m=p[0])b().then(function(a){return c(a)})["catch"](function(a){return h(a)});
else h("Not found")}else if(null!=m){r=q(m).height();var t=q(m).offset();q(m).position();k=q(q("#viewerContainer")[0]||q(m).parents().filter(function(a,b){return b.clientHeight!==b.scrollHeight}).last()[0]);k.scrollTop();var x=q(window).height();t=null;var y=k[0];t=0;for(var z=m;z&&z!==y;)t+=z.offsetTop,z=z.offsetParent;t=r<x?t-(x/2-r/2):t;d.adapter?d.adapter.scroll(m,t,x,a.data).then(function(a){return c(a)}):Y&&m.scrollIntoView?m.scrollIntoView({block:"center",inline:"nearest",behavior:"smooth"}):
k.animate({scrollTop:t},500,function(){return c(m)})}}})}function c(){p.forEach(function(a){q(a).toggleClass("rmq-active",h)});h&&setTimeout(function(){p.forEach(function(a){q(a).toggleClass("rmq-active",!1)})},3E3)}var d=this,e=a.data.commentId,f=a.data.access,h=a.data.highlight,g=d.annotationCache[e],p=q.grep(q("body").find(".rmq-annotator-hl"),function(a){return Ba(a,e)});h?b().then(function(a){c()}):c()},C.handleMessages=function(a){function b(a,b,c){1<parseInt(b.textContent)?b.textContent=""+
(parseInt(b.textContent)-1):1>=parseInt(b.textContent)&&b.parentNode.removeChild(b);if(b=c[a.paragraphXpath])if(1===b.length)delete c[a.paragraphXpath];else for(var d=0;d<b.length;d++)if(a.commentId===b[d].commentId){c[a.paragraphXpath].splice(d,1);break}}function c(a){var c=q.grep(q("body").find(".rmq-annotator-hl"),function(b){return Ba(b,a)}),d=Fa(c);!d&&c[0]&&(d={commentId:a,proseMirror:!0});d&&(d.highlights=c,d.chatballon?b(d,d.chatballon,M):d.chatballonU&&b(I,d.chatballonU,Pa),I.deleteAnnotation(d))}
var d=this;if("adderShown"===a.data.messageIndication){var h=window.articleInfo&&window.articleInfo.id;if(h&&h!==a.data.windowId)return C.annotator.adder.hide()}else if("allComments"===a.data.messageIndication)C.loadedFonts=a.data.loadedFonts,I.loadAnnotations(a.data.comments).then(function(){ra({indication:"test"})});else if("commentAdded"===a.data.messageIndication)a.data.annotation&&I.loadAnnotations([a.data.annotation],!0);else if("addConversationItems"===a.data.messageIndication)I.loadAnnotations(a.data.comments,
!0);else if("closeConversation"===a.data.messageIndication||"openConversation"===a.data.messageIndication){var p=a.data.groupId;h=q.grep(q("body").find(".rmq-annotator-hl.rmq-annotator-hl-conversation"),function(b){b=Fa(b);return"openConversation"===a.data.messageIndication?b&&b.groupId&&b.groupId!==p:b&&b.groupId&&b.groupId===p}).map(function(a){return Fa(a)}).reduce(function(a,b){a[b.commentId]=b;return a},{});N()(h).forEach(function(a){I.deleteAnnotation(a)})}else if("loadAndShowHighlight"===a.data.messageIndication)I.loadAnnotations(a.data.commentsMessage.comments,
!0).then(function(b){d.highlight({data:a.data.highlightMessage});f.setTimeout(function(){a.data.highlightMessage.highlight=!1;d.highlight({data:a.data.highlightMessage})},1E4)});else if("highlight"===a.data.messageIndication)C.annotator.highlight(a);else if("commentSubmitted"===a.data.messageIndication){if(C.candidateAnnotation){h=C.candidateAnnotation.commentId;var m=!!C.candidateAnnotation.proseMirror;C.tmpIdSubstutionMap[h]=a.data.annotation.commentId;C.candidateAnnotation.section=a.data.annotation.section;
C.candidateAnnotation.commentId=a.data.annotation.commentId;C.candidateAnnotation.access=a.data.annotation.access;C.candidateAnnotation.groupId=a.data.annotation.groupId;m?I.proseMirrorUpdateCommentMarkup(h,C.candidateAnnotation):(m=e(C.candidateAnnotation.access),q(C.candidateAnnotation.highlights).removeClass("rmq-annotator-hl-temporary").addClass(m).data("rmqCommentId",a.data.annotation.commentId).data("rmqAccess",a.data.annotation.access).data("annotation",{commentId:a.data.annotation.commentId,
access:a.data.annotation.access,groupId:a.data.annotation.groupId}));ub(C.candidateAnnotation,I.wrapper[0]);C.annotator.publish(u.a.ANNOTATION_CREATED_EVENT,[C.candidateAnnotation].map(function(a){a=Object.assign({},a);delete a.highlights;return a}));C.annotationCache[C.candidateAnnotation.commentId]=C.candidateAnnotation;delete C.annotationCache[h];delete C.candidateAnnotation}}else"commentCancelled"===a.data.messageIndication?C.candidateAnnotation&&I.deleteAnnotation(C.candidateAnnotation):"conversationExit"===
a.data.messageIndication?(q.grep(q("body").find(".rmq-annotator-hl"),function(a){return g(a,7)}).map(function(a,b){return Fa(b)}).forEach(function(a){return I.deleteAnnotation(a)}),C.candidateAnnotation&&I.deleteAnnotation(C.candidateAnnotation)):"deleteComment"===a.data.messageIndication?c(a.data.commentId):"moveToPrivate"===a.data.messageIndication?(c(a.data.annotation.commentId),I.setupAnnotation(a.data.annotation)):"newUser"!==a.data.messageIndication&&("authorUpdateEnabled"===a.data.messageIndication?
!0===a.data.authorUpdateEnabled?(q(q(".adderUpdate")[0]).css("display","initial"),q(q(".adderUpdate")[1]).css("display","initial")):(q(q(".adderUpdate")[0]).css("display","none"),q(q(".adderUpdate")[1]).css("display","none")):"tourModeUpdate"===a.data.messageIndication?(h=a.data.newTourMode,document.getElementById("rmrqTourMode")&&(document.getElementById("rmrqTourMode").value=h),h?(q("#note",C.annotator.adder).attr("disabled",!0),q("#comment",C.annotator.adder).attr("disabled",!0),q("#conversation",
C.annotator.adder).attr("disabled",!0)):(q("#note",C.annotator.adder).removeAttr("disabled"),q("#comment",C.annotator.adder).removeAttr("disabled"),q("#conversation",C.annotator.adder).removeAttr("disabled"))):"requestFonts"===a.data.messageIndication&&(h=a.data.fontFamilies,C.adapter.requestFonts&&C.adapter.requestFonts(h)))},f.addEventListener("message",C.handleMessages,!1),H.prototype.findElementAnnotations=function(a){function b(a){var b=q(a).data();if(b.annotation)return a=(a=C.annotationCache[b.annotation.commentId])||
b.annotation;if(b.rmqCommentId||a.dataset.rmqCommentId){var c=b.rmqCommentId||a.dataset.rmqCommentId,d=q.grep(q("body").find(".rmq-annotator-hl"),function(a){return Ba(a,c)});b=b.rmqAccess||a.dataset.rmqAccess&&parseInt(a.dataset.rmqAccess);return a=(a=C.annotationCache[c])||{commentId:c,access:b,highlights:d}}return null}if(q(a).closest(".rmq-annotator-hl")){var c=[];q(a).addBack().toArray().forEach(function(a){(a=b(a))&&c.push(a)});q(a).parents(".rmq-annotator-hl").addBack().toArray().forEach(function(a){(a=
b(a))&&c.push(a)});return c}return[]},H.prototype.activateComment=function(a,b,c){a=this.findElementAnnotations(a.target);c&&0<c.length&&(a=a.filter(function(a){return-1!==c.indexOf(a.access)}));x()(a,function(a){return a.highlights}).reduce(function(a,b){a.add(b);return a},new Set).forEach(function(a){q(a).toggleClass("rmq-active",b)});return a},H.prototype.handleCommentClick=function(a){a=this.activateComment(a,!0,[0,7]);a=Xa(a);a[0]&&Ya(a[0])},H.prototype.handleCommentMouseEnter=function(a){this.activateComment(a,
!0,[0])},H.prototype.handleCommentMouseLeave=function(a){a=this.activateComment(a,!1);Xa(a);a[0]&&W(Xa(a)[0])},qa=q("body"),qa.on("click",".rmq-annotator-hl",function(a){return I.handleCommentClick(a)}),qa.on("mouseenter",".rmq-annotator-hl",function(a){return I.handleCommentMouseEnter(a)}),qa.on("mouseleave",".rmq-annotator-hl.rmq-active",function(a){return I.handleCommentMouseLeave(a)}),qa.on("keyup",function(a){return I.onAdderKeyUp(a)}),H.prototype.calculateQuoteCmpCtx=function(a,b){var c=a.quote||
a.section;if(!c)return null;Ra()||(c=Ma(c));c=Z(c);return b&&a.context?a.context.back+c+a.context.front:c},H.prototype.updateCommentPage=function(a){if(this.pageIndex&&this.pageIndex.tx&&a.section&&a.commentId){var b=this.calculateQuoteCmpCtx(a);b=y["default"].find(b,this.pageIndex.tx,a.context);if(55<b.reduce(function(a,b){return a+=b.c?b.c:0},0)){b=Ca(this.pageIndex.pageIndex,b[0].s);0>b&&(b=~b);b+=1;this.pageIndex.commentIdx[a.commentId]=b;if(this.pageIndex.pageAnnotations[b]){var c=K()(this.pageIndex.pageAnnotations[b],
function(b){return b.commentId===a.commentId});0<=c&&this.pageIndex.pageAnnotations[b].splice(c,1);this.pageIndex.pageAnnotations[b].push(a)}else this.pageIndex.pageAnnotations[b]=[a];return b}}},H.prototype.idx=function(a){if(!this._idx||a)this._idx=this.recur(k);return this._idx},ib=0,H.prototype.loadAnnotations=function(a,b,c){var d=this;this.loadAnnotationsDeferred=q.Deferred();Object(J.debug)("loaAnnotations",this.mode,this.adapter&&this.adapter.getCurrentPage());if(!Ia.progress||!v()(Ia.page,
this.adapter.getCurrentPage()))return(new Promise(function(a,b){"interactive"===document.readyState||"complete"===document.readyState?a(document.readyState):document.onreadystatechange=function(){"interactive"!==document.readyState&&"complete"!==document.readyState||a(document.readyState)}})).then(function(e){return new Promise(function(e,f){++ib;!0!==b&&(a=jb(d,a));d.selectedRanges=null;null==a&&(a=[]);f=a.map(function(a){if(d.pageIndex&&d.pageIndex.tx){var b=d.updateCommentPage(a);b&&a.page!=b?
(a.pageChanged=!0,a.page=b,ra({indication:"updatePage",access:a.access,commentId:a.commentId,page:b})):!b&&a.section&&ra({indication:"updatePage",access:a.access,commentId:a.commentId,page:"Not Found"})}return a}).filter(function(a){if(a.page){if(d.adapter&&d.adapter.getAllLoadedPages){var b=d.adapter.getAllLoadedPages();return-1!==K()(b,function(b){return v()(b,a.page)})}return d.adapter&&d.adapter.getCurrentPage?v()(d.adapter.getCurrentPage(),a.page):!0}return!0});var h=function(b,c){null==b&&(b=
[]);if(0<b.map(function(a){return d.setupAnnotation(a,!0,c,!0)}).filter(function(a){return null==a.resolved}).length&&c)return setTimeout(function(){return h(b,!1)},10);e(d);var f=a&&Array.isArray(a)?a.filter(function(a){return a&&a.highlights&&Array.isArray(a.highlights)&&0<a.highlights.length}):[];return d.publish(u.a.ANNOTATIONS_LOADED_EVENT,[function(a){var b=[];a.forEach(function(a){a&&(a=Object.assign({},a),delete a.highlights,b.push(a))});return b}(f)])};h(f,!c)})})},H.prototype.findAnnotationOffset=
function(a){return this.findAnnotationOffset_Pixel(a)},H.prototype.findAnnotationOffset_Pixel=function(a){if(a.highlights&&a.highlights[0]){for(var b=q(a.highlights).last(),c=q(q("#viewerContainer")[0]||q(b).parents().filter(function(a,b){return b.clientHeight!==b.scrollHeight}).last()[0]),d=c[0],e=a=0,f=b[0];f&&f!==d;)a+=f.offsetTop,e+=f.offsetLeft,f=f.offsetParent;b=b.text();c=c.text().indexOf(b);return{offset_v:a,offset_h:e,offset_t:c}}return null},H.prototype.findAnnotationOffset_Text=function(a){var b=
this.calculateQuoteCmpCtx(a);if(null==b)return null;var c=this.pageIndex&&this.pageIndex.tx?this.pageIndex.tx:this.idx().text;a=y["default"].find(b,c,a.context);return 55>a.reduce(function(a,b){return a+=b.c?b.c:0},0)?null:a[0]?a[0].s:null},H.prototype.verifySelection=function(a,b,c,d){d=d||.9;c?(c*=d,55>c&&(c=55)):c=55;try{if(Array.isArray(a))var e=a.map(function(a){return H.Range.sniff(a).normalize(I.wrapper[0]).text()}).join(" ");else if(0<a.rangeCount)e=H.Range.sniff(a.getRangeAt(0)).normalize(I.wrapper[0]).text();
else return Object(J.debug)("Empty selection to verify"),!1;var f=Z(e),h=Z(b.quote),g=y["default"].find(f,h),m=y["default"].find(h,f),r=g&&g.confidence||-1,p=m&&m.confidence||-1;Object(J.debug)("cr = ".concat(p," cf = ").concat(r));if(r<c||p<c)return!1}catch(Ab){return Object(J.debug)("Error while verifying - Retry selection",Ab),!1}return!0},H.prototype.lookupRangesInDocument=function(a,b){return this._lookupRangesInDocument(a,b)},H.prototype._lookupRangesInDocument=function(a,b){var c=this.updateCommentPage(a),
d=this.findSelection(a,b);if(!d)return null;b=d.certainty;var e=d.offset;if(!this.verifySelection(d,a))if(Object(J.debug)("Retry selection "),I.idx(!0),d=this.findSelection(a),this.verifySelection(d,a))b=d.certainty,e=d.offset;else return null;var f,g,m,r;a=[];var p=[];h()(d)?(a=d.map(function(a){return(new H.Range.BrowserRange(a)).normalize().limit(I.wrapper[0])}).filter(function(a){return null!=a}),d=H.Util.getGlobal().getSelection(),d.removeAllRanges()):0<d.rangeCount&&(a=function(){var a,b;var c=
[];g=a=0;for(b=d.rangeCount;0<=b?a<b:a>b;g=0<=b?++a:--a)t=d.getRangeAt(g),f=new H.Range.BrowserRange(t),m=f.normalize().limit(I.wrapper[0]),null===m&&p.push(t),c.push(m);return c}.call(I),d.removeAllRanges());var k=0;for(r=p.length;k<r;k++){var t=p[k];null!=t?d.addRange(t):Object(J.warn)("Null range when should not")}a=q.grep(a,function(a){a&&d.addRange(a.toRange());return a});a.certainty=b;a.offset=e;a.page=c||this.adapter&&this.adapter.getCurrentPage();return a},H.prototype.recur_filter=function(a,
b){return!a||!a.nodeType||a.nodeType!==Node.TEXT_NODE&&a.nodeType!==Node.ELEMENT_NODE||a.nodeType!==Node.TEXT_NODE&&a.nodeType!==Node.ELEMENT_NODE?!1:"SCRIPT"===a.tagName?d()(a.type)&&-1!==a.type.indexOf("math/")?a.equation=!0:!1:a instanceof Text&&"SCRIPT"===a.parentNode.tagName&&d()(a.parentNode.type)&&-1!==a.parentNode.type.indexOf("math/")?a.equation=!0:q(a).parents().filter(function(a,b){return b&&"string"===typeof b.id&&0===b.id.indexOf("MathJax")})[0]?!b:a.style&&a.style.transform&&a.style.transform?
-1!==a.style.transform.toLocaleLowerCase().indexOf("rotate")?!1:!0:"BUTTON"===a.tagName&&a.classList.contains("chatballon")?!1:!0},H.prototype.recur=function(a){var b=Date.now();a=this._recur(a);b=Date.now()-b;Object(J.info)("%crecurring took %d ms","color: red; font-style: bold",b);return a},H.prototype._recur=function(a,b){var c=this;if(!this.recur_filter(a,!0))return{text:"",parent:[],textNode:[]};if(a.nodeType===Node.TEXT_NODE){var e=a.parentNode&&a.parentNode.type&&d()(a.parentNode.type)&&-1!==
a.parentNode.type.indexOf("math/")?Wa(a):a.nodeValue;return{text:Z(e),parent:[b],textNode:[a],page:this.adapter&&this.adapter.getElementPage&&this.adapter.getElementPage(b),xpath:H.Util.xpathFromNode(q(b),k)}}var f={text:"",parent:[],textNode:[]};a.nodeType===Node.ELEMENT_NODE&&a.childNodes&&a.childNodes.forEach(function(b){b=c._recur(b,a);var d=f.text.length;f.text+=b.text;b.parent.forEach(function(a,b){f.parent[d+b]=a});b.textNode.forEach(function(a,b){f.textNode[d+b]=a})});return f},H.prototype.findSelection=
function(a,b){var c=V.takeRecords(),d=this.calculateQuoteCmpCtx(a);if(null==d)return null;c=y["default"].find(d,I.idx(0<c.length||b).text,a.context);b=c.reduce(function(a,b){return a+=b.c?b.c:0},0);if(55>b)return null;if(90<b){var e=c[0].s;d=[xb(e,c[c.length-1].s+c[c.length-1].text.length-1,a,b)]}else d=c.map(function(b){var c=b.s;return xb(c,c+b.text.length-1,a,b.c)}).filter(function(a){return null!=a});if(1===d.length){c=H.Util.getGlobal().getSelection();c.removeAllRanges();d=d[0];var f=document.createRange();
f.setStart(d.startElement,d.startOffset);f.setEnd(d.endElement,d.endOffset);c.addRange(f);c.certainty=b;c.offset=e;return c}return 1<d.length?(d=d.map(function(a){return{commonAncestorContainer:q(a.startElement).parents().has(a.endElement).first()[0],startContainer:a.startElement,endContainer:a.endElement,startOffset:a.startOffset,endOffset:a.endOffset,certainty:a.certainty}}),d.certainty=b,d.offset=e,d):null},Ga.abrupt("return",C);case 163:case "end":return Ga.stop()}},null,this,[[59,63]])},destroy:function(){this.annotatorHelperCnt--;
this.annotator&&this.annotator.destroy();window.removeEventListener("message",this.handleMessages)}}},RdJH:function(f,k,a){k.a=function(a,c,b){var e=document.cookie.split(";").reduce(function(a,b){b=b.split("=");a[b[0].trim()]=b[1]&&b[1].trim();return a},{});if(c.domain&&"*"!==c.domain)var f=c.domain;var m=e.rmq_sbc,d=e.rmq_cwet;e=c.rmq_sbc;var k=b?b.getAttribute("data-expanded"):!1,z=function(){};c.authenticatedUser?document.cookie="rmq_sbc=0;max-age=0":k&&"true"===k||null!=m||null!=e||(c=document.getElementById("RMQBannerWidget"),
c||(c=document.createElement("iframe"),c.id="RMQBannerWidget",c.src=a+"web/RMQBannerWidget.html",c.frameBorder="no",c.scrolling="no",c.allowTransparency="true",c.style.visibility="hidden",c.setAttribute("data-expanded","false"),c.addEventListener("transitionend",function(a){}),b.parentNode.appendChild(c)),z=function(){if(d){var a=document.getElementById("RMQBannerWidget");a&&setTimeout(function(){a.style.visibility="visible";a.setAttribute("data-expanded","true");var b="rmq_sbc=0;path=/";f&&(b=b+
";domain="+f);var c=new Date;c.setTime(c.getTime()+864E5);c="expires="+c.toUTCString();document.cookie=b+";"+c},5E3)}});return{show:z,destroy:function(){var a=document.getElementById("RMQBannerWidget");a&&a.parentNode.removeChild(a)}}}},Re3r:function(f,k){function a(a){return!!a.constructor&&"function"===typeof a.constructor.isBuffer&&a.constructor.isBuffer(a)}f.exports=function(e){return null!=e&&(a(e)||"function"===typeof e.readFloatLE&&"function"===typeof e.slice&&a(e.slice(0,0))||!!e._isBuffer)}},
Rx1E:function(f,k,a){var e=a("7YkW"),c=a("JUs9"),b=a("s96k"),r=a("Hxdr"),y=a("S7p9"),m=a("dmQx");f.exports=function(a,f,k,h){var d=-1,x=c,z=!0,K=a.length,L=[],D=f.length;if(!K)return L;k&&(f=r(f,y(k)));h?(x=b,z=!1):200<=f.length&&(x=m,z=!1,f=new e(f));a:for(;++d<K;){var F=a[d],S=null==k?F:k(F);F=h||0!==F?F:0;if(z&&S===S){for(var B=D;B--;)if(f[B]===S)continue a;L.push(F)}else x(f,S,h)||L.push(F)}return L}},RyI1:function(f,k,a){var e=a("lb6C"),c=a("eShC"),b=a("JyYQ"),r=a("NGEn");f.exports=function(a,
f){return(r(a)?e:c)(a,b(f,3))}},SGXn:function(f,k,a){k=a("eP4g");var e=a("S7p9");k=(a=(a=a("Dc0G"))&&a.isSet)?e(a):k;f.exports=k},"T/v0":function(f,k,a){var e=a("Oy1H"),c=a("M1I4");f.exports=function(a,f){return!f||"object"!==e(f)&&"function"!==typeof f?c(a):f}},Tkzw:function(f,k,a){Object.defineProperty(k,"__esModule",{value:!0});a.d(k,"GroveMessage",function(){return d});a.d(k,"AddDuplicateArticleToReadingList",function(){return x});a.d(k,"WidgetInitializedEvent",function(){return z});a.d(k,"UpdateCurrentPollEvent",
function(){return h});a.d(k,"UpdateCurrentPollWidgetEvent",function(){return A});a.d(k,"WidgetDestroyedEvent",function(){return v});a.d(k,"ToggleWidgetEvent",function(){return N});a.d(k,"ActiveSurveysEvent",function(){return K});a.d(k,"UpdateSurveyFilterEvent",function(){return L});a.d(k,"InvalidateSurveyFiltersEvent",function(){return D});a.d(k,"GMLoginEvent",function(){return F});a.d(k,"ExpandWidgetEvent",function(){return S});a.d(k,"ReloadWidgetEvent",function(){return B});a.d(k,"SubmitCompletedSurveyErrorEvent",
function(){return u});a.d(k,"InvalidEvent",function(){return J});a.d(k,"SigninEvent",function(){return ca});a.d(k,"FollowUnfollowArticleEvent",function(){return T});a.d(k,"UpdateFollowUnfollowWidgetsStateEvent",function(){return q});a.d(k,"UpdateUserFollowingArticles",function(){return Q});a.d(k,"LoggedinEvent",function(){return U});a.d(k,"RedirectedEvent",function(){return aa});a.d(k,"ExitEvent",function(){return G});a.d(k,"CommentCancelledEvent",function(){return Y});a.d(k,"PopupEvent",function(){return ua});
a.d(k,"UpdateFrameTitleEvent",function(){return O});k.groveMessageExtractor=function(a){if(a&&a.data)return a.data.redirected?new aa(a.data):a.data.loggedin?new U(a.data):a.data.signin?new ca(a.data):"exit"===a.data.action?new G(a.data):new J(a.data);if("DEBUG"===Ea)throw Z;};f=a("T/v0");var e=a.n(f);f=a("tNLN");var c=a.n(f);f=a("j/rp");var b=a.n(f);f=a("Oy1H");var r=a.n(f);f=a("Z60a");var y=a.n(f);f=a("C9uT");var m=a.n(f),d=function(){function a(b,c){y()(this,a);if(!b&&"DEBUG"===Ea)throw C;this._name=
b;"object"===r()(c)?Object.assign(this,c):this.data=c}m()(a,[{key:"getName",value:function(){return this._name}}]);return a}(),x=function(a){function d(){y()(this,d);return e()(this,c()(d).call(this,d.evtName()))}b()(d,a);m()(d,null,[{key:"evtName",value:function(){return"GM_ADD_DUPLICATE_ARTICLE_TO_READING_LIST"}}]);return d}(d),z=function(a){function d(a){y()(this,d);return e()(this,c()(d).call(this,d.evtName(),a))}b()(d,a);m()(d,null,[{key:"evtName",value:function(){return"GM_WIDGET_INITIALIZED"}}]);
return d}(d),h=function(a){function d(a){y()(this,d);return e()(this,c()(d).call(this,d.evtName(),a))}b()(d,a);m()(d,null,[{key:"evtName",value:function(){return"GM_UPDATE_CURRENT_POLL"}}]);return d}(d),A=function(a){function d(a){y()(this,d);return e()(this,c()(d).call(this,d.evtName(),a))}b()(d,a);m()(d,null,[{key:"evtName",value:function(){return"GM_UPDATE_CURRENT_POLL_WIDGET"}}]);return d}(d),v=function(a){function d(a){y()(this,d);return e()(this,c()(d).call(this,d.evtName(),a))}b()(d,a);m()(d,
null,[{key:"evtName",value:function(){return"GM_WIDGET_DESTROYED"}}]);return d}(d),N=function(a){function d(a){y()(this,d);return e()(this,c()(d).call(this,d.evtName(),a))}b()(d,a);m()(d,null,[{key:"evtName",value:function(){return"GM_TOGGLE_WIDGET"}}]);return d}(d),K=function(a){function d(a){y()(this,d);return e()(this,c()(d).call(this,d.evtName(),a))}b()(d,a);m()(d,null,[{key:"evtName",value:function(){return"GM_ACTIVE_SURVEYS"}}]);return d}(d),L=function(a){function d(a){y()(this,d);return e()(this,
c()(d).call(this,d.evtName(),a))}b()(d,a);m()(d,null,[{key:"evtName",value:function(){return"GM_UPDATE_SURVEY_FILTER"}}]);return d}(d),D=function(a){function d(a){y()(this,d);return e()(this,c()(d).call(this,d.evtName(),a))}b()(d,a);m()(d,null,[{key:"evtName",value:function(){return"GM_INVALIDATE_SURVEY_FILTERS"}}]);return d}(d),F=function(a){function d(a){y()(this,d);return e()(this,c()(d).call(this,d.evtName(),a))}b()(d,a);m()(d,null,[{key:"evtName",value:function(){return"GM_LOGIN"}}]);return d}(d),
S=function(a){function d(a){y()(this,d);return e()(this,c()(d).call(this,d.evtName(),a))}b()(d,a);m()(d,null,[{key:"evtName",value:function(){return"GM_EXPAND_WIDGET"}}]);return d}(d),B=function(a){function d(a){y()(this,d);return e()(this,c()(d).call(this,d.evtName(),a))}b()(d,a);m()(d,null,[{key:"evtName",value:function(){return"GM_RELOAD_WIDGET"}}]);return d}(d),u=function(a){function d(a){y()(this,d);return e()(this,c()(d).call(this,d.evtName(),a))}b()(d,a);m()(d,null,[{key:"evtName",value:function(){return"GM_SUBMIT_COMPLETED_SURVEY_ERROR"}}]);
return d}(d),J=function(a){function d(a){y()(this,d);return e()(this,c()(d).call(this,d.evtName(),a))}b()(d,a);m()(d,null,[{key:"evtName",value:function(){return"GM_INVALID"}}]);return d}(d),ca=function(a){function d(a){y()(this,d);return e()(this,c()(d).call(this,d.evtName(),a))}b()(d,a);m()(d,null,[{key:"evtName",value:function(){return"GM_SIGNIN"}}]);return d}(d),T=function(a){function d(a){y()(this,d);return e()(this,c()(d).call(this,d.evtName(),{toFollow:a}))}b()(d,a);m()(d,null,[{key:"evtName",
value:function(){return"GM_FOLLOW_UNFOLLOW_ARTICLE"}}]);return d}(d),q=function(a){function d(a){y()(this,d);return e()(this,c()(d).call(this,d.evtName(),{followState:a}))}b()(d,a);m()(d,null,[{key:"evtName",value:function(){return"GM_UPDATE_FOLLOW_UNFOLLOW_WIDGETS_STATE"}}]);return d}(d),Q=function(a){function d(){y()(this,d);return e()(this,c()(d).call(this,d.evtName()))}b()(d,a);m()(d,null,[{key:"evtName",value:function(){return"GM_UPDATE_USER_FOLLOWING_ARTICLES"}}]);return d}(d),U=function(a){function d(a){y()(this,
d);return e()(this,c()(d).call(this,d.evtName(),a))}b()(d,a);m()(d,null,[{key:"evtName",value:function(){return"GM_LOGGEDIN"}}]);return d}(d),aa=function(a){function d(a){y()(this,d);return e()(this,c()(d).call(this,d.evtName(),a))}b()(d,a);m()(d,null,[{key:"evtName",value:function(){return"GM_REDIRECTED"}}]);return d}(d),G=function(a){function d(a){y()(this,d);return e()(this,c()(d).call(this,d.evtName(),a))}b()(d,a);m()(d,null,[{key:"evtName",value:function(){return"GM_EXIT"}}]);return d}(d),Y=
function(a){function d(a){y()(this,d);return e()(this,c()(d).call(this,d.evtName(),a))}b()(d,a);m()(d,null,[{key:"evtName",value:function(){return"GM_COMMENT_CANCELLED"}}]);return d}(d),ua=function(a){function d(a){y()(this,d);return e()(this,c()(d).call(this,d.evtName(),a))}b()(d,a);m()(d,null,[{key:"evtName",value:function(){return"GM_POPUP"}}]);return d}(d),O=function(a){function d(a){y()(this,d);return e()(this,c()(d).call(this,d.evtName(),a))}b()(d,a);m()(d,null,[{key:"evtName",value:function(){return"GM_UPDATE_FRAME_TITLE"}}]);
return d}(d),Ea="DEBUG",C="UNKNOWN GROVEMESSAGE NAME ARGUMENT",Z="INVALID EVENT PAYLOAD ERROR"},TvYa:function(f,k,a){function e(a,b){var c=!1;try{var d=a[b],e=d.getItem("rmq_test_probe");e||(d.setItem("rmq_test_probe","rmq_test_probe"),e=d.getItem("rmq_test_probe"));"rmq_test_probe"===e&&(c=!0,d.removeItem("rmq_test_probe"))}catch(z){c=!1}return c}function c(a){function b(a){this.name=a;return{setItem:function(a,b){},getItem:function(a){},removeItem:function(a){},clear:function(){}}}var c=e(a,"localStorage"),
d=e(a,"sessionStorage");return c?[a.localStorage,a.sessionStorage]:d?[a.sessionStorage,a.sessionStorage]:[new b("localStorage"),new b("sessionStorage")]}k.b=c;k.a=function(a,e,f){function d(a,b){return new Promise(function(c,d){var e=new FileReader;e.onload=function(a){c(a.target.result)};e.onerror=function(a){d(a)};b?e[b].call(e,a):e.readAsArrayBuffer(a)})}a=c(f);var m=b()(a,2)[0],r=f.fetch;return m&&r?{getItem:function(a,b){b=b||"ArrayBuffer";return new Promise(function(c,d){var e=JSON.parse(m.getItem(a));
if("string"===typeof e)var f=e;else{f=e.data;var h=e.responseURL}if(f)return"DataURL"==b?{responseURL:h,data:f}:r(f).then(function(a){return"Blob"===b?a.blob().then(function(a){return{responseURL:h,data:a}}):a.arrayBuffer().then(function(a){return{responseURL:h,data:a}})},function(c){var d=m.getItem(a),e=d.indexOf(";base64,");if(-1==e)throw"Invalid string in localStorage for key:".concat(a);c=d.substring(5,e);d=d.substring(e+8);d=atob(d);e=Array(d.length);for(var f=0;f<d.length;f++)e[f]=d.charCodeAt(f);
d=new Uint8Array(e);return"Blob"===b?(c=Blob([d.buffer],{type:c}),{responseURL:h,data:c}):{responseURL:h,data:d.buffer}}).then(function(a){c(a)},function(a){d(a)});d("Nothing in cache for"+a)})},setItem:function(a,b,c){return d(b,"readAsDataURL").then(function(b){return new Promise(function(d,e){try{var f=c?JSON.stringify({data:b,responseURL:c}):JSON.stringify(b);m.setItem(a,f);d()}catch(F){e(F)}})})}}:{getItem:function(a,b){return Promise.reject("No Cache")},setItem:function(a,b){return Promise.reject("No Cache")}}};
f=a("NM/j");var b=a.n(f)},UfSK:function(f,k){var a=Object.prototype.hasOwnProperty;f.exports=function(e){var c=e.length,b=new e.constructor(c);c&&"string"==typeof e[0]&&a.call(e,"index")&&(b.index=e.index,b.input=e.input);return b}},VORN:function(f,k,a){var e=a("yCNF"),c=Object.create;k=function(){function a(){}return function(b){if(!e(b))return{};if(c)return c(b);a.prototype=b;b=new a;a.prototype=void 0;return b}}();f.exports=k},WHce:function(f,k,a){k=a("037f");a=a("Zk5a")(k);f.exports=a},WQFf:function(f,
k,a){var e=a("VORN"),c=a("vi0E"),b=a("HT7L");f.exports=function(a){return"function"!=typeof a.constructor||b(a)?{}:e(c(a))}},WyC4:function(f,k){var a=/\w*$/;f.exports=function(e){var c=new e.constructor(e.source,a.exec(e));c.lastIndex=e.lastIndex;return c}},Xk2i:function(f,k,a){(function(a){(function(a){try{var b=!!Symbol.iterator}catch(m){b=!1}var c=function(a){var c={next:function(){var b=a.shift();return{done:void 0===b,value:b}}};b&&(c[Symbol.iterator]=function(){return c});return c},e=function(){var e=
function(a){Object.defineProperty(this,"_entries",{writable:!0,value:{}});var b=typeof a;if("undefined"!==b)if("string"===b)""!==a&&this._fromString(a);else if(a instanceof e){var c=this;a.forEach(function(a,b){c.append(b,a)})}else if(null!==a&&"object"===b)if("[object Array]"===Object.prototype.toString.call(a))for(b=0;b<a.length;b++){var d=a[b];if("[object Array]"===Object.prototype.toString.call(d)||2!==d.length)this.append(d[0],d[1]);else throw new TypeError("Expected [string, any] as entry at index "+
b+" of URLSearchParams's input");}else for(d in a)a.hasOwnProperty(d)&&this.append(d,a[d]);else throw new TypeError("Unsupported input's type for URLSearchParams");},d=e.prototype;d.append=function(a,b){a in this._entries?this._entries[a].push(String(b)):this._entries[a]=[String(b)]};d.delete=function(a){delete this._entries[a]};d.get=function(a){return a in this._entries?this._entries[a][0]:null};d.getAll=function(a){return a in this._entries?this._entries[a].slice(0):[]};d.has=function(a){return a in
this._entries};d.set=function(a,b){this._entries[a]=[String(b)]};d.forEach=function(a,b){var c;for(c in this._entries)if(this._entries.hasOwnProperty(c)){var d=this._entries[c];for(var e=0;e<d.length;e++)a.call(b,d[e],c,this)}};d.keys=function(){var a=[];this.forEach(function(b,c){a.push(c)});return c(a)};d.values=function(){var a=[];this.forEach(function(b){a.push(b)});return c(a)};d.entries=function(){var a=[];this.forEach(function(b,c){a.push([c,b])});return c(a)};b&&(d[Symbol.iterator]=d.entries);
d.toString=function(){var a=[];this.forEach(function(b,c){a.push(encodeURIComponent(c).replace(/%20/g,"+")+"="+encodeURIComponent(b).replace(/%20/g,"+"))});return a.join("&")};a.URLSearchParams=e};(function(){try{var b=a.URLSearchParams;return"a=1"===(new b("?a=1")).toString()&&"function"===typeof b.prototype.set}catch(d){return!1}})()||e();e=a.URLSearchParams.prototype;"function"!==typeof e.sort&&(e.sort=function(){var a=this,b=[];this.forEach(function(c,d){b.push([d,c]);a._entries||a.delete(d)});
b.sort(function(a,b){return a[0]<b[0]?-1:a[0]>b[0]?1:0});a._entries&&(a._entries={});for(var c=0;c<b.length;c++)this.append(b[c][0],b[c][1])});"function"!==typeof e._fromString&&Object.defineProperty(e,"_fromString",{enumerable:!1,configurable:!1,writable:!1,value:function(a){if(this._entries)this._entries={};else{var b=[];this.forEach(function(a,c){b.push(c)});for(var c=0;c<b.length;c++)this.delete(b[c])}a=a.replace(/^\?/,"");a=a.split("&");for(c=0;c<a.length;c++){var e=a[c].split("=");this.append(decodeURIComponent(String(e[0]).replace(/\+/g,
" ")),1<e.length?decodeURIComponent(String(e[1]).replace(/\+/g," ")):"")}}})})("undefined"!==typeof a?a:"undefined"!==typeof window?window:"undefined"!==typeof self?self:this);(function(a){var b=function(){var b=a.URL,c=function(b,c){"string"!==typeof b&&(b=String(b));var d=document;if(c&&(void 0===a.location||c!==a.location.href)){d=document.implementation.createHTMLDocument("");var e=d.createElement("base");e.href=c;d.head.appendChild(e);try{if(0!==e.href.indexOf(c))throw Error(e.href);}catch(S){throw Error("URL unable to set base "+
c+" due to "+S);}}c=d.createElement("a");c.href=b;e&&(d.body.appendChild(c),c.href=c.href);if(":"===c.protocol||!/:/.test(c.href))throw new TypeError("Invalid URL");Object.defineProperty(this,"_anchorElement",{value:c});var f=new a.URLSearchParams(this.search),h=!0,m=!0,k=this;["append","delete","set"].forEach(function(a){var b=f[a];f[a]=function(){b.apply(f,arguments);h&&(m=!1,k.search=f.toString(),m=!0)}});Object.defineProperty(this,"searchParams",{value:f,enumerable:!0});var r=void 0;Object.defineProperty(this,
"_updateSearchParams",{enumerable:!1,configurable:!1,writable:!1,value:function(){this.search!==r&&(r=this.search,m&&(h=!1,this.searchParams._fromString(this.search),h=!0))}})},d=c.prototype,e=function(a){Object.defineProperty(d,a,{get:function(){return this._anchorElement[a]},set:function(b){this._anchorElement[a]=b},enumerable:!0})};["hash","host","hostname","port","protocol"].forEach(function(a){e(a)});Object.defineProperty(d,"search",{get:function(){return this._anchorElement.search},set:function(a){this._anchorElement.search=
a;this._updateSearchParams()},enumerable:!0});Object.defineProperties(d,{toString:{get:function(){var a=this;return function(){return a.href}}},href:{get:function(){return this._anchorElement.href.replace(/\?$/,"")},set:function(a){this._anchorElement.href=a;this._updateSearchParams()},enumerable:!0},pathname:{get:function(){return this._anchorElement.pathname.replace(/(^\/?)/,"/")},set:function(a){this._anchorElement.pathname=a},enumerable:!0},origin:{get:function(){return this._anchorElement.protocol+
"//"+this._anchorElement.hostname+(this._anchorElement.port!={"http:":80,"https:":443,"ftp:":21}[this._anchorElement.protocol]&&""!==this._anchorElement.port?":"+this._anchorElement.port:"")},enumerable:!0},password:{get:function(){return""},set:function(a){},enumerable:!0},username:{get:function(){return""},set:function(a){},enumerable:!0}});c.createObjectURL=function(a){return b.createObjectURL.apply(b,arguments)};c.revokeObjectURL=function(a){return b.revokeObjectURL.apply(b,arguments)};a.URL=
c};(function(){try{var b=new a.URL("b","http://a");b.pathname="c%20d";return"http://a/c%20d"===b.href&&b.searchParams}catch(m){return!1}})()||b();if(void 0!==a.location&&!("origin"in a.location)){var c=function(){return a.location.protocol+"//"+a.location.hostname+(a.location.port?":"+a.location.port:"")};try{Object.defineProperty(a.location,"origin",{get:c,enumerable:!0})}catch(y){setInterval(function(){a.location.origin=c()},100)}}})("undefined"!==typeof a?a:"undefined"!==typeof window?window:"undefined"!==
typeof self?self:this)}).call(k,a("DuR2"))},YkxI:function(f,k,a){var e=a("wSKX"),c=a("Q2wK"),b=a("WHce");f.exports=function(a,f){return b(c(a,f,e),a+"")}},Z60a:function(f,k){f.exports=function(a,e){if(!(a instanceof e))throw new TypeError("Cannot call a class as a function");}},ZV5t:function(f,k,a){a.d(k,"a",function(){return N});f=a("Oy1H");var e=a.n(f);f=a("T/v0");var c=a.n(f);f=a("tNLN");var b=a.n(f);f=a("j/rp");var r=a.n(f);f=a("Z60a");var y=a.n(f);f=a("C9uT");var m=a.n(f),d=a("K9Qf"),x=a("yVmd"),
z=a("JyB8");a.n(z);f=a("moUy");a.n(f);var h=a("cuGy"),A=a("8tbe"),v=function(){function a(b,c){y()(this,a);this.contentFrame=b;this.spineItem=d.c.of(c);this.loadedAnnotations=null}m()(a,[{key:"clearLoadedAnnotations",value:function(){this.loadedAnnotations&&(this.loadedAnnotations.clear(),this.loadedAnnotations=null)}},{key:"hasLoadedAnnotations",value:function(){return!!this.loadedAnnotations}},{key:"isAnnotationLoaded",value:function(a){a=a&&(a.commentId||a.id);return this.loadedAnnotations?!!this.loadedAnnotations.get(a):
!1}},{key:"isAnnotationCollectionLoaded",value:function(a){var b=this;return!!(a&&Array.isArray(a)&&this.loadedAnnotations&&a.reduce(function(a,c){return a&&(c.commentId||c.id)&&(b.loadedAnnotations.get(c.commentId)||b.loadedAnnotations.get(c.id))},!0))}},{key:"addLoadedAnnotations",value:function(a){var b=this;a&&Array.isArray(a)&&0<a.length&&(this.loadedAnnotations||(this.loadedAnnotations=new z.HolderUtil),a.filter(function(a){return a&&b.spineItem&&a.page&&b.spineItem.idref===a.page.idref&&b.spineItem.index===
a.page.index}).forEach(function(a){var c=a.id?a.id:a.commentId?a.commentId:null;c?b.loadedAnnotations.put(c,a.page):Object(h.error)("unknown annotation id property found for annotation",a)}))}}],[{key:"of",value:function(b){return new a(b?b.contentFrame:null,b?b.spineItem:null)}}]);return a}(),N=function(a){function f(a,e){y()(this,f);e=c()(this,b()(f).call(this,e));e.events=d.b.eventNames();e.name=[d.b.NEW_CONTENT_FRAME_EVENT,d.b.CONTENT_FRAME_UNLOADED_EVENT,d.b.VIEW_DESTROYED_EVENT];e.delegate=
a;return e}r()(f,a);m()(f,[{key:"notify",value:function(a,b){if(a&&b&&this.delegate)switch(a){case d.b.NEW_CONTENT_FRAME_EVENT:this._handleNewContentFrameEvent(b);break;case d.b.CONTENT_FRAME_UNLOADED_EVENT:this._handleContentFrameUnloadedEvent(b);break;case d.b.VIEW_DESTROYED_EVENT:this._handleReaderViewChangeEvent(b)}}},{key:"_handleReaderViewChangeEvent",value:function(){this.loadedContentFrames.clear()}},{key:"_handleNewContentFrameEvent",value:function(a){if(a&&this.delegate){var b=a.contentFrame;
a=a.spineOfFrame;Object(h.debug)("literatum content frame handler : installing anno_helper to["+b+"]");var c=new v(b,d.c.of(a));try{this.installAnnotatorHelperInFrame(b,a)}catch(B){Object(h.error)("could not install annotator helper to content frame..",b,B)}this.loadedContentFrames.contains(a.idref)&&(b=this.loadedContentFrames.get(a.idref))&&b.contentFrame&&b.contentFrame.postMessage(new A.a("logout"),"*");this.loadedContentFrames.put(a.idref,c)}}},{key:"_handleContentFrameUnloadedEvent",value:function(a){a&&
this.delegate&&this.loadedContentFrames.delegate(function(b){if(b&&b.holder&&"object"===e()(b.holder))for(var c in b.holder){var d=b.holder[c];if(d&&d.contentFrame&&d.contentFrame.sHref===a){b.remove(c);d.contentFrame.contentWindow&&d.contentFrame.postMessage(new A.a("destroy"),"*");Object(h.debug)("literatum content frame handler : removing ["+c+"] from collection");break}}})}},{key:"installAnnotatorHelperInFrame",value:function(a,b){if(this.delegate){var c={idref:b.idref,index:b.index};this.delegate.installInFrame(a._$iframe[0]?
a._$iframe[0]:a._$iframe,c,b);a.postMessage({action:"ContentLoaded",src:a.src,srcBase:a.srcBase,page:c},"*")}}}]);return f}(function(a){function d(a){y()(this,d);var e=c()(this,b()(d).call(this));e.loadedContentFrames=new z.HolderUtil;e.window=a;e.initSubscriptions();return e}r()(d,a);m()(d,[{key:"clearLoadedAnnotations",value:function(){this.loadedContentFrames&&this.loadedContentFrames.delegate(function(a){a&&a.holder&&Object.keys(a.holder).forEach(function(b){(b=a.holder[b])&&b.clearLoadedAnnotations()})})}},
{key:"initSubscriptions",value:function(){var a=this;this.window.addEventListener("message",function(b){if(b&&b.data&&(b=b.data)&&b.evtName)switch(b.evtName){case x.a.ANNOTATIONS_LOADED_EVENT:return a._handleAnnotationsLoadedEvent(b);case x.a.ANNOTATION_CREATED_EVENT:return a._handleAnnotationCreatedEvent(b);case x.a.ANNOTATION_DELETED_EVENT:return a._handleAnnotationDeletedEvent(b)}})}},{key:"_handleAnnotationsLoadedEvent",value:function(a){var b=a.page,c=this.loadedContentFrames.get(b.idref),d=
c?c.spineItem:null;b&&d&&b.idref===d.idref&&b.index===d.index?(c&&c.addLoadedAnnotations(a&&a.evtArgs&&Array.isArray(a.evtArgs)&&0<a.evtArgs.length?a.evtArgs[0]:[]),this.loadedContentFrames.put(d.idref,c),Object(h.debug)("literatum content frame handler : loaded annotations for ["+d.idref+"]"),this.notifyAll(x.a.ANNOTATIONS_LOADED_EVENT,c)):Object(h.debug)("content frame for ["+b.idref+"] not found in content frame handler to update loaded annotations..")}},{key:"_handleAnnotationDeletedEvent",value:function(a){var b=
a.page;a=a.evtArgs&&Array.isArray(a.evtArgs)&&1===a.evtArgs.length?a.evtArgs[0]:null;b&&a&&(a=a&&a.commentId?a.commentId:a&&a.id?a.id:null,(b=this.loadedContentFrames.get(b.idref))&&a&&b.loadedAnnotations&&b.loadedAnnotations.remove(a))}},{key:"_handleAnnotationCreatedEvent",value:function(a){var b=a.page;a=a.evtArgs&&Array.isArray(a.evtArgs)&&1===a.evtArgs.length?a.evtArgs[0]:null;if(b&&a){var c=a&&a.commentId?a.commentId:a&&a.id?a.id:null;(b=this.loadedContentFrames.get(b.idref))&&c&&(b.loadedAnnotations||
(b.loadedAnnotations=new z.HolderUtil),b.loadedAnnotations&&b.loadedAnnotations.put(c,a))}}}]);return d}(f.Subject))},Zk5a:function(f,k){var a=Date.now;f.exports=function(e){var c=0,b=0;return function(){var f=a(),k=16-(f-b);b=f;if(0<k){if(800<=++c)return arguments[0]}else c=0;return e.apply(void 0,arguments)}}},bpPp:function(f,k,a){var e=a("M1c9"),c=a("zBOP"),b=a("5Zxu");f.exports=function(a,f,m){var d=null==a?0:a.length;if(!d)return[];m&&"number"!=typeof m&&c(a,f,m)?(f=0,m=d):(f=null==f?0:b(f),
m=void 0===m?d:b(m));return e(a,f,m)}},cXIJ:function(f,k){f.exports=function(a,e){if(Symbol.iterator in Object(a)||"[object Arguments]"===Object.prototype.toString.call(a)){var c=[],b=!0,f=!1,k=void 0;try{for(var m=a[Symbol.iterator](),d;!(b=(d=m.next()).done)&&(c.push(d.value),!e||c.length!==e);b=!0);}catch(x){f=!0,k=x}finally{try{if(!b&&null!=m["return"])m["return"]()}finally{if(f)throw k;}}return c}}},cuGy:function(f,k,a){Object.defineProperty(k,"__esModule",{value:!0});k.debug=function(){(void 0!==
y.logLevel?y.logLevel:c)<=e&&Function.prototype.bind.call(console.debug||console.log,console).apply(null,arguments)};k.info=function(){(void 0!==y.logLevel?y.logLevel:c)<=c&&Function.prototype.bind.call(console.info||console.log,console).apply(null,arguments)};k.warn=function(){(void 0!==y.logLevel?y.logLevel:c)<=b&&Function.prototype.bind.call(console.warn||console.log,console).apply(null,arguments)};k.error=function(){(void 0!==y.logLevel?y.logLevel:c)<=r&&Function.prototype.bind.call(console.error||
console.log,console).apply(null,arguments)};var e=0,c=1,b=2,r=3,y={};try{y=window||{},y.logLevel=e}catch(m){y={logLevel:e}}},dkdY:function(f,k){function a(e,c){f.exports=a=Object.setPrototypeOf||function(a,c){a.__proto__=c;return a};return a(e,c)}f.exports=a},dwsC:function(f,k,a){k=a("86tT");var e=a("S7p9");k=(a=(a=a("Dc0G"))&&a.isMap)?e(a):k;f.exports=k},eP4g:function(f,k,a){var e=a("gHOb"),c=a("UnEC");f.exports=function(a){return c(a)&&"[object Set]"==e(a)}},eShC:function(f,k,a){var e=a("v9aJ");
f.exports=function(a,b){var c=[];e(a,function(a,e,d){b(a,e,d)&&c.push(a)});return c}},hGXm:function(f,k){f.exports=function(a){for(var e,c=[];!(e=a.next()).done;)c.push(e.value);return c}},hofT:function(f,k,a){k.a=function(a,f){function b(a){var b=(new DOMParser).parseFromString(a,"text/html"),e=b.querySelectorAll("meta");e=c()(e,function(a,b){void 0!==b.name&&null!==b.name?a[b.name]=b.content:void 0!==b.property&&null!==b.property?a[b.property]=b.content:void 0!==b.itemprop&&null!==b.itemprop?a[b.itemprop]=
b.content:a[b[""]]=b.content;return a},{});if(r){b=annotatorHelper.recur(b.documentElement);b=partialMatch.find(r.replace(/\s/g,""),b.text);var h=Array.isArray(b)?b.map(function(a){return a.c||0}).reduce(function(a,b){return a+b},0):b.c}f&&f.postMessage({id:d,meta:e,certainty:h,html:null==r?a:null,section:r,action:"loadPagePreviewDone"},m)}try{var m=f.Remarq.grovePrefix}catch(v){m=window.Remarq.grovePrefix}var d=a.data.id,k=a.data.href,r=a.data.section,h=a.data.contentType,A=a.data.contextRanges;
if(a.data.text)b(a.data.text);else Object(e.a)(k,h,A).then(function(a){b(a)})["catch"](function(a){f&&f.postMessage({id:d,error:a.message,action:"loadPagePreviewError"},m)})};var e=a("oGVf");f=a("M+Z9");var c=a.n(f)},hrPF:function(f,k){f.exports=function(a,e){var c=-1,b=a.length;for(e||(e=Array(b));++c<b;)e[c]=a[c];return e}},hygk:function(f,k,a){var e=a("YDHx");f.exports=function(a,b){return e(a,b)}},i4ON:function(f,k,a){var e=a("nw3t"),c=a("22B7"),b=Object.prototype.hasOwnProperty;f.exports=function(a,
f,m){var d=a[f];b.call(a,f)&&c(d,m)&&(void 0!==m||f in a)||e(a,f,m)}},i6nN:function(f,k){f.exports=function(a,e,c){--c;for(var b=a.length;++c<b;)if(a[c]===e)return c;return-1}},iFDI:function(f,k){var a={utf8:{stringToBytes:function(e){return a.bin.stringToBytes(unescape(encodeURIComponent(e)))},bytesToString:function(e){return decodeURIComponent(escape(a.bin.bytesToString(e)))}},bin:{stringToBytes:function(a){for(var c=[],b=0;b<a.length;b++)c.push(a.charCodeAt(b)&255);return c},bytesToString:function(a){for(var c=
[],b=0;b<a.length;b++)c.push(String.fromCharCode(a[b]));return c.join("")}}};f.exports=a},iYj9:function(f,k){var a=/[\u200d\ud800-\udfff\u0300-\u036f\ufe20-\ufe2f\u20d0-\u20ff\ufe0e\ufe0f]/;f.exports=function(e){return a.test(e)}},"j/rp":function(f,k,a){var e=a("dkdY");f.exports=function(a,b){if("function"!==typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function");a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,writable:!0,configurable:!0}});b&&e(a,
b)}},jD7S:function(f,k,a){var e=a("tv3T"),c=a("ktak");f.exports=function(a,f){return a&&e(f,c(f),a)}},jItp:function(f,k,a){function e(a,b,c,d){Object.defineProperty(b,c,{get:function(){return a[d]},set:function(b){a[d]=b},configurable:!1,enumerable:!0})}function c(){return(new Date).getTime()+"_"+Math.floor(99*Math.random())+1}function b(a,b,c,d,e){c=c||window.articleInfo&&window.articleInfo.siteUrl||window.location.href;e=e||window.articleInfo&&window.articleInfo.doi;a=a||"HTML";-1<c.indexOf("://")&&
(c=c.substring(c.indexOf("://")+3));return b&&m()(b,function(b){var f=b.type.toUpperCase(),h=b.context;h&&-1<h.indexOf("://")&&(h=h.substring(h.indexOf("://")+3));return f===a.toUpperCase()&&(h===c||e&&e===d)&&("HTML"!==a&&b.page||"HTML"===a&&!b.page)})[0]}Object.defineProperty(k,"__esModule",{value:!0});a.d(k,"setupProperty",function(){return e});a.d(k,"getMostRelativeContextRange",function(){return b});a.d(k,"WindowEventManager",function(){return h});a.d(k,"getRandomId",function(){return c});f=
a("Z60a");var r=a.n(f);f=a("C9uT");var y=a.n(f);f=a("RyI1");var m=a.n(f);f=a("KgVm");var d=a.n(f),x=a("JyB8");a.n(x);var z=function(){function a(b,c){r()(this,a);this.listener=b;this.unsubCallback=c}y()(a,[{key:"destroy",value:function(){this.unsubCallback=this.listener=null}}]);return a}(),h=function(){function a(b){r()(this,a);this.win=b;this.unsubCallbacks=new x.HolderUtil}y()(a,[{key:"subscribe",value:function(a,b,c,d){this.win&&b&&"function"===typeof b&&(d=b,c&&(d=b.bind(c)),this.unsubCallbacks.contains(a)&&
Array.isArray(this.unsubCallbacks.get(a))?this.unsubCallbacks.get(a).push(new z(b,d)):this.unsubCallbacks.put(a,[new z(b,d)]),this.win.addEventListener(a,d))}},{key:"unsubscribe",value:function(a,b){if(this.win&&a&&b){var c=this.unsubCallbacks.get(a);if(c&&Array.isArray(c)){var e=d()(c,function(a){return a&&a.listener===b});if(0<=e){var f=c[e];c.splice(e,1);this.win.removeEventListener(a,f.unsubCallback);f.destroy()}}}}},{key:"unsubscribeAll",value:function(a){if(this.win&&a){var b=this.unsubCallbacks.get(a);
if(b&&Array.isArray(b))for(;0<b.length;){var c=b[0];b.splice(0,1);this.win.removeEventListener(a,c.unsubCallback);c.destroy()}}}},{key:"destroy",value:function(){var a=this;this.unsubCallbacks&&(this.unsubCallbacks.values().forEach(function(b){return a.unsubscribeAll(b)}),this.unsubCallbacks.clear(),delete this.unsubCallbacks,delete this.win)}}]);return a}();(function(a){a&&!a.windowEventManager&&Object.defineProperty(a,"windowEventManager",{get:function(){var b=new h(a);return function(){return b}}(),
set:function(a){},configurable:!1,enumerable:!0})})(window)},ktnU:function(f,k,a){var e=a("Hxdr");f.exports=function(a,b){return e(b,function(b){return a[b]})}},kvU2:function(f,k,a){var e=a("Fkvj");f.exports=function(a){return e(a,5)}},mBFJ:function(f,k,a){a.d(k,"a",function(){return r});f=a("Oy1H");var e=a.n(f);f=a("Z60a");var c=a.n(f);f=a("C9uT");var b=a.n(f),r=function(){function a(){c()(this,a);this.id=(Math.random().toString(36)+"00000000000000000").slice(2,17)}b()(a,[{key:"populate",value:function(a){var b=
this;return a&&"object"===e()(a)?(Object.keys(a).forEach(function(c){var d=a[c];if("id"!==c&&"string"===typeof d)try{d=new Date(d)}catch(h){}b[c]=d}),!0):!1}},{key:"destroy",value:function(){var a=this;Object.key(a).forEach(function(b){delete a[b]})}},{key:"put",value:function(a){if(a&&a.surveyId){var b=a.surveyId,c=a.lastSeen?""+a.lastSeen:null,e=a.status;this[b]?(e=this[b].split("#",2),c=e[0],e=e[1],c=a.lastSeen?""+a.lastSeen:""+(c?c:""),c=a.status?c+"#"+a.status:c+(e?"#"+e:""),this[b]=c):this[b]=
""+c?c:e;return!0}return!1}},{key:"delete",value:function(a){return a?(delete this[a],!0):!1}}],[{key:"evtName",value:function(){return"rmq_jsp"}},{key:"expirationDate",value:function(){return 1E4}}]);return a}()},"mKB/":function(f,k,a){(function(e){var c=a("TQ3y"),b="object"==typeof k&&k&&!k.nodeType&&k,f=b&&"object"==typeof e&&e&&!e.nodeType&&e,y=(c=f&&f.exports===b?c.Buffer:void 0)?c.allocUnsafe:void 0;e.exports=function(a,b){if(b)return a.slice();b=a.length;b=y?y(b):new a.constructor(b);a.copy(b);
return b}}).call(k,a("3IRH")(f))},moUy:function(f,k,a){var e=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,c){a.__proto__=c}||function(a,c){for(var b in c)c.hasOwnProperty(b)&&(a[b]=c[b])};return function(b,c){function e(){this.constructor=b}a(b,c);b.prototype=null===c?Object.create(c):(e.prototype=c.prototype,new e)}}();Object.defineProperty(k,"__esModule",{value:!0});a=function(){function a(a){var b=this;this.observers=[];a&&Array.isArray(a)&&
a.filter(function(a){return a&&a.events&&Array.isArray(a.events)&&a.notify}).forEach(function(a){return b.subscribe(a)})}a.prototype.notifyAll=function(a,c){(this.observers&&Array.isArray(this.observers)&&0<this.observers.length?this.observers.slice(0,this.observers.length):[]).forEach(function(b){if(b.events&&Array.isArray(b.events)&&-1<b.events.indexOf(a))b.notify(a,c);else if(b.events&&Array.isArray(b.events)&&b.name&&Array.isArray(b.name)){var e=-1;b.name.forEach(function(d){-1<(e=b.events.indexOf(a,
e+1))&&d===a&&b.notify(a,c)})}})};a.prototype.subscribe=function(a){this.observers.push(a)};a.prototype.unsubscribe=function(a){for(var b=0;b<this.observers.length;b++)if(this.observers[b]===a){this.observers.splice(b,1);break}};a.prototype.unsubscribeAll=function(){this.observers&&Array.isArray(this.observers)&&0<this.observers.length&&this.observers.splice(0,this.observers.length)};a.prototype.destroy=function(){this.observers.splice(0,this.observers.length);delete this.observers};return a}();k.Subject=
a;k.isObserver=function(a){return void 0!==a.notify};k.isObserverCallback=function(a){return"function"===typeof a};f=function(){function a(a,c){this.name=a;this.events=Array.isArray(a)?a:[a];"function"===typeof c&&(this.notify=c.bind(this))}a.prototype.notify=function(a,c){};a.prototype.destroy=function(){delete this.name;Array.isArray(this.events)&&this.events.splice(0,this.events.length);delete this.events};return a}();k.Observer=f;a=function(a){function b(b){var c=a.call(this)||this;c.val=null;
c.name=b;return c}e(b,a);Object.defineProperty(b.prototype,"value",{get:function(){return this.val},set:function(b){this.val=b;a.prototype.notifyAll.call(this,this.name,this.val)},enumerable:!0,configurable:!0});return b}(a);k.ConcreteSubject=a;f=function(a){function b(b){b=a.call(this,b)||this;b.val=null;return b}e(b,a);Object.defineProperty(b.prototype,"value",{get:function(){return this.val},set:function(a){this.val=a},enumerable:!0,configurable:!0});b.prototype.notify=function(a,b){a===this.name&&
(this.value=b)};return b}(f);k.ConcreteObserver=f},nIHh:function(f,k,a){k=a("NkRn");var e=a("hrPF"),c=a("gHOb"),b=a("bGc4"),r=a("JDN0"),y=a("hGXm"),m=a("WFiI"),d=a("octw"),x=a("0ghZ"),z=a("L8MQ"),h=k?k.iterator:void 0;f.exports=function(a){if(!a)return[];if(b(a))return r(a)?x(a):e(a);if(h&&a[h])return y(a[h]());var f=c(a);return("[object Map]"==f?m:"[object Set]"==f?d:z)(a)}},nfWN:function(f,k,a){var e=a("1C79"),c=a("2247");f.exports=function(a,f){return e(c(a,f),1)}},nw3t:function(f,k,a){var e=a("p0bc");
f.exports=function(a,b,f){"__proto__"==b&&e?e(a,b,{configurable:!0,enumerable:!0,value:f,writable:!0}):a[b]=f}},oGVf:function(f,k,a){k.a=function(a,f,d){return new Promise(function(k,m){if(a===r.location.href)if(d){var h=Object(e.getMostRelativeContextRange)(f,d,a);if(h){var x=h.page;f=f||h.type;h=null;"EPUB"===f||"EPUB_PDF"===f?h=x?c.a.getInstance().getPage(x):c.a.getInstance().getPage():"PDF"===f?h=b.a.getInstance().getPage(x):"HTML"===f&&(h=Promise.resolve({html:document.documentElement.innerHTML}));
if(h)h.then(function(a){var b=a.text;k(a.html||b)})["catch"](function(a){m(a)});else m("No page promise for page ".concat(x," in content ").concat(f))}}else k(document.documentElement.innerHTML);else if(0===r.location.href.indexOf("https://")&&0===a.indexOf("http://")&&(a=a.replace("http://","https://")),r.fetch)try{r.fetch(a,{method:"GET",mode:"cors",credentials:"include",redirect:"manual"}).then(function(b){r.fetch(a,{method:"GET",mode:"cors",credentials:"include",redirect:"follow"}).then(function(a){if(a.ok)a.text().then(function(a){k(a)})["catch"](function(a){m(a)});
else m({status:b.status})})["catch"](function(a){m(a)})})["catch"](function(a){m(a)})}catch(N){m(N)}else{var v=new XMLHttpRequest;v.open("GET",a,!0);v.onload=function(){var a=v.getResponseHeader("Content-Type");2!==Math.floor(v.status/100)&&m({status:v.status});!a||0<=a.indexOf("html")?k(v.response):m({contentType:a})};v.onerror=function(a){m(a)};v.send()}})};var e=a("jItp"),c=a("GCEA"),b=a("ObtK"),r=window},oqL2:function(f,k){f.exports=function(a){var e=null==a?0:a.length;return e?a[e-1]:void 0}},
p0bc:function(f,k,a){k=a("ICSD");a:{try{var e=k(Object,"defineProperty");e({},"",{});var c=e;break a}catch(b){}c=void 0}f.exports=c},pQJ6:function(f,k,a){var e=a("bGc4");f.exports=function(a,b){return function(c,f){if(null==c)return c;if(!e(c))return a(c,f);for(var k=c.length,d=b?k:-1,r=Object(c);(b?d--:++d<k)&&!1!==f(r[d],d,r););return c}}},py9u:function(f,k,a){var e=a("tv3T"),c=a("t8rQ");f.exports=function(a,f){return a&&e(f,c(f),a)}},qrcb:function(f,k,a){a.d(k,"a",function(){return e});a.d(k,"b",
function(){return c});var e="application/epub",c="application/pdf"},rCVp:function(f,k,a){var e=a("1C79");f.exports=function(a){return(null==a?0:a.length)?e(a,1):[]}},rpnb:function(f,k,a){k=a("tHks")();f.exports=k},s6UT:function(f,k,a){Object.defineProperty(k,"__esModule",{value:!0});k["default"]=function(){return function(a,c){function b(a){var b={"\\n":"\n","\\t":"\t"," ":" "};Object.keys(b).forEach(function(c){var d=new RegExp(c+"+","g"),e=b[c];a=a.replace(new RegExp(c+"+ *","g"),e);a=a.replace(d,
e)});return a}var e=c&&c.trim;c=c&&c.pack;0!==a.indexOf("<")&&(e&&(a=a.trim()),c&&(a=b(a)),a=a.replace(/\n/g,"<br/>").replace(/\t/g,"&emsp;"));c&&c&&(a=b(a),a=a.replace(/(((<br>)|(<br\/>))\s*)+/g,"<br/>"));return a}}},s96k:function(f,k){f.exports=function(a,e,c){for(var b=-1,f=null==a?0:a.length;++b<f;)if(c(e,a[b]))return!0;return!1}},sCxY:function(f,k,a){(function(e){function c(a,b){return a?a.split("/").map(function(a){return""===a?a:"*"!==a&&"."!==a?b+":"+a:a}).join("/"):a}function b(a,b,k){b=
b||document;if(k){k=document.contentType&&-1!==document.contentType.indexOf("xhtml")?"xhtml":"rmq";a=c(a,k);k=function(a){var b={xhtml:"http://www.w3.org/1999/xhtml",mathml:"http://www.w3.org/1998/Math/MathML"}[a];!b&&document.documentElement.lookupNamespaceURI&&(b=document.documentElement.lookupNamespaceURI(a));b||(b=document.documentElement.namespaceURI);return b};try{if(e(b).xpath)return e(b).xpath(a,k).toArray();var d=document.evaluate(a,b,k,0,null)}catch(A){Object(f.debug)("Failed to (jq)xpath",
A)}}else try{d=document.evaluate(a,b,null,0,null)}catch(A){Object(f.debug)("Failed to (de)xpath",A)}if(d){if(Array.isArray(d))return d;if(0<d.resultType&&4>d.resultType)return b=null,2===d.resultType?b=d.stringValue:3===d.resultType?b=""+d.booleanValue:1===d.resultType&&(b=""+d.numberValue),b;if(4<=d.resultType){b=null;if(4===d.resultType||5===d.resultType)for(b=[];null!=(a=d.iterateNext());)b.push(a);else if(8===d.resultType||9===d.resultType)b=[d.singleNodeValue];else if(6===d.resultType||7===d.resultType)b=
[d.snapshotItem()];return b}}else return[]}k.a=function(a,c){c=c||document;return 0===m.length?b(a,c,!0):b(a,c,!1)};var f=a("cuGy");if(!document.evaluate||-1!==navigator.userAgent.indexOf("Trident/7.0")){var y=a("LoU7");y.install()}var m=b("//html",document);0!==m.length||y||(y=a("LoU7"),y.install(),m=b("//html",document));0===m.length&&a("/JTF")}).call(k,a("7t+N"))},t8rQ:function(f,k,a){var e=a("7e4z"),c=a("G0Wc"),b=a("bGc4");f.exports=function(a){return b(a)?e(a,!0):c(a)}},tHks:function(f,k){f.exports=
function(a){return function(e,c,b){var f=-1,k=Object(e);b=b(e);for(var m=b.length;m--;){var d=b[a?m:++f];if(!1===c(k[d],d,k))break}return e}}},tNLN:function(f,k){function a(e){f.exports=a=Object.setPrototypeOf?Object.getPrototypeOf:function(a){return a.__proto__||Object.getPrototypeOf(a)};return a(e)}f.exports=a},tv3T:function(f,k,a){var e=a("i4ON"),c=a("nw3t");f.exports=function(a,f,k,m){var b=!k;k||(k={});for(var r=-1,z=f.length;++r<z;){var h=f[r],A=m?m(k[h],a[h],h,k,a):void 0;void 0===A&&(A=a[h]);
b?c(k,h,A):e(k,h,A)}return k}},v9aJ:function(f,k,a){k=a("M6Wl");a=a("pQJ6")(k);f.exports=a},vi0E:function(f,k,a){k=a("f931")(Object.getPrototypeOf,Object);f.exports=k},vzIA:function(f,k,a){a.d(k,"a",function(){return y});f=a("Z60a");var e=a.n(f);f=a("C9uT");var c=a.n(f),b=a("RTdn"),r=a("7t+N");r.__orig="rmq";window.rmqJquery=r;window.jQuery&&(window.jQuery.__orig="own");var y=function(){function a(b,c,f,h,k,m){e()(this,a);this.window=b;this.dataset=c?c:null;this.urlParams=k?k:null;this.grovePrefix=
f?f:null;this.apiBase=h?h:null;this.gp=m?m:null;this.leftPanelId=this.resolveLeftPanelId();this.notesId=this.resolveNotesId();this.groveSide=this.toExpandTimeout=this.toExpand=null;this.initNotesTabSelector()}c()(a,[{key:"initNotesTabSelector",value:function(){this.notesId&&r("#"+this.notesId).removeClass("js__disabled").attr("aria-disabled",!1).attr("tabindex","0")}},{key:"resolveLeftPanelId",value:function(){var a=null;window["readium-left-panel"]?a="readium-left-panel":window.leftPanelbtn&&(a=
"leftPanelbtn");return a}},{key:"resolveNotesId",value:function(){var a=null;window.notestab?a="notestab":window.notes&&(a="notes");return a}},{key:"handleExpand",value:function(a){var b=this;this.toExpand=a;this.toExpandTimeout||(this.toExpandTimeout=setTimeout(function(){r("#"+b.leftPanelId);var a=r("button.lpanel_toggle.btn");b.nowExpanded()!==!!b.toExpand&&a.filter(":visible").click();window[b.notesId].click();b.toExpandTimeout=null},50))}},{key:"nowExpanded",value:function(){var a=r("#"+this.leftPanelId);
r("button.lpanel_toggle.btn");var b=a.height(),c=a.width(),e=a.position();return a.is(":visible")&&0<=e.left&&0<=e.top&&0<c&&0<b}},{key:"injectUnsupported",value:function(a){a=r(a||"#notes-tab-pane").empty().css({padding:"0px"})[0];return Object(b.installFrame)("GroveSide",this.grovePrefix+"web/unsupported.html",this.apiBase,this.grovePrefix,a,{minWidth:"100%",width:"100%",minHeight:"100%",height:"100%",background:"transparent"},this.dataset||{},this.urlParams||{},this.gp||{},null,{title:"Remarq does not support this browser"})}},
{key:"injectInTab",value:function(a){var c=this;a=r(a||"#notes-tab-pane").empty().css({padding:"0px"})[0];if(!this.groveSide){var d=r("button.lpanel_toggle.btn"),e=r("button#leftPanelmobile"),f=function(a){c.clickHandlerSending||(c.clickHandlerSending=setTimeout(function(){var a=c.nowExpanded();c.groveSide.contentWindow&&c.groveSide.contentWindow.postMessage({action:"resize",expanded:a,origin:"literatumHandler"},"*");c.clickHandlerSending=null},50))};d.click(f);e.click(f);return Object(b.installFrame)("GroveSide",
this.grovePrefix+"web/leftside.html",this.apiBase,this.grovePrefix,a,{},this.dataset,this.urlParams,this.gp,null,{title:"Remarq Widget"}).then(function(a){return c.groveSide=a})}r(a).children("#GroveSide")[0]||a.appendChild(this.groveSide);return Promise.resolve(this.groveSide)}}]);return a}()},xond:function(f,k,a){var e=a("FCuZ"),c=a("09Qt"),b=a("t8rQ");f.exports=function(a){return e(a,b,c)}},yVmd:function(f,k,a){f=Object.freeze({ANNOTATIONS_LOADED_EVENT:"annotationsLoaded",ANNOTATION_DELETED_EVENT:"annotationDeleted",
ANNOTATION_CREATED_EVENT:"annotationCreated",ANNOTATION_BEFORE_CREATE_EVENT:"beforeAnnotationCreated",beforeAnnotationUpdated:"beforeAnnotationUpdated",annotationUpdated:"annotationUpdated"});k.a=f},yzuE:function(f,k,a){var e=a("v9aJ"),c=a("bGc4");f.exports=function(a,f){var b=-1,k=c(a)?Array(a.length):[];e(a,function(a,c,e){k[++b]=f(a,c,e)});return k}},zBOP:function(f,k,a){var e=a("22B7"),c=a("bGc4"),b=a("ZGh9"),r=a("yCNF");f.exports=function(a,f,d){if(!r(d))return!1;var k=typeof f;return("number"==
k?c(d)&&b(f,d.length):"string"==k&&f in d)?e(d[f],a):!1}}});

//# sourceMappingURL=groveMainModule.78a0c37b.bundle.js.map