!function t(e,n,r){function i(a,s){if(!n[a]){if(!e[a]){var u="function"==typeof require&&require;if(!s&&u)return u(a,!0);if(o)return o(a,!0);var c=new Error("Cannot find module '"+a+"'");throw c.code="MODULE_NOT_FOUND",c}var l=n[a]={exports:{}};e[a][0].call(l.exports,function(t){var n=e[a][1][t];return i(n||t)},l,l.exports,t,e,n,r)}return n[a].exports}for(var o="function"==typeof require&&require,a=0;a<r.length;a++)i(r[a]);return i}({1:[function(t,e,n){!function(t,n){void 0!==e?e.exports=n():"function"==typeof define&&"object"==typeof define.amd?define(n):this.domready=n()}(0,function(t){function e(t){for(u=1;t=r.shift();)t()}var n,r=[],i=document,o=i.documentElement,a=o.doScroll,s=a?/^loaded|^c/:/^loaded|c/,u=s.test(i.readyState);return i.addEventListener&&i.addEventListener("DOMContentLoaded",n=function(){i.removeEventListener("DOMContentLoaded",n,!1),e()},!1),a&&i.attachEvent("onreadystatechange",n=function(){/^c/.test(i.readyState)&&(i.detachEvent("onreadystatechange",n),e())}),t=a?function(e){self!=top?u?e():r.push(e):function(){try{o.doScroll("left")}catch(n){return setTimeout(function(){t(e)},50)}e()}()}:function(t){u?t():r.push(t)}})},{}],2:[function(t,e,n){function r(t){if(t)return i(t)}function i(t){for(var e in r.prototype)t[e]=r.prototype[e];return t}e.exports=r,r.prototype.on=function(t,e){return this._callbacks=this._callbacks||{},(this._callbacks[t]=this._callbacks[t]||[]).push(e),this},r.prototype.once=function(t,e){function n(){r.off(t,n),e.apply(this,arguments)}var r=this;return this._callbacks=this._callbacks||{},e._off=n,this.on(t,n),this},r.prototype.off=r.prototype.removeListener=r.prototype.removeAllListeners=function(t,e){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var n=this._callbacks[t];if(!n)return this;if(1==arguments.length)return delete this._callbacks[t],this;var r=n.indexOf(e._off||e);return~r&&n.splice(r,1),this},r.prototype.emit=function(t){this._callbacks=this._callbacks||{};var e=[].slice.call(arguments,1),n=this._callbacks[t];if(n){n=n.slice(0);for(var r=0,i=n.length;r<i;++r)n[r].apply(this,e)}return this},r.prototype.listeners=function(t){return this._callbacks=this._callbacks||{},this._callbacks[t]||[]},r.prototype.hasListeners=function(t){return!!this.listeners(t).length}},{}],3:[function(t,e,n){e.exports=function(t,e,n){for(var r=0,i=t.length,o=3==arguments.length?n:t[r++];r<i;)o=e.call(null,o,t[r],++r,t);return o}},{}],4:[function(t,e,n){function r(){}function i(t){switch({}.toString.call(t)){case"[object File]":case"[object Blob]":case"[object FormData]":return!0;default:return!1}}function o(){if(m.XMLHttpRequest&&("file:"!=m.location.protocol||!m.ActiveXObject))return new XMLHttpRequest;try{return new ActiveXObject("Microsoft.XMLHTTP")}catch(t){}try{return new ActiveXObject("Msxml2.XMLHTTP.6.0")}catch(t){}try{return new ActiveXObject("Msxml2.XMLHTTP.3.0")}catch(t){}try{return new ActiveXObject("Msxml2.XMLHTTP")}catch(t){}return!1}function a(t){return t===Object(t)}function s(t){if(!a(t))return t;var e=[];for(var n in t)null!=t[n]&&e.push(encodeURIComponent(n)+"="+encodeURIComponent(t[n]));return e.join("&")}function u(t){for(var e,n,r={},i=t.split("&"),o=0,a=i.length;o<a;++o)n=i[o],e=n.split("="),r[decodeURIComponent(e[0])]=decodeURIComponent(e[1]);return r}function c(t){var e,n,r,i,o=t.split(/\r?\n/),a={};o.pop();for(var s=0,u=o.length;s<u;++s)n=o[s],e=n.indexOf(":"),r=n.slice(0,e).toLowerCase(),i=v(n.slice(e+1)),a[r]=i;return a}function l(t){return t.split(/ *; */).shift()}function f(t){return y(t.split(/ *; */),function(t,e){var n=e.split(/ *= */),r=n.shift(),i=n.shift();return r&&i&&(t[r]=i),t},{})}function h(t,e){e=e||{},this.req=t,this.xhr=this.req.xhr,this.text=this.xhr.responseText,this.setStatusProperties(this.xhr.status),this.header=this.headers=c(this.xhr.getAllResponseHeaders()),this.header["content-type"]=this.xhr.getResponseHeader("content-type"),this.setHeaderProperties(this.header),this.body="HEAD"!=this.req.method?this.parseBody(this.text):null}function p(t,e){var n=this;g.call(this),this._query=this._query||[],this.method=t,this.url=e,this.header={},this._header={},this.on("end",function(){var e=new h(n);"HEAD"==t&&(e.text=null),n.callback(null,e)})}function d(t,e){return"function"==typeof e?new p("GET",t).end(e):1==arguments.length?new p("GET",t):new p(t,e)}var g=t("emitter"),y=t("reduce"),m="undefined"==typeof window?this:window,v="".trim?function(t){return t.trim()}:function(t){return t.replace(/(^\s*|\s*$)/g,"")};d.serializeObject=s,d.parseString=u,d.types={html:"text/html",json:"application/json",xml:"application/xml",urlencoded:"application/x-www-form-urlencoded",form:"application/x-www-form-urlencoded","form-data":"application/x-www-form-urlencoded"},d.serialize={"application/x-www-form-urlencoded":s,"application/json":JSON.stringify},d.parse={"application/x-www-form-urlencoded":u,"application/json":JSON.parse},h.prototype.get=function(t){return this.header[t.toLowerCase()]},h.prototype.setHeaderProperties=function(t){var e=this.header["content-type"]||"";this.type=l(e);var n=f(e);for(var r in n)this[r]=n[r]},h.prototype.parseBody=function(t){var e=d.parse[this.type];return e?e(t):null},h.prototype.setStatusProperties=function(t){var e=t/100|0;this.status=t,this.statusType=e,this.info=1==e,this.ok=2==e,this.clientError=4==e,this.serverError=5==e,this.error=(4==e||5==e)&&this.toError(),this.accepted=202==t,this.noContent=204==t||1223==t,this.badRequest=400==t,this.unauthorized=401==t,this.notAcceptable=406==t,this.notFound=404==t,this.forbidden=403==t},h.prototype.toError=function(){var t=this.req,e=t.method,n=t.path,r="cannot "+e+" "+n+" ("+this.status+")",i=new Error(r);return i.status=this.status,i.method=e,i.path=n,i},d.Response=h,g(p.prototype),p.prototype.timeout=function(t){return this._timeout=t,this},p.prototype.clearTimeout=function(){return this._timeout=0,clearTimeout(this._timer),this},p.prototype.abort=function(){if(!this.aborted)return this.aborted=!0,this.xhr.abort(),this.clearTimeout(),this.emit("abort"),this},p.prototype.set=function(t,e){if(a(t)){for(var n in t)this.set(n,t[n]);return this}return this._header[t.toLowerCase()]=e,this.header[t]=e,this},p.prototype.getHeader=function(t){return this._header[t.toLowerCase()]},p.prototype.type=function(t){return this.set("Content-Type",d.types[t]||t),this},p.prototype.accept=function(t){return this.set("Accept",d.types[t]||t),this},p.prototype.auth=function(t,e){var n=btoa(t+":"+e);return this.set("Authorization","Basic "+n),this},p.prototype.query=function(t){return"string"!=typeof t&&(t=s(t)),t&&this._query.push(t),this},p.prototype.send=function(t){var e=a(t),n=this.getHeader("Content-Type");if(e&&a(this._data))for(var r in t)this._data[r]=t[r];else"string"==typeof t?(n||this.type("form"),n=this.getHeader("Content-Type"),this._data="application/x-www-form-urlencoded"==n?this._data?this._data+"&"+t:t:(this._data||"")+t):this._data=t;return e?(n||this.type("json"),this):this},p.prototype.callback=function(t,e){var n=this._callback;return 2==n.length?n(t,e):t?this.emit("error",t):void n(e)},p.prototype.crossDomainError=function(){var t=new Error("Origin is not allowed by Access-Control-Allow-Origin");t.crossDomain=!0,this.callback(t)},p.prototype.timeoutError=function(){var t=this._timeout,e=new Error("timeout of "+t+"ms exceeded");e.timeout=t,this.callback(e)},p.prototype.withCredentials=function(){return this._withCredentials=!0,this},p.prototype.end=function(t){var e=this,n=this.xhr=o(),a=this._query.join("&"),s=this._timeout,u=this._data;if(this._callback=t||r,n.onreadystatechange=function(){if(4==n.readyState)return 0==n.status?e.aborted?e.timeoutError():e.crossDomainError():void e.emit("end")},n.upload&&(n.upload.onprogress=function(t){t.percent=t.loaded/t.total*100,e.emit("progress",t)}),s&&!this._timer&&(this._timer=setTimeout(function(){e.abort()},s)),a&&(a=d.serializeObject(a),this.url+=~this.url.indexOf("?")?"&"+a:"?"+a),n.open(this.method,this.url,!0),this._withCredentials&&(n.withCredentials=!0),"GET"!=this.method&&"HEAD"!=this.method&&"string"!=typeof u&&!i(u)){var c=d.serialize[this.getHeader("Content-Type")];c&&(u=c(u))}for(var l in this.header)null!=this.header[l]&&n.setRequestHeader(l,this.header[l]);return n.send(u),this},d.Request=p,d.get=function(t,e,n){var r=d("GET",t);return"function"==typeof e&&(n=e,e=null),e&&r.query(e),n&&r.end(n),r},d.head=function(t,e,n){var r=d("HEAD",t);return"function"==typeof e&&(n=e,e=null),e&&r.send(e),n&&r.end(n),r},d.del=function(t,e){var n=d("DELETE",t);return e&&n.end(e),n},d.patch=function(t,e,n){var r=d("PATCH",t);return"function"==typeof e&&(n=e,e=null),e&&r.send(e),n&&r.end(n),r},d.post=function(t,e,n){var r=d("POST",t);return"function"==typeof e&&(n=e,e=null),e&&r.send(e),n&&r.end(n),r},d.put=function(t,e,n){var r=d("PUT",t);return"function"==typeof e&&(n=e,e=null),e&&r.send(e),n&&r.end(n),r},e.exports=d},{emitter:2,reduce:3}],5:[function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),o=function(){function t(e){var n=this;r(this,t),this.candidates=e;var i=[{re:new RegExp(""+this.constructor.re.start+this.constructor.yearAndMonthName.parts.map(function(t){return n.constructor.re[t]}).join(this.constructor.re.separatorMonth)+this.constructor.re.end),year:this.constructor.yearAndMonthName.year,month:this.constructor.yearAndMonthName.month,name:!0}];this.patterns=i.concat(["yearAndMonth","monthDayYear","monthNameDayYear","monthYear","monthNameAndYear","year"].map(function(t){return n.constructor[t]}).map(function(t){return{re:new RegExp(""+n.constructor.re.start+t.parts.map(function(t){return n.constructor.re[t]}).join(n.constructor.re.separator)+n.constructor.re.end),year:t.year,month:t.month,name:t.name}})),this.extracted=this.constructor.compact(this.candidates.map(function(t){return n.extract(t)})),this.sorted=this.extracted.sort(function(t,e){return t[0]+"-"+(t[1]||99)<e[0]+"-"+(e[1]||99)?-1:1}),this.publicationDate=this.sorted[0]}return i(t,[{key:"extract",value:function(t){for(var e=["january","february","march","april","may","june","july","august","september","october","november","december"],n=0;n<this.patterns.length;n+=1){var r=this.patterns[n],i=t.match(r.re);if(i){var o=null;if(r.month&&(o=i[r.month],r.name))for(var a=o.toLowerCase(),s=0;s<e.length;s+=1){var u=e[s],c=u.match(a);c&&(o=String(e.indexOf(u)+1))}return this.constructor.compact([i[r.year],o])}}return null}}],[{key:"compact",value:function(t){return t.filter(function(t){return void 0!==t&&null!==t})}}]),t}();o.re={year:"(19\\d{2}|20\\d{2})",month:"(\\d{1,2})",monthName:"(\\w{3,9})",day:"\\d{1,2}",start:"(\\D|^)",end:"(\\D|$)",separator:"\\D+",separatorMonth:"\\W+"},o.yearAndMonth={parts:["year","month"],year:2,month:3},o.yearAndMonthName={parts:["year","monthName"],year:2,month:3,name:!0},o.monthDayYear={parts:["month","day","year"],year:3,month:2},o.monthNameDayYear={parts:["monthName","day","year"],year:3,month:2,name:!0},o.monthYear={parts:["month","year"],year:3,month:2},o.monthNameAndYear={parts:["monthName","year"],year:3,month:2,name:!0},o.year={parts:["year"],year:2},e.exports={DateParser:o}},{}],6:[function(t,e,n){"use strict";e.exports=function(t){return t.replace(/_([a-z])/g,function(t){return t[1].toUpperCase()})}},{}],7:[function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),o=t("./sources"),a=t("./DateParser"),s=a.DateParser,u=t("./camelCase"),c=function(){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(r(this,t),!e)throw new Error("document is required for new MetaExtractor instance");this.options=n,this.parse(e)}return i(t,[{key:"parse",value:function(t){var e=this,n=this.options.sources||this.constructor.defaultSources,r=this.options.meta_extractor_options,i=void 0===r?{prioritizeSelectors:void 0}:r,a=i.prioritizeSelectors;a&&(this.options.prioritizeSelectors=a,n=n.reduce(function(t,e){return"Selectors"===e?[e].concat(t):(t.push(e),t)},[])),this.sources=n.map(function(n){return new("string"==typeof n?o[n]:n)(t,e.options)}),[].slice.call(t.querySelectorAll("meta")).forEach(function(t){e.sources.forEach(function(e){e.add(t)})}),(this.options.tags||this.constructor.defaultTags).forEach(function(t){if("publication_date"===t){var n=new s(e.forCompact("publication_date")),r=n.publicationDate;r&&(e.publicationYear=r[0],e.publicationMonth=r[1])}else{var i="get"+e.constructor.ucCamelCase(t);e[u(t)]=e[i]?e[i]():e.firstFor(t)}})}},{key:"getPubmedId",value:function(){return this.firstFor("pubmed_id",Number)}},{key:"getDoi",value:function(){var t=this.firstFor("doi");if(t)return t.trim().replace("doi:","").replace("info:doi/","").replace("http://","").replace("https://","").replace("dx.doi.org/","").replace("doi.org/","").replace("doi","").replace("DOI","")}},{key:"getIssn",value:function(){var t=this.firstFor("issn");if(t)return t.trim().replace("issn:","").replace("info:issn/","")}},{key:"getAuthors",value:function(){var t=this.constructor.uniq(this.forCompact("authors"));return t.length>1?t[0]+" et al.":t[0]}},{key:"getAbstract",value:function(){var t=this.options.prioritizeSelectors?0:7;return this.sources[t].get("abstract")||this.firstFor("abstract")}},{key:"firstFor",value:function(t,e){var n=this.forCompact(t);return e&&(n=n.filter(e)),n[0]}},{key:"forCompact",value:function(t){var e=[];return this.sources.map(function(e){return e.get(t)}).forEach(function(t){e=e.concat(t)}),this.constructor.compact(e)}},{key:"publication_year",get:function(){return this.publicationYear},set:function(t){this.publicationYear=t}},{key:"publication_month",get:function(){return this.publicationMonth},set:function(t){this.publicationMonth=t}},{key:"journal_title",get:function(){return this.journalTitle.trim()},set:function(t){this.journalTitle=t}},{key:"custom_id",get:function(){return this.customId},set:function(t){this.customId=t}}],[{key:"ucCamelCase",value:function(t){var e=u(t);return e.charAt(0).toUpperCase()+e.substr(1)}},{key:"compact",value:function(t){return t.filter(function(t){return void 0!==t&&null!==t})}},{key:"uniq",value:function(t){return t.filter(function(e,n){return t.indexOf(e)===n})}}]),t}();c.defaultSources=["HighWire","DublinCore","DCTerms","Prism","BEPress","EPrints","WolterKluwer","Selectors","OpenGraph"],c.defaultTags=["pubmed_id","doi","title","publication_date","authors","abstract"],e.exports={MetaExtractor:c,sources:o}},{"./DateParser":5,"./camelCase":6,"./sources":20}],8:[function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var a=t("./Source"),s=function(t){function e(){return r(this,e),i(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return o(e,t),e}(a);s.prefix=["bepress","citation"],s.separator="_",e.exports=s},{"./Source":17}],9:[function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var a=t("./Source"),s=function(t){function e(){return r(this,e),i(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return o(e,t),e}(a);s.defaultTags=["issn","journal_title","doi"],s.prefix="dcsext.wt",s.separator="_",s.issn="issn",s.journalTitle="name",s.doi="doi",e.exports=s},{"./Source":17}],10:[function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var a=t("./Source"),s=function(t){function e(){return r(this,e),i(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return o(e,t),e}(a);s.defaultTags=["pubmed_id","doi","title","authors","abstract"],s.prefix="dcterms",s.authors="creator",s.abstract=["abstract","description"],s.journalTitle="publisher",s.issn="identifier.issn",e.exports=s},{"./Source":17}],11:[function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var a=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),s=function t(e,n,r){null===e&&(e=Function.prototype);var i=Object.getOwnPropertyDescriptor(e,n);if(void 0===i){var o=Object.getPrototypeOf(e);return null===o?void 0:t(o,n,r)}if("value"in i)return i.value;var a=i.get;if(void 0!==a)return a.call(r)},u=t("./Source"),c=function(t){function e(){return r(this,e),i(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return o(e,t),a(e,[{key:"getIssn",value:function(){for(var t=this.forCompact("issn"),e=0;e<t.length;e+=1){var n=t[e];if(!this.constructor.checkDoi(n))return n}}},{key:"sortScore",value:function(t,n){var r=s(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"sortScore",this).call(this,t,n);if("doi"===t||"issn"===t){r*=10;var i=n.getAttribute("scheme");i&&i.toLowerCase()===t&&(r-=5);var o=this.clean(n.getAttribute("content"));o&&0===o.toLowerCase().indexOf(t+":")&&(r-=1)}return r}}]),e}(u);c.prefix="dc",c.doi=["identifier.doi","identifier"],c.authors=["creator","contributor"],c.publicationDate=["date","issued"],c.abstract=["abstract","description"],c.journalTitle="publisher",c.issn=["identifier.issn","identifier"],e.exports=c},{"./Source":17}],12:[function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var a=t("./Source"),s=function(t){function e(){return r(this,e),i(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return o(e,t),e}(a);s.prefix="eprints",s.authors="creators_name",s.journalTitle=["publication","publisher"],e.exports=s},{"./Source":17}],13:[function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var a=t("./Source"),s=function(t){function e(){return r(this,e),i(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return o(e,t),e}(a);s.prefix="citation",s.separator="_",e.exports=s},{"./Source":17}],14:[function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var a=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),s=function t(e,n,r){null===e&&(e=Function.prototype);var i=Object.getOwnPropertyDescriptor(e,n);if(void 0===i){var o=Object.getPrototypeOf(e);return null===o?void 0:t(o,n,r)}if("value"in i)return i.value;var a=i.get;if(void 0!==a)return a.call(r)},u=t("./Source"),c=function(t){function e(){return r(this,e),i(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return o(e,t),a(e,null,[{key:"nodeTag",value:function(t){var n=t.getAttribute("property");return n?n.toLowerCase():s(e.__proto__||Object.getPrototypeOf(e),"nodeTag",this).call(this,t)}}]),e}(u);c.prefix="og",c.separator=":",c.authors=[],c.publicationDate="article:published_time",c.abstract="description",e.exports=c},{"./Source":17}],15:[function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var a=t("./Source"),s=function(t){function e(){return r(this,e),i(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return o(e,t),e}(a);s.prefix="prism",s.publicationDate="publicationdate",s.journalTitle="publicationname",s.issn=["eissn","issn"],e.exports=s},{"./Source":17}],16:[function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var a=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),s=t("./Source"),u=function(t){function e(t,n){r(this,e);var o=i(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,n));return o.options.selectors=o.options.selectors||{},o.buckets={},o.tags.forEach(function(t){o.options.selectors[t]&&(o.buckets[t]=[].slice.call(o.document.querySelectorAll(o.options.selectors[t])).map(function(t){return"META"===t.tagName?t.content:t.textContent}))}),o}return o(e,t),a(e,[{key:"forCompact",value:function(t){return this.buckets[t]||[]}},{key:"add",value:function(){this.added=this.added}}]),e}(s);e.exports=u},{"./Source":17}],17:[function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),o=t("../camelCase"),a=function(){function t(e){var n=this,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};r(this,t),this.document=e,this.options=i,this.tags=this.options.tags||this.constructor.defaultTags,this.tagMap={},this.buckets={},this.tagOrder={},this.tags.forEach(function(t){n.buckets[t]=[],n.tagOrder[t]=[],[].concat(n.constructor[o(t)]).forEach(function(e){var r=n.constructor.tag(e);n.tagMap[r]=n.tagMap[r]||[],n.tagMap[r].push(t),n.tagOrder[t].push(r)})})}return i(t,[{key:"add",value:function(t){var e=this,n=this.constructor.nodeTag(t);(this.tagMap[n]||[]).forEach(function(n){t.getAttribute("content")&&e.buckets[n].push(t)})}},{key:"get",value:function(t){var e="get"+this.constructor.ucCamelCase(t);return"function"==typeof this[e]?this[e]():this.firstFor(t)}},{key:"getAuthors",value:function(){return this.forCompact("authors")}},{key:"getPublicationDate",value:function(){return this.forCompact("publication_date")}},{key:"getAbstract",value:function(){var t=this.forCompact("abstract");return t&&t.length?t.join(" ").trim():null}},{key:"getDoi",value:function(){for(var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"doi",e=this.forCompact(t),n=0;n<e.length;n+=1){var r=e[n];if(this.constructor.checkDoi(r))return r}}},{key:"firstFor",value:function(t){return this.forCompact(t)[0]}},{key:"forCompact",value:function(t){var e=this;return this.buckets[t]?this.buckets[t].sort(function(n,r){return e.sortScore(t,n)-e.sortScore(t,r)}).map(function(t){var n=t.getAttribute?t.getAttribute("content"):t;return e.clean(n)}):[]}},{key:"sortScore",value:function(t,e){return(this.tagOrder[t]||"").indexOf(this.constructor.nodeTag(e))}},{key:"clean",value:function(t){return this.htmlDecode(t).replace(/^\s+|\s+$/g,"").replace(/\s*[\n\t]+\s*/g," ")}},{key:"htmlDecode",value:function(t){var e=this.document.createElement("div");return e.innerHTML=t,0===e.childNodes.length?"":e.childNodes[0].textContent}}],[{key:"checkDoi",value:function(t){return t.match(/\//g)}},{key:"tag",value:function(t){return[].concat(this.prefix).concat(t).join(this.separator)}},{key:"nodeTag",value:function(t){var e=t.getAttribute("name");return e?e.toLowerCase():"invalid"}},{key:"ucCamelCase",value:function(t){var e=o(t);return e.charAt(0).toUpperCase()+e.substr(1)}}]),t}();a.prefix=[],a.separator=".",a.defaultTags=["pubmed_id","doi","title","authors","publication_date","abstract"],a.pubmedId=["pubmed_id","pmid"],a.doi="doi",a.title="title",a.authors=["authors","author"],a.publicationDate=["publication_date","date"],a.abstract="abstract",a.journalTitle=["journal_title","journal_abbrev"],a.issn="issn",e.exports=a},{"../camelCase":6}],18:[function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var a=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),s=t("./Source"),u=function(t){function e(){return r(this,e),i(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return o(e,t),a(e,[{key:"getCustomId",value:function(){var t=this.document.querySelector('meta[name="pbContext"]');if(t&&t.content){var e=new RegExp("journal\\:journal\\:(\\w+?)(?:\\W|$)").exec(t.content);if(e&&e.length>1)return e[1]}return null}}]),e}(s);e.exports=u},{"./Source":17}],19:[function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var a=t("./Source"),s=function(t){function e(){return r(this,e),i(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return o(e,t),e}(a);s.prefix="wkhealth",s.separator="_",e.exports=s},{"./Source":17}],20:[function(t,e,n){"use strict";var r=t("./Source"),i=t("./HighWire"),o=t("./DublinCore"),a=t("./Prism"),s=t("./BEPress"),u=t("./EPrints"),c=t("./OpenGraph"),l=t("./WolterKluwer"),f=t("./DCTerms"),h=t("./Selectors"),p=t("./TandFonline"),d=t("./DCSext");e.exports={Source:r,HighWire:i,DublinCore:o,Prism:a,BEPress:s,EPrints:u,OpenGraph:c,WolterKluwer:l,DCTerms:f,Selectors:h,TandFonline:p,DCSext:d}},{"./BEPress":8,"./DCSext":9,"./DCTerms":10,"./DublinCore":11,"./EPrints":12,"./HighWire":13,"./OpenGraph":14,"./Prism":15,"./Selectors":16,"./Source":17,"./TandFonline":18,"./WolterKluwer":19}],21:[function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function t(t,e){var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!e||n.length!==e);r=!0);}catch(t){i=!0,o=t}finally{try{!r&&s.return&&s.return()}finally{if(i)throw o}}return n}return function(e,n){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return t(e,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),o=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),a=function(){function t(e){var n=this;r(this,t),
e&&(e.split(",").forEach(function(t){if(-1!==t.indexOf("=")){var e=t.split("="),r=i(e,2),o=r[0],a=r[1];n[n.trim(o)]=n.trim(a)}else n[n.trim(t)]=!0}),this.abstract=parseInt(this.abstract,10))}return o(t,[{key:"trim",value:function(t){return t.replace(/^\s+|\s+$/g,"")}}]),t}();n.default=a},{}],22:[function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),o=function(){function t(e){var n=e.dtConfig,i=e.loadingTimes,o=e.relevancy,a=e.queryParams;r(this,t),this.dtConfig=n,this.switches={},this.loadingTimes=i,this.relevancy=o,this.queryParams=a,this.res={}}return i(t,[{key:"addDt",value:function(){var t=this;if(!this.dtConfig||!this.switches.dt||this.switches.gdpr)return!1;var e=document.createElement("iframe");if(e.setAttribute("style","display:none!important"),"function"!=typeof e.getAttribute)return!1;var n=Date.now(),r=window.location.origin,i="?client-origin="+r+"&timestamp="+n;return this.dtConfig.permittedOrigin=""+this.dtConfig.origin,e.src=""+this.dtConfig.permittedOrigin+this.dtConfig.path+i,document.body.appendChild(e),window.addEventListener("message",function(e){return t.dtPostMessageHandler(e)},!1),!0}},{key:"dtPostMessageHandler",value:function(t){t.origin===this.dtConfig.permittedOrigin&&(this.res=t.data,this.loadingTimes.dt=new Date-this.loadingTimes.start,this.relevancy.dtObj=this.dtObj(),this.loadingTimes.recos&&this.relevancy.log({},{dt:this.dtObj()}))}},{key:"dtObj",value:function(){if(!this.dtConfig||!this.switches.dt)return!1;for(var t={url:document.location.href,title:document.title,article:this.queryParams(),referrer:document.referrer,time:new Date,recos:[],iframe:{data:this.res,iframeResponse:this.loadingTimes.dt,recosVisible:this.loadingTimes.recos}},e=document.getElementsByClassName(this.tag+"-widget-list-item__link"),n=0;n<e.length;n++){var r=e[n];t.recos.push(r.getAttribute("data-"+this.tag+"-id"))}return t}}]),t}();n.default=o},{}],23:[function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),o=function(){function t(e){var n=e.relevancy,i=e.tag;r(this,t),this.prConsent=null,this.trConsent=null,this.gaConsent=null,this.gaClientId=null,this.gaConsentInGdpr=null,this.newClientId=!1,this.gdpr=!0,this.gaCode="UA-47018061-3",this.tag=i,this.relevancy=n,this.sessionCookieName=this.tag+"-disable-gdpr-ga-popup",this.flag="cf_widget_j",this.journalId=null}return i(t,[{key:"addGaTrackingCode",value:function(t,e,n){var r=this;t&&(this.gaCode=t),e&&(this.flag=e),this._addGaTrackingCode(function(){r.gdpr&&!r.gaConsent?navigator.cookieEnabled&&-1!==document.cookie.indexOf(r.sessionCookieName)||("function"==typeof n?n():r._askForGaConsent()):r.newClientId?r._registerGaConsent(!0,function(t){t||r._gaTrackPageView()}):r._gaTrackPageView()})}},{key:"_addGaTrackingCode",value:function(t){var e=this;!function(t,e,n,r,i,o,a){t.GoogleAnalyticsObject=i,t[i]=t[i]||function(){return(t[i].q=t[i].q||[]).push(arguments)},t[i].l=1*new Date,o=e.createElement(n),a=e.getElementsByTagName(n)[0],o.async=1,o.src=r,a.parentNode.insertBefore(o,a)}(window,document,"script","//www.google-analytics.com/analytics.js","ga"),this.gaClientId?ga("create",this.gaCode,"auto",{storage:"none",name:"tmdWidget",clientId:this.gaClientId}):ga("create",this.gaCode,"auto",{storage:"none",name:"tmdWidget"}),ga("set","anonymizeIp",!0),ga(function(){if("function"==typeof ga.getAll){ga.getAll().forEach(function(n){"tmdWidget"===n.get("name")&&(e.gaClientId||(e.gaClientId=n.get("clientId"),e.newClientId=!0),t())})}})}},{key:"_gaTrackPageView",value:function(){"cf_widget"===this.flag.substring(0,9)?ga("tmdWidget.send","pageview",window.location.hostname+"/"+this.journalId):ga("tmdWidget.send","pageview")}},{key:"_askForGaConsent",value:function(){document.getElementsByClassName(this.tag+"-widget-cookie-notification").length&&(this._hideProgress(),document.getElementsByClassName(this.tag+"-widget-cookie-notification")[0].setAttribute("style","display: block!important"))}},{key:"_registerGaConsent",value:function(t){var e=this,n=function(){var n=e.flag;"cf_widget"===e.flag.substring(0,9)&&(n=""+e.flag+e.journalId),e.relevancy.log({},{gdprGaConsent:{gdpr:e.gdpr,gaClientId:e.gaClientId,gaCode:e.gaCode,gaConsent:e.gaConsent,gaConsentInGdpr:e.gaConsentInGdpr,flag:n}},function(n){n.ok?(e.gaConsent&&e._gaTrackPageView(),"function"==typeof t&&t(!1),e.gdpr&&(document.cookie=e.sessionCookieName+"=1;path=/")):n.ok||"function"==typeof t&&t({error:"other"})})};if(!this.gdpr&&this.relevancy.concurrent>0)var r=setInterval(function(){0===e.relevancy.concurrent&&(n(),clearInterval(r))},500);else n()}},{key:"_handleGaConsentError",value:function(){var t=this;this._hideConsentFooter(),clearTimeout(this._handleGaConsentErrorTimeout),this._handleGaConsentErrorTimeout=setTimeout(function(){t._askForGaConsent()},500)}},{key:"_hideConsentFooter",value:function(){var t=document.getElementsByClassName(this.tag+"-widget-cookie-notification");t&&t[0]&&"function"==typeof t[0].setAttribute&&t[0].setAttribute("style","display: none!important")}},{key:"_showProgress",value:function(){var t=this;document.querySelectorAll("."+this.tag+"-widget-cookie-notification button").forEach(function(t){return t.style.display="none"});var e=document.querySelectorAll("."+this.tag+"-widget-cookie-notification span")[1];clearInterval(this._showProgressInterval),this._showProgressDots=1,this._showProgressInterval=setInterval(function(){for(var n="Saving",r=0;r<t._showProgressDots;r++)n+=".";e&&(e.innerHTML=n),t._showProgressDots+=1,t._showProgressDots>3&&(t._showProgressDots=1)},500)}},{key:"_hideProgress",value:function(){document.querySelectorAll("."+this.tag+"-widget-cookie-notification button").forEach(function(t){return t.style.display="inline-block"});var t=document.querySelectorAll("."+this.tag+"-widget-cookie-notification span")[1];clearInterval(this._showProgressInterval),t.innerHTML=""}},{key:"setGaConsent",value:function(t,e){var n=this,r=e;return"function"!=typeof r&&(r=function(t){t?n._handleGaConsentError():n._hideConsentFooter()}),navigator.cookieEnabled?(this.gaConsent=!0===t,this._showProgress(),this._registerGaConsent(r)):r({error:"cookie"})}},{key:"setPrConsent",value:function(t,e,n){return navigator.cookieEnabled?(this.prConsent=!0===t,this.trConsent=!0===e,this.relevancy.log({},{gdprPrConsent:{gdpr:this.gdpr,prConsent:this.prConsent,trConsent:this.trConsent}},function(t){"function"==typeof n&&(t.ok?n(!1):t.ok||n({error:"other"}))})):n({error:"cookie"})}},{key:"switches",set:function(t){t&&null!==t.gdpr&&(this.gdpr=t.gdpr),t&&t.gaCode&&(this.gaCode=t.gaCode),t&&t.mainCookie&&t.mainCookie.ga?(this.gaConsent=!!t.mainCookie.ga.consent,this.gaClientId=t.mainCookie.ga.clientId):this.gdpr?this.gaConsent=!1:this.gaConsent=!0,t&&t.mainCookie&&t.mainCookie.pr?(this.prConsent=!!t.mainCookie.pr.consent,this.trConsent=!!t.mainCookie.pr.tr):this.gdpr?(this.prConsent=!1,this.trConsent=!1):(this.prConsent=!0,this.trConsent=!0),t&&t.mainCookie&&t.mainCookie.gdprGaConsent&&(this.gaConsentInGdpr=!0)}}]),t}();n.default=o},{}],24:[function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),o=t("superagent"),a=function(t){return t&&t.__esModule?t:{default:t}}(o),s=t("trendmd-meta-extractor"),u=function(){function t(e){var n=e.apiUrl,i=e.options,o=e.version,a=e.tag;if(r(this,t),this.apiUrl=n,this.options=i,this.loadingTimes={start:new Date},this.version=o,this.tag=a,this.options.journal_id)this.endpoint="/journals/"+this.options.journal_id+"/selectors",this.params={};else{this.endpoint="/journals/identification";var u=new s.MetaExtractor(window.document,{sources:["HighWire","DCSext","DublinCore","DCTerms","Prism","BEPress","EPrints","WolterKluwer","TandFonline"],tags:["doi","issn","journal_title","custom_id"]});this.params={doi:u.doi,issn:u.issn,url:this.options.url||window.location.href,custom_id:this.options.custom_id||u.custom_id}}}return i(t,[{key:"retrieve",value:function(t){var e=this;return a.default.get(this.apiUrl+this.endpoint).set(this.tag+"-widget-version",this.version).withCredentials().query(this.params).end(function(n,r){var i=new Date-e.loadingTimes.start;return"/journals/identification"===e.endpoint?e.loadingTimes.identification=i:e.loadingTimes.selectors=i,n||r.error?null:t(r.body.journal)})}}]),t}();n.default=u},{superagent:4,"trendmd-meta-extractor":7}],25:[function(t,e,n){"use strict";function r(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function t(t,e){var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!e||n.length!==e);r=!0);}catch(t){i=!0,o=t}finally{try{!r&&s.return&&s.return()}finally{if(i)throw o}}return n}return function(e,n){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return t(e,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),a=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),s=t("superagent"),u=function(t){return t&&t.__esModule?t:{default:t}}(s),c=function(){function t(e){var n=e.tag,r=e.relevancyUrl,o=e.loadingTimes,a=e.version;i(this,t),this.tag=n,this.eventsEndpoint="/events",this.attributes={articleId:"data-"+this.tag+"-id",journalId:"data-"+this.tag+"-journal-id",sponsored:"data-"+this.tag+"-sponsored",campaignId:"data-"+this.tag+"-campaign-id",ct:"data-"+this.tag+"-ct"},this.selectors={organic:"a[data-"+this.tag+'-sponsored="false"]',sponsored:"a[data-"+this.tag+'-sponsored="true"]'},this.relevancyUrl=r,this.version=a,this.loadingTimes=o,this.switches={},this.journalId=null,this.articleId=null,this._element=null,this.dtObj={},this.testID=null,this.concurrent=0}return a(t,[{key:"calculate",value:function(){this.calculateImpressions(),this.calculateRecommendations()}},{key:"calculateImpressions",value:function(){for(var t=[],e=[],n=this.nodes("organic"),r=0;r<n.length;r++)e.push(this.params(n[r])),t.push(n[r].getAttribute(this.attributes.ct));for(var i=[],o=this.nodes("sponsored"),a=0;a<o.length;a++)i.push(this.params(o[a])),t.push(o[a].getAttribute(this.attributes.ct));return this.log({"organic-impressions":e,"sponsored-impressions":i},{"loading-times":this.loadingTimes,dt:this.dtObj,testID:this.testID,ct:t})}},{key:"calculateRecommendations",value:function(){var t=this;Object.keys(this.selectors).forEach(function(e){if("all"!==e)for(var n=t.nodes(e),r=0;r<n.length;r++)t.addClickLogger(n[r],e)})}},{key:"addClickLogger",value:function(t,e){var n=this,i=t.getAttribute(this.attributes.ct);return t[this.listenMethod](this.listenEvent,function(){return n.log(r({},e+"-recommendations",[n.params(t)]),{dt:n.dtObj,testID:n.testID,ct:i})})}},{key:"nodes",value:function(t){return this.element.querySelectorAll(this.selectors[t])}},{key:"params",value:function(t){return{from_journal_id:this.journalId,from_article_id:this.articleId,to_journal_id:t.getAttribute(this.attributes.journalId),to_article_id:t.getAttribute(this.attributes.articleId),campaign_id:t.getAttribute(this.attributes.campaignId)}}},{key:"log",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments[2];return n.switches=this.switches||{},this.concurrent+=1,u.default.post(this.relevancyUrl+this.eventsEndpoint).set(this.tag+"-widget-version",this.version).withCredentials().send({events:t,misc:n}).end(function(t){e.concurrent-=1,"function"==typeof r&&r(t)})}},{key:"element",set:function(t){if(t){this._element=t;var e=t.addEventListener?["addEventListener","click"]:["attachEvent","onclick"],n=o(e,2);this.listenMethod=n[0],this.listenEvent=n[1]}},get:function(){return this._element}}]),t}();n.default=c},{superagent:4}],26:[function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),a=t("domready"),s=r(a),u=t("superagent"),c=r(u),l=t("trendmd-meta-extractor"),f=t("./Relevancy"),h=r(f),p=t("./ArticleHeader"),d=r(p),g=t("./JournalRetriever"),y=r(g),m=t("./Gdpr"),v=r(m),b=t("./Dt"),w=r(b);s.default.domready=s.default;var _=function(){function t(e){var n=this,r=e.tag,o=e.apiUrl,a=e.relevancyUrl,s=e.styleSheetUrl,u=e.dtConfig,c=e.options,l=e.version;i(this,t),this.tag=r,this.version=l,this.apiUrl=o,this.relevancyUrl=a,this.styleSheetUrl=s,this.dtConfig=u,this.options=c,this.loadingTimes={start:new Date},this.element=null,this.journal={},this.switches={},this._relevancy=this.relevancy(),this._retriever=this.journalRetriever(),this.dt=new w.default({dtConfig:this.dtConfig,queryParams:function(){return n.queryParams()},relevancy:this._relevancy,loadingTimes:this.loadingTimes}),this.gdpr=new v.default({tag:this.tag,relevancy:this._relevancy}),this._init()}return o(t,[{key:"relevancy",value:function(){return new h.default({tag:this.tag,relevancyUrl:this.relevancyUrl,loadingTimes:this.loadingTimes,version:this.version})}},{key:"metaExtractor",value:function(t,e){return new l.MetaExtractor(t,e)}},{key:"journalRetriever",value:function(){return new y.default({apiUrl:this.apiUrl,options:this.options,version:this.version,tag:this.tag})}},{key:"_init",value:function(){var t=this;s.default.domready(function(){t.loadingTimes.domReady=new Date-t.loadingTimes.start,t.retrieve(function(e){var n=document.querySelector(t.options.element),r=e.widgetPlacement?document.querySelector(e.widgetPlacement):null;t.element=r||n,t.insertPosition=e.widgetInsertPosition||null,t.wrapperStart=e.widgetWrapperStart||"",t.wrapperEnd=e.widgetWrapperEnd||"",t.element&&(t._relevancy.element=t.element,t.dt.addDt(),t.extractor=t.metaExtractor(document,e),t.show()),"function"==typeof t.options.cbRetrieve&&t.options.cbRetrieve()})})}},{key:"retrieve",value:function(t){var e=this;this._retriever.retrieve(function(n){e._retriever.loadingTimes.identification?e.loadingTimes.identification=e._retriever.loadingTimes.identification:e.loadingTimes.selectors=e._retriever.loadingTimes.selectors,e.journal=n,e.switches=n.switches||{},e.widgetEndpoint="/journals/"+n.id+"/similar",e.missingEndpoint="/journals/"+n.id+"/missing",e.articlesEndpoint="/journals/"+n.id+"/articles",e._relevancy.journalId=e.journal.id,e._relevancy.switches=e.switches,e.gdpr.journalId=e.journal.id,e.gdpr.switches=e.switches,e.dt.switches=e.switches,t(n)})}},{key:"show",value:function(){var t=this,e=this.queryParams();return this.isMissing(e)?this.missing():(this.addStyle(),this.article(e,function(e,n){if(!(e||n.error&&404!==n.status&&403!==n.status)){if(404===n.status)return void t.create();var r=new d.default(n.header[t.tag+"-article"]);t._relevancy.testID=n.header["x-testid"];var i=t.extractor.abstract?t.extractor.abstract.trim().length:0;if(r.id&&r.meta_dated&&(r.missing_meta||r.abstract<i)&&t.update(r.id),403!==n.status){var o=n.text.replace(/Pending(<span.*?),\s/gm,"$1"),a=t.wrapperStart+o+t.wrapperEnd;t.insertPosition?t.element.insertAdjacentHTML(t.insertPosition,a):t.element.innerHTML=a,t.loadingTimes.recos=new Date-t.loadingTimes.start,r.id&&(t._relevancy.articleId=r.id,t._relevancy.calculate()),t.gdpr.addGaTrackingCode(),"function"==typeof t.options.cb&&t.options.cb()}}}))}},{key:"article",value:function(t,e){return c.default.get(this.apiUrl+this.widgetEndpoint).set(this.tag+"-widget-version",this.version).withCredentials().query(t).end(e)}},{key:"missing",value:function(){this.nonMissingUrl()||c.default.post(this.apiUrl+this.missingEndpoint).set(this.tag+"-widget-version",this.version).send({url:this.options.url||window.location.href}).end()}},{key:"create",value:function(t){c.default.post(this.apiUrl+this.articlesEndpoint).set(this.tag+"-widget-version",this.version).send(this.storeParams()).end(t)}},{key:"update",value:function(t,e){c.default.put(""+this.apiUrl+this.articlesEndpoint+"/"+t).set(this.tag+"-widget-version",this.version).send(this.storeParams()).end(e)}},{key:"queryParams",value:function(){return this.params("pubmed_id","doi","title","authors","url","publication_year","publication_month")}},{key:"storeParams",value:function(){return this.params("pubmed_id","doi","title","authors","url","publication_year","publication_month","abstract")}},{key:"params",value:function(){for(var t=this,e={},n=arguments.length,r=Array(n),i=0;i<n;i++)r[i]=arguments[i];return-1!==r.indexOf("url")&&(e.url=this.options.url||window.location.href),r.forEach(function(n){"url"!==n&&(e[n]=t.checkParam(n,t.options[n]||t.extractor[n]))}),e}},{key:"checkParam",value:function(t,e){return"publication_year"===t?e>=1900&&e<=2100?e:null:"publication_month"===t?e>=1&&e<=12?e:null:e}},{key:"isMissing",value:function(t){return this.missingParameters(t)}},{key:"missingParameters",value:function(t){return!t.title&&!t.doi&&!t.pubmed_id}},{key:"nonMissingUrl",value:function(){return this.fileUrl()||this.googleCacheUrl()}},{key:"fileUrl",value:function(){return(this.options.url||window.location.href).match(/^file:\/\//)}},{key:"googleCacheUrl",value:function(){return(this.options.url||window.location.href).match(/^http:\/\/webcache\.googleusercontent\.com\/search/)}},{key:"addStyle",value:function(){var t=document.createElement("link");return t.rel="stylesheet",t.type="text/css",t.href=this.styleSheetUrl,t.media="all",document.getElementsByTagName("head")[0].appendChild(t)}}]),t}();n.default=_},{"./ArticleHeader":21,"./Dt":22,"./Gdpr":23,"./JournalRetriever":24,"./Relevancy":25,domready:1,superagent:4,"trendmd-meta-extractor":7}],27:[function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),o=t("./SimilarWidget"),a=function(t){return t&&t.__esModule?t:{default:t}}(o),s=function(){function t(e){var n=e.tag,i=e.apiUrl,o=e.relevancyUrl,a=e.styleSheetUrl,s=e.dtConfig,u=e.version;r(this,t),this.apiUrl=i,this.relevancyUrl=o,this.styleSheetUrl=a,this.dtConfig=s,this.version=u,this.tag=n,this._getInlineConfig(),this.inlineConfig&&this.register()}return i(t,[{key:"_getURLParam",value:function(t){var e=new RegExp("[?|&]"+t+"=([^&;]+?)(&|#|;|$)"),n=e.exec(window.location.search),r=!1;return n&&n.length&&(r=n[1].replace(/\+/g,"%20"),r=decodeURIComponent(n[1])),r}},{key:"_getInlineConfig",value:function(){var t=this,e=void 0,n=document.currentScript||function(){for(var e=document.getElementsByTagName("script"),n="",r=0;r<e.length;r++){var i=e[r];i.getAttribute("data-"+t.tag+"config")&&(n=i)}return n}();if(n&&(e=n.getAttribute("data-amp")),e){this.inlineConfig={title:this._getURLParam("title"),doi:this._getURLParam("doi"),journal_id:this._getURLParam("journalId"),issn:this._getURLParam("issn"),pubmed_id:this._getURLParam("pubmed"),url:this._getURLParam("url"),custom:this._getURLParam("custom"),element:"#"+this.tag+"-suggestions"},window.parent.postMessage({sentinel:"amp",type:"embed-size",height:document.body.scrollHeight},"*");for(var r=document.getElementsByClassName(this.tag+"-widget-list-item__link"),i=0;i<r.length;i++)r[i].setAttribute("target","_blank")}else n&&(this.inlineConfig=n.getAttribute("data-"+this.tag+"config"),this.inlineConfig&&(this.inlineConfig=this.inlineConfig.replace(/'/g,'"'),this.inlineConfig=JSON.parse(this.inlineConfig)))}},{key:"register",value:function(t){(t||this.inlineConfig)&&(this.widget=this._similarWidget({apiUrl:this.apiUrl,relevancyUrl:this.relevancyUrl,styleSheetUrl:this.styleSheetUrl,options:t||this.inlineConfig,dtConfig:this.dtConfig,version:this.version,tag:this.tag}))}},{key:"gdpr",value:function(t){return this.widget?"function"==typeof t&&t():this.widget=this._similarWidget({apiUrl:this.apiUrl,relevancyUrl:this.relevancyUrl,styleSheetUrl:this.styleSheetUrl,options:{journal_id:1,element:"rnd-"+Math.floor(1e5*Math.random()),cbRetrieve:function(){"function"==typeof t&&t()}},dtConfig:!1,version:this.version,tag:this.tag}),this.widget.gdpr}},{key:"_similarWidget",value:function(t){return new a.default(t)}}]),t}();n.default=s},{"./SimilarWidget":26}],28:[function(t,e,n){(function(e){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.TrendMD=n.config=void 0;var r=t("../Widget"),i=function(t){return t&&t.__esModule?t:{default:t}}(r),o=n.config={tag:"trendmd",apiUrl:"https://www.trendmd.com",relevancyUrl:"https://academia.trendmd.com",styleSheetUrl:"https://trendmd.s3.amazonaws.com/trendmd.min.css",dtConfig:{origin:"https://www.medtargetsystem.com",path:"/beacon/portal-lite"},version:"290918-2"},a=n.TrendMD=i.default;e.TrendMD=new a(o)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../Widget":27}]},{},[28]);