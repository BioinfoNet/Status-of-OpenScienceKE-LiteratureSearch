/*! render-assets-books 2018-11-26 */

if("undefined"!=typeof jQuery&&void 0===NcbiBooksToc)var NcbiBooksToc=function(t){function l(){if(0!=jQuery(".bktoc_all_cntnr").length){var t=jQuery(".bktoc_all_exp"),s=jQuery(".bktoc_all_clps"),l="inactive";0==jQuery("ul.bktoc_lst_clps").length?t.addClass(l):t.removeClass(l),0==jQuery("ul.bktoc_lst_exp").length?s.addClass(l):s.removeClass(l)}}jQuery(document).ready(function(){jQuery(".body-content ul.toc").filter(function(){return sessionStorage.getItem(jQuery(this).attr("id"))}).bkSwitchListClass("init"),jQuery(".source").bkInitToc(),jQuery(document).on("click","a.bktoc_tgllnk",function(){var t=jQuery(this).siblings("ul");jQuery(t).is(":hidden")?t.slideDown().bkSwitchListClass():t.slideUp().bkSwitchListClass(),jQuery(this).bkSwitchLinkClass(),l()}),jQuery(".bktoc_all_cntnr a").click(function(){var t=jQuery(this);return t.hasClass("inactive")||(t.hasClass("bktoc_all_exp")?(jQuery.each(jQuery(".bktoc_lst_clps"),function(){jQuery(this).show().bkSwitchListClass()}),jQuery("a.bktoc_tgllnk_clps").bkSwitchLinkClass()):(jQuery.each(jQuery(".bktoc_lst_exp"),function(){jQuery(this).hide().bkSwitchListClass()}),jQuery("a.bktoc_tgllnk_exp").bkSwitchLinkClass()),l()),!1})}),jQuery.fn.bkSwitchListClass=function(t){var s,l=jQuery(this);l.toggleClass("bktoc_lst_clps"),l.toggleClass("bktoc_lst_exp"),id=l.attr("id"),id&&"init"!=t&&(s=id,sessionStorage.getItem(s)?sessionStorage.removeItem(s):sessionStorage.setItem(s,1))},jQuery.fn.bkSwitchLinkClass=function(){el=jQuery(this),el.toggleClass("bktoc_tgllnk_clps"),el.toggleClass("bktoc_tgllnk_exp")},jQuery.fn.bkInitToc=function(){jQuery(".bktoc_lst_clps").hide().parent().prepend('<a class="bktoc_tgllnk bktoc_tgllnk_clps"></a>'),jQuery(".bktoc_lst_exp").parent().prepend('<a class="bktoc_tgllnk bktoc_tgllnk_exp"></a>'),jQuery(".bktoc_all_cntnr").show(),l();var t=jQuery("a#bk_current_entry"),s=t.parents("ul.bktoc_lst_clps");t&&s&&(t.siblings("ul.bktoc_lst_clps").show().bkSwitchListClass(),t.prev("a.bktoc_tgllnk_clps").bkSwitchLinkClass(),s.show().bkSwitchListClass(),s.siblings("a.bktoc_tgllnk_clps").bkSwitchLinkClass())}}(jQuery);