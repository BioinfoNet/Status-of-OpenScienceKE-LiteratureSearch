(function(t){Drupal.behaviors.HighWireFoxycart={attach:function(n,r){t(document,n).one("ready",function(){if(Drupal.settings.user_uid!==0){FC.onLoad=function(){FC.client.on("ready.done",function(){var n=FC.json.session_id,d=a("highwire-foxycart-savesession"),u=a("highwire-foxycart-logged-in");if(d&&!u){t.ajax({url:"/highwire/foxycart/savesession",type:"POST",dataType:"json",}).done(function(t){e("highwire-foxycart-savesession");var a=Drupal.settings.hw_fc_cookie_domain,i="highwire-foxycart-logged-in=true";if(a!==""){i+=";domain="+a+";path=/"};document.cookie=i})};var l=a("highwire-foxycart-reload"),s=a("highwire-foxycart-add");e("highwire-foxycart-add");e("highwire-foxycart-reload");c(n);if(s==""){return};var h=[];FC.client.request("https://"+Drupal.settings.foxycart_subdomain+"/cart?cart=view&output=json&fcsid="+n).done(function(t){if(t.items.length>0){t.items.forEach(function(t){itemApath=i(t.options,"apath");h.push(itemApath)})}});var f=decodeURIComponent(s).split("|||");t.get("/highwire/foxycart/getattr/"+f[1],function(i){var a=[];for(var e in i){if((t.inArray(i[e].attributes.apath,h))==-1){a.push(t.param(i[e].hmac))}};FC.client.request("https://"+Drupal.settings.foxycart_subdomain+"/cart?"+a.join("&")+"&fcsid="+n).done(function(t){r(n);o(n);FC.sidecart.show()})})});FC.client.on("ready.done",function(t,i){var a=FC.json.session_id;r(a);o(a);i()});FC.client.on("cart-item-remove",function(a){var r=FC.json.session_id,e=a.id;FC.client.request("https://"+Drupal.settings.foxycart_subdomain+"/cart?cart=view&output=json&fcsid="+r).done(function(a){var o=a.items,r=t("form#highwire-foxycart-add-to-cart-toc-form input[name=\"tocnid\"]").val();o.forEach(function(a){if(a.id==e){var o=i(a.options,"Apath"),c=i(a.options,"Nid");if(r==c){t("div#edit-metaselection.form-radios",n).show();t(".highwire-foxycart-add-to-cart-toc-components",n).show();t("input[type=submit]",n).show();t("input#edit-metaselection-components",n).attr("checked","checked").trigger("change");t("a.highwire-foxycart-in-cart",n).remove()};if(o!==null&&c!==null){if(Drupal.settings.highwire_foxycart_add_to_cart_link){var s={text:Drupal.settings.highwire_foxycart_add_to_cart_link.text,type:Drupal.settings.highwire_foxycart_add_to_cart_link.type,apath:Drupal.settings.highwire_foxycart_add_to_cart_link.apath,}};if(Drupal.settings.HighWireFoxycart){var s={text:Drupal.settings.HighWireFoxycart.link_text,icon:Drupal.settings.HighWireFoxycart.link_icon,apath:o,nid:c,}};t.ajax({url:"/highwire/foxycart/add_to_cart_ajax_callback",type:"POST",dataType:"json",data:{"item":s},}).done(function(i){t(".highwire-foxycart-in-cart[data-apath=\""+o+"\"]",n).replaceWith(i);Drupal.behaviors.HighWireFoxycartAddToCartLink.attach()})}}})})});FC.client.on("cart-item-remove.done",function(t,i){i();var a=FC.json.session_id;o(a);r(a)});FC.client.on("cart-update.done",function(t,i){i();var a=FC.json.session_id;r(a);o(a)});FC.client.on("cart-item-quantity-update.done",function(t,i){i();var a=FC.json.session_id;r(a);o(a);Drupal.behaviors.HighWireFoxycartAddToCartLink.attach()})}};function r(a){var e=0;FC.client.request("https://"+Drupal.settings.foxycart_subdomain+"/cart?cart=view&output=json&fcsid="+a).done(function(r){e=r.items.length;var o=[];if(e>0){r.items.forEach(function(t){o.push(i(t.options,"Nid"))});articleNids="";for(var c=0;c<o.length;c++){t(".highwire-foxycart-add-to-cart-ahah[data-parent-id=\""+o[c]+"\"]",n).each(function(){var i=t(this,n).parents(".highwire-article-citation").attr("data-node-nid");if(i!=null){if(articleNids==""){articleNids=i}
else{articleNids+=","+i}}});if(articleNids!=""){t.get("/highwire/foxycart/getattr/"+articleNids,function(i){for(var r in i){var e=i[r].attributes;if(e.price!=0){if(e.apath!=null){t(".highwire-foxycart-add-to-cart-ahah[data-apath='"+e.apath+"'] span.highwire-foxycart-add-to-cart",n).replaceWith("<a href='https://"+Drupal.settings.foxycart_subdomain+"/cart?cart=view&fcsid="+a+"' class='highwire-foxycart-in-cart' data-apath='"+e.apath+"'>Item in cart</a>")}}}})}};r.items.forEach(function(e){var r=null;r=i(e.options,"Apath");if(r!==null){t(".highwire-foxycart-add-to-cart-ahah[data-apath='"+r+"'] span.highwire-foxycart-add-to-cart",n).replaceWith("<a href='https://"+Drupal.settings.foxycart_subdomain+"/cart?cart=view&fcsid="+a+"' class='highwire-foxycart-in-cart' data-apath='"+r+"'>Item in cart</a>")}});t("form#highwire-foxycart-add-to-cart-toc-form").each(function(){var e=t(this),n=e.find("input[name='tocnid']").val();r.items.forEach(function(r){var o=null;o=i(r.options,"Nid");if(o!==null){if(o==n){e.find("div#edit-metaselection.form-radios").hide();e.find(".highwire-foxycart-add-to-cart-toc-components").hide();e.find("input[type=submit]").hide();e.find("#edit-metaselection-toc").hide();e.find("button[type=submit]").hide();if(!t("a.highwire-foxycart-in-cart[data-tocnid='"+n+"']").length){e.append("<a href='https://"+Drupal.settings.foxycart_subdomain+"/cart?cart=view&fcsid="+a+"' class='highwire-foxycart-in-cart' data-tocnid='"+n+"'>Item in cart</a>")}};e.find("input[type='checkbox'][value='"+o+"']").attr("disabled",!0)}})})}})};function o(i){t(".menu a[href=\"/cart\"], .menu-path-cart a[href=\"/cart\"]",n).each(function(){t(this,n).addClass("highwire-foxycart-menu-link");t(this,n).attr("href","https://"+Drupal.settings.foxycart_subdomain+"/cart?cart=view&fcsid="+i);t(this,n).click(function(){FC.sidecart.show();return!1})});FC.client.request("https://"+Drupal.settings.foxycart_subdomain+"/cart?cart=view&output=json&fcsid="+i).done(function(i){var a=0;if(i.items.length!=="undefined"){a=i.items.length};t(".highwire-foxycart-menu-link",n).each(function(){t(this,n).children(".highwire-foxycart-num-items").remove();if(a>0){if(a===1){t(this,n).append("<span class=\"highwire-foxycart-num-items\"> ("+a+" item)</span>")}
else{t(this,n).append("<span class=\"highwire-foxycart-num-items\"> ("+a+" items)</span>")};t(this).parent().show()}
else if(Drupal.settings.foxycart_always_show_cart_link==0){t(this).parent().hide()}})})};function c(a){FC.client.request("https://"+Drupal.settings.foxycart_subdomain+"/cart?cart=view&output=json&fcsid="+a).done(function(e){var h=e.items.length,s=[],c="",n=1;if(h>0){e.items.forEach(function(a){itemApath=i(a.options,"Apath");itemId=a.id;if((t.inArray(itemApath,s))!==-1){c+="&"+n+":id="+itemId+"&"+n+":quantity=0";n++}
else{s.push(itemApath)}});FC.client.request("https://"+Drupal.settings.foxycart_subdomain+"/cart?cart=update"+c).done(function(t){r(a);o(a)})}})}})}};Drupal.behaviors.HighWireFoxycartAddToCartLink={attach:function(i,a){var n=1,e=[];t(".highwire-foxycart-add-to-cart-ahah",i).each(function(){t(this).attr("data-foxy-id",n);n++;var i={id:t(this).data("foxy-id"),apath:t(this).data("apath"),text:t(this).data("text"),type:t(this).data("type"),font_icon:t(this).data("font-icon")};e.push(i)});if(e.length>0){t.ajax({url:"/highwire/foxycart/add_to_cart_ahah",type:"POST",dataType:"json",data:{"items":e},}).done(function(i){for(var a in i){t(".highwire-foxycart-add-to-cart-ahah[data-foxy-id='"+a+"']").html(i[a])}})}}};Drupal.behaviors.HighWireFoxycartAddToCartTOC={attach:function(i,a){t(".highwire-foxycart-add-to-cart-toc-components[data-always-on=1]",i).each(function(){self=this;t(self).find("input").click(function(){if(t(self).find("input:checked").length==0){t(self).closest("form").find(".form-item-metaselection input[value=toc]").prop("checked",!0)}
else{t(self).closest("form").find(".form-item-metaselection input[value=components]").prop("checked",!0)}});t(self).closest("form").find(".form-item-metaselection input[value=toc]").click(function(){t(self).find("input").prop("checked",!1)})});t("form#highwire-foxycart-add-to-cart-toc-form",i).submit(function(i){if(t(this).find(".highwire-foxycart-add-to-cart-toc-components input:checked").length>5){alert("Cannot add more than 5 items to your cart at once. Please select a smaller number of items.");i.preventDefault();return!1}});t("form#highwire-foxycart-add-to-cart-toc-form #edit-components-select .form-type-checkbox").each(function(){if(t(this).find("span.catalog-price-free").length){t(this).find("input[type=checkbox]").attr("disabled",!0)}})}};var a=function(t){var n=t+"=",e=document.cookie.split(";");for(var i=0;i<e.length;i++){var a=e[i].trim();if(a.indexOf(n)==0)return a.substring(n.length,a.length)};return""},e=function(t){document.cookie=t+"=; expires=Thu, 01 Jan 1970 00:00:00 GMT; path=/;"};function i(t,i){var a=null;t.forEach(function(t){if(t.name===i){a=t.value};if(a===null){i=i.toLowerCase();if(t.name===i){a=t.value}}});return a}})(jQuery);;Drupal.highwireResponsive=Drupal.highwireResponsive||{};(function(e){var i='mobile',n=i,r=i,u=[],s=0,o=!1,p=function(e){r=n||i;n=e;t()},a=function(e){r=e;var o=u.indexOf(e);n=u[o-1]||i;t()};Drupal.highwireResponsive.getCurrentLayout=function(e){if(typeof e=='undefined'){e=!1};if(o){if(!e&&Drupal.highwireResponsive.isCurrentLayoutMobile(n)){return i}
else{return n}}
else if(typeof Drupal.omega!='undefined'){return Drupal.omega.getCurrentLayout()}};Drupal.highwireResponsive.getPreviousLayout=function(e){if(typeof e=='undefined'){e=!1};if(o){if(!e&&Drupal.highwireResponsive.isCurrentLayoutMobile(r)){return i}
else{return r}}
else if(typeof Drupal.omega!='undefined'){return Drupal.omega.getPreviousLayout()}};Drupal.highwireResponsive.isCurrentLayoutMobile=function(e){e=e||i;var n=Drupal.highwireResponsive.getMobileLayouts();if(n.indexOf(e)!=-1){return!0}
else{return!1}};Drupal.highwireResponsive.getMobileLayouts=function(){return['mobile','zero','xsmall']};var t=function(){e('body').removeClass('hw-responsive-layout-'+r).addClass('hw-responsive-layout-'+n);e.event.trigger('highwireResponsiveLayoutTransition',{from:r,to:n})};Drupal.behaviors.highwireResponsiveMediaQueries={attach:function(i,r){if(typeof Drupal.settings.highwireResponsive!='undefined'&&Drupal.settings.highwireResponsive.enquire_enabled===1&&Drupal.settings.highwireResponsive.breakpoints_configured===1){if(typeof Drupal.settings.highwireResponsive.breakpoints!='undefined'){o=!0}};if(o){var n=Drupal.settings.highwireResponsive.breakpoints;e.each(n,function(e,i){u[s]=e;s++;enquire.register(i,{match:function(){p(e)},unmatch:function(){a(e)}})});e(window,i).bind('load',function(){t()})}}}})(jQuery);