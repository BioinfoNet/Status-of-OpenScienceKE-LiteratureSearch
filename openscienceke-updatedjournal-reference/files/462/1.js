(window.webpackJsonp=window.webpackJsonp||[]).push([[1],{638:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n(662);Object.defineProperty(t,"default",{enumerable:!0,get:function(){return function(e){return e&&e.__esModule?e:{default:e}}(o).default}})},650:function(e,t,n){var o;!function(r,i,a){"use strict";var l=function(){if(!(this instanceof l)){var e=new l;return e.init.call(e,Array.prototype.slice.call(arguments))}var t,n=null,o={includeEmptyValuedElements:!1,w3cSuccessfulControlsOnly:!1},a=/[^\[\]]+|\[\]/g,s=null;function u(e){if(e&&"object"==typeof e)return Object.keys(e).filter(function(e){return!isNaN(parseInt(e,10))}).splice(-1)[0]}function c(e){var t=u(e);return"string"==typeof t?parseInt(t,10)+1:0}function d(e){if("object"!=typeof e||null===e)return 0;var t,n=0;if("function"==typeof Object.keys)n=Object.keys(e).length;else for(t in e)e.hasOwnProperty(t)&&n++;return n}function f(e){return"INPUT"===e.nodeName&&"radio"===e.type}function _(e){return"INPUT"===e.nodeName&&"checkbox"===e.type}function p(e){return"SELECT"===e.nodeName&&"select-multiple"===e.type}function g(e){return e.checked}function h(e){if(f(e))return!!g(e)&&e.value;if(_(e))return!!g(e)&&e.value;if(function(e){return"INPUT"===e.nodeName&&"file"===e.type}(e))return!(!s.enctype||"multipart/form-data"!==s.enctype)&&(function(e){return r.FileList&&e.files instanceof r.FileList}(e)&&e.files.length>0?e.files:!(!e.value||""===e.value)&&e.value);if(function(e){return"TEXTAREA"===e.nodeName}(e))return!(!e.value||""===e.value)&&e.value;if(function(e){return"SELECT"===e.nodeName&&"select-one"===e.type}(e))return e.value&&""!==e.value?e.value:!(!e.options||!e.options.length||""===e.options[0].value)&&e.options[0].value;if(p(e)){if(e.options&&e.options.length>0){var t=[];return function(e,t){if([].forEach)return[].forEach.call(e,t);var n;for(n=0;n<e.length;n++)t.call(e,e[n],n)}(e.options,function(e){e.selected&&t.push(e.value)}),o.includeEmptyValuedElements?t:!!t.length&&t}return!1}return function(e){return"BUTTON"===e.nodeName&&"submit"===e.type}(e)?e.value&&""!==e.value?e.value:!(!e.innerText||""===e.innerText)&&e.innerText:void 0!==e.value&&(o.includeEmptyValuedElements?e.value:""!==e.value&&e.value)}function m(e,n,o,r){var i=n[0];if(f(e))return!1!==o?(r[i]=o,o):void 0;if(_(e)){if(!1===o)return;if(function(e){var n=e.name;return Array.prototype.filter.call(t,function(e){return e.name===n}).length>1}(e))return r[i]||(r[i]=[]),r[i].push(o);r[i]=o}if(p(e)){if(!1===o)return;r[i]=o}return r[i]=o,o}function b(e,t,n,o){var r=t[0];return t.length>1?"[]"===r?(o[c(o)]={},b(e,t.splice(1,t.length),n,o[function(e){var t=u(e);return"string"==typeof t?parseInt(t,10):0}(o)])):o[r]&&d(o[r])>0?b(e,t.splice(1,t.length),n,o[r]):(o[r]={},b(e,t.splice(1,t.length),n,o[r])):1===t.length?"[]"===r?(o[c(o)]=n,o):(m(e,t,n,o),o):void 0}return{init:function(e){return!(!e||"object"!=typeof e||!e[0])&&(n=e[0],void 0!==e[1]&&d(e[1])>0&&function(e,t){var n;for(n in t)t.hasOwnProperty(n)&&(e[n]=t[n])}(o,e[1]),!!function(){switch(typeof n){case"string":s=i.getElementById(n);break;case"object":(function(e){return!!(e&&"object"==typeof e&&"nodeType"in e&&1===e.nodeType)})(n)&&(s=n)}return s}()&&!!(t=s.querySelectorAll("input, textarea, select")).length&&function(){var e,n,r,i=0,l={};for(i=0;i<t.length;i++)!(n=t[i]).name||""===n.name||n.disabled||f(n)&&!g(n)||(!1!==(r=h(n))||o.includeEmptyValuedElements)&&(1===(e=n.name.match(a)).length&&m(n,e,r||"",l),e.length>1&&b(n,e,r||"",l));return d(l)>0&&l}())}}};void 0===(o=function(){return l}.call(t,n,t,e))||(e.exports=o)}(window,document)},651:function(e,t){e.exports=function(e,t,n,o){for(var r=e.length,i=n+(o?1:-1);o?i--:++i<r;)if(t(e[i],i,e))return i;return-1}},653:function(e,t,n){var o=n(651),r=n(654),i=n(655);e.exports=function(e,t,n){return t==t?i(e,t,n):o(e,r,n)}},654:function(e,t){e.exports=function(e){return e!=e}},655:function(e,t){e.exports=function(e,t,n){for(var o=n-1,r=e.length;++o<r;)if(e[o]===t)return o;return-1}},657:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=function(e){return e&&e.__esModule?e:{default:e}}(n(667)),r=n(4),i=n(670);t.default=(0,r.connect)(i.mapStateToProps,i.mapDispatchToProps)(o.default)},658:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=function(e){return e&&e.__esModule?e:{default:e}}(n(671)),r=n(4),i=n(674);t.default=(0,r.connect)(null,i.mapDispatchToProps)(o.default)},662:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=h(n(663)),r=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),i=h(n(0)),a=h(n(1)),l=h(n(3)),s=h(n(5)),u=h(n(650)),c=h(n(6)),d=h(n(89)),f=h(n(161)),_=h(n(9)),p=h(n(657)),g=h(n(658));function h(e){return e&&e.__esModule?e:{default:e}}n(675);var m=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.TYPE="login",n.enclosing_class("auto__shared_modals_login"),n.state={errors:[],hidden_error:"",loading:!1},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,f.default),r(t,[{key:"componentDidMount",value:function(){var e=this.props,t=e.loc,n=e.page;this.track_rats("signup_lightbox:view",{loc:t,page:n,type:this.TYPE})}},{key:"componentDidUpdate",value:function(e,t){if((0,o.default)(this.state.errors,t.errors).length>0){var n="";this.state.errors.forEach(function(e){n+=e.message+" "}),this.setState({hidden_error:n})}}},{key:"track_rats",value:function(e,n){Object.assign({loc:this.props.loc,page:"doc_page",type:"join"},n);(function e(t,n,o){null===t&&(t=Function.prototype);var r=Object.getOwnPropertyDescriptor(t,n);if(void 0===r){var i=Object.getPrototypeOf(t);return null===i?void 0:e(i,n,o)}if("value"in r)return r.value;var a=r.get;return void 0!==a?a.call(o):void 0})(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"track_rats",this).call(this,e,n)}},{key:"validate",value:function(){var e=[];return this.email_input.value.trim()||e.push({input:"login_or_email",message:l.default.t("shared.login.join_lightbox.please_enter_an_email")}),this.password_input.value.trim()||e.push({input:"login_password",message:l.default.t("webpack.doc_page.src.shared.modals.login.login.please_enter_a_passowrd")}),e.length&&this.setState({errors:e,loading:!1}),!e.length}},{key:"handle_error",value:function(e){var t=e.msg||l.default.t("shared.login.join_lightbox.we_couldn_t_complete_your_request"),n=e.input_name,o=[{input:n,message:t}];this.track_rats("signup_lightbox:error:view",{error_type:"invalid_"+n}),this.setState({errors:o,loading:!1})}},{key:"handle_success",value:function(){var e=this;this.track_rats("signup_lightbox:successful_submission:view"),this.props.create_modal({component_loader:function(){return new Promise(function(e){n.e(0).then(function(t){e(n(639))}.bind(null,n)).catch(n.oe)})},redirect_method:function(){e.close();var t=window.location.href;e.props.next_url&&(t=e.props.next_url),"download"===e.props.login_params.source&&(window.location.hash="#download",t=window.location.href),window.setTimeout(function(){window.location=t,e.props.next_url||window.location.reload()},50)},sub_title:l.default.t("shared.login.loading_lightbox.now_bringing_you_back"),title:l.default.t("shared.login.loading_lightbox.sign_in_successful"),user_dismiss:!1})}},{key:"handle_submit_response",value:function(e,t,n){n=JSON.parse(n),e?this.setState({loading:!1,errors:[{input:null,message:l.default.t("shared.login.join_lightbox.we_couldn_t_complete_your_request")}]}):n.errors&&n.errors.length?this.handle_error(n.errors[0]):this.handle_success()}},{key:"submit",value:function(){_.default[this.form.method]({url:this.form.action,body:Object.assign((0,u.default)(this.form),{signup_location:window.location.href,login_params:this.props.login_params})},this.handle_submit_response.bind(this))}},{key:"handle_submit",value:function(e){if(e.preventDefault(),this.track_rats("signup_lightbox:join:submit"),!this.validate())return e.stopPropagation(),!1;this.setState({loading:!0,errors:[]},this.submit)}},{key:"handle_forgot_password_click",value:function(e){var t=this;e.preventDefault(),this.track_rats("signup_lightbox:forgot_password:click"),this.props.create_modal({component_loader:function(){return new Promise(function(e){n.e(17).then(function(t){e(n(773))}.bind(null,n)).catch(n.oe)})},props_loader:function(){return Promise.resolve(t.props)},handle_load_complete:function(){return t.close()},focus_target:this.props.focus_target})}},{key:"handle_show_join_click",value:function(e){var t=this;e.preventDefault(),this.props.create_join_modal({props_loader:function(){return Promise.resolve(t.props)},handle_load_complete:function(){return t.close()}})}},{key:"render_facebook_button",value:function(){var e=this.props,t=e.account_settings_path,n=e.facebook_permissions,o=e.facebook_session_path,r=e.id,a=e.login_params;return i.default.createElement(p.default,{account_settings_path:t,facebook_permissions:n,facebook_session_path:o,handle_success:this.handle_success,label:l.default.t("shared.login.base_lightbox.continue_with_facebook"),login_params:a,modal_id:r,type:"login"})}},{key:"render_google_button",value:function(){var e=this.props,t=e.account_settings_path,n=e.google_client_id,o=e.google_session_path,r=e.id,a=e.login_params;return i.default.createElement(g.default,{account_settings_path:t,google_client_id:n,google_session_path:o,handle_success:this.handle_success,label:l.default.t("shared.login.base_lightbox.continue_with_google"),login_params:a,modal_id:r,type:"login"})}},{key:"render_social_logins",value:function(){return i.default.createElement(i.default.Fragment,null,i.default.createElement("div",{className:"facebook_row"},this.render_facebook_button()),i.default.createElement("div",{className:"google_row"},this.render_google_button()),i.default.createElement("div",{className:"break"},i.default.createElement("span",null,l.default.t("shared.login.join_lightbox.or_with_email"))))}},{key:"render_hidden_errors",value:function(){return i.default.createElement("div",{id:"hidden_errors",className:"visually_hidden","aria-live":"polite","aria-atomic":"true"},this.state.hidden_error)}},{key:"render_header",value:function(){return i.default.createElement("div",null,this.render_modal_title(l.default.t("shared.login.join_lightbox.sign_in_")))}},{key:"render_form",value:function(){var e=this;return i.default.createElement("form",{action:this.props.login_path,method:"post",onSubmit:this.handle_submit,ref:function(t){return e.form=t}},i.default.createElement("fieldset",null,i.default.createElement("legend",{className:"visually_hidden"},l.default.t("shared.login.join_lightbox.sign_in_with_email")),i.default.createElement("div",{className:"inputs"},i.default.createElement(d.default,{className:"input",errors:this.state.errors,hide_required:!0,label:l.default.t("shared.login.join_lightbox.email"),name:"login_or_email",input_ref:function(t){return e.email_input=t},required:!0,type:"text"}),i.default.createElement(d.default,{className:"input",errors:this.state.errors,hide_required:!0,label:l.default.t("shared.login.join_lightbox.password"),name:"login_password",input_ref:function(t){return e.password_input=t},required:!0,type:"password"})),i.default.createElement("div",{className:"form_options"},i.default.createElement("label",{className:"remember_me"},i.default.createElement("input",{type:"checkbox",name:"rememberme",defaultChecked:!0}),i.default.createElement("span",{className:"label_text"},l.default.t("shared.login.join_lightbox.remember_me")))),i.default.createElement("div",{className:"button_container"},i.default.createElement(c.default,{type:"submit",className:(0,s.default)("submit_btn",{loading:this.state.loading}),text:l.default.t("shared.login.join_lightbox.sign_in"),disabled:this.state.loading})),i.default.createElement("a",{href:"#",className:"forgot_password",onClick:this.handle_forgot_password_click},l.default.t("shared.login.join_lightbox.forgot_password")),i.default.createElement("div",{className:"login_alt"},l.default.t("shared.login.join_lightbox.new_to_scribd")+" ",i.default.createElement("a",{href:"#",className:"join_today_link last_lb_item",onClick:this.handle_show_join_click},l.default.t("shared.login.join_lightbox.sign_up")))))}},{key:"render_content",value:function(){return i.default.createElement(i.default.Fragment,null,this.render_header(),this.render_social_logins(),this.render_hidden_errors(),this.render_form())}}]),t}();m.propTypes={account_settings_path:a.default.string.isRequired,facebook_permissions:a.default.string.isRequired,facebook_session_path:a.default.string.isRequired,forgot_password_path:a.default.string.isRequired,google_client_id:a.default.string.isRequired,google_session_path:a.default.string.isRequired,in_eu:a.default.bool.isRequired,login_path:a.default.string.isRequired,login_signup_path:a.default.string.isRequired,static_privacy_path:a.default.string.isRequired,static_terms_path:a.default.string.isRequired,subscribe_url:a.default.string.isRequired,loc:a.default.string.isRequired,page:a.default.string.isRequired,login_params:a.default.object},m.defaultProps={login_params:{}},t.default=m},663:function(e,t,n){var o=n(664),r=n(173),i=n(56),a=n(168),l=i(function(e,t){return a(e)?o(e,r(t,1,a,!0)):[]});e.exports=l},664:function(e,t,n){var o=n(170),r=n(665),i=n(666),a=n(38),l=n(90),s=n(171),u=200;e.exports=function(e,t,n,c){var d=-1,f=r,_=!0,p=e.length,g=[],h=t.length;if(!p)return g;n&&(t=a(t,l(n))),c?(f=i,_=!1):t.length>=u&&(f=s,_=!1,t=new o(t));e:for(;++d<p;){var m=e[d],b=null==n?m:n(m);if(m=c||0!==m?m:0,_&&b==b){for(var v=h;v--;)if(t[v]===b)continue e;g.push(m)}else f(t,b,c)||g.push(m)}return g}},665:function(e,t,n){var o=n(653);e.exports=function(e,t){return!(null==e||!e.length)&&o(e,t,0)>-1}},666:function(e,t){e.exports=function(e,t,n){for(var o=-1,r=null==e?0:e.length;++o<r;)if(n(t,e[o]))return!0;return!1}},667:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),r=f(n(0)),i=f(n(1)),a=f(n(3)),l=f(n(5)),s=f(n(2)),u=f(n(6)),c=f(n(9)),d=n(94);function f(e){return e&&e.__esModule?e:{default:e}}n(668);var _=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.enclosing_class("auto__shared_modals_login_facebook_button"),n.state={facebook_failed:!1,facebook_loaded:!1,loading:!1},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,s.default),o(t,[{key:"componentDidMount",value:function(){(0,d.setupFacebook)(this.props.facebook_app_id)}},{key:"login",value:function(e){var t=this,o=e.authResponse,r=this.props,i=r.account_settings_path,a=r.close_modal,l=r.facebook_session_path,s=r.handle_success,u=r.login_params,d=r.modal_id,f=r.optin;if(o){var _={};Object.keys(o).forEach(function(e){_["facebook_session["+e+"]"]=o[e]}),u&&Object.keys(u).forEach(function(e){_[e]=u[e]}),_.optin=f,_.singup_location=window.location.href,c.default.post({type:"post",url:l,dataType:"json",body:_},function(e,o,r){r=JSON.parse(r),e||!r.success?t.setState({loading:!1,facebook_failed:!0}):r.email_missing?t.props.create_modal({component_loader:function(){return new Promise(function(e){n.e(3).then(function(t){e(n(661))}.bind(null,n)).catch(n.oe)})},props_loader:function(){return Promise.resolve({type:"Google",account_settings_path:i})},user_dismiss:!1,handle_load_complete:function(){return a(d)}}):r.redirect_to?window.location=r.redirect_to:s()})}else this.setState({loading:!1,facebook_failed:!0})}},{key:"handle_click",value:function(e){var t=this;e.preventDefault(),"function"==typeof this.props.handle_click&&this.props.handle_click(),this.track_rats("signup_lightbox:facebook_btn:click"),this.state.facebook_failed?this.props.create_facebook_loading_error():window.FB?this.setState({loading:!0},function(){window.FB.login(t.login,{scope:t.props.facebook_permissions})}):this.setState({loading:!0})}},{key:"render_error",value:function(){if(this.state.facebook_failed)return r.default.createElement("p",{className:"fb_fail_message error_msg"},a.default.t("shared.login.facebook_login_button.sorry_we_are_unable_to_log"),r.default.createElement("br",null),a.default.t("shared.login.facebook_login_button.please_try_again_later"))}},{key:"render_button",value:function(){return r.default.createElement(u.default,{className:(0,l.default)("facebook no_spinner",{loading:this.state.loading}),disabled:this.state.loading,onClick:this.handle_click},r.default.createElement("span",{"aria-hidden":"true",className:"icon icon-ic_facebook"}),r.default.createElement("span",{className:"fb_btn_label",key:"label"},this.props.label||a.default.t("shared.login.facebook_login_button.sign_in_with_facebook")),r.default.createElement("span",{key:"hidden",className:"visually_hidden"}," "+a.default.t("shared.login.facebook_login_button.opens_in_a_new_window")))}},{key:"render_content",value:function(){return r.default.createElement(r.default.Fragment,null,this.render_button(),this.render_error())}}]),t}();_.propTypes={account_settings_path:i.default.string.isRequired,facebook_permissions:i.default.string.isRequired,facebook_session_path:i.default.string.isRequired,label:i.default.string.isRequired,type:i.default.string.isRequired,login_params:i.default.object,optin:i.default.oneOf(["y","n"]),close_modal:i.default.func,create_modal:i.default.func,facebook_app_id:i.default.string},_.defaultProps={login_params:{},optin:null},t.default=_},668:function(e,t,n){},670:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.mapDispatchToProps=t.mapStateToProps=void 0;var o=n(13),r=n(7);t.mapStateToProps=function(e){return{facebook_app_id:e.global.config.facebook.app_id}},t.mapDispatchToProps=function(e){return{create_modal:function(t){e((0,r.create_modal)(t))},close_modal:function(t){e((0,r.close_modal)(t))},create_facebook_loading_error:function(){e((0,o.create_flash)({type:"error",children:"Facebook login failed, please try again"}))}}}},671:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=f(n(23)),r=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),i=f(n(0)),a=f(n(1)),l=f(n(3)),s=f(n(5)),u=f(n(2)),c=f(n(6)),d=f(n(9));function f(e){return e&&e.__esModule?e:{default:e}}function _(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n(672);var p=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.enclosing_class("auto__shared_modals_login_google_login_button"),n.state={google_failed:!1,google_loaded:!1,loading:!1},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,u.default),r(t,[{key:"componentDidMount",value:function(){t.setupCallback(this),t.appendScript()}},{key:"login",value:function(e){var t=this,o=this.props,r=o.account_settings_path,i=o.close_modal,a=o.google_session_path,l=o.handle_success,s=o.login_params,u=o.modal_id,c=o.optin,f={token:e,signup_source:"google_signup",signup_location:window.location.href};if(c&&(f.optin=c),s)for(var _ in s)f[_]=s[_];this.setState({loading:!0,google_failed:!1},function(){d.default.post({url:a,dataType:"json",body:f},function(e,o,a){a=JSON.parse(a),e||!a.success?t.setState({loading:!1,google_failed:!0}):a.email_missing?t.props.create_modal({component_loader:function(){return new Promise(function(e){n.e(3).then(function(t){e(n(661))}.bind(null,n)).catch(n.oe)})},props_loader:function(){return Promise.resolve({type:"Google",account_settings_path:r})},user_dismiss:!1,handle_load_complete:function(){return i(u)}}):a.redirect_to?window.location=a.redirect_to:l()})})}},{key:"handle_click",value:function(e){e.preventDefault(),"function"==typeof this.props.handle_click&&this.props.handle_click(),this.track_rats("signup_lightbox:google_btn:click"),this.state.google_loaded||this.setState({loading:!0})}},{key:"render_error",value:function(){if(this.state.google_failed)return i.default.createElement("p",{className:"google_fail_message error_msg"},l.default.t("shared.login.google_login_button.google_sign_in_failed"))}},{key:"render_button",value:function(){var e,t=this;return i.default.createElement(c.default,(_(e={ref:"button",className:(0,s.default)("google",{loading:this.state.loading})},"ref",function(e){return t.google_button=e}),_(e,"disabled",this.state.loading),_(e,"onClick",this.handle_click),e),i.default.createElement("span",{"aria-hidden":"true",className:"icon icon-google"}),i.default.createElement("span",{className:"google_btn_label"},this.props.label),i.default.createElement("span",{key:"hidden",className:"visually_hidden"},", "+l.default.t("shared.login.google_login_button.opens_in_a_new_window")))}},{key:"render_content",value:function(){return i.default.createElement(i.default.Fragment,null,this.render_button(),this.render_error())}}]),t}();p.propTypes={account_settings_path:a.default.string.isRequired,google_client_id:a.default.string.isRequired,google_session_path:a.default.string.isRequired,handle_success:a.default.func.isRequired,label:a.default.string.isRequired,modal_id:a.default.number.isRequired,login_params:a.default.object,optin:a.default.oneOf(["y","n"])},p.defaultProps={login_params:{},optin:null},p.appendScript=(0,o.default)(function(){var e=document.createElement("script");e.src="https://apis.google.com/js/platform.js?onload=googleOnLoad",e.type="text/javascript",document.body.appendChild(e)}),p.setupCallback=(0,o.default)(function(e){window.googleOnLoad=function(){window.gapi.load("auth2",function(){window.gapi.auth2.init({client_id:e.props.google_client_id,cookiepolicy:"single_host_origin"}).then(function(t){t.attachClickHandler(e.google_button.container,{},function(t){e.setState({google_loaded:!0},function(){e.login(t.getAuthResponse().id_token)})},function(e){console.error("google sign in error",e)})})},function(t){e.setState({google_failed:!0}),console.error(t)})}}),t.default=p},672:function(e,t,n){},674:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.mapDispatchToProps=void 0;var o=n(7);t.mapDispatchToProps=function(e){return{create_modal:function(t){e((0,o.create_modal)(t))},close_modal:function(t){e((0,o.close_modal)(t))}}}},675:function(e,t,n){}}]);