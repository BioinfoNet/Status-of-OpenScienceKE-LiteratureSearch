(function(t){Drupal.behaviors.foxycart={attach:function(r,c){if(t().jquery.split(".")[0]=="1"&&parseInt(t().jquery.split(".")[1])<8){alert("jQuery 1.8 or later required.")};t(".product-option").change(function(){Drupal.foxycart.getProductOptions()});Drupal.foxycart.getProductOptions()}};Drupal.foxycart={};Drupal.foxycart.buildFullCart=function(c){var r=FC.json.items,a="";if(FC.json.item_count>0){for(i=0;i<r.length;i++){a+=Drupal.foxycart.buildCartRow(r[i].name,r[i].code,r[i].options,r[i].quantity,r[i].price_each,r[i].price)};t("#fc_cart_contents").show();t("#fc_cart_items").html(a);t("#fc_cart_message").html("");t(".fc_cart_link").show();t("#fc_minicart_empty, .fc_minicart_empty").hide()}
else{t("#fc_cart_contents").hide();t(".fc_cart_link").hide();t("#fc_cart_message").html("Your shopping cart is empty");t("#fc_minicart_empty, .fc_minicart_empty").show()}};Drupal.foxycart.buildCartRow=function(t,i,o,a,e,c){var r="<tr>";r+="<td>"+t+"</td>";r+="<td class=\"right-align\">"+a+"</td>";r+="<td class=\"right-align\">"+c.toFixed(2)+"</td>";r+="</tr>";return r};Drupal.foxycart.getProductOptions=function(){$modifiers="";t(".product-option option[value*='c+\!']:selected, .product-option[value*='c+\!']:checked").each(function(){this.value.match(/c\+(!.*)}/g);$modifiers+=RegExp.$1});var r=t("input[name^='nid||']").val();if($modifiers!==""&&r!==""){Drupal.foxycart.setInStock();t.getJSON("/foxycart/stock-query",{nid:r,modifiers:$modifiers}).done(Drupal.foxycart.processStockQuery)}};Drupal.foxycart.processStockQuery=function(r){if(r["price"]!=undefined&&r["price"].length>0){t(".display-price .uc-price").html(r["price"])};Drupal.foxycart.determineStockStatus(r)};Drupal.foxycart.determineStockStatus=function(t){if(t["stock_level"]==="0"){Drupal.foxycart.setOutOfStock()}};Drupal.foxycart.setOutOfStock=function(){var r=t("input[type='submit'].node-add-to-cart");r.prop("disabled",!0);r.val("Out of Stock")};Drupal.foxycart.setInStock=function(){var r=t("input[type='submit'].node-add-to-cart");r.prop("disabled",!1);r.val("Add to cart")}})(jQuery);var FC=FC||{};FC.onLoad=function(){FC.client.on("ready.done",Drupal.foxycart.buildFullCart);FC.client.on("cart-submit.done",Drupal.foxycart.buildFullCart);FC.client.on("cart-item-quantity-update.done",Drupal.foxycart.buildFullCart);FC.client.on("cart-item-remove.done",Drupal.foxycart.buildFullCart);FC.client.on("cart-update",Drupal.foxycart.buildFullCart)};