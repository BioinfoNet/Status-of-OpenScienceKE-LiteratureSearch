/*! PubReader - vSTABLE - 2017-09-22
* Author: Andrey Kolotev;
* Contributors: Christopher Maloney, Barton Trawick, Edwin Sequeira, Stan Misiurev;

* ===========================================================================
*
*                            PUBLIC DOMAIN NOTICE
*               National Center for Biotechnology Information
*
*  This software/database is a "United States Government Work" under the
*  terms of the United States Copyright Act.  It was written as part of
*  the author's official duties as a United States Government employee and
*  thus cannot be copyrighted.  This software/database is freely available
*  to the public for use. The National Library of Medicine and the U.S.
*  Government have not placed any restriction on its use or reproduction.
*
*  Although all reasonable efforts have been taken to ensure the accuracy
*  and reliability of the software and data, the NLM and the U.S.
*  Government do not and cannot warrant the performance or results that
*  may be obtained by using this software or data. The NLM and the U.S.
*  Government disclaim all warranties, express or implied, including
*  warranties of performance, merchantability or fitness for any particular
*  purpose.
*
*  Please cite the author in any work or product based on this material.
*
* ===========================================================================
*/
(function(a){a.jr||(a.jr=new Object),a.jr.utils||(a.jr.utils=new Object),Modernizr.addTest("boxflex",Modernizr.testAllProps("boxFlex")||Modernizr.testAllProps("flex"));var b={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd",msTransition:"MSTransitionEnd",transition:"transitionend"},c=window.localStorage;a.extend(a.jr.utils,{touch:Modernizr!=null?Boolean(Modernizr.touch):!1,transitionEndEvName:b[Modernizr.prefixed("transition")],transformCssPropName:Modernizr.prefixed("transform"),columnGapCssPropName:Modernizr.prefixed("columnGap"),columnWidthCssPropName:Modernizr.prefixed("columnWidth"),columnCountCssPropName:Modernizr.prefixed("columnCount"),transitionDuration:Modernizr.prefixed("transitionDuration"),csstransitions:Modernizr!=null?Boolean(Modernizr.csstransitions):!1,csscolumns:Modernizr!=null?Boolean(Modernizr.csscolumns):!1,csstransforms3d:Modernizr!=null?Boolean(Modernizr.csstransforms3d):!1,ls:!!c}),a.extend(a.jr.utils,{transl2DPattern:"translateX(@px)",transl3DPattern:"translate3d(@px,0,0)",lsSet:function(a,b){if(!!c)try{c.removeItem(a),c.setItem(a,b)}catch(d){console.error(d.message)}},lsGet:function(a){if(!!c)try{var b=c.getItem(a);return JSON?/^(true|false|null)/.test(b)?JSON.parse(b):b==="undefined"?undefined:b:b}catch(d){console.error(d.message)}return undefined},jqSafeId:function(a){return typeof a=="string"?a.replace(/(:|\.)/g,"\\$1"):a},regexp:{escape:function(a){return a.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")}}})})(jQuery);var getActiveItemFromStore=function(a,b){var c=a.length,d=null;return[b,"default"].map(function(b){for(var e=0;e<c&&d==null;e++)a[e][b]&&(d=a[e].$el)}),d};(function(a){var b=[];a.fn.trackFip=function(c){var d=a.extend({},a.trackFip.defaults,c);return this.each(function(){var c=a(this),e=a.extend({},d,{$el:c});b.push(e),c.on("show:after",function(a){e.active=!0}).on("hide:after",function(a){e.active=!1}).on("focusin",function(a){for(var c=0;c<b.length;c++)b[c].active=!1;e.active=!0})}),this},a.trackFip={defaults:{"default":!1,active:!1,$el:null},active:function(){return getActiveItemFromStore(b,"active")}}})(jQuery),function(a){var b=[],c=0;a.fn.trackFocus=function(c){var d=a.extend({},a.trackFocus.defaults,c);return this.each(function(){var c=a(this),e=a.extend({},d,{$el:c,el:this});a.isNumeric(c.attr("tabindex"))||c.attr("tabindex",0),b.push(e),c.on("show:after",function(b){b.stopPropagation(),a(this).is(":visible")&&a(this).focus()}).on("hide:after",function(b){b.stopPropagation(),this!=document.body&&a(this).blur()}).on("focusin",function(a){a.stopPropagation();for(var c=0;c<b.length;c++)b[c].focused=!1;e.focused=!0}).on("focusout",function(c){c.stopPropagation(),e.focused=!1;for(var d=0;d<b.length;d++)a.contains(e.el,c.target)&&(e.focused=!0)})}),this},a.trackFocus={defaults:{"default":!1,focused:!1,$el:null,el:null},focused:function(){return a(getActiveItemFromStore(b,"focused"))},refocus:function(){var b=a.trackFocus.focused();b===null?null:document.activeElement.blur()}}}(jQuery),function(a){a.jr||(a.jr=new Object);if(typeof Modernizr=="undefined")return console.error("jr.PageManager is dependent on Modernizr, which is not defined"),!1;var b=a(window),c=a(document),d=c.children(),e=a.jr.utils,f={NEXT_PAGE:"jr:pm:go:next:page",PREV_PAGE:"jr:pm:go:prev:page",GO_PAGE:"jr:pm:go:page",FIRST_PAGE:"jr:pm:go:1st:page",LAST_PAGE:"jr:pm:go:last:page",GO_POS:"jr:go:pos",PAGE_TURN_BEFORE:"jr:pm:page:turn:before",PAGE_TURN_AFTER:"jr:pm:page:turn:after",PAGES_CHANGED:"jr:pm:pages:changed"},g={SCROLL:"jr:pm:state:scroll",PAGE:"jr:pm:state:page"};a.jr.PageManager=function(h,i){var j=this;j.$el=a(h),j.el=h,j.$el.data("jr.PageManager",j),j.init=function(){j.options=a.extend({},a.jr.PageManager.defaultOptions,i),j.contentPollingIntervalMin=j.contentPollingInterval=1e3,j.contentPollingIntervalMax=1024e3,j.contentPollingIntervalMul=2,j.$article=j.$el.find("> article").first();if(j.$article.length!==1)return console.error("jr.PageManager was not able to find article's content"),!1;j.article=j.$article.get(0),j.transXcurr=0,j.right=parseFloat(j.$el.css("right")),e.touch&&a.fn.swipe!==null&&(j.$el.swipe({threshold:25,swipe:j.swipeHandler}),j.$el.on("pointerdown",j.tapHandler)),j.applyPMState(),j.calcMetrics(),j.metaPrevUnitHref=a("meta[name=jr-prev-unit]").attr("content"),j.metaNextUnitHref=a("meta[name=jr-next-unit]").attr("content"),c.on("keydown",j.kbdHandler),j.$el.on("scroll",j.scrollHandler),j.$el.on(f.NEXT_PAGE,j.eventHandler),j.$el.on(f.PREV_PAGE,j.eventHandler),j.$el.on(f.FIRST_PAGE,j.eventHandler),j.$el.on(f.LAST_PAGE,j.eventHandler),j.$el.on(f.GO_PAGE,j.eventHandler),j.$el.on(f.GO_POS,j.eventHandler),c.on("jr:user:active pointerup",a.throttle(500,j.resetContentPollingInterval)),b.on("resize",a.throttle(500,j.resetContentPollingInterval)),b.on("resize",a.throttle(500,j.resetRightPropOnWinResize)),b.on("resize",a.throttle(500,j.onWinResize)),b.on("scroll",a.throttle(500,j.onWinScroll)),j.$el.mousewheel(j.mousewheelHandler),j.startPollingContentMetrics(),j.$el.trigger("show:after");var d=e.lsGet("jr:pm:init:phase");return d==f.LAST_PAGE&&(e.lsSet("jr:pm:init:phase",null),j.$el.trigger(d)),!0},j.calcPages=function(){j.fPage(j.calcFPage()),j.cPage(j.calcCPage()),j.lPage(j.calcLPage()),j.pagesChanged()&&j.triggerPagesChanged()},j.fPage=function(b){var c=j._fp;if(c===null||c===0)j._fp=j.calcFPage();return j._fp=a.isNumeric(b)?j._fp=parseInt(b,10):j._fp!==null?j._fp:0,c!==j._fp&&j.pagesChanged(!0),j._fp},j.lPage=function(b){var c=j._lp;if(c===null||c===0)j._lp=j.calcLPage();return j._lp=a.isNumeric(b)?j._lp=parseInt(b,10):j._lp!==null?j._lp:0,c!==j._lp&&j.pagesChanged(!0),j._lp},j.cPage=function(b){var c=j._cp;if(c===null||c===0)j._cp=j.calcCPage();return j._cp=a.isNumeric(b)?j._cp=parseInt(b,10):j._cp!==null?j._cp:0,c!==j._cp&&j.pagesChanged(!0),j._cp},j.pagesChanged=function(a){return typeof a=="boolean"&&(j._pChanged=a),j._pChanged},j._dumpPages=function(){console.trace();var a=j.pInfo();console.info("_dumpPages(): fp=%s cp=%s lp=%s pChanged=%s cp/lp: %s%% [pInfo: cp: %s ln: %s po: %s%%]",j._fp,j._cp,j._lp,j._pChanged,(j._cp/j._lp).toPrecision(4)*100,a.pn,a.lp,a.po)},j.calcFPage=function(){var a=j.contentWidth()>0?1:0;return a},j.calcCPage=function(){var a=j.pxOffset2Page(j.contentPosLeft(),"f"),b=j.fPage(),c=j.lPage();return a<b?a=b:a>c&&(a=c),a},j.calcLPage=function(){var a=j.pxOffset2Page(j.contentWidth()-1,"f");return a},j.calcMetrics=function(){j.adjustContentRightSide(),j.contentColumnGap(!0),j.contentPosLeft(!0),j.contentWidth(!0),j.pageWidth(!0);if(j.metricsChanged()){var a=j.cPage2OffsetInPP();j.calcPages(),j._pmState===g.PAGE&&j.goPage(j.ppOffset2Page(a)),j.metricsChanged(!1)}},j.contentColumnGap=function(a){var b=j._cg;return a===!0&&(j._cg=parseFloat(j.$article.css(e.columnGapCssPropName)),b!==j._cg&&j.metricsChanged(!0)),j._cg},j.contentPosLeft=function(a){var c=j._pl;return a===!0&&(j._pmState==g.SCROLL?j._pl=b.scrollTop():j.options.useTrans?j._pl=-j.$article.position().left:j._pl=j.el.scrollLeft),j._pl},j.contentWidth=function(a){var b=j._cw;if(a===!0){if(j._pmState==g.SCROLL)j._cw=c.height();else{var d=j.article.scrollWidth;d>j.article.clientWidth?j._cw=d:(j.$article.css("overflow","hidden"),j._cw=j.article.scrollWidth,j.$article.css("overflow","visible"))}b!==j._cw&&j.metricsChanged(!0)}return j._cw},j.pageWidth=function(a){var c=j._pw;return a===!0&&(j._pmState==g.SCROLL?j._pw=b.height():j._pw=parseFloat(j.$article.innerWidth()+j.contentColumnGap(a))),c!==j._pw&&j.metricsChanged(!0),j._pw},j.metricsChanged=function(a){return typeof a=="boolean"&&(j._mChanged=a),j._mChanged},j._dumpMetrics=function(){console.info("_dumpMetrics(): cgap=%s pleft=%s cwidth=%s pwidth=%s _mChanged=%s",j._cg,j._pl,j._cw,j._pw,j._mChanged)},j.nextPage=function(){var a=j.cPage();return a<j.lPage()?a+1:j.metaNextUnitHref!==null?a+1:a},j.prevPage=function(){var a=j.cPage();return a>j.fPage()?a-1:j.metaPrevUnitHref!==null?a-1:a},j.cPage2OffsetInPP=function(b){var c=j.lPage(),d=a.isNumeric(b)?Math.min(c,Math.max(1,b)):j.cPage();return c>1?100*(d/c-.5/c):typeof c!="undefined"?100:0},j.ppOffset2Page=function(a){var b=Math.min(100,Math.max(0,a)),c=j.lPage();return c>1?b=b*(1+1/c)-1/c:0,b=Math.max(0,b),c>1?Math.floor(b/100*c/(1+1/c))+1:1},j.pxOffset2Page=function(a,b){j._pmState==g.SCROLL&&(a+=j.$article.offset().top);var c=b!=null&&b=="r"?Math.round(a/j.pageWidth())+1:Math.floor(a/j.pageWidth())+1;return c},j.id2Page=function(b){var c,d,f;return b!=null&&b!==""&&(/^#/.test(b)?0:b="#"+b,f=a(e.jqSafeId(b)),f.length==1&&(d=f.position().left+j.contentPosLeft(!0),c=j.pxOffset2Page(d))),c},j.startPollingContentMetrics=function(){j.clearPollContentMetricsIntervalId(),j._pmState==g.PAGE&&(j.pollContentMetricsIntervalId=setInterval(j.pollContentMetrics,j.contentPollingInterval),j.isPollingContentMetrics(!0))},j.stopPollingContentMetrics=function(){j.clearPollContentMetricsIntervalId(),j.isPollingContentMetrics(!1)},j.clearPollContentMetricsIntervalId=function(){a.isNumeric(j.pollContentMetricsIntervalId)&&(clearInterval(j.pollContentMetricsIntervalId),j.pollContentMetricsIntervalId=null)},j.resetContentPollingInterval=function(){j.contentPollingInterval!=j.contentPollingIntervalMin?(j.contentPollingInterval=j.contentPollingIntervalMin,j.stopPollingContentMetrics(),j.startPollingContentMetrics()):0},j.resetRightPropOnWinResize=function(){j.$el.css("right",""),j.right=parseFloat(j.$el.css("right"))},j.applyPMState=function(){window.matchMedia("(max-width: 5in)").matches||window.matchMedia("(max-height: 5in)").matches?(j._pmState=g.SCROLL,e.touch&&a.fn.swipe!=null&&typeof j.$el.swipe=="function"&&j.$el.swipe("disable"),j.$el.unmousewheel(j.mousewheelHandler),j.$article.css(e.transformCssPropName,"none"),j.stopPollingContentMetrics()):(j._pmState=g.PAGE,e.touch&&a.fn.swipe!==null&&typeof j.$el.swipe=="function"&&j.$el.swipe("enable"),j.$el.mousewheel(j.mousewheelHandler),j.startPollingContentMetrics())},j.onWinResize=function(){j.applyPMState(),j.calcMetrics()},j.onWinScroll=j.onWinResize,j.isPollingContentMetrics=function(a){return typeof a=="boolean"?j._isPollingContentMetrics=a:j._isPollingContentMetrics},j.colW_colC_aW=function(){var b=j.$article,c=b.css(e.columnWidthCssPropName),d=b.css(e.columnCountCssPropName),f=b.css(e.columnGapCssPropName),g=b.innerWidth(),h,i,k,l,m=parseFloat(f);return d=="auto"&&c!=="auto"?(h=parseFloat(c),l=Math.floor((g+m)/(h+m))):a.isNumeric(d)&&(l=d),a.isNumeric(l)?(h=(g+m)/l-m,k=(g+m)/l-Math.floor(m/2),i=(g+m)/l,{cw:h,cwg:i,cwhg:k,cc:l,cg:m,aw:g,cssCW:c,cssCC:d}):undefined},j.adjustContentRightSide=function(){var a=parseFloat(j.$el.css("right")),b=a-j.right,c=j.colW_colC_aW(),d;c!=null&&(d=(c.aw+b)%c.cc+c.cg%c.cc),d!=null&&j.right+d!==a&&j.$el.css("right",j.right+d)},j.pollContentMetrics=function(){j.el.scrollLeft!==0&&j.$el.scrollLeft(0),j.el.scrollTop!==0&&j.$el.scrollTop(0),j.isPollingContentMetrics()&&j.calcMetrics(),j.contentPollingInterval<=j.contentPollingIntervalMax?(j.contentPollingInterval*=j.contentPollingIntervalMul,j.stopPollingContentMetrics(),j.startPollingContentMetrics()):0},j.pInfo=function(){return{pn:j.cPage(),po:j.cPage2OffsetInPP().toPrecision(6),lp:j.lPage(),pu:j.metaPrevUnitHref,nu:j.metaNextUnitHref}},j.triggerPageTurnBefore=function(){j.$el.trigger(f.PAGE_TURN_BEFORE,j.pInfo())},j.triggerPageTurnAfter=function(){j.$el.trigger(f.PAGE_TURN_AFTER,j.pInfo()),j.pagesChanged(!1)},j.triggerPagesChanged=function(){j.$el.trigger(f.PAGES_CHANGED,j.pInfo()),j.resetContentPollingInterval()},j.goNextPage=function(){j.goPage(j.nextPage())},j.goPrevPage=function(){j.goPage(j.prevPage())},j.goFirstPage=function(){j.goPage(j.fPage())},j.goLastPage=function(){j.goPage(j.lPage())},j.goPage=function(c){var h=j.cPage(),i=j.metricsChanged(),k=j.pagesChanged(),l=j.pageWidth();if(a.isNumeric(c)===!0&&c>=j.fPage()&&c<=j.lPage()&&(i===!0||c!==h)){var m=Math.floor(parseFloat(c));if(i||k||m!==h){j.triggerPageTurnBefore(),j.stopPollingContentMetrics();var n=l*(m-1);j.transX=n;if(j.transX!=j.transXcurr){j.transXcurr=j.transX;if(j._pmState===g.SCROLL)b.scrollTop(j.transX),j.cPage(m),j.pagesChanged()?j.triggerPagesChanged():0;else if(j.options.useTrans){var o=parseFloat(j.$article.css(e.transitionDuration))>0;o&&(j.$article.unbind(e.transitionEndEvName),j.$article.one(e.transitionEndEvName,j.transitionEnd)),j.cPage(m),j.pagesChanged()?j.triggerPagesChanged():0;var p=e.csstransforms3d&&d.hasClass("animate")?e.transl3DPattern:e.transl2DPattern;j.$article.css(e.transformCssPropName,p.replace(/@/g,-j.transX)),o?0:j.transitionEnd()}else j.$el.stop(!0,!0),j.$el.animate({scrollLeft:j.transX},250,j.transitionEnd)}else j.startPollingContentMetrics()}}else if(a.isNumeric(c)==!0&&c<j.fPage()&&j.metaPrevUnitHref!=null){var q=j.metaPrevUnitHref;window.open(q,"_self"),e.lsSet("jr:pm:init:phase",f.LAST_PAGE)}else if(a.isNumeric(c)==!0&&c>j.lPage()&&j.metaNextUnitHref!=null){var q=j.metaNextUnitHref;window.open(q,"_self")}},j.transitionEnd=function(a){j.triggerPageTurnAfter(),j.startPollingContentMetrics()},j.swipeHandler=function(a,b,c,d){var e=!1;b=="left"?(j.goNextPage(),e=!0):b=="right"&&(j.goPrevPage(),e=!0),e&&a.preventDefault()},j.clickHandler=function(b){if(b.type=="click"){var c=a(b.currentTarget),d=(b.clientX-c.position().left)/c.innerWidth();d<=.2?j.goPrevPage():d>=.8&&j.goNextPage()}return!1},j.tapHandler=function(a){j._touch==null&&(j.$el.unbind("click",j.clickHandler),j._touch=!0),a.type=="pointerdown"&&(j.$el.on("pointerup pointermove",j.tapHandler),j._pageX=a.originalEvent.pageX);if(a.type=="pointermove"||a.type=="pointercancel")j._pageX=null;if(a.type=="pointerup"&&j._pageX!=null){var b=j._pageX;_oW=j.$el.outerWidth(),_lbW=parseFloat(j.$el.css("border-left-width")),_rbW=parseFloat(j.$el.css("border-right-width")),_touchX=b-j.$el.position().left,_touchX<_lbW?j.goPrevPage():_oW-_touchX<_rbW&&j.goNextPage(),j._pageX=null}return(a.type=="pointerup"||a.type=="pointercancel")&&j.$el.unbind("pointerup pointermove pointercancel",j.tapHandler),!0},j.kbdHandler=function(b){var c=b.keyCode,d=a(b.target);if(j.$el.closest(d).length==0&&d.closest(j.$el).length==0)return;j._pmState===g.PAGE&&(c==9?b.preventDefault():c==38||c==37||c==33?j.goPrevPage():c==40||c==39||c==34||c==32?j.goNextPage():c==35?j.goLastPage():c==36&&j.goFirstPage())},j.eventHandler=function(b,c){var d=b.type;a.isPlainObject(c)||(c={pn:j.fPage()}),d==f.NEXT_PAGE?j.goNextPage():d==f.PREV_PAGE?j.goPrevPage():d==f.FIRST_PAGE?j.goFirstPage():d==f.LAST_PAGE?j.goLastPage():d==f.GO_PAGE&&a.isNumeric(parseFloat(c.pn))?j.goPage(parseFloat(c.pn)):d==f.GO_PAGE&&a.isNumeric(parseFloat(c.po))?j.goPage(j.ppOffset2Page(parseFloat(c.po))):d==f.GO_PAGE&&a.isNumeric(parseFloat(c.px))?j.goPage(j.pxOffset2Page(parseFloat(c.px+j.contentPosLeft(!0)))):d==f.GO_PAGE&&typeof c.id=="string"&&c.id!==""?j.goPage(j.id2Page(c.id)):d==f.GO_POS&&c.pos!=null&&a.isNumeric(parseFloat(c.pos.left))&&(j._pmState===g.SCROLL?j.goPage(j.pxOffset2Page(c.pos.top)):j.goPage(j.pxOffset2Page(parseFloat(c.pos.left+j.contentPosLeft(!0)))))},j.scrollHandler=function(a){a.preventDefault();var b=a.type;if(j._pmState===g.PAGE)if(j.el.scrollLeft!==0||j.el.scrollTop!==0){var c=window.location.hash;c!=null&&c!==""&&(j.$el.unbind("scroll",j.scrollHandler),j.stopPollingContentMetrics(),j.el.scrollLeft!==0&&j.$el.scrollLeft(0),j.el.scrollTop!==0&&j.$el.scrollTop(0),j.$el.on("scroll",j.scrollHandler),j.startPollingContentMetrics())}return j.wheelScrollLastTime=(new Date).getTime(),!1},j.mousewheelHandler=function(a,b,c,d){var e,f=(new Date).getTime();"wheelScrollLastTime"in j?f-j.wheelScrollLastTime>200&&(e=!0):e=!0,e&&(b<0?j.goNextPage():b>0&&j.goPrevPage(),j.wheelScrollLastTime=f)},j.init()},a.jr.PageManager.defaultOptions={useTrans:!0},a.fn.jr_PageManager=function(b){return this.each(function(){new a.jr.PageManager(this,b)})},a.fn.getjr_PageManager=function(){return this.data("jr.PageManager")}}(jQuery),function(a){a.jr||(a.jr=new Object),a.jr.PaginationStatus=function(b,c){var d=this;d.$el=a(b),d.el=b;if(c.poc==null){console.error("PaginationStatus: point of communication (poc) was not provided");return}d.$el.data("jr.PaginationStatus",d),d.init=function(){d.options=a.extend({},a.jr.PaginationStatus.defaultOptions,c),d.$poc=a(d.options.poc),d.$poc.on("jr:pm:pages:changed",d.eventHandler)},d.eventHandler=function(b,c){if(!a.isPlainObject(c))return!0;var e=b.type;return e==="jr:pm:pages:changed"&&(d.$el.find(".jr-pg-pn").html(c.pn),d.$el.find(".jr-pg-lp").html(c.lp),d.$el.find(".jr-pg-po").html(Math.floor(c.po))),!0},d.init()},a.jr.PaginationStatus.defaultOptions={},a.fn.jr_PaginationStatus=function(b){return this.each(function(){new a.jr.PaginationStatus(this,b)})},a.fn.getjr_PaginationStatus=function(){return this.data("jr.PaginationStatus")}}(jQuery),function(a){a.jr||(a.jr=new Object);var b=a.jr.utils;a.jr.PageTurnSensor=function(b,c){var d=this;if(c.poc==null){console.error("PageTurnSensor: Point Of Contact (poc) with Page Manager is not provided");return}if(c.action==null){console.error("PageTurnSensor: action is not provided");return}if(c.actionEv==null){console.error("PageTurnSensor: actionEv is not provided");return}if(c.piEv==null){console.error("PageTurnSensor: piEv is not provided");return}d.$el=a(b),d.el=b;if(c.poc==null)return;d.$el.data("jr.PageTurnSensor",d),d.clickEvName="pointerup",d.init=function(){d.options=a.extend({},a.jr.PageTurnSensor.defaultOptions,c),d.p={p:null,lp:null,nu:null,pu:null},d.$poc=a(d.options.poc),d.$el.on("click",d.clickHandler),d.$el.on(d.clickEvName,d.pointerUpHandler),d.$poc.on(d.options.piEv,d.piHandler)},d.clickHandler=function(a){return a.preventDefault(),!1},d.pointerUpHandler=function(a){a.stopPropagation(),d.options.actionEv!=null&&d.$poc.trigger(d.options.actionEv)},d.piHandler=function(b,c){var e=b.type;if(!a.isPlainObject(c))return!0;if(c.pn!=null&&c.lp!=null){if(d.options.action=="prev"||d.options.action=="first")c.pn==1&&c.pu==null?d.$el.addClass("hidden"):d.$el.removeClass("hidden");else if(d.options.action=="next"||d.options.action=="last")c.pn==c.lp&&c.nu==null?d.$el.addClass("hidden"):d.$el.removeClass("hidden");d.p=c}return!0},d.init()},a.jr.PageTurnSensor.defaultOptions={action:"next",poc:null,iUnit:!1},a.fn.jr_PageTurnSensor=function(b){return this.each(function(){new a.jr.PageTurnSensor(this,b)})},a.fn.getjr_PageTurnSensor=function(){return this.data("jr.PageTurnSensor")}}(jQuery),function(a){a.jr||(a.jr={}),a.jr.PageProgressBar=function(b,c){function h(){var a=d.lastPageManEvent;a.found&&(l(a.maxpage,a.pagenum,a.offset),d.lastPageManEvent.found=!1)}function i(){}function j(a,b){if(typeof b=="undefined"){d.rangeinput.setValue(d.$input.val());return}var c=d.lastEvent,e=d.rangeinput.getConf().max;if(!c||c.source!=g||c.max!=e||!isNaN(b)&&c.value!=b){c.source=f,c.max=e,c.value=b;var h=jQuery.Event("jr:pm:go:page",{originalEvent:a});d.$poc.trigger(h,{pn:b})}else c.source=f}function k(b,c){if(!a.isPlainObject(c))return!0;var h=b.type;if(h==="jr:pm:pages:changed"&&c.pn!==null&&c.lp!==null){var i=d.lastEvent;!i||i.source!==f||i.max!=c.lp||i.value!=c.pn?e.css("display")!="none"?l(c.lp,c.pn,c.po):(d.lastPageManEvent.found=!0,d.lastPageManEvent.maxpage=c.lp,d.lastPageManEvent.pagenum=c.pn,d.lastPageManEvent.offset=c.po):i.source=g,d.$pageNumSpan.text(c.pn),d.$lastPageSpan.text(c.lp),d.$percentSpan.text(Math.floor(c.po)+"%")}return!0}function l(a,b,c){var e=d.lastEvent;e.source=g,e.max=a,e.value=b,d.rangeinput.setRange(undefined,a,b)}var d=this;d.el=b;var e=d.$el=a(b);e.data("jr.PageProgressBar",d);if(c.poc===null){console.error("PageProgressBar: point of communication (poc) was not provided");return}var f=0,g=1;d.init=function(){d.options=a.extend({},a.jr.PageProgressBar.defaultOptions,c),d.$poc=a(d.options.poc),d.$poc.on("jr:pm:pages:changed",k),d.visible=!1;var b=d.$input=e.html('<div class="pr-text">  <span class="pr-np"></span> of <span class="pr-lp"></span></div><input type="range" />').children("input").rangeinput({css:{slider:"pr-slider",input:"pr-pn",handle:"pr-handle",progress:""},min:1,max:50,value:10,step:1,progress:!1});b.hide();var f=e.children(".pr-text");f.hide(),f.prepend(b),d.rangeinput=d.$input.data("rangeinput"),d.$pageNumSpan=f.children(".pr-np"),d.$lastPageSpan=f.children(".pr-lp"),d.$percentSpan=f.children(".pr-pct"),d.lastEvent={source:-1,max:50,value:-1},d.lastPageManEvent={found:!1,maxpage:50,pagenum:-1,offset:0},b.change(j),e.on("jr:panel:hide:after",i),e.on("jr:panel:show:after",h)},d.init()},a.jr.PageProgressBar.defaultOptions={},a.fn.jr_PageProgressBar=function(b){return this.each(function(){new a.jr.PageProgressBar(this,b)})},a.fn.getjr_PageProgressBar=function(){return this.data("jr.PageProgressBar")}}(jQuery),function(a){a.jr||(a.jr={});var b=a.jr.utils;a.jr.Links=function(b,c){var d=this;if(c.poc===null){console.error("Links: point of communication (poc) was not provided");return}d.$el=a(b),d.el=b,d.$el.data("jr.Links",d),d.init=function(){d.options=a.extend({},a.jr.Links.defaultOptions,c),d.$el.prop("onclick",null).removeProp("onclick"),d.$el.removeAttr("onclick target"),d.$el.attr("href",d.modHrefForRepObjOnly(d.$el.attr("href")));var b=new RegExp("^(#|javascript:|mailto:|"+d.options.uri_prefix+")");b.test(d.$el.attr("href"))||d.$el.attr("target","_blank"),d.$poc=a(d.options.poc),d.$el.on("pointerup",d.pointerUpHandler)},d.pointerUpHandler=function(a){d.$poc.trigger("jr:hk:mark:hp")},d.modHrefForRepObjOnly=function(a){function b(a,b){var c=a.split("#"),d="report="+b;return/\?/.test(c[0])?c[0]+="&"+d:c[0]+="?"+d,c.join("#")}return/\breport=/.test(a)||(/\/(table|figure)\//.test(a)?a=b(a,"objectonly"):/\/articles\/.*\/(cited|pdf|epub|bin)/.test(a)||/\/articles\//.test(a)&&(a=b(a,"reader"))),a},d.init()},a.jr.Links.defaultOptions={uri_prefix:"/"},a.fn.jr_Links=function(b){return this.each(function(){new a.jr.Links(this,b)})},a.fn.getjr_Links=function(){return this.data("jr.Links")}}(jQuery),function(a){a.jr||(a.jr=new Object);var b={MARK_HP:"jr:hk:mark:hp"};a.jr.HistoryKeeper=function(c,d){var e=this;e.$el=a(c),e.el=c,e.$el.data("jr.HistoryKeeper",e),e.init=function(){e.options=a.extend({},a.jr.HistoryKeeper.defaultOptions,d),window.addEventListener("hashchange",e.hashchangeHandler),e.$el.on(b.MARK_HP,e.eventHandler),e.$el.on("jr:pm:pages:changed",e.eventHandler),e.hashchangeHandler()},e.hashchangeHandler=function(b){var c=window.location.hash,d=a.Event("jr:pm:go:page",{originalEvent:b});if(/^#!po=/.test(c)){var f=parseFloat(c.slice(5));e.$el.trigger(d,{po:f})}else/^#/.test(c)&&e.$el.trigger(d,{id:c})},e.eventHandler=function(a,c){a.preventDefault();var d=a.type;return d===b.MARK_HP&&e._po!=null?window.location.hash!=="#!po="+e._po&&history.pushState(null,null,"#!po="+e._po):d==="jr:pm:pages:changed"&&(e._po=c.po),!0},e.init()},a.jr.HistoryKeeper.defaultOptions={},a.fn.jr_HistoryKeeper=function(b){return this.each(function(){new a.jr.HistoryKeeper(this,b)})},a.fn.getjr_HistoryKeeper=function(){return this.data("jr.HistoryKeeper")}}(jQuery),function(a){function c(b){a.jr.ObjectBox.OB.blur().addClass("hidden").trigger("hide:after"),a.jr.ObjectBox.clean()}a.jr||(a.jr={});var b=a.jr.utils;a.jr.ObjectBox=function(b,c){var d=this,e=a(b);d.el=b,d.$el=e,e.data("jr.ObjectBox",d),d.init=function(){var b=d.options=a.extend({},a.jr.ObjectBox.defaultOptions,c),e=d.$el;e.on("click",d.handleClick).on("pointerup.jr-ob",d.handlePointerUp).on("open.jr-ob",d.handleOpen).on("refresh.jr-on",d.handleRefresh),!b.href&&e.attr("data-href")&&(b.href=e.attr("data-href")),!b.path&&e.attr("data-path")&&(b.path=e.attr("data-path"));if(b.focusOnOpen==!0){var f=a(b.focusOnOpenElement);a.isNumeric(f.attr("tabindex"))||f.attr("tabindex","0")}},d.checkFPF=function(){return a(this).data("figpopup.flag")==!0},d.handlePointerUp=function(b){b.stopPropagation(),(b.originalEvent!=null&&b.originalEvent.pointerType=="mouse"||a(b.target).parents().addBack().filter(d.checkFPF).length==0)&&a(this).trigger("open")},d.handleClick=function(a){return a.preventDefault(),!1},d.handleOpen=function(a){e.is(".jr-objectbox-trigger")||d.open()},d.handleRefresh=function(a){d.open()},d.open=function(){var b=d.options,c=d.$el;a.jr.ObjectBox.OB.is(":visible")&&(a.jr.ObjectBox.clean(),a.jr.ObjectBox.OB.trigger("show:after")),c.addClass("jr-objectbox-trigger"),b.objectBoxClass!=""?a.jr.ObjectBox.OB.addClass(b.objectBoxClass).data("objectBoxClass",b.objectBoxClass):0;if(!b.contentLocal){var e=a.jr.ObjectBox.OB.find(".jr-objectbox-drawer");e.load(b.href,function(){e.find("img[data-src]").each(function(){var c=a(this);c.attr("src",c.attr("data-src").replace(/\{\$path\}/g,b.path))}).end()})}else{var f=b.contentId!=""?"#"+b.contentId:b.contentLocalAttrPrefix+c.attr(b.contentLocalAttr);a(document.getElementById(f.substr(1))).clone(!0).removeAttr("id").removeClass("hidden").find("[id]").each(function(){var b=a(this);b.attr("id","ob_"+b.attr("id"))}).end().find("[rid]").each(function(){var b=a(this);b.attr("rid","ob_"+b.attr("rid"))}).end().find("img[data-src]").each(function(){var b=a(this);b.attr("src",b.attr("data-src"))}).end().appendTo(a.jr.ObjectBox.OB.find(".jr-objectbox-drawer"))}a.jr.ObjectBox.open({o:b})},d.init()},a.jr.ObjectBox.clean=function(){a.jr.ObjectBox.OB.find(".title-text").text("").end().find(".jr-objectbox-drawer").empty();if(a(".jr-objectbox-trigger").length){var b=a(".jr-objectbox-trigger"),c=b.data("jr.ObjectBox").options.objectBoxClass;c!==""&&a.jr.ObjectBox.OB.removeClass(c),b.removeClass("jr-objectbox-trigger")}},a.jr.ObjectBox.close=function(){a.jr.ObjectBox.OB.addClass("thidden");var d=parseFloat(a.jr.ObjectBox.OB.css(b.transitionDuration))>0;d?a.jr.ObjectBox.OB.one(b.transitionEndEvName,c):setTimeout(c,50),a("#jr-content").off("pointerup.jr-ob"),a(".jr-objectbox-drawer").data("refLength",""),a.jr.ObjectBox.OB.trigger("ObjectBoxClose"),a(document).unbind("keydown",a.jr.ObjectBox.kbdHandler),a.jr.ObjectBox.OB.off("jr:go:pos"),a("body").off("pointerup",a.jr.ObjectBox.docPointerHandler),a.jr.ObjectBox.OB.off("pointerup",a.jr.ObjectBox.obPointerHandler)},a.jr.ObjectBox.defaultOptions={contentLocal:!1,contentId:"",contentLocalAttr:"rid",contentLocalAttrPrefix:"#",focusOnOpen:!0,focusOnOpenElement:"#jr-objectbox",objectBoxClass:"",href:"",path:"",preventDefault:"true"},a.jr.ObjectBox.open=function(c){function d(){if(typeof jQuery.fn.ncbimedia=="undefined")return;var b=a.jr.ObjectBox.OB.find(".jr-objectbox-drawer");b.find(".ncbimedia").ncbimedia()}if(!a.jr.ObjectBox.OB.is(":visible")){var e;c.o!=null&&c.o.focusOnOpen==!0&&(e=a(c.o.focusOnOpenElement)),a.jr.ObjectBox.OB.removeClass("hidden").trigger("ObjectBoxOpen"),setTimeout(function(){a.jr.ObjectBox.OB.removeClass("thidden")},50);function f(){a.jr.ObjectBox.OB.trigger("show:after"),setTimeout(function(){a.jr.ObjectBox.OB.focus()},100),d(),a("body").on("pointerup",a.jr.ObjectBox.docPointerHandler),a.jr.ObjectBox.OB.on("pointerup",a.jr.ObjectBox.obPointerHandler)}transFlag=parseFloat(a.jr.ObjectBox.OB.css(b.transitionDuration))>0,transFlag?a.jr.ObjectBox.OB.one(b.transitionEndEvName,f):setTimeout(f,50),a(document).on("keydown",a.jr.ObjectBox.kbdHandler),a.jr.ObjectBox.OB.on("jr:go:pos",a.jr.ObjectBox.goPosHandler)}else d()},a.jr.ObjectBox.docPointerHandler=function(b){a.jr.ObjectBox.close()},a.jr.ObjectBox.obPointerHandler=function(a){a.stopPropagation()},a.jr.ObjectBox.kbdHandler=function(b){var c=a(b.target),d=a.jr.ObjectBox.OB;if(c.closest(d).length==0&&d.closest(c).length==0)return;b.keyCode==27&&a.jr.ObjectBox.close()},a.jr.ObjectBox.goPosHandler=function(b,c){a.isPlainObject(c)||(c={pos:{left:0,top:0}});var d=a.jr.ObjectBox.OB.find(".jr-objectbox-drawer"),e=d.scrollTop(),f=d.scrollLeft(),g=d.innerHeight(),h=d.innerWidth();d.stop().animate({scrollTop:e+c.pos.top-g/2,scrollLeft:f+c.pos.left-h/2})},a.jr.ObjectBox.OB=a("#jr-objectbox"),a.fn.jr_ObjectBox=function(b){return this.each(function(){new a.jr.ObjectBox(this,b)})},a.fn.getjr_ObjectBox=function(){return this.data("jr.ObjectBox")},a(".jr-objectbox-close").on("pointerup.jr-ob",function(b){b.preventDefault(),b.stopPropagation(),a.jr.ObjectBox.close()}),a(".pr-pn").change(function(){a.jr.ObjectBox.OB.is(":visible")&&a.jr.ObjectBox.close()})}(jQuery),function(a){a.jr||(a.jr=new Object);var b=a.jr.utils,c={SW_ON_BEFORE:"jr:switch:on:before",SW_ON:"jr:switch:on",SW_ON_STATELESS:"jr:switch:on:stateless",SW_ON_AFTER:"jr:switch:on:after",SW_OFF_BEFORE:"jr:switch:off:before",SW_OFF:"jr:switch:off",SW_OFF_STATELESS:"jr:switch:off:stateless",SW_OFF_AFTER:"jr:switch:off:after"};a.jr.Switcher=function(d,e){var f=this;f.$el=a(d),f.el=d,f.$el.data("jr.Switcher",f),f.clickEvName="pointerup",f.init=function(){f.options=a.extend({},a.jr.Switcher.defaultOptions,e),f.$poc=a(f.options.poc),f.type=f.options.type,f.autoOff=f.options.autoOff,f.stateless=f.options.stateless;if(!f.stateless){var d=b.lsGet("state_"+f.$el.attr("id"));f.options.state=d!=null?d:f.options.state}typeof f.options.state!="boolean"&&(f.options.state=a.jr.Switcher.defaultOptions.state),typeof f.autoOff!="boolean"&&(f.autoOff=f.options.autoOff=a.jr.Switcher.defaultOptions.autoOff),f.type!=="radio"&&f.type!=="chkbox"&&(f.type=f.options.type=a.jr.Switcher.defaultOptions.type),f.$el.on("click",f.clickHandler),f.$el.on(f.clickEvName,f.pointerUpHandler),f.$el.on(c.SW_ON,f.turnOnHandler),f.$el.on(c.SW_ON_STATELESS,f.turnOnHandler),f.options.state&&f.$el.trigger(c.SW_ON),f.$el.removeClass("hidden")},f.toggleSwitch=function(){f.state?(f.$poc.unbind(c.SW_ON_AFTER,f.turnOffHandler),f.$poc.unbind(c.SW_OFF,f.turnOffHandler),f.$poc.unbind(c.SW_OFF_STATELESS,f.turnOffHandler),f.$poc.trigger(c.SW_OFF_BEFORE),f.$el.trigger(c.SW_OFF_BEFORE),f.state=!f.state,f.$el.removeClass("on"),f.autoOff&&(a(document).unbind(f.clickEvName,f.turnOffHandler),a(document).unbind("show.canvas",f.turnOffHandler)),f.$poc.trigger(c.SW_OFF_AFTER),f.$el.trigger(c.SW_OFF_AFTER)):(f.$poc.trigger(c.SW_ON_BEFORE),f.$el.trigger(c.SW_ON_BEFORE),f.state=!f.state,f.$el.addClass("on"),f.$el.on(c.SW_OFF,f.turnOffHandler),f.$el.on(c.SW_OFF_STATELESS,f.turnOffHandler),f.autoOff&&(a(document).on(f.clickEvName,f.turnOffHandler),a(document).on("show.canvas",f.turnOffHandler)),f.$poc.trigger(c.SW_ON_AFTER),f.$el.trigger(c.SW_ON_AFTER),f.type==="radio"&&f.$poc.on(c.SW_ON_AFTER,f.turnOffHandler)),f.stateless||b.lsSet("state_"+f.$el.attr("id"),f.state)},f.turnOnHandler=function(a){f.stateless=a.type===c.SW_ON_STATELESS?!0:!1,f.state||f.toggleSwitch()},f.turnOffHandler=function(a){f.stateless=a.type===c.SW_OFF_STATELESS?!0:!1,f.state&&f.toggleSwitch()},f.clickHandler=function(a){return a.preventDefault(),!1},f.pointerUpHandler=function(a){a.stopPropagation(),f.toggleSwitch()},f.init()},a.jr.Switcher.defaultOptions={state:!1,type:"radio",poc:null,autoOff:!0,stateless:!0},a.fn.jr_Switcher=function(b){return this.each(function(){new a.jr.Switcher(this,b)})},a.fn.getjr_Switcher=function(){return this.data("jr.Switcher")}}(jQuery),function(a){a.jr||(a.jr=new Object);var b=a.jr.utils,c=a(document),d={P_SHOW:"jr:panel:show",P_SHOW_STATELESS:"jr:panel:show:stateless",P_HIDE:"jr:panel:hide",P_HIDE_STATELESS:"jr:panel:hide:stateless",P_SHOW_AFTER:"jr:panel:show:after",P_HIDE_AFTER:"jr:panel:hide:after"},e=150;a.jr.Panel=function(b,f){var g=this;g.$el=a(b),g.el=b,g.$el.data("jr.Panel",g),g.init=function(){g.options=a.extend({},a.jr.Panel.defaultOptions,f),g.$poc=a(g.options.poc),g.clickEvName="pointerup",g.$el.on(d.P_SHOW,g.showHandler),g.$el.on(d.P_SHOW_STATELESS,g.showHandler),g.$el.on(d.P_HIDE,g.hideHandler),g.$el.on(d.P_HIDE_STATELESS,g.hideHandler),g.$el.on(g.clickEvName,g.clickHandler),g.$poc.on("jr:switch:on:after",g.options.inverted?g.hideHandler:g.showHandler),g.$poc.on("jr:switch:off:before",g.options.inverted?g.showHandler:g.hideHandler),g.$el.find(".jr-p-close").on(g.clickEvName,g.hideHandler),g.$el.on(d.P_SHOW_AFTER,g.showAfterHandler),g.$el.on(d.P_HIDE_AFTER,g.hideAfterHandler)},g.kbdHandler=function(a){a.keyCode==27&&g.options.hideOnEscape&&g.$el.trigger(d.P_HIDE)},g.stopPropagation=function(a){!g.options.propogateClick&&(a.type==="click"||a.type==="pointerup")&&a.stopPropagation()},g.clickHandler=function(a){g.stopPropagation(a),c.trigger("jr:user:active")},g.hideHandler=function(a){a.type===d.P_HIDE||a.type==="click"||a.type===g.clickEvName?(g.$poc.trigger("jr:switch:off"),g.stopPropagation(a)):a.type===d.P_HIDE_STATELESS?g.$poc.trigger("jr:switch:off:stateless"):setTimeout(function(){g.$el.addClass("hidden"),g.$el.trigger(d.P_HIDE_AFTER)},e),c.unbind("keydown",g.kbdHandler)},g.showHandler=function(a){a.type===d.P_SHOW?g.$poc.trigger("jr:switch:on"):a.type===d.P_SHOW_STATELESS?g.$poc.trigger("jr:switch:on:stateless"):setTimeout(function(){g.$el.removeClass("hidden"),g.$el.trigger(d.P_SHOW_AFTER)},e),c.on("keydown",g.kbdHandler)},g.showAfterHandler=function(a){g.$el.trigger("show:after")},g.hideAfterHandler=function(a){g.$el.trigger("hide:after")},g.init()},a.jr.Panel.defaultOptions={poc:null,propogateClick:!1,hideOnEscape:!1,inverted:!1},a.fn.jr_Panel=function(b){return this.each(function(){new a.jr.Panel(this,b)})},a.fn.getjr_Panel=function(){return this.data("jr.Panel")}}(jQuery),function(a){a.jr||(a.jr=new Object);var b=a.jr.utils,c=["jr-fs-7","jr-fs-8","jr-fs-9","jr-fs-10","jr-fs-11","jr-fs-12","jr-fs-13","jr-fs-14","jr-fs-15","jr-fs-18","jr-fs-21","jr-fs-24"],d=["jr-col-auto","jr-col-1","jr-col-2"],e=["animate","no-animate"],f={"jr-col-auto":"$colAuto","jr-col-1":"$col1","jr-col-2":"$col2"},g={animate:"$animYes","no-animate":"$animNo"};a.jr.PanelTypo=function(h,i){var j=this;j.$el=a(h),j.el=h,j.$el.data("jr.PanelTypo",j),j.clickEvName="pointerup",j.init=function(){j.options=a.extend({},a.jr.PanelTypo.defaultOptions,i),j.$fontSmaller=j.$el.find(".sf"),j.$fontLarger=j.$el.find(".lf"),j.$colAuto=j.$el.find(".bcol-auto"),j.$col1=j.$el.find(".bcol-1"),j.$col2=j.$el.find(".bcol-2"),j.$animYes=j.$el.find(".anim-yes"),j.$animNo=j.$el.find(".anim-no"),j.initProp(c,"fontSizeClassName"),j.initProp(d,"colCountClassName"),j.initProp(e,"animateClassName"),b.lsGet("fontSizeClassName")==null&&a("html").addClass(j.fontSizeClassName),b.lsGet("colCountClassName")==null&&a("html").addClass(j.colCountClassName),parseInt(a("meta[name=jr-col-layout]").attr("content"))==1&&a("html").addClass("jr-col-1-force"),j.setupButtons(f,"colCountClassName",!0),j.setupButtons(g,"animateClassName",!0),j.$fontSmaller.on(j.clickEvName,j.handleFontSmaller),j.$fontLarger.on(j.clickEvName,j.handleFontLarger),j.$colAuto.on(j.clickEvName,j.handleColAuto),j.$col1.on(j.clickEvName,j.handleCol1),j.$col2.on(j.clickEvName,j.handleCol2),j.$animYes.on(j.clickEvName,j.handleAnimYes),j.$animNo.on(j.clickEvName,j.handleAnimNo)},j.value2Idx=function(b,c){var d,e=null;if(typeof c=="string"&&a.isArray(b))for(d=0;d<b.length;d++)c.localeCompare(b[d])==0?e=d:0;return e},j.initProp=function(c,d){var e=b.lsGet(d);return j.value2Idx(c,e)==null&&(j.value2Idx(c,j.options[d])!=null?e=j.options[d]:a.jr.PanelTypo.defaultOptions[d]!=null&&(e=a.jr.PanelTypo.defaultOptions[d])),j[d]=e},j.prevFontSizeClassName=function(a){var b=j.value2Idx(c,a);return b!=null&&b>0?c[b-1]:null},j.nextFontSizeClassName=function(a){var b=j.value2Idx(c,a);return b!=null&&b<c.length-1?c[b+1]:null},j.preventDefaultTM=function(a){a.type=="pointerup"&&a.preventDefault()},j.switchFontSize=function(c){var d=j.fontSizeClassName,e;c=="smaller"&&(e=j.prevFontSizeClassName(d)),c=="larger"&&(e=j.nextFontSizeClassName(d)),e!=null&&(b.lsSet("fontSizeClassName",j.fontSizeClassName=e),a("html").removeClass(d).addClass(e))},j.handleFontSmaller=function(a){j.preventDefaultTM(a),j.switchFontSize("smaller")},j.handleFontLarger=function(a){j.preventDefaultTM(a),j.switchFontSize("larger")},j.setupButtons=function(c,d,e){var f=j[d];e===!0?(j[c[f]].addClass("on"),a("html").addClass(f),b.lsSet(d,f)):(j[c[f]].removeClass("on"),a("html").removeClass(f))},j.activateButton=function(a,b,c,d){j.preventDefaultTM(a),j.setupButtons(b,c,!1),j[c]=d,j.setupButtons(b,c,!0)},j.handleColAuto=function(a){j.activateButton(a,f,"colCountClassName","jr-col-auto")},j.handleCol1=function(a){j.activateButton(a,f,"colCountClassName","jr-col-1")},j.handleCol2=function(a){j.activateButton(a,f,"colCountClassName","jr-col-2")},j.handleAnimYes=function(a){j.activateButton(a,g,"animateClassName","animate")},j.handleAnimNo=function(a){j.activateButton(a,g,"animateClassName","no-animate")},j.init()},a.jr.PanelTypo.defaultOptions={fontSizeClassName:"jr-fs-12",colCountClassName:"jr-col-auto",animateClassName:"no-animate"},a.fn.jr_PanelTypo=function(b){return this.each(function(){new a.jr.PanelTypo(this,b)})},a.fn.getjr_PanelTypo=function(){return this.data("jr.PanelTypo")}}(jQuery),function(a){a.jr||(a.jr=new Object),a.jr.PanelCmap=function(b,c){var d=this;d.$el=a(b),d.el=b,d.$el.data("jr.PanelCmap",d),d.init=function(){d.options=a.extend({},a.jr.PanelCmap.defaultOptions,c),d.$poc=a(d.options.poc),d.mapList=a("article h2[id]"),d.$cnt=d.$el.find(".cnt");if(d.$cnt.length==1){var b=d.$cnt.children().filter("a"),e=b.has(".select").last(),f;e.length==0&&b.length>0?d.mapList.length>0?f=b.last():0:f=e,f!=null&&f.length>0&&f.removeClass("select").addClass("selected").prop("onclick",null).removeProp("onclick").removeAttr("href onclick target");if(b.length>0){var g=a("<ul>");b.each(function(){a(this).appendTo(a("<li>").appendTo(g))}),g.appendTo(d.$cnt)}if(d.mapList.length>0){var h=a("<ul>");d.mapList.each(function(){var b=a(this),c=b.attr("id");a('<a href="#'+c+'"></a>').on("click",d.handleLinks).append(b.contents().clone()).data("rid",c).attr("style",b.attr("style")).appendTo(a("<li>").appendTo(h))}),h.appendTo(b.length==0?d.$cnt:f.parent())}}d.$poc.on("jr:pm:pages:changed",a.throttle(1e3,d.pagesChangedHandler)),d.$el.on("jr:panel:show:after",d.AfterShowHandler)},d.pagesChangedHandler=function(a,b){var c=a.type;c==="jr:pm:pages:changed"&&(d.pm==null?d.pm=d.$poc.getjr_PageManager():0,d.pi=b,d.updateMapHighliting())},d.updateMapHighliting=function(){var b=d.$cnt.find("a");b.each(function(){var b=a(this);b.data("page",d.pm.id2Page(b.data("rid")))}),b.each(function(c){var e=a(this),f=a(b[c+1]);e.data("page")<=d.pi.pn&&(f.length===0||d.pi.pn<f.data("page")||e.data("page")==d.pi.pn&&e.data("page")==f.data("page"))?e.addClass("current"):e.removeClass("current")})},d.AfterShowHandler=function(){var b=d.$cnt.find("a");b.each(function(b){var c=a(this),d=c.parent();typeof c.data("rid")=="undefined"||a("#"+c.data("rid")).is(":visible")?d.removeClass("hidden"):d.addClass("hidden")})},d.closePanel=function(a){return a!=null?a.preventDefault():null,d.$el.trigger("jr:panel:hide"),!1},d.handleLinks=function(a){return window.location.hash="",d.closePanel(),!0},d.init()},a.jr.PanelCmap.defaultOptions={poc:null},a.fn.jr_PanelCmap=function(b){return this.each(function(){new a.jr.PanelCmap(this,b)})},a.fn.getjr_PanelCmap=function(){return this.data("jr.PanelCmap")}}(jQuery),function(a){a.jr||(a.jr=new Object),a.jr.PanelRtoc=function(b,c){var d=this;d.$el=a(b),d.el=b,d.$el.data("jr.PanelRtoc",d),d.init=function(){d.options=a.extend({},a.jr.PanelRtoc.defaultOptions,c),d.$poc=a(d.options.poc),d.$cnt=d.$el.find(".cnt");if(d.$cnt.length==1){var b=d.$cnt.children().filter("a"),e=b.has(".select").last(),f;e.length==0&&b.length>0?0:f=e,f!=null&&f.length>0&&f.removeClass("select").addClass("selected").prop("onclick",null).removeProp("onclick").removeAttr("href onclick target");if(b.length>0){var g=a("<ul>");b.each(function(){a(this).appendTo(a("<li>").appendTo(g))}),g.appendTo(d.$cnt)}}d.$el.one("jr:panel:show:after",d.AfterShowHandler)},d.AfterShowHandler=function(){var b=a("meta[name='bk-toc-url']").attr("content");if(b){var c=a("<center/>"),e=a("<span class='spinner'/>").appendTo(c);c.appendTo(d.$cnt),a.ajax({url:b,dataType:"html",success:function(b){var e=a(b);c.remove(),a("<hr/>").appendTo(d.$cnt),e.find("#source-contents").removeAttr("class id").appendTo(d.$cnt),e.find("a").on("pointerup",d.handleLinks);var f=a("meta[name='bk-non-canon-loc']").attr("content"),g=a("a[href='"+f.substring(0,f.indexOf("?"))+"']");g.addClass("current").removeAttr("href");if(f&&g&&g.get()&&g.offset()){var h=g.offset().top-d.$cnt.offset().top+d.$cnt.scrollTop()-Math.round(d.$cnt.height()/3);d.$cnt.animate({scrollTop:h})}},error:function(b){c.remove();var e=a('<center class="ajax_error">').text("An error occured on attempt to retrive Table of Content. ["+b.status+" "+b.statusText+"] "+this.url);e.appendTo(d.$cnt),d.$el.one("jr:panel:hide:after",e,d.onErrorAfterHideHandler),d.$el.one("jr:panel:show:after",d.AfterShowHandler)}})}},d.onErrorAfterHideHandler=function(a){var b=a.data;b.remove()},d.closePanel=function(a){return a!=null?a.preventDefault():null,d.$el.trigger("jr:panel:hide"),!1},d.handleLinks=function(a){return d.closePanel(),!0},d.init()},a.jr.PanelRtoc.defaultOptions={poc:null},a.fn.jr_PanelRtoc=function(b){return this.each(function(){new a.jr.PanelRtoc(this,b)})},a.fn.getjr_PanelRtoc=function(){return this.data("jr.PanelRtoc")}}(jQuery),function(a){a.jr||(a.jr=new Object);var b=a.jr.utils,c=a(document),d=c.children(),e={NEXT_PAGE:"jr:is:go:next:page",PREV_PAGE:"jr:is:go:prev:page",PAGES_CHANGED:"jr:is:pages:changed"};a.jr.PanelIstrip=function(c,f){var g=this;g.$el=a(c),g.el=c,g.$el.data("jr.PanelIstrip",g),g.init=function(){g.options=a.extend({},a.jr.PanelIstrip.defaultOptions,f),g.$style=a('<style type="text/css"/>'),g.$panevp=a('<div class="panevp"/>'),g.$pane=a('<div class="pane"/>'),a.isNumeric(g.minM=parseFloat(g.options.minM))?null:g.minM=a.jr.PanelIstrip.defaultOptions.minM,g.fts=a("article").find(".fig[id] img.small-thumb, .table-wrap[id] img.small-thumb");if(g.fts.length===0){g.$el.trigger("jr:panel:hide:stateless");return}g.fts.each(function(b){var c=a(this),d=c.parent().closest("*[id]"),e=d.find("a").first(),f=d.attr("id"),h=c.clone(),i=a("<a/>").css({"background-image":"url("+h.attr("src")+")"}).attr("rid",f).attr("rid-figpopup",f).attr("co-class","co-fig");i.on("pointerup",g.handlePointerUp),i.on("click",g.handleClick),i.attr("title",h.attr("alt")!=null?h.attr("alt"):h.attr("title")!=null?h.attr("title"):"").attr("rid",f),e.attr("href")!=null?i.attr("href",e.attr("href")):0,g.$pane.append(i)}),g.$itm=g.$pane.children().first(),a("head").append(g.$style),g.$el.append(g.$panevp.append(g.$pane)),g.pi={fp:0,lp:0,cp:0,changed:!1},a(document).on("keydown",g.kbdHandler),a(window).on("resize",g.handleResize),g.$el.on("jr:panel:show:after",g.Reflow),g.$el.on(e.NEXT_PAGE,g.handleNextPage),g.$el.on(e.PREV_PAGE,g.handlePrevPage),b.touch&&a.fn.swipe!=null&&g.$el.swipe({threshold:25,swipeLeft:g.handleNextPage,swipeRight:g.handlePrevPage});if(a.fn.figPopup!=null){var c=new a.fn.figPopup,d=g.$pane.find("a");d.popupSensor({statIfLonger:500,delayIn:c.delayIn,delayOut:c.delayOut}),a.fn.hoverIntent&&d.hoverIntent(c)}g.flowItems()},g.flowItems=function(){g.arrangeMargin(),g.calcPages()},g.calcMetrics=function(){var a=g.$panevp,b=a.get(0),c=g.$pane,d=g.$itm;g.$pane_m={iw:a.innerWidth(),sw:b.scrollWidth+ -c.position().left,pl:c.position().left},g.$itm_m={ow:d.outerWidth()}},g.arrangeMargin=function(){g.$panevp.css({width:"auto",display:"block"}),g.calcMetrics();var a=g.$pane_m.iw,b=g.$itm_m.ow,c=Math.floor(a/(b+g.minM*2)),d=Math.round((a-b*c)/c/2);iwpaneFixed=(b+d*2)*Math.floor(a/(b+d*2)),iwpaneFixed>0&&g.$panevp.css({width:iwpaneFixed,display:"block"}),g.$pane.children().css({marginLeft:d.toPrecision(4)+"px",marginRight:d.toPrecision(4)+"px"})},g.calcPages=function(){g.fPage(g.calcFPage()),g.lPage(g.calcLPage()),g.cPage(g.calcCPage()),g.pagesChanged()&&g.triggerPagesChanged()},g.makePageFunc=function(b,c){return function(d){var e=g.pi[b];if(e==null||e===0)g.pi[b]=g[c]();return g.pi[b]=a.isNumeric(d)?parseInt(d):g.pi[b]!=null?g.pi[b]:0,e!==g.pi[b]&&g.pagesChanged(!0),g.pi[b]}},g.fPage=g.makePageFunc("fp","calcFPage"),g.lPage=g.makePageFunc("lp","calcLPage"),g.cPage=g.makePageFunc("cp","calcCPage"),g.pagesChanged=function(a){return typeof a=="boolean"?g.pi.changed=a:0,g.pi.changed},g.calcFPage=function(){return 1},g.calcCPage=function(){var a=g.pxOffset2Page(g.contentPosLeft(),"r"),b=g.fPage(),c=g.lPage();return a<b?a=b:a>c?a=c:0,a},g.calcLPage=function(){return g.pxOffset2Page(g.contentWidth()-1,"f")},g.pxOffset2Page=function(a,b){return b!=null&&b==="r"?Math.round(a/g.pageWidth())+1:Math.floor(a/g.pageWidth())+1},g.pageWidth=function(){return g.$pane_m.iw=g.$panevp.innerWidth()},g.contentWidth=function(){return g.$pane_m.sw=g.$panevp.get(0).scrollWidth+ -g.$pane.position().left},g.contentPosLeft=function(){return g.$pane_m.pl=-g.$pane.position().left},g.triggerPagesChanged=function(){g.$el.trigger(e.PAGES_CHANGED,{pn:g.cPage(),lp:g.lPage()})},g.nextPage=function(){var a=g.cPage();return a<g.lPage()?a+1:a},g.prevPage=function(){var a=g.cPage();return a>g.fPage()?a-1:a},g.goNextPage=function(){g.goPage(g.nextPage())},g.goPrevPage=function(){g.goPage(g.prevPage())},g.Reflow=function(){g.flowItems(),g.goPage(g.calcCPage())},g.goPage=function(c){if(a.isNumeric(c)===!0&&c>=g.fPage()&&c<=g.lPage()){var e=g.pageWidth(),f=Math.floor(parseFloat(c)),h=b.csstransforms3d&&d.hasClass("animate")?b.transl3DPattern:b.transl2DPattern;g.$pane.css(b.transformCssPropName,h.replace(/@/g,-(e*(f-1)))),g.cPage(f),g.pagesChanged()&&g.triggerPagesChanged()}},g.handleClick=function(a){return a.stopPropagation(),a.preventDefault(),!1},g.handlePointerUp=function(b){b.stopPropagation(),b.originalEvent!=null&&b.originalEvent.pointerType=="mouse"&&a(document.getElementById(a(this).attr("rid"))).find("a").first().trigger("open")},g.handleNextPage=function(a){return a!=null&&a.preventDefault(),g.goNextPage(),!1},g.handlePrevPage=function(a){return a!=null&&a.preventDefault(),g.goPrevPage(),!1},g.handleResize=function(b){a.isNumeric(g.ReflowTimerId)&&clearTimeout(g.ReflowTimerId),g.ReflowTimerId=setTimeout(g.Reflow,1e3)},g.kbdHandler=function(a){var b=a.keyCode;b===188?g.goPrevPage():b===190&&g.goNextPage()},g.init()},a.jr.PanelIstrip.defaultOptions={minM:5},a.fn.jr_PanelIstrip=function(b){return this.each(function(){new a.jr.PanelIstrip(this,b)})},a.fn.getjr_PanelIstrip=function(){return this.data("jr.PanelIstrip")}}(jQuery),function($){$.jr||($.jr=new Object);var $u=$.jr.utils,$win=$(window),$doc=$(document),state={UNDEFIND:-1,HIDDEN:0,EXPOSED:1},evt={ACTIVATED:"jr:fip:activated",DISMISSED:"jr:fip:dismissed",SEARCHED:"jr:fip:searched",MATCH_NEXT:"jr:fip:match:next",MATCH_PREV:"jr:fip:match:prev"};$.jr.Fip=function(el,options){var base=this;base.$el=$(el),base.el=el,base.$el.data("jr.Fip",base),base.init=function(){base.options=$.extend({},$.jr.Fip.defaultOptions,options),base.fipTargets=base.options.fipTargets,base.$poc=$(base.options.poc),base.state=state.UNDEFIND,base.$mgB=base.$el.find("#jr-fip-mg"),base.$doneB=base.$el.find("#jr-fip-done"),base.$nextB=base.$el.find("#jr-fip-next"),base.$prevB=base.$el.find("#jr-fip-prev"),base.$termF=base.$el.find("#jr-fip-term"),base.$matchesP=base.$el.find("#jr-fip-matches");var a="pointerup";$doc.on("keydown",base.docKbdHandler),base.$mgB.on(a,base.mgClkHandler),base.$doneB.on(a,base.doneClkHandler),base.$nextB.on(a,base.nextClkHandler),base.$prevB.on(a,base.prevClkHandler),base.$termF.on("keyup",base.termKUHandler),base.state=state.HIDDEN,base.$el.on("focusin",base.focusInHandler),base.$el.on("pointerup",base.pointerUpHandler),base.$poc.on("jr:switch:on:after",base.showHandler),base.$poc.on("jr:switch:off:before",base.hideHandler),$win.on("resize",$.throttle(500,base.resizeHandler)),base.resetCounters()},base.docKbdHandler=function(a){var b=a.keyCode,c=a.ctrlKey||a.metaKey,d=a.shiftKey,e=$(a.target),f=base.$el;if(c&&b===70)a.preventDefault(),a.stopPropagation(),base.$poc.trigger("jr:switch:on"),base.state==state.EXPOSED&&base.$termF.focus().select();else if(base.state==state.EXPOSED)if(b==27)e.closest(f).length+f.closest(e).length>0&&base.$poc.trigger("jr:switch:off");else if(c&&b==71||b==114)d?base.prevClkHandler(a):base.nextClkHandler(a)},base.termKbdHandler=function(a){var b=a.keyCode,c=a.ctrlKey||a.metaKey,d=a.shiftKey,e=$(a.target),f=base.$el;base.state==state.EXPOSED&&(b==27?(a.preventDefault(),e.closest(f).length+f.closest(e).length>0&&base.$poc.trigger("jr:switch:off")):c&&b===70&&(a.preventDefault(),base.$termF.focus().select()),a.stopPropagation())},base.exposeUI=function(){base.fipTargets.length>0&&(base.state!==state.EXPOSED&&(base.$el.removeClass("hidden"),base.state=state.EXPOSED,base.term="",base.$el.trigger(evt.ACTIVATED)),base.$termF.focus().select(),base.$termF.on("keydown",base.termKbdHandler))},base.hideUI=function(){base.state==state.EXPOSED&&(base.cleanMarks(),base.$el.addClass("hidden"),base.state=state.HIDDEN,$.trackFocus.refocus(),base.$el.trigger(evt.DISMISSED),base.$termF.off("keydown",base.termKbdHandler))},base.showHandler=function(a){base.exposeUI()},base.hideHandler=function(a){base.hideUI()},base.focusInHandler=function(a){base.setFipTargetPoc()},base.pointerUpHandler=function(a){a.stopPropagation()},base.setFipTargetPoc=function(){var a=$.trackFip.active();base.fipMarkTotal>0&&a.get(0)!=base.$active.get(0)&&base.cleanMarks(),base.$fipTargetPoc=null,base.$fipTarget=null,base.$active=a,$.each(base.fipTargets,function(b,c){var d=$(c.fipTarget),e=$(c.poc);return d.length==1&&e.length==1&&(a.closest(d).length>0||d.closest(a).length>0)?(base.$fipTargetPoc=e,base.$fipTarget=d,!1):!0})},base.doneClkHandler=function(a){a.preventDefault(),base.$poc.trigger("jr:switch:off")},base.nextClkHandler=function(a){a.preventDefault(),base.npClkStep(1)},base.prevClkHandler=function(a){a.preventDefault(),base.npClkStep(-1)},base.npClkStep=function(a){if(base.fipMarkTotal>0){base.removeActiveMark(),base.fipMarkCurrent+=a;var b=base.fipMarkCurrent,c=base.fipMarkTotal;base.fipMarkCurrent=b<0?c-1:b>=c?0:b,base.updateMatches(),base.setActiveMark(),c>1&&Math.abs(a)>0&&base.$el.trigger(a>0?evt.MATCH_NEXT:evt.MATCH_PREV)}},base.termKUHandler=function(a){var b=a.keyCode,c=a.ctrlKey||a.metaKey,d=a.shiftKey;b==13&&(base.findHandler(a)||(d?base.prevClkHandler(a):base.nextClkHandler(a)))},base.mgClkHandler=function(a){a.preventDefault(),base.findHandler(a)||base.nextClkHandler(a)},base.getTermVal=function(){return base.$termF.val().trim()},base.findHandler=function(a){base.$termF.select();var b=base.getTermVal();return a!=null&&a.originalEvent!=null&&a.originalEvent.pointerType=="mouse"&&base.$fipTarget.focus(),b.length>0&&b.toLowerCase()!=base.term?(base.cleanMarks(),base.find(b),!0):!1},base.find=function(a){if(base.$fipTarget instanceof jQuery){base.$fipTarget.is(":visible")||$.trackFocus.refocus();var b=a.toLowerCase(),c=new RegExp("("+$u.regexp.escape(b)+")","gi"),d=base.$fipTarget.find(":not(iframe,script)").contents().filter(function(){return this.nodeType==3&&this.nodeValue.match(/\S/)}).filter(function(){var a=this,d=$(a);if(a.nodeValue.toLowerCase().indexOf(b)>=0&&window.getComputedStyle(d.parent()[0]).opacity>0)d.replaceWith(a.nodeValue.replace(c,'<span class="fip_mark"><i style="display:inline-block" />$1</span>'));else return!1;return!0});base.term=b;if(d.length>0){base.fipMarks=base.$fipTarget.find("span.fip_mark"),base.fipMarkTotal=base.fipMarks.length,base.fipMarkCurrent=0;for(var e=0;e<base.fipMarks.length;e++){var f=base.positionInArticle($(base.fipMarks[e]));if(f.left>0&&f.top>0){base.fipMarkCurrent=e;break}}base.npClkStep(0)}base.$el.trigger(evt.SEARCHED,{term:b,count:d.length})}},base.removeActiveMark=function(){$(base.fipMarks.get(base.fipMarkCurrent)).removeClass("fip_active")},base.getActiveMark=function(){var a=$(base.fipMarks.get(base.fipMarkCurrent)).addClass("fip_active");return a},base.setActiveMark=function(){var a=base.getActiveMark(),b=base.positionInArticle(a),c=$.Event("jr:go:pos");b&&base.$fipTargetPoc.trigger(c,{pos:b})},base.cleanMarks=function(){base.fipMarkTotal>0&&base.$fipTarget.find("span.fip_mark").each(function(){with(this.parentNode)this.removeChild(this.firstChild),replaceChild(this.firstChild,this),normalize()}),base.resetCounters(),base.updateMatches()},base.positionInArticle=function(a){if(a instanceof jQuery){var b=a.children().first().position(),c=a.parentsUntil("article");return c.map(function(){var a=$(this),c=this;if(a.css("position")!="static"){var d=a.position();b.left+=d.left,b.top+=d.top}}),b}return null},base.updateMatches=function(){var a=base.fipMarkTotal;base.$matchesP.text(a==0?"no matches":base.fipMarkCurrent+1+" of "+a+" match"+(a>1?"es":""))},base.resetCounters=function(){base.fipMarkCurrent=0,base.fipMarkTotal=0,base.fipMarks=$([])},base.resizeHandler=function(a){base.state==state.EXPOSED&&base.setActiveMark()},base.init()},$.jr.Fip.defaultOptions={poc:null,fipTargets:[]},$.fn.jr_Fip=function(a){return this.each(function(){new $.jr.Fip(this,a)})},$.fn.getjr_Fip=function(){return this.data("jr.Fip")}}(jQuery),!function(a){if(!a.console){var b=a.console={};b.log=b.error=b.info=b.debug=b.warn=b.trace=b.dir=b.dirxml=b.group=b.groupEnd=b.time=b.timeEnd=b.assert=b.profile=b.profileEnd=function(){}}}(window),jQuery(document).ready(function(){var a=$.jr.utils,b=window.location.href,c=$("#jr-content"),d=function(a){console.error("%s [stack: %s]",a.message,a.stack)};try{if(!a.csscolumns)console.error("Your browser is not supported. HTML5/CSS3 and ECMAScript, 5th Edition, CSS Multicolumn layout features are required."),c.trigger("jr:util:unsupported-browser");else{$("#jr-ui").removeClass("hidden");var e=$("#jr-content"),f;function g(a){a!=null&&a.each!=null&&a.each(function(){var a=this,b=$(this);$.each(["top","bottom"],function(c,d){a.style[d]="",b.css(d,Math.floor(parseFloat(b.css(d))))})})}g(e),$(window).resize($.throttle(500,function(a){g(e)}));try{$("body").trackFocus()}catch(h){d(h)}try{$("#jr-pi").jr_PaginationStatus({poc:"#jr-content"}).removeClass("hidden")}catch(h){d(h)}try{a.touch||($("#jr-pm-left").jr_PageTurnSensor({action:"prev",actionEv:"jr:pm:go:prev:page",piEv:"jr:pm:pages:changed",poc:"#jr-content",iUnit:!0}),$("#jr-pm-right").jr_PageTurnSensor({action:"next",actionEv:"jr:pm:go:next:page",piEv:"jr:pm:pages:changed",poc:"#jr-content",iUnit:!0})),$("#jr-pi-prev").jr_PageTurnSensor({action:"prev",actionEv:"jr:pm:go:prev:page",piEv:"jr:pm:pages:changed",poc:"#jr-content",iUnit:!0}),$("#jr-pi-next").jr_PageTurnSensor({action:"next",actionEv:"jr:pm:go:next:page",piEv:"jr:pm:pages:changed",poc:"#jr-content",iUnit:!0})}catch(h){d(h)}try{$("#jr-progress").jr_PageProgressBar({poc:"#jr-content"}).jr_Panel({poc:"#jr-is-sw",inverted:!0,propogateClick:!0})}catch(h){d(h)}try{$("#jr-istrip").jr_Panel({poc:"#jr-is-sw",propogateClick:!0}),$("#jr-is-sw").jr_Switcher({poc:"#jr-dash",state:!0,autoOff:!1,stateless:!1}),$("#jr-is-prev").jr_PageTurnSensor({action:"prev",actionEv:"jr:is:go:prev:page",piEv:"jr:is:pages:changed",poc:"#jr-istrip"}),$("#jr-is-next").jr_PageTurnSensor({action:"next",actionEv:"jr:is:go:next:page",piEv:"jr:is:pages:changed",poc:"#jr-istrip"}),$("#jr-istrip").jr_PanelIstrip()}catch(h){d(h)}try{var i="/"+$("meta[name=ncbi_db]").attr("content")+"/";$("article a").jr_Links({poc:"#jr-content",uri_prefix:i})}catch(h){d(h)}try{$("#jr-links-p").trackFocus().jr_Panel({poc:"#jr-links-sw",hideOnEscape:!0}),$("#jr-links-sw").jr_Switcher({poc:"#jr-head"})}catch(h){d(h)}try{$("#jr-alt-p").trackFocus().jr_Panel({poc:"#jr-alt-sw",hideOnEscape:!0}),$("#jr-alt-sw").jr_Switcher({poc:"#jr-head"})}catch(h){d(h)}try{"jr_PanelCmap"in $.fn&&($("#jr-cmap-p").trackFocus().jr_Panel({poc:"#jr-cmap-sw",hideOnEscape:!0}),$("#jr-cmap-p").jr_PanelCmap({poc:"#jr-content"}),$("#jr-cmap-sw").jr_Switcher({poc:"#jr-head"}))}catch(h){d(h)}try{"jr_PanelRtoc"in $.fn&&($("#jr-rtoc-p").trackFocus().jr_Panel({poc:"#jr-rtoc-sw",hideOnEscape:!0}),$("#jr-rtoc-p").jr_PanelRtoc({poc:"#jr-content"}),$("#jr-rtoc-sw").jr_Switcher({poc:"#jr-head"}))}catch(h){d(h)}try{$("#jr-typo-p").trackFocus().jr_Panel({poc:"#jr-typo-sw",hideOnEscape:!0}),$("#jr-typo-p").jr_PanelTypo(),$("#jr-typo-sw").jr_Switcher({poc:"#jr-head"})}catch(h){d(h)}try{$("#jr-content").trackFocus().trackFip({"default":!0}).jr_PageManager()}catch(h){d(h)}try{$("#jr-content").jr_HistoryKeeper()}catch(h){d(h)}try{$("#jr-fip").trackFocus().jr_Fip({poc:"#jr-fip-sw",fipTargets:[{fipTarget:"#jr-content article[data-type=main]",poc:"#jr-content"},{fipTarget:"#jr-objectbox article",poc:"#jr-objectbox"}]}),$("#jr-fip-sw").jr_Switcher({poc:"#jr-fip",autoOff:!1})}catch(h){d(h)}try{$("#jr-objectbox").trackFocus().trackFip(),$("article[data-type=main] a.figpopup, article[data-type=main] a:not(.figpopup)[rid-ob]").jr_ObjectBox({contentLocal:!0,contentLocalAttr:"rid-ob"})}catch(h){d(h)}try{$("#jr-help-p").trackFocus().jr_Panel({poc:"#jr-help-sw",hideOnEscape:!0}),$("#jr-help-sw").jr_Switcher({poc:"#jr-head"}),$("#jr-about-sw").jr_ObjectBox({objectBoxClass:"about"}),$("#jr-helpobj-sw").jr_ObjectBox({objectBoxClass:"help"}),$("#jr-about-sw,#jr-helpobj-sw").on("click",function(){$("#jr-help-p").trigger("jr:panel:hide")}),$("#jr-bkhelp-p").trackFocus().jr_Panel({poc:"#jr-bkhelp-sw",hideOnEscape:!0}),$("#jr-bkhelp-sw").jr_Switcher({poc:"#jr-head"})}catch(h){d(h)}try{var j=new $.fn.figPopup,k=$("article[data-type=main] a.figpopup"),l=$("article[data-type=main] a.bibr");k.each(function(){$(this).attr("co-class","co-fig")}),l.each(function(){var a=$(this);a.attr("co-class","co-refbox").attr("co-rid",a.attr("rid"))}),k.popupSensor({statIfLonger:500,delayIn:j.delayIn,delayOut:j.delayOut}),l.popupSensor({statIfLonger:500,delayIn:j.delayIn,delayOut:j.delayOut}),$.fn.hoverIntent&&(k.hoverIntent(j),l.hoverIntent(j))}catch(h){d(h)}try{var m=function(a){$t=$(this),$t.citationexporter("render",$('meta[name="pmcaccid"]').attr("content"))},n=$("a.ctxp"),o=$("article[data-type=main]");n.length>0&&o.length>0&&(o.after('<article data-type="cite" id="jr-cite-0"><h3 class="loading">Loading ...</h3></article>'),n.attr("rid-ob","jr-cite-0"),n.on("citationexporterrendered",function(a,b){$("#jr-cite-0").html(b.content).find("a").jr_Links({poc:"#jr-content"}),n.trigger("refresh")}).on("citationexporterfailed",function(a,b){$("#jr-cite-0").html('<p class="align_center"><strong>Sorry! An error occurred while rendering the citation. Please try again later.</strong></p>'),n.trigger("refresh"),n.one("pointerup",m)}).one("pointerup",m).jr_ObjectBox({contentLocal:!0,contentLocalAttr:"rid-ob",objectBoxClass:"cite"}))}catch(h){d(h)}try{$("a.btn.share").on("click",function(){return!1}).on("pointerup",function(){var a=this.href,b=this.target;setTimeout(function(){window.open(a,b?b:"_blank","width=600,height=300,left=20,top=20,toolbar=0,resizable=0")},10),$(this).closest("aside").trigger("jr:panel:hide")})}catch(h){d(h)}}}catch(h){d(h)}}),jQuery(document).ready(function(){var a=jQuery,b=a.jr.utils,c="pointerup";a("a.lang-sw").on(c,function(b){var d=a(this),e=a("article[data-type=main]"),f=d.attr("lang");if(e.size()==1&&f!=null){var g=d.parent().find(".selected").toggleClass("selected").attr("lang");e.toggleClass("slang-"+g).toggleClass("slang-"+f),d.toggleClass("selected")}return a(document).trigger(c),!1})}),jQuery(document).ready(function(){var a=jQuery,b="pointerup";a(document).on(b,"a.oemail",function(b){var c=a(this),d=c.attr("data-email"),e=c.data("fixed");return e==null&&d!=null&&(c.data("fixed",!0),c.attr("href","mailto:"+d.reverse())),!0})}),jQuery(document).ready(function(){var a=jQuery;a("img.svg").each(function(){var b=a(this),c=b.attr("id"),d=b.attr("class"),e=b.attr("style"),f=b.attr("src");a.get(f,function(f){var g=a(f).find("svg");typeof c!="undefined"&&(g=g.attr("id",c)),typeof d!="undefined"&&(g=g.attr("class",d+" -svg")),typeof e!="undefined"&&(g=g.attr("style",e)),g=g.removeAttr("xmlns:a"),b.replaceWith(g)},"xml")})}),jQuery(document).ready(function(){var a=jQuery,b=a.jr.utils,c="pointerup";a("a.pmctoggle").on(c,function(a){var b=jQuery(this);return b.closest("dl").find("dd").fadeToggle(200,function(){b.toggleClass("toggled"),b.hasClass("toggled")?b.find("span:contains("+decodeURIComponent("%E2%96%BA")+")").replaceWith("<span>&#x25bc;</span>"):b.find("span:contains("+decodeURIComponent("%E2%96%BC")+")").replaceWith("<span>&#x25ba;</span>")}),!1})});